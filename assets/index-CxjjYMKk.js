(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function v1(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Hg={exports:{}},yl={},qg={exports:{}},ie={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wo=Symbol.for("react.element"),_1=Symbol.for("react.portal"),w1=Symbol.for("react.fragment"),x1=Symbol.for("react.strict_mode"),E1=Symbol.for("react.profiler"),T1=Symbol.for("react.provider"),k1=Symbol.for("react.context"),b1=Symbol.for("react.forward_ref"),I1=Symbol.for("react.suspense"),S1=Symbol.for("react.memo"),A1=Symbol.for("react.lazy"),hm=Symbol.iterator;function R1(t){return t===null||typeof t!="object"?null:(t=hm&&t[hm]||t["@@iterator"],typeof t=="function"?t:null)}var Wg={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Gg=Object.assign,Kg={};function $s(t,e,n){this.props=t,this.context=e,this.refs=Kg,this.updater=n||Wg}$s.prototype.isReactComponent={};$s.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};$s.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Qg(){}Qg.prototype=$s.prototype;function Th(t,e,n){this.props=t,this.context=e,this.refs=Kg,this.updater=n||Wg}var kh=Th.prototype=new Qg;kh.constructor=Th;Gg(kh,$s.prototype);kh.isPureReactComponent=!0;var dm=Array.isArray,Yg=Object.prototype.hasOwnProperty,bh={current:null},Xg={key:!0,ref:!0,__self:!0,__source:!0};function Jg(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)Yg.call(e,r)&&!Xg.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var u=Array(l),d=0;d<l;d++)u[d]=arguments[d+2];s.children=u}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:wo,type:t,key:i,ref:o,props:s,_owner:bh.current}}function N1(t,e){return{$$typeof:wo,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Ih(t){return typeof t=="object"&&t!==null&&t.$$typeof===wo}function C1(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var fm=/\/+/g;function wu(t,e){return typeof t=="object"&&t!==null&&t.key!=null?C1(""+t.key):e.toString(36)}function ma(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case wo:case _1:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+wu(o,0):r,dm(s)?(n="",t!=null&&(n=t.replace(fm,"$&/")+"/"),ma(s,e,n,"",function(d){return d})):s!=null&&(Ih(s)&&(s=N1(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(fm,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",dm(t))for(var l=0;l<t.length;l++){i=t[l];var u=r+wu(i,l);o+=ma(i,e,n,u,s)}else if(u=R1(t),typeof u=="function")for(t=u.call(t),l=0;!(i=t.next()).done;)i=i.value,u=r+wu(i,l++),o+=ma(i,e,n,u,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Ho(t,e,n){if(t==null)return t;var r=[],s=0;return ma(t,r,"","",function(i){return e.call(n,i,s++)}),r}function P1(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var yt={current:null},pa={transition:null},D1={ReactCurrentDispatcher:yt,ReactCurrentBatchConfig:pa,ReactCurrentOwner:bh};function Zg(){throw Error("act(...) is not supported in production builds of React.")}ie.Children={map:Ho,forEach:function(t,e,n){Ho(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Ho(t,function(){e++}),e},toArray:function(t){return Ho(t,function(e){return e})||[]},only:function(t){if(!Ih(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ie.Component=$s;ie.Fragment=w1;ie.Profiler=E1;ie.PureComponent=Th;ie.StrictMode=x1;ie.Suspense=I1;ie.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D1;ie.act=Zg;ie.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Gg({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=bh.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)Yg.call(e,u)&&!Xg.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var d=0;d<u;d++)l[d]=arguments[d+2];r.children=l}return{$$typeof:wo,type:t.type,key:s,ref:i,props:r,_owner:o}};ie.createContext=function(t){return t={$$typeof:k1,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:T1,_context:t},t.Consumer=t};ie.createElement=Jg;ie.createFactory=function(t){var e=Jg.bind(null,t);return e.type=t,e};ie.createRef=function(){return{current:null}};ie.forwardRef=function(t){return{$$typeof:b1,render:t}};ie.isValidElement=Ih;ie.lazy=function(t){return{$$typeof:A1,_payload:{_status:-1,_result:t},_init:P1}};ie.memo=function(t,e){return{$$typeof:S1,type:t,compare:e===void 0?null:e}};ie.startTransition=function(t){var e=pa.transition;pa.transition={};try{t()}finally{pa.transition=e}};ie.unstable_act=Zg;ie.useCallback=function(t,e){return yt.current.useCallback(t,e)};ie.useContext=function(t){return yt.current.useContext(t)};ie.useDebugValue=function(){};ie.useDeferredValue=function(t){return yt.current.useDeferredValue(t)};ie.useEffect=function(t,e){return yt.current.useEffect(t,e)};ie.useId=function(){return yt.current.useId()};ie.useImperativeHandle=function(t,e,n){return yt.current.useImperativeHandle(t,e,n)};ie.useInsertionEffect=function(t,e){return yt.current.useInsertionEffect(t,e)};ie.useLayoutEffect=function(t,e){return yt.current.useLayoutEffect(t,e)};ie.useMemo=function(t,e){return yt.current.useMemo(t,e)};ie.useReducer=function(t,e,n){return yt.current.useReducer(t,e,n)};ie.useRef=function(t){return yt.current.useRef(t)};ie.useState=function(t){return yt.current.useState(t)};ie.useSyncExternalStore=function(t,e,n){return yt.current.useSyncExternalStore(t,e,n)};ie.useTransition=function(){return yt.current.useTransition()};ie.version="18.3.1";qg.exports=ie;var B=qg.exports;const j1=v1(B);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var V1=B,L1=Symbol.for("react.element"),M1=Symbol.for("react.fragment"),O1=Object.prototype.hasOwnProperty,F1=V1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,U1={key:!0,ref:!0,__self:!0,__source:!0};function ey(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)O1.call(e,r)&&!U1.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:L1,type:t,key:i,ref:o,props:s,_owner:F1.current}}yl.Fragment=M1;yl.jsx=ey;yl.jsxs=ey;Hg.exports=yl;var c=Hg.exports,sc={},ty={exports:{}},jt={},ny={exports:{}},ry={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(U,Q){var q=U.length;U.push(Q);e:for(;0<q;){var K=q-1>>>1,J=U[K];if(0<s(J,Q))U[K]=Q,U[q]=J,q=K;else break e}}function n(U){return U.length===0?null:U[0]}function r(U){if(U.length===0)return null;var Q=U[0],q=U.pop();if(q!==Q){U[0]=q;e:for(var K=0,J=U.length,W=J>>>1;K<W;){var re=2*(K+1)-1,Me=U[re],de=re+1,_t=U[de];if(0>s(Me,q))de<J&&0>s(_t,Me)?(U[K]=_t,U[de]=q,K=de):(U[K]=Me,U[re]=q,K=re);else if(de<J&&0>s(_t,q))U[K]=_t,U[de]=q,K=de;else break e}}return Q}function s(U,Q){var q=U.sortIndex-Q.sortIndex;return q!==0?q:U.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var u=[],d=[],m=1,p=null,g=3,w=!1,S=!1,R=!1,C=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(U){for(var Q=n(d);Q!==null;){if(Q.callback===null)r(d);else if(Q.startTime<=U)r(d),Q.sortIndex=Q.expirationTime,e(u,Q);else break;Q=n(d)}}function D(U){if(R=!1,b(U),!S)if(n(u)!==null)S=!0,se(M);else{var Q=n(d);Q!==null&&pe(D,Q.startTime-U)}}function M(U,Q){S=!1,R&&(R=!1,T(_),_=-1),w=!0;var q=g;try{for(b(Q),p=n(u);p!==null&&(!(p.expirationTime>Q)||U&&!A());){var K=p.callback;if(typeof K=="function"){p.callback=null,g=p.priorityLevel;var J=K(p.expirationTime<=Q);Q=t.unstable_now(),typeof J=="function"?p.callback=J:p===n(u)&&r(u),b(Q)}else r(u);p=n(u)}if(p!==null)var W=!0;else{var re=n(d);re!==null&&pe(D,re.startTime-Q),W=!1}return W}finally{p=null,g=q,w=!1}}var O=!1,E=null,_=-1,k=5,I=-1;function A(){return!(t.unstable_now()-I<k)}function N(){if(E!==null){var U=t.unstable_now();I=U;var Q=!0;try{Q=E(!0,U)}finally{Q?x():(O=!1,E=null)}}else O=!1}var x;if(typeof y=="function")x=function(){y(N)};else if(typeof MessageChannel<"u"){var Z=new MessageChannel,me=Z.port2;Z.port1.onmessage=N,x=function(){me.postMessage(null)}}else x=function(){C(N,0)};function se(U){E=U,O||(O=!0,x())}function pe(U,Q){_=C(function(){U(t.unstable_now())},Q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(U){U.callback=null},t.unstable_continueExecution=function(){S||w||(S=!0,se(M))},t.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<U?Math.floor(1e3/U):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(U){switch(g){case 1:case 2:case 3:var Q=3;break;default:Q=g}var q=g;g=Q;try{return U()}finally{g=q}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(U,Q){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var q=g;g=U;try{return Q()}finally{g=q}},t.unstable_scheduleCallback=function(U,Q,q){var K=t.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?K+q:K):q=K,U){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=q+J,U={id:m++,callback:Q,priorityLevel:U,startTime:q,expirationTime:J,sortIndex:-1},q>K?(U.sortIndex=q,e(d,U),n(u)===null&&U===n(d)&&(R?(T(_),_=-1):R=!0,pe(D,q-K))):(U.sortIndex=J,e(u,U),S||w||(S=!0,se(M))),U},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(U){var Q=g;return function(){var q=g;g=Q;try{return U.apply(this,arguments)}finally{g=q}}}})(ry);ny.exports=ry;var z1=ny.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var B1=B,Dt=z1;function F(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var sy=new Set,qi={};function Kr(t,e){Ss(t,e),Ss(t+"Capture",e)}function Ss(t,e){for(qi[t]=e,t=0;t<e.length;t++)sy.add(e[t])}var En=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ic=Object.prototype.hasOwnProperty,$1=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,mm={},pm={};function H1(t){return ic.call(pm,t)?!0:ic.call(mm,t)?!1:$1.test(t)?pm[t]=!0:(mm[t]=!0,!1)}function q1(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function W1(t,e,n,r){if(e===null||typeof e>"u"||q1(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function vt(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var tt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){tt[t]=new vt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];tt[e]=new vt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){tt[t]=new vt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){tt[t]=new vt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){tt[t]=new vt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){tt[t]=new vt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){tt[t]=new vt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){tt[t]=new vt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){tt[t]=new vt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Sh=/[\-:]([a-z])/g;function Ah(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Sh,Ah);tt[e]=new vt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Sh,Ah);tt[e]=new vt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Sh,Ah);tt[e]=new vt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){tt[t]=new vt(t,1,!1,t.toLowerCase(),null,!1,!1)});tt.xlinkHref=new vt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){tt[t]=new vt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Rh(t,e,n,r){var s=tt.hasOwnProperty(e)?tt[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(W1(e,n,s,r)&&(n=null),r||s===null?H1(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Rn=B1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,qo=Symbol.for("react.element"),ls=Symbol.for("react.portal"),us=Symbol.for("react.fragment"),Nh=Symbol.for("react.strict_mode"),oc=Symbol.for("react.profiler"),iy=Symbol.for("react.provider"),oy=Symbol.for("react.context"),Ch=Symbol.for("react.forward_ref"),ac=Symbol.for("react.suspense"),lc=Symbol.for("react.suspense_list"),Ph=Symbol.for("react.memo"),Mn=Symbol.for("react.lazy"),ay=Symbol.for("react.offscreen"),gm=Symbol.iterator;function fi(t){return t===null||typeof t!="object"?null:(t=gm&&t[gm]||t["@@iterator"],typeof t=="function"?t:null)}var Ae=Object.assign,xu;function Ei(t){if(xu===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);xu=e&&e[1]||""}return`
`+xu+t}var Eu=!1;function Tu(t,e){if(!t||Eu)return"";Eu=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var u=`
`+s[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=l);break}}}finally{Eu=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ei(t):""}function G1(t){switch(t.tag){case 5:return Ei(t.type);case 16:return Ei("Lazy");case 13:return Ei("Suspense");case 19:return Ei("SuspenseList");case 0:case 2:case 15:return t=Tu(t.type,!1),t;case 11:return t=Tu(t.type.render,!1),t;case 1:return t=Tu(t.type,!0),t;default:return""}}function uc(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case us:return"Fragment";case ls:return"Portal";case oc:return"Profiler";case Nh:return"StrictMode";case ac:return"Suspense";case lc:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case oy:return(t.displayName||"Context")+".Consumer";case iy:return(t._context.displayName||"Context")+".Provider";case Ch:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Ph:return e=t.displayName||null,e!==null?e:uc(t.type)||"Memo";case Mn:e=t._payload,t=t._init;try{return uc(t(e))}catch{}}return null}function K1(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return uc(e);case 8:return e===Nh?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ir(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function ly(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Q1(t){var e=ly(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Wo(t){t._valueTracker||(t._valueTracker=Q1(t))}function uy(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=ly(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Pa(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function cc(t,e){var n=e.checked;return Ae({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function ym(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=ir(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function cy(t,e){e=e.checked,e!=null&&Rh(t,"checked",e,!1)}function hc(t,e){cy(t,e);var n=ir(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?dc(t,e.type,n):e.hasOwnProperty("defaultValue")&&dc(t,e.type,ir(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function vm(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function dc(t,e,n){(e!=="number"||Pa(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Ti=Array.isArray;function ws(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+ir(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function fc(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(F(91));return Ae({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function _m(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(F(92));if(Ti(n)){if(1<n.length)throw Error(F(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ir(n)}}function hy(t,e){var n=ir(e.value),r=ir(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function wm(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function dy(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function mc(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?dy(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Go,fy=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Go=Go||document.createElement("div"),Go.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Go.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Wi(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ni={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Y1=["Webkit","ms","Moz","O"];Object.keys(Ni).forEach(function(t){Y1.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ni[e]=Ni[t]})});function my(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ni.hasOwnProperty(t)&&Ni[t]?(""+e).trim():e+"px"}function py(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=my(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var X1=Ae({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function pc(t,e){if(e){if(X1[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(F(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(F(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(F(61))}if(e.style!=null&&typeof e.style!="object")throw Error(F(62))}}function gc(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var yc=null;function Dh(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var vc=null,xs=null,Es=null;function xm(t){if(t=To(t)){if(typeof vc!="function")throw Error(F(280));var e=t.stateNode;e&&(e=El(e),vc(t.stateNode,t.type,e))}}function gy(t){xs?Es?Es.push(t):Es=[t]:xs=t}function yy(){if(xs){var t=xs,e=Es;if(Es=xs=null,xm(t),e)for(t=0;t<e.length;t++)xm(e[t])}}function vy(t,e){return t(e)}function _y(){}var ku=!1;function wy(t,e,n){if(ku)return t(e,n);ku=!0;try{return vy(t,e,n)}finally{ku=!1,(xs!==null||Es!==null)&&(_y(),yy())}}function Gi(t,e){var n=t.stateNode;if(n===null)return null;var r=El(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(F(231,e,typeof n));return n}var _c=!1;if(En)try{var mi={};Object.defineProperty(mi,"passive",{get:function(){_c=!0}}),window.addEventListener("test",mi,mi),window.removeEventListener("test",mi,mi)}catch{_c=!1}function J1(t,e,n,r,s,i,o,l,u){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(m){this.onError(m)}}var Ci=!1,Da=null,ja=!1,wc=null,Z1={onError:function(t){Ci=!0,Da=t}};function ex(t,e,n,r,s,i,o,l,u){Ci=!1,Da=null,J1.apply(Z1,arguments)}function tx(t,e,n,r,s,i,o,l,u){if(ex.apply(this,arguments),Ci){if(Ci){var d=Da;Ci=!1,Da=null}else throw Error(F(198));ja||(ja=!0,wc=d)}}function Qr(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function xy(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Em(t){if(Qr(t)!==t)throw Error(F(188))}function nx(t){var e=t.alternate;if(!e){if(e=Qr(t),e===null)throw Error(F(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Em(s),t;if(i===r)return Em(s),e;i=i.sibling}throw Error(F(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o)throw Error(F(189))}}if(n.alternate!==r)throw Error(F(190))}if(n.tag!==3)throw Error(F(188));return n.stateNode.current===n?t:e}function Ey(t){return t=nx(t),t!==null?Ty(t):null}function Ty(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Ty(t);if(e!==null)return e;t=t.sibling}return null}var ky=Dt.unstable_scheduleCallback,Tm=Dt.unstable_cancelCallback,rx=Dt.unstable_shouldYield,sx=Dt.unstable_requestPaint,Ve=Dt.unstable_now,ix=Dt.unstable_getCurrentPriorityLevel,jh=Dt.unstable_ImmediatePriority,by=Dt.unstable_UserBlockingPriority,Va=Dt.unstable_NormalPriority,ox=Dt.unstable_LowPriority,Iy=Dt.unstable_IdlePriority,vl=null,un=null;function ax(t){if(un&&typeof un.onCommitFiberRoot=="function")try{un.onCommitFiberRoot(vl,t,void 0,(t.current.flags&128)===128)}catch{}}var Yt=Math.clz32?Math.clz32:cx,lx=Math.log,ux=Math.LN2;function cx(t){return t>>>=0,t===0?32:31-(lx(t)/ux|0)|0}var Ko=64,Qo=4194304;function ki(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function La(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~s;l!==0?r=ki(l):(i&=o,i!==0&&(r=ki(i)))}else o=n&~s,o!==0?r=ki(o):i!==0&&(r=ki(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Yt(e),s=1<<n,r|=t[n],e&=~s;return r}function hx(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function dx(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Yt(i),l=1<<o,u=s[o];u===-1?(!(l&n)||l&r)&&(s[o]=hx(l,e)):u<=e&&(t.expiredLanes|=l),i&=~l}}function xc(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Sy(){var t=Ko;return Ko<<=1,!(Ko&4194240)&&(Ko=64),t}function bu(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function xo(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Yt(e),t[e]=n}function fx(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Yt(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Vh(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Yt(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var ge=0;function Ay(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Ry,Lh,Ny,Cy,Py,Ec=!1,Yo=[],qn=null,Wn=null,Gn=null,Ki=new Map,Qi=new Map,Fn=[],mx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function km(t,e){switch(t){case"focusin":case"focusout":qn=null;break;case"dragenter":case"dragleave":Wn=null;break;case"mouseover":case"mouseout":Gn=null;break;case"pointerover":case"pointerout":Ki.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Qi.delete(e.pointerId)}}function pi(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=To(e),e!==null&&Lh(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function px(t,e,n,r,s){switch(e){case"focusin":return qn=pi(qn,t,e,n,r,s),!0;case"dragenter":return Wn=pi(Wn,t,e,n,r,s),!0;case"mouseover":return Gn=pi(Gn,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Ki.set(i,pi(Ki.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Qi.set(i,pi(Qi.get(i)||null,t,e,n,r,s)),!0}return!1}function Dy(t){var e=Ar(t.target);if(e!==null){var n=Qr(e);if(n!==null){if(e=n.tag,e===13){if(e=xy(n),e!==null){t.blockedOn=e,Py(t.priority,function(){Ny(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ga(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Tc(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);yc=r,n.target.dispatchEvent(r),yc=null}else return e=To(n),e!==null&&Lh(e),t.blockedOn=n,!1;e.shift()}return!0}function bm(t,e,n){ga(t)&&n.delete(e)}function gx(){Ec=!1,qn!==null&&ga(qn)&&(qn=null),Wn!==null&&ga(Wn)&&(Wn=null),Gn!==null&&ga(Gn)&&(Gn=null),Ki.forEach(bm),Qi.forEach(bm)}function gi(t,e){t.blockedOn===e&&(t.blockedOn=null,Ec||(Ec=!0,Dt.unstable_scheduleCallback(Dt.unstable_NormalPriority,gx)))}function Yi(t){function e(s){return gi(s,t)}if(0<Yo.length){gi(Yo[0],t);for(var n=1;n<Yo.length;n++){var r=Yo[n];r.blockedOn===t&&(r.blockedOn=null)}}for(qn!==null&&gi(qn,t),Wn!==null&&gi(Wn,t),Gn!==null&&gi(Gn,t),Ki.forEach(e),Qi.forEach(e),n=0;n<Fn.length;n++)r=Fn[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Fn.length&&(n=Fn[0],n.blockedOn===null);)Dy(n),n.blockedOn===null&&Fn.shift()}var Ts=Rn.ReactCurrentBatchConfig,Ma=!0;function yx(t,e,n,r){var s=ge,i=Ts.transition;Ts.transition=null;try{ge=1,Mh(t,e,n,r)}finally{ge=s,Ts.transition=i}}function vx(t,e,n,r){var s=ge,i=Ts.transition;Ts.transition=null;try{ge=4,Mh(t,e,n,r)}finally{ge=s,Ts.transition=i}}function Mh(t,e,n,r){if(Ma){var s=Tc(t,e,n,r);if(s===null)Vu(t,e,r,Oa,n),km(t,r);else if(px(s,t,e,n,r))r.stopPropagation();else if(km(t,r),e&4&&-1<mx.indexOf(t)){for(;s!==null;){var i=To(s);if(i!==null&&Ry(i),i=Tc(t,e,n,r),i===null&&Vu(t,e,r,Oa,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Vu(t,e,r,null,n)}}var Oa=null;function Tc(t,e,n,r){if(Oa=null,t=Dh(r),t=Ar(t),t!==null)if(e=Qr(t),e===null)t=null;else if(n=e.tag,n===13){if(t=xy(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Oa=t,null}function jy(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ix()){case jh:return 1;case by:return 4;case Va:case ox:return 16;case Iy:return 536870912;default:return 16}default:return 16}}var Bn=null,Oh=null,ya=null;function Vy(){if(ya)return ya;var t,e=Oh,n=e.length,r,s="value"in Bn?Bn.value:Bn.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return ya=s.slice(t,1<r?1-r:void 0)}function va(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Xo(){return!0}function Im(){return!1}function Vt(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Xo:Im,this.isPropagationStopped=Im,this}return Ae(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Xo)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Xo)},persist:function(){},isPersistent:Xo}),e}var Hs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Fh=Vt(Hs),Eo=Ae({},Hs,{view:0,detail:0}),_x=Vt(Eo),Iu,Su,yi,_l=Ae({},Eo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Uh,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==yi&&(yi&&t.type==="mousemove"?(Iu=t.screenX-yi.screenX,Su=t.screenY-yi.screenY):Su=Iu=0,yi=t),Iu)},movementY:function(t){return"movementY"in t?t.movementY:Su}}),Sm=Vt(_l),wx=Ae({},_l,{dataTransfer:0}),xx=Vt(wx),Ex=Ae({},Eo,{relatedTarget:0}),Au=Vt(Ex),Tx=Ae({},Hs,{animationName:0,elapsedTime:0,pseudoElement:0}),kx=Vt(Tx),bx=Ae({},Hs,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Ix=Vt(bx),Sx=Ae({},Hs,{data:0}),Am=Vt(Sx),Ax={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Rx={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Nx={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Cx(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Nx[t])?!!e[t]:!1}function Uh(){return Cx}var Px=Ae({},Eo,{key:function(t){if(t.key){var e=Ax[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=va(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Rx[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Uh,charCode:function(t){return t.type==="keypress"?va(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?va(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Dx=Vt(Px),jx=Ae({},_l,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Rm=Vt(jx),Vx=Ae({},Eo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Uh}),Lx=Vt(Vx),Mx=Ae({},Hs,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ox=Vt(Mx),Fx=Ae({},_l,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Ux=Vt(Fx),zx=[9,13,27,32],zh=En&&"CompositionEvent"in window,Pi=null;En&&"documentMode"in document&&(Pi=document.documentMode);var Bx=En&&"TextEvent"in window&&!Pi,Ly=En&&(!zh||Pi&&8<Pi&&11>=Pi),Nm=" ",Cm=!1;function My(t,e){switch(t){case"keyup":return zx.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Oy(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var cs=!1;function $x(t,e){switch(t){case"compositionend":return Oy(e);case"keypress":return e.which!==32?null:(Cm=!0,Nm);case"textInput":return t=e.data,t===Nm&&Cm?null:t;default:return null}}function Hx(t,e){if(cs)return t==="compositionend"||!zh&&My(t,e)?(t=Vy(),ya=Oh=Bn=null,cs=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Ly&&e.locale!=="ko"?null:e.data;default:return null}}var qx={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Pm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!qx[t.type]:e==="textarea"}function Fy(t,e,n,r){gy(r),e=Fa(e,"onChange"),0<e.length&&(n=new Fh("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Di=null,Xi=null;function Wx(t){Yy(t,0)}function wl(t){var e=fs(t);if(uy(e))return t}function Gx(t,e){if(t==="change")return e}var Uy=!1;if(En){var Ru;if(En){var Nu="oninput"in document;if(!Nu){var Dm=document.createElement("div");Dm.setAttribute("oninput","return;"),Nu=typeof Dm.oninput=="function"}Ru=Nu}else Ru=!1;Uy=Ru&&(!document.documentMode||9<document.documentMode)}function jm(){Di&&(Di.detachEvent("onpropertychange",zy),Xi=Di=null)}function zy(t){if(t.propertyName==="value"&&wl(Xi)){var e=[];Fy(e,Xi,t,Dh(t)),wy(Wx,e)}}function Kx(t,e,n){t==="focusin"?(jm(),Di=e,Xi=n,Di.attachEvent("onpropertychange",zy)):t==="focusout"&&jm()}function Qx(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return wl(Xi)}function Yx(t,e){if(t==="click")return wl(e)}function Xx(t,e){if(t==="input"||t==="change")return wl(e)}function Jx(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Jt=typeof Object.is=="function"?Object.is:Jx;function Ji(t,e){if(Jt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!ic.call(e,s)||!Jt(t[s],e[s]))return!1}return!0}function Vm(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Lm(t,e){var n=Vm(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Vm(n)}}function By(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?By(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function $y(){for(var t=window,e=Pa();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Pa(t.document)}return e}function Bh(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Zx(t){var e=$y(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&By(n.ownerDocument.documentElement,n)){if(r!==null&&Bh(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=Lm(n,i);var o=Lm(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var eE=En&&"documentMode"in document&&11>=document.documentMode,hs=null,kc=null,ji=null,bc=!1;function Mm(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;bc||hs==null||hs!==Pa(r)||(r=hs,"selectionStart"in r&&Bh(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ji&&Ji(ji,r)||(ji=r,r=Fa(kc,"onSelect"),0<r.length&&(e=new Fh("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=hs)))}function Jo(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ds={animationend:Jo("Animation","AnimationEnd"),animationiteration:Jo("Animation","AnimationIteration"),animationstart:Jo("Animation","AnimationStart"),transitionend:Jo("Transition","TransitionEnd")},Cu={},Hy={};En&&(Hy=document.createElement("div").style,"AnimationEvent"in window||(delete ds.animationend.animation,delete ds.animationiteration.animation,delete ds.animationstart.animation),"TransitionEvent"in window||delete ds.transitionend.transition);function xl(t){if(Cu[t])return Cu[t];if(!ds[t])return t;var e=ds[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Hy)return Cu[t]=e[n];return t}var qy=xl("animationend"),Wy=xl("animationiteration"),Gy=xl("animationstart"),Ky=xl("transitionend"),Qy=new Map,Om="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function mr(t,e){Qy.set(t,e),Kr(e,[t])}for(var Pu=0;Pu<Om.length;Pu++){var Du=Om[Pu],tE=Du.toLowerCase(),nE=Du[0].toUpperCase()+Du.slice(1);mr(tE,"on"+nE)}mr(qy,"onAnimationEnd");mr(Wy,"onAnimationIteration");mr(Gy,"onAnimationStart");mr("dblclick","onDoubleClick");mr("focusin","onFocus");mr("focusout","onBlur");mr(Ky,"onTransitionEnd");Ss("onMouseEnter",["mouseout","mouseover"]);Ss("onMouseLeave",["mouseout","mouseover"]);Ss("onPointerEnter",["pointerout","pointerover"]);Ss("onPointerLeave",["pointerout","pointerover"]);Kr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Kr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Kr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Kr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Kr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Kr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var bi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),rE=new Set("cancel close invalid load scroll toggle".split(" ").concat(bi));function Fm(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,tx(r,e,void 0,t),t.currentTarget=null}function Yy(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],u=l.instance,d=l.currentTarget;if(l=l.listener,u!==i&&s.isPropagationStopped())break e;Fm(s,l,d),i=u}else for(o=0;o<r.length;o++){if(l=r[o],u=l.instance,d=l.currentTarget,l=l.listener,u!==i&&s.isPropagationStopped())break e;Fm(s,l,d),i=u}}}if(ja)throw t=wc,ja=!1,wc=null,t}function Ee(t,e){var n=e[Nc];n===void 0&&(n=e[Nc]=new Set);var r=t+"__bubble";n.has(r)||(Xy(e,t,2,!1),n.add(r))}function ju(t,e,n){var r=0;e&&(r|=4),Xy(n,t,r,e)}var Zo="_reactListening"+Math.random().toString(36).slice(2);function Zi(t){if(!t[Zo]){t[Zo]=!0,sy.forEach(function(n){n!=="selectionchange"&&(rE.has(n)||ju(n,!1,t),ju(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Zo]||(e[Zo]=!0,ju("selectionchange",!1,e))}}function Xy(t,e,n,r){switch(jy(e)){case 1:var s=yx;break;case 4:s=vx;break;default:s=Mh}n=s.bind(null,e,n,t),s=void 0,!_c||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Vu(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;o=o.return}for(;l!==null;){if(o=Ar(l),o===null)return;if(u=o.tag,u===5||u===6){r=i=o;continue e}l=l.parentNode}}r=r.return}wy(function(){var d=i,m=Dh(n),p=[];e:{var g=Qy.get(t);if(g!==void 0){var w=Fh,S=t;switch(t){case"keypress":if(va(n)===0)break e;case"keydown":case"keyup":w=Dx;break;case"focusin":S="focus",w=Au;break;case"focusout":S="blur",w=Au;break;case"beforeblur":case"afterblur":w=Au;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":w=Sm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":w=xx;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":w=Lx;break;case qy:case Wy:case Gy:w=kx;break;case Ky:w=Ox;break;case"scroll":w=_x;break;case"wheel":w=Ux;break;case"copy":case"cut":case"paste":w=Ix;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":w=Rm}var R=(e&4)!==0,C=!R&&t==="scroll",T=R?g!==null?g+"Capture":null:g;R=[];for(var y=d,b;y!==null;){b=y;var D=b.stateNode;if(b.tag===5&&D!==null&&(b=D,T!==null&&(D=Gi(y,T),D!=null&&R.push(eo(y,D,b)))),C)break;y=y.return}0<R.length&&(g=new w(g,S,null,n,m),p.push({event:g,listeners:R}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",w=t==="mouseout"||t==="pointerout",g&&n!==yc&&(S=n.relatedTarget||n.fromElement)&&(Ar(S)||S[Tn]))break e;if((w||g)&&(g=m.window===m?m:(g=m.ownerDocument)?g.defaultView||g.parentWindow:window,w?(S=n.relatedTarget||n.toElement,w=d,S=S?Ar(S):null,S!==null&&(C=Qr(S),S!==C||S.tag!==5&&S.tag!==6)&&(S=null)):(w=null,S=d),w!==S)){if(R=Sm,D="onMouseLeave",T="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(R=Rm,D="onPointerLeave",T="onPointerEnter",y="pointer"),C=w==null?g:fs(w),b=S==null?g:fs(S),g=new R(D,y+"leave",w,n,m),g.target=C,g.relatedTarget=b,D=null,Ar(m)===d&&(R=new R(T,y+"enter",S,n,m),R.target=b,R.relatedTarget=C,D=R),C=D,w&&S)t:{for(R=w,T=S,y=0,b=R;b;b=rs(b))y++;for(b=0,D=T;D;D=rs(D))b++;for(;0<y-b;)R=rs(R),y--;for(;0<b-y;)T=rs(T),b--;for(;y--;){if(R===T||T!==null&&R===T.alternate)break t;R=rs(R),T=rs(T)}R=null}else R=null;w!==null&&Um(p,g,w,R,!1),S!==null&&C!==null&&Um(p,C,S,R,!0)}}e:{if(g=d?fs(d):window,w=g.nodeName&&g.nodeName.toLowerCase(),w==="select"||w==="input"&&g.type==="file")var M=Gx;else if(Pm(g))if(Uy)M=Xx;else{M=Qx;var O=Kx}else(w=g.nodeName)&&w.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(M=Yx);if(M&&(M=M(t,d))){Fy(p,M,n,m);break e}O&&O(t,g,d),t==="focusout"&&(O=g._wrapperState)&&O.controlled&&g.type==="number"&&dc(g,"number",g.value)}switch(O=d?fs(d):window,t){case"focusin":(Pm(O)||O.contentEditable==="true")&&(hs=O,kc=d,ji=null);break;case"focusout":ji=kc=hs=null;break;case"mousedown":bc=!0;break;case"contextmenu":case"mouseup":case"dragend":bc=!1,Mm(p,n,m);break;case"selectionchange":if(eE)break;case"keydown":case"keyup":Mm(p,n,m)}var E;if(zh)e:{switch(t){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else cs?My(t,n)&&(_="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(_="onCompositionStart");_&&(Ly&&n.locale!=="ko"&&(cs||_!=="onCompositionStart"?_==="onCompositionEnd"&&cs&&(E=Vy()):(Bn=m,Oh="value"in Bn?Bn.value:Bn.textContent,cs=!0)),O=Fa(d,_),0<O.length&&(_=new Am(_,t,null,n,m),p.push({event:_,listeners:O}),E?_.data=E:(E=Oy(n),E!==null&&(_.data=E)))),(E=Bx?$x(t,n):Hx(t,n))&&(d=Fa(d,"onBeforeInput"),0<d.length&&(m=new Am("onBeforeInput","beforeinput",null,n,m),p.push({event:m,listeners:d}),m.data=E))}Yy(p,e)})}function eo(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Fa(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Gi(t,n),i!=null&&r.unshift(eo(t,i,s)),i=Gi(t,e),i!=null&&r.push(eo(t,i,s))),t=t.return}return r}function rs(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Um(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var l=n,u=l.alternate,d=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&d!==null&&(l=d,s?(u=Gi(n,i),u!=null&&o.unshift(eo(n,u,l))):s||(u=Gi(n,i),u!=null&&o.push(eo(n,u,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var sE=/\r\n?/g,iE=/\u0000|\uFFFD/g;function zm(t){return(typeof t=="string"?t:""+t).replace(sE,`
`).replace(iE,"")}function ea(t,e,n){if(e=zm(e),zm(t)!==e&&n)throw Error(F(425))}function Ua(){}var Ic=null,Sc=null;function Ac(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Rc=typeof setTimeout=="function"?setTimeout:void 0,oE=typeof clearTimeout=="function"?clearTimeout:void 0,Bm=typeof Promise=="function"?Promise:void 0,aE=typeof queueMicrotask=="function"?queueMicrotask:typeof Bm<"u"?function(t){return Bm.resolve(null).then(t).catch(lE)}:Rc;function lE(t){setTimeout(function(){throw t})}function Lu(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Yi(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Yi(e)}function Kn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function $m(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var qs=Math.random().toString(36).slice(2),an="__reactFiber$"+qs,to="__reactProps$"+qs,Tn="__reactContainer$"+qs,Nc="__reactEvents$"+qs,uE="__reactListeners$"+qs,cE="__reactHandles$"+qs;function Ar(t){var e=t[an];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Tn]||n[an]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=$m(t);t!==null;){if(n=t[an])return n;t=$m(t)}return e}t=n,n=t.parentNode}return null}function To(t){return t=t[an]||t[Tn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function fs(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(F(33))}function El(t){return t[to]||null}var Cc=[],ms=-1;function pr(t){return{current:t}}function ke(t){0>ms||(t.current=Cc[ms],Cc[ms]=null,ms--)}function we(t,e){ms++,Cc[ms]=t.current,t.current=e}var or={},ct=pr(or),kt=pr(!1),Fr=or;function As(t,e){var n=t.type.contextTypes;if(!n)return or;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function bt(t){return t=t.childContextTypes,t!=null}function za(){ke(kt),ke(ct)}function Hm(t,e,n){if(ct.current!==or)throw Error(F(168));we(ct,e),we(kt,n)}function Jy(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(F(108,K1(t)||"Unknown",s));return Ae({},n,r)}function Ba(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||or,Fr=ct.current,we(ct,t),we(kt,kt.current),!0}function qm(t,e,n){var r=t.stateNode;if(!r)throw Error(F(169));n?(t=Jy(t,e,Fr),r.__reactInternalMemoizedMergedChildContext=t,ke(kt),ke(ct),we(ct,t)):ke(kt),we(kt,n)}var vn=null,Tl=!1,Mu=!1;function Zy(t){vn===null?vn=[t]:vn.push(t)}function hE(t){Tl=!0,Zy(t)}function gr(){if(!Mu&&vn!==null){Mu=!0;var t=0,e=ge;try{var n=vn;for(ge=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}vn=null,Tl=!1}catch(s){throw vn!==null&&(vn=vn.slice(t+1)),ky(jh,gr),s}finally{ge=e,Mu=!1}}return null}var ps=[],gs=0,$a=null,Ha=0,Lt=[],Mt=0,Ur=null,_n=1,wn="";function br(t,e){ps[gs++]=Ha,ps[gs++]=$a,$a=t,Ha=e}function e0(t,e,n){Lt[Mt++]=_n,Lt[Mt++]=wn,Lt[Mt++]=Ur,Ur=t;var r=_n;t=wn;var s=32-Yt(r)-1;r&=~(1<<s),n+=1;var i=32-Yt(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,_n=1<<32-Yt(e)+s|n<<s|r,wn=i+t}else _n=1<<i|n<<s|r,wn=t}function $h(t){t.return!==null&&(br(t,1),e0(t,1,0))}function Hh(t){for(;t===$a;)$a=ps[--gs],ps[gs]=null,Ha=ps[--gs],ps[gs]=null;for(;t===Ur;)Ur=Lt[--Mt],Lt[Mt]=null,wn=Lt[--Mt],Lt[Mt]=null,_n=Lt[--Mt],Lt[Mt]=null}var Pt=null,Rt=null,be=!1,Kt=null;function t0(t,e){var n=Ft(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Wm(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Pt=t,Rt=Kn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Pt=t,Rt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ur!==null?{id:_n,overflow:wn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Ft(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Pt=t,Rt=null,!0):!1;default:return!1}}function Pc(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Dc(t){if(be){var e=Rt;if(e){var n=e;if(!Wm(t,e)){if(Pc(t))throw Error(F(418));e=Kn(n.nextSibling);var r=Pt;e&&Wm(t,e)?t0(r,n):(t.flags=t.flags&-4097|2,be=!1,Pt=t)}}else{if(Pc(t))throw Error(F(418));t.flags=t.flags&-4097|2,be=!1,Pt=t}}}function Gm(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Pt=t}function ta(t){if(t!==Pt)return!1;if(!be)return Gm(t),be=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Ac(t.type,t.memoizedProps)),e&&(e=Rt)){if(Pc(t))throw n0(),Error(F(418));for(;e;)t0(t,e),e=Kn(e.nextSibling)}if(Gm(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(F(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Rt=Kn(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Rt=null}}else Rt=Pt?Kn(t.stateNode.nextSibling):null;return!0}function n0(){for(var t=Rt;t;)t=Kn(t.nextSibling)}function Rs(){Rt=Pt=null,be=!1}function qh(t){Kt===null?Kt=[t]:Kt.push(t)}var dE=Rn.ReactCurrentBatchConfig;function vi(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(F(309));var r=n.stateNode}if(!r)throw Error(F(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(F(284));if(!n._owner)throw Error(F(290,t))}return t}function na(t,e){throw t=Object.prototype.toString.call(e),Error(F(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Km(t){var e=t._init;return e(t._payload)}function r0(t){function e(T,y){if(t){var b=T.deletions;b===null?(T.deletions=[y],T.flags|=16):b.push(y)}}function n(T,y){if(!t)return null;for(;y!==null;)e(T,y),y=y.sibling;return null}function r(T,y){for(T=new Map;y!==null;)y.key!==null?T.set(y.key,y):T.set(y.index,y),y=y.sibling;return T}function s(T,y){return T=Jn(T,y),T.index=0,T.sibling=null,T}function i(T,y,b){return T.index=b,t?(b=T.alternate,b!==null?(b=b.index,b<y?(T.flags|=2,y):b):(T.flags|=2,y)):(T.flags|=1048576,y)}function o(T){return t&&T.alternate===null&&(T.flags|=2),T}function l(T,y,b,D){return y===null||y.tag!==6?(y=Hu(b,T.mode,D),y.return=T,y):(y=s(y,b),y.return=T,y)}function u(T,y,b,D){var M=b.type;return M===us?m(T,y,b.props.children,D,b.key):y!==null&&(y.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===Mn&&Km(M)===y.type)?(D=s(y,b.props),D.ref=vi(T,y,b),D.return=T,D):(D=ba(b.type,b.key,b.props,null,T.mode,D),D.ref=vi(T,y,b),D.return=T,D)}function d(T,y,b,D){return y===null||y.tag!==4||y.stateNode.containerInfo!==b.containerInfo||y.stateNode.implementation!==b.implementation?(y=qu(b,T.mode,D),y.return=T,y):(y=s(y,b.children||[]),y.return=T,y)}function m(T,y,b,D,M){return y===null||y.tag!==7?(y=jr(b,T.mode,D,M),y.return=T,y):(y=s(y,b),y.return=T,y)}function p(T,y,b){if(typeof y=="string"&&y!==""||typeof y=="number")return y=Hu(""+y,T.mode,b),y.return=T,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case qo:return b=ba(y.type,y.key,y.props,null,T.mode,b),b.ref=vi(T,null,y),b.return=T,b;case ls:return y=qu(y,T.mode,b),y.return=T,y;case Mn:var D=y._init;return p(T,D(y._payload),b)}if(Ti(y)||fi(y))return y=jr(y,T.mode,b,null),y.return=T,y;na(T,y)}return null}function g(T,y,b,D){var M=y!==null?y.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return M!==null?null:l(T,y,""+b,D);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case qo:return b.key===M?u(T,y,b,D):null;case ls:return b.key===M?d(T,y,b,D):null;case Mn:return M=b._init,g(T,y,M(b._payload),D)}if(Ti(b)||fi(b))return M!==null?null:m(T,y,b,D,null);na(T,b)}return null}function w(T,y,b,D,M){if(typeof D=="string"&&D!==""||typeof D=="number")return T=T.get(b)||null,l(y,T,""+D,M);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case qo:return T=T.get(D.key===null?b:D.key)||null,u(y,T,D,M);case ls:return T=T.get(D.key===null?b:D.key)||null,d(y,T,D,M);case Mn:var O=D._init;return w(T,y,b,O(D._payload),M)}if(Ti(D)||fi(D))return T=T.get(b)||null,m(y,T,D,M,null);na(y,D)}return null}function S(T,y,b,D){for(var M=null,O=null,E=y,_=y=0,k=null;E!==null&&_<b.length;_++){E.index>_?(k=E,E=null):k=E.sibling;var I=g(T,E,b[_],D);if(I===null){E===null&&(E=k);break}t&&E&&I.alternate===null&&e(T,E),y=i(I,y,_),O===null?M=I:O.sibling=I,O=I,E=k}if(_===b.length)return n(T,E),be&&br(T,_),M;if(E===null){for(;_<b.length;_++)E=p(T,b[_],D),E!==null&&(y=i(E,y,_),O===null?M=E:O.sibling=E,O=E);return be&&br(T,_),M}for(E=r(T,E);_<b.length;_++)k=w(E,T,_,b[_],D),k!==null&&(t&&k.alternate!==null&&E.delete(k.key===null?_:k.key),y=i(k,y,_),O===null?M=k:O.sibling=k,O=k);return t&&E.forEach(function(A){return e(T,A)}),be&&br(T,_),M}function R(T,y,b,D){var M=fi(b);if(typeof M!="function")throw Error(F(150));if(b=M.call(b),b==null)throw Error(F(151));for(var O=M=null,E=y,_=y=0,k=null,I=b.next();E!==null&&!I.done;_++,I=b.next()){E.index>_?(k=E,E=null):k=E.sibling;var A=g(T,E,I.value,D);if(A===null){E===null&&(E=k);break}t&&E&&A.alternate===null&&e(T,E),y=i(A,y,_),O===null?M=A:O.sibling=A,O=A,E=k}if(I.done)return n(T,E),be&&br(T,_),M;if(E===null){for(;!I.done;_++,I=b.next())I=p(T,I.value,D),I!==null&&(y=i(I,y,_),O===null?M=I:O.sibling=I,O=I);return be&&br(T,_),M}for(E=r(T,E);!I.done;_++,I=b.next())I=w(E,T,_,I.value,D),I!==null&&(t&&I.alternate!==null&&E.delete(I.key===null?_:I.key),y=i(I,y,_),O===null?M=I:O.sibling=I,O=I);return t&&E.forEach(function(N){return e(T,N)}),be&&br(T,_),M}function C(T,y,b,D){if(typeof b=="object"&&b!==null&&b.type===us&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case qo:e:{for(var M=b.key,O=y;O!==null;){if(O.key===M){if(M=b.type,M===us){if(O.tag===7){n(T,O.sibling),y=s(O,b.props.children),y.return=T,T=y;break e}}else if(O.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===Mn&&Km(M)===O.type){n(T,O.sibling),y=s(O,b.props),y.ref=vi(T,O,b),y.return=T,T=y;break e}n(T,O);break}else e(T,O);O=O.sibling}b.type===us?(y=jr(b.props.children,T.mode,D,b.key),y.return=T,T=y):(D=ba(b.type,b.key,b.props,null,T.mode,D),D.ref=vi(T,y,b),D.return=T,T=D)}return o(T);case ls:e:{for(O=b.key;y!==null;){if(y.key===O)if(y.tag===4&&y.stateNode.containerInfo===b.containerInfo&&y.stateNode.implementation===b.implementation){n(T,y.sibling),y=s(y,b.children||[]),y.return=T,T=y;break e}else{n(T,y);break}else e(T,y);y=y.sibling}y=qu(b,T.mode,D),y.return=T,T=y}return o(T);case Mn:return O=b._init,C(T,y,O(b._payload),D)}if(Ti(b))return S(T,y,b,D);if(fi(b))return R(T,y,b,D);na(T,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,y!==null&&y.tag===6?(n(T,y.sibling),y=s(y,b),y.return=T,T=y):(n(T,y),y=Hu(b,T.mode,D),y.return=T,T=y),o(T)):n(T,y)}return C}var Ns=r0(!0),s0=r0(!1),qa=pr(null),Wa=null,ys=null,Wh=null;function Gh(){Wh=ys=Wa=null}function Kh(t){var e=qa.current;ke(qa),t._currentValue=e}function jc(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function ks(t,e){Wa=t,Wh=ys=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Tt=!0),t.firstContext=null)}function $t(t){var e=t._currentValue;if(Wh!==t)if(t={context:t,memoizedValue:e,next:null},ys===null){if(Wa===null)throw Error(F(308));ys=t,Wa.dependencies={lanes:0,firstContext:t}}else ys=ys.next=t;return e}var Rr=null;function Qh(t){Rr===null?Rr=[t]:Rr.push(t)}function i0(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Qh(e)):(n.next=s.next,s.next=n),e.interleaved=n,kn(t,r)}function kn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var On=!1;function Yh(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function o0(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function xn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Qn(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,he&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,kn(t,n)}return s=r.interleaved,s===null?(e.next=e,Qh(r)):(e.next=s.next,s.next=e),r.interleaved=e,kn(t,n)}function _a(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Vh(t,n)}}function Qm(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Ga(t,e,n,r){var s=t.updateQueue;On=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var u=l,d=u.next;u.next=null,o===null?i=d:o.next=d,o=u;var m=t.alternate;m!==null&&(m=m.updateQueue,l=m.lastBaseUpdate,l!==o&&(l===null?m.firstBaseUpdate=d:l.next=d,m.lastBaseUpdate=u))}if(i!==null){var p=s.baseState;o=0,m=d=u=null,l=i;do{var g=l.lane,w=l.eventTime;if((r&g)===g){m!==null&&(m=m.next={eventTime:w,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var S=t,R=l;switch(g=e,w=n,R.tag){case 1:if(S=R.payload,typeof S=="function"){p=S.call(w,p,g);break e}p=S;break e;case 3:S.flags=S.flags&-65537|128;case 0:if(S=R.payload,g=typeof S=="function"?S.call(w,p,g):S,g==null)break e;p=Ae({},p,g);break e;case 2:On=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,g=s.effects,g===null?s.effects=[l]:g.push(l))}else w={eventTime:w,lane:g,tag:l.tag,payload:l.payload,callback:l.callback,next:null},m===null?(d=m=w,u=p):m=m.next=w,o|=g;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;g=l,l=g.next,g.next=null,s.lastBaseUpdate=g,s.shared.pending=null}}while(!0);if(m===null&&(u=p),s.baseState=u,s.firstBaseUpdate=d,s.lastBaseUpdate=m,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Br|=o,t.lanes=o,t.memoizedState=p}}function Ym(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(F(191,s));s.call(r)}}}var ko={},cn=pr(ko),no=pr(ko),ro=pr(ko);function Nr(t){if(t===ko)throw Error(F(174));return t}function Xh(t,e){switch(we(ro,e),we(no,t),we(cn,ko),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:mc(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=mc(e,t)}ke(cn),we(cn,e)}function Cs(){ke(cn),ke(no),ke(ro)}function a0(t){Nr(ro.current);var e=Nr(cn.current),n=mc(e,t.type);e!==n&&(we(no,t),we(cn,n))}function Jh(t){no.current===t&&(ke(cn),ke(no))}var Ie=pr(0);function Ka(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Ou=[];function Zh(){for(var t=0;t<Ou.length;t++)Ou[t]._workInProgressVersionPrimary=null;Ou.length=0}var wa=Rn.ReactCurrentDispatcher,Fu=Rn.ReactCurrentBatchConfig,zr=0,Se=null,$e=null,Ke=null,Qa=!1,Vi=!1,so=0,fE=0;function st(){throw Error(F(321))}function ed(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Jt(t[n],e[n]))return!1;return!0}function td(t,e,n,r,s,i){if(zr=i,Se=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,wa.current=t===null||t.memoizedState===null?yE:vE,t=n(r,s),Vi){i=0;do{if(Vi=!1,so=0,25<=i)throw Error(F(301));i+=1,Ke=$e=null,e.updateQueue=null,wa.current=_E,t=n(r,s)}while(Vi)}if(wa.current=Ya,e=$e!==null&&$e.next!==null,zr=0,Ke=$e=Se=null,Qa=!1,e)throw Error(F(300));return t}function nd(){var t=so!==0;return so=0,t}function sn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ke===null?Se.memoizedState=Ke=t:Ke=Ke.next=t,Ke}function Ht(){if($e===null){var t=Se.alternate;t=t!==null?t.memoizedState:null}else t=$e.next;var e=Ke===null?Se.memoizedState:Ke.next;if(e!==null)Ke=e,$e=t;else{if(t===null)throw Error(F(310));$e=t,t={memoizedState:$e.memoizedState,baseState:$e.baseState,baseQueue:$e.baseQueue,queue:$e.queue,next:null},Ke===null?Se.memoizedState=Ke=t:Ke=Ke.next=t}return Ke}function io(t,e){return typeof e=="function"?e(t):e}function Uu(t){var e=Ht(),n=e.queue;if(n===null)throw Error(F(311));n.lastRenderedReducer=t;var r=$e,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=o=null,u=null,d=i;do{var m=d.lane;if((zr&m)===m)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var p={lane:m,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(l=u=p,o=r):u=u.next=p,Se.lanes|=m,Br|=m}d=d.next}while(d!==null&&d!==i);u===null?o=r:u.next=l,Jt(r,e.memoizedState)||(Tt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Se.lanes|=i,Br|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function zu(t){var e=Ht(),n=e.queue;if(n===null)throw Error(F(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);Jt(i,e.memoizedState)||(Tt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function l0(){}function u0(t,e){var n=Se,r=Ht(),s=e(),i=!Jt(r.memoizedState,s);if(i&&(r.memoizedState=s,Tt=!0),r=r.queue,rd(d0.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Ke!==null&&Ke.memoizedState.tag&1){if(n.flags|=2048,oo(9,h0.bind(null,n,r,s,e),void 0,null),Qe===null)throw Error(F(349));zr&30||c0(n,e,s)}return s}function c0(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Se.updateQueue,e===null?(e={lastEffect:null,stores:null},Se.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function h0(t,e,n,r){e.value=n,e.getSnapshot=r,f0(e)&&m0(t)}function d0(t,e,n){return n(function(){f0(e)&&m0(t)})}function f0(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Jt(t,n)}catch{return!0}}function m0(t){var e=kn(t,1);e!==null&&Xt(e,t,1,-1)}function Xm(t){var e=sn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:io,lastRenderedState:t},e.queue=t,t=t.dispatch=gE.bind(null,Se,t),[e.memoizedState,t]}function oo(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Se.updateQueue,e===null?(e={lastEffect:null,stores:null},Se.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function p0(){return Ht().memoizedState}function xa(t,e,n,r){var s=sn();Se.flags|=t,s.memoizedState=oo(1|e,n,void 0,r===void 0?null:r)}function kl(t,e,n,r){var s=Ht();r=r===void 0?null:r;var i=void 0;if($e!==null){var o=$e.memoizedState;if(i=o.destroy,r!==null&&ed(r,o.deps)){s.memoizedState=oo(e,n,i,r);return}}Se.flags|=t,s.memoizedState=oo(1|e,n,i,r)}function Jm(t,e){return xa(8390656,8,t,e)}function rd(t,e){return kl(2048,8,t,e)}function g0(t,e){return kl(4,2,t,e)}function y0(t,e){return kl(4,4,t,e)}function v0(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function _0(t,e,n){return n=n!=null?n.concat([t]):null,kl(4,4,v0.bind(null,e,t),n)}function sd(){}function w0(t,e){var n=Ht();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&ed(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function x0(t,e){var n=Ht();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&ed(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function E0(t,e,n){return zr&21?(Jt(n,e)||(n=Sy(),Se.lanes|=n,Br|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Tt=!0),t.memoizedState=n)}function mE(t,e){var n=ge;ge=n!==0&&4>n?n:4,t(!0);var r=Fu.transition;Fu.transition={};try{t(!1),e()}finally{ge=n,Fu.transition=r}}function T0(){return Ht().memoizedState}function pE(t,e,n){var r=Xn(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},k0(t))b0(e,n);else if(n=i0(t,e,n,r),n!==null){var s=pt();Xt(n,t,r,s),I0(n,e,r)}}function gE(t,e,n){var r=Xn(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(k0(t))b0(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,l=i(o,n);if(s.hasEagerState=!0,s.eagerState=l,Jt(l,o)){var u=e.interleaved;u===null?(s.next=s,Qh(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}n=i0(t,e,s,r),n!==null&&(s=pt(),Xt(n,t,r,s),I0(n,e,r))}}function k0(t){var e=t.alternate;return t===Se||e!==null&&e===Se}function b0(t,e){Vi=Qa=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function I0(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Vh(t,n)}}var Ya={readContext:$t,useCallback:st,useContext:st,useEffect:st,useImperativeHandle:st,useInsertionEffect:st,useLayoutEffect:st,useMemo:st,useReducer:st,useRef:st,useState:st,useDebugValue:st,useDeferredValue:st,useTransition:st,useMutableSource:st,useSyncExternalStore:st,useId:st,unstable_isNewReconciler:!1},yE={readContext:$t,useCallback:function(t,e){return sn().memoizedState=[t,e===void 0?null:e],t},useContext:$t,useEffect:Jm,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,xa(4194308,4,v0.bind(null,e,t),n)},useLayoutEffect:function(t,e){return xa(4194308,4,t,e)},useInsertionEffect:function(t,e){return xa(4,2,t,e)},useMemo:function(t,e){var n=sn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=sn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=pE.bind(null,Se,t),[r.memoizedState,t]},useRef:function(t){var e=sn();return t={current:t},e.memoizedState=t},useState:Xm,useDebugValue:sd,useDeferredValue:function(t){return sn().memoizedState=t},useTransition:function(){var t=Xm(!1),e=t[0];return t=mE.bind(null,t[1]),sn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Se,s=sn();if(be){if(n===void 0)throw Error(F(407));n=n()}else{if(n=e(),Qe===null)throw Error(F(349));zr&30||c0(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,Jm(d0.bind(null,r,i,t),[t]),r.flags|=2048,oo(9,h0.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=sn(),e=Qe.identifierPrefix;if(be){var n=wn,r=_n;n=(r&~(1<<32-Yt(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=so++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=fE++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},vE={readContext:$t,useCallback:w0,useContext:$t,useEffect:rd,useImperativeHandle:_0,useInsertionEffect:g0,useLayoutEffect:y0,useMemo:x0,useReducer:Uu,useRef:p0,useState:function(){return Uu(io)},useDebugValue:sd,useDeferredValue:function(t){var e=Ht();return E0(e,$e.memoizedState,t)},useTransition:function(){var t=Uu(io)[0],e=Ht().memoizedState;return[t,e]},useMutableSource:l0,useSyncExternalStore:u0,useId:T0,unstable_isNewReconciler:!1},_E={readContext:$t,useCallback:w0,useContext:$t,useEffect:rd,useImperativeHandle:_0,useInsertionEffect:g0,useLayoutEffect:y0,useMemo:x0,useReducer:zu,useRef:p0,useState:function(){return zu(io)},useDebugValue:sd,useDeferredValue:function(t){var e=Ht();return $e===null?e.memoizedState=t:E0(e,$e.memoizedState,t)},useTransition:function(){var t=zu(io)[0],e=Ht().memoizedState;return[t,e]},useMutableSource:l0,useSyncExternalStore:u0,useId:T0,unstable_isNewReconciler:!1};function Wt(t,e){if(t&&t.defaultProps){e=Ae({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Vc(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ae({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var bl={isMounted:function(t){return(t=t._reactInternals)?Qr(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=pt(),s=Xn(t),i=xn(r,s);i.payload=e,n!=null&&(i.callback=n),e=Qn(t,i,s),e!==null&&(Xt(e,t,s,r),_a(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=pt(),s=Xn(t),i=xn(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Qn(t,i,s),e!==null&&(Xt(e,t,s,r),_a(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=pt(),r=Xn(t),s=xn(n,r);s.tag=2,e!=null&&(s.callback=e),e=Qn(t,s,r),e!==null&&(Xt(e,t,r,n),_a(e,t,r))}};function Zm(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Ji(n,r)||!Ji(s,i):!0}function S0(t,e,n){var r=!1,s=or,i=e.contextType;return typeof i=="object"&&i!==null?i=$t(i):(s=bt(e)?Fr:ct.current,r=e.contextTypes,i=(r=r!=null)?As(t,s):or),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=bl,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function ep(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&bl.enqueueReplaceState(e,e.state,null)}function Lc(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Yh(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=$t(i):(i=bt(e)?Fr:ct.current,s.context=As(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Vc(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&bl.enqueueReplaceState(s,s.state,null),Ga(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Ps(t,e){try{var n="",r=e;do n+=G1(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Bu(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Mc(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var wE=typeof WeakMap=="function"?WeakMap:Map;function A0(t,e,n){n=xn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Ja||(Ja=!0,Gc=r),Mc(t,e)},n}function R0(t,e,n){n=xn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Mc(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Mc(t,e),typeof r!="function"&&(Yn===null?Yn=new Set([this]):Yn.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function tp(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new wE;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=jE.bind(null,t,e,n),e.then(t,t))}function np(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function rp(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=xn(-1,1),e.tag=2,Qn(n,e,1))),n.lanes|=1),t)}var xE=Rn.ReactCurrentOwner,Tt=!1;function mt(t,e,n,r){e.child=t===null?s0(e,null,n,r):Ns(e,t.child,n,r)}function sp(t,e,n,r,s){n=n.render;var i=e.ref;return ks(e,s),r=td(t,e,n,r,i,s),n=nd(),t!==null&&!Tt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,bn(t,e,s)):(be&&n&&$h(e),e.flags|=1,mt(t,e,r,s),e.child)}function ip(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!dd(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,N0(t,e,i,r,s)):(t=ba(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Ji,n(o,r)&&t.ref===e.ref)return bn(t,e,s)}return e.flags|=1,t=Jn(i,r),t.ref=e.ref,t.return=e,e.child=t}function N0(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Ji(i,r)&&t.ref===e.ref)if(Tt=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Tt=!0);else return e.lanes=t.lanes,bn(t,e,s)}return Oc(t,e,n,r,s)}function C0(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},we(_s,At),At|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,we(_s,At),At|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,we(_s,At),At|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,we(_s,At),At|=r;return mt(t,e,s,n),e.child}function P0(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Oc(t,e,n,r,s){var i=bt(n)?Fr:ct.current;return i=As(e,i),ks(e,s),n=td(t,e,n,r,i,s),r=nd(),t!==null&&!Tt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,bn(t,e,s)):(be&&r&&$h(e),e.flags|=1,mt(t,e,n,s),e.child)}function op(t,e,n,r,s){if(bt(n)){var i=!0;Ba(e)}else i=!1;if(ks(e,s),e.stateNode===null)Ea(t,e),S0(e,n,r),Lc(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var u=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=$t(d):(d=bt(n)?Fr:ct.current,d=As(e,d));var m=n.getDerivedStateFromProps,p=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function";p||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||u!==d)&&ep(e,o,r,d),On=!1;var g=e.memoizedState;o.state=g,Ga(e,r,o,s),u=e.memoizedState,l!==r||g!==u||kt.current||On?(typeof m=="function"&&(Vc(e,n,m,r),u=e.memoizedState),(l=On||Zm(e,n,l,r,g,u,d))?(p||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=d,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,o0(t,e),l=e.memoizedProps,d=e.type===e.elementType?l:Wt(e.type,l),o.props=d,p=e.pendingProps,g=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=$t(u):(u=bt(n)?Fr:ct.current,u=As(e,u));var w=n.getDerivedStateFromProps;(m=typeof w=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==p||g!==u)&&ep(e,o,r,u),On=!1,g=e.memoizedState,o.state=g,Ga(e,r,o,s);var S=e.memoizedState;l!==p||g!==S||kt.current||On?(typeof w=="function"&&(Vc(e,n,w,r),S=e.memoizedState),(d=On||Zm(e,n,d,r,g,S,u)||!1)?(m||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,S,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,S,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=S),o.props=r,o.state=S,o.context=u,r=d):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),r=!1)}return Fc(t,e,n,r,i,s)}function Fc(t,e,n,r,s,i){P0(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&qm(e,n,!1),bn(t,e,i);r=e.stateNode,xE.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Ns(e,t.child,null,i),e.child=Ns(e,null,l,i)):mt(t,e,l,i),e.memoizedState=r.state,s&&qm(e,n,!0),e.child}function D0(t){var e=t.stateNode;e.pendingContext?Hm(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Hm(t,e.context,!1),Xh(t,e.containerInfo)}function ap(t,e,n,r,s){return Rs(),qh(s),e.flags|=256,mt(t,e,n,r),e.child}var Uc={dehydrated:null,treeContext:null,retryLane:0};function zc(t){return{baseLanes:t,cachePool:null,transitions:null}}function j0(t,e,n){var r=e.pendingProps,s=Ie.current,i=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),we(Ie,s&1),t===null)return Dc(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Al(o,r,0,null),t=jr(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=zc(n),e.memoizedState=Uc,t):id(e,o));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return EE(t,e,o,r,l,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,l=s.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=Jn(s,u),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=Jn(l,i):(i=jr(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?zc(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Uc,r}return i=t.child,t=i.sibling,r=Jn(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function id(t,e){return e=Al({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function ra(t,e,n,r){return r!==null&&qh(r),Ns(e,t.child,null,n),t=id(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function EE(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=Bu(Error(F(422))),ra(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Al({mode:"visible",children:r.children},s,0,null),i=jr(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Ns(e,t.child,null,o),e.child.memoizedState=zc(o),e.memoizedState=Uc,i);if(!(e.mode&1))return ra(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(F(419)),r=Bu(i,r,void 0),ra(t,e,o,r)}if(l=(o&t.childLanes)!==0,Tt||l){if(r=Qe,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,kn(t,s),Xt(r,t,s,-1))}return hd(),r=Bu(Error(F(421))),ra(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=VE.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Rt=Kn(s.nextSibling),Pt=e,be=!0,Kt=null,t!==null&&(Lt[Mt++]=_n,Lt[Mt++]=wn,Lt[Mt++]=Ur,_n=t.id,wn=t.overflow,Ur=e),e=id(e,r.children),e.flags|=4096,e)}function lp(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),jc(t.return,e,n)}function $u(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function V0(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(mt(t,e,r.children,n),r=Ie.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&lp(t,n,e);else if(t.tag===19)lp(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(we(Ie,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Ka(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),$u(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Ka(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}$u(e,!0,n,null,i);break;case"together":$u(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ea(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function bn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Br|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(F(153));if(e.child!==null){for(t=e.child,n=Jn(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Jn(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function TE(t,e,n){switch(e.tag){case 3:D0(e),Rs();break;case 5:a0(e);break;case 1:bt(e.type)&&Ba(e);break;case 4:Xh(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;we(qa,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(we(Ie,Ie.current&1),e.flags|=128,null):n&e.child.childLanes?j0(t,e,n):(we(Ie,Ie.current&1),t=bn(t,e,n),t!==null?t.sibling:null);we(Ie,Ie.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return V0(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),we(Ie,Ie.current),r)break;return null;case 22:case 23:return e.lanes=0,C0(t,e,n)}return bn(t,e,n)}var L0,Bc,M0,O0;L0=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Bc=function(){};M0=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Nr(cn.current);var i=null;switch(n){case"input":s=cc(t,s),r=cc(t,r),i=[];break;case"select":s=Ae({},s,{value:void 0}),r=Ae({},r,{value:void 0}),i=[];break;case"textarea":s=fc(t,s),r=fc(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Ua)}pc(n,r);var o;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var l=s[d];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(qi.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var u=r[d];if(l=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&u!==l&&(u!=null||l!=null))if(d==="style")if(l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(i||(i=[]),i.push(d,n)),n=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(i=i||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(qi.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&Ee("scroll",t),i||l===u||(i=[])):(i=i||[]).push(d,u))}n&&(i=i||[]).push("style",n);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};O0=function(t,e,n,r){n!==r&&(e.flags|=4)};function _i(t,e){if(!be)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function it(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function kE(t,e,n){var r=e.pendingProps;switch(Hh(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return it(e),null;case 1:return bt(e.type)&&za(),it(e),null;case 3:return r=e.stateNode,Cs(),ke(kt),ke(ct),Zh(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(ta(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Kt!==null&&(Yc(Kt),Kt=null))),Bc(t,e),it(e),null;case 5:Jh(e);var s=Nr(ro.current);if(n=e.type,t!==null&&e.stateNode!=null)M0(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(F(166));return it(e),null}if(t=Nr(cn.current),ta(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[an]=e,r[to]=i,t=(e.mode&1)!==0,n){case"dialog":Ee("cancel",r),Ee("close",r);break;case"iframe":case"object":case"embed":Ee("load",r);break;case"video":case"audio":for(s=0;s<bi.length;s++)Ee(bi[s],r);break;case"source":Ee("error",r);break;case"img":case"image":case"link":Ee("error",r),Ee("load",r);break;case"details":Ee("toggle",r);break;case"input":ym(r,i),Ee("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Ee("invalid",r);break;case"textarea":_m(r,i),Ee("invalid",r)}pc(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&ea(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&ea(r.textContent,l,t),s=["children",""+l]):qi.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Ee("scroll",r)}switch(n){case"input":Wo(r),vm(r,i,!0);break;case"textarea":Wo(r),wm(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Ua)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=dy(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[an]=e,t[to]=r,L0(t,e,!1,!1),e.stateNode=t;e:{switch(o=gc(n,r),n){case"dialog":Ee("cancel",t),Ee("close",t),s=r;break;case"iframe":case"object":case"embed":Ee("load",t),s=r;break;case"video":case"audio":for(s=0;s<bi.length;s++)Ee(bi[s],t);s=r;break;case"source":Ee("error",t),s=r;break;case"img":case"image":case"link":Ee("error",t),Ee("load",t),s=r;break;case"details":Ee("toggle",t),s=r;break;case"input":ym(t,r),s=cc(t,r),Ee("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Ae({},r,{value:void 0}),Ee("invalid",t);break;case"textarea":_m(t,r),s=fc(t,r),Ee("invalid",t);break;default:s=r}pc(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var u=l[i];i==="style"?py(t,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&fy(t,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Wi(t,u):typeof u=="number"&&Wi(t,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(qi.hasOwnProperty(i)?u!=null&&i==="onScroll"&&Ee("scroll",t):u!=null&&Rh(t,i,u,o))}switch(n){case"input":Wo(t),vm(t,r,!1);break;case"textarea":Wo(t),wm(t);break;case"option":r.value!=null&&t.setAttribute("value",""+ir(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?ws(t,!!r.multiple,i,!1):r.defaultValue!=null&&ws(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Ua)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return it(e),null;case 6:if(t&&e.stateNode!=null)O0(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(F(166));if(n=Nr(ro.current),Nr(cn.current),ta(e)){if(r=e.stateNode,n=e.memoizedProps,r[an]=e,(i=r.nodeValue!==n)&&(t=Pt,t!==null))switch(t.tag){case 3:ea(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ea(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[an]=e,e.stateNode=r}return it(e),null;case 13:if(ke(Ie),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(be&&Rt!==null&&e.mode&1&&!(e.flags&128))n0(),Rs(),e.flags|=98560,i=!1;else if(i=ta(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(F(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(F(317));i[an]=e}else Rs(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;it(e),i=!1}else Kt!==null&&(Yc(Kt),Kt=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ie.current&1?He===0&&(He=3):hd())),e.updateQueue!==null&&(e.flags|=4),it(e),null);case 4:return Cs(),Bc(t,e),t===null&&Zi(e.stateNode.containerInfo),it(e),null;case 10:return Kh(e.type._context),it(e),null;case 17:return bt(e.type)&&za(),it(e),null;case 19:if(ke(Ie),i=e.memoizedState,i===null)return it(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)_i(i,!1);else{if(He!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Ka(t),o!==null){for(e.flags|=128,_i(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return we(Ie,Ie.current&1|2),e.child}t=t.sibling}i.tail!==null&&Ve()>Ds&&(e.flags|=128,r=!0,_i(i,!1),e.lanes=4194304)}else{if(!r)if(t=Ka(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),_i(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!be)return it(e),null}else 2*Ve()-i.renderingStartTime>Ds&&n!==1073741824&&(e.flags|=128,r=!0,_i(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Ve(),e.sibling=null,n=Ie.current,we(Ie,r?n&1|2:n&1),e):(it(e),null);case 22:case 23:return cd(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?At&1073741824&&(it(e),e.subtreeFlags&6&&(e.flags|=8192)):it(e),null;case 24:return null;case 25:return null}throw Error(F(156,e.tag))}function bE(t,e){switch(Hh(e),e.tag){case 1:return bt(e.type)&&za(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Cs(),ke(kt),ke(ct),Zh(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Jh(e),null;case 13:if(ke(Ie),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(F(340));Rs()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ke(Ie),null;case 4:return Cs(),null;case 10:return Kh(e.type._context),null;case 22:case 23:return cd(),null;case 24:return null;default:return null}}var sa=!1,lt=!1,IE=typeof WeakSet=="function"?WeakSet:Set,G=null;function vs(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ce(t,e,r)}else n.current=null}function $c(t,e,n){try{n()}catch(r){Ce(t,e,r)}}var up=!1;function SE(t,e){if(Ic=Ma,t=$y(),Bh(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,u=-1,d=0,m=0,p=t,g=null;t:for(;;){for(var w;p!==n||s!==0&&p.nodeType!==3||(l=o+s),p!==i||r!==0&&p.nodeType!==3||(u=o+r),p.nodeType===3&&(o+=p.nodeValue.length),(w=p.firstChild)!==null;)g=p,p=w;for(;;){if(p===t)break t;if(g===n&&++d===s&&(l=o),g===i&&++m===r&&(u=o),(w=p.nextSibling)!==null)break;p=g,g=p.parentNode}p=w}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Sc={focusedElem:t,selectionRange:n},Ma=!1,G=e;G!==null;)if(e=G,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,G=t;else for(;G!==null;){e=G;try{var S=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(S!==null){var R=S.memoizedProps,C=S.memoizedState,T=e.stateNode,y=T.getSnapshotBeforeUpdate(e.elementType===e.type?R:Wt(e.type,R),C);T.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(F(163))}}catch(D){Ce(e,e.return,D)}if(t=e.sibling,t!==null){t.return=e.return,G=t;break}G=e.return}return S=up,up=!1,S}function Li(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&$c(e,n,i)}s=s.next}while(s!==r)}}function Il(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Hc(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function F0(t){var e=t.alternate;e!==null&&(t.alternate=null,F0(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[an],delete e[to],delete e[Nc],delete e[uE],delete e[cE])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function U0(t){return t.tag===5||t.tag===3||t.tag===4}function cp(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||U0(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function qc(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Ua));else if(r!==4&&(t=t.child,t!==null))for(qc(t,e,n),t=t.sibling;t!==null;)qc(t,e,n),t=t.sibling}function Wc(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Wc(t,e,n),t=t.sibling;t!==null;)Wc(t,e,n),t=t.sibling}var Ye=null,Gt=!1;function Ln(t,e,n){for(n=n.child;n!==null;)z0(t,e,n),n=n.sibling}function z0(t,e,n){if(un&&typeof un.onCommitFiberUnmount=="function")try{un.onCommitFiberUnmount(vl,n)}catch{}switch(n.tag){case 5:lt||vs(n,e);case 6:var r=Ye,s=Gt;Ye=null,Ln(t,e,n),Ye=r,Gt=s,Ye!==null&&(Gt?(t=Ye,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ye.removeChild(n.stateNode));break;case 18:Ye!==null&&(Gt?(t=Ye,n=n.stateNode,t.nodeType===8?Lu(t.parentNode,n):t.nodeType===1&&Lu(t,n),Yi(t)):Lu(Ye,n.stateNode));break;case 4:r=Ye,s=Gt,Ye=n.stateNode.containerInfo,Gt=!0,Ln(t,e,n),Ye=r,Gt=s;break;case 0:case 11:case 14:case 15:if(!lt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&$c(n,e,o),s=s.next}while(s!==r)}Ln(t,e,n);break;case 1:if(!lt&&(vs(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Ce(n,e,l)}Ln(t,e,n);break;case 21:Ln(t,e,n);break;case 22:n.mode&1?(lt=(r=lt)||n.memoizedState!==null,Ln(t,e,n),lt=r):Ln(t,e,n);break;default:Ln(t,e,n)}}function hp(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new IE),e.forEach(function(r){var s=LE.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function qt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:Ye=l.stateNode,Gt=!1;break e;case 3:Ye=l.stateNode.containerInfo,Gt=!0;break e;case 4:Ye=l.stateNode.containerInfo,Gt=!0;break e}l=l.return}if(Ye===null)throw Error(F(160));z0(i,o,s),Ye=null,Gt=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(d){Ce(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)B0(e,t),e=e.sibling}function B0(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(qt(e,t),rn(t),r&4){try{Li(3,t,t.return),Il(3,t)}catch(R){Ce(t,t.return,R)}try{Li(5,t,t.return)}catch(R){Ce(t,t.return,R)}}break;case 1:qt(e,t),rn(t),r&512&&n!==null&&vs(n,n.return);break;case 5:if(qt(e,t),rn(t),r&512&&n!==null&&vs(n,n.return),t.flags&32){var s=t.stateNode;try{Wi(s,"")}catch(R){Ce(t,t.return,R)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&cy(s,i),gc(l,o);var d=gc(l,i);for(o=0;o<u.length;o+=2){var m=u[o],p=u[o+1];m==="style"?py(s,p):m==="dangerouslySetInnerHTML"?fy(s,p):m==="children"?Wi(s,p):Rh(s,m,p,d)}switch(l){case"input":hc(s,i);break;case"textarea":hy(s,i);break;case"select":var g=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var w=i.value;w!=null?ws(s,!!i.multiple,w,!1):g!==!!i.multiple&&(i.defaultValue!=null?ws(s,!!i.multiple,i.defaultValue,!0):ws(s,!!i.multiple,i.multiple?[]:"",!1))}s[to]=i}catch(R){Ce(t,t.return,R)}}break;case 6:if(qt(e,t),rn(t),r&4){if(t.stateNode===null)throw Error(F(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(R){Ce(t,t.return,R)}}break;case 3:if(qt(e,t),rn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Yi(e.containerInfo)}catch(R){Ce(t,t.return,R)}break;case 4:qt(e,t),rn(t);break;case 13:qt(e,t),rn(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(ld=Ve())),r&4&&hp(t);break;case 22:if(m=n!==null&&n.memoizedState!==null,t.mode&1?(lt=(d=lt)||m,qt(e,t),lt=d):qt(e,t),rn(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!m&&t.mode&1)for(G=t,m=t.child;m!==null;){for(p=G=m;G!==null;){switch(g=G,w=g.child,g.tag){case 0:case 11:case 14:case 15:Li(4,g,g.return);break;case 1:vs(g,g.return);var S=g.stateNode;if(typeof S.componentWillUnmount=="function"){r=g,n=g.return;try{e=r,S.props=e.memoizedProps,S.state=e.memoizedState,S.componentWillUnmount()}catch(R){Ce(r,n,R)}}break;case 5:vs(g,g.return);break;case 22:if(g.memoizedState!==null){fp(p);continue}}w!==null?(w.return=g,G=w):fp(p)}m=m.sibling}e:for(m=null,p=t;;){if(p.tag===5){if(m===null){m=p;try{s=p.stateNode,d?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=p.stateNode,u=p.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=my("display",o))}catch(R){Ce(t,t.return,R)}}}else if(p.tag===6){if(m===null)try{p.stateNode.nodeValue=d?"":p.memoizedProps}catch(R){Ce(t,t.return,R)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;m===p&&(m=null),p=p.return}m===p&&(m=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:qt(e,t),rn(t),r&4&&hp(t);break;case 21:break;default:qt(e,t),rn(t)}}function rn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(U0(n)){var r=n;break e}n=n.return}throw Error(F(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Wi(s,""),r.flags&=-33);var i=cp(t);Wc(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,l=cp(t);qc(t,l,o);break;default:throw Error(F(161))}}catch(u){Ce(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function AE(t,e,n){G=t,$0(t)}function $0(t,e,n){for(var r=(t.mode&1)!==0;G!==null;){var s=G,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||sa;if(!o){var l=s.alternate,u=l!==null&&l.memoizedState!==null||lt;l=sa;var d=lt;if(sa=o,(lt=u)&&!d)for(G=s;G!==null;)o=G,u=o.child,o.tag===22&&o.memoizedState!==null?mp(s):u!==null?(u.return=o,G=u):mp(s);for(;i!==null;)G=i,$0(i),i=i.sibling;G=s,sa=l,lt=d}dp(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,G=i):dp(t)}}function dp(t){for(;G!==null;){var e=G;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:lt||Il(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!lt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Wt(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Ym(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Ym(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var m=d.memoizedState;if(m!==null){var p=m.dehydrated;p!==null&&Yi(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(F(163))}lt||e.flags&512&&Hc(e)}catch(g){Ce(e,e.return,g)}}if(e===t){G=null;break}if(n=e.sibling,n!==null){n.return=e.return,G=n;break}G=e.return}}function fp(t){for(;G!==null;){var e=G;if(e===t){G=null;break}var n=e.sibling;if(n!==null){n.return=e.return,G=n;break}G=e.return}}function mp(t){for(;G!==null;){var e=G;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Il(4,e)}catch(u){Ce(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(u){Ce(e,s,u)}}var i=e.return;try{Hc(e)}catch(u){Ce(e,i,u)}break;case 5:var o=e.return;try{Hc(e)}catch(u){Ce(e,o,u)}}}catch(u){Ce(e,e.return,u)}if(e===t){G=null;break}var l=e.sibling;if(l!==null){l.return=e.return,G=l;break}G=e.return}}var RE=Math.ceil,Xa=Rn.ReactCurrentDispatcher,od=Rn.ReactCurrentOwner,Ut=Rn.ReactCurrentBatchConfig,he=0,Qe=null,Fe=null,et=0,At=0,_s=pr(0),He=0,ao=null,Br=0,Sl=0,ad=0,Mi=null,xt=null,ld=0,Ds=1/0,yn=null,Ja=!1,Gc=null,Yn=null,ia=!1,$n=null,Za=0,Oi=0,Kc=null,Ta=-1,ka=0;function pt(){return he&6?Ve():Ta!==-1?Ta:Ta=Ve()}function Xn(t){return t.mode&1?he&2&&et!==0?et&-et:dE.transition!==null?(ka===0&&(ka=Sy()),ka):(t=ge,t!==0||(t=window.event,t=t===void 0?16:jy(t.type)),t):1}function Xt(t,e,n,r){if(50<Oi)throw Oi=0,Kc=null,Error(F(185));xo(t,n,r),(!(he&2)||t!==Qe)&&(t===Qe&&(!(he&2)&&(Sl|=n),He===4&&Un(t,et)),It(t,r),n===1&&he===0&&!(e.mode&1)&&(Ds=Ve()+500,Tl&&gr()))}function It(t,e){var n=t.callbackNode;dx(t,e);var r=La(t,t===Qe?et:0);if(r===0)n!==null&&Tm(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Tm(n),e===1)t.tag===0?hE(pp.bind(null,t)):Zy(pp.bind(null,t)),aE(function(){!(he&6)&&gr()}),n=null;else{switch(Ay(r)){case 1:n=jh;break;case 4:n=by;break;case 16:n=Va;break;case 536870912:n=Iy;break;default:n=Va}n=X0(n,H0.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function H0(t,e){if(Ta=-1,ka=0,he&6)throw Error(F(327));var n=t.callbackNode;if(bs()&&t.callbackNode!==n)return null;var r=La(t,t===Qe?et:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=el(t,r);else{e=r;var s=he;he|=2;var i=W0();(Qe!==t||et!==e)&&(yn=null,Ds=Ve()+500,Dr(t,e));do try{PE();break}catch(l){q0(t,l)}while(!0);Gh(),Xa.current=i,he=s,Fe!==null?e=0:(Qe=null,et=0,e=He)}if(e!==0){if(e===2&&(s=xc(t),s!==0&&(r=s,e=Qc(t,s))),e===1)throw n=ao,Dr(t,0),Un(t,r),It(t,Ve()),n;if(e===6)Un(t,r);else{if(s=t.current.alternate,!(r&30)&&!NE(s)&&(e=el(t,r),e===2&&(i=xc(t),i!==0&&(r=i,e=Qc(t,i))),e===1))throw n=ao,Dr(t,0),Un(t,r),It(t,Ve()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(F(345));case 2:Ir(t,xt,yn);break;case 3:if(Un(t,r),(r&130023424)===r&&(e=ld+500-Ve(),10<e)){if(La(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){pt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Rc(Ir.bind(null,t,xt,yn),e);break}Ir(t,xt,yn);break;case 4:if(Un(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-Yt(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Ve()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*RE(r/1960))-r,10<r){t.timeoutHandle=Rc(Ir.bind(null,t,xt,yn),r);break}Ir(t,xt,yn);break;case 5:Ir(t,xt,yn);break;default:throw Error(F(329))}}}return It(t,Ve()),t.callbackNode===n?H0.bind(null,t):null}function Qc(t,e){var n=Mi;return t.current.memoizedState.isDehydrated&&(Dr(t,e).flags|=256),t=el(t,e),t!==2&&(e=xt,xt=n,e!==null&&Yc(e)),t}function Yc(t){xt===null?xt=t:xt.push.apply(xt,t)}function NE(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Jt(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Un(t,e){for(e&=~ad,e&=~Sl,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Yt(e),r=1<<n;t[n]=-1,e&=~r}}function pp(t){if(he&6)throw Error(F(327));bs();var e=La(t,0);if(!(e&1))return It(t,Ve()),null;var n=el(t,e);if(t.tag!==0&&n===2){var r=xc(t);r!==0&&(e=r,n=Qc(t,r))}if(n===1)throw n=ao,Dr(t,0),Un(t,e),It(t,Ve()),n;if(n===6)throw Error(F(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ir(t,xt,yn),It(t,Ve()),null}function ud(t,e){var n=he;he|=1;try{return t(e)}finally{he=n,he===0&&(Ds=Ve()+500,Tl&&gr())}}function $r(t){$n!==null&&$n.tag===0&&!(he&6)&&bs();var e=he;he|=1;var n=Ut.transition,r=ge;try{if(Ut.transition=null,ge=1,t)return t()}finally{ge=r,Ut.transition=n,he=e,!(he&6)&&gr()}}function cd(){At=_s.current,ke(_s)}function Dr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,oE(n)),Fe!==null)for(n=Fe.return;n!==null;){var r=n;switch(Hh(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&za();break;case 3:Cs(),ke(kt),ke(ct),Zh();break;case 5:Jh(r);break;case 4:Cs();break;case 13:ke(Ie);break;case 19:ke(Ie);break;case 10:Kh(r.type._context);break;case 22:case 23:cd()}n=n.return}if(Qe=t,Fe=t=Jn(t.current,null),et=At=e,He=0,ao=null,ad=Sl=Br=0,xt=Mi=null,Rr!==null){for(e=0;e<Rr.length;e++)if(n=Rr[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Rr=null}return t}function q0(t,e){do{var n=Fe;try{if(Gh(),wa.current=Ya,Qa){for(var r=Se.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Qa=!1}if(zr=0,Ke=$e=Se=null,Vi=!1,so=0,od.current=null,n===null||n.return===null){He=1,ao=e,Fe=null;break}e:{var i=t,o=n.return,l=n,u=e;if(e=et,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,m=l,p=m.tag;if(!(m.mode&1)&&(p===0||p===11||p===15)){var g=m.alternate;g?(m.updateQueue=g.updateQueue,m.memoizedState=g.memoizedState,m.lanes=g.lanes):(m.updateQueue=null,m.memoizedState=null)}var w=np(o);if(w!==null){w.flags&=-257,rp(w,o,l,i,e),w.mode&1&&tp(i,d,e),e=w,u=d;var S=e.updateQueue;if(S===null){var R=new Set;R.add(u),e.updateQueue=R}else S.add(u);break e}else{if(!(e&1)){tp(i,d,e),hd();break e}u=Error(F(426))}}else if(be&&l.mode&1){var C=np(o);if(C!==null){!(C.flags&65536)&&(C.flags|=256),rp(C,o,l,i,e),qh(Ps(u,l));break e}}i=u=Ps(u,l),He!==4&&(He=2),Mi===null?Mi=[i]:Mi.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var T=A0(i,u,e);Qm(i,T);break e;case 1:l=u;var y=i.type,b=i.stateNode;if(!(i.flags&128)&&(typeof y.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Yn===null||!Yn.has(b)))){i.flags|=65536,e&=-e,i.lanes|=e;var D=R0(i,l,e);Qm(i,D);break e}}i=i.return}while(i!==null)}K0(n)}catch(M){e=M,Fe===n&&n!==null&&(Fe=n=n.return);continue}break}while(!0)}function W0(){var t=Xa.current;return Xa.current=Ya,t===null?Ya:t}function hd(){(He===0||He===3||He===2)&&(He=4),Qe===null||!(Br&268435455)&&!(Sl&268435455)||Un(Qe,et)}function el(t,e){var n=he;he|=2;var r=W0();(Qe!==t||et!==e)&&(yn=null,Dr(t,e));do try{CE();break}catch(s){q0(t,s)}while(!0);if(Gh(),he=n,Xa.current=r,Fe!==null)throw Error(F(261));return Qe=null,et=0,He}function CE(){for(;Fe!==null;)G0(Fe)}function PE(){for(;Fe!==null&&!rx();)G0(Fe)}function G0(t){var e=Y0(t.alternate,t,At);t.memoizedProps=t.pendingProps,e===null?K0(t):Fe=e,od.current=null}function K0(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=bE(n,e),n!==null){n.flags&=32767,Fe=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{He=6,Fe=null;return}}else if(n=kE(n,e,At),n!==null){Fe=n;return}if(e=e.sibling,e!==null){Fe=e;return}Fe=e=t}while(e!==null);He===0&&(He=5)}function Ir(t,e,n){var r=ge,s=Ut.transition;try{Ut.transition=null,ge=1,DE(t,e,n,r)}finally{Ut.transition=s,ge=r}return null}function DE(t,e,n,r){do bs();while($n!==null);if(he&6)throw Error(F(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(F(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(fx(t,i),t===Qe&&(Fe=Qe=null,et=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ia||(ia=!0,X0(Va,function(){return bs(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Ut.transition,Ut.transition=null;var o=ge;ge=1;var l=he;he|=4,od.current=null,SE(t,n),B0(n,t),Zx(Sc),Ma=!!Ic,Sc=Ic=null,t.current=n,AE(n),sx(),he=l,ge=o,Ut.transition=i}else t.current=n;if(ia&&(ia=!1,$n=t,Za=s),i=t.pendingLanes,i===0&&(Yn=null),ax(n.stateNode),It(t,Ve()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Ja)throw Ja=!1,t=Gc,Gc=null,t;return Za&1&&t.tag!==0&&bs(),i=t.pendingLanes,i&1?t===Kc?Oi++:(Oi=0,Kc=t):Oi=0,gr(),null}function bs(){if($n!==null){var t=Ay(Za),e=Ut.transition,n=ge;try{if(Ut.transition=null,ge=16>t?16:t,$n===null)var r=!1;else{if(t=$n,$n=null,Za=0,he&6)throw Error(F(331));var s=he;for(he|=4,G=t.current;G!==null;){var i=G,o=i.child;if(G.flags&16){var l=i.deletions;if(l!==null){for(var u=0;u<l.length;u++){var d=l[u];for(G=d;G!==null;){var m=G;switch(m.tag){case 0:case 11:case 15:Li(8,m,i)}var p=m.child;if(p!==null)p.return=m,G=p;else for(;G!==null;){m=G;var g=m.sibling,w=m.return;if(F0(m),m===d){G=null;break}if(g!==null){g.return=w,G=g;break}G=w}}}var S=i.alternate;if(S!==null){var R=S.child;if(R!==null){S.child=null;do{var C=R.sibling;R.sibling=null,R=C}while(R!==null)}}G=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,G=o;else e:for(;G!==null;){if(i=G,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Li(9,i,i.return)}var T=i.sibling;if(T!==null){T.return=i.return,G=T;break e}G=i.return}}var y=t.current;for(G=y;G!==null;){o=G;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,G=b;else e:for(o=y;G!==null;){if(l=G,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Il(9,l)}}catch(M){Ce(l,l.return,M)}if(l===o){G=null;break e}var D=l.sibling;if(D!==null){D.return=l.return,G=D;break e}G=l.return}}if(he=s,gr(),un&&typeof un.onPostCommitFiberRoot=="function")try{un.onPostCommitFiberRoot(vl,t)}catch{}r=!0}return r}finally{ge=n,Ut.transition=e}}return!1}function gp(t,e,n){e=Ps(n,e),e=A0(t,e,1),t=Qn(t,e,1),e=pt(),t!==null&&(xo(t,1,e),It(t,e))}function Ce(t,e,n){if(t.tag===3)gp(t,t,n);else for(;e!==null;){if(e.tag===3){gp(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Yn===null||!Yn.has(r))){t=Ps(n,t),t=R0(e,t,1),e=Qn(e,t,1),t=pt(),e!==null&&(xo(e,1,t),It(e,t));break}}e=e.return}}function jE(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=pt(),t.pingedLanes|=t.suspendedLanes&n,Qe===t&&(et&n)===n&&(He===4||He===3&&(et&130023424)===et&&500>Ve()-ld?Dr(t,0):ad|=n),It(t,e)}function Q0(t,e){e===0&&(t.mode&1?(e=Qo,Qo<<=1,!(Qo&130023424)&&(Qo=4194304)):e=1);var n=pt();t=kn(t,e),t!==null&&(xo(t,e,n),It(t,n))}function VE(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Q0(t,n)}function LE(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(F(314))}r!==null&&r.delete(e),Q0(t,n)}var Y0;Y0=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||kt.current)Tt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Tt=!1,TE(t,e,n);Tt=!!(t.flags&131072)}else Tt=!1,be&&e.flags&1048576&&e0(e,Ha,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Ea(t,e),t=e.pendingProps;var s=As(e,ct.current);ks(e,n),s=td(null,e,r,t,s,n);var i=nd();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,bt(r)?(i=!0,Ba(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Yh(e),s.updater=bl,e.stateNode=s,s._reactInternals=e,Lc(e,r,t,n),e=Fc(null,e,r,!0,i,n)):(e.tag=0,be&&i&&$h(e),mt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Ea(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=OE(r),t=Wt(r,t),s){case 0:e=Oc(null,e,r,t,n);break e;case 1:e=op(null,e,r,t,n);break e;case 11:e=sp(null,e,r,t,n);break e;case 14:e=ip(null,e,r,Wt(r.type,t),n);break e}throw Error(F(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Wt(r,s),Oc(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Wt(r,s),op(t,e,r,s,n);case 3:e:{if(D0(e),t===null)throw Error(F(387));r=e.pendingProps,i=e.memoizedState,s=i.element,o0(t,e),Ga(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Ps(Error(F(423)),e),e=ap(t,e,r,n,s);break e}else if(r!==s){s=Ps(Error(F(424)),e),e=ap(t,e,r,n,s);break e}else for(Rt=Kn(e.stateNode.containerInfo.firstChild),Pt=e,be=!0,Kt=null,n=s0(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Rs(),r===s){e=bn(t,e,n);break e}mt(t,e,r,n)}e=e.child}return e;case 5:return a0(e),t===null&&Dc(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Ac(r,s)?o=null:i!==null&&Ac(r,i)&&(e.flags|=32),P0(t,e),mt(t,e,o,n),e.child;case 6:return t===null&&Dc(e),null;case 13:return j0(t,e,n);case 4:return Xh(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Ns(e,null,r,n):mt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Wt(r,s),sp(t,e,r,s,n);case 7:return mt(t,e,e.pendingProps,n),e.child;case 8:return mt(t,e,e.pendingProps.children,n),e.child;case 12:return mt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,we(qa,r._currentValue),r._currentValue=o,i!==null)if(Jt(i.value,o)){if(i.children===s.children&&!kt.current){e=bn(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=xn(-1,n&-n),u.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var m=d.pending;m===null?u.next=u:(u.next=m.next,m.next=u),d.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),jc(i.return,n,e),l.lanes|=n;break}u=u.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(F(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),jc(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}mt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,ks(e,n),s=$t(s),r=r(s),e.flags|=1,mt(t,e,r,n),e.child;case 14:return r=e.type,s=Wt(r,e.pendingProps),s=Wt(r.type,s),ip(t,e,r,s,n);case 15:return N0(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Wt(r,s),Ea(t,e),e.tag=1,bt(r)?(t=!0,Ba(e)):t=!1,ks(e,n),S0(e,r,s),Lc(e,r,s,n),Fc(null,e,r,!0,t,n);case 19:return V0(t,e,n);case 22:return C0(t,e,n)}throw Error(F(156,e.tag))};function X0(t,e){return ky(t,e)}function ME(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ft(t,e,n,r){return new ME(t,e,n,r)}function dd(t){return t=t.prototype,!(!t||!t.isReactComponent)}function OE(t){if(typeof t=="function")return dd(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Ch)return 11;if(t===Ph)return 14}return 2}function Jn(t,e){var n=t.alternate;return n===null?(n=Ft(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function ba(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")dd(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case us:return jr(n.children,s,i,e);case Nh:o=8,s|=8;break;case oc:return t=Ft(12,n,e,s|2),t.elementType=oc,t.lanes=i,t;case ac:return t=Ft(13,n,e,s),t.elementType=ac,t.lanes=i,t;case lc:return t=Ft(19,n,e,s),t.elementType=lc,t.lanes=i,t;case ay:return Al(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case iy:o=10;break e;case oy:o=9;break e;case Ch:o=11;break e;case Ph:o=14;break e;case Mn:o=16,r=null;break e}throw Error(F(130,t==null?t:typeof t,""))}return e=Ft(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function jr(t,e,n,r){return t=Ft(7,t,r,e),t.lanes=n,t}function Al(t,e,n,r){return t=Ft(22,t,r,e),t.elementType=ay,t.lanes=n,t.stateNode={isHidden:!1},t}function Hu(t,e,n){return t=Ft(6,t,null,e),t.lanes=n,t}function qu(t,e,n){return e=Ft(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function FE(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=bu(0),this.expirationTimes=bu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=bu(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function fd(t,e,n,r,s,i,o,l,u){return t=new FE(t,e,n,l,u),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Ft(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Yh(i),t}function UE(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ls,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function J0(t){if(!t)return or;t=t._reactInternals;e:{if(Qr(t)!==t||t.tag!==1)throw Error(F(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(bt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(F(171))}if(t.tag===1){var n=t.type;if(bt(n))return Jy(t,n,e)}return e}function Z0(t,e,n,r,s,i,o,l,u){return t=fd(n,r,!0,t,s,i,o,l,u),t.context=J0(null),n=t.current,r=pt(),s=Xn(n),i=xn(r,s),i.callback=e??null,Qn(n,i,s),t.current.lanes=s,xo(t,s,r),It(t,r),t}function Rl(t,e,n,r){var s=e.current,i=pt(),o=Xn(s);return n=J0(n),e.context===null?e.context=n:e.pendingContext=n,e=xn(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Qn(s,e,o),t!==null&&(Xt(t,s,o,i),_a(t,s,o)),o}function tl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function yp(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function md(t,e){yp(t,e),(t=t.alternate)&&yp(t,e)}function zE(){return null}var ev=typeof reportError=="function"?reportError:function(t){console.error(t)};function pd(t){this._internalRoot=t}Nl.prototype.render=pd.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(F(409));Rl(t,e,null,null)};Nl.prototype.unmount=pd.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;$r(function(){Rl(null,t,null,null)}),e[Tn]=null}};function Nl(t){this._internalRoot=t}Nl.prototype.unstable_scheduleHydration=function(t){if(t){var e=Cy();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Fn.length&&e!==0&&e<Fn[n].priority;n++);Fn.splice(n,0,t),n===0&&Dy(t)}};function gd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Cl(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function vp(){}function BE(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var d=tl(o);i.call(d)}}var o=Z0(e,r,t,0,null,!1,!1,"",vp);return t._reactRootContainer=o,t[Tn]=o.current,Zi(t.nodeType===8?t.parentNode:t),$r(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var d=tl(u);l.call(d)}}var u=fd(t,0,!1,null,null,!1,!1,"",vp);return t._reactRootContainer=u,t[Tn]=u.current,Zi(t.nodeType===8?t.parentNode:t),$r(function(){Rl(e,u,n,r)}),u}function Pl(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var u=tl(o);l.call(u)}}Rl(e,o,t,s)}else o=BE(n,e,t,s,r);return tl(o)}Ry=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=ki(e.pendingLanes);n!==0&&(Vh(e,n|1),It(e,Ve()),!(he&6)&&(Ds=Ve()+500,gr()))}break;case 13:$r(function(){var r=kn(t,1);if(r!==null){var s=pt();Xt(r,t,1,s)}}),md(t,1)}};Lh=function(t){if(t.tag===13){var e=kn(t,134217728);if(e!==null){var n=pt();Xt(e,t,134217728,n)}md(t,134217728)}};Ny=function(t){if(t.tag===13){var e=Xn(t),n=kn(t,e);if(n!==null){var r=pt();Xt(n,t,e,r)}md(t,e)}};Cy=function(){return ge};Py=function(t,e){var n=ge;try{return ge=t,e()}finally{ge=n}};vc=function(t,e,n){switch(e){case"input":if(hc(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=El(r);if(!s)throw Error(F(90));uy(r),hc(r,s)}}}break;case"textarea":hy(t,n);break;case"select":e=n.value,e!=null&&ws(t,!!n.multiple,e,!1)}};vy=ud;_y=$r;var $E={usingClientEntryPoint:!1,Events:[To,fs,El,gy,yy,ud]},wi={findFiberByHostInstance:Ar,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},HE={bundleType:wi.bundleType,version:wi.version,rendererPackageName:wi.rendererPackageName,rendererConfig:wi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Rn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Ey(t),t===null?null:t.stateNode},findFiberByHostInstance:wi.findFiberByHostInstance||zE,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var oa=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!oa.isDisabled&&oa.supportsFiber)try{vl=oa.inject(HE),un=oa}catch{}}jt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$E;jt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!gd(e))throw Error(F(200));return UE(t,e,null,n)};jt.createRoot=function(t,e){if(!gd(t))throw Error(F(299));var n=!1,r="",s=ev;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=fd(t,1,!1,null,null,n,!1,r,s),t[Tn]=e.current,Zi(t.nodeType===8?t.parentNode:t),new pd(e)};jt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(F(188)):(t=Object.keys(t).join(","),Error(F(268,t)));return t=Ey(e),t=t===null?null:t.stateNode,t};jt.flushSync=function(t){return $r(t)};jt.hydrate=function(t,e,n){if(!Cl(e))throw Error(F(200));return Pl(null,t,e,!0,n)};jt.hydrateRoot=function(t,e,n){if(!gd(t))throw Error(F(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=ev;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=Z0(e,null,t,1,n??null,s,!1,i,o),t[Tn]=e.current,Zi(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Nl(e)};jt.render=function(t,e,n){if(!Cl(e))throw Error(F(200));return Pl(null,t,e,!1,n)};jt.unmountComponentAtNode=function(t){if(!Cl(t))throw Error(F(40));return t._reactRootContainer?($r(function(){Pl(null,null,t,!1,function(){t._reactRootContainer=null,t[Tn]=null})}),!0):!1};jt.unstable_batchedUpdates=ud;jt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Cl(n))throw Error(F(200));if(t==null||t._reactInternals===void 0)throw Error(F(38));return Pl(t,e,n,!1,r)};jt.version="18.3.1-next-f1338f8080-20240426";function tv(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(tv)}catch(t){console.error(t)}}tv(),ty.exports=jt;var qE=ty.exports,_p=qE;sc.createRoot=_p.createRoot,sc.hydrateRoot=_p.hydrateRoot;var WE={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const GE=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),KE=(t,e)=>{const n=B.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,children:l,...u},d)=>B.createElement("svg",{ref:d,...WE,width:s,height:s,stroke:r,strokeWidth:o?Number(i)*24/Number(s):i,className:`lucide lucide-${GE(t)}`,...u},[...e.map(([m,p])=>B.createElement(m,p)),...(Array.isArray(l)?l:[l])||[]]));return n.displayName=`${t}`,n};var le=KE;const nv=le("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]),rv=le("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),QE=le("CheckCircle2",[["path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",key:"14v8dr"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),YE=le("Check",[["polyline",{points:"20 6 9 17 4 12",key:"10jjfj"}]]),XE=le("ChefHat",[["path",{d:"M6 13.87A4 4 0 0 1 7.41 6a5.11 5.11 0 0 1 1.05-1.54 5 5 0 0 1 7.08 0A5.11 5.11 0 0 1 16.59 6 4 4 0 0 1 18 13.87V21H6Z",key:"z3ra2g"}],["line",{x1:"6",x2:"18",y1:"17",y2:"17",key:"12q60k"}]]),JE=le("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),ZE=le("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),Xc=le("Cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]),e2=le("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),t2=le("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),n2=le("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]),sv=le("Facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]),r2=le("FileJson",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1",key:"1oajmo"}],["path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1",key:"mpwhp6"}]]),s2=le("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}],["path",{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z",key:"nb9nel"}]]),iv=le("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),ov=le("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]),av=le("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]),i2=le("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]]),o2=le("MessageCircle",[["path",{d:"m3 21 1.9-5.7a8.5 8.5 0 1 1 3.8 3.8z",key:"v2veuj"}]]),lv=le("Music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]),a2=le("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]),lo=le("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),l2=le("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),uv=le("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),cv=le("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),u2=le("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]),c2=le("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]),yd=le("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]),vd=le("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]),h2=le("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]),hv=le("StickyNote",[["path",{d:"M15.5 3H5a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h14a2 2 0 0 0 2-2V8.5L15.5 3Z",key:"1wis1t"}],["path",{d:"M15 3v6h6",key:"edgan2"}]]),js=le("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),_d=le("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),hn=le("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Cr=le("Youtube",[["path",{d:"M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17",key:"1q2vi4"}],["path",{d:"m10 15 5-3-5-3z",key:"1jp15x"}]]),d2=le("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);function dv(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=dv(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function ve(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=dv(t))&&(r&&(r+=" "),r+=e);return r}const f2=[{id:"household1",name:"Haushalt 1",icon:"",color:"bg-blue-600"},{id:"household2",name:"Haushalt 2",icon:"",color:"bg-green-600"},{id:"household3",name:"Haushalt 3",icon:"",color:"bg-purple-600"}],fv=B.createContext(void 0),wp="foodflash_current_household",m2=({children:t})=>{const[e,n]=B.useState(null),[r,s]=B.useState(!1);B.useEffect(()=>{const o=localStorage.getItem(wp);if(o)try{const l=JSON.parse(o);n(l),s(!0)}catch(l){console.error("Error loading household:",l)}},[]);const i=o=>{n(o),s(!0),localStorage.setItem(wp,JSON.stringify(o))};return c.jsx(fv.Provider,{value:{currentHousehold:e,setCurrentHousehold:i,households:f2,hasSelectedHousehold:r},children:t})},Dl=()=>{const t=B.useContext(fv);if(!t)throw new Error("useHousehold must be used within HouseholdProvider");return t},p2=({activeTab:t,setActiveTab:e})=>{const{currentHousehold:n,households:r,setCurrentHousehold:s}=Dl(),[i,o]=B.useState(!1);return c.jsx("header",{className:"bg-slate-800/95 backdrop-blur-sm shadow-2xl border-b-2 border-primary-600/50 autumn-glow",children:c.jsx("div",{className:"container mx-auto px-4 py-4",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsxs("div",{className:"relative",children:[c.jsx(d2,{className:"h-10 w-10 text-primary-400 fill-primary-400",strokeWidth:2}),c.jsx("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-accent-400 rounded-full animate-pulse autumn-glow-gold"})]}),c.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-primary-400 via-secondary-400 to-accent-400 bg-clip-text text-transparent",children:" Food Flash"})]}),n&&c.jsxs("div",{className:"relative",children:[c.jsxs("button",{onClick:()=>o(!i),"data-test-id":"household-selector","aria-label":"Haushalt wechseln",className:"flex items-center gap-2 px-3 py-2 rounded-lg bg-slate-700/80 border border-slate-600 hover:border-primary-500 transition-all text-gray-200 hover:text-primary-300",children:[c.jsx("span",{className:"text-lg",children:n.icon}),c.jsx("span",{className:"hidden md:inline text-sm font-medium",children:n.name}),c.jsx(JE,{className:"h-4 w-4"})]}),i&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>o(!1)}),c.jsx("div",{className:"absolute top-full mt-2 left-0 bg-slate-800 border-2 border-slate-600 rounded-lg shadow-2xl overflow-hidden z-50 min-w-[200px]",children:c.jsxs("div",{className:"p-2",children:[c.jsx("p",{className:"text-xs text-gray-400 px-3 py-1 mb-1",children:"Haushalt wechseln:"}),r.map(l=>c.jsxs("button",{onClick:()=>{s(l),o(!1)},"data-test-id":`switch-to-${l.id}`,"aria-label":`Zu ${l.name} wechseln`,className:ve("w-full flex items-center gap-3 px-3 py-2 rounded-lg transition-colors text-left",n.id===l.id?"bg-primary-600 text-white":"hover:bg-slate-700 text-gray-200"),children:[c.jsx("span",{className:"text-lg",children:l.icon}),c.jsx("span",{className:"text-sm font-medium",children:l.name})]},l.id))]})})]})]})]}),c.jsxs("nav",{className:"flex gap-2",children:[c.jsxs("button",{onClick:()=>e("home"),"data-test-id":"nav-home","aria-label":"Zur Startseite navigieren",className:ve("flex items-center gap-2 px-4 py-2 rounded-full font-medium transition-all duration-200",t==="home"?"bg-primary-600 text-white shadow-lg scale-105 autumn-glow":"bg-slate-700/50 text-gray-300 hover:bg-primary-600/20 hover:text-primary-300 border border-slate-600/50"),children:[c.jsx(ov,{className:"h-5 w-5"}),c.jsx("span",{className:"hidden sm:inline",children:" Start"})]}),c.jsxs("button",{onClick:()=>e("recipes"),"data-test-id":"nav-recipes","aria-label":"Zu meinen Rezepten navigieren",className:ve("flex items-center gap-2 px-4 py-2 rounded-full font-medium transition-all duration-200",t==="recipes"?"bg-secondary-600 text-white shadow-lg scale-105 autumn-glow-green":"bg-slate-700/50 text-gray-300 hover:bg-secondary-600/20 hover:text-secondary-300 border border-dark-600/50"),children:[c.jsx(nv,{className:"h-5 w-5"}),c.jsx("span",{className:"hidden sm:inline",children:" Rezepte"})]}),c.jsxs("button",{onClick:()=>e("planner"),"data-test-id":"nav-planner","aria-label":"Zum Wochenplaner navigieren",className:ve("flex items-center gap-2 px-4 py-2 rounded-full font-medium transition-all duration-200",t==="planner"?"bg-accent-600 text-white shadow-lg scale-105 autumn-glow-gold":"bg-slate-700/50 text-gray-300 hover:bg-accent-600/20 hover:text-accent-300 border border-dark-600/50"),children:[c.jsx(rv,{className:"h-5 w-5"}),c.jsx("span",{className:"hidden sm:inline",children:" Planer"})]}),c.jsxs("button",{onClick:()=>e("shopping"),"data-test-id":"nav-shopping","aria-label":"Zur Einkaufsliste navigieren",className:ve("flex items-center gap-2 px-4 py-2 rounded-full font-medium transition-all duration-200",t==="shopping"?"bg-primary-600 text-white shadow-lg scale-105 autumn-glow":"bg-slate-700/50 text-gray-300 hover:bg-primary-600/20 hover:text-primary-300 border border-slate-600/50"),children:[c.jsx(yd,{className:"h-5 w-5"}),c.jsx("span",{className:"hidden sm:inline",children:" Einkauf"})]})]})]})})})},g2=({onPlatformClick:t})=>c.jsxs("div",{className:"text-center py-12",children:[c.jsxs("div",{className:"mb-12",children:[c.jsx("h2",{className:"text-5xl font-bold text-gray-100 mb-4 bg-gradient-to-r from-primary-400 via-accent-400 to-secondary-400 bg-clip-text text-transparent",children:" Willkommen bei Food Flash! "}),c.jsx("p",{className:"text-xl text-gray-300 max-w-2xl mx-auto",children:"Speichere deine Lieblingsrezepte von berall und habe sie immer griffbereit!"})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 max-w-6xl mx-auto mb-12",children:[c.jsxs("button",{onClick:()=>t("youtube"),"data-test-id":"platform-youtube","aria-label":"YouTube Rezepte anzeigen",className:"bg-slate-800/80 backdrop-blur-sm rounded-2xl p-6 shadow-xl border-2 border-red-500/30 hover:scale-105 transition-all duration-300 hover:border-red-400 hover:shadow-2xl hover:autumn-glow cursor-pointer",children:[c.jsx("div",{className:"w-16 h-16 bg-red-600/20 rounded-full flex items-center justify-center mx-auto mb-4 border border-red-500/30",children:c.jsx(Cr,{className:"h-8 w-8 text-red-400"})}),c.jsx("h3",{className:"font-bold text-gray-100 mb-2",children:"YouTube"}),c.jsx("p",{className:"text-sm text-gray-400",children:"Video-Rezepte speichern"})]}),c.jsxs("button",{onClick:()=>t("instagram"),"data-test-id":"platform-instagram","aria-label":"Instagram Rezepte anzeigen",className:"bg-slate-800/80 backdrop-blur-sm rounded-2xl p-6 shadow-xl border-2 border-pink-500/30 hover:scale-105 transition-all duration-300 hover:border-pink-400 hover:shadow-2xl cursor-pointer",children:[c.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-pink-600/20 to-purple-600/20 rounded-full flex items-center justify-center mx-auto mb-4 border border-pink-500/30",children:c.jsx(av,{className:"h-8 w-8 text-pink-400"})}),c.jsx("h3",{className:"font-bold text-gray-100 mb-2",children:"Instagram"}),c.jsx("p",{className:"text-sm text-gray-400",children:"Reel-Rezepte sichern"})]}),c.jsxs("button",{onClick:()=>t("facebook"),"data-test-id":"platform-facebook","aria-label":"Facebook Rezepte anzeigen",className:"bg-slate-800/80 backdrop-blur-sm rounded-2xl p-6 shadow-xl border-2 border-blue-500/30 hover:scale-105 transition-all duration-300 hover:border-blue-400 hover:shadow-2xl cursor-pointer",children:[c.jsx("div",{className:"w-16 h-16 bg-blue-600/20 rounded-full flex items-center justify-center mx-auto mb-4 border border-blue-500/30",children:c.jsx(sv,{className:"h-8 w-8 text-blue-400"})}),c.jsx("h3",{className:"font-bold text-gray-100 mb-2",children:"Facebook"}),c.jsx("p",{className:"text-sm text-gray-400",children:"Posts & Videos merken"})]}),c.jsxs("button",{onClick:()=>t("tiktok"),"data-test-id":"platform-tiktok","aria-label":"TikTok Rezepte anzeigen",className:"bg-slate-800/80 backdrop-blur-sm rounded-2xl p-6 shadow-xl border-2 border-gray-500/30 hover:scale-105 transition-all duration-300 hover:border-gray-400 hover:shadow-2xl cursor-pointer",children:[c.jsx("div",{className:"w-16 h-16 bg-gray-600/20 rounded-full flex items-center justify-center mx-auto mb-4 border border-gray-500/30",children:c.jsx(lv,{className:"h-8 w-8 text-gray-400"})}),c.jsx("h3",{className:"font-bold text-gray-100 mb-2",children:"TikTok"}),c.jsx("p",{className:"text-sm text-gray-400",children:"Kurze Rezept-Videos"})]})]}),c.jsxs("div",{className:"bg-gradient-to-r from-primary-600/80 to-secondary-600/80 backdrop-blur-sm rounded-3xl p-8 max-w-4xl mx-auto text-white shadow-2xl border border-primary-500/30 autumn-glow",children:[c.jsx(vd,{className:"h-12 w-12 mx-auto mb-4 text-accent-400"}),c.jsx("h3",{className:"text-3xl font-bold mb-4",children:" Starte jetzt mit deiner Rezeptsammlung!"}),c.jsx("p",{className:"text-lg mb-6 opacity-90",children:'Klicke auf " Rezepte" in der Navigation oben, um dein erstes Rezept hinzuzufgen.'})]})]}),y2=()=>{};var xp={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mv=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},v2=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],l=t[n++],u=((s&7)<<18|(i&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},pv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,l=o?t[s+1]:0,u=s+2<t.length,d=u?t[s+2]:0,m=i>>2,p=(i&3)<<4|l>>4;let g=(l&15)<<2|d>>6,w=d&63;u||(w=64,o||(g=64)),r.push(n[m],n[p],n[g],n[w])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(mv(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):v2(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const d=s<t.length?n[t.charAt(s)]:64;++s;const p=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||l==null||d==null||p==null)throw new _2;const g=i<<2|l>>4;if(r.push(g),d!==64){const w=l<<4&240|d>>2;if(r.push(w),p!==64){const S=d<<6&192|p;r.push(S)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class _2 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const w2=function(t){const e=mv(t);return pv.encodeByteArray(e,!0)},nl=function(t){return w2(t).replace(/\./g,"")},x2=function(t){try{return pv.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E2(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T2=()=>E2().__FIREBASE_DEFAULTS__,k2=()=>{if(typeof process>"u"||typeof xp>"u")return;const t=xp.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},b2=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&x2(t[1]);return e&&JSON.parse(e)},wd=()=>{try{return y2()||T2()||k2()||b2()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},I2=t=>{var e,n;return(n=(e=wd())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},gv=t=>{const e=I2(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},yv=()=>{var t;return(t=wd())==null?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S2{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bo(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function vv(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _v(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[nl(JSON.stringify(n)),nl(JSON.stringify(o)),""].join(".")}const Fi={};function A2(){const t={prod:[],emulator:[]};for(const e of Object.keys(Fi))Fi[e]?t.emulator.push(e):t.prod.push(e);return t}function R2(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Ep=!1;function wv(t,e){if(typeof window>"u"||typeof document>"u"||!bo(window.location.host)||Fi[t]===e||Fi[t]||Ep)return;Fi[t]=e;function n(g){return`__firebase__banner__${g}`}const r="__firebase__banner",i=A2().prod.length>0;function o(){const g=document.getElementById(r);g&&g.remove()}function l(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function u(g,w){g.setAttribute("width","24"),g.setAttribute("id",w),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function d(){const g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{Ep=!0,o()},g}function m(g,w){g.setAttribute("id",w),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function p(){const g=R2(r),w=n("text"),S=document.getElementById(w)||document.createElement("span"),R=n("learnmore"),C=document.getElementById(R)||document.createElement("a"),T=n("preprendIcon"),y=document.getElementById(T)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){const b=g.element;l(b),m(C,R);const D=d();u(y,T),b.append(y,S,C,D),document.body.appendChild(b)}i?(S.innerText="Preview backend disconnected.",y.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(y.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,S.innerText="Preview backend running in this workspace."),S.setAttribute("id",w)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N2(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function C2(){var e;const t=(e=wd())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function P2(){return!C2()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function D2(){try{return typeof indexedDB=="object"}catch{return!1}}function j2(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)==null?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V2="FirebaseError";class Yr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=V2,Object.setPrototypeOf(this,Yr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,xv.prototype.create)}}class xv{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?L2(i,r):"Error",l=`${this.serviceName}: ${o} (${s}).`;return new Yr(s,l,r)}}function L2(t,e){return t.replace(M2,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const M2=/\{\$([^}]+)}/g;function rl(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(Tp(i)&&Tp(o)){if(!rl(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Tp(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gt(t){return t&&t._delegate?t._delegate:t}class Vs{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O2{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new S2;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(U2(e))try{this.getOrInitializeService({instanceIdentifier:Sr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Sr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Sr){return this.instances.has(e)}getOptions(e=Sr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&o.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:F2(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Sr){return this.component?this.component.multipleInstances?e:Sr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function F2(t){return t===Sr?void 0:t}function U2(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z2{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new O2(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ce;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ce||(ce={}));const B2={debug:ce.DEBUG,verbose:ce.VERBOSE,info:ce.INFO,warn:ce.WARN,error:ce.ERROR,silent:ce.SILENT},$2=ce.INFO,H2={[ce.DEBUG]:"log",[ce.VERBOSE]:"log",[ce.INFO]:"info",[ce.WARN]:"warn",[ce.ERROR]:"error"},q2=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=H2[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Ev{constructor(e){this.name=e,this._logLevel=$2,this._logHandler=q2,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ce))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?B2[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ce.DEBUG,...e),this._logHandler(this,ce.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ce.VERBOSE,...e),this._logHandler(this,ce.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ce.INFO,...e),this._logHandler(this,ce.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ce.WARN,...e),this._logHandler(this,ce.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ce.ERROR,...e),this._logHandler(this,ce.ERROR,...e)}}const W2=(t,e)=>e.some(n=>t instanceof n);let kp,bp;function G2(){return kp||(kp=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function K2(){return bp||(bp=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Tv=new WeakMap,Jc=new WeakMap,kv=new WeakMap,Wu=new WeakMap,xd=new WeakMap;function Q2(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Zn(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Tv.set(n,t)}).catch(()=>{}),xd.set(e,t),e}function Y2(t){if(Jc.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Jc.set(t,e)}let Zc={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Jc.get(t);if(e==="objectStoreNames")return t.objectStoreNames||kv.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Zn(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function X2(t){Zc=t(Zc)}function J2(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Gu(this),e,...n);return kv.set(r,e.sort?e.sort():[e]),Zn(r)}:K2().includes(t)?function(...e){return t.apply(Gu(this),e),Zn(Tv.get(this))}:function(...e){return Zn(t.apply(Gu(this),e))}}function Z2(t){return typeof t=="function"?J2(t):(t instanceof IDBTransaction&&Y2(t),W2(t,G2())?new Proxy(t,Zc):t)}function Zn(t){if(t instanceof IDBRequest)return Q2(t);if(Wu.has(t))return Wu.get(t);const e=Z2(t);return e!==t&&(Wu.set(t,e),xd.set(e,t)),e}const Gu=t=>xd.get(t);function eT(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),l=Zn(o);return r&&o.addEventListener("upgradeneeded",u=>{r(Zn(o.result),u.oldVersion,u.newVersion,Zn(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{i&&u.addEventListener("close",()=>i()),s&&u.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),l}const tT=["get","getKey","getAll","getAllKeys","count"],nT=["put","add","delete","clear"],Ku=new Map;function Ip(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Ku.get(e))return Ku.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=nT.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||tT.includes(n)))return;const i=async function(o,...l){const u=this.transaction(o,s?"readwrite":"readonly");let d=u.store;return r&&(d=d.index(l.shift())),(await Promise.all([d[n](...l),s&&u.done]))[0]};return Ku.set(e,i),i}X2(t=>({...t,get:(e,n,r)=>Ip(e,n)||t.get(e,n,r),has:(e,n)=>!!Ip(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rT{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(sT(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function sT(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const eh="@firebase/app",Sp="0.14.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const In=new Ev("@firebase/app"),iT="@firebase/app-compat",oT="@firebase/analytics-compat",aT="@firebase/analytics",lT="@firebase/app-check-compat",uT="@firebase/app-check",cT="@firebase/auth",hT="@firebase/auth-compat",dT="@firebase/database",fT="@firebase/data-connect",mT="@firebase/database-compat",pT="@firebase/functions",gT="@firebase/functions-compat",yT="@firebase/installations",vT="@firebase/installations-compat",_T="@firebase/messaging",wT="@firebase/messaging-compat",xT="@firebase/performance",ET="@firebase/performance-compat",TT="@firebase/remote-config",kT="@firebase/remote-config-compat",bT="@firebase/storage",IT="@firebase/storage-compat",ST="@firebase/firestore",AT="@firebase/ai",RT="@firebase/firestore-compat",NT="firebase",CT="12.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const th="[DEFAULT]",PT={[eh]:"fire-core",[iT]:"fire-core-compat",[aT]:"fire-analytics",[oT]:"fire-analytics-compat",[uT]:"fire-app-check",[lT]:"fire-app-check-compat",[cT]:"fire-auth",[hT]:"fire-auth-compat",[dT]:"fire-rtdb",[fT]:"fire-data-connect",[mT]:"fire-rtdb-compat",[pT]:"fire-fn",[gT]:"fire-fn-compat",[yT]:"fire-iid",[vT]:"fire-iid-compat",[_T]:"fire-fcm",[wT]:"fire-fcm-compat",[xT]:"fire-perf",[ET]:"fire-perf-compat",[TT]:"fire-rc",[kT]:"fire-rc-compat",[bT]:"fire-gcs",[IT]:"fire-gcs-compat",[ST]:"fire-fst",[RT]:"fire-fst-compat",[AT]:"fire-vertex","fire-js":"fire-js",[NT]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sl=new Map,DT=new Map,nh=new Map;function Ap(t,e){try{t.container.addComponent(e)}catch(n){In.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function uo(t){const e=t.name;if(nh.has(e))return In.debug(`There were multiple attempts to register component ${e}.`),!1;nh.set(e,t);for(const n of sl.values())Ap(n,t);for(const n of DT.values())Ap(n,t);return!0}function bv(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Iv(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jT={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},er=new xv("app","Firebase",jT);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VT{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Vs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw er.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sv=CT;function Av(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:th,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw er.create("bad-app-name",{appName:String(s)});if(n||(n=yv()),!n)throw er.create("no-options");const i=sl.get(s);if(i){if(rl(n,i.options)&&rl(r,i.config))return i;throw er.create("duplicate-app",{appName:s})}const o=new z2(s);for(const u of nh.values())o.addComponent(u);const l=new VT(n,r,o);return sl.set(s,l),l}function Rv(t=th){const e=sl.get(t);if(!e&&t===th&&yv())return Av();if(!e)throw er.create("no-app",{appName:t});return e}function tr(t,e,n){let r=PT[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const o=[`Unable to register library "${r}" with version "${e}":`];s&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),In.warn(o.join(" "));return}uo(new Vs(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LT="firebase-heartbeat-database",MT=1,co="firebase-heartbeat-store";let Qu=null;function Nv(){return Qu||(Qu=eT(LT,MT,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(co)}catch(n){console.warn(n)}}}}).catch(t=>{throw er.create("idb-open",{originalErrorMessage:t.message})})),Qu}async function OT(t){try{const n=(await Nv()).transaction(co),r=await n.objectStore(co).get(Cv(t));return await n.done,r}catch(e){if(e instanceof Yr)In.warn(e.message);else{const n=er.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});In.warn(n.message)}}}async function Rp(t,e){try{const r=(await Nv()).transaction(co,"readwrite");await r.objectStore(co).put(e,Cv(t)),await r.done}catch(n){if(n instanceof Yr)In.warn(n.message);else{const r=er.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});In.warn(r.message)}}}function Cv(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FT=1024,UT=30;class zT{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new $T(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Np();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>UT){const o=HT(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){In.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Np(),{heartbeatsToSend:r,unsentEntries:s}=BT(this._heartbeatsCache.heartbeats),i=nl(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return In.warn(n),""}}}function Np(){return new Date().toISOString().substring(0,10)}function BT(t,e=FT){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),Cp(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Cp(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class $T{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return D2()?j2().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await OT(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Rp(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Rp(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Cp(t){return nl(JSON.stringify({version:2,heartbeats:t})).length}function HT(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qT(t){uo(new Vs("platform-logger",e=>new rT(e),"PRIVATE")),uo(new Vs("heartbeat",e=>new zT(e),"PRIVATE")),tr(eh,Sp,t),tr(eh,Sp,"esm2020"),tr("fire-js","")}qT("");var Pp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var nr,Pv;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(E,_){function k(){}k.prototype=_.prototype,E.F=_.prototype,E.prototype=new k,E.prototype.constructor=E,E.D=function(I,A,N){for(var x=Array(arguments.length-2),Z=2;Z<arguments.length;Z++)x[Z-2]=arguments[Z];return _.prototype[A].apply(I,x)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(E,_,k){k||(k=0);const I=Array(16);if(typeof _=="string")for(var A=0;A<16;++A)I[A]=_.charCodeAt(k++)|_.charCodeAt(k++)<<8|_.charCodeAt(k++)<<16|_.charCodeAt(k++)<<24;else for(A=0;A<16;++A)I[A]=_[k++]|_[k++]<<8|_[k++]<<16|_[k++]<<24;_=E.g[0],k=E.g[1],A=E.g[2];let N=E.g[3],x;x=_+(N^k&(A^N))+I[0]+3614090360&4294967295,_=k+(x<<7&4294967295|x>>>25),x=N+(A^_&(k^A))+I[1]+3905402710&4294967295,N=_+(x<<12&4294967295|x>>>20),x=A+(k^N&(_^k))+I[2]+606105819&4294967295,A=N+(x<<17&4294967295|x>>>15),x=k+(_^A&(N^_))+I[3]+3250441966&4294967295,k=A+(x<<22&4294967295|x>>>10),x=_+(N^k&(A^N))+I[4]+4118548399&4294967295,_=k+(x<<7&4294967295|x>>>25),x=N+(A^_&(k^A))+I[5]+1200080426&4294967295,N=_+(x<<12&4294967295|x>>>20),x=A+(k^N&(_^k))+I[6]+2821735955&4294967295,A=N+(x<<17&4294967295|x>>>15),x=k+(_^A&(N^_))+I[7]+4249261313&4294967295,k=A+(x<<22&4294967295|x>>>10),x=_+(N^k&(A^N))+I[8]+1770035416&4294967295,_=k+(x<<7&4294967295|x>>>25),x=N+(A^_&(k^A))+I[9]+2336552879&4294967295,N=_+(x<<12&4294967295|x>>>20),x=A+(k^N&(_^k))+I[10]+4294925233&4294967295,A=N+(x<<17&4294967295|x>>>15),x=k+(_^A&(N^_))+I[11]+2304563134&4294967295,k=A+(x<<22&4294967295|x>>>10),x=_+(N^k&(A^N))+I[12]+1804603682&4294967295,_=k+(x<<7&4294967295|x>>>25),x=N+(A^_&(k^A))+I[13]+4254626195&4294967295,N=_+(x<<12&4294967295|x>>>20),x=A+(k^N&(_^k))+I[14]+2792965006&4294967295,A=N+(x<<17&4294967295|x>>>15),x=k+(_^A&(N^_))+I[15]+1236535329&4294967295,k=A+(x<<22&4294967295|x>>>10),x=_+(A^N&(k^A))+I[1]+4129170786&4294967295,_=k+(x<<5&4294967295|x>>>27),x=N+(k^A&(_^k))+I[6]+3225465664&4294967295,N=_+(x<<9&4294967295|x>>>23),x=A+(_^k&(N^_))+I[11]+643717713&4294967295,A=N+(x<<14&4294967295|x>>>18),x=k+(N^_&(A^N))+I[0]+3921069994&4294967295,k=A+(x<<20&4294967295|x>>>12),x=_+(A^N&(k^A))+I[5]+3593408605&4294967295,_=k+(x<<5&4294967295|x>>>27),x=N+(k^A&(_^k))+I[10]+38016083&4294967295,N=_+(x<<9&4294967295|x>>>23),x=A+(_^k&(N^_))+I[15]+3634488961&4294967295,A=N+(x<<14&4294967295|x>>>18),x=k+(N^_&(A^N))+I[4]+3889429448&4294967295,k=A+(x<<20&4294967295|x>>>12),x=_+(A^N&(k^A))+I[9]+568446438&4294967295,_=k+(x<<5&4294967295|x>>>27),x=N+(k^A&(_^k))+I[14]+3275163606&4294967295,N=_+(x<<9&4294967295|x>>>23),x=A+(_^k&(N^_))+I[3]+4107603335&4294967295,A=N+(x<<14&4294967295|x>>>18),x=k+(N^_&(A^N))+I[8]+1163531501&4294967295,k=A+(x<<20&4294967295|x>>>12),x=_+(A^N&(k^A))+I[13]+2850285829&4294967295,_=k+(x<<5&4294967295|x>>>27),x=N+(k^A&(_^k))+I[2]+4243563512&4294967295,N=_+(x<<9&4294967295|x>>>23),x=A+(_^k&(N^_))+I[7]+1735328473&4294967295,A=N+(x<<14&4294967295|x>>>18),x=k+(N^_&(A^N))+I[12]+2368359562&4294967295,k=A+(x<<20&4294967295|x>>>12),x=_+(k^A^N)+I[5]+4294588738&4294967295,_=k+(x<<4&4294967295|x>>>28),x=N+(_^k^A)+I[8]+2272392833&4294967295,N=_+(x<<11&4294967295|x>>>21),x=A+(N^_^k)+I[11]+1839030562&4294967295,A=N+(x<<16&4294967295|x>>>16),x=k+(A^N^_)+I[14]+4259657740&4294967295,k=A+(x<<23&4294967295|x>>>9),x=_+(k^A^N)+I[1]+2763975236&4294967295,_=k+(x<<4&4294967295|x>>>28),x=N+(_^k^A)+I[4]+1272893353&4294967295,N=_+(x<<11&4294967295|x>>>21),x=A+(N^_^k)+I[7]+4139469664&4294967295,A=N+(x<<16&4294967295|x>>>16),x=k+(A^N^_)+I[10]+3200236656&4294967295,k=A+(x<<23&4294967295|x>>>9),x=_+(k^A^N)+I[13]+681279174&4294967295,_=k+(x<<4&4294967295|x>>>28),x=N+(_^k^A)+I[0]+3936430074&4294967295,N=_+(x<<11&4294967295|x>>>21),x=A+(N^_^k)+I[3]+3572445317&4294967295,A=N+(x<<16&4294967295|x>>>16),x=k+(A^N^_)+I[6]+76029189&4294967295,k=A+(x<<23&4294967295|x>>>9),x=_+(k^A^N)+I[9]+3654602809&4294967295,_=k+(x<<4&4294967295|x>>>28),x=N+(_^k^A)+I[12]+3873151461&4294967295,N=_+(x<<11&4294967295|x>>>21),x=A+(N^_^k)+I[15]+530742520&4294967295,A=N+(x<<16&4294967295|x>>>16),x=k+(A^N^_)+I[2]+3299628645&4294967295,k=A+(x<<23&4294967295|x>>>9),x=_+(A^(k|~N))+I[0]+4096336452&4294967295,_=k+(x<<6&4294967295|x>>>26),x=N+(k^(_|~A))+I[7]+1126891415&4294967295,N=_+(x<<10&4294967295|x>>>22),x=A+(_^(N|~k))+I[14]+2878612391&4294967295,A=N+(x<<15&4294967295|x>>>17),x=k+(N^(A|~_))+I[5]+4237533241&4294967295,k=A+(x<<21&4294967295|x>>>11),x=_+(A^(k|~N))+I[12]+1700485571&4294967295,_=k+(x<<6&4294967295|x>>>26),x=N+(k^(_|~A))+I[3]+2399980690&4294967295,N=_+(x<<10&4294967295|x>>>22),x=A+(_^(N|~k))+I[10]+4293915773&4294967295,A=N+(x<<15&4294967295|x>>>17),x=k+(N^(A|~_))+I[1]+2240044497&4294967295,k=A+(x<<21&4294967295|x>>>11),x=_+(A^(k|~N))+I[8]+1873313359&4294967295,_=k+(x<<6&4294967295|x>>>26),x=N+(k^(_|~A))+I[15]+4264355552&4294967295,N=_+(x<<10&4294967295|x>>>22),x=A+(_^(N|~k))+I[6]+2734768916&4294967295,A=N+(x<<15&4294967295|x>>>17),x=k+(N^(A|~_))+I[13]+1309151649&4294967295,k=A+(x<<21&4294967295|x>>>11),x=_+(A^(k|~N))+I[4]+4149444226&4294967295,_=k+(x<<6&4294967295|x>>>26),x=N+(k^(_|~A))+I[11]+3174756917&4294967295,N=_+(x<<10&4294967295|x>>>22),x=A+(_^(N|~k))+I[2]+718787259&4294967295,A=N+(x<<15&4294967295|x>>>17),x=k+(N^(A|~_))+I[9]+3951481745&4294967295,E.g[0]=E.g[0]+_&4294967295,E.g[1]=E.g[1]+(A+(x<<21&4294967295|x>>>11))&4294967295,E.g[2]=E.g[2]+A&4294967295,E.g[3]=E.g[3]+N&4294967295}r.prototype.v=function(E,_){_===void 0&&(_=E.length);const k=_-this.blockSize,I=this.C;let A=this.h,N=0;for(;N<_;){if(A==0)for(;N<=k;)s(this,E,N),N+=this.blockSize;if(typeof E=="string"){for(;N<_;)if(I[A++]=E.charCodeAt(N++),A==this.blockSize){s(this,I),A=0;break}}else for(;N<_;)if(I[A++]=E[N++],A==this.blockSize){s(this,I),A=0;break}}this.h=A,this.o+=_},r.prototype.A=function(){var E=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);E[0]=128;for(var _=1;_<E.length-8;++_)E[_]=0;_=this.o*8;for(var k=E.length-8;k<E.length;++k)E[k]=_&255,_/=256;for(this.v(E),E=Array(16),_=0,k=0;k<4;++k)for(let I=0;I<32;I+=8)E[_++]=this.g[k]>>>I&255;return E};function i(E,_){var k=l;return Object.prototype.hasOwnProperty.call(k,E)?k[E]:k[E]=_(E)}function o(E,_){this.h=_;const k=[];let I=!0;for(let A=E.length-1;A>=0;A--){const N=E[A]|0;I&&N==_||(k[A]=N,I=!1)}this.g=k}var l={};function u(E){return-128<=E&&E<128?i(E,function(_){return new o([_|0],_<0?-1:0)}):new o([E|0],E<0?-1:0)}function d(E){if(isNaN(E)||!isFinite(E))return p;if(E<0)return C(d(-E));const _=[];let k=1;for(let I=0;E>=k;I++)_[I]=E/k|0,k*=4294967296;return new o(_,0)}function m(E,_){if(E.length==0)throw Error("number format error: empty string");if(_=_||10,_<2||36<_)throw Error("radix out of range: "+_);if(E.charAt(0)=="-")return C(m(E.substring(1),_));if(E.indexOf("-")>=0)throw Error('number format error: interior "-" character');const k=d(Math.pow(_,8));let I=p;for(let N=0;N<E.length;N+=8){var A=Math.min(8,E.length-N);const x=parseInt(E.substring(N,N+A),_);A<8?(A=d(Math.pow(_,A)),I=I.j(A).add(d(x))):(I=I.j(k),I=I.add(d(x)))}return I}var p=u(0),g=u(1),w=u(16777216);t=o.prototype,t.m=function(){if(R(this))return-C(this).m();let E=0,_=1;for(let k=0;k<this.g.length;k++){const I=this.i(k);E+=(I>=0?I:4294967296+I)*_,_*=4294967296}return E},t.toString=function(E){if(E=E||10,E<2||36<E)throw Error("radix out of range: "+E);if(S(this))return"0";if(R(this))return"-"+C(this).toString(E);const _=d(Math.pow(E,6));var k=this;let I="";for(;;){const A=D(k,_).g;k=T(k,A.j(_));let N=((k.g.length>0?k.g[0]:k.h)>>>0).toString(E);if(k=A,S(k))return N+I;for(;N.length<6;)N="0"+N;I=N+I}},t.i=function(E){return E<0?0:E<this.g.length?this.g[E]:this.h};function S(E){if(E.h!=0)return!1;for(let _=0;_<E.g.length;_++)if(E.g[_]!=0)return!1;return!0}function R(E){return E.h==-1}t.l=function(E){return E=T(this,E),R(E)?-1:S(E)?0:1};function C(E){const _=E.g.length,k=[];for(let I=0;I<_;I++)k[I]=~E.g[I];return new o(k,~E.h).add(g)}t.abs=function(){return R(this)?C(this):this},t.add=function(E){const _=Math.max(this.g.length,E.g.length),k=[];let I=0;for(let A=0;A<=_;A++){let N=I+(this.i(A)&65535)+(E.i(A)&65535),x=(N>>>16)+(this.i(A)>>>16)+(E.i(A)>>>16);I=x>>>16,N&=65535,x&=65535,k[A]=x<<16|N}return new o(k,k[k.length-1]&-2147483648?-1:0)};function T(E,_){return E.add(C(_))}t.j=function(E){if(S(this)||S(E))return p;if(R(this))return R(E)?C(this).j(C(E)):C(C(this).j(E));if(R(E))return C(this.j(C(E)));if(this.l(w)<0&&E.l(w)<0)return d(this.m()*E.m());const _=this.g.length+E.g.length,k=[];for(var I=0;I<2*_;I++)k[I]=0;for(I=0;I<this.g.length;I++)for(let A=0;A<E.g.length;A++){const N=this.i(I)>>>16,x=this.i(I)&65535,Z=E.i(A)>>>16,me=E.i(A)&65535;k[2*I+2*A]+=x*me,y(k,2*I+2*A),k[2*I+2*A+1]+=N*me,y(k,2*I+2*A+1),k[2*I+2*A+1]+=x*Z,y(k,2*I+2*A+1),k[2*I+2*A+2]+=N*Z,y(k,2*I+2*A+2)}for(E=0;E<_;E++)k[E]=k[2*E+1]<<16|k[2*E];for(E=_;E<2*_;E++)k[E]=0;return new o(k,0)};function y(E,_){for(;(E[_]&65535)!=E[_];)E[_+1]+=E[_]>>>16,E[_]&=65535,_++}function b(E,_){this.g=E,this.h=_}function D(E,_){if(S(_))throw Error("division by zero");if(S(E))return new b(p,p);if(R(E))return _=D(C(E),_),new b(C(_.g),C(_.h));if(R(_))return _=D(E,C(_)),new b(C(_.g),_.h);if(E.g.length>30){if(R(E)||R(_))throw Error("slowDivide_ only works with positive integers.");for(var k=g,I=_;I.l(E)<=0;)k=M(k),I=M(I);var A=O(k,1),N=O(I,1);for(I=O(I,2),k=O(k,2);!S(I);){var x=N.add(I);x.l(E)<=0&&(A=A.add(k),N=x),I=O(I,1),k=O(k,1)}return _=T(E,A.j(_)),new b(A,_)}for(A=p;E.l(_)>=0;){for(k=Math.max(1,Math.floor(E.m()/_.m())),I=Math.ceil(Math.log(k)/Math.LN2),I=I<=48?1:Math.pow(2,I-48),N=d(k),x=N.j(_);R(x)||x.l(E)>0;)k-=I,N=d(k),x=N.j(_);S(N)&&(N=g),A=A.add(N),E=T(E,x)}return new b(A,E)}t.B=function(E){return D(this,E).h},t.and=function(E){const _=Math.max(this.g.length,E.g.length),k=[];for(let I=0;I<_;I++)k[I]=this.i(I)&E.i(I);return new o(k,this.h&E.h)},t.or=function(E){const _=Math.max(this.g.length,E.g.length),k=[];for(let I=0;I<_;I++)k[I]=this.i(I)|E.i(I);return new o(k,this.h|E.h)},t.xor=function(E){const _=Math.max(this.g.length,E.g.length),k=[];for(let I=0;I<_;I++)k[I]=this.i(I)^E.i(I);return new o(k,this.h^E.h)};function M(E){const _=E.g.length+1,k=[];for(let I=0;I<_;I++)k[I]=E.i(I)<<1|E.i(I-1)>>>31;return new o(k,E.h)}function O(E,_){const k=_>>5;_%=32;const I=E.g.length-k,A=[];for(let N=0;N<I;N++)A[N]=_>0?E.i(N+k)>>>_|E.i(N+k+1)<<32-_:E.i(N+k);return new o(A,E.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,Pv=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=m,nr=o}).apply(typeof Pp<"u"?Pp:typeof self<"u"?self:typeof window<"u"?window:{});var aa=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Dv,Ii,jv,Ia,rh,Vv,Lv,Mv;(function(){var t,e=Object.defineProperty;function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof aa=="object"&&aa];for(var h=0;h<a.length;++h){var f=a[h];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function s(a,h){if(h)e:{var f=r;a=a.split(".");for(var v=0;v<a.length-1;v++){var P=a[v];if(!(P in f))break e;f=f[P]}a=a[a.length-1],v=f[a],h=h(v),h!=v&&h!=null&&e(f,a,{configurable:!0,writable:!0,value:h})}}s("Symbol.dispose",function(a){return a||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(a){return a||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(a){return a||function(h){var f=[],v;for(v in h)Object.prototype.hasOwnProperty.call(h,v)&&f.push([v,h[v]]);return f}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},o=this||self;function l(a){var h=typeof a;return h=="object"&&a!=null||h=="function"}function u(a,h,f){return a.call.apply(a.bind,arguments)}function d(a,h,f){return d=u,d.apply(null,arguments)}function m(a,h){var f=Array.prototype.slice.call(arguments,1);return function(){var v=f.slice();return v.push.apply(v,arguments),a.apply(this,v)}}function p(a,h){function f(){}f.prototype=h.prototype,a.Z=h.prototype,a.prototype=new f,a.prototype.constructor=a,a.Ob=function(v,P,j){for(var z=Array(arguments.length-2),ne=2;ne<arguments.length;ne++)z[ne-2]=arguments[ne];return h.prototype[P].apply(v,z)}}var g=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?a=>a&&AsyncContext.Snapshot.wrap(a):a=>a;function w(a){const h=a.length;if(h>0){const f=Array(h);for(let v=0;v<h;v++)f[v]=a[v];return f}return[]}function S(a,h){for(let v=1;v<arguments.length;v++){const P=arguments[v];var f=typeof P;if(f=f!="object"?f:P?Array.isArray(P)?"array":f:"null",f=="array"||f=="object"&&typeof P.length=="number"){f=a.length||0;const j=P.length||0;a.length=f+j;for(let z=0;z<j;z++)a[f+z]=P[z]}else a.push(P)}}class R{constructor(h,f){this.i=h,this.j=f,this.h=0,this.g=null}get(){let h;return this.h>0?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function C(a){o.setTimeout(()=>{throw a},0)}function T(){var a=E;let h=null;return a.g&&(h=a.g,a.g=a.g.next,a.g||(a.h=null),h.next=null),h}class y{constructor(){this.h=this.g=null}add(h,f){const v=b.get();v.set(h,f),this.h?this.h.next=v:this.g=v,this.h=v}}var b=new R(()=>new D,a=>a.reset());class D{constructor(){this.next=this.g=this.h=null}set(h,f){this.h=h,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let M,O=!1,E=new y,_=()=>{const a=Promise.resolve(void 0);M=()=>{a.then(k)}};function k(){for(var a;a=T();){try{a.h.call(a.g)}catch(f){C(f)}var h=b;h.j(a),h.h<100&&(h.h++,a.next=h.g,h.g=a)}O=!1}function I(){this.u=this.u,this.C=this.C}I.prototype.u=!1,I.prototype.dispose=function(){this.u||(this.u=!0,this.N())},I.prototype[Symbol.dispose]=function(){this.dispose()},I.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function A(a,h){this.type=a,this.g=this.target=h,this.defaultPrevented=!1}A.prototype.h=function(){this.defaultPrevented=!0};var N=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var a=!1,h=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const f=()=>{};o.addEventListener("test",f,h),o.removeEventListener("test",f,h)}catch{}return a}();function x(a){return/^[\s\xa0]*$/.test(a)}function Z(a,h){A.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a&&this.init(a,h)}p(Z,A),Z.prototype.init=function(a,h){const f=this.type=a.type,v=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;this.target=a.target||a.srcElement,this.g=h,h=a.relatedTarget,h||(f=="mouseover"?h=a.fromElement:f=="mouseout"&&(h=a.toElement)),this.relatedTarget=h,v?(this.clientX=v.clientX!==void 0?v.clientX:v.pageX,this.clientY=v.clientY!==void 0?v.clientY:v.pageY,this.screenX=v.screenX||0,this.screenY=v.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=a.pointerType,this.state=a.state,this.i=a,a.defaultPrevented&&Z.Z.h.call(this)},Z.prototype.h=function(){Z.Z.h.call(this);const a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var me="closure_listenable_"+(Math.random()*1e6|0),se=0;function pe(a,h,f,v,P){this.listener=a,this.proxy=null,this.src=h,this.type=f,this.capture=!!v,this.ha=P,this.key=++se,this.da=this.fa=!1}function U(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function Q(a,h,f){for(const v in a)h.call(f,a[v],v,a)}function q(a,h){for(const f in a)h.call(void 0,a[f],f,a)}function K(a){const h={};for(const f in a)h[f]=a[f];return h}const J="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function W(a,h){let f,v;for(let P=1;P<arguments.length;P++){v=arguments[P];for(f in v)a[f]=v[f];for(let j=0;j<J.length;j++)f=J[j],Object.prototype.hasOwnProperty.call(v,f)&&(a[f]=v[f])}}function re(a){this.src=a,this.g={},this.h=0}re.prototype.add=function(a,h,f,v,P){const j=a.toString();a=this.g[j],a||(a=this.g[j]=[],this.h++);const z=de(a,h,v,P);return z>-1?(h=a[z],f||(h.fa=!1)):(h=new pe(h,this.src,j,!!v,P),h.fa=f,a.push(h)),h};function Me(a,h){const f=h.type;if(f in a.g){var v=a.g[f],P=Array.prototype.indexOf.call(v,h,void 0),j;(j=P>=0)&&Array.prototype.splice.call(v,P,1),j&&(U(h),a.g[f].length==0&&(delete a.g[f],a.h--))}}function de(a,h,f,v){for(let P=0;P<a.length;++P){const j=a[P];if(!j.da&&j.listener==h&&j.capture==!!f&&j.ha==v)return P}return-1}var _t="closure_lm_"+(Math.random()*1e6|0),Zr={};function en(a,h,f,v,P){if(Array.isArray(h)){for(let j=0;j<h.length;j++)en(a,h[j],f,v,P);return null}return f=gf(f),a&&a[me]?a.J(h,f,l(v)?!!v.capture:!1,P):$w(a,h,f,!1,v,P)}function $w(a,h,f,v,P,j){if(!h)throw Error("Invalid event type");const z=l(P)?!!P.capture:!!P;let ne=tu(a);if(ne||(a[_t]=ne=new re(a)),f=ne.add(h,f,v,z,j),f.proxy)return f;if(v=Hw(),f.proxy=v,v.src=a,v.listener=f,a.addEventListener)N||(P=z),P===void 0&&(P=!1),a.addEventListener(h.toString(),v,P);else if(a.attachEvent)a.attachEvent(pf(h.toString()),v);else if(a.addListener&&a.removeListener)a.addListener(v);else throw Error("addEventListener and attachEvent are unavailable.");return f}function Hw(){function a(f){return h.call(a.src,a.listener,f)}const h=qw;return a}function mf(a,h,f,v,P){if(Array.isArray(h))for(var j=0;j<h.length;j++)mf(a,h[j],f,v,P);else v=l(v)?!!v.capture:!!v,f=gf(f),a&&a[me]?(a=a.i,j=String(h).toString(),j in a.g&&(h=a.g[j],f=de(h,f,v,P),f>-1&&(U(h[f]),Array.prototype.splice.call(h,f,1),h.length==0&&(delete a.g[j],a.h--)))):a&&(a=tu(a))&&(h=a.g[h.toString()],a=-1,h&&(a=de(h,f,v,P)),(f=a>-1?h[a]:null)&&eu(f))}function eu(a){if(typeof a!="number"&&a&&!a.da){var h=a.src;if(h&&h[me])Me(h.i,a);else{var f=a.type,v=a.proxy;h.removeEventListener?h.removeEventListener(f,v,a.capture):h.detachEvent?h.detachEvent(pf(f),v):h.addListener&&h.removeListener&&h.removeListener(v),(f=tu(h))?(Me(f,a),f.h==0&&(f.src=null,h[_t]=null)):U(a)}}}function pf(a){return a in Zr?Zr[a]:Zr[a]="on"+a}function qw(a,h){if(a.da)a=!0;else{h=new Z(h,this);const f=a.listener,v=a.ha||a.src;a.fa&&eu(a),a=f.call(v,h)}return a}function tu(a){return a=a[_t],a instanceof re?a:null}var nu="__closure_events_fn_"+(Math.random()*1e9>>>0);function gf(a){return typeof a=="function"?a:(a[nu]||(a[nu]=function(h){return a.handleEvent(h)}),a[nu])}function rt(){I.call(this),this.i=new re(this),this.M=this,this.G=null}p(rt,I),rt.prototype[me]=!0,rt.prototype.removeEventListener=function(a,h,f,v){mf(this,a,h,f,v)};function ht(a,h){var f,v=a.G;if(v)for(f=[];v;v=v.G)f.push(v);if(a=a.M,v=h.type||h,typeof h=="string")h=new A(h,a);else if(h instanceof A)h.target=h.target||a;else{var P=h;h=new A(v,a),W(h,P)}P=!0;let j,z;if(f)for(z=f.length-1;z>=0;z--)j=h.g=f[z],P=Po(j,v,!0,h)&&P;if(j=h.g=a,P=Po(j,v,!0,h)&&P,P=Po(j,v,!1,h)&&P,f)for(z=0;z<f.length;z++)j=h.g=f[z],P=Po(j,v,!1,h)&&P}rt.prototype.N=function(){if(rt.Z.N.call(this),this.i){var a=this.i;for(const h in a.g){const f=a.g[h];for(let v=0;v<f.length;v++)U(f[v]);delete a.g[h],a.h--}}this.G=null},rt.prototype.J=function(a,h,f,v){return this.i.add(String(a),h,!1,f,v)},rt.prototype.K=function(a,h,f,v){return this.i.add(String(a),h,!0,f,v)};function Po(a,h,f,v){if(h=a.i.g[String(h)],!h)return!0;h=h.concat();let P=!0;for(let j=0;j<h.length;++j){const z=h[j];if(z&&!z.da&&z.capture==f){const ne=z.listener,Be=z.ha||z.src;z.fa&&Me(a.i,z),P=ne.call(Be,v)!==!1&&P}}return P&&!v.defaultPrevented}function Ww(a,h){if(typeof a!="function")if(a&&typeof a.handleEvent=="function")a=d(a.handleEvent,a);else throw Error("Invalid listener argument");return Number(h)>2147483647?-1:o.setTimeout(a,h||0)}function yf(a){a.g=Ww(()=>{a.g=null,a.i&&(a.i=!1,yf(a))},a.l);const h=a.h;a.h=null,a.m.apply(null,h)}class Gw extends I{constructor(h,f){super(),this.m=h,this.l=f,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:yf(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Xs(a){I.call(this),this.h=a,this.g={}}p(Xs,I);var vf=[];function _f(a){Q(a.g,function(h,f){this.g.hasOwnProperty(f)&&eu(h)},a),a.g={}}Xs.prototype.N=function(){Xs.Z.N.call(this),_f(this)},Xs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ru=o.JSON.stringify,Kw=o.JSON.parse,Qw=class{stringify(a){return o.JSON.stringify(a,void 0)}parse(a){return o.JSON.parse(a,void 0)}};function wf(){}function xf(){}var Js={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function su(){A.call(this,"d")}p(su,A);function iu(){A.call(this,"c")}p(iu,A);var wr={},Ef=null;function Do(){return Ef=Ef||new rt}wr.Ia="serverreachability";function Tf(a){A.call(this,wr.Ia,a)}p(Tf,A);function Zs(a){const h=Do();ht(h,new Tf(h))}wr.STAT_EVENT="statevent";function kf(a,h){A.call(this,wr.STAT_EVENT,a),this.stat=h}p(kf,A);function dt(a){const h=Do();ht(h,new kf(h,a))}wr.Ja="timingevent";function bf(a,h){A.call(this,wr.Ja,a),this.size=h}p(bf,A);function ei(a,h){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){a()},h)}function ti(){this.g=!0}ti.prototype.ua=function(){this.g=!1};function Yw(a,h,f,v,P,j){a.info(function(){if(a.g)if(j){var z="",ne=j.split("&");for(let ye=0;ye<ne.length;ye++){var Be=ne[ye].split("=");if(Be.length>1){const We=Be[0];Be=Be[1];const nn=We.split("_");z=nn.length>=2&&nn[1]=="type"?z+(We+"="+Be+"&"):z+(We+"=redacted&")}}}else z=null;else z=j;return"XMLHTTP REQ ("+v+") [attempt "+P+"]: "+h+`
`+f+`
`+z})}function Xw(a,h,f,v,P,j,z){a.info(function(){return"XMLHTTP RESP ("+v+") [ attempt "+P+"]: "+h+`
`+f+`
`+j+" "+z})}function es(a,h,f,v){a.info(function(){return"XMLHTTP TEXT ("+h+"): "+Zw(a,f)+(v?" "+v:"")})}function Jw(a,h){a.info(function(){return"TIMEOUT: "+h})}ti.prototype.info=function(){};function Zw(a,h){if(!a.g)return h;if(!h)return null;try{const j=JSON.parse(h);if(j){for(a=0;a<j.length;a++)if(Array.isArray(j[a])){var f=j[a];if(!(f.length<2)){var v=f[1];if(Array.isArray(v)&&!(v.length<1)){var P=v[0];if(P!="noop"&&P!="stop"&&P!="close")for(let z=1;z<v.length;z++)v[z]=""}}}}return ru(j)}catch{return h}}var jo={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},If={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Sf;function ou(){}p(ou,wf),ou.prototype.g=function(){return new XMLHttpRequest},Sf=new ou;function ni(a){return encodeURIComponent(String(a))}function e1(a){var h=1;a=a.split(":");const f=[];for(;h>0&&a.length;)f.push(a.shift()),h--;return a.length&&f.push(a.join(":")),f}function Nn(a,h,f,v){this.j=a,this.i=h,this.l=f,this.S=v||1,this.V=new Xs(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Af}function Af(){this.i=null,this.g="",this.h=!1}var Rf={},au={};function lu(a,h,f){a.M=1,a.A=Lo(tn(h)),a.u=f,a.R=!0,Nf(a,null)}function Nf(a,h){a.F=Date.now(),Vo(a),a.B=tn(a.A);var f=a.B,v=a.S;Array.isArray(v)||(v=[String(v)]),$f(f.i,"t",v),a.C=0,f=a.j.L,a.h=new Af,a.g=am(a.j,f?h:null,!a.u),a.P>0&&(a.O=new Gw(d(a.Y,a,a.g),a.P)),h=a.V,f=a.g,v=a.ba;var P="readystatechange";Array.isArray(P)||(P&&(vf[0]=P.toString()),P=vf);for(let j=0;j<P.length;j++){const z=en(f,P[j],v||h.handleEvent,!1,h.h||h);if(!z)break;h.g[z.key]=z}h=a.J?K(a.J):{},a.u?(a.v||(a.v="POST"),h["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.B,a.v,a.u,h)):(a.v="GET",a.g.ea(a.B,a.v,null,h)),Zs(),Yw(a.i,a.v,a.B,a.l,a.S,a.u)}Nn.prototype.ba=function(a){a=a.target;const h=this.O;h&&Dn(a)==3?h.j():this.Y(a)},Nn.prototype.Y=function(a){try{if(a==this.g)e:{const ne=Dn(this.g),Be=this.g.ya(),ye=this.g.ca();if(!(ne<3)&&(ne!=3||this.g&&(this.h.h||this.g.la()||Yf(this.g)))){this.K||ne!=4||Be==7||(Be==8||ye<=0?Zs(3):Zs(2)),uu(this);var h=this.g.ca();this.X=h;var f=t1(this);if(this.o=h==200,Xw(this.i,this.v,this.B,this.l,this.S,ne,h),this.o){if(this.U&&!this.L){t:{if(this.g){var v,P=this.g;if((v=P.g?P.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!x(v)){var j=v;break t}}j=null}if(a=j)es(this.i,this.l,a,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,cu(this,a);else{this.o=!1,this.m=3,dt(12),xr(this),ri(this);break e}}if(this.R){a=!0;let We;for(;!this.K&&this.C<f.length;)if(We=n1(this,f),We==au){ne==4&&(this.m=4,dt(14),a=!1),es(this.i,this.l,null,"[Incomplete Response]");break}else if(We==Rf){this.m=4,dt(15),es(this.i,this.l,f,"[Invalid Chunk]"),a=!1;break}else es(this.i,this.l,We,null),cu(this,We);if(Cf(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ne!=4||f.length!=0||this.h.h||(this.m=1,dt(16),a=!1),this.o=this.o&&a,!a)es(this.i,this.l,f,"[Invalid Chunked Response]"),xr(this),ri(this);else if(f.length>0&&!this.W){this.W=!0;var z=this.j;z.g==this&&z.aa&&!z.P&&(z.j.info("Great, no buffering proxy detected. Bytes received: "+f.length),vu(z),z.P=!0,dt(11))}}else es(this.i,this.l,f,null),cu(this,f);ne==4&&xr(this),this.o&&!this.K&&(ne==4?rm(this.j,this):(this.o=!1,Vo(this)))}else g1(this.g),h==400&&f.indexOf("Unknown SID")>0?(this.m=3,dt(12)):(this.m=0,dt(13)),xr(this),ri(this)}}}catch{}finally{}};function t1(a){if(!Cf(a))return a.g.la();const h=Yf(a.g);if(h==="")return"";let f="";const v=h.length,P=Dn(a.g)==4;if(!a.h.i){if(typeof TextDecoder>"u")return xr(a),ri(a),"";a.h.i=new o.TextDecoder}for(let j=0;j<v;j++)a.h.h=!0,f+=a.h.i.decode(h[j],{stream:!(P&&j==v-1)});return h.length=0,a.h.g+=f,a.C=0,a.h.g}function Cf(a){return a.g?a.v=="GET"&&a.M!=2&&a.j.Aa:!1}function n1(a,h){var f=a.C,v=h.indexOf(`
`,f);return v==-1?au:(f=Number(h.substring(f,v)),isNaN(f)?Rf:(v+=1,v+f>h.length?au:(h=h.slice(v,v+f),a.C=v+f,h)))}Nn.prototype.cancel=function(){this.K=!0,xr(this)};function Vo(a){a.T=Date.now()+a.H,Pf(a,a.H)}function Pf(a,h){if(a.D!=null)throw Error("WatchDog timer not null");a.D=ei(d(a.aa,a),h)}function uu(a){a.D&&(o.clearTimeout(a.D),a.D=null)}Nn.prototype.aa=function(){this.D=null;const a=Date.now();a-this.T>=0?(Jw(this.i,this.B),this.M!=2&&(Zs(),dt(17)),xr(this),this.m=2,ri(this)):Pf(this,this.T-a)};function ri(a){a.j.I==0||a.K||rm(a.j,a)}function xr(a){uu(a);var h=a.O;h&&typeof h.dispose=="function"&&h.dispose(),a.O=null,_f(a.V),a.g&&(h=a.g,a.g=null,h.abort(),h.dispose())}function cu(a,h){try{var f=a.j;if(f.I!=0&&(f.g==a||hu(f.h,a))){if(!a.L&&hu(f.h,a)&&f.I==3){try{var v=f.Ba.g.parse(h)}catch{v=null}if(Array.isArray(v)&&v.length==3){var P=v;if(P[0]==0){e:if(!f.v){if(f.g)if(f.g.F+3e3<a.F)zo(f),Fo(f);else break e;yu(f),dt(18)}}else f.xa=P[1],0<f.xa-f.K&&P[2]<37500&&f.F&&f.A==0&&!f.C&&(f.C=ei(d(f.Va,f),6e3));Vf(f.h)<=1&&f.ta&&(f.ta=void 0)}else Tr(f,11)}else if((a.L||f.g==a)&&zo(f),!x(h))for(P=f.Ba.g.parse(h),h=0;h<P.length;h++){let ye=P[h];const We=ye[0];if(!(We<=f.K))if(f.K=We,ye=ye[1],f.I==2)if(ye[0]=="c"){f.M=ye[1],f.ba=ye[2];const nn=ye[3];nn!=null&&(f.ka=nn,f.j.info("VER="+f.ka));const kr=ye[4];kr!=null&&(f.za=kr,f.j.info("SVER="+f.za));const jn=ye[5];jn!=null&&typeof jn=="number"&&jn>0&&(v=1.5*jn,f.O=v,f.j.info("backChannelRequestTimeoutMs_="+v)),v=f;const Vn=a.g;if(Vn){const $o=Vn.g?Vn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if($o){var j=v.h;j.g||$o.indexOf("spdy")==-1&&$o.indexOf("quic")==-1&&$o.indexOf("h2")==-1||(j.j=j.l,j.g=new Set,j.h&&(du(j,j.h),j.h=null))}if(v.G){const _u=Vn.g?Vn.g.getResponseHeader("X-HTTP-Session-Id"):null;_u&&(v.wa=_u,xe(v.J,v.G,_u))}}f.I=3,f.l&&f.l.ra(),f.aa&&(f.T=Date.now()-a.F,f.j.info("Handshake RTT: "+f.T+"ms")),v=f;var z=a;if(v.na=om(v,v.L?v.ba:null,v.W),z.L){Lf(v.h,z);var ne=z,Be=v.O;Be&&(ne.H=Be),ne.D&&(uu(ne),Vo(ne)),v.g=z}else tm(v);f.i.length>0&&Uo(f)}else ye[0]!="stop"&&ye[0]!="close"||Tr(f,7);else f.I==3&&(ye[0]=="stop"||ye[0]=="close"?ye[0]=="stop"?Tr(f,7):gu(f):ye[0]!="noop"&&f.l&&f.l.qa(ye),f.A=0)}}Zs(4)}catch{}}var r1=class{constructor(a,h){this.g=a,this.map=h}};function Df(a){this.l=a||10,o.PerformanceNavigationTiming?(a=o.performance.getEntriesByType("navigation"),a=a.length>0&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function jf(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function Vf(a){return a.h?1:a.g?a.g.size:0}function hu(a,h){return a.h?a.h==h:a.g?a.g.has(h):!1}function du(a,h){a.g?a.g.add(h):a.h=h}function Lf(a,h){a.h&&a.h==h?a.h=null:a.g&&a.g.has(h)&&a.g.delete(h)}Df.prototype.cancel=function(){if(this.i=Mf(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function Mf(a){if(a.h!=null)return a.i.concat(a.h.G);if(a.g!=null&&a.g.size!==0){let h=a.i;for(const f of a.g.values())h=h.concat(f.G);return h}return w(a.i)}var Of=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function s1(a,h){if(a){a=a.split("&");for(let f=0;f<a.length;f++){const v=a[f].indexOf("=");let P,j=null;v>=0?(P=a[f].substring(0,v),j=a[f].substring(v+1)):P=a[f],h(P,j?decodeURIComponent(j.replace(/\+/g," ")):"")}}}function Cn(a){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let h;a instanceof Cn?(this.l=a.l,si(this,a.j),this.o=a.o,this.g=a.g,ii(this,a.u),this.h=a.h,fu(this,Hf(a.i)),this.m=a.m):a&&(h=String(a).match(Of))?(this.l=!1,si(this,h[1]||"",!0),this.o=oi(h[2]||""),this.g=oi(h[3]||"",!0),ii(this,h[4]),this.h=oi(h[5]||"",!0),fu(this,h[6]||"",!0),this.m=oi(h[7]||"")):(this.l=!1,this.i=new li(null,this.l))}Cn.prototype.toString=function(){const a=[];var h=this.j;h&&a.push(ai(h,Ff,!0),":");var f=this.g;return(f||h=="file")&&(a.push("//"),(h=this.o)&&a.push(ai(h,Ff,!0),"@"),a.push(ni(f).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.u,f!=null&&a.push(":",String(f))),(f=this.h)&&(this.g&&f.charAt(0)!="/"&&a.push("/"),a.push(ai(f,f.charAt(0)=="/"?a1:o1,!0))),(f=this.i.toString())&&a.push("?",f),(f=this.m)&&a.push("#",ai(f,u1)),a.join("")},Cn.prototype.resolve=function(a){const h=tn(this);let f=!!a.j;f?si(h,a.j):f=!!a.o,f?h.o=a.o:f=!!a.g,f?h.g=a.g:f=a.u!=null;var v=a.h;if(f)ii(h,a.u);else if(f=!!a.h){if(v.charAt(0)!="/")if(this.g&&!this.h)v="/"+v;else{var P=h.h.lastIndexOf("/");P!=-1&&(v=h.h.slice(0,P+1)+v)}if(P=v,P==".."||P==".")v="";else if(P.indexOf("./")!=-1||P.indexOf("/.")!=-1){v=P.lastIndexOf("/",0)==0,P=P.split("/");const j=[];for(let z=0;z<P.length;){const ne=P[z++];ne=="."?v&&z==P.length&&j.push(""):ne==".."?((j.length>1||j.length==1&&j[0]!="")&&j.pop(),v&&z==P.length&&j.push("")):(j.push(ne),v=!0)}v=j.join("/")}else v=P}return f?h.h=v:f=a.i.toString()!=="",f?fu(h,Hf(a.i)):f=!!a.m,f&&(h.m=a.m),h};function tn(a){return new Cn(a)}function si(a,h,f){a.j=f?oi(h,!0):h,a.j&&(a.j=a.j.replace(/:$/,""))}function ii(a,h){if(h){if(h=Number(h),isNaN(h)||h<0)throw Error("Bad port number "+h);a.u=h}else a.u=null}function fu(a,h,f){h instanceof li?(a.i=h,c1(a.i,a.l)):(f||(h=ai(h,l1)),a.i=new li(h,a.l))}function xe(a,h,f){a.i.set(h,f)}function Lo(a){return xe(a,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),a}function oi(a,h){return a?h?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function ai(a,h,f){return typeof a=="string"?(a=encodeURI(a).replace(h,i1),f&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function i1(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var Ff=/[#\/\?@]/g,o1=/[#\?:]/g,a1=/[#\?]/g,l1=/[#\?@]/g,u1=/#/g;function li(a,h){this.h=this.g=null,this.i=a||null,this.j=!!h}function Er(a){a.g||(a.g=new Map,a.h=0,a.i&&s1(a.i,function(h,f){a.add(decodeURIComponent(h.replace(/\+/g," ")),f)}))}t=li.prototype,t.add=function(a,h){Er(this),this.i=null,a=ts(this,a);let f=this.g.get(a);return f||this.g.set(a,f=[]),f.push(h),this.h+=1,this};function Uf(a,h){Er(a),h=ts(a,h),a.g.has(h)&&(a.i=null,a.h-=a.g.get(h).length,a.g.delete(h))}function zf(a,h){return Er(a),h=ts(a,h),a.g.has(h)}t.forEach=function(a,h){Er(this),this.g.forEach(function(f,v){f.forEach(function(P){a.call(h,P,v,this)},this)},this)};function Bf(a,h){Er(a);let f=[];if(typeof h=="string")zf(a,h)&&(f=f.concat(a.g.get(ts(a,h))));else for(a=Array.from(a.g.values()),h=0;h<a.length;h++)f=f.concat(a[h]);return f}t.set=function(a,h){return Er(this),this.i=null,a=ts(this,a),zf(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[h]),this.h+=1,this},t.get=function(a,h){return a?(a=Bf(this,a),a.length>0?String(a[0]):h):h};function $f(a,h,f){Uf(a,h),f.length>0&&(a.i=null,a.g.set(ts(a,h),w(f)),a.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],h=Array.from(this.g.keys());for(let v=0;v<h.length;v++){var f=h[v];const P=ni(f);f=Bf(this,f);for(let j=0;j<f.length;j++){let z=P;f[j]!==""&&(z+="="+ni(f[j])),a.push(z)}}return this.i=a.join("&")};function Hf(a){const h=new li;return h.i=a.i,a.g&&(h.g=new Map(a.g),h.h=a.h),h}function ts(a,h){return h=String(h),a.j&&(h=h.toLowerCase()),h}function c1(a,h){h&&!a.j&&(Er(a),a.i=null,a.g.forEach(function(f,v){const P=v.toLowerCase();v!=P&&(Uf(this,v),$f(this,P,f))},a)),a.j=h}function h1(a,h){const f=new ti;if(o.Image){const v=new Image;v.onload=m(Pn,f,"TestLoadImage: loaded",!0,h,v),v.onerror=m(Pn,f,"TestLoadImage: error",!1,h,v),v.onabort=m(Pn,f,"TestLoadImage: abort",!1,h,v),v.ontimeout=m(Pn,f,"TestLoadImage: timeout",!1,h,v),o.setTimeout(function(){v.ontimeout&&v.ontimeout()},1e4),v.src=a}else h(!1)}function d1(a,h){const f=new ti,v=new AbortController,P=setTimeout(()=>{v.abort(),Pn(f,"TestPingServer: timeout",!1,h)},1e4);fetch(a,{signal:v.signal}).then(j=>{clearTimeout(P),j.ok?Pn(f,"TestPingServer: ok",!0,h):Pn(f,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(P),Pn(f,"TestPingServer: error",!1,h)})}function Pn(a,h,f,v,P){try{P&&(P.onload=null,P.onerror=null,P.onabort=null,P.ontimeout=null),v(f)}catch{}}function f1(){this.g=new Qw}function mu(a){this.i=a.Sb||null,this.h=a.ab||!1}p(mu,wf),mu.prototype.g=function(){return new Mo(this.i,this.h)};function Mo(a,h){rt.call(this),this.H=a,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}p(Mo,rt),t=Mo.prototype,t.open=function(a,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=a,this.D=h,this.readyState=1,ci(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const h={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};a&&(h.body=a),(this.H||o).fetch(new Request(this.D,h)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,ui(this)),this.readyState=0},t.Pa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,ci(this)),this.g&&(this.readyState=3,ci(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;qf(this)}else a.text().then(this.Oa.bind(this),this.ga.bind(this))};function qf(a){a.j.read().then(a.Ma.bind(a)).catch(a.ga.bind(a))}t.Ma=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var h=a.value?a.value:new Uint8Array(0);(h=this.B.decode(h,{stream:!a.done}))&&(this.response=this.responseText+=h)}a.done?ui(this):ci(this),this.readyState==3&&qf(this)}},t.Oa=function(a){this.g&&(this.response=this.responseText=a,ui(this))},t.Na=function(a){this.g&&(this.response=a,ui(this))},t.ga=function(){this.g&&ui(this)};function ui(a){a.readyState=4,a.l=null,a.j=null,a.B=null,ci(a)}t.setRequestHeader=function(a,h){this.A.append(a,h)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],h=this.h.entries();for(var f=h.next();!f.done;)f=f.value,a.push(f[0]+": "+f[1]),f=h.next();return a.join(`\r
`)};function ci(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(Mo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function Wf(a){let h="";return Q(a,function(f,v){h+=v,h+=":",h+=f,h+=`\r
`}),h}function pu(a,h,f){e:{for(v in f){var v=!1;break e}v=!0}v||(f=Wf(f),typeof a=="string"?f!=null&&ni(f):xe(a,h,f))}function Ne(a){rt.call(this),this.headers=new Map,this.L=a||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}p(Ne,rt);var m1=/^https?$/i,p1=["POST","PUT"];t=Ne.prototype,t.Fa=function(a){this.H=a},t.ea=function(a,h,f,v){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);h=h?h.toUpperCase():"GET",this.D=a,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Sf.g(),this.g.onreadystatechange=g(d(this.Ca,this));try{this.B=!0,this.g.open(h,String(a),!0),this.B=!1}catch(j){Gf(this,j);return}if(a=f||"",f=new Map(this.headers),v)if(Object.getPrototypeOf(v)===Object.prototype)for(var P in v)f.set(P,v[P]);else if(typeof v.keys=="function"&&typeof v.get=="function")for(const j of v.keys())f.set(j,v.get(j));else throw Error("Unknown input type for opt_headers: "+String(v));v=Array.from(f.keys()).find(j=>j.toLowerCase()=="content-type"),P=o.FormData&&a instanceof o.FormData,!(Array.prototype.indexOf.call(p1,h,void 0)>=0)||v||P||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[j,z]of f)this.g.setRequestHeader(j,z);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(a),this.v=!1}catch(j){Gf(this,j)}};function Gf(a,h){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=h,a.o=5,Kf(a),Oo(a)}function Kf(a){a.A||(a.A=!0,ht(a,"complete"),ht(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=a||7,ht(this,"complete"),ht(this,"abort"),Oo(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Oo(this,!0)),Ne.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Qf(this):this.Xa())},t.Xa=function(){Qf(this)};function Qf(a){if(a.h&&typeof i<"u"){if(a.v&&Dn(a)==4)setTimeout(a.Ca.bind(a),0);else if(ht(a,"readystatechange"),Dn(a)==4){a.h=!1;try{const j=a.ca();e:switch(j){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var f;if(!(f=h)){var v;if(v=j===0){let z=String(a.D).match(Of)[1]||null;!z&&o.self&&o.self.location&&(z=o.self.location.protocol.slice(0,-1)),v=!m1.test(z?z.toLowerCase():"")}f=v}if(f)ht(a,"complete"),ht(a,"success");else{a.o=6;try{var P=Dn(a)>2?a.g.statusText:""}catch{P=""}a.l=P+" ["+a.ca()+"]",Kf(a)}}finally{Oo(a)}}}}function Oo(a,h){if(a.g){a.m&&(clearTimeout(a.m),a.m=null);const f=a.g;a.g=null,h||ht(a,"ready");try{f.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Dn(a){return a.g?a.g.readyState:0}t.ca=function(){try{return Dn(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(a){if(this.g){var h=this.g.responseText;return a&&h.indexOf(a)==0&&(h=h.substring(a.length)),Kw(h)}};function Yf(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.F){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function g1(a){const h={};a=(a.g&&Dn(a)>=2&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let v=0;v<a.length;v++){if(x(a[v]))continue;var f=e1(a[v]);const P=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();const j=h[P]||[];h[P]=j,j.push(f)}q(h,function(v){return v.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function hi(a,h,f){return f&&f.internalChannelParams&&f.internalChannelParams[a]||h}function Xf(a){this.za=0,this.i=[],this.j=new ti,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=hi("failFast",!1,a),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=hi("baseRetryDelayMs",5e3,a),this.Za=hi("retryDelaySeedMs",1e4,a),this.Ta=hi("forwardChannelMaxRetries",2,a),this.va=hi("forwardChannelRequestTimeoutMs",2e4,a),this.ma=a&&a.xmlHttpFactory||void 0,this.Ua=a&&a.Rb||void 0,this.Aa=a&&a.useFetchStreams||!1,this.O=void 0,this.L=a&&a.supportsCrossDomainXhr||!1,this.M="",this.h=new Df(a&&a.concurrentRequestLimit),this.Ba=new f1,this.S=a&&a.fastHandshake||!1,this.R=a&&a.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=a&&a.Pb||!1,a&&a.ua&&this.j.ua(),a&&a.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&a&&a.detectBufferingProxy||!1,this.ia=void 0,a&&a.longPollingTimeout&&a.longPollingTimeout>0&&(this.ia=a.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Xf.prototype,t.ka=8,t.I=1,t.connect=function(a,h,f,v){dt(0),this.W=a,this.H=h||{},f&&v!==void 0&&(this.H.OSID=f,this.H.OAID=v),this.F=this.X,this.J=om(this,null,this.W),Uo(this)};function gu(a){if(Jf(a),a.I==3){var h=a.V++,f=tn(a.J);if(xe(f,"SID",a.M),xe(f,"RID",h),xe(f,"TYPE","terminate"),di(a,f),h=new Nn(a,a.j,h),h.M=2,h.A=Lo(tn(f)),f=!1,o.navigator&&o.navigator.sendBeacon)try{f=o.navigator.sendBeacon(h.A.toString(),"")}catch{}!f&&o.Image&&(new Image().src=h.A,f=!0),f||(h.g=am(h.j,null),h.g.ea(h.A)),h.F=Date.now(),Vo(h)}im(a)}function Fo(a){a.g&&(vu(a),a.g.cancel(),a.g=null)}function Jf(a){Fo(a),a.v&&(o.clearTimeout(a.v),a.v=null),zo(a),a.h.cancel(),a.m&&(typeof a.m=="number"&&o.clearTimeout(a.m),a.m=null)}function Uo(a){if(!jf(a.h)&&!a.m){a.m=!0;var h=a.Ea;M||_(),O||(M(),O=!0),E.add(h,a),a.D=0}}function y1(a,h){return Vf(a.h)>=a.h.j-(a.m?1:0)?!1:a.m?(a.i=h.G.concat(a.i),!0):a.I==1||a.I==2||a.D>=(a.Sa?0:a.Ta)?!1:(a.m=ei(d(a.Ea,a,h),sm(a,a.D)),a.D++,!0)}t.Ea=function(a){if(this.m)if(this.m=null,this.I==1){if(!a){this.V=Math.floor(Math.random()*1e5),a=this.V++;const P=new Nn(this,this.j,a);let j=this.o;if(this.U&&(j?(j=K(j),W(j,this.U)):j=this.U),this.u!==null||this.R||(P.J=j,j=null),this.S)e:{for(var h=0,f=0;f<this.i.length;f++){t:{var v=this.i[f];if("__data__"in v.map&&(v=v.map.__data__,typeof v=="string")){v=v.length;break t}v=void 0}if(v===void 0)break;if(h+=v,h>4096){h=f;break e}if(h===4096||f===this.i.length-1){h=f+1;break e}}h=1e3}else h=1e3;h=em(this,P,h),f=tn(this.J),xe(f,"RID",a),xe(f,"CVER",22),this.G&&xe(f,"X-HTTP-Session-Id",this.G),di(this,f),j&&(this.R?h="headers="+ni(Wf(j))+"&"+h:this.u&&pu(f,this.u,j)),du(this.h,P),this.Ra&&xe(f,"TYPE","init"),this.S?(xe(f,"$req",h),xe(f,"SID","null"),P.U=!0,lu(P,f,null)):lu(P,f,h),this.I=2}}else this.I==3&&(a?Zf(this,a):this.i.length==0||jf(this.h)||Zf(this))};function Zf(a,h){var f;h?f=h.l:f=a.V++;const v=tn(a.J);xe(v,"SID",a.M),xe(v,"RID",f),xe(v,"AID",a.K),di(a,v),a.u&&a.o&&pu(v,a.u,a.o),f=new Nn(a,a.j,f,a.D+1),a.u===null&&(f.J=a.o),h&&(a.i=h.G.concat(a.i)),h=em(a,f,1e3),f.H=Math.round(a.va*.5)+Math.round(a.va*.5*Math.random()),du(a.h,f),lu(f,v,h)}function di(a,h){a.H&&Q(a.H,function(f,v){xe(h,v,f)}),a.l&&Q({},function(f,v){xe(h,v,f)})}function em(a,h,f){f=Math.min(a.i.length,f);const v=a.l?d(a.l.Ka,a.l,a):null;e:{var P=a.i;let ne=-1;for(;;){const Be=["count="+f];ne==-1?f>0?(ne=P[0].g,Be.push("ofs="+ne)):ne=0:Be.push("ofs="+ne);let ye=!0;for(let We=0;We<f;We++){var j=P[We].g;const nn=P[We].map;if(j-=ne,j<0)ne=Math.max(0,P[We].g-100),ye=!1;else try{j="req"+j+"_"||"";try{var z=nn instanceof Map?nn:Object.entries(nn);for(const[kr,jn]of z){let Vn=jn;l(jn)&&(Vn=ru(jn)),Be.push(j+kr+"="+encodeURIComponent(Vn))}}catch(kr){throw Be.push(j+"type="+encodeURIComponent("_badmap")),kr}}catch{v&&v(nn)}}if(ye){z=Be.join("&");break e}}z=void 0}return a=a.i.splice(0,f),h.G=a,z}function tm(a){if(!a.g&&!a.v){a.Y=1;var h=a.Da;M||_(),O||(M(),O=!0),E.add(h,a),a.A=0}}function yu(a){return a.g||a.v||a.A>=3?!1:(a.Y++,a.v=ei(d(a.Da,a),sm(a,a.A)),a.A++,!0)}t.Da=function(){if(this.v=null,nm(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var a=4*this.T;this.j.info("BP detection timer enabled: "+a),this.B=ei(d(this.Wa,this),a)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,dt(10),Fo(this),nm(this))};function vu(a){a.B!=null&&(o.clearTimeout(a.B),a.B=null)}function nm(a){a.g=new Nn(a,a.j,"rpc",a.Y),a.u===null&&(a.g.J=a.o),a.g.P=0;var h=tn(a.na);xe(h,"RID","rpc"),xe(h,"SID",a.M),xe(h,"AID",a.K),xe(h,"CI",a.F?"0":"1"),!a.F&&a.ia&&xe(h,"TO",a.ia),xe(h,"TYPE","xmlhttp"),di(a,h),a.u&&a.o&&pu(h,a.u,a.o),a.O&&(a.g.H=a.O);var f=a.g;a=a.ba,f.M=1,f.A=Lo(tn(h)),f.u=null,f.R=!0,Nf(f,a)}t.Va=function(){this.C!=null&&(this.C=null,Fo(this),yu(this),dt(19))};function zo(a){a.C!=null&&(o.clearTimeout(a.C),a.C=null)}function rm(a,h){var f=null;if(a.g==h){zo(a),vu(a),a.g=null;var v=2}else if(hu(a.h,h))f=h.G,Lf(a.h,h),v=1;else return;if(a.I!=0){if(h.o)if(v==1){f=h.u?h.u.length:0,h=Date.now()-h.F;var P=a.D;v=Do(),ht(v,new bf(v,f)),Uo(a)}else tm(a);else if(P=h.m,P==3||P==0&&h.X>0||!(v==1&&y1(a,h)||v==2&&yu(a)))switch(f&&f.length>0&&(h=a.h,h.i=h.i.concat(f)),P){case 1:Tr(a,5);break;case 4:Tr(a,10);break;case 3:Tr(a,6);break;default:Tr(a,2)}}}function sm(a,h){let f=a.Qa+Math.floor(Math.random()*a.Za);return a.isActive()||(f*=2),f*h}function Tr(a,h){if(a.j.info("Error code "+h),h==2){var f=d(a.bb,a),v=a.Ua;const P=!v;v=new Cn(v||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||si(v,"https"),Lo(v),P?h1(v.toString(),f):d1(v.toString(),f)}else dt(2);a.I=0,a.l&&a.l.pa(h),im(a),Jf(a)}t.bb=function(a){a?(this.j.info("Successfully pinged google.com"),dt(2)):(this.j.info("Failed to ping google.com"),dt(1))};function im(a){if(a.I=0,a.ja=[],a.l){const h=Mf(a.h);(h.length!=0||a.i.length!=0)&&(S(a.ja,h),S(a.ja,a.i),a.h.i.length=0,w(a.i),a.i.length=0),a.l.oa()}}function om(a,h,f){var v=f instanceof Cn?tn(f):new Cn(f);if(v.g!="")h&&(v.g=h+"."+v.g),ii(v,v.u);else{var P=o.location;v=P.protocol,h=h?h+"."+P.hostname:P.hostname,P=+P.port;const j=new Cn(null);v&&si(j,v),h&&(j.g=h),P&&ii(j,P),f&&(j.h=f),v=j}return f=a.G,h=a.wa,f&&h&&xe(v,f,h),xe(v,"VER",a.ka),di(a,v),v}function am(a,h,f){if(h&&!a.L)throw Error("Can't create secondary domain capable XhrIo object.");return h=a.Aa&&!a.ma?new Ne(new mu({ab:f})):new Ne(a.ma),h.Fa(a.L),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function lm(){}t=lm.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Bo(){}Bo.prototype.g=function(a,h){return new St(a,h)};function St(a,h){rt.call(this),this.g=new Xf(h),this.l=a,this.h=h&&h.messageUrlParams||null,a=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(a?a["X-WebChannel-Content-Type"]=h.messageContentType:a={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.sa&&(a?a["X-WebChannel-Client-Profile"]=h.sa:a={"X-WebChannel-Client-Profile":h.sa}),this.g.U=a,(a=h&&h.Qb)&&!x(a)&&(this.g.u=a),this.A=h&&h.supportsCrossDomainXhr||!1,this.v=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!x(h)&&(this.g.G=h,a=this.h,a!==null&&h in a&&(a=this.h,h in a&&delete a[h])),this.j=new ns(this)}p(St,rt),St.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},St.prototype.close=function(){gu(this.g)},St.prototype.o=function(a){var h=this.g;if(typeof a=="string"){var f={};f.__data__=a,a=f}else this.v&&(f={},f.__data__=ru(a),a=f);h.i.push(new r1(h.Ya++,a)),h.I==3&&Uo(h)},St.prototype.N=function(){this.g.l=null,delete this.j,gu(this.g),delete this.g,St.Z.N.call(this)};function um(a){su.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var h=a.__sm__;if(h){e:{for(const f in h){a=f;break e}a=void 0}(this.i=a)&&(a=this.i,h=h!==null&&a in h?h[a]:void 0),this.data=h}else this.data=a}p(um,su);function cm(){iu.call(this),this.status=1}p(cm,iu);function ns(a){this.g=a}p(ns,lm),ns.prototype.ra=function(){ht(this.g,"a")},ns.prototype.qa=function(a){ht(this.g,new um(a))},ns.prototype.pa=function(a){ht(this.g,new cm)},ns.prototype.oa=function(){ht(this.g,"b")},Bo.prototype.createWebChannel=Bo.prototype.g,St.prototype.send=St.prototype.o,St.prototype.open=St.prototype.m,St.prototype.close=St.prototype.close,Mv=function(){return new Bo},Lv=function(){return Do()},Vv=wr,rh={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},jo.NO_ERROR=0,jo.TIMEOUT=8,jo.HTTP_ERROR=6,Ia=jo,If.COMPLETE="complete",jv=If,xf.EventType=Js,Js.OPEN="a",Js.CLOSE="b",Js.ERROR="c",Js.MESSAGE="d",rt.prototype.listen=rt.prototype.J,Ii=xf,Ne.prototype.listenOnce=Ne.prototype.K,Ne.prototype.getLastError=Ne.prototype.Ha,Ne.prototype.getLastErrorCode=Ne.prototype.ya,Ne.prototype.getStatus=Ne.prototype.ca,Ne.prototype.getResponseJson=Ne.prototype.La,Ne.prototype.getResponseText=Ne.prototype.la,Ne.prototype.send=Ne.prototype.ea,Ne.prototype.setWithCredentials=Ne.prototype.Fa,Dv=Ne}).apply(typeof aa<"u"?aa:typeof self<"u"?self:typeof window<"u"?window:{});const Dp="@firebase/firestore",jp="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}at.UNAUTHENTICATED=new at(null),at.GOOGLE_CREDENTIALS=new at("google-credentials-uid"),at.FIRST_PARTY=new at("first-party-uid"),at.MOCK_USER=new at("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ws="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hr=new Ev("@firebase/firestore");function ss(){return Hr.logLevel}function H(t,...e){if(Hr.logLevel<=ce.DEBUG){const n=e.map(Ed);Hr.debug(`Firestore (${Ws}): ${t}`,...n)}}function Sn(t,...e){if(Hr.logLevel<=ce.ERROR){const n=e.map(Ed);Hr.error(`Firestore (${Ws}): ${t}`,...n)}}function Ls(t,...e){if(Hr.logLevel<=ce.WARN){const n=e.map(Ed);Hr.warn(`Firestore (${Ws}): ${t}`,...n)}}function Ed(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,Ov(t,r,n)}function Ov(t,e,n){let r=`FIRESTORE (${Ws}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Sn(r),new Error(r)}function fe(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||Ov(e,s,r)}function te(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class $ extends Yr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fv{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class WT{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(at.UNAUTHENTICATED))}shutdown(){}}class GT{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class KT{constructor(e){this.t=e,this.currentUser=at.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){fe(this.o===void 0,42304);let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let i=new rr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new rr,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},l=u=>{H("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(H("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new rr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(H("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(fe(typeof r.accessToken=="string",31837,{l:r}),new Fv(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return fe(e===null||typeof e=="string",2055,{h:e}),new at(e)}}class QT{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=at.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class YT{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new QT(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(at.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Vp{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class XT{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Iv(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){fe(this.o===void 0,3512);const r=i=>{i.error!=null&&H("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,H("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{H("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):H("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Vp(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(fe(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Vp(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JT(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Td{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=JT(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function oe(t,e){return t<e?-1:t>e?1:0}function sh(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),i=e.charAt(r);if(s!==i)return Yu(s)===Yu(i)?oe(s,i):Yu(s)?1:-1}return oe(t.length,e.length)}const ZT=55296,ek=57343;function Yu(t){const e=t.charCodeAt(0);return e>=ZT&&e<=ek}function Ms(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lp="__name__";class on{constructor(e,n,r){n===void 0?n=0:n>e.length&&X(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&X(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return on.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof on?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=on.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return oe(e.length,n.length)}static compareSegments(e,n){const r=on.isNumericId(e),s=on.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?on.extractNumericId(e).compare(on.extractNumericId(n)):sh(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return nr.fromString(e.substring(4,e.length-2))}}class _e extends on{construct(e,n,r){return new _e(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new $(V.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new _e(n)}static emptyPath(){return new _e([])}}const tk=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ze extends on{construct(e,n,r){return new Ze(e,n,r)}static isValidIdentifier(e){return tk.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ze.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Lp}static keyField(){return new Ze([Lp])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new $(V.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new $(V.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new $(V.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,s+=2}else l==="`"?(o=!o,s++):l!=="."||o?(r+=l,s++):(i(),s++)}if(i(),o)throw new $(V.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ze(n)}static emptyPath(){return new Ze([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y{constructor(e){this.path=e}static fromPath(e){return new Y(_e.fromString(e))}static fromName(e){return new Y(_e.fromString(e).popFirst(5))}static empty(){return new Y(_e.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&_e.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return _e.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Y(new _e(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uv(t,e,n){if(!n)throw new $(V.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function nk(t,e,n,r){if(e===!0&&r===!0)throw new $(V.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Mp(t){if(!Y.isDocumentKey(t))throw new $(V.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Op(t){if(Y.isDocumentKey(t))throw new $(V.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function zv(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function jl(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":X(12329,{type:typeof t})}function zt(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new $(V.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=jl(t);throw new $(V.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ze(t,e){const n={typeString:t};return e&&(n.value=e),n}function Io(t,e){if(!zv(t))throw new $(V.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(s&&typeof o!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new $(V.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fp=-62135596800,Up=1e6;class Te{static now(){return Te.fromMillis(Date.now())}static fromDate(e){return Te.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*Up);return new Te(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new $(V.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new $(V.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Fp)throw new $(V.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new $(V.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Up}_compareTo(e){return this.seconds===e.seconds?oe(this.nanoseconds,e.nanoseconds):oe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Te._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Io(e,Te._jsonSchema))return new Te(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Fp;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Te._jsonSchemaVersion="firestore/timestamp/1.0",Te._jsonSchema={type:ze("string",Te._jsonSchemaVersion),seconds:ze("number"),nanoseconds:ze("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ee{static fromTimestamp(e){return new ee(e)}static min(){return new ee(new Te(0,0))}static max(){return new ee(new Te(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ho=-1;function rk(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=ee.fromTimestamp(r===1e9?new Te(n+1,0):new Te(n,r));return new ar(s,Y.empty(),e)}function sk(t){return new ar(t.readTime,t.key,ho)}class ar{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new ar(ee.min(),Y.empty(),ho)}static max(){return new ar(ee.max(),Y.empty(),ho)}}function ik(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Y.comparator(t.documentKey,e.documentKey),n!==0?n:oe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ok="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ak{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gs(t){if(t.code!==V.FAILED_PRECONDITION||t.message!==ok)throw t;H("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&X(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new L((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof L?n:L.resolve(n)}catch(n){return L.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):L.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):L.reject(n)}static resolve(e){return new L((n,r)=>{n(e)})}static reject(e){return new L((n,r)=>{r(e)})}static waitFor(e){return new L((n,r)=>{let s=0,i=0,o=!1;e.forEach(l=>{++s,l.next(()=>{++i,o&&i===s&&n()},u=>r(u))}),o=!0,i===s&&n()})}static or(e){let n=L.resolve(!1);for(const r of e)n=n.next(s=>s?L.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new L((r,s)=>{const i=e.length,o=new Array(i);let l=0;for(let u=0;u<i;u++){const d=u;n(e[d]).next(m=>{o[d]=m,++l,l===i&&r(o)},m=>s(m))}})}static doWhile(e,n){return new L((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function lk(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ks(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vl{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Vl.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kd=-1;function Ll(t){return t==null}function il(t){return t===0&&1/t==-1/0}function uk(t){return typeof t=="number"&&Number.isInteger(t)&&!il(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bv="";function ck(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=zp(e)),e=hk(t.get(n),e);return zp(e)}function hk(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case Bv:n+="";break;default:n+=i}}return n}function zp(t){return t+Bv+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bp(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function yr(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function $v(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re{constructor(e,n){this.comparator=e,this.root=n||Xe.EMPTY}insert(e,n){return new Re(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Xe.BLACK,null,null))}remove(e){return new Re(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Xe.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new la(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new la(this.root,e,this.comparator,!1)}getReverseIterator(){return new la(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new la(this.root,e,this.comparator,!0)}}class la{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Xe{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Xe.RED,this.left=s??Xe.EMPTY,this.right=i??Xe.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new Xe(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Xe.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Xe.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Xe.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Xe.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw X(43730,{key:this.key,value:this.value});if(this.right.isRed())throw X(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw X(27949);return e+(this.isRed()?0:1)}}Xe.EMPTY=null,Xe.RED=!0,Xe.BLACK=!1;Xe.EMPTY=new class{constructor(){this.size=0}get key(){throw X(57766)}get value(){throw X(16141)}get color(){throw X(16727)}get left(){throw X(29726)}get right(){throw X(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new Xe(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qe{constructor(e){this.comparator=e,this.data=new Re(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new $p(this.data.getIterator())}getIteratorFrom(e){return new $p(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof qe)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new qe(this.comparator);return n.data=e,n}}class $p{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nt{constructor(e){this.fields=e,e.sort(Ze.comparator)}static empty(){return new Nt([])}unionWith(e){let n=new qe(Ze.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Nt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ms(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hv extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new Hv("Invalid base64 string: "+i):i}}(e);return new nt(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new nt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return oe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}nt.EMPTY_BYTE_STRING=new nt("");const dk=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function lr(t){if(fe(!!t,39018),typeof t=="string"){let e=0;const n=dk.exec(t);if(fe(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:je(t.seconds),nanos:je(t.nanos)}}function je(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ur(t){return typeof t=="string"?nt.fromBase64String(t):nt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qv="server_timestamp",Wv="__type__",Gv="__previous_value__",Kv="__local_write_time__";function bd(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[Wv])==null?void 0:r.stringValue)===qv}function Ml(t){const e=t.mapValue.fields[Gv];return bd(e)?Ml(e):e}function fo(t){const e=lr(t.mapValue.fields[Kv].timestampValue);return new Te(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fk{constructor(e,n,r,s,i,o,l,u,d,m){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=d,this.isUsingEmulator=m}}const ol="(default)";class mo{constructor(e,n){this.projectId=e,this.database=n||ol}static empty(){return new mo("","")}get isDefaultDatabase(){return this.database===ol}isEqual(e){return e instanceof mo&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qv="__type__",mk="__max__",ua={mapValue:{}},Yv="__vector__",al="value";function cr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?bd(t)?4:gk(t)?9007199254740991:pk(t)?10:11:X(28295,{value:t})}function gn(t,e){if(t===e)return!0;const n=cr(t);if(n!==cr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return fo(t).isEqual(fo(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=lr(s.timestampValue),l=lr(i.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return ur(s.bytesValue).isEqual(ur(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return je(s.geoPointValue.latitude)===je(i.geoPointValue.latitude)&&je(s.geoPointValue.longitude)===je(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return je(s.integerValue)===je(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=je(s.doubleValue),l=je(i.doubleValue);return o===l?il(o)===il(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return Ms(t.arrayValue.values||[],e.arrayValue.values||[],gn);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},l=i.mapValue.fields||{};if(Bp(o)!==Bp(l))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(l[u]===void 0||!gn(o[u],l[u])))return!1;return!0}(t,e);default:return X(52216,{left:t})}}function po(t,e){return(t.values||[]).find(n=>gn(n,e))!==void 0}function Os(t,e){if(t===e)return 0;const n=cr(t),r=cr(e);if(n!==r)return oe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return oe(t.booleanValue,e.booleanValue);case 2:return function(i,o){const l=je(i.integerValue||i.doubleValue),u=je(o.integerValue||o.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return Hp(t.timestampValue,e.timestampValue);case 4:return Hp(fo(t),fo(e));case 5:return sh(t.stringValue,e.stringValue);case 6:return function(i,o){const l=ur(i),u=ur(o);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const l=i.split("/"),u=o.split("/");for(let d=0;d<l.length&&d<u.length;d++){const m=oe(l[d],u[d]);if(m!==0)return m}return oe(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const l=oe(je(i.latitude),je(o.latitude));return l!==0?l:oe(je(i.longitude),je(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return qp(t.arrayValue,e.arrayValue);case 10:return function(i,o){var g,w,S,R;const l=i.fields||{},u=o.fields||{},d=(g=l[al])==null?void 0:g.arrayValue,m=(w=u[al])==null?void 0:w.arrayValue,p=oe(((S=d==null?void 0:d.values)==null?void 0:S.length)||0,((R=m==null?void 0:m.values)==null?void 0:R.length)||0);return p!==0?p:qp(d,m)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===ua.mapValue&&o===ua.mapValue)return 0;if(i===ua.mapValue)return 1;if(o===ua.mapValue)return-1;const l=i.fields||{},u=Object.keys(l),d=o.fields||{},m=Object.keys(d);u.sort(),m.sort();for(let p=0;p<u.length&&p<m.length;++p){const g=sh(u[p],m[p]);if(g!==0)return g;const w=Os(l[u[p]],d[m[p]]);if(w!==0)return w}return oe(u.length,m.length)}(t.mapValue,e.mapValue);default:throw X(23264,{he:n})}}function Hp(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return oe(t,e);const n=lr(t),r=lr(e),s=oe(n.seconds,r.seconds);return s!==0?s:oe(n.nanos,r.nanos)}function qp(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Os(n[s],r[s]);if(i)return i}return oe(n.length,r.length)}function Fs(t){return ih(t)}function ih(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=lr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return ur(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Y.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=ih(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${ih(n.fields[o])}`;return s+"}"}(t.mapValue):X(61005,{value:t})}function Sa(t){switch(cr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Ml(t);return e?16+Sa(e):16;case 5:return 2*t.stringValue.length;case 6:return ur(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+Sa(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return yr(r.fields,(i,o)=>{s+=i.length+Sa(o)}),s}(t.mapValue);default:throw X(13486,{value:t})}}function Wp(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function oh(t){return!!t&&"integerValue"in t}function Id(t){return!!t&&"arrayValue"in t}function Gp(t){return!!t&&"nullValue"in t}function Kp(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Aa(t){return!!t&&"mapValue"in t}function pk(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[Qv])==null?void 0:r.stringValue)===Yv}function Ui(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return yr(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Ui(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ui(t.arrayValue.values[n]);return e}return{...t}}function gk(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===mk}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(e){this.value=e}static empty(){return new Et({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Aa(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ui(n)}setAll(e){let n=Ze.emptyPath(),r={},s=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,r,s),r={},s=[],n=l.popLast()}o?r[l.lastSegment()]=Ui(o):s.push(l.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Aa(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return gn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Aa(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){yr(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new Et(Ui(this.value))}}function Xv(t){const e=[];return yr(t.fields,(n,r)=>{const s=new Ze([n]);if(Aa(r)){const i=Xv(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Nt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut{constructor(e,n,r,s,i,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=l}static newInvalidDocument(e){return new ut(e,0,ee.min(),ee.min(),ee.min(),Et.empty(),0)}static newFoundDocument(e,n,r,s){return new ut(e,1,n,ee.min(),r,s,0)}static newNoDocument(e,n){return new ut(e,2,n,ee.min(),ee.min(),Et.empty(),0)}static newUnknownDocument(e,n){return new ut(e,3,n,ee.min(),ee.min(),Et.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ee.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Et.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Et.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ee.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ut&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ut(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ll{constructor(e,n){this.position=e,this.inclusive=n}}function Qp(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=Y.comparator(Y.fromName(o.referenceValue),n.key):r=Os(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function Yp(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!gn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go{constructor(e,n="asc"){this.field=e,this.dir=n}}function yk(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jv{}class Ue extends Jv{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new _k(e,n,r):n==="array-contains"?new Ek(e,r):n==="in"?new Tk(e,r):n==="not-in"?new kk(e,r):n==="array-contains-any"?new bk(e,r):new Ue(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new wk(e,r):new xk(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Os(n,this.value)):n!==null&&cr(this.value)===cr(n)&&this.matchesComparison(Os(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return X(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Zt extends Jv{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Zt(e,n)}matches(e){return Zv(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Zv(t){return t.op==="and"}function e_(t){return vk(t)&&Zv(t)}function vk(t){for(const e of t.filters)if(e instanceof Zt)return!1;return!0}function ah(t){if(t instanceof Ue)return t.field.canonicalString()+t.op.toString()+Fs(t.value);if(e_(t))return t.filters.map(e=>ah(e)).join(",");{const e=t.filters.map(n=>ah(n)).join(",");return`${t.op}(${e})`}}function t_(t,e){return t instanceof Ue?function(r,s){return s instanceof Ue&&r.op===s.op&&r.field.isEqual(s.field)&&gn(r.value,s.value)}(t,e):t instanceof Zt?function(r,s){return s instanceof Zt&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,l)=>i&&t_(o,s.filters[l]),!0):!1}(t,e):void X(19439)}function n_(t){return t instanceof Ue?function(n){return`${n.field.canonicalString()} ${n.op} ${Fs(n.value)}`}(t):t instanceof Zt?function(n){return n.op.toString()+" {"+n.getFilters().map(n_).join(" ,")+"}"}(t):"Filter"}class _k extends Ue{constructor(e,n,r){super(e,n,r),this.key=Y.fromName(r.referenceValue)}matches(e){const n=Y.comparator(e.key,this.key);return this.matchesComparison(n)}}class wk extends Ue{constructor(e,n){super(e,"in",n),this.keys=r_("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class xk extends Ue{constructor(e,n){super(e,"not-in",n),this.keys=r_("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function r_(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>Y.fromName(r.referenceValue))}class Ek extends Ue{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Id(n)&&po(n.arrayValue,this.value)}}class Tk extends Ue{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&po(this.value.arrayValue,n)}}class kk extends Ue{constructor(e,n){super(e,"not-in",n)}matches(e){if(po(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!po(this.value.arrayValue,n)}}class bk extends Ue{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Id(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>po(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ik{constructor(e,n=null,r=[],s=[],i=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=l,this.Te=null}}function Xp(t,e=null,n=[],r=[],s=null,i=null,o=null){return new Ik(t,e,n,r,s,i,o)}function Sd(t){const e=te(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>ah(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Ll(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Fs(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Fs(r)).join(",")),e.Te=n}return e.Te}function Ad(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!yk(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!t_(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Yp(t.startAt,e.startAt)&&Yp(t.endAt,e.endAt)}function lh(t){return Y.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qs{constructor(e,n=null,r=[],s=[],i=null,o="F",l=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=l,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function Sk(t,e,n,r,s,i,o,l){return new Qs(t,e,n,r,s,i,o,l)}function Rd(t){return new Qs(t)}function Jp(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function s_(t){return t.collectionGroup!==null}function zi(t){const e=te(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new qe(Ze.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(l=l.add(d.field))})}),l})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new go(i,r))}),n.has(Ze.keyField().canonicalString())||e.Ie.push(new go(Ze.keyField(),r))}return e.Ie}function dn(t){const e=te(t);return e.Ee||(e.Ee=Ak(e,zi(t))),e.Ee}function Ak(t,e){if(t.limitType==="F")return Xp(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new go(s.field,i)});const n=t.endAt?new ll(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new ll(t.startAt.position,t.startAt.inclusive):null;return Xp(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function uh(t,e){const n=t.filters.concat([e]);return new Qs(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function ch(t,e,n){return new Qs(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Ol(t,e){return Ad(dn(t),dn(e))&&t.limitType===e.limitType}function i_(t){return`${Sd(dn(t))}|lt:${t.limitType}`}function is(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>n_(s)).join(", ")}]`),Ll(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Fs(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Fs(s)).join(",")),`Target(${r})`}(dn(t))}; limitType=${t.limitType})`}function Fl(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):Y.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of zi(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,l,u){const d=Qp(o,l,u);return o.inclusive?d<=0:d<0}(r.startAt,zi(r),s)||r.endAt&&!function(o,l,u){const d=Qp(o,l,u);return o.inclusive?d>=0:d>0}(r.endAt,zi(r),s))}(t,e)}function Rk(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function o_(t){return(e,n)=>{let r=!1;for(const s of zi(t)){const i=Nk(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function Nk(t,e,n){const r=t.field.isKeyField()?Y.comparator(e.key,n.key):function(i,o,l){const u=o.data.field(i),d=l.data.field(i);return u!==null&&d!==null?Os(u,d):X(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return X(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xr{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){yr(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return $v(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ck=new Re(Y.comparator);function An(){return Ck}const a_=new Re(Y.comparator);function Si(...t){let e=a_;for(const n of t)e=e.insert(n.key,n);return e}function l_(t){let e=a_;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Pr(){return Bi()}function u_(){return Bi()}function Bi(){return new Xr(t=>t.toString(),(t,e)=>t.isEqual(e))}const Pk=new Re(Y.comparator),Dk=new qe(Y.comparator);function ae(...t){let e=Dk;for(const n of t)e=e.add(n);return e}const jk=new qe(oe);function Vk(){return jk}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nd(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:il(e)?"-0":e}}function c_(t){return{integerValue:""+t}}function Lk(t,e){return uk(e)?c_(e):Nd(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ul{constructor(){this._=void 0}}function Mk(t,e,n){return t instanceof yo?function(s,i){const o={fields:{[Wv]:{stringValue:qv},[Kv]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&bd(i)&&(i=Ml(i)),i&&(o.fields[Gv]=i),{mapValue:o}}(n,e):t instanceof vo?d_(t,e):t instanceof _o?f_(t,e):function(s,i){const o=h_(s,i),l=Zp(o)+Zp(s.Ae);return oh(o)&&oh(s.Ae)?c_(l):Nd(s.serializer,l)}(t,e)}function Ok(t,e,n){return t instanceof vo?d_(t,e):t instanceof _o?f_(t,e):n}function h_(t,e){return t instanceof ul?function(r){return oh(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class yo extends Ul{}class vo extends Ul{constructor(e){super(),this.elements=e}}function d_(t,e){const n=m_(e);for(const r of t.elements)n.some(s=>gn(s,r))||n.push(r);return{arrayValue:{values:n}}}class _o extends Ul{constructor(e){super(),this.elements=e}}function f_(t,e){let n=m_(e);for(const r of t.elements)n=n.filter(s=>!gn(s,r));return{arrayValue:{values:n}}}class ul extends Ul{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Zp(t){return je(t.integerValue||t.doubleValue)}function m_(t){return Id(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fk{constructor(e,n){this.field=e,this.transform=n}}function Uk(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof vo&&s instanceof vo||r instanceof _o&&s instanceof _o?Ms(r.elements,s.elements,gn):r instanceof ul&&s instanceof ul?gn(r.Ae,s.Ae):r instanceof yo&&s instanceof yo}(t.transform,e.transform)}class zk{constructor(e,n){this.version=e,this.transformResults=n}}class Bt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Bt}static exists(e){return new Bt(void 0,e)}static updateTime(e){return new Bt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ra(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class zl{}function p_(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Cd(t.key,Bt.none()):new So(t.key,t.data,Bt.none());{const n=t.data,r=Et.empty();let s=new qe(Ze.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new vr(t.key,r,new Nt(s.toArray()),Bt.none())}}function Bk(t,e,n){t instanceof So?function(s,i,o){const l=s.value.clone(),u=tg(s.fieldTransforms,i,o.transformResults);l.setAll(u),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof vr?function(s,i,o){if(!Ra(s.precondition,i))return void i.convertToUnknownDocument(o.version);const l=tg(s.fieldTransforms,i,o.transformResults),u=i.data;u.setAll(g_(s)),u.setAll(l),i.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function $i(t,e,n,r){return t instanceof So?function(i,o,l,u){if(!Ra(i.precondition,o))return l;const d=i.value.clone(),m=ng(i.fieldTransforms,u,o);return d.setAll(m),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof vr?function(i,o,l,u){if(!Ra(i.precondition,o))return l;const d=ng(i.fieldTransforms,u,o),m=o.data;return m.setAll(g_(i)),m.setAll(d),o.convertToFoundDocument(o.version,m).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(i,o,l){return Ra(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function $k(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=h_(r.transform,s||null);i!=null&&(n===null&&(n=Et.empty()),n.set(r.field,i))}return n||null}function eg(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Ms(r,s,(i,o)=>Uk(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class So extends zl{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class vr extends zl{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function g_(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function tg(t,e,n){const r=new Map;fe(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,l=e.data.field(i.field);r.set(i.field,Ok(o,l,n[s]))}return r}function ng(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,Mk(i,o,e))}return r}class Cd extends zl{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Hk extends zl{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qk{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&Bk(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=$i(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=$i(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=u_();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let l=this.applyToLocalView(o,i.mutatedFields);l=n.has(s.key)?null:l;const u=p_(o,l);u!==null&&r.set(s.key,u),o.isValidDocument()||o.convertToNoDocument(ee.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ae())}isEqual(e){return this.batchId===e.batchId&&Ms(this.mutations,e.mutations,(n,r)=>eg(n,r))&&Ms(this.baseMutations,e.baseMutations,(n,r)=>eg(n,r))}}class Pd{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){fe(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=function(){return Pk}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new Pd(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wk{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gk{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Oe,ue;function Kk(t){switch(t){case V.OK:return X(64938);case V.CANCELLED:case V.UNKNOWN:case V.DEADLINE_EXCEEDED:case V.RESOURCE_EXHAUSTED:case V.INTERNAL:case V.UNAVAILABLE:case V.UNAUTHENTICATED:return!1;case V.INVALID_ARGUMENT:case V.NOT_FOUND:case V.ALREADY_EXISTS:case V.PERMISSION_DENIED:case V.FAILED_PRECONDITION:case V.ABORTED:case V.OUT_OF_RANGE:case V.UNIMPLEMENTED:case V.DATA_LOSS:return!0;default:return X(15467,{code:t})}}function y_(t){if(t===void 0)return Sn("GRPC error has no .code"),V.UNKNOWN;switch(t){case Oe.OK:return V.OK;case Oe.CANCELLED:return V.CANCELLED;case Oe.UNKNOWN:return V.UNKNOWN;case Oe.DEADLINE_EXCEEDED:return V.DEADLINE_EXCEEDED;case Oe.RESOURCE_EXHAUSTED:return V.RESOURCE_EXHAUSTED;case Oe.INTERNAL:return V.INTERNAL;case Oe.UNAVAILABLE:return V.UNAVAILABLE;case Oe.UNAUTHENTICATED:return V.UNAUTHENTICATED;case Oe.INVALID_ARGUMENT:return V.INVALID_ARGUMENT;case Oe.NOT_FOUND:return V.NOT_FOUND;case Oe.ALREADY_EXISTS:return V.ALREADY_EXISTS;case Oe.PERMISSION_DENIED:return V.PERMISSION_DENIED;case Oe.FAILED_PRECONDITION:return V.FAILED_PRECONDITION;case Oe.ABORTED:return V.ABORTED;case Oe.OUT_OF_RANGE:return V.OUT_OF_RANGE;case Oe.UNIMPLEMENTED:return V.UNIMPLEMENTED;case Oe.DATA_LOSS:return V.DATA_LOSS;default:return X(39323,{code:t})}}(ue=Oe||(Oe={}))[ue.OK=0]="OK",ue[ue.CANCELLED=1]="CANCELLED",ue[ue.UNKNOWN=2]="UNKNOWN",ue[ue.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ue[ue.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ue[ue.NOT_FOUND=5]="NOT_FOUND",ue[ue.ALREADY_EXISTS=6]="ALREADY_EXISTS",ue[ue.PERMISSION_DENIED=7]="PERMISSION_DENIED",ue[ue.UNAUTHENTICATED=16]="UNAUTHENTICATED",ue[ue.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ue[ue.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ue[ue.ABORTED=10]="ABORTED",ue[ue.OUT_OF_RANGE=11]="OUT_OF_RANGE",ue[ue.UNIMPLEMENTED=12]="UNIMPLEMENTED",ue[ue.INTERNAL=13]="INTERNAL",ue[ue.UNAVAILABLE=14]="UNAVAILABLE",ue[ue.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qk(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yk=new nr([4294967295,4294967295],0);function rg(t){const e=Qk().encode(t),n=new Pv;return n.update(e),new Uint8Array(n.digest())}function sg(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new nr([n,r],0),new nr([s,i],0)]}class Dd{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Ai(`Invalid padding: ${n}`);if(r<0)throw new Ai(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ai(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Ai(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=nr.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(nr.fromNumber(r)));return s.compare(Yk)===1&&(s=new nr([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=rg(e),[r,s]=sg(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);if(!this.we(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Dd(i,s,n);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.ge===0)return;const n=rg(e),[r,s]=sg(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Ai extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bl{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Ao.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Bl(ee.min(),s,new Re(oe),An(),ae())}}class Ao{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Ao(r,n,ae(),ae(),ae())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Na{constructor(e,n,r,s){this.be=e,this.removedTargetIds=n,this.key=r,this.De=s}}class v_{constructor(e,n){this.targetId=e,this.Ce=n}}class __{constructor(e,n,r=nt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class ig{constructor(){this.ve=0,this.Fe=og(),this.Me=nt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ae(),n=ae(),r=ae();return this.Fe.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:X(38017,{changeType:i})}}),new Ao(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=og()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,fe(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class Xk{constructor(e){this.Ge=e,this.ze=new Map,this.je=An(),this.Je=ca(),this.He=ca(),this.Ye=new Re(oe)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:X(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,s)=>{this.rt(s)&&n(s)})}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const i=s.target;if(lh(i))if(r===0){const o=new Y(i.path);this.et(n,o,ut.newNoDocument(o,ee.min()))}else fe(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const l=this.ut(e),u=l?this.ct(l,e,o):1;if(u!==0){this.it(n);const d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,d)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,l;try{o=ur(r).toUint8Array()}catch(u){if(u instanceof Hv)return Ls("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new Dd(o,s,i)}catch(u){return Ls(u instanceof Ai?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.ge===0?null:l}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Ge.ht(),l=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.et(n,i,null),s++)}),s}Tt(e){const n=new Map;this.ze.forEach((i,o)=>{const l=this.ot(o);if(l){if(i.current&&lh(l.target)){const u=new Y(l.target.path);this.It(u).has(o)||this.Et(o,u)||this.et(o,u,ut.newNoDocument(u,e))}i.Be&&(n.set(o,i.ke()),i.qe())}});let r=ae();this.He.forEach((i,o)=>{let l=!0;o.forEachWhile(u=>{const d=this.ot(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(i))}),this.je.forEach((i,o)=>o.setReadTime(e));const s=new Bl(e,n,this.Ye,this.je,r);return this.je=An(),this.Je=ca(),this.He=ca(),this.Ye=new Re(oe),s}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new ig,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new qe(oe),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new qe(oe),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||H("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new ig),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function ca(){return new Re(Y.comparator)}function og(){return new Re(Y.comparator)}const Jk={asc:"ASCENDING",desc:"DESCENDING"},Zk={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},eb={and:"AND",or:"OR"};class tb{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function hh(t,e){return t.useProto3Json||Ll(e)?e:{value:e}}function cl(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function w_(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function nb(t,e){return cl(t,e.toTimestamp())}function fn(t){return fe(!!t,49232),ee.fromTimestamp(function(n){const r=lr(n);return new Te(r.seconds,r.nanos)}(t))}function jd(t,e){return dh(t,e).canonicalString()}function dh(t,e){const n=function(s){return new _e(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function x_(t){const e=_e.fromString(t);return fe(I_(e),10190,{key:e.toString()}),e}function fh(t,e){return jd(t.databaseId,e.path)}function Xu(t,e){const n=x_(e);if(n.get(1)!==t.databaseId.projectId)throw new $(V.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new $(V.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Y(T_(n))}function E_(t,e){return jd(t.databaseId,e)}function rb(t){const e=x_(t);return e.length===4?_e.emptyPath():T_(e)}function mh(t){return new _e(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function T_(t){return fe(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function ag(t,e,n){return{name:fh(t,e),fields:n.value.mapValue.fields}}function sb(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:X(39313,{state:d})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(d,m){return d.useProto3Json?(fe(m===void 0||typeof m=="string",58123),nt.fromBase64String(m||"")):(fe(m===void 0||m instanceof Buffer||m instanceof Uint8Array,16193),nt.fromUint8Array(m||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(d){const m=d.code===void 0?V.UNKNOWN:y_(d.code);return new $(m,d.message||"")}(o);n=new __(r,s,i,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Xu(t,r.document.name),i=fn(r.document.updateTime),o=r.document.createTime?fn(r.document.createTime):ee.min(),l=new Et({mapValue:{fields:r.document.fields}}),u=ut.newFoundDocument(s,i,o,l),d=r.targetIds||[],m=r.removedTargetIds||[];n=new Na(d,m,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Xu(t,r.document),i=r.readTime?fn(r.readTime):ee.min(),o=ut.newNoDocument(s,i),l=r.removedTargetIds||[];n=new Na([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Xu(t,r.document),i=r.removedTargetIds||[];n=new Na([],i,s,null)}else{if(!("filter"in e))return X(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new Gk(s,i),l=r.targetId;n=new v_(l,o)}}return n}function ib(t,e){let n;if(e instanceof So)n={update:ag(t,e.key,e.value)};else if(e instanceof Cd)n={delete:fh(t,e.key)};else if(e instanceof vr)n={update:ag(t,e.key,e.data),updateMask:mb(e.fieldMask)};else{if(!(e instanceof Hk))return X(16599,{Vt:e.type});n={verify:fh(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const l=o.transform;if(l instanceof yo)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof vo)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof _o)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof ul)return{fieldPath:o.field.canonicalString(),increment:l.Ae};throw X(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:nb(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:X(27497)}(t,e.precondition)),n}function ob(t,e){return t&&t.length>0?(fe(e!==void 0,14353),t.map(n=>function(s,i){let o=s.updateTime?fn(s.updateTime):fn(i);return o.isEqual(ee.min())&&(o=fn(i)),new zk(o,s.transformResults||[])}(n,e))):[]}function ab(t,e){return{documents:[E_(t,e.path)]}}function lb(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=E_(t,s);const i=function(d){if(d.length!==0)return b_(Zt.create(d,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(d){if(d.length!==0)return d.map(m=>function(g){return{field:os(g.field),direction:hb(g.dir)}}(m))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=hh(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{ft:n,parent:s}}function ub(t){let e=rb(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){fe(r===1,65062);const m=n.from[0];m.allDescendants?s=m.collectionId:e=e.child(m.collectionId)}let i=[];n.where&&(i=function(p){const g=k_(p);return g instanceof Zt&&e_(g)?g.getFilters():[g]}(n.where));let o=[];n.orderBy&&(o=function(p){return p.map(g=>function(S){return new go(as(S.field),function(C){switch(C){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction))}(g))}(n.orderBy));let l=null;n.limit&&(l=function(p){let g;return g=typeof p=="object"?p.value:p,Ll(g)?null:g}(n.limit));let u=null;n.startAt&&(u=function(p){const g=!!p.before,w=p.values||[];return new ll(w,g)}(n.startAt));let d=null;return n.endAt&&(d=function(p){const g=!p.before,w=p.values||[];return new ll(w,g)}(n.endAt)),Sk(e,s,o,i,l,"F",u,d)}function cb(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return X(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function k_(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=as(n.unaryFilter.field);return Ue.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=as(n.unaryFilter.field);return Ue.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=as(n.unaryFilter.field);return Ue.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=as(n.unaryFilter.field);return Ue.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return X(61313);default:return X(60726)}}(t):t.fieldFilter!==void 0?function(n){return Ue.create(as(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return X(58110);default:return X(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Zt.create(n.compositeFilter.filters.map(r=>k_(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return X(1026)}}(n.compositeFilter.op))}(t):X(30097,{filter:t})}function hb(t){return Jk[t]}function db(t){return Zk[t]}function fb(t){return eb[t]}function os(t){return{fieldPath:t.canonicalString()}}function as(t){return Ze.fromServerFormat(t.fieldPath)}function b_(t){return t instanceof Ue?function(n){if(n.op==="=="){if(Kp(n.value))return{unaryFilter:{field:os(n.field),op:"IS_NAN"}};if(Gp(n.value))return{unaryFilter:{field:os(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Kp(n.value))return{unaryFilter:{field:os(n.field),op:"IS_NOT_NAN"}};if(Gp(n.value))return{unaryFilter:{field:os(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:os(n.field),op:db(n.op),value:n.value}}}(t):t instanceof Zt?function(n){const r=n.getFilters().map(s=>b_(s));return r.length===1?r[0]:{compositeFilter:{op:fb(n.op),filters:r}}}(t):X(54877,{filter:t})}function mb(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function I_(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hn{constructor(e,n,r,s,i=ee.min(),o=ee.min(),l=nt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new Hn(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Hn(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Hn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Hn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pb{constructor(e){this.yt=e}}function gb(t){const e=ub({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?ch(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yb{constructor(){this.Cn=new vb}addToCollectionParentIndex(e,n){return this.Cn.add(n),L.resolve()}getCollectionParents(e,n){return L.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return L.resolve()}deleteFieldIndex(e,n){return L.resolve()}deleteAllFieldIndexes(e){return L.resolve()}createTargetIndexes(e,n){return L.resolve()}getDocumentsMatchingTarget(e,n){return L.resolve(null)}getIndexType(e,n){return L.resolve(0)}getFieldIndexes(e,n){return L.resolve([])}getNextCollectionGroupToUpdate(e){return L.resolve(null)}getMinOffset(e,n){return L.resolve(ar.min())}getMinOffsetFromCollectionGroup(e,n){return L.resolve(ar.min())}updateCollectionGroup(e,n,r){return L.resolve()}updateIndexEntries(e,n){return L.resolve()}}class vb{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new qe(_e.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new qe(_e.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lg={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},S_=41943040;class wt{static withCacheSize(e){return new wt(e,wt.DEFAULT_COLLECTION_PERCENTILE,wt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */wt.DEFAULT_COLLECTION_PERCENTILE=10,wt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,wt.DEFAULT=new wt(S_,wt.DEFAULT_COLLECTION_PERCENTILE,wt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),wt.DISABLED=new wt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Us{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Us(0)}static cr(){return new Us(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ug="LruGarbageCollector",_b=1048576;function cg([t,e],[n,r]){const s=oe(t,n);return s===0?oe(e,r):s}class wb{constructor(e){this.Ir=e,this.buffer=new qe(cg),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();cg(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class xb{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){H(ug,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Ks(n)?H(ug,"Ignoring IndexedDB error during garbage collection: ",n):await Gs(n)}await this.Vr(3e5)})}}class Eb{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return L.resolve(Vl.ce);const r=new wb(n);return this.mr.forEachTarget(e,s=>r.Ar(s.sequenceNumber)).next(()=>this.mr.pr(e,s=>r.Ar(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(H("LruGarbageCollector","Garbage collection skipped; disabled"),L.resolve(lg)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(H("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),lg):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,s,i,o,l,u,d;const m=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(H("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),s=this.params.maximumSequenceNumbersToCollect):s=p,o=Date.now(),this.nthSequenceNumber(e,s))).next(p=>(r=p,l=Date.now(),this.removeTargets(e,r,n))).next(p=>(i=p,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(d=Date.now(),ss()<=ce.DEBUG&&H("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-m}ms
	Determined least recently used ${s} in `+(l-o)+`ms
	Removed ${i} targets in `+(u-l)+`ms
	Removed ${p} documents in `+(d-u)+`ms
Total Duration: ${d-m}ms`),L.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:p})))}}function Tb(t,e){return new Eb(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kb{constructor(){this.changes=new Xr(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,ut.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?L.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bb{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ib{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&$i(r.mutation,s,Nt.empty(),Te.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ae()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ae()){const s=Pr();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=Si();return i.forEach((l,u)=>{o=o.insert(l,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Pr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ae()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,s){let i=An();const o=Bi(),l=function(){return Bi()}();return n.forEach((u,d)=>{const m=r.get(d.key);s.has(d.key)&&(m===void 0||m.mutation instanceof vr)?i=i.insert(d.key,d):m!==void 0?(o.set(d.key,m.mutation.getFieldMask()),$i(m.mutation,d,m.mutation.getFieldMask(),Te.now())):o.set(d.key,Nt.empty())}),this.recalculateAndSaveOverlays(e,i).next(u=>(u.forEach((d,m)=>o.set(d,m)),n.forEach((d,m)=>l.set(d,new bb(m,o.get(d)??null))),l))}recalculateAndSaveOverlays(e,n){const r=Bi();let s=new Re((o,l)=>o-l),i=ae();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(u=>{const d=n.get(u);if(d===null)return;let m=r.get(u)||Nt.empty();m=l.applyToLocalView(d,m),r.set(u,m);const p=(s.get(l.batchId)||ae()).add(u);s=s.insert(l.batchId,p)})}).next(()=>{const o=[],l=s.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),d=u.key,m=u.value,p=u_();m.forEach(g=>{if(!i.has(g)){const w=p_(n.get(g),r.get(g));w!==null&&p.set(g,w),i=i.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,p))}return L.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return Y.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):s_(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):L.resolve(Pr());let l=ho,u=i;return o.next(d=>L.forEach(d,(m,p)=>(l<p.largestBatchId&&(l=p.largestBatchId),i.get(m)?L.resolve():this.remoteDocumentCache.getEntry(e,m).next(g=>{u=u.insert(m,g)}))).next(()=>this.populateOverlays(e,d,i)).next(()=>this.computeViews(e,u,d,ae())).next(m=>({batchId:l,changes:l_(m)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Y(n)).next(r=>{let s=Si();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=Si();return this.indexManager.getCollectionParents(e,i).next(l=>L.forEach(l,u=>{const d=function(p,g){return new Qs(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,u.child(i));return this.getDocumentsMatchingCollectionQuery(e,d,r,s).next(m=>{m.forEach((p,g)=>{o=o.insert(p,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((u,d)=>{const m=d.getKey();o.get(m)===null&&(o=o.insert(m,ut.newInvalidDocument(m)))});let l=Si();return o.forEach((u,d)=>{const m=i.get(u);m!==void 0&&$i(m.mutation,d,Nt.empty(),Te.now()),Fl(n,d)&&(l=l.insert(u,d))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sb{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return L.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:fn(s.createTime)}}(n)),L.resolve()}getNamedQuery(e,n){return L.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(s){return{name:s.name,query:gb(s.bundledQuery),readTime:fn(s.readTime)}}(n)),L.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ab{constructor(){this.overlays=new Re(Y.comparator),this.qr=new Map}getOverlay(e,n){return L.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Pr();return L.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.St(e,n,i)}),L.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.qr.delete(r)),L.resolve()}getOverlaysForCollection(e,n,r){const s=Pr(),i=n.length+1,o=new Y(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const u=l.getNext().value,d=u.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===i&&u.largestBatchId>r&&s.set(u.getKey(),u)}return L.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Re((d,m)=>d-m);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let m=i.get(d.largestBatchId);m===null&&(m=Pr(),i=i.insert(d.largestBatchId,m)),m.set(d.getKey(),d)}}const l=Pr(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,m)=>l.set(d,m)),!(l.size()>=s)););return L.resolve(l)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Wk(n,r));let i=this.qr.get(n);i===void 0&&(i=ae(),this.qr.set(n,i)),this.qr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rb{constructor(){this.sessionToken=nt.EMPTY_BYTE_STRING}getSessionToken(e){return L.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,L.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vd{constructor(){this.Qr=new qe(Ge.$r),this.Ur=new qe(Ge.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new Ge(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new Ge(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new Y(new _e([])),r=new Ge(n,e),s=new Ge(n,e+1),i=[];return this.Ur.forEachInRange([r,s],o=>{this.Gr(o),i.push(o.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new Y(new _e([])),r=new Ge(n,e),s=new Ge(n,e+1);let i=ae();return this.Ur.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Ge(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Ge{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return Y.comparator(e.key,n.key)||oe(e.Yr,n.Yr)}static Kr(e,n){return oe(e.Yr,n.Yr)||Y.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nb{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new qe(Ge.$r)}checkEmpty(e){return L.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new qk(i,n,r,s);this.mutationQueue.push(o);for(const l of s)this.Zr=this.Zr.add(new Ge(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return L.resolve(o)}lookupMutationBatch(e,n){return L.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ei(r),i=s<0?0:s;return L.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return L.resolve(this.mutationQueue.length===0?kd:this.tr-1)}getAllMutationBatches(e){return L.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Ge(n,0),s=new Ge(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([r,s],o=>{const l=this.Xr(o.Yr);i.push(l)}),L.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new qe(oe);return n.forEach(s=>{const i=new Ge(s,0),o=new Ge(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,o],l=>{r=r.add(l.Yr)})}),L.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;Y.isDocumentKey(i)||(i=i.child(""));const o=new Ge(new Y(i),0);let l=new qe(oe);return this.Zr.forEachWhile(u=>{const d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===s&&(l=l.add(u.Yr)),!0)},o),L.resolve(this.ti(l))}ti(e){const n=[];return e.forEach(r=>{const s=this.Xr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){fe(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return L.forEach(n.mutations,s=>{const i=new Ge(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new Ge(n,0),s=this.Zr.firstAfterOrEqual(r);return L.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,L.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cb{constructor(e){this.ri=e,this.docs=function(){return new Re(Y.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return L.resolve(r?r.document.mutableCopy():ut.newInvalidDocument(n))}getEntries(e,n){let r=An();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():ut.newInvalidDocument(s))}),L.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=An();const o=n.path,l=new Y(o.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:d,value:{document:m}}=u.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||ik(sk(m),r)<=0||(s.has(m.key)||Fl(n,m))&&(i=i.insert(m.key,m.mutableCopy()))}return L.resolve(i)}getAllFromCollectionGroup(e,n,r,s){X(9500)}ii(e,n){return L.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Pb(this)}getSize(e){return L.resolve(this.size)}}class Pb extends kb{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)}),L.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Db{constructor(e){this.persistence=e,this.si=new Xr(n=>Sd(n),Ad),this.lastRemoteSnapshotVersion=ee.min(),this.highestTargetId=0,this.oi=0,this._i=new Vd,this.targetCount=0,this.ai=Us.ur()}forEachTarget(e,n){return this.si.forEach((r,s)=>n(s)),L.resolve()}getLastRemoteSnapshotVersion(e){return L.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return L.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),L.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),L.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Us(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,L.resolve()}updateTargetData(e,n){return this.Pr(n),L.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,L.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.si.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.si.delete(o),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),L.waitFor(i).next(()=>s)}getTargetCount(e){return L.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return L.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),L.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),L.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),L.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return L.resolve(r)}containsKey(e,n){return L.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A_{constructor(e,n){this.ui={},this.overlays={},this.ci=new Vl(0),this.li=!1,this.li=!0,this.hi=new Rb,this.referenceDelegate=e(this),this.Pi=new Db(this),this.indexManager=new yb,this.remoteDocumentCache=function(s){return new Cb(s)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new pb(n),this.Ii=new Sb(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Ab,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new Nb(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){H("MemoryPersistence","Starting transaction:",e);const s=new jb(this.ci.next());return this.referenceDelegate.Ei(),r(s).next(i=>this.referenceDelegate.di(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ai(e,n){return L.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class jb extends ak{constructor(e){super(),this.currentSequenceNumber=e}}class Ld{constructor(e){this.persistence=e,this.Ri=new Vd,this.Vi=null}static mi(e){return new Ld(e)}get fi(){if(this.Vi)return this.Vi;throw X(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),L.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),L.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),L.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(s=>this.fi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.fi.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return L.forEach(this.fi,r=>{const s=Y.fromPath(r);return this.gi(e,s).next(i=>{i||n.removeEntry(s,ee.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return L.or([()=>L.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class hl{constructor(e,n){this.persistence=e,this.pi=new Xr(r=>ck(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=Tb(this,n)}static mi(e,n){return new hl(e,n)}Ei(){}di(e){return L.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return L.forEach(this.pi,(r,s)=>this.br(e,r,s).next(i=>i?L.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ii(e,o=>this.br(e,o,n).next(l=>{l||(r++,i.removeEntry(o,ee.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),L.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),L.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),L.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),L.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Sa(e.data.value)),n}br(e,n,r){return L.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.pi.get(n);return L.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Md{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=s}static As(e,n){let r=ae(),s=ae();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Md(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vb{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lb{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return P2()?8:lk(N2())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ys(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ws(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new Vb;return this.Ss(e,n,o).next(l=>{if(i.result=l,this.Vs)return this.bs(e,n,o,l.size)})}).next(()=>i.result)}bs(e,n,r,s){return r.documentReadCount<this.fs?(ss()<=ce.DEBUG&&H("QueryEngine","SDK will not create cache indexes for query:",is(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),L.resolve()):(ss()<=ce.DEBUG&&H("QueryEngine","Query:",is(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(ss()<=ce.DEBUG&&H("QueryEngine","The SDK decides to create cache indexes for query:",is(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,dn(n))):L.resolve())}ys(e,n){if(Jp(n))return L.resolve(null);let r=dn(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=ch(n,null,"F"),r=dn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=ae(...i);return this.ps.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(u=>{const d=this.Ds(n,l);return this.Cs(n,d,o,u.readTime)?this.ys(e,ch(n,null,"F")):this.vs(e,d,n,u)}))})))}ws(e,n,r,s){return Jp(n)||s.isEqual(ee.min())?L.resolve(null):this.ps.getDocuments(e,r).next(i=>{const o=this.Ds(n,i);return this.Cs(n,o,r,s)?L.resolve(null):(ss()<=ce.DEBUG&&H("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),is(n)),this.vs(e,o,n,rk(s,ho)).next(l=>l))})}Ds(e,n){let r=new qe(o_(e));return n.forEach((s,i)=>{Fl(e,i)&&(r=r.add(i))}),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ss(e,n,r){return ss()<=ce.DEBUG&&H("QueryEngine","Using full collection scan to execute query:",is(n)),this.ps.getDocumentsMatchingQuery(e,n,ar.min(),r)}vs(e,n,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Od="LocalStore",Mb=3e8;class Ob{constructor(e,n,r,s){this.persistence=e,this.Fs=n,this.serializer=s,this.Ms=new Re(oe),this.xs=new Xr(i=>Sd(i),Ad),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Ib(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function Fb(t,e,n,r){return new Ob(t,e,n,r)}async function R_(t,e){const n=te(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],l=[];let u=ae();for(const d of s){o.push(d.batchId);for(const m of d.mutations)u=u.add(m.key)}for(const d of i){l.push(d.batchId);for(const m of d.mutations)u=u.add(m.key)}return n.localDocuments.getDocuments(r,u).next(d=>({Ls:d,removedBatchIds:o,addedBatchIds:l}))})})}function Ub(t,e){const n=te(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(l,u,d,m){const p=d.batch,g=p.keys();let w=L.resolve();return g.forEach(S=>{w=w.next(()=>m.getEntry(u,S)).next(R=>{const C=d.docVersions.get(S);fe(C!==null,48541),R.version.compareTo(C)<0&&(p.applyToRemoteDocument(R,d),R.isValidDocument()&&(R.setReadTime(d.commitVersion),m.addEntry(R)))})}),w.next(()=>l.mutationQueue.removeMutationBatch(u,p))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let u=ae();for(let d=0;d<l.mutationResults.length;++d)l.mutationResults[d].transformResults.length>0&&(u=u.add(l.batch.mutations[d].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function N_(t){const e=te(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function zb(t,e){const n=te(t),r=e.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const l=[];e.targetChanges.forEach((m,p)=>{const g=s.get(p);if(!g)return;l.push(n.Pi.removeMatchingKeys(i,m.removedDocuments,p).next(()=>n.Pi.addMatchingKeys(i,m.addedDocuments,p)));let w=g.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(p)!==null?w=w.withResumeToken(nt.EMPTY_BYTE_STRING,ee.min()).withLastLimboFreeSnapshotVersion(ee.min()):m.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(m.resumeToken,r)),s=s.insert(p,w),function(R,C,T){return R.resumeToken.approximateByteSize()===0||C.snapshotVersion.toMicroseconds()-R.snapshotVersion.toMicroseconds()>=Mb?!0:T.addedDocuments.size+T.modifiedDocuments.size+T.removedDocuments.size>0}(g,w,m)&&l.push(n.Pi.updateTargetData(i,w))});let u=An(),d=ae();if(e.documentUpdates.forEach(m=>{e.resolvedLimboDocuments.has(m)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,m))}),l.push(Bb(i,o,e.documentUpdates).next(m=>{u=m.ks,d=m.qs})),!r.isEqual(ee.min())){const m=n.Pi.getLastRemoteSnapshotVersion(i).next(p=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,r));l.push(m)}return L.waitFor(l).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,u,d)).next(()=>u)}).then(i=>(n.Ms=s,i))}function Bb(t,e,n){let r=ae(),s=ae();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=An();return n.forEach((l,u)=>{const d=i.get(l);u.isFoundDocument()!==d.isFoundDocument()&&(s=s.add(l)),u.isNoDocument()&&u.version.isEqual(ee.min())?(e.removeEntry(l,u.readTime),o=o.insert(l,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),o=o.insert(l,u)):H(Od,"Ignoring outdated watch update for ",l,". Current version:",d.version," Watch version:",u.version)}),{ks:o,qs:s}})}function $b(t,e){const n=te(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=kd),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Hb(t,e){const n=te(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Pi.getTargetData(r,e).next(i=>i?(s=i,L.resolve(s)):n.Pi.allocateTargetId(r).next(o=>(s=new Hn(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function ph(t,e,n){const r=te(t),s=r.Ms.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Ks(o))throw o;H(Od,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(s.target)}function hg(t,e,n){const r=te(t);let s=ee.min(),i=ae();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,d,m){const p=te(u),g=p.xs.get(m);return g!==void 0?L.resolve(p.Ms.get(g)):p.Pi.getTargetData(d,m)}(r,o,dn(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,l.targetId).next(u=>{i=u})}).next(()=>r.Fs.getDocumentsMatchingQuery(o,e,n?s:ee.min(),n?i:ae())).next(l=>(qb(r,Rk(e),l),{documents:l,Qs:i})))}function qb(t,e,n){let r=t.Os.get(e)||ee.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.Os.set(e,r)}class dg{constructor(){this.activeTargetIds=Vk()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Wb{constructor(){this.Mo=new dg,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new dg,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gb{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fg="ConnectivityMonitor";class mg{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){H(fg,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){H(fg,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ha=null;function gh(){return ha===null?ha=function(){return 268435456+Math.round(2147483648*Math.random())}():ha++,"0x"+ha.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ju="RestConnection",Kb={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Qb{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===ol?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,n,r,s,i){const o=gh(),l=this.zo(e,n.toUriEncodedString());H(Ju,`Sending RPC '${e}' ${o}:`,l,r);const u={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(u,s,i);const{host:d}=new URL(l),m=bo(d);return this.Jo(e,l,u,r,m).then(p=>(H(Ju,`Received RPC '${e}' ${o}: `,p),p),p=>{throw Ls(Ju,`RPC '${e}' ${o} failed with error: `,p,"url: ",l,"request:",r),p})}Ho(e,n,r,s,i,o){return this.Go(e,n,r,s,i)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ws}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}zo(e,n){const r=Kb[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yb{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ot="WebChannelConnection";class Xb extends Qb{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,i){const o=gh();return new Promise((l,u)=>{const d=new Dv;d.setWithCredentials(!0),d.listenOnce(jv.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case Ia.NO_ERROR:const p=d.getResponseJson();H(ot,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(p)),l(p);break;case Ia.TIMEOUT:H(ot,`RPC '${e}' ${o} timed out`),u(new $(V.DEADLINE_EXCEEDED,"Request time out"));break;case Ia.HTTP_ERROR:const g=d.getStatus();if(H(ot,`RPC '${e}' ${o} failed with status:`,g,"response text:",d.getResponseText()),g>0){let w=d.getResponseJson();Array.isArray(w)&&(w=w[0]);const S=w==null?void 0:w.error;if(S&&S.status&&S.message){const R=function(T){const y=T.toLowerCase().replace(/_/g,"-");return Object.values(V).indexOf(y)>=0?y:V.UNKNOWN}(S.status);u(new $(R,S.message))}else u(new $(V.UNKNOWN,"Server responded with status "+d.getStatus()))}else u(new $(V.UNAVAILABLE,"Connection failed."));break;default:X(9055,{l_:e,streamId:o,h_:d.getLastErrorCode(),P_:d.getLastError()})}}finally{H(ot,`RPC '${e}' ${o} completed.`)}});const m=JSON.stringify(s);H(ot,`RPC '${e}' ${o} sending request:`,s),d.send(n,"POST",m,r,15)})}T_(e,n,r){const s=gh(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Mv(),l=Lv(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.jo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const m=i.join("");H(ot,`Creating RPC '${e}' stream ${s}: ${m}`,u);const p=o.createWebChannel(m,u);this.I_(p);let g=!1,w=!1;const S=new Yb({Yo:C=>{w?H(ot,`Not sending because RPC '${e}' stream ${s} is closed:`,C):(g||(H(ot,`Opening RPC '${e}' stream ${s} transport.`),p.open(),g=!0),H(ot,`RPC '${e}' stream ${s} sending:`,C),p.send(C))},Zo:()=>p.close()}),R=(C,T,y)=>{C.listen(T,b=>{try{y(b)}catch(D){setTimeout(()=>{throw D},0)}})};return R(p,Ii.EventType.OPEN,()=>{w||(H(ot,`RPC '${e}' stream ${s} transport opened.`),S.o_())}),R(p,Ii.EventType.CLOSE,()=>{w||(w=!0,H(ot,`RPC '${e}' stream ${s} transport closed`),S.a_(),this.E_(p))}),R(p,Ii.EventType.ERROR,C=>{w||(w=!0,Ls(ot,`RPC '${e}' stream ${s} transport errored. Name:`,C.name,"Message:",C.message),S.a_(new $(V.UNAVAILABLE,"The operation could not be completed")))}),R(p,Ii.EventType.MESSAGE,C=>{var T;if(!w){const y=C.data[0];fe(!!y,16349);const b=y,D=(b==null?void 0:b.error)||((T=b[0])==null?void 0:T.error);if(D){H(ot,`RPC '${e}' stream ${s} received error:`,D);const M=D.status;let O=function(k){const I=Oe[k];if(I!==void 0)return y_(I)}(M),E=D.message;O===void 0&&(O=V.INTERNAL,E="Unknown error status: "+M+" with message "+D.message),w=!0,S.a_(new $(O,E)),p.close()}else H(ot,`RPC '${e}' stream ${s} received:`,y),S.u_(y)}}),R(l,Vv.STAT_EVENT,C=>{C.stat===rh.PROXY?H(ot,`RPC '${e}' stream ${s} detected buffering proxy`):C.stat===rh.NOPROXY&&H(ot,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{S.__()},0),S}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function Zu(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $l(t){return new tb(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C_{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=s,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&H("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pg="PersistentStream";class P_{constructor(e,n,r,s,i,o,l,u){this.Mi=e,this.S_=r,this.b_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new C_(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===V.RESOURCE_EXHAUSTED?(Sn(n.toString()),Sn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===V.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.D_===n&&this.G_(r,s)},r=>{e(()=>{const s=new $(V.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(s=>{r(()=>this.z_(s))}),this.stream.onMessage(s=>{r(()=>++this.F_==1?this.J_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return H(pg,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(H(pg,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Jb extends P_{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=sb(this.serializer,e),r=function(i){if(!("targetChange"in i))return ee.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?ee.min():o.readTime?fn(o.readTime):ee.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=mh(this.serializer),n.addTarget=function(i,o){let l;const u=o.target;if(l=lh(u)?{documents:ab(i,u)}:{query:lb(i,u).ft},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=w_(i,o.resumeToken);const d=hh(i,o.expectedCount);d!==null&&(l.expectedCount=d)}else if(o.snapshotVersion.compareTo(ee.min())>0){l.readTime=cl(i,o.snapshotVersion.toTimestamp());const d=hh(i,o.expectedCount);d!==null&&(l.expectedCount=d)}return l}(this.serializer,e);const r=cb(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=mh(this.serializer),n.removeTarget=e,this.q_(n)}}class Zb extends P_{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return fe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,fe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){fe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=ob(e.writeResults,e.commitTime),r=fn(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=mh(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>ib(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eI{}class tI extends eI{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new $(V.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Go(e,dh(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===V.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new $(V.UNKNOWN,i.toString())})}Ho(e,n,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Ho(e,dh(n,r),s,o,l,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===V.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new $(V.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class nI{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Sn(n),this.aa=!1):H("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qr="RemoteStore";class rI{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(o=>{r.enqueueAndForget(async()=>{Jr(this)&&(H(qr,"Restarting streams for network reachability change."),await async function(u){const d=te(u);d.Ea.add(4),await Ro(d),d.Ra.set("Unknown"),d.Ea.delete(4),await Hl(d)}(this))})}),this.Ra=new nI(r,s)}}async function Hl(t){if(Jr(t))for(const e of t.da)await e(!0)}async function Ro(t){for(const e of t.da)await e(!1)}function D_(t,e){const n=te(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Bd(n)?zd(n):Ys(n).O_()&&Ud(n,e))}function Fd(t,e){const n=te(t),r=Ys(n);n.Ia.delete(e),r.O_()&&j_(n,e),n.Ia.size===0&&(r.O_()?r.L_():Jr(n)&&n.Ra.set("Unknown"))}function Ud(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ee.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ys(t).Y_(e)}function j_(t,e){t.Va.Ue(e),Ys(t).Z_(e)}function zd(t){t.Va=new Xk({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Ys(t).start(),t.Ra.ua()}function Bd(t){return Jr(t)&&!Ys(t).x_()&&t.Ia.size>0}function Jr(t){return te(t).Ea.size===0}function V_(t){t.Va=void 0}async function sI(t){t.Ra.set("Online")}async function iI(t){t.Ia.forEach((e,n)=>{Ud(t,e)})}async function oI(t,e){V_(t),Bd(t)?(t.Ra.ha(e),zd(t)):t.Ra.set("Unknown")}async function aI(t,e,n){if(t.Ra.set("Online"),e instanceof __&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const l of i.targetIds)s.Ia.has(l)&&(await s.remoteSyncer.rejectListen(l,o),s.Ia.delete(l),s.Va.removeTarget(l))}(t,e)}catch(r){H(qr,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await dl(t,r)}else if(e instanceof Na?t.Va.Ze(e):e instanceof v_?t.Va.st(e):t.Va.tt(e),!n.isEqual(ee.min()))try{const r=await N_(t.localStore);n.compareTo(r)>=0&&await function(i,o){const l=i.Va.Tt(o);return l.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const m=i.Ia.get(d);m&&i.Ia.set(d,m.withResumeToken(u.resumeToken,o))}}),l.targetMismatches.forEach((u,d)=>{const m=i.Ia.get(u);if(!m)return;i.Ia.set(u,m.withResumeToken(nt.EMPTY_BYTE_STRING,m.snapshotVersion)),j_(i,u);const p=new Hn(m.target,u,d,m.sequenceNumber);Ud(i,p)}),i.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){H(qr,"Failed to raise snapshot:",r),await dl(t,r)}}async function dl(t,e,n){if(!Ks(e))throw e;t.Ea.add(1),await Ro(t),t.Ra.set("Offline"),n||(n=()=>N_(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{H(qr,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Hl(t)})}function L_(t,e){return e().catch(n=>dl(t,n,e))}async function ql(t){const e=te(t),n=hr(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:kd;for(;lI(e);)try{const s=await $b(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,uI(e,s)}catch(s){await dl(e,s)}M_(e)&&O_(e)}function lI(t){return Jr(t)&&t.Ta.length<10}function uI(t,e){t.Ta.push(e);const n=hr(t);n.O_()&&n.X_&&n.ea(e.mutations)}function M_(t){return Jr(t)&&!hr(t).x_()&&t.Ta.length>0}function O_(t){hr(t).start()}async function cI(t){hr(t).ra()}async function hI(t){const e=hr(t);for(const n of t.Ta)e.ea(n.mutations)}async function dI(t,e,n){const r=t.Ta.shift(),s=Pd.from(r,e,n);await L_(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await ql(t)}async function fI(t,e){e&&hr(t).X_&&await async function(r,s){if(function(o){return Kk(o)&&o!==V.ABORTED}(s.code)){const i=r.Ta.shift();hr(r).B_(),await L_(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await ql(r)}}(t,e),M_(t)&&O_(t)}async function gg(t,e){const n=te(t);n.asyncQueue.verifyOperationInProgress(),H(qr,"RemoteStore received new credentials");const r=Jr(n);n.Ea.add(3),await Ro(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Hl(n)}async function mI(t,e){const n=te(t);e?(n.Ea.delete(2),await Hl(n)):e||(n.Ea.add(2),await Ro(n),n.Ra.set("Unknown"))}function Ys(t){return t.ma||(t.ma=function(n,r,s){const i=te(n);return i.sa(),new Jb(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:sI.bind(null,t),t_:iI.bind(null,t),r_:oI.bind(null,t),H_:aI.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),Bd(t)?zd(t):t.Ra.set("Unknown")):(await t.ma.stop(),V_(t))})),t.ma}function hr(t){return t.fa||(t.fa=function(n,r,s){const i=te(n);return i.sa(),new Zb(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:cI.bind(null,t),r_:fI.bind(null,t),ta:hI.bind(null,t),na:dI.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await ql(t)):(await t.fa.stop(),t.Ta.length>0&&(H(qr,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $d{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new rr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,l=new $d(e,n,o,s,i);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new $(V.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Hd(t,e){if(Sn("AsyncQueue",`${e}: ${t}`),Ks(t))return new $(V.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Is{static emptySet(e){return new Is(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||Y.comparator(n.key,r.key):(n,r)=>Y.comparator(n.key,r.key),this.keyedMap=Si(),this.sortedSet=new Re(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Is)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Is;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yg{constructor(){this.ga=new Re(Y.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):X(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class zs{constructor(e,n,r,s,i,o,l,u,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new zs(e,n,Is.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ol(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pI{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class gI{constructor(){this.queries=vg(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=te(n),i=s.queries;s.queries=vg(),i.forEach((o,l)=>{for(const u of l.Sa)u.onError(r)})})(this,new $(V.ABORTED,"Firestore shutting down"))}}function vg(){return new Xr(t=>i_(t),Ol)}async function F_(t,e){const n=te(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.ba()&&e.Da()&&(r=2):(i=new pI,r=e.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(s,!0);break;case 1:i.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const l=Hd(o,`Initialization of query '${is(e.query)}' failed`);return void e.onError(l)}n.queries.set(s,i),i.Sa.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&qd(n)}async function U_(t,e){const n=te(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.Sa.indexOf(e);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?s=e.Da()?0:1:!i.ba()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function yI(t,e){const n=te(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const l of o.Sa)l.Fa(s)&&(r=!0);o.wa=s}}r&&qd(n)}function vI(t,e,n){const r=te(t),s=r.queries.get(e);if(s)for(const i of s.Sa)i.onError(n);r.queries.delete(e)}function qd(t){t.Ca.forEach(e=>{e.next()})}var yh,_g;(_g=yh||(yh={})).Ma="default",_g.Cache="cache";class z_{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new zs(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=zs.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==yh.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B_{constructor(e){this.key=e}}class $_{constructor(e){this.key=e}}class _I{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ae(),this.mutatedKeys=ae(),this.eu=o_(e),this.tu=new Is(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new yg,s=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,l=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,d=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((m,p)=>{const g=s.get(m),w=Fl(this.query,p)?p:null,S=!!g&&this.mutatedKeys.has(g.key),R=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let C=!1;g&&w?g.data.isEqual(w.data)?S!==R&&(r.track({type:3,doc:w}),C=!0):this.su(g,w)||(r.track({type:2,doc:w}),C=!0,(u&&this.eu(w,u)>0||d&&this.eu(w,d)<0)&&(l=!0)):!g&&w?(r.track({type:0,doc:w}),C=!0):g&&!w&&(r.track({type:1,doc:g}),C=!0,(u||d)&&(l=!0)),C&&(w?(o=o.add(w),i=R?i.add(m):i.delete(m)):(o=o.delete(m),i=i.delete(m)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const m=this.query.limitType==="F"?o.last():o.first();o=o.delete(m.key),i=i.delete(m.key),r.track({type:1,doc:m})}return{tu:o,iu:r,Cs:l,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((m,p)=>function(w,S){const R=C=>{switch(C){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return X(20277,{Rt:C})}};return R(w)-R(S)}(m.type,p.type)||this.eu(m.doc,p.doc)),this.ou(r),s=s??!1;const l=n&&!s?this._u():[],u=this.Xa.size===0&&this.current&&!s?1:0,d=u!==this.Za;return this.Za=u,o.length!==0||d?{snapshot:new zs(this.query,e.tu,i,o,e.mutatedKeys,u===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new yg,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=ae(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new $_(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new B_(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=ae();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return zs.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Wd="SyncEngine";class wI{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class xI{constructor(e){this.key=e,this.hu=!1}}class EI{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Xr(l=>i_(l),Ol),this.Iu=new Map,this.Eu=new Set,this.du=new Re(Y.comparator),this.Au=new Map,this.Ru=new Vd,this.Vu={},this.mu=new Map,this.fu=Us.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function TI(t,e,n=!0){const r=Q_(t);let s;const i=r.Tu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await H_(r,e,n,!0),s}async function kI(t,e){const n=Q_(t);await H_(n,e,!0,!1)}async function H_(t,e,n,r){const s=await Hb(t.localStore,dn(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let l;return r&&(l=await bI(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&D_(t.remoteStore,s),l}async function bI(t,e,n,r,s){t.pu=(p,g,w)=>async function(R,C,T,y){let b=C.view.ru(T);b.Cs&&(b=await hg(R.localStore,C.query,!1).then(({documents:E})=>C.view.ru(E,b)));const D=y&&y.targetChanges.get(C.targetId),M=y&&y.targetMismatches.get(C.targetId)!=null,O=C.view.applyChanges(b,R.isPrimaryClient,D,M);return xg(R,C.targetId,O.au),O.snapshot}(t,p,g,w);const i=await hg(t.localStore,e,!0),o=new _I(e,i.Qs),l=o.ru(i.documents),u=Ao.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),d=o.applyChanges(l,t.isPrimaryClient,u);xg(t,n,d.au);const m=new wI(e,n,o);return t.Tu.set(e,m),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),d.snapshot}async function II(t,e,n){const r=te(t),s=r.Tu.get(e),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter(o=>!Ol(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await ph(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Fd(r.remoteStore,s.targetId),vh(r,s.targetId)}).catch(Gs)):(vh(r,s.targetId),await ph(r.localStore,s.targetId,!0))}async function SI(t,e){const n=te(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Fd(n.remoteStore,r.targetId))}async function AI(t,e,n){const r=VI(t);try{const s=await function(o,l){const u=te(o),d=Te.now(),m=l.reduce((w,S)=>w.add(S.key),ae());let p,g;return u.persistence.runTransaction("Locally write mutations","readwrite",w=>{let S=An(),R=ae();return u.Ns.getEntries(w,m).next(C=>{S=C,S.forEach((T,y)=>{y.isValidDocument()||(R=R.add(T))})}).next(()=>u.localDocuments.getOverlayedDocuments(w,S)).next(C=>{p=C;const T=[];for(const y of l){const b=$k(y,p.get(y.key).overlayedDocument);b!=null&&T.push(new vr(y.key,b,Xv(b.value.mapValue),Bt.exists(!0)))}return u.mutationQueue.addMutationBatch(w,d,T,l)}).next(C=>{g=C;const T=C.applyToLocalDocumentSet(p,R);return u.documentOverlayCache.saveOverlays(w,C.batchId,T)})}).then(()=>({batchId:g.batchId,changes:l_(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,l,u){let d=o.Vu[o.currentUser.toKey()];d||(d=new Re(oe)),d=d.insert(l,u),o.Vu[o.currentUser.toKey()]=d}(r,s.batchId,n),await No(r,s.changes),await ql(r.remoteStore)}catch(s){const i=Hd(s,"Failed to persist write");n.reject(i)}}async function q_(t,e){const n=te(t);try{const r=await zb(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Au.get(i);o&&(fe(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.hu=!0:s.modifiedDocuments.size>0?fe(o.hu,14607):s.removedDocuments.size>0&&(fe(o.hu,42227),o.hu=!1))}),await No(n,r,e)}catch(r){await Gs(r)}}function wg(t,e,n){const r=te(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach((i,o)=>{const l=o.view.va(e);l.snapshot&&s.push(l.snapshot)}),function(o,l){const u=te(o);u.onlineState=l;let d=!1;u.queries.forEach((m,p)=>{for(const g of p.Sa)g.va(l)&&(d=!0)}),d&&qd(u)}(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function RI(t,e,n){const r=te(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),i=s&&s.key;if(i){let o=new Re(Y.comparator);o=o.insert(i,ut.newNoDocument(i,ee.min()));const l=ae().add(i),u=new Bl(ee.min(),new Map,new Re(oe),o,l);await q_(r,u),r.du=r.du.remove(i),r.Au.delete(e),Gd(r)}else await ph(r.localStore,e,!1).then(()=>vh(r,e,n)).catch(Gs)}async function NI(t,e){const n=te(t),r=e.batch.batchId;try{const s=await Ub(n.localStore,e);G_(n,r,null),W_(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await No(n,s)}catch(s){await Gs(s)}}async function CI(t,e,n){const r=te(t);try{const s=await function(o,l){const u=te(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let m;return u.mutationQueue.lookupMutationBatch(d,l).next(p=>(fe(p!==null,37113),m=p.keys(),u.mutationQueue.removeMutationBatch(d,p))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,m,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,m)).next(()=>u.localDocuments.getDocuments(d,m))})}(r.localStore,e);G_(r,e,n),W_(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await No(r,s)}catch(s){await Gs(s)}}function W_(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function G_(t,e,n){const r=te(t);let s=r.Vu[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Vu[r.currentUser.toKey()]=s}}function vh(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||K_(t,r)})}function K_(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Fd(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),Gd(t))}function xg(t,e,n){for(const r of n)r instanceof B_?(t.Ru.addReference(r.key,e),PI(t,r)):r instanceof $_?(H(Wd,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||K_(t,r.key)):X(19791,{wu:r})}function PI(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(H(Wd,"New document in limbo: "+n),t.Eu.add(r),Gd(t))}function Gd(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new Y(_e.fromString(e)),r=t.fu.next();t.Au.set(r,new xI(n)),t.du=t.du.insert(n,r),D_(t.remoteStore,new Hn(dn(Rd(n.path)),r,"TargetPurposeLimboResolution",Vl.ce))}}async function No(t,e,n){const r=te(t),s=[],i=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((l,u)=>{o.push(r.pu(u,e,n).then(d=>{var m;if((d||n)&&r.isPrimaryClient){const p=d?!d.fromCache:(m=n==null?void 0:n.targetChanges.get(u.targetId))==null?void 0:m.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(d){s.push(d);const p=Md.As(u.targetId,d);i.push(p)}}))}),await Promise.all(o),r.Pu.H_(s),await async function(u,d){const m=te(u);try{await m.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>L.forEach(d,g=>L.forEach(g.Es,w=>m.persistence.referenceDelegate.addReference(p,g.targetId,w)).next(()=>L.forEach(g.ds,w=>m.persistence.referenceDelegate.removeReference(p,g.targetId,w)))))}catch(p){if(!Ks(p))throw p;H(Od,"Failed to update sequence numbers: "+p)}for(const p of d){const g=p.targetId;if(!p.fromCache){const w=m.Ms.get(g),S=w.snapshotVersion,R=w.withLastLimboFreeSnapshotVersion(S);m.Ms=m.Ms.insert(g,R)}}}(r.localStore,i))}async function DI(t,e){const n=te(t);if(!n.currentUser.isEqual(e)){H(Wd,"User change. New user:",e.toKey());const r=await R_(n.localStore,e);n.currentUser=e,function(i,o){i.mu.forEach(l=>{l.forEach(u=>{u.reject(new $(V.CANCELLED,o))})}),i.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await No(n,r.Ls)}}function jI(t,e){const n=te(t),r=n.Au.get(e);if(r&&r.hu)return ae().add(r.key);{let s=ae();const i=n.Iu.get(e);if(!i)return s;for(const o of i){const l=n.Tu.get(o);s=s.unionWith(l.view.nu)}return s}}function Q_(t){const e=te(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=q_.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=jI.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=RI.bind(null,e),e.Pu.H_=yI.bind(null,e.eventManager),e.Pu.yu=vI.bind(null,e.eventManager),e}function VI(t){const e=te(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=NI.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=CI.bind(null,e),e}class fl{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=$l(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return Fb(this.persistence,new Lb,e.initialUser,this.serializer)}Cu(e){return new A_(Ld.mi,this.serializer)}Du(e){return new Wb}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}fl.provider={build:()=>new fl};class LI extends fl{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){fe(this.persistence.referenceDelegate instanceof hl,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new xb(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?wt.withCacheSize(this.cacheSizeBytes):wt.DEFAULT;return new A_(r=>hl.mi(r,n),this.serializer)}}class _h{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>wg(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=DI.bind(null,this.syncEngine),await mI(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new gI}()}createDatastore(e){const n=$l(e.databaseInfo.databaseId),r=function(i){return new Xb(i)}(e.databaseInfo);return function(i,o,l,u){return new tI(i,o,l,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,l){return new rI(r,s,i,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>wg(this.syncEngine,n,0),function(){return mg.v()?new mg:new Gb}())}createSyncEngine(e,n){return function(s,i,o,l,u,d,m){const p=new EI(s,i,o,l,u,d);return m&&(p.gu=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=te(s);H(qr,"RemoteStore shutting down."),i.Ea.add(5),await Ro(i),i.Aa.shutdown(),i.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}_h.provider={build:()=>new _h};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y_{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Sn("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dr="FirestoreClient";class MI{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=at.UNAUTHENTICATED,this.clientId=Td.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{H(dr,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(H(dr,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new rr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Hd(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function ec(t,e){t.asyncQueue.verifyOperationInProgress(),H(dr,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await R_(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Eg(t,e){t.asyncQueue.verifyOperationInProgress();const n=await OI(t);H(dr,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>gg(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>gg(e.remoteStore,s)),t._onlineComponents=e}async function OI(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){H(dr,"Using user provided OfflineComponentProvider");try{await ec(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===V.FAILED_PRECONDITION||s.code===V.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Ls("Error using user provided cache. Falling back to memory cache: "+n),await ec(t,new fl)}}else H(dr,"Using default OfflineComponentProvider"),await ec(t,new LI(void 0));return t._offlineComponents}async function X_(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(H(dr,"Using user provided OnlineComponentProvider"),await Eg(t,t._uninitializedComponentsProvider._online)):(H(dr,"Using default OnlineComponentProvider"),await Eg(t,new _h))),t._onlineComponents}function FI(t){return X_(t).then(e=>e.syncEngine)}async function wh(t){const e=await X_(t),n=e.eventManager;return n.onListen=TI.bind(null,e.syncEngine),n.onUnlisten=II.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=kI.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=SI.bind(null,e.syncEngine),n}function UI(t,e,n={}){const r=new rr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,u,d){const m=new Y_({next:g=>{m.Nu(),o.enqueueAndForget(()=>U_(i,p)),g.fromCache&&u.source==="server"?d.reject(new $(V.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(g)},error:g=>d.reject(g)}),p=new z_(l,m,{includeMetadataChanges:!0,qa:!0});return F_(i,p)}(await wh(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J_(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tg=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z_="firestore.googleapis.com",kg=!0;class bg{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new $(V.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Z_,this.ssl=kg}else this.host=e.host,this.ssl=e.ssl??kg;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=S_;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<_b)throw new $(V.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}nk("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=J_(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new $(V.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new $(V.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new $(V.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Wl{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new bg({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new $(V.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new $(V.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new bg(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new WT;switch(r.type){case"firstParty":return new YT(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new $(V.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Tg.get(n);r&&(H("ComponentProvider","Removing Datastore"),Tg.delete(n),r.terminate())}(this),Promise.resolve()}}function zI(t,e,n,r={}){var d;t=zt(t,Wl);const s=bo(e),i=t._getSettings(),o={...i,emulatorOptions:t._getEmulatorOptions()},l=`${e}:${n}`;s&&(vv(`https://${l}`),wv("Firestore",!0)),i.host!==Z_&&i.host!==l&&Ls("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...i,host:l,ssl:s,emulatorOptions:r};if(!rl(u,o)&&(t._setSettings(u),r.mockUserToken)){let m,p;if(typeof r.mockUserToken=="string")m=r.mockUserToken,p=at.MOCK_USER;else{m=_v(r.mockUserToken,(d=t._app)==null?void 0:d.options.projectId);const g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new $(V.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new at(g)}t._authCredentials=new GT(new Fv(m,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _r{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new _r(this.firestore,e,this._query)}}class Le{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new sr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Le(this.firestore,e,this._key)}toJSON(){return{type:Le._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Io(n,Le._jsonSchema))return new Le(e,r||null,new Y(_e.fromString(n.referencePath)))}}Le._jsonSchemaVersion="firestore/documentReference/1.0",Le._jsonSchema={type:ze("string",Le._jsonSchemaVersion),referencePath:ze("string")};class sr extends _r{constructor(e,n,r){super(e,n,Rd(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Le(this.firestore,null,new Y(e))}withConverter(e){return new sr(this.firestore,e,this._path)}}function Wr(t,e,...n){if(t=gt(t),Uv("collection","path",e),t instanceof Wl){const r=_e.fromString(e,...n);return Op(r),new sr(t,null,r)}{if(!(t instanceof Le||t instanceof sr))throw new $(V.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(_e.fromString(e,...n));return Op(r),new sr(t.firestore,null,r)}}function Qt(t,e,...n){if(t=gt(t),arguments.length===1&&(e=Td.newId()),Uv("doc","path",e),t instanceof Wl){const r=_e.fromString(e,...n);return Mp(r),new Le(t,null,new Y(r))}{if(!(t instanceof Le||t instanceof sr))throw new $(V.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(_e.fromString(e,...n));return Mp(r),new Le(t.firestore,t instanceof sr?t.converter:null,new Y(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ig="AsyncQueue";class Sg{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new C_(this,"async_queue_retry"),this._c=()=>{const r=Zu();r&&H(Ig,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=Zu();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Zu();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new rr;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Ks(e))throw e;H(Ig,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,Sn("INTERNAL UNHANDLED ERROR: ",Ag(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=$d.createAndSchedule(this,e,n,r,i=>this.hc(i));return this.tc.push(s),s}uc(){this.nc&&X(47125,{Pc:Ag(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function Ag(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rg(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class fr extends Wl{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new Sg,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Sg(e),this._firestoreClient=void 0,await e}}}function BI(t,e){const n=typeof t=="object"?t:Rv(),r=typeof t=="string"?t:ol,s=bv(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=gv("firestore");i&&zI(s,...i)}return s}function Kd(t){if(t._terminated)throw new $(V.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||$I(t),t._firestoreClient}function $I(t){var r,s,i;const e=t._freezeSettings(),n=function(l,u,d,m){return new fk(l,u,d,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,J_(m.experimentalLongPollingOptions),m.useFetchStreams,m.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(s=e.localCache)!=null&&s._offlineComponentProvider&&((i=e.localCache)!=null&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new MI(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ot(nt.fromBase64String(e))}catch(n){throw new $(V.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ot(nt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Ot._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Io(e,Ot._jsonSchema))return Ot.fromBase64String(e.bytes)}}Ot._jsonSchemaVersion="firestore/bytes/1.0",Ot._jsonSchema={type:ze("string",Ot._jsonSchemaVersion),bytes:ze("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gl{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new $(V.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ze(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kl{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new $(V.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new $(V.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return oe(this._lat,e._lat)||oe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:mn._jsonSchemaVersion}}static fromJSON(e){if(Io(e,mn._jsonSchema))return new mn(e.latitude,e.longitude)}}mn._jsonSchemaVersion="firestore/geoPoint/1.0",mn._jsonSchema={type:ze("string",mn._jsonSchemaVersion),latitude:ze("number"),longitude:ze("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:pn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Io(e,pn._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new pn(e.vectorValues);throw new $(V.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}pn._jsonSchemaVersion="firestore/vectorValue/1.0",pn._jsonSchema={type:ze("string",pn._jsonSchemaVersion),vectorValues:ze("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HI=/^__.*__$/;class qI{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new vr(e,this.data,this.fieldMask,n,this.fieldTransforms):new So(e,this.data,n,this.fieldTransforms)}}class ew{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new vr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function tw(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw X(40011,{Ac:t})}}class Qd{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Qd({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return ml(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(tw(this.Ac)&&HI.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class WI{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||$l(e)}Cc(e,n,r,s=!1){return new Qd({Ac:e,methodName:n,Dc:r,path:Ze.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ql(t){const e=t._freezeSettings(),n=$l(t._databaseId);return new WI(t._databaseId,!!e.ignoreUndefinedProperties,n)}function nw(t,e,n,r,s,i={}){const o=t.Cc(i.merge||i.mergeFields?2:0,e,n,s);Xd("Data must be an object, but it was:",o,r);const l=rw(r,o);let u,d;if(i.merge)u=new Nt(o.fieldMask),d=o.fieldTransforms;else if(i.mergeFields){const m=[];for(const p of i.mergeFields){const g=xh(e,p,n);if(!o.contains(g))throw new $(V.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);iw(m,g)||m.push(g)}u=new Nt(m),d=o.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,d=o.fieldTransforms;return new qI(new Et(l),u,d)}class Yl extends Kl{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Yl}}class Yd extends Kl{_toFieldTransform(e){return new Fk(e.path,new yo)}isEqual(e){return e instanceof Yd}}function GI(t,e,n,r){const s=t.Cc(1,e,n);Xd("Data must be an object, but it was:",s,r);const i=[],o=Et.empty();yr(r,(u,d)=>{const m=Jd(e,u,n);d=gt(d);const p=s.yc(m);if(d instanceof Yl)i.push(m);else{const g=Co(d,p);g!=null&&(i.push(m),o.set(m,g))}});const l=new Nt(i);return new ew(o,l,s.fieldTransforms)}function KI(t,e,n,r,s,i){const o=t.Cc(1,e,n),l=[xh(e,r,n)],u=[s];if(i.length%2!=0)throw new $(V.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<i.length;g+=2)l.push(xh(e,i[g])),u.push(i[g+1]);const d=[],m=Et.empty();for(let g=l.length-1;g>=0;--g)if(!iw(d,l[g])){const w=l[g];let S=u[g];S=gt(S);const R=o.yc(w);if(S instanceof Yl)d.push(w);else{const C=Co(S,R);C!=null&&(d.push(w),m.set(w,C))}}const p=new Nt(d);return new ew(m,p,o.fieldTransforms)}function QI(t,e,n,r=!1){return Co(n,t.Cc(r?4:3,e))}function Co(t,e){if(sw(t=gt(t)))return Xd("Unsupported field value:",e,t),rw(t,e);if(t instanceof Kl)return function(r,s){if(!tw(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const l of r){let u=Co(l,s.wc(o));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=gt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Lk(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Te.fromDate(r);return{timestampValue:cl(s.serializer,i)}}if(r instanceof Te){const i=new Te(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:cl(s.serializer,i)}}if(r instanceof mn)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ot)return{bytesValue:w_(s.serializer,r._byteString)};if(r instanceof Le){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:jd(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof pn)return function(o,l){return{mapValue:{fields:{[Qv]:{stringValue:Yv},[al]:{arrayValue:{values:o.toArray().map(d=>{if(typeof d!="number")throw l.Sc("VectorValues must only contain numeric values.");return Nd(l.serializer,d)})}}}}}}(r,s);throw s.Sc(`Unsupported field value: ${jl(r)}`)}(t,e)}function rw(t,e){const n={};return $v(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):yr(t,(r,s)=>{const i=Co(s,e.mc(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function sw(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Te||t instanceof mn||t instanceof Ot||t instanceof Le||t instanceof Kl||t instanceof pn)}function Xd(t,e,n){if(!sw(n)||!zv(n)){const r=jl(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function xh(t,e,n){if((e=gt(e))instanceof Gl)return e._internalPath;if(typeof e=="string")return Jd(t,e);throw ml("Field path arguments must be of type string or ",t,!1,void 0,n)}const YI=new RegExp("[~\\*/\\[\\]]");function Jd(t,e,n){if(e.search(YI)>=0)throw ml(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Gl(...e.split("."))._internalPath}catch{throw ml(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function ml(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(i||o)&&(u+=" (found",i&&(u+=` in field ${r}`),o&&(u+=` in document ${s}`),u+=")"),new $(V.INVALID_ARGUMENT,l+t+u)}function iw(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ow{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Le(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new XI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Zd("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class XI extends ow{data(){return super.data()}}function Zd(t,e){return typeof e=="string"?Jd(t,e):e instanceof Gl?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aw(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new $(V.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ef{}class lw extends ef{}function uw(t,e,...n){let r=[];e instanceof ef&&r.push(e),r=r.concat(n),function(i){const o=i.filter(u=>u instanceof nf).length,l=i.filter(u=>u instanceof tf).length;if(o>1||o>0&&l>0)throw new $(V.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class tf extends lw{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new tf(e,n,r)}_apply(e){const n=this._parse(e);return hw(e._query,n),new _r(e.firestore,e.converter,uh(e._query,n))}_parse(e){const n=Ql(e.firestore);return function(i,o,l,u,d,m,p){let g;if(d.isKeyField()){if(m==="array-contains"||m==="array-contains-any")throw new $(V.INVALID_ARGUMENT,`Invalid Query. You can't perform '${m}' queries on documentId().`);if(m==="in"||m==="not-in"){Cg(p,m);const S=[];for(const R of p)S.push(Ng(u,i,R));g={arrayValue:{values:S}}}else g=Ng(u,i,p)}else m!=="in"&&m!=="not-in"&&m!=="array-contains-any"||Cg(p,m),g=QI(l,o,p,m==="in"||m==="not-in");return Ue.create(d,m,g)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class nf extends ef{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new nf(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Zt.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const l=i.getFlattenedFilters();for(const u of l)hw(o,u),o=uh(o,u)}(e._query,n),new _r(e.firestore,e.converter,uh(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class rf extends lw{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new rf(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new $(V.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new $(V.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new go(i,o)}(e._query,this._field,this._direction);return new _r(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new Qs(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function cw(t,e="asc"){const n=e,r=Zd("orderBy",t);return rf._create(r,n)}function Ng(t,e,n){if(typeof(n=gt(n))=="string"){if(n==="")throw new $(V.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!s_(e)&&n.indexOf("/")!==-1)throw new $(V.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(_e.fromString(n));if(!Y.isDocumentKey(r))throw new $(V.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Wp(t,new Y(r))}if(n instanceof Le)return Wp(t,n._key);throw new $(V.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${jl(n)}.`)}function Cg(t,e){if(!Array.isArray(t)||t.length===0)throw new $(V.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function hw(t,e){const n=function(s,i){for(const o of s)for(const l of o.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new $(V.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new $(V.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class JI{convertValue(e,n="none"){switch(cr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return je(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ur(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw X(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return yr(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var r,s,i;const n=(i=(s=(r=e.fields)==null?void 0:r[al].arrayValue)==null?void 0:s.values)==null?void 0:i.map(o=>je(o.doubleValue));return new pn(n)}convertGeoPoint(e){return new mn(je(e.latitude),je(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Ml(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(fo(e));default:return null}}convertTimestamp(e){const n=lr(e);return new Te(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=_e.fromString(e);fe(I_(r),9688,{name:e});const s=new mo(r.get(1),r.get(3)),i=new Y(r.popFirst(5));return s.isEqual(n)||Sn(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dw(t,e,n){let r;return r=t?t.toFirestore(e):e,r}class Ri{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Vr extends ow{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Ca(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Zd("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new $(V.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Vr._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Vr._jsonSchemaVersion="firestore/documentSnapshot/1.0",Vr._jsonSchema={type:ze("string",Vr._jsonSchemaVersion),bundleSource:ze("string","DocumentSnapshot"),bundleName:ze("string"),bundle:ze("string")};class Ca extends Vr{data(e={}){return super.data(e)}}class Lr{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Ri(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Ca(this._firestore,this._userDataWriter,r.key,r,new Ri(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new $(V.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(l=>{const u=new Ca(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Ri(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const u=new Ca(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Ri(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let d=-1,m=-1;return l.type!==0&&(d=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),m=o.indexOf(l.doc.key)),{type:ZI(l.type),doc:u,oldIndex:d,newIndex:m}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new $(V.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Lr._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Td.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function ZI(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return X(61501,{type:t})}}Lr._jsonSchemaVersion="firestore/querySnapshot/1.0",Lr._jsonSchema={type:ze("string",Lr._jsonSchemaVersion),bundleSource:ze("string","QuerySnapshot"),bundleName:ze("string"),bundle:ze("string")};class sf extends JI{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ot(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Le(this.firestore,null,n)}}function fw(t){t=zt(t,_r);const e=zt(t.firestore,fr),n=Kd(e),r=new sf(e);return aw(t._query),UI(n,t._query).then(s=>new Lr(e,r,t,s))}function Pg(t,e,n){t=zt(t,Le);const r=zt(t.firestore,fr),s=dw(t.converter,e);return Jl(r,[nw(Ql(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Bt.none())])}function mw(t,e,n,...r){t=zt(t,Le);const s=zt(t.firestore,fr),i=Ql(s);let o;return o=typeof(e=gt(e))=="string"||e instanceof Gl?KI(i,"updateDoc",t._key,e,n,r):GI(i,"updateDoc",t._key,e),Jl(s,[o.toMutation(t._key,Bt.exists(!0))])}function Mr(t){return Jl(zt(t.firestore,fr),[new Cd(t._key,Bt.none())])}function Xl(t,e){const n=zt(t.firestore,fr),r=Qt(t),s=dw(t.converter,e);return Jl(n,[nw(Ql(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,Bt.exists(!1))]).then(()=>r)}function of(t,...e){var u,d,m;t=gt(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||Rg(e[r])||(n=e[r++]);const s={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(Rg(e[r])){const p=e[r];e[r]=(u=p.next)==null?void 0:u.bind(p),e[r+1]=(d=p.error)==null?void 0:d.bind(p),e[r+2]=(m=p.complete)==null?void 0:m.bind(p)}let i,o,l;if(t instanceof Le)o=zt(t.firestore,fr),l=Rd(t._key.path),i={next:p=>{e[r]&&e[r](eS(o,t,p))},error:e[r+1],complete:e[r+2]};else{const p=zt(t,_r);o=zt(p.firestore,fr),l=p._query;const g=new sf(o);i={next:w=>{e[r]&&e[r](new Lr(o,g,p,w))},error:e[r+1],complete:e[r+2]},aw(t._query)}return function(g,w,S,R){const C=new Y_(R),T=new z_(w,C,S);return g.asyncQueue.enqueueAndForget(async()=>F_(await wh(g),T)),()=>{C.Nu(),g.asyncQueue.enqueueAndForget(async()=>U_(await wh(g),T))}}(Kd(o),l,s,i)}function Jl(t,e){return function(r,s){const i=new rr;return r.asyncQueue.enqueueAndForget(async()=>AI(await FI(r),s,i)),i.promise}(Kd(t),e)}function eS(t,e,n){const r=n.docs.get(e._key),s=new sf(t);return new Vr(t,s,e._key,r,new Ri(n.hasPendingWrites,n.fromCache),e.converter)}function Bs(){return new Yd("serverTimestamp")}(function(e,n=!0){(function(s){Ws=s})(Sv),uo(new Vs("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),l=new fr(new KT(r.getProvider("auth-internal")),new XT(o,r.getProvider("app-check-internal")),function(d,m){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new $(V.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new mo(d.options.projectId,m)}(o,s),o);return i={useFetchStreams:n,...i},l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),tr(Dp,jp,e),tr(Dp,jp,"esm2020")})();var tS="firebase",nS="12.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */tr(tS,nS,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pw="firebasestorage.googleapis.com",gw="storageBucket",rS=2*60*1e3,sS=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class De extends Yr{constructor(e,n,r=0){super(tc(e),`Firebase Storage: ${n} (${tc(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,De.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return tc(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Pe;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Pe||(Pe={}));function tc(t){return"storage/"+t}function af(){const t="An unknown error occurred, please check the error payload for server response.";return new De(Pe.UNKNOWN,t)}function iS(t){return new De(Pe.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function oS(t){return new De(Pe.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function aS(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new De(Pe.UNAUTHENTICATED,t)}function lS(){return new De(Pe.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function uS(t){return new De(Pe.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function cS(){return new De(Pe.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function hS(){return new De(Pe.CANCELED,"User canceled the upload/download.")}function dS(t){return new De(Pe.INVALID_URL,"Invalid URL '"+t+"'.")}function fS(t){return new De(Pe.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function mS(){return new De(Pe.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+gw+"' property when initializing the app?")}function pS(){return new De(Pe.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function gS(){return new De(Pe.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function yS(t){return new De(Pe.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Eh(t){return new De(Pe.INVALID_ARGUMENT,t)}function yw(){return new De(Pe.APP_DELETED,"The Firebase app was deleted.")}function vS(t){return new De(Pe.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Hi(t,e){return new De(Pe.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function xi(t){throw new De(Pe.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Ct.makeFromUrl(e,n)}catch{return new Ct(e,"")}if(r.path==="")return r;throw fS(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(D){D.path.charAt(D.path.length-1)==="/"&&(D.path_=D.path_.slice(0,-1))}const o="(/(.*))?$",l=new RegExp("^gs://"+s+o,"i"),u={bucket:1,path:3};function d(D){D.path_=decodeURIComponent(D.path)}const m="v[A-Za-z0-9_]+",p=n.replace(/[.]/g,"\\."),g="(/([^?#]*).*)?$",w=new RegExp(`^https?://${p}/${m}/b/${s}/o${g}`,"i"),S={bucket:1,path:3},R=n===pw?"(?:storage.googleapis.com|storage.cloud.google.com)":n,C="([^?#]*)",T=new RegExp(`^https?://${R}/${s}/${C}`,"i"),b=[{regex:l,indices:u,postModify:i},{regex:w,indices:S,postModify:d},{regex:T,indices:{bucket:1,path:2},postModify:d}];for(let D=0;D<b.length;D++){const M=b[D],O=M.regex.exec(e);if(O){const E=O[M.indices.bucket];let _=O[M.indices.path];_||(_=""),r=new Ct(E,_),M.postModify(r);break}}if(r==null)throw dS(e);return r}}class _S{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wS(t,e,n){let r=1,s=null,i=null,o=!1,l=0;function u(){return l===2}let d=!1;function m(...C){d||(d=!0,e.apply(null,C))}function p(C){s=setTimeout(()=>{s=null,t(w,u())},C)}function g(){i&&clearTimeout(i)}function w(C,...T){if(d){g();return}if(C){g(),m.call(null,C,...T);return}if(u()||o){g(),m.call(null,C,...T);return}r<64&&(r*=2);let b;l===1?(l=2,b=0):b=(r+Math.random())*1e3,p(b)}let S=!1;function R(C){S||(S=!0,g(),!d&&(s!==null?(C||(l=2),clearTimeout(s),p(0)):C||(l=1)))}return p(0),i=setTimeout(()=>{o=!0,R(!0)},n),R}function xS(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ES(t){return t!==void 0}function TS(t){return typeof t=="object"&&!Array.isArray(t)}function lf(t){return typeof t=="string"||t instanceof String}function Dg(t){return uf()&&t instanceof Blob}function uf(){return typeof Blob<"u"}function jg(t,e,n,r){if(r<e)throw Eh(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Eh(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zl(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function vw(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var Or;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Or||(Or={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kS(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bS{constructor(e,n,r,s,i,o,l,u,d,m,p,g=!0,w=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=l,this.errorCallback_=u,this.timeout_=d,this.progressCallback_=m,this.connectionFactory_=p,this.retry=g,this.isUsingEmulator=w,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((S,R)=>{this.resolve_=S,this.reject_=R,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new da(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=l=>{const u=l.loaded,d=l.lengthComputable?l.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,d)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const l=i.getErrorCode()===Or.NO_ERROR,u=i.getStatus();if(!l||kS(u,this.additionalRetryCodes_)&&this.retry){const m=i.getErrorCode()===Or.ABORT;r(!1,new da(!1,null,m));return}const d=this.successCodes_.indexOf(u)!==-1;r(!0,new da(d,i))})},n=(r,s)=>{const i=this.resolve_,o=this.reject_,l=s.connection;if(s.wasSuccessCode)try{const u=this.callback_(l,l.getResponse());ES(u)?i(u):i()}catch(u){o(u)}else if(l!==null){const u=af();u.serverResponse=l.getErrorText(),this.errorCallback_?o(this.errorCallback_(l,u)):o(u)}else if(s.canceled){const u=this.appDelete_?yw():hS();o(u)}else{const u=cS();o(u)}};this.canceled_?n(!1,new da(!1,null,!0)):this.backoffId_=wS(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&xS(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class da{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function IS(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function SS(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function AS(t,e){e&&(t["X-Firebase-GMPID"]=e)}function RS(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function NS(t,e,n,r,s,i,o=!0,l=!1){const u=vw(t.urlParams),d=t.url+u,m=Object.assign({},t.headers);return AS(m,e),IS(m,n),SS(m,i),RS(m,r),new bS(d,t.method,m,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o,l)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CS(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function PS(...t){const e=CS();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(uf())return new Blob(t);throw new De(Pe.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function DS(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jS(t){if(typeof atob>"u")throw yS("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ln={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class nc{constructor(e,n){this.data=e,this.contentType=n||null}}function VS(t,e){switch(t){case ln.RAW:return new nc(_w(e));case ln.BASE64:case ln.BASE64URL:return new nc(ww(t,e));case ln.DATA_URL:return new nc(MS(e),OS(e))}throw af()}function _w(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const i=r,o=t.charCodeAt(++n);r=65536|(i&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function LS(t){let e;try{e=decodeURIComponent(t)}catch{throw Hi(ln.DATA_URL,"Malformed data URL.")}return _w(e)}function ww(t,e){switch(t){case ln.BASE64:{const s=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(s||i)throw Hi(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case ln.BASE64URL:{const s=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(s||i)throw Hi(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=jS(e)}catch(s){throw s.message.includes("polyfill")?s:Hi(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class xw{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Hi(ln.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=FS(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function MS(t){const e=new xw(t);return e.base64?ww(ln.BASE64,e.rest):LS(e.rest)}function OS(t){return new xw(t).contentType}function FS(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zn{constructor(e,n){let r=0,s="";Dg(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(Dg(this.data_)){const r=this.data_,s=DS(r,e,n);return s===null?null:new zn(s)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new zn(r,!0)}}static getBlob(...e){if(uf()){const n=e.map(r=>r instanceof zn?r.data_:r);return new zn(PS.apply(null,n))}else{const n=e.map(o=>lf(o)?VS(ln.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const s=new Uint8Array(r);let i=0;return n.forEach(o=>{for(let l=0;l<o.length;l++)s[i++]=o[l]}),new zn(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ew(t){let e;try{e=JSON.parse(t)}catch{return null}return TS(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function US(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function zS(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function Tw(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BS(t,e){return e}class ft{constructor(e,n,r,s){this.server=e,this.local=n||e,this.writable=!!r,this.xform=s||BS}}let fa=null;function $S(t){return!lf(t)||t.length<2?t:Tw(t)}function kw(){if(fa)return fa;const t=[];t.push(new ft("bucket")),t.push(new ft("generation")),t.push(new ft("metageneration")),t.push(new ft("name","fullPath",!0));function e(i,o){return $S(o)}const n=new ft("name");n.xform=e,t.push(n);function r(i,o){return o!==void 0?Number(o):o}const s=new ft("size");return s.xform=r,t.push(s),t.push(new ft("timeCreated")),t.push(new ft("updated")),t.push(new ft("md5Hash",null,!0)),t.push(new ft("cacheControl",null,!0)),t.push(new ft("contentDisposition",null,!0)),t.push(new ft("contentEncoding",null,!0)),t.push(new ft("contentLanguage",null,!0)),t.push(new ft("contentType",null,!0)),t.push(new ft("metadata","customMetadata",!0)),fa=t,fa}function HS(t,e){function n(){const r=t.bucket,s=t.fullPath,i=new Ct(r,s);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:n})}function qS(t,e,n){const r={};r.type="file";const s=n.length;for(let i=0;i<s;i++){const o=n[i];r[o.local]=o.xform(r,e[o.server])}return HS(r,t),r}function bw(t,e,n){const r=Ew(e);return r===null?null:qS(t,r,n)}function WS(t,e,n,r){const s=Ew(e);if(s===null||!lf(s.downloadTokens))return null;const i=s.downloadTokens;if(i.length===0)return null;const o=encodeURIComponent;return i.split(",").map(d=>{const m=t.bucket,p=t.fullPath,g="/b/"+o(m)+"/o/"+o(p),w=Zl(g,n,r),S=vw({alt:"media",token:d});return w+S})[0]}function GS(t,e){const n={},r=e.length;for(let s=0;s<r;s++){const i=e[s];i.writable&&(n[i.server]=t[i.local])}return JSON.stringify(n)}class cf{constructor(e,n,r,s){this.url=e,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iw(t){if(!t)throw af()}function KS(t,e){function n(r,s){const i=bw(t,s,e);return Iw(i!==null),i}return n}function QS(t,e){function n(r,s){const i=bw(t,s,e);return Iw(i!==null),WS(i,s,t.host,t._protocol)}return n}function Sw(t){function e(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=lS():s=aS():n.getStatus()===402?s=oS(t.bucket):n.getStatus()===403?s=uS(t.path):s=r,s.status=n.getStatus(),s.serverResponse=r.serverResponse,s}return e}function Aw(t){const e=Sw(t);function n(r,s){let i=e(r,s);return r.getStatus()===404&&(i=iS(t.path)),i.serverResponse=s.serverResponse,i}return n}function YS(t,e,n){const r=e.fullServerUrl(),s=Zl(r,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,l=new cf(s,i,QS(t,n),o);return l.errorHandler=Aw(e),l}function XS(t,e){const n=e.fullServerUrl(),r=Zl(n,t.host,t._protocol),s="DELETE",i=t.maxOperationRetryTime;function o(u,d){}const l=new cf(r,s,o,i);return l.successCodes=[200,204],l.errorHandler=Aw(e),l}function JS(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function ZS(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=JS(null,e)),r}function eA(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function l(){let b="";for(let D=0;D<2;D++)b=b+Math.random().toString().slice(2);return b}const u=l();o["Content-Type"]="multipart/related; boundary="+u;const d=ZS(e,r,s),m=GS(d,n),p="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+m+`\r
--`+u+`\r
Content-Type: `+d.contentType+`\r
\r
`,g=`\r
--`+u+"--",w=zn.getBlob(p,r,g);if(w===null)throw pS();const S={name:d.fullPath},R=Zl(i,t.host,t._protocol),C="POST",T=t.maxUploadRetryTime,y=new cf(R,C,KS(t,n),T);return y.urlParams=S,y.headers=o,y.body=w.uploadData(),y.errorHandler=Sw(e),y}class tA{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Or.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Or.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Or.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,s,i){if(this.sent_)throw xi("cannot .send() more than once");if(bo(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const o in i)i.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,i[o].toString());return s!==void 0?this.xhr_.send(s):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw xi("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw xi("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw xi("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw xi("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class nA extends tA{initXhr(){this.xhr_.responseType="text"}}function hf(){return new nA}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gr{constructor(e,n){this._service=e,n instanceof Ct?this._location=n:this._location=Ct.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Gr(e,n)}get root(){const e=new Ct(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Tw(this._location.path)}get storage(){return this._service}get parent(){const e=US(this._location.path);if(e===null)return null;const n=new Ct(this._location.bucket,e);return new Gr(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw vS(e)}}function rA(t,e,n){t._throwIfRoot("uploadBytes");const r=eA(t.storage,t._location,kw(),new zn(e,!0),n);return t.storage.makeRequestWithTokens(r,hf).then(s=>({metadata:s,ref:t}))}function sA(t){t._throwIfRoot("getDownloadURL");const e=YS(t.storage,t._location,kw());return t.storage.makeRequestWithTokens(e,hf).then(n=>{if(n===null)throw gS();return n})}function iA(t){t._throwIfRoot("deleteObject");const e=XS(t.storage,t._location);return t.storage.makeRequestWithTokens(e,hf)}function oA(t,e){const n=zS(t._location.path,e),r=new Ct(t._location.bucket,n);return new Gr(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aA(t){return/^[A-Za-z]+:\/\//.test(t)}function lA(t,e){return new Gr(t,e)}function Rw(t,e){if(t instanceof df){const n=t;if(n._bucket==null)throw mS();const r=new Gr(n,n._bucket);return e!=null?Rw(r,e):r}else return e!==void 0?oA(t,e):t}function uA(t,e){if(e&&aA(e)){if(t instanceof df)return lA(t,e);throw Eh("To use ref(service, url), the first argument must be a Storage instance.")}else return Rw(t,e)}function Vg(t,e){const n=e==null?void 0:e[gw];return n==null?null:Ct.makeFromBucketSpec(n,t)}function cA(t,e,n,r={}){t.host=`${e}:${n}`;const s=bo(e);s&&(vv(`https://${t.host}/b`),wv("Storage",!0)),t._isUsingEmulator=!0,t._protocol=s?"https":"http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:_v(i,t.app.options.projectId))}class df{constructor(e,n,r,s,i,o=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._isUsingEmulator=o,this._bucket=null,this._host=pw,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=rS,this._maxUploadRetryTime=sS,this._requests=new Set,s!=null?this._bucket=Ct.makeFromBucketSpec(s,this._host):this._bucket=Vg(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Ct.makeFromBucketSpec(this._url,e):this._bucket=Vg(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){jg("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){jg("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(Iv(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Gr(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new _S(yw());{const o=NS(e,this._appId,r,s,n,this._firebaseVersion,i,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const Lg="@firebase/storage",Mg="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nw="storage";function hA(t,e,n){return t=gt(t),rA(t,e,n)}function dA(t){return t=gt(t),sA(t)}function fA(t){return t=gt(t),iA(t)}function Cw(t,e){return t=gt(t),uA(t,e)}function mA(t=Rv(),e){t=gt(t);const r=bv(t,Nw).getImmediate({identifier:e}),s=gv("storage");return s&&pA(r,...s),r}function pA(t,e,n,r={}){cA(t,e,n,r)}function gA(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new df(n,r,s,e,Sv)}function yA(){uo(new Vs(Nw,gA,"PUBLIC").setMultipleInstances(!0)),tr(Lg,Mg,""),tr(Lg,Mg,"esm2020")}yA();const vA={apiKey:"AIzaSyBQwo6qEZWlOyXRv3iPycYiLIqRt3PalkE",authDomain:"foodflash-46a42.firebaseapp.com",projectId:"foodflash-46a42",storageBucket:"foodflash-46a42.firebasestorage.app",messagingSenderId:"497618057237",appId:"1:497618057237:web:3025f9c950cdf76b67361c"},Pw=Av(vA),Je=BI(Pw),Dw=mA(Pw),ff=()=>{const[t,e]=B.useState([]),[n,r]=B.useState(!0),[s,i]=B.useState(null);return B.useEffect(()=>{const d=Wr(Je,"recipes"),m=uw(d,cw("createdAt","desc")),p=of(m,g=>{const w=[];g.forEach(S=>{var C,T,y;const R=S.data();w.push({id:S.id,...R,ingredients:R.ingredients||[],comments:R.comments||[],createdAt:((y=(T=(C=R.createdAt)==null?void 0:C.toDate)==null?void 0:T.call(C))==null?void 0:y.toISOString())||new Date().toISOString()})}),e(w),r(!1),i(null)},g=>{console.error("Error fetching recipes:",g),i("Fehler beim Laden der Rezepte"),r(!1)});return()=>p()},[]),{recipes:t,isLoading:n,error:s,addRecipe:async d=>{try{const m=Wr(Je,"recipes"),p={...d,createdAt:Bs(),ingredients:d.ingredients||[],comments:d.comments||[]};Object.keys(p).forEach(g=>{p[g]===void 0&&delete p[g]}),await Xl(m,p)}catch(m){throw console.error("Error adding recipe:",m),i("Fehler beim Hinzufgen des Rezepts"),m}},updateRecipe:async(d,m)=>{try{const p=Qt(Je,"recipes",d),g={...m};Object.keys(g).forEach(w=>{g[w]===void 0&&delete g[w]}),await mw(p,g)}catch(p){throw console.error("Error updating recipe:",p),i("Fehler beim Aktualisieren des Rezepts"),p}},deleteRecipe:async d=>{try{const m=Qt(Je,"recipes",d);await Mr(m)}catch(m){throw console.error("Error deleting recipe:",m),i("Fehler beim Lschen des Rezepts"),m}}}},jw=t=>{if(!t||t.trim()==="")return"own";const e=t.toLowerCase();return e.includes("youtube.com")||e.includes("youtu.be")?"youtube":e.includes("instagram.com")?"instagram":e.includes("facebook.com")||e.includes("fb.com")?"facebook":e.includes("tiktok.com")?"tiktok":"other"},Vw=t=>{if(!t)return null;try{const e=t.toLowerCase();let n=null;if(e.includes("youtube.com/watch"))n=new URL(t).searchParams.get("v");else if(e.includes("youtu.be/")){const r=t.match(/youtu\.be\/([^?&]+)/);n=r?r[1]:null}else if(e.includes("youtube.com/embed/")){const r=t.match(/youtube\.com\/embed\/([^?&]+)/);n=r?r[1]:null}return n?`https://img.youtube.com/vi/${n}/maxresdefault.jpg`:null}catch(e){return console.error("Error extracting YouTube thumbnail:",e),null}},Lw=t=>{if(!t)return!1;const e=t.toLowerCase();return e.includes("youtube.com")||e.includes("youtu.be")},pl=t=>{if(!t||!t.includes("drive.google.com"))return t;try{let e=null;const r=t.split("?")[0].match(/\/file\/d\/([^/]+)/);if(r&&(e=r[1]),!e){const s=t.match(/[?&]id=([^&]+)/);s&&(e=s[1])}if(!e){const s=t.match(/[?&]id=([^&]+)/);s&&(e=s[1])}return e?`https://drive.google.com/thumbnail?id=${e}&sz=w1000`:(t.includes("uc?export=view")||t.includes("thumbnail?id="),t)}catch(e){return console.error("Error converting Google Drive URL:",e),t}},gl=t=>!!(t&&t.includes("drive.google.com")),_A=(t,e=800,n=600,r=.85)=>new Promise((s,i)=>{const o=new FileReader;o.onload=l=>{var d;const u=new Image;u.onload=()=>{const m=document.createElement("canvas"),p=m.getContext("2d");if(!p){i(new Error("Canvas context nicht verfgbar"));return}let{width:g,height:w}=u;g>e&&(w=w*e/g,g=e),w>n&&(g=g*n/w,w=n),m.width=g,m.height=w,p.drawImage(u,0,0,g,w),m.toBlob(S=>{S?s(S):i(new Error("Fehler beim Komprimieren"))},"image/jpeg",r)},u.onerror=()=>{i(new Error("Fehler beim Laden des Bildes"))},u.src=(d=l.target)==null?void 0:d.result},o.onerror=()=>{i(new Error("Fehler beim Lesen der Datei"))},o.readAsDataURL(t)}),Mw=(t,e=10)=>{if(!["image/jpeg","image/jpg","image/png","image/webp"].includes(t.type))return"Nur JPEG, PNG und WebP Bilder sind erlaubt!";const r=e*1024*1024;return t.size>r?`Datei zu gro! Maximum: ${e} MB`:!0},Ow=async(t,e)=>{try{const n=await _A(t),r=Date.now(),i=`recipe-${e}-${r}.jpg`,o=Cw(Dw,`recipe-images/${i}`);return await hA(o,n),await dA(o)}catch(n){throw console.error("Fehler beim Upload:",n),new Error("Bild konnte nicht hochgeladen werden")}},Og=async t=>{try{const e=t.split("/o/");if(e.length<2){console.warn("Ungltige Storage-URL, kann nicht gelscht werden");return}const n=e[1].split("?")[0],r=decodeURIComponent(n),s=Cw(Dw,r);await fA(s)}catch(e){console.error("Fehler beim Lschen:",e)}},Fg=t=>t.includes("firebasestorage.googleapis.com")||t.includes("firebasestorage.app"),Fw=({ingredients:t,onChange:e})=>{const[n,r]=B.useState(""),[s,i]=B.useState(""),o=p=>{r(p.target.value)},l=p=>{i(p.target.value)},u=()=>{if(!n.trim())return;const p={name:n.trim(),quantity:s.trim()||void 0};e([...t,p]),r(""),i("")},d=p=>{e(t.filter((g,w)=>w!==p))},m=p=>{p.key==="Enter"&&(p.preventDefault(),u())};return c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-200 mb-2",children:"Zutaten (optional)"}),t.length>0&&c.jsx("div",{className:"space-y-1 mb-3 max-h-32 overflow-y-auto",children:t.map((p,g)=>c.jsxs("div",{className:"flex items-center gap-2 bg-slate-700 rounded-lg px-3 py-2 group",children:[c.jsxs("span",{className:"flex-1 text-sm text-gray-100",children:[p.name,p.quantity&&c.jsxs("span",{className:"text-gray-400 ml-2",children:["(",p.quantity,")"]})]}),c.jsx("button",{type:"button",onClick:()=>d(g),"data-test-id":`remove-ingredient-${g}`,"aria-label":"Zutat entfernen",className:"opacity-0 group-hover:opacity-100 transition-opacity text-red-500 hover:text-red-600",children:c.jsx(hn,{className:"h-4 w-4"})})]},g))}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("input",{type:"text",value:n,onChange:o,onKeyPress:m,placeholder:"Zutat, z.B. Tomaten",className:"flex-1 px-3 py-2 text-sm border-2 border-gray-600 rounded-lg focus:border-primary-500 focus:outline-none transition-colors bg-slate-700 text-gray-100 placeholder-gray-400"}),c.jsx("input",{type:"text",value:s,onChange:l,onKeyPress:m,placeholder:"Menge",className:"w-24 px-3 py-2 text-sm border-2 border-gray-600 rounded-lg focus:border-primary-500 focus:outline-none transition-colors bg-slate-700 text-gray-100 placeholder-gray-400"}),c.jsx("button",{type:"button",onClick:u,"data-test-id":"add-ingredient","aria-label":"Zutat hinzufgen",disabled:!n.trim(),className:ve("px-3 py-2 rounded-lg transition-all duration-200",n.trim()?"bg-accent-500 text-white hover:bg-accent-600":"bg-slate-600 text-gray-500 cursor-not-allowed"),children:c.jsx(lo,{className:"h-4 w-4"})})]}),c.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Enter drcken oder Plus-Button zum Hinzufgen"})]})},wA=({onAdd:t})=>{const[e,n]=B.useState(!1),[r,s]=B.useState(""),[i,o]=B.useState(""),[l,u]=B.useState(""),[d,m]=B.useState(""),[p,g]=B.useState([]),[w,S]=B.useState(!1),[R,C]=B.useState(null),[T,y]=B.useState(null),[b,D]=B.useState(!1),M=async q=>{if(q.preventDefault(),!r.trim()){alert("Bitte Titel eingeben!");return}D(!0);try{const K=jw(i);let J;if(R){const W=crypto.randomUUID();J=await Ow(R,W)}t({title:r.trim(),url:i.trim()||"",description:l.trim(),imageUrl:d.trim()||void 0,uploadedImageUrl:J,ingredients:p,platform:K}),s(""),o(""),u(""),m(""),g([]),C(null),y(null),n(!1)}catch(K){console.error("Fehler beim Speichern:",K),alert("Fehler beim Hochladen des Bildes!")}finally{D(!1)}},O=q=>{s(q.target.value)},E=q=>{o(q.target.value)},_=q=>{u(q.target.value)},k=q=>{const K=q.target.value;m(K)};B.useEffect(()=>{if(d&&gl(d)){const q=pl(d);q!==d&&m(q)}},[d]);const I=()=>{const q=Vw(i);q&&m(q)},A=()=>{n(!e)},N=()=>{S(!w)},x=q=>{var re;const K=(re=q.target.files)==null?void 0:re[0];if(!K)return;const J=Mw(K);if(J!==!0){alert(J);return}C(K);const W=new FileReader;W.onloadend=()=>{y(W.result)},W.readAsDataURL(K)},Z=()=>{C(null),y(null)},me=Lw(i),se=i.toLowerCase(),pe=se.includes("instagram.com"),U=se.includes("facebook.com")||se.includes("fb.com"),Q=se.includes("tiktok.com");return e?c.jsxs("div",{className:"bg-slate-800/80 backdrop-blur-sm rounded-2xl p-6 shadow-xl border-2 border-primary-500/30 autumn-glow",children:[c.jsxs("div",{className:"flex items-center justify-between mb-6",children:[c.jsxs("h3",{className:"text-2xl font-bold text-gray-100 flex items-center gap-2",children:[c.jsx(lo,{className:"h-6 w-6 text-primary-500"}),"Neues Rezept"]}),c.jsx("button",{onClick:A,"data-test-id":"close-add-recipe","aria-label":"Formular schlieen",className:"p-2 hover:bg-slate-700 rounded-full transition-colors",children:c.jsx(hn,{className:"h-6 w-6 text-gray-300"})})]}),c.jsxs("form",{onSubmit:M,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"recipe-title",className:"block text-sm font-medium text-gray-200 mb-1",children:"Rezept-Titel *"}),c.jsx("input",{id:"recipe-title",type:"text",value:r,onChange:O,"data-test-id":"recipe-title-input","aria-label":"Rezept-Titel eingeben",placeholder:"z.B. Spaghetti Carbonara",className:"w-full px-4 py-2 border-2 border-gray-600 rounded-lg focus:border-primary-500 focus:outline-none transition-colors bg-slate-700 text-gray-100 placeholder-gray-400",required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"recipe-url",className:"block text-sm font-medium text-gray-200 mb-1",children:"Link zum Rezept (optional)"}),c.jsx("input",{id:"recipe-url",type:"url",value:i,onChange:E,"data-test-id":"recipe-url-input","aria-label":"Rezept-URL eingeben",placeholder:"https://www.youtube.com/watch?v=... (oder leer fr eigenes Rezept)",className:"w-full px-4 py-2 border-2 border-gray-600 rounded-lg focus:border-primary-500 focus:outline-none transition-colors bg-slate-700 text-gray-100 placeholder-gray-400"}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"YouTube, Instagram, Facebook, TikTok Link - oder leer lassen fr eigene Rezepte"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"recipe-description",className:"block text-sm font-medium text-gray-200 mb-1",children:"Beschreibung (optional)"}),c.jsx("textarea",{id:"recipe-description",value:l,onChange:_,"data-test-id":"recipe-description-input","aria-label":"Rezept-Beschreibung eingeben",placeholder:"Was macht dieses Rezept besonders?",rows:3,className:"w-full px-4 py-2 border-2 border-gray-600 rounded-lg focus:border-primary-500 focus:outline-none transition-colors resize-none bg-slate-700 text-gray-100 placeholder-gray-400"})]}),c.jsx(Fw,{ingredients:p,onChange:g}),c.jsxs("div",{className:"border-2 border-dashed border-primary-500/30 rounded-xl p-4 bg-slate-700/30",children:[c.jsxs("div",{className:"flex items-center justify-between mb-3",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-200",children:" Eigenes Foto hochladen (optional)"}),c.jsx("span",{className:"text-xs text-gray-400",children:"Max. 10 MB"})]}),T?c.jsxs("div",{className:"relative",children:[c.jsx("img",{src:T,alt:"Vorschau",className:"w-full h-48 object-cover rounded-lg"}),c.jsx("button",{type:"button",onClick:Z,"data-test-id":"remove-uploaded-image","aria-label":"Hochgeladenes Bild entfernen",className:"absolute top-2 right-2 p-2 bg-red-600 hover:bg-red-700 text-white rounded-full shadow-lg transition-colors",children:c.jsx(js,{className:"h-4 w-4"})}),c.jsx("div",{className:"absolute bottom-2 left-2 bg-green-600 text-white text-xs px-2 py-1 rounded-full font-medium",children:" Bereit zum Upload"})]}):c.jsxs("div",{children:[c.jsx("input",{id:"recipe-image-upload",type:"file",accept:"image/jpeg,image/jpg,image/png,image/webp",onChange:x,"data-test-id":"recipe-image-upload","aria-label":"Bild hochladen",className:"hidden"}),c.jsxs("label",{htmlFor:"recipe-image-upload",className:"flex flex-col items-center justify-center p-6 border-2 border-dashed border-gray-600 rounded-lg cursor-pointer hover:border-primary-500 hover:bg-slate-600/30 transition-all",children:[c.jsx(_d,{className:"h-8 w-8 text-gray-400 mb-2"}),c.jsx("span",{className:"text-sm font-medium text-gray-300 mb-1",children:"Klicke hier oder ziehe ein Bild rein"}),c.jsx("span",{className:"text-xs text-gray-500",children:"JPEG, PNG oder WebP  Wird automatisch komprimiert"})]})]}),c.jsxs("p",{className:"text-xs text-gray-400 mt-2 text-center",children:[" ",c.jsx("strong",{children:"Hybrid-Lsung:"})," Du kannst sowohl ein eigenes Foto hochladen als auch eine YouTube-URL unten angeben!"]})]}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center justify-between mb-1",children:[c.jsx("label",{htmlFor:"recipe-image",className:"block text-sm font-medium text-gray-200",children:"Bild-URL (optional)"}),c.jsxs("div",{className:"flex items-center gap-2",children:[me&&c.jsxs("button",{type:"button",onClick:I,"data-test-id":"auto-fill-image","aria-label":"Bild automatisch aus YouTube laden",className:"flex items-center gap-1 text-xs font-medium text-primary-500 hover:text-primary-600 transition-colors",children:[c.jsx(vd,{className:"h-3 w-3"}),"Auto-Fill"]}),(pe||U||Q)&&c.jsxs("button",{type:"button",onClick:N,"data-test-id":"thumbnail-help","aria-label":"Hilfe zum Thumbnail finden",className:"flex items-center gap-1 text-xs font-medium text-secondary-500 hover:text-secondary-600 transition-colors",children:[c.jsx(iv,{className:"h-3 w-3"}),"Hilfe"]})]})]}),c.jsx("input",{id:"recipe-image",type:"url",value:d,onChange:k,"data-test-id":"recipe-image-input","aria-label":"Bild-URL eingeben",placeholder:me?"Klicke 'Auto-Fill' fr YouTube-Thumbnail":"Google Drive oder imgbb.com Link",className:"w-full px-4 py-2 border-2 border-gray-600 rounded-lg focus:border-primary-500 focus:outline-none transition-colors bg-slate-700 text-gray-100 placeholder-gray-400"}),me&&c.jsx("p",{className:"text-xs text-primary-600 mt-1",children:' YouTube-Thumbnail verfgbar - klicke "Auto-Fill"'}),d&&gl(d)&&c.jsx("p",{className:"text-xs text-green-600 mt-1",children:" Google Drive Link erkannt - wird automatisch konvertiert"}),d&&c.jsxs("div",{className:"mt-3",children:[c.jsx("p",{className:"text-xs font-medium text-gray-200 mb-1",children:"Vorschau:"}),c.jsx("div",{className:"relative w-full h-40 bg-slate-700 rounded-lg overflow-hidden border-2 border-gray-600",children:c.jsx("img",{src:pl(d),alt:"Vorschau",className:"w-full h-full object-cover",onError:q=>{const K=q.target;K.style.display="none";const J=K.parentElement;J&&(J.innerHTML='<div class="flex items-center justify-center h-full text-red-500 text-sm p-4 text-center"><div><p class="font-bold"> Bild kann nicht geladen werden</p><p class="text-xs mt-1">Prfe Google Drive Freigabe:<br/>"Jeder mit dem Link"</p></div></div>')},onLoad:q=>{const J=q.target.parentElement;if(J){const W=document.createElement("div");W.className="absolute top-2 right-2 bg-green-500 text-white text-xs px-2 py-1 rounded-full font-medium",W.textContent=" OK",J.appendChild(W)}}})})]}),w&&(pe||U||Q)&&c.jsxs("div",{className:"mt-3 p-4 bg-blue-50 border-2 border-blue-200 rounded-lg",children:[c.jsxs("div",{className:"flex items-start justify-between mb-2",children:[c.jsxs("h4",{className:"font-bold text-blue-800 text-sm",children:[pe&&" Instagram Thumbnail finden",U&&" Facebook Thumbnail finden",Q&&" TikTok Thumbnail finden"]}),c.jsx("button",{type:"button",onClick:N,className:"text-blue-600 hover:text-blue-800",children:c.jsx(hn,{className:"h-4 w-4"})})]}),pe&&c.jsxs("ol",{className:"text-xs text-blue-700 space-y-1 list-decimal list-inside",children:[c.jsx("li",{children:"ffne den Instagram-Post im Browser"}),c.jsx("li",{children:'Rechtsklick auf das Bild/Video  "Bild-URL kopieren" oder "Grafik-Adresse kopieren"'}),c.jsx("li",{children:"Fge die URL hier ein"}),c.jsxs("li",{children:[c.jsx("strong",{children:"Alternative:"})," Screenshot vom Post machen"]})]}),U&&c.jsxs("ol",{className:"text-xs text-blue-700 space-y-1 list-decimal list-inside",children:[c.jsx("li",{children:"ffne das Facebook-Video im Browser"}),c.jsx("li",{children:'Rechtsklick auf das Video-Thumbnail  "Grafikadresse kopieren"'}),c.jsx("li",{children:"Fge die URL hier ein"}),c.jsxs("li",{children:[c.jsx("strong",{children:"Alternative:"})," Screenshot machen"]})]}),Q&&c.jsxs("ol",{className:"text-xs text-blue-700 space-y-1 list-decimal list-inside",children:[c.jsx("li",{children:"ffne das TikTok-Video im Browser"}),c.jsx("li",{children:"Pause das Video bei einem guten Frame"}),c.jsx("li",{children:"Screenshot vom Video machen"})]}),c.jsxs("div",{className:"mt-3 pt-3 border-t border-blue-300",children:[c.jsx("p",{className:"text-xs font-bold text-blue-800 mb-2",children:" Mit Google Drive (empfohlen):"}),c.jsxs("ol",{className:"text-xs text-blue-700 space-y-1 list-decimal list-inside",children:[c.jsx("li",{children:"Screenshot/Bild in Google Drive hochladen"}),c.jsx("li",{children:'Rechtsklick auf Datei  "Link teilen"'}),c.jsx("li",{children:'Auf "Eingeschrnkt" klicken  "Jeder mit dem Link" whlen'}),c.jsxs("li",{children:["Link kopieren (sieht aus wie: ",c.jsx("code",{className:"bg-blue-100 px-1",children:"drive.google.com/file/d/XXXX/view"}),")"]}),c.jsxs("li",{children:["ndere das Format zu: ",c.jsx("code",{className:"bg-blue-100 px-1 block mt-1",children:"drive.google.com/uc?export=view&id=XXXX"})]}),c.jsx("li",{children:"Fge diesen Link hier ein"})]})]}),c.jsxs("div",{className:"mt-2 pt-2 border-t border-blue-300",children:[c.jsx("p",{className:"text-xs font-bold text-blue-800 mb-1",children:" Alternative: imgbb.com"}),c.jsx("p",{className:"text-xs text-blue-700",children:"Kostenlos, kein Account ntig - einfach hochladen & Link kopieren"})]})]})]}),c.jsx("button",{type:"submit",disabled:b,"data-test-id":"submit-recipe","aria-label":"Rezept speichern",className:ve("w-full py-3 rounded-lg font-bold text-white transition-all duration-200",b?"bg-gray-600 cursor-not-allowed":"bg-gradient-to-r from-primary-500 to-secondary-500 hover:shadow-lg hover:scale-105"),children:b?" Bild wird hochgeladen...":"Rezept speichern "})]})]}):c.jsxs("button",{onClick:A,"data-test-id":"open-add-recipe","aria-label":"Neues Rezept hinzufgen",className:"w-full bg-gradient-to-r from-primary-500 to-secondary-500 text-white rounded-2xl p-6 shadow-lg hover:shadow-xl transition-all duration-200 hover:scale-105 flex items-center justify-center gap-3 font-bold text-lg",children:[c.jsx(lo,{className:"h-6 w-6"}),"Neues Rezept hinzufgen"]})},xA=({rating:t,onRatingChange:e,readonly:n=!1,size:r="md"})=>{const s={sm:"h-4 w-4",md:"h-5 w-5",lg:"h-6 w-6"},i=o=>{!n&&e&&e(o)};return c.jsx("div",{className:"flex items-center gap-1",children:[1,2,3,4,5].map(o=>{const l=o<=t;return c.jsx("button",{onClick:()=>i(o),"data-test-id":`star-${o}`,"aria-label":`${o} ${o===1?"Stern":"Sterne"} bewerten`,disabled:n,className:ve("transition-all duration-200",!n&&"hover:scale-110 cursor-pointer",n&&"cursor-default"),children:c.jsx(h2,{className:ve(s[r],l?"fill-yellow-400 text-yellow-400":"text-gray-300")})},o)})})},EA=({recipe:t,onSave:e,onClose:n})=>{const[r,s]=B.useState(t.title),[i,o]=B.useState(t.url),[l,u]=B.useState(t.description),[d,m]=B.useState(t.imageUrl||""),[p,g]=B.useState(t.ingredients||[]),[w,S]=B.useState(!1),[R,C]=B.useState(null),[T,y]=B.useState(t.uploadedImageUrl||null),[b,D]=B.useState(!1),[M,O]=B.useState(!1),E=async K=>{if(K.preventDefault(),!r.trim()){alert("Bitte Titel eingeben!");return}D(!0);try{const J=jw(i);let W=T;R&&(W=await Ow(R,t.id),t.uploadedImageUrl&&Fg(t.uploadedImageUrl)&&await Og(t.uploadedImageUrl)),M&&t.uploadedImageUrl&&Fg(t.uploadedImageUrl)&&(await Og(t.uploadedImageUrl),W=null),e(t.id,{title:r.trim(),url:i.trim()||"",description:l.trim(),imageUrl:d.trim()||void 0,uploadedImageUrl:W||void 0,ingredients:p,platform:J}),n()}catch(J){console.error("Fehler beim Speichern:",J),alert("Fehler beim Hochladen des Bildes!")}finally{D(!1)}},_=K=>{s(K.target.value)},k=K=>{o(K.target.value)},I=K=>{u(K.target.value)},A=K=>{m(K.target.value)},N=()=>{const K=Vw(i);K&&m(K)},x=()=>{S(!w)},Z=K=>{var Me;const J=(Me=K.target.files)==null?void 0:Me[0];if(!J)return;const W=Mw(J);if(W!==!0){alert(W);return}C(J);const re=new FileReader;re.onloadend=()=>{y(re.result)},re.readAsDataURL(J),O(!1)},me=()=>{C(null),y(null),O(!0)};B.useEffect(()=>{if(d&&gl(d)){const K=pl(d);K!==d&&m(K)}},[d]);const se=Lw(i),pe=i.toLowerCase(),U=pe.includes("instagram.com"),Q=pe.includes("facebook.com")||pe.includes("fb.com"),q=pe.includes("tiktok.com");return c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:c.jsxs("div",{className:"bg-slate-800/80 rounded-2xl p-6 max-w-2xl w-full shadow-2xl max-h-[90vh] overflow-y-auto",children:[c.jsxs("div",{className:"flex items-center justify-between mb-6",children:[c.jsx("h3",{className:"text-2xl font-bold text-gray-100",children:"Rezept bearbeiten"}),c.jsx("button",{onClick:n,"data-test-id":"close-edit-modal","aria-label":"Bearbeiten abbrechen",className:"p-2 hover:bg-slate-700 rounded-full transition-colors",children:c.jsx(hn,{className:"h-6 w-6 text-gray-300"})})]}),c.jsxs("form",{onSubmit:E,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"edit-title",className:"block text-sm font-medium text-gray-200 mb-1",children:"Rezept-Titel *"}),c.jsx("input",{id:"edit-title",type:"text",value:r,onChange:_,placeholder:"z.B. Spaghetti Carbonara",className:"w-full px-4 py-2 border-2 border-gray-600 rounded-lg focus:border-primary-500 focus:outline-none transition-colors bg-slate-700 text-gray-100 placeholder-gray-400",required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"edit-url",className:"block text-sm font-medium text-gray-200 mb-1",children:"Link zum Rezept (optional)"}),c.jsx("input",{id:"edit-url",type:"url",value:i,onChange:k,placeholder:"https://www.youtube.com/watch?v=... (oder leer fr eigenes Rezept)",className:"w-full px-4 py-2 border-2 border-gray-600 rounded-lg focus:border-primary-500 focus:outline-none transition-colors bg-slate-700 text-gray-100 placeholder-gray-400"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"edit-description",className:"block text-sm font-medium text-gray-200 mb-1",children:"Beschreibung (optional)"}),c.jsx("textarea",{id:"edit-description",value:l,onChange:I,placeholder:"Was macht dieses Rezept besonders?",rows:3,className:"w-full px-4 py-2 border-2 border-gray-600 rounded-lg focus:border-primary-500 focus:outline-none transition-colors resize-none bg-slate-700 text-gray-100 placeholder-gray-400"})]}),c.jsx(Fw,{ingredients:p,onChange:g}),c.jsxs("div",{className:"border-2 border-dashed border-primary-500/30 rounded-xl p-4 bg-slate-700/30",children:[c.jsxs("div",{className:"flex items-center justify-between mb-3",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-200",children:" Eigenes Foto hochladen (optional)"}),c.jsx("span",{className:"text-xs text-gray-400",children:"Max. 10 MB"})]}),T?c.jsxs("div",{className:"relative",children:[c.jsx("img",{src:T,alt:"Vorschau",className:"w-full h-48 object-cover rounded-lg"}),c.jsx("button",{type:"button",onClick:me,className:"absolute top-2 right-2 p-2 bg-red-600 hover:bg-red-700 text-white rounded-full shadow-lg transition-colors",children:c.jsx(js,{className:"h-4 w-4"})}),c.jsx("div",{className:"absolute bottom-2 left-2 bg-green-600 text-white text-xs px-2 py-1 rounded-full font-medium",children:R?" Bereit zum Upload":" Aktuelles Foto"})]}):c.jsxs("div",{children:[c.jsx("input",{id:"edit-image-upload",type:"file",accept:"image/jpeg,image/jpg,image/png,image/webp",onChange:Z,className:"hidden"}),c.jsxs("label",{htmlFor:"edit-image-upload",className:"flex flex-col items-center justify-center p-6 border-2 border-dashed border-gray-600 rounded-lg cursor-pointer hover:border-primary-500 hover:bg-slate-600/30 transition-all",children:[c.jsx(_d,{className:"h-8 w-8 text-gray-400 mb-2"}),c.jsx("span",{className:"text-sm font-medium text-gray-300 mb-1",children:"Klicke hier oder ziehe ein Bild rein"}),c.jsx("span",{className:"text-xs text-gray-500",children:"JPEG, PNG oder WebP  Wird automatisch komprimiert"})]})]}),c.jsxs("p",{className:"text-xs text-gray-400 mt-2 text-center",children:[" ",c.jsx("strong",{children:"Hybrid-Lsung:"})," Du kannst sowohl ein eigenes Foto hochladen als auch eine YouTube-URL unten angeben!"]})]}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center justify-between mb-1",children:[c.jsx("label",{htmlFor:"edit-image",className:"block text-sm font-medium text-gray-200",children:"Bild-URL (optional)"}),c.jsxs("div",{className:"flex items-center gap-2",children:[se&&c.jsxs("button",{type:"button",onClick:N,className:"flex items-center gap-1 text-xs font-medium text-primary-500 hover:text-primary-600 transition-colors",children:[c.jsx(vd,{className:"h-3 w-3"}),"Auto-Fill"]}),(U||Q||q)&&c.jsxs("button",{type:"button",onClick:x,className:"flex items-center gap-1 text-xs font-medium text-secondary-500 hover:text-secondary-600 transition-colors",children:[c.jsx(iv,{className:"h-3 w-3"}),"Hilfe"]})]})]}),c.jsx("input",{id:"edit-image",type:"url",value:d,onChange:A,placeholder:"Google Drive oder imgbb.com Link",className:"w-full px-4 py-2 border-2 border-gray-600 rounded-lg focus:border-primary-500 focus:outline-none transition-colors bg-slate-700 text-gray-100 placeholder-gray-400"}),d&&gl(d)&&c.jsx("p",{className:"text-xs text-green-400 mt-1",children:" Google Drive Link erkannt - wird automatisch konvertiert"}),d&&c.jsxs("div",{className:"mt-3",children:[c.jsx("p",{className:"text-xs font-medium text-gray-200 mb-1",children:"Vorschau:"}),c.jsx("div",{className:"relative w-full h-40 bg-slate-700 rounded-lg overflow-hidden border-2 border-gray-600",children:c.jsx("img",{src:pl(d),alt:"Vorschau",className:"w-full h-full object-cover",onError:K=>{const J=K.target;J.style.display="none";const W=J.parentElement;W&&(W.innerHTML='<div class="flex items-center justify-center h-full text-red-500 text-sm p-4 text-center"><div><p class="font-bold"> Bild kann nicht geladen werden</p><p class="text-xs mt-1">Prfe Google Drive Freigabe:<br/>"Jeder mit dem Link"</p></div></div>')},onLoad:K=>{const W=K.target.parentElement;if(W){const re=document.createElement("div");re.className="absolute top-2 right-2 bg-green-500 text-white text-xs px-2 py-1 rounded-full font-medium",re.textContent=" OK",W.appendChild(re)}}})})]}),w&&(U||Q||q)&&c.jsxs("div",{className:"mt-3 p-3 bg-slate-700 border border-primary-500/30 rounded-lg text-xs text-gray-200",children:[c.jsx("p",{className:"font-bold mb-1",children:" Tipp:"}),c.jsxs("p",{children:["Screenshot machen und auf ",c.jsx("a",{href:"https://imgbb.com",target:"_blank",rel:"noopener noreferrer",className:"underline",children:"imgbb.com"})," oder Google Drive hochladen"]})]})]}),c.jsxs("div",{className:"flex gap-3 pt-2",children:[c.jsx("button",{type:"button",onClick:n,disabled:b,className:"flex-1 py-3 rounded-lg font-medium bg-slate-700 text-gray-100 hover:bg-slate-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Abbrechen"}),c.jsx("button",{type:"submit",disabled:b,className:`flex-1 py-3 rounded-lg font-bold text-white transition-all duration-200 flex items-center justify-center gap-2 ${b?"bg-gray-600 cursor-not-allowed":"bg-gradient-to-r from-primary-500 to-secondary-500 hover:shadow-lg hover:scale-105"}`,children:b?c.jsx(c.Fragment,{children:" Wird hochgeladen..."}):c.jsxs(c.Fragment,{children:[c.jsx(uv,{className:"h-5 w-5"}),"Speichern"]})})]})]})]})})},Uw=t=>{const[e,n]=B.useState([]),[r,s]=B.useState(!0),[i,o]=B.useState(null);return B.useEffect(()=>{if(!t){s(!1);return}const g=`households/${t}/shoppingList`,w=Wr(Je,g),S=uw(w,cw("addedAt","desc")),R=of(S,C=>{const T=[];C.forEach(y=>{var D,M,O;const b=y.data();T.push({id:y.id,...b,addedAt:((O=(M=(D=b.addedAt)==null?void 0:D.toDate)==null?void 0:M.call(D))==null?void 0:O.toISOString())||new Date().toISOString()})}),n(T),s(!1),o(null)},C=>{console.error("Error fetching shopping list:",C),o("Fehler beim Laden der Einkaufsliste"),s(!1)});return()=>R()},[t]),{items:e,isLoading:r,error:i,addItem:async(g,w,S)=>{if(t)try{const R=`households/${t}/shoppingList`,C=Wr(Je,R);await Xl(C,{name:g,quantity:S||"",category:w,checked:!1,addedAt:Bs()})}catch(R){throw console.error("Error adding item:",R),o("Fehler beim Hinzufgen des Artikels"),R}},toggleItem:async g=>{if(t)try{const w=e.find(C=>C.id===g);if(!w)return;const S=`households/${t}/shoppingList`,R=Qt(Je,S,g);await mw(R,{checked:!w.checked})}catch(w){throw console.error("Error toggling item:",w),o("Fehler beim Aktualisieren des Artikels"),w}},removeItem:async g=>{if(t)try{const w=`households/${t}/shoppingList`,S=Qt(Je,w,g);await Mr(S)}catch(w){throw console.error("Error removing item:",w),o("Fehler beim Lschen des Artikels"),w}},clearAllItems:async()=>{if(t)try{const g=`households/${t}/shoppingList`,w=e.map(S=>Mr(Qt(Je,g,S.id)));await Promise.all(w)}catch(g){throw console.error("Error clearing shopping list:",g),o("Fehler beim Leeren der Einkaufsliste"),g}},clearCheckedItems:async()=>{if(t)try{const g=`households/${t}/shoppingList`,S=e.filter(R=>R.checked).map(R=>Mr(Qt(Je,g,R.id)));await Promise.all(S)}catch(g){throw console.error("Error clearing checked items:",g),o("Fehler beim Lschen der erledigten Artikel"),g}}}},TA={produce:["tomate","gurke","salat","paprika","zwiebel","knoblauch","karotte","kartoffel","apfel","banane","zitrone","orange","beere","spinat","brokkoli","pilz","champignon"],bakery:["brot","brtchen","baguette","toast","croissant","mehl","hefe"],meat:["hhnchen","huhn","rind","schwein","hack","steak","filet","schnitzel","bratwurst"],deli:["schinken","salami","mortadella","aufschnitt","wurst"],dairy:["milch","butter","kse","joghurt","sahne","schmand","quark","frischkse","mozzarella","parmesan","ei","eier"],beverages:["wasser","saft","cola","limo","bier","wein","kaffee","tee","milch"],pantry:["reis","nudel","pasta","dose","konserve","l","essig","gewrz","salz","pfeffer","zucker","honig","marmelade","ketchup","senf","mayonnaise","soe"],snacks:["schokolade","keks","chips","sigkeit","gummibr","bonbon"],frozen:["tiefkhl","tk-","eis","eiscreme","gefrier"],household:["splmittel","schwamm","putzmittel","klopapier","kchenpapier","mllbeutel","alufolie","frischhaltefolie"]},kA=t=>{const e=t.toLowerCase();for(const[n,r]of Object.entries(TA))if(r.some(s=>e.includes(s)))return n;return"produce"},bA={youtube:{icon:Cr,color:"bg-red-600/20 text-red-400 border-red-500/30",label:"YouTube"},instagram:{icon:av,color:"bg-pink-600/20 text-pink-400 border-pink-500/30",label:"Instagram"},facebook:{icon:sv,color:"bg-blue-600/20 text-blue-400 border-blue-500/30",label:"Facebook"},tiktok:{icon:lv,color:"bg-gray-600/20 text-gray-400 border-gray-500/30",label:"TikTok"},own:{icon:hv,color:"bg-secondary-600/20 text-secondary-400 border-secondary-500/30",label:"Eigenes Rezept"},other:{icon:s2,color:"bg-accent-600/20 text-accent-400 border-accent-500/30",label:"Andere"}},IA=({recipe:t,onDelete:e,onUpdate:n})=>{const r=bA[t.platform],s=r.icon,[i,o]=B.useState(!1),[l,u]=B.useState(t.notes||""),[d,m]=B.useState(!1),[p,g]=B.useState(""),[w,S]=B.useState(!1),[R,C]=B.useState(!1),{addItem:T}=Uw(),y=()=>{confirm(`Mchtest du "${t.title}" wirklich lschen?`)&&e(t.id)},b=()=>{t.url&&t.url.trim()!==""&&window.open(t.url,"_blank","noopener,noreferrer")},D=se=>{u(se.target.value)},M=()=>{n(t.id,{notes:l}),o(!1)},O=()=>{i&&u(t.notes||""),o(!i)},E=se=>{n(t.id,{rating:se})},_=se=>{g(se.target.value)},k=se=>{if(se.preventDefault(),!p.trim())return;const pe={id:crypto.randomUUID(),text:p.trim(),createdAt:new Date().toISOString()},U=[...t.comments,pe];n(t.id,{comments:U}),g("")},I=()=>{m(!d)},A=()=>{S(!0)},N=()=>{S(!1)},x=(se,pe)=>{n(se,pe),S(!1)},Z=()=>{if(t.ingredients.length===0){alert("Dieses Rezept hat keine Zutaten!");return}let se=0;t.ingredients.forEach(pe=>{const U=kA(pe.name);T(pe.name,U,pe.quantity),se++}),alert(` ${se} ${se===1?"Zutat":"Zutaten"} zur Einkaufsliste hinzugefgt!`)},me=()=>{C(!R)};return c.jsxs(c.Fragment,{children:[w&&c.jsx(EA,{recipe:t,onSave:x,onClose:N}),c.jsxs("div",{className:"bg-slate-800/80 backdrop-blur-sm rounded-2xl overflow-hidden shadow-xl hover:shadow-2xl transition-all duration-300 border-2 border-dark-600/50 hover:border-primary-500/30 hover:autumn-glow",children:[c.jsx("button",{onClick:me,className:"w-full",children:t.uploadedImageUrl||t.imageUrl?c.jsxs("div",{className:"h-48 overflow-hidden bg-gradient-to-br from-primary-100 to-secondary-100 relative",children:[c.jsx("img",{src:t.uploadedImageUrl||t.imageUrl,alt:t.title,className:"w-full h-full object-cover",onError:se=>{const pe=se.target;pe.style.display="none"}}),c.jsx("div",{className:"absolute bottom-2 right-2 bg-black bg-opacity-50 text-white text-xs px-2 py-1 rounded-full",children:R?" Weniger":" Mehr"}),t.uploadedImageUrl&&c.jsx("div",{className:"absolute top-2 left-2 bg-green-600 text-white text-xs px-2 py-1 rounded-full font-medium flex items-center gap-1",children:" Eigenes Foto"})]}):c.jsxs("div",{className:"h-48 bg-gradient-to-br from-primary-100 via-secondary-100 to-accent-100 flex items-center justify-center relative",children:[c.jsx(s,{className:"h-16 w-16 text-white opacity-50"}),c.jsx("div",{className:"absolute bottom-2 right-2 bg-black bg-opacity-50 text-white text-xs px-2 py-1 rounded-full",children:R?" Weniger":" Mehr"})]})}),c.jsxs("div",{className:"p-5",children:[c.jsxs("div",{className:"flex items-center justify-between mb-3",children:[c.jsxs("div",{className:ve("inline-flex items-center gap-2 px-3 py-1 rounded-full text-sm font-medium border-2",r.color),children:[c.jsx(s,{className:"h-4 w-4"}),r.label]}),c.jsx("button",{onClick:A,"data-test-id":`edit-recipe-${t.id}`,"aria-label":`Rezept ${t.title} bearbeiten`,className:"p-2 hover:bg-slate-700/50 rounded-lg transition-colors text-gray-400 hover:text-primary-400",children:c.jsx(a2,{className:"h-4 w-4"})})]}),c.jsx("button",{onClick:me,className:"w-full text-left mb-3",children:c.jsx("h3",{className:"text-xl font-bold text-gray-100 line-clamp-2 hover:text-primary-400 transition-colors",children:t.title})}),R&&c.jsxs("div",{className:"space-y-4 animate-in fade-in slide-in-from-top-2 duration-200",children:[t.description&&c.jsx("p",{className:"text-gray-300 text-sm",children:t.description}),c.jsxs("p",{className:"text-xs text-gray-500",children:["Hinzugefgt: ",new Date(t.createdAt).toLocaleDateString("de-DE")]}),c.jsxs("div",{className:"mb-4 pb-4 border-b border-dark-600/50",children:[c.jsxs("div",{className:"flex items-center justify-between mb-2",children:[c.jsx("span",{className:"text-sm font-medium text-gray-200",children:"Bewertung"}),t.rating&&c.jsxs("span",{className:"text-xs text-gray-400",children:[t.rating,"/5"]})]}),c.jsx(xA,{rating:t.rating||0,onRatingChange:E,size:"lg"})]}),t.ingredients&&t.ingredients.length>0&&c.jsxs("div",{className:"pb-4 border-b border-dark-600/50",children:[c.jsxs("div",{className:"flex items-center justify-between mb-2",children:[c.jsxs("span",{className:"text-sm font-medium text-gray-200",children:["Zutaten (",t.ingredients.length,")"]}),c.jsxs("button",{onClick:Z,"data-test-id":`add-ingredients-to-list-${t.id}`,"aria-label":"Zutaten zur Einkaufsliste hinzufgen",className:"flex items-center gap-1 text-xs font-medium text-primary-500 hover:text-primary-600 transition-colors",children:[c.jsx(yd,{className:"h-3 w-3"}),"Zur Einkaufsliste"]})]}),c.jsx("div",{className:"space-y-1 max-h-32 overflow-y-auto",children:t.ingredients.map((se,pe)=>c.jsxs("div",{className:"text-sm text-gray-200 bg-slate-700/50 rounded px-2 py-1 flex justify-between",children:[c.jsx("span",{children:se.name}),se.quantity&&c.jsx("span",{className:"text-gray-400 text-xs",children:se.quantity})]},pe))})]}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center justify-between mb-2",children:[c.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium text-gray-200",children:[c.jsx(hv,{className:"h-4 w-4 text-accent-500"}),"Notizen"]}),c.jsx("button",{onClick:O,"data-test-id":`toggle-notes-${t.id}`,"aria-label":i?"Notizen-Bearbeitung abbrechen":"Notizen bearbeiten",className:"text-xs text-primary-500 hover:text-primary-600 font-medium transition-colors",children:i?"Abbrechen":"Bearbeiten"})]}),i?c.jsxs("div",{className:"space-y-2",children:[c.jsx("textarea",{value:l,onChange:D,"data-test-id":`notes-input-${t.id}`,"aria-label":"Notizen bearbeiten",placeholder:"Fge deine Notizen hinzu...",rows:3,className:"w-full px-3 py-2 text-sm border-2 border-gray-600 rounded-lg focus:border-accent-500 focus:outline-none transition-colors resize-none bg-slate-700 text-gray-100 placeholder-gray-400"}),c.jsxs("button",{onClick:M,"data-test-id":`save-notes-${t.id}`,"aria-label":"Notizen speichern",className:ve("w-full flex items-center justify-center gap-2 px-3 py-2 rounded-lg text-sm font-medium transition-all duration-200","bg-accent-500 text-white hover:bg-accent-600"),children:[c.jsx(uv,{className:"h-4 w-4"}),"Speichern"]})]}):c.jsx("div",{className:"text-sm text-gray-300 bg-slate-700/50 rounded-lg p-3 min-h-[60px]",children:t.notes||c.jsx("span",{className:"text-gray-500 italic",children:"Keine Notizen vorhanden"})})]}),c.jsxs("div",{className:"pb-4 border-b border-slate-600",children:[c.jsxs("button",{onClick:I,"data-test-id":`toggle-comments-${t.id}`,"aria-label":d?"Kommentare ausblenden":"Kommentare anzeigen",className:"flex items-center justify-between w-full text-sm font-medium text-gray-200 hover:text-gray-100 transition-colors",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(o2,{className:"h-4 w-4 text-secondary-500"}),"Kommentare",t.comments.length>0&&c.jsx("span",{className:"bg-secondary-100 text-secondary-700 text-xs px-2 py-0.5 rounded-full",children:t.comments.length})]}),c.jsx("span",{className:"text-xs text-primary-500",children:d?"Ausblenden":"Anzeigen"})]}),d&&c.jsxs("div",{className:"mt-3 space-y-3",children:[t.comments.length>0&&c.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:t.comments.map(se=>c.jsxs("div",{className:"bg-slate-700/50 rounded-lg p-3 text-sm",children:[c.jsx("p",{className:"text-gray-200",children:se.text}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:new Date(se.createdAt).toLocaleDateString("de-DE",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})})]},se.id))}),c.jsxs("form",{onSubmit:k,className:"flex gap-2",children:[c.jsx("input",{type:"text",value:p,onChange:_,"data-test-id":`comment-input-${t.id}`,"aria-label":"Kommentar hinzufgen",placeholder:"Kommentar hinzufgen...",className:"flex-1 px-3 py-2 text-sm border-2 border-gray-600 rounded-lg focus:border-secondary-500 focus:outline-none transition-colors bg-slate-700 text-gray-100 placeholder-gray-400"}),c.jsx("button",{type:"submit","data-test-id":`add-comment-${t.id}`,"aria-label":"Kommentar senden",disabled:!p.trim(),className:ve("px-3 py-2 rounded-lg transition-all duration-200",p.trim()?"bg-secondary-500 text-white hover:bg-secondary-600":"bg-slate-600/50 text-gray-500 cursor-not-allowed"),children:c.jsx(u2,{className:"h-4 w-4"})})]})]})]}),c.jsxs("div",{className:"flex gap-2",children:[t.url&&t.url.trim()!==""&&c.jsxs("button",{onClick:b,"data-test-id":`open-recipe-${t.id}`,"aria-label":`Rezept ${t.title} ffnen`,className:ve("flex-1 flex items-center justify-center gap-2 px-4 py-2 rounded-lg font-medium transition-all duration-200","bg-primary-500 text-white hover:bg-primary-600 hover:shadow-md"),children:[c.jsx(n2,{className:"h-4 w-4"}),"ffnen"]}),c.jsx("button",{onClick:y,"data-test-id":`delete-recipe-${t.id}`,"aria-label":`Rezept ${t.title} lschen`,className:ve("px-4 py-2 rounded-lg font-medium transition-all duration-200","bg-red-100 text-red-600 hover:bg-red-200",!t.url||t.url.trim()===""?"flex-1":""),children:c.jsx(js,{className:"h-4 w-4"})})]}),c.jsx("button",{onClick:me,"data-test-id":`collapse-recipe-${t.id}`,"aria-label":"Details ausblenden",className:"w-full mt-4 py-2 text-sm font-medium text-gray-400 hover:text-primary-400 transition-colors border-t border-dark-600/50 pt-4",children:" Weniger anzeigen"})]}),!R&&c.jsxs("div",{className:"flex items-center justify-between pt-3 border-t border-dark-600/50",children:[c.jsxs("div",{className:"flex items-center gap-3 text-xs text-gray-400",children:[t.rating&&c.jsxs("span",{className:"flex items-center gap-1",children:[" ",t.rating,"/5"]}),t.ingredients.length>0&&c.jsxs("span",{children:[" ",t.ingredients.length]}),t.comments.length>0&&c.jsxs("span",{children:[" ",t.comments.length]})]}),c.jsx("button",{onClick:me,className:"text-xs text-primary-500 hover:text-primary-600 font-medium",children:"Mehr anzeigen "})]})]})]})]})},SA=({searchTerm:t,onSearchChange:e})=>{const n=s=>{e(s.target.value)},r=()=>{e("")};return c.jsxs("div",{className:"relative",children:[c.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:c.jsx(cv,{className:"h-5 w-5 text-gray-400"})}),c.jsx("input",{type:"text",value:t,onChange:n,"data-test-id":"search-recipes","aria-label":"Rezepte suchen",placeholder:"Suche nach Rezepten, Beschreibung oder Plattform...",className:ve("w-full pl-12 pr-12 py-3 rounded-full border-2 border-gray-600","focus:border-primary-500 focus:outline-none transition-colors","bg-slate-800/80 shadow-sm text-gray-100 placeholder-gray-400")}),t&&c.jsx("button",{onClick:r,"data-test-id":"clear-search","aria-label":"Suche lschen",className:"absolute inset-y-0 right-0 pr-4 flex items-center hover:text-gray-200 text-gray-400 transition-colors",children:c.jsx(hn,{className:"h-5 w-5"})})]})},zw=async t=>{try{const e=Bw(t);if(!e)throw new Error("Ungltige Gist-URL");const n=`https://api.github.com/gists/${e}`,r=await fetch(n);if(!r.ok)throw new Error("Gist konnte nicht geladen werden");const s=await r.json(),i=Object.values(s.files);if(!i.length)throw new Error("Gist enthlt keine Dateien");const o=i[0].content,l=JSON.parse(o);if(!l.recipes||!Array.isArray(l.recipes))throw new Error("Ungltiges Datenformat");return l}catch(e){throw new Error("Fehler beim Laden vom Gist: "+e.message)}},Bw=t=>{const e=[/gist\.github\.com\/[^\/]+\/([a-f0-9]+)/i,/gist\.github\.com\/([a-f0-9]+)/i,/^([a-f0-9]{32})$/i];for(const n of e){const r=t.match(n);if(r)return r[1]}return null},AA=t=>Bw(t)!==null,RA="https://gist.github.com/tubackit/ab2aa98a3c0fd463e82701a616f0dbf6",NA=({onSync:t,mode:e="merge"})=>{const[n,r]=B.useState(!1),[s,i]=B.useState(localStorage.getItem("foodflash_last_sync")),o=async()=>{r(!0);try{const u=await zw(RA);e==="replace"&&localStorage.removeItem("foodflash_recipes"),t(u.recipes);const d=new Date().toISOString();i(d),localStorage.setItem("foodflash_last_sync",d),alert(` ${u.recipes.length} Familien-Rezepte geladen!`)}catch(u){alert(" Fehler beim Laden: "+u.message)}finally{r(!1)}},l=()=>s?new Date(s).toLocaleDateString("de-DE",{day:"2-digit",month:"2-digit",hour:"2-digit",minute:"2-digit"}):"Nie";return c.jsxs("div",{className:"bg-gradient-to-r from-blue-500 to-purple-500 rounded-2xl p-4 shadow-lg text-white",children:[c.jsxs("div",{className:"flex items-center justify-between mb-2",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(Xc,{className:"h-5 w-5"}),c.jsx("h3",{className:"font-bold",children:"Familien-Rezepte"})]}),c.jsxs("p",{className:"text-xs opacity-90",children:["Letzter Sync: ",l()]})]}),c.jsxs("button",{onClick:o,disabled:n,"data-test-id":"family-sync","aria-label":"Familien-Rezepte synchronisieren",className:ve("w-full py-2 px-4 rounded-lg font-medium transition-all duration-200 flex items-center justify-center gap-2",n?"bg-slate-800/80/30 cursor-not-allowed":"bg-slate-800/80 text-blue-600 hover:bg-blue-50 hover:shadow-md"),children:[c.jsx(l2,{className:ve("h-4 w-4",n&&"animate-spin")}),n?"Lade...":"Familien-Rezepte aktualisieren"]}),c.jsx("p",{className:"text-xs opacity-75 mt-2 text-center",children:"Ldt die neuesten Rezepte von der Familien-Cloud"})]})},CA="AIzaSyCEonhSF4OlyLDSx0yG5nz0iWUAZQMcpcU",PA=async t=>{const e=`${t} rezept`,n=`https://www.googleapis.com/youtube/v3/search?part=snippet&q=${encodeURIComponent(e)}&type=video&maxResults=12&key=${CA}`;try{const r=await fetch(n);if(!r.ok)throw r.status===403?new Error("API-Key ungltig oder Quota berschritten"):new Error("YouTube API Fehler: "+r.statusText);return(await r.json()).items.map(i=>({id:i.id.videoId,title:i.snippet.title,thumbnail:i.snippet.thumbnails.medium.url,channelTitle:i.snippet.channelTitle,description:i.snippet.description,url:`https://www.youtube.com/watch?v=${i.id.videoId}`}))}catch(r){throw console.error("YouTube API Error:",r),r}},DA=({onSelect:t,onClose:e})=>{const[n,r]=B.useState(""),[s,i]=B.useState([]),[o,l]=B.useState(!1),[u,d]=B.useState(""),m=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1"||window.location.hostname.startsWith("192.168.")||window.location.hostname.startsWith("10.")||window.location.hostname.endsWith(".local"),p=S=>{r(S.target.value)},g=async S=>{if(S.preventDefault(),!!n.trim()){l(!0),d(""),i([]);try{const R=await PA(n);i(R)}catch(R){d(R.message)}finally{l(!1)}}},w=S=>{t(S),e()};return m?c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:c.jsxs("div",{className:"bg-slate-800/80 rounded-2xl p-6 max-w-4xl w-full max-h-[90vh] overflow-hidden flex flex-col shadow-2xl",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsxs("h3",{className:"text-2xl font-bold text-gray-100 flex items-center gap-2",children:[c.jsx(Cr,{className:"h-7 w-7 text-red-600"}),"Auf YouTube suchen"]}),c.jsx("button",{onClick:e,"data-test-id":"close-youtube-search","aria-label":"Suche schlieen",className:"p-2 hover:bg-slate-700 rounded-full transition-colors",children:c.jsx(hn,{className:"h-6 w-6 text-gray-300"})})]}),c.jsx("form",{onSubmit:g,className:"mb-4",children:c.jsxs("div",{className:"relative",children:[c.jsx("input",{type:"text",value:n,onChange:p,placeholder:"Suche nach Rezepten... z.B. 'Carbonara'",className:"w-full pl-12 pr-4 py-3 border-2 border-gray-600 rounded-lg focus:border-red-500 focus:outline-none transition-colors bg-slate-700 text-gray-100 placeholder-gray-400",autoFocus:!0}),c.jsx(cv,{className:"absolute left-4 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),c.jsx("button",{type:"submit",disabled:o||!n.trim(),className:ve("absolute right-2 top-1/2 -translate-y-1/2 px-4 py-1.5 rounded-lg font-medium transition-all",o||!n.trim()?"bg-gray-200 text-gray-400":"bg-red-600 text-white hover:bg-red-700"),children:o?"Suche...":"Suchen"})]})}),u&&c.jsxs("div",{className:"mb-4 p-4 bg-red-50 border-2 border-red-200 rounded-lg text-red-700",children:[" ",u]}),o&&c.jsx("div",{className:"flex-1 flex items-center justify-center",children:c.jsx(i2,{className:"h-8 w-8 text-red-600 animate-spin"})}),!o&&s.length>0&&c.jsxs("div",{className:"flex-1 overflow-y-auto",children:[c.jsxs("p",{className:"text-sm text-gray-600 mb-3",children:[s.length," Ergebnisse gefunden"]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.map(S=>c.jsxs("button",{onClick:()=>w(S),"data-test-id":`youtube-video-${S.id}`,"aria-label":`${S.title} auswhlen`,className:"bg-slate-800/80 border-2 border-gray-600 rounded-xl overflow-hidden hover:border-red-400 hover:shadow-lg transition-all duration-200 text-left group",children:[c.jsxs("div",{className:"relative aspect-video bg-slate-700",children:[c.jsx("img",{src:S.thumbnail,alt:S.title,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-200"}),c.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-10 transition-all flex items-center justify-center",children:c.jsx(Cr,{className:"h-12 w-12 text-white opacity-0 group-hover:opacity-100 transition-opacity"})})]}),c.jsxs("div",{className:"p-3",children:[c.jsx("h4",{className:"font-bold text-gray-100 text-sm line-clamp-2 mb-1",children:S.title}),c.jsx("p",{className:"text-xs text-gray-500 line-clamp-1",children:S.channelTitle})]})]},S.id))})]}),!o&&!u&&s.length===0&&n===""&&c.jsx("div",{className:"flex-1 flex items-center justify-center text-center p-8",children:c.jsxs("div",{children:[c.jsx(Cr,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),c.jsx("p",{className:"text-gray-500",children:"Suche nach Rezepten auf YouTube"}),c.jsx("p",{className:"text-sm text-gray-400 mt-2",children:'z.B. "Spaghetti Carbonara"'})]})})]})}):c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:c.jsxs("div",{className:"bg-slate-800/80 rounded-2xl p-6 max-w-md w-full shadow-2xl text-center",children:[c.jsxs("div",{className:"mb-4",children:[c.jsx(Cr,{className:"h-16 w-16 text-red-600 mx-auto mb-4"}),c.jsx("h3",{className:"text-2xl font-bold text-gray-100 mb-2",children:"YouTube-Suche nur lokal verfgbar"}),c.jsx("p",{className:"text-gray-300 mb-6",children:"Die YouTube-Suche funktioniert nur auf dem lokalen Development-Server aus Sicherheitsgrnden. Verwende die App lokal unter:"}),c.jsx("code",{className:"bg-slate-700 px-3 py-2 rounded text-primary-400 font-mono text-sm",children:"http://localhost:5174/FoodFlash/"})]}),c.jsx("button",{onClick:e,className:"w-full bg-primary-600 text-white py-3 px-6 rounded-lg font-medium hover:bg-primary-700 transition-colors",children:"Schlieen"})]})})},jA=(t,e,n)=>{const r={version:"1.0",exportDate:new Date().toISOString(),recipes:t,weekPlan:e,shoppingList:n},s=JSON.stringify(r,null,2),i=new Blob([s],{type:"application/json"}),o=URL.createObjectURL(i),l=document.createElement("a");l.href=o,l.download=`foodflash-export-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(o)},VA=t=>new Promise((e,n)=>{const r=new FileReader;r.onload=s=>{var i;try{const o=(i=s.target)==null?void 0:i.result,l=JSON.parse(o);if(!l.recipes||!Array.isArray(l.recipes))throw new Error("Ungltiges Datenformat");e(l)}catch(o){n(new Error("Fehler beim Lesen der Datei: "+o.message))}},r.onerror=()=>{n(new Error("Fehler beim Lesen der Datei"))},r.readAsText(t)}),LA=({platformFilter:t,onClearFilter:e})=>{const{recipes:n,addRecipe:r,deleteRecipe:s,updateRecipe:i,isLoading:o}=ff(),[l,u]=B.useState(""),[d,m]=B.useState(!1),[p,g]=B.useState("merge"),w=B.useRef(null),[S,R]=B.useState(!1),[C,T]=B.useState(""),[y,b]=B.useState(!1),[D,M]=B.useState(!0),[O,E]=B.useState(!1),_=B.useMemo(()=>{let W=n;if(t&&(W=W.filter(re=>re.platform===t)),l.trim()){const re=l.toLowerCase();W=W.filter(Me=>{const de=Me.title.toLowerCase(),_t=Me.description.toLowerCase(),Zr=Me.platform.toLowerCase(),en=(Me.notes||"").toLowerCase();return de.includes(re)||_t.includes(re)||Zr.includes(re)||en.includes(re)})}return W},[n,l,t]),k=()=>{jA(n)},I=()=>{m(!0)},A=async W=>{var Me;const re=(Me=W.target.files)==null?void 0:Me[0];if(re)try{const de=await VA(re);if(p==="replace")localStorage.removeItem("foodflash_recipes"),de.recipes.forEach(_t=>r(_t));else{const _t=new Set(n.map(en=>en.url));de.recipes.filter(en=>!_t.has(en.url)).forEach(en=>r(en))}m(!1),w.current&&(w.current.value=""),alert(` ${p==="replace"?"Ersetzt":"Hinzugefgt"}: ${de.recipes.length} Rezepte`)}catch(de){alert(" Fehler beim Importieren: "+de.message)}},N=W=>{g(W)},x=()=>{m(!1),w.current&&(w.current.value="")},Z=()=>{const W=localStorage.getItem("foodflash_gist_url");W&&T(W),R(!0)},me=()=>{R(!1),T("")},se=W=>{T(W.target.value)},pe=async()=>{if(!C.trim()){alert("Bitte Gist-URL eingeben!");return}if(!AA(C)){alert("Ungltige Gist-URL! Bitte berprfe die URL.");return}b(!0);try{const W=await zw(C);if(p==="replace")localStorage.removeItem("foodflash_recipes"),W.recipes.forEach(re=>r(re));else{const re=new Set(n.map(de=>de.url));W.recipes.filter(de=>!re.has(de.url)).forEach(de=>r(de))}D&&localStorage.setItem("foodflash_gist_url",C),R(!1),T(""),alert(` ${W.recipes.length} Rezepte von Gist geladen!`)}catch(W){alert(" "+W.message)}finally{b(!1)}},U=()=>{localStorage.removeItem("foodflash_gist_url"),T(""),alert(" Gespeicherte Gist-URL wurde gelscht")},Q=W=>{const re=new Set(n.map(de=>de.url));W.filter(de=>!re.has(de.url)).forEach(de=>r(de))},q=()=>{E(!0)},K=()=>{E(!1)},J=W=>{r({title:W.title,url:W.url,description:W.description.slice(0,200),imageUrl:W.thumbnail,platform:"youtube",ingredients:[],comments:[],rating:void 0,notes:""}),E(!1)};return c.jsxs("div",{className:"max-w-6xl mx-auto",children:[c.jsxs("div",{className:"text-center mb-8",children:[c.jsxs("h2",{className:"text-4xl font-bold text-gray-100 mb-2 flex items-center justify-center gap-3",children:[c.jsx(nv,{className:"h-10 w-10 text-primary-500"}),"Deine Rezepte"]}),c.jsx("p",{className:"text-gray-600",children:n.length===0?"Fge dein erstes Rezept hinzu!":`${n.length} ${n.length===1?"Rezept":"Rezepte"} gespeichert`})]}),t&&e&&c.jsx("div",{className:"flex justify-center mb-6",children:c.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-primary-100 text-primary-700 rounded-full font-medium",children:[c.jsxs("span",{children:["Filter: ",t==="youtube"?"YouTube":t==="instagram"?"Instagram":t==="facebook"?"Facebook":t==="tiktok"?"TikTok":t==="own"?"Eigene Rezepte":t]}),c.jsx("button",{onClick:e,"data-test-id":"clear-platform-filter","aria-label":"Filter entfernen",className:"p-1 hover:bg-primary-200 rounded-full transition-colors",children:c.jsx(hn,{className:"h-4 w-4"})})]})}),c.jsx("div",{className:"mb-8",children:c.jsx(wA,{onAdd:W=>r({...W,ingredients:W.ingredients||[],comments:[],rating:void 0})})}),c.jsx("div",{className:"mb-6",children:c.jsx(NA,{onSync:Q,mode:"merge"})}),c.jsx("div",{className:"mb-6",children:c.jsxs("button",{onClick:q,"data-test-id":"youtube-search","aria-label":"Auf YouTube nach Rezepten suchen",className:"w-full bg-gradient-to-r from-red-500 to-red-600 text-white rounded-2xl p-4 shadow-lg hover:shadow-xl transition-all duration-200 hover:scale-105 flex items-center justify-center gap-3 font-bold text-lg",children:[c.jsx(Cr,{className:"h-6 w-6"}),"Rezept auf YouTube suchen"]})}),O&&c.jsx(DA,{onSelect:J,onClose:K}),c.jsxs("div",{className:"flex flex-wrap gap-3 mb-6 justify-center",children:[n.length>0&&c.jsxs("button",{onClick:k,"data-test-id":"export-recipes","aria-label":"Rezepte exportieren",className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-accent-500 to-accent-600 text-white rounded-lg font-medium hover:shadow-lg transition-all duration-200 hover:scale-105",children:[c.jsx(t2,{className:"h-5 w-5"}),"Exportieren"]}),c.jsxs("button",{onClick:I,"data-test-id":"import-recipes","aria-label":"Rezepte importieren",className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-secondary-500 to-secondary-600 text-white rounded-lg font-medium hover:shadow-lg transition-all duration-200 hover:scale-105",children:[c.jsx(_d,{className:"h-5 w-5"}),"Datei"]}),c.jsxs("button",{onClick:Z,"data-test-id":"load-from-gist","aria-label":"Von GitHub Gist laden",className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-lg font-medium hover:shadow-lg transition-all duration-200 hover:scale-105",children:[c.jsx(Xc,{className:"h-5 w-5"}),"Gist-Cloud"]})]}),d&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:c.jsxs("div",{className:"bg-slate-800/80 rounded-2xl p-6 max-w-md w-full shadow-2xl",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsxs("h3",{className:"text-xl font-bold text-gray-100 flex items-center gap-2",children:[c.jsx(r2,{className:"h-6 w-6 text-secondary-500"}),"Rezepte importieren"]}),c.jsx("button",{onClick:x,"data-test-id":"close-import-dialog","aria-label":"Dialog schlieen",className:"p-2 hover:bg-slate-700 rounded-full transition-colors",children:c.jsx(hn,{className:"h-6 w-6 text-gray-500"})})]}),c.jsxs("div",{className:"mb-4",children:[c.jsx("p",{className:"text-sm font-medium text-gray-200 mb-2",children:"Import-Modus:"}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[c.jsx("input",{type:"radio",name:"import-mode",checked:p==="merge",onChange:()=>N("merge"),className:"w-4 h-4 text-secondary-500"}),c.jsxs("div",{children:[c.jsx("span",{className:"font-medium text-gray-100",children:"Hinzufgen"}),c.jsx("p",{className:"text-xs text-gray-600",children:"Neue Rezepte zu bestehenden hinzufgen"})]})]}),c.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[c.jsx("input",{type:"radio",name:"import-mode",checked:p==="replace",onChange:()=>N("replace"),className:"w-4 h-4 text-secondary-500"}),c.jsxs("div",{children:[c.jsx("span",{className:"font-medium text-gray-100",children:"Ersetzen"}),c.jsx("p",{className:"text-xs text-gray-600",children:"Alle bestehenden Rezepte lschen und ersetzen"})]})]})]})]}),c.jsx("input",{ref:w,type:"file",accept:".json,application/json",onChange:A,className:"hidden",id:"recipe-file-input"}),c.jsx("label",{htmlFor:"recipe-file-input",className:ve("block w-full py-3 text-center rounded-lg font-bold cursor-pointer transition-all duration-200","bg-gradient-to-r from-secondary-500 to-secondary-600 text-white hover:shadow-lg hover:scale-105"),children:"Datei auswhlen"}),c.jsx("p",{className:"text-xs text-gray-500 mt-3 text-center",children:"Whle eine FoodFlash JSON-Datei aus"})]})}),S&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:c.jsxs("div",{className:"bg-slate-800/80 rounded-2xl p-6 max-w-lg w-full shadow-2xl",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsxs("h3",{className:"text-xl font-bold text-gray-100 flex items-center gap-2",children:[c.jsx(Xc,{className:"h-6 w-6 text-blue-500"}),"Von GitHub Gist laden"]}),c.jsx("button",{onClick:me,"data-test-id":"close-gist-dialog","aria-label":"Dialog schlieen",className:"p-2 hover:bg-slate-700 rounded-full transition-colors",children:c.jsx(hn,{className:"h-6 w-6 text-gray-500"})})]}),c.jsxs("div",{className:"mb-4 p-4 bg-blue-50 border-2 border-blue-200 rounded-lg",children:[c.jsx("p",{className:"text-sm text-blue-800 font-medium mb-2",children:" So funktioniert's:"}),c.jsxs("ol",{className:"text-xs text-blue-700 space-y-1 list-decimal list-inside",children:[c.jsxs("li",{children:["Ein Familienmitglied erstellt einen ",c.jsx("strong",{children:"ffentlichen Gist"})," mit der Export-Datei"]}),c.jsx("li",{children:"Gist-URL wird mit der Familie geteilt"}),c.jsx("li",{children:"Alle laden die Rezepte von dieser URL"})]}),c.jsxs("p",{className:"text-xs text-blue-600 mt-2",children:[" ",c.jsx("a",{href:"https://gist.github.com",target:"_blank",rel:"noopener noreferrer",className:"underline",children:"gist.github.com"})," - kostenlos & einfach!"]})]}),c.jsxs("div",{className:"mb-4",children:[c.jsx("p",{className:"text-sm font-medium text-gray-200 mb-2",children:"Import-Modus:"}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[c.jsx("input",{type:"radio",name:"gist-import-mode",checked:p==="merge",onChange:()=>N("merge"),className:"w-4 h-4 text-blue-500"}),c.jsxs("div",{children:[c.jsx("span",{className:"font-medium text-gray-100",children:"Hinzufgen"}),c.jsx("p",{className:"text-xs text-gray-600",children:"Neue Rezepte zu bestehenden hinzufgen"})]})]}),c.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[c.jsx("input",{type:"radio",name:"gist-import-mode",checked:p==="replace",onChange:()=>N("replace"),className:"w-4 h-4 text-blue-500"}),c.jsxs("div",{children:[c.jsx("span",{className:"font-medium text-gray-100",children:"Ersetzen"}),c.jsx("p",{className:"text-xs text-gray-600",children:"Alle bestehenden Rezepte lschen und ersetzen"})]})]})]})]}),c.jsxs("div",{className:"mb-4",children:[c.jsxs("div",{className:"flex items-center justify-between mb-1",children:[c.jsx("label",{htmlFor:"gist-url",className:"block text-sm font-medium text-gray-200",children:"GitHub Gist URL"}),localStorage.getItem("foodflash_gist_url")&&c.jsx("button",{onClick:U,className:"text-xs text-red-500 hover:text-red-600 font-medium",children:"URL lschen"})]}),c.jsx("input",{id:"gist-url",type:"url",value:C,onChange:se,placeholder:"https://gist.github.com/username/...",className:"w-full px-4 py-2 border-2 border-gray-600 rounded-lg focus:border-blue-500 focus:outline-none transition-colors bg-slate-700 text-gray-100 placeholder-gray-400"}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Z.B.: https://gist.github.com/username/abc123..."}),c.jsxs("label",{className:"flex items-center gap-2 mt-2 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:D,onChange:W=>M(W.target.checked),className:"w-4 h-4 text-blue-500"}),c.jsx("span",{className:"text-sm text-gray-200",children:"URL fr nchstes Mal speichern"})]})]}),c.jsx("button",{onClick:pe,disabled:y,className:ve("w-full py-3 rounded-lg font-bold text-white transition-all duration-200",y?"bg-gray-400 cursor-not-allowed":"bg-gradient-to-r from-blue-500 to-blue-600 hover:shadow-lg hover:scale-105"),children:y?"Lade...":"Von Gist laden"})]})}),n.length>0&&c.jsxs("div",{className:"mb-8",children:[c.jsx(SA,{searchTerm:l,onSearchChange:u}),l&&c.jsxs("p",{className:"text-sm text-gray-500 mt-2 text-center",children:[_.length," ",_.length===1?"Ergebnis":"Ergebnisse"," gefunden"]})]}),o?c.jsxs("div",{className:"bg-slate-800/80 rounded-2xl p-12 text-center shadow-lg",children:[c.jsx("div",{className:"text-6xl mb-4 animate-pulse",children:""}),c.jsx("h3",{className:"text-2xl font-bold text-gray-200 mb-2",children:"Lade Rezepte..."}),c.jsx("p",{className:"text-gray-400",children:"Synchronisiere mit der Cloud "})]}):n.length>0?_.length>0?c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:_.map(W=>c.jsx(IA,{recipe:W,onDelete:s,onUpdate:i},W.id))}):c.jsxs("div",{className:"bg-slate-800/80 rounded-2xl p-12 text-center shadow-lg",children:[c.jsx("div",{className:"text-6xl mb-4",children:""}),c.jsx("h3",{className:"text-2xl font-bold text-gray-200 mb-2",children:"Keine Ergebnisse"}),c.jsxs("p",{className:"text-gray-500",children:['Keine Rezepte fr "',l,'" gefunden.']})]}):c.jsxs("div",{className:"bg-slate-800/80 rounded-2xl p-12 text-center shadow-lg",children:[c.jsx("div",{className:"text-6xl mb-4",children:""}),c.jsx("h3",{className:"text-2xl font-bold text-gray-200 mb-2",children:"Noch keine Rezepte"}),c.jsx("p",{className:"text-gray-500",children:"Klicke auf den Button oben, um dein erstes Rezept zu speichern!"})]})]})},MA=t=>{const[e,n]=B.useState([]),[r,s]=B.useState(!0),[i,o]=B.useState(null);return B.useEffect(()=>{if(!t){s(!1);return}const g=`households/${t}/weekPlanner`,w=Wr(Je,g),S=of(w,R=>{const C=[];R.forEach(T=>{C.push({date:T.id,meals:T.data().meals||[]})}),C.sort((T,y)=>T.date.localeCompare(y.date)),n(C),s(!1),o(null)},R=>{console.error("Error fetching week planner:",R),o("Fehler beim Laden des Wochenplaners"),s(!1)});return()=>S()},[t]),{weekPlan:e,isLoading:r,error:i,addMealToDay:async(g,w,S,R)=>{if(t)try{const C=`households/${t}/weekPlanner`,T=Qt(Je,C,g),y=e.find(D=>D.date===g),b=y?[...y.meals]:[];b.push({recipeId:w,recipeTitle:S,mealType:R}),await Pg(T,{meals:b,updatedAt:Bs()})}catch(C){throw console.error("Error adding meal:",C),o("Fehler beim Hinzufgen der Mahlzeit"),C}},removeMealFromDay:async(g,w)=>{if(t)try{const S=e.find(y=>y.date===g);if(!S)return;const R=S.meals.filter((y,b)=>b!==w),C=`households/${t}/weekPlanner`,T=Qt(Je,C,g);R.length===0?await Mr(T):await Pg(T,{meals:R,updatedAt:Bs()})}catch(S){throw console.error("Error removing meal:",S),o("Fehler beim Entfernen der Mahlzeit"),S}},clearDay:async g=>{if(t)try{const w=`households/${t}/weekPlanner`,S=Qt(Je,w,g);await Mr(S)}catch(w){throw console.error("Error clearing day:",w),o("Fehler beim Leeren des Tages"),w}},clearWeekPlan:async()=>{if(t)try{const g=`households/${t}/weekPlanner`,w=e.map(S=>Mr(Qt(Je,g,S.date)));await Promise.all(w)}catch(g){throw console.error("Error clearing week plan:",g),o("Fehler beim Leeren des Wochenplaners"),g}},getMealsForDate:g=>{const w=e.find(S=>S.date===g);return(w==null?void 0:w.meals)||[]}}},OA=t=>{const e=MA(t),{recipes:n}=ff(),r={monday:{meals:[]},tuesday:{meals:[]},wednesday:{meals:[]},thursday:{meals:[]},friday:{meals:[]},saturday:{meals:[]},sunday:{meals:[]}},s=m=>{const p=new Date,g=p.getDay(),R={sunday:0,monday:1,tuesday:2,wednesday:3,thursday:4,friday:5,saturday:6}[m]-g,C=new Date(p);return C.setDate(p.getDate()+R),C.toISOString().split("T")[0]};e.weekPlan.forEach(m=>{const g=new Date(m.date).getDay(),S=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"][g];r[S].meals=m.meals.map(R=>({recipeId:R.recipeId,mealType:R.mealType}))});const i={weekStart:new Date().toISOString(),days:r},o=async(m,p)=>{const g=s(m),w=n.find(S=>S.id===p.recipeId);if(!w){console.error("Recipe not found:",p.recipeId);return}await e.addMealToDay(g,p.recipeId,w.title,p.mealType)},l=async(m,p,g)=>{const w=s(m),R=e.getMealsForDate(w).findIndex(C=>C.recipeId===p&&C.mealType===g);R!==-1&&await e.removeMealFromDay(w,R)},u=async m=>{const p=s(m);await e.clearDay(p)},d=async()=>{await e.clearWeekPlan()};return{weekPlan:i,isLoading:e.isLoading,error:e.error,addMealToDay:o,removeMealFromDay:l,clearDay:u,clearWeek:d}},rc=[{key:"monday",label:"Montag",short:"Mo"},{key:"tuesday",label:"Dienstag",short:"Di"},{key:"wednesday",label:"Mittwoch",short:"Mi"},{key:"thursday",label:"Donnerstag",short:"Do"},{key:"friday",label:"Freitag",short:"Fr"},{key:"saturday",label:"Samstag",short:"Sa"},{key:"sunday",label:"Sonntag",short:"So"}],Ug=[{key:"breakfast",label:"Frhstck",emoji:""},{key:"lunch",label:"Mittagessen",emoji:""},{key:"dinner",label:"Abendessen",emoji:""},{key:"snack",label:"Snack",emoji:""}],FA=()=>{var T;const{currentHousehold:t}=Dl(),{weekPlan:e,addMealToDay:n,removeMealFromDay:r,clearDay:s,clearWeek:i,isLoading:o}=OA(t==null?void 0:t.id),{recipes:l}=ff(),[u,d]=B.useState(null),[m,p]=B.useState("lunch"),g=y=>{u&&(n(u,{recipeId:y,mealType:m}),d(null))},w=(y,b,D)=>{r(y,b,D)},S=y=>{var b;confirm(`Mchtest du alle Mahlzeiten fr ${(b=rc.find(D=>D.key===y))==null?void 0:b.label} lschen?`)&&s(y)},R=()=>{confirm("Mchtest du den gesamten Wochenplan lschen?")&&i()},C=y=>l.find(b=>b.id===y);return c.jsxs("div",{className:"max-w-7xl mx-auto",children:[c.jsxs("div",{className:"text-center mb-8",children:[c.jsxs("h2",{className:"text-4xl font-bold text-gray-100 mb-2 flex items-center justify-center gap-3",children:[c.jsx(rv,{className:"h-10 w-10 text-accent-500"}),"Wochenplaner"]}),c.jsx("p",{className:"text-gray-400 mb-4",children:o?" Synchronisiere mit der Cloud...":"Plane deine Mahlzeiten fr die Woche"}),c.jsx("button",{onClick:R,"data-test-id":"clear-week","aria-label":"Wochenplan lschen",className:"text-sm text-red-500 hover:text-red-600 font-medium transition-colors",children:"Wochenplan zurcksetzen"})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-7 gap-4 mb-8",children:rc.map(y=>{const b=e.days[y.key].meals,D=Ug.map(M=>({...M,meals:b.filter(O=>O.mealType===M.key)}));return c.jsxs("div",{className:"bg-slate-700/50 backdrop-blur-sm rounded-2xl p-4 shadow-lg border-2 border-dark-600/50",children:[c.jsxs("div",{className:"flex items-center justify-between mb-3 pb-2 border-b-2 border-slate-600",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"font-bold text-gray-100 hidden lg:block",children:y.label}),c.jsx("h3",{className:"font-bold text-gray-100 lg:hidden",children:y.short})]}),c.jsx("button",{onClick:()=>S(y.key),"data-test-id":`clear-day-${y.key}`,"aria-label":`${y.label} lschen`,className:"p-1 hover:bg-red-600/20 rounded-lg transition-colors text-red-400",children:c.jsx(js,{className:"h-4 w-4"})})]}),c.jsx("div",{className:"space-y-3",children:D.map(M=>c.jsxs("div",{children:[c.jsxs("div",{className:"text-xs font-medium text-gray-400 mb-1 flex items-center gap-1",children:[c.jsx("span",{children:M.emoji}),c.jsx("span",{className:"hidden lg:inline",children:M.label})]}),c.jsx("div",{className:"space-y-1",children:M.meals.map((O,E)=>{const _=C(O.recipeId);return _?c.jsxs("div",{className:"bg-gradient-to-r from-primary-600/30 to-secondary-600/30 rounded-lg p-2 text-xs group relative border border-primary-500/20",children:[c.jsx("p",{className:"font-medium text-gray-100 pr-6 line-clamp-2",children:_.title}),c.jsx("button",{onClick:()=>w(y.key,O.recipeId,O.mealType),"data-test-id":`remove-meal-${y.key}-${O.recipeId}`,"aria-label":`${_.title} entfernen`,className:"absolute top-1 right-1 p-1 bg-slate-800 rounded opacity-0 group-hover:opacity-100 transition-opacity hover:bg-red-600/20 text-red-400",children:c.jsx(js,{className:"h-3 w-3"})})]},`${O.recipeId}-${E}`):null})})]},M.key))}),c.jsxs("button",{onClick:()=>d(y.key),"data-test-id":`add-meal-${y.key}`,"aria-label":`Mahlzeit zu ${y.label} hinzufgen`,className:ve("w-full mt-3 py-2 rounded-lg font-medium text-sm transition-all duration-200 flex items-center justify-center gap-2",u===y.key?"bg-accent-500 text-white shadow-lg":"bg-slate-700 text-gray-300 hover:bg-accent-600/20 hover:text-accent-400"),children:[c.jsx(lo,{className:"h-4 w-4"}),c.jsx("span",{className:"hidden lg:inline",children:"Hinzufgen"})]})]},y.key)})}),u&&c.jsxs("div",{className:"bg-slate-800/80 backdrop-blur-sm rounded-2xl p-6 shadow-2xl border-2 border-accent-500/30 autumn-glow-gold",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsxs("h3",{className:"text-xl font-bold text-gray-100 flex items-center gap-2",children:[c.jsx(XE,{className:"h-6 w-6 text-accent-500"}),"Rezept fr ",(T=rc.find(y=>y.key===u))==null?void 0:T.label," auswhlen"]}),c.jsx("button",{onClick:()=>d(null),"data-test-id":"close-recipe-selection","aria-label":"Rezeptauswahl schlieen",className:"text-gray-400 hover:text-gray-200",children:""})]}),c.jsxs("div",{className:"mb-4",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-200 mb-2",children:"Mahlzeit"}),c.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:Ug.map(y=>c.jsxs("button",{onClick:()=>p(y.key),"data-test-id":`select-meal-type-${y.key}`,"aria-label":`${y.label} auswhlen`,className:ve("py-2 px-3 rounded-lg font-medium text-sm transition-all duration-200",m===y.key?"bg-accent-500 text-white shadow-md":"bg-slate-700 text-gray-300 hover:bg-accent-600/20 hover:text-accent-400"),children:[c.jsx("span",{className:"mr-1",children:y.emoji}),y.label]},y.key))})]}),l.length>0?c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3 max-h-96 overflow-y-auto",children:l.map(y=>c.jsxs("button",{onClick:()=>g(y.id),"data-test-id":`select-recipe-${y.id}`,"aria-label":`${y.title} hinzufgen`,className:"bg-slate-700/80 hover:bg-slate-600/80 rounded-xl p-4 text-left transition-all duration-200 hover:shadow-lg hover:scale-105 border-2 border-slate-600/50 hover:border-accent-500/50",children:[c.jsx("p",{className:"font-bold text-gray-100 mb-1 line-clamp-2",children:y.title}),y.rating&&c.jsxs("p",{className:"text-xs text-gray-400",children:[" ",y.rating,"/5"]})]},y.id))}):c.jsx("div",{className:"text-center py-8 text-gray-400",children:c.jsx("p",{children:"Keine Rezepte vorhanden. Fge zuerst Rezepte hinzu!"})})]})]})},UA={produce:{label:"Obst & Gemse",emoji:""},bakery:{label:"Brot & Backwaren",emoji:""},meat:{label:"Fleisch & Wurst",emoji:""},deli:{label:"Aufschnitt",emoji:""},dairy:{label:"Kse & Milchprodukte",emoji:""},beverages:{label:"Getrnke",emoji:""},pantry:{label:"Konserven & Vorrte",emoji:""},snacks:{label:"Sigkeiten & Snacks",emoji:""},frozen:{label:"Tiefkhlware",emoji:""},household:{label:"Haushalt & Sonstiges",emoji:""}},zA=["produce","bakery","meat","deli","dairy","beverages","pantry","snacks","frozen","household"],zg=t=>{if(t.length===0)return" Einkaufsliste ist leer";const e=t.filter(r=>!r.checked);if(e.length===0)return" Alle Artikel wurden bereits gekauft!";let n=` *Einkaufsliste*

`;return zA.forEach(r=>{const s=e.filter(i=>i.category===r);if(s.length>0){const i=UA[r];n+=`${i.emoji} *${i.label}*
`,s.forEach(o=>{const l=o.quantity?` (${o.quantity})`:"";n+=`   ${o.name}${l}
`}),n+=`
`}}),n+=` Insgesamt: ${e.length} ${e.length===1,"Artikel"}`,n},Bg=[{key:"produce",label:"Obst & Gemse",emoji:""},{key:"bakery",label:"Brot & Backwaren",emoji:""},{key:"meat",label:"Fleisch & Wurst",emoji:""},{key:"deli",label:"Aufschnitt",emoji:""},{key:"dairy",label:"Kse & Milchprodukte",emoji:""},{key:"beverages",label:"Getrnke",emoji:""},{key:"pantry",label:"Konserven & Vorrte",emoji:""},{key:"snacks",label:"Sigkeiten & Snacks",emoji:""},{key:"frozen",label:"Tiefkhlware",emoji:""},{key:"household",label:"Haushalt & Sonstiges",emoji:""}],BA=()=>{const{currentHousehold:t}=Dl(),{items:e,addItem:n,toggleItem:r,removeItem:s,clearCheckedItems:i,clearAllItems:o,isLoading:l}=Uw(t==null?void 0:t.id),[u,d]=B.useState(!1),[m,p]=B.useState(""),[g,w]=B.useState(""),[S,R]=B.useState("produce"),C=x=>{x.preventDefault(),m.trim()&&(n(m,S,g),p(""),w(""),d(!1))},T=x=>{p(x.target.value)},y=x=>{w(x.target.value)},b=x=>{R(x.target.value)},D=x=>{r(x)},M=x=>{s(x)},O=()=>{confirm("Mchtest du alle abgehakten Artikel lschen?")&&i()},E=()=>{confirm("Mchtest du die gesamte Einkaufsliste lschen?")&&o()},_=async()=>{const x=zg(e);try{await navigator.clipboard.writeText(x),alert(" Einkaufsliste in Zwischenablage kopiert!")}catch{const me=document.createElement("textarea");me.value=x,document.body.appendChild(me),me.select(),document.execCommand("copy"),document.body.removeChild(me),alert(" Einkaufsliste kopiert!")}},k=()=>{const x=zg(e),me=`https://wa.me/?text=${encodeURIComponent(x)}`;window.open(me,"_blank")},I=Bg.map(x=>({...x,items:e.filter(Z=>Z.category===x.key)})),A=e.filter(x=>x.checked).length,N=e.length;return c.jsxs("div",{className:"max-w-4xl mx-auto",children:[c.jsxs("div",{className:"text-center mb-8",children:[c.jsxs("h2",{className:"text-4xl font-bold text-gray-100 mb-2 flex items-center justify-center gap-3",children:[c.jsx(yd,{className:"h-10 w-10 text-primary-500"}),"Einkaufsliste"]}),c.jsx("p",{className:"text-gray-300",children:l?" Synchronisiere mit der Cloud...":N===0?"Fge Artikel zu deiner Einkaufsliste hinzu":c.jsxs(c.Fragment,{children:[A," von ",N," ",N===1?"Artikel":"Artikeln"," gekauft"]})})]}),u?c.jsxs("div",{className:"bg-slate-800/80 backdrop-blur-sm rounded-2xl p-6 shadow-xl border-2 border-primary-500/30 autumn-glow mb-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-100",children:"Neuer Artikel"}),c.jsx("button",{onClick:()=>d(!1),"data-test-id":"close-add-item","aria-label":"Formular schlieen",className:"p-2 hover:bg-slate-700 rounded-full transition-colors",children:c.jsx(hn,{className:"h-6 w-6 text-gray-300"})})]}),c.jsxs("form",{onSubmit:C,className:"space-y-4",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"item-name",className:"block text-sm font-medium text-gray-200 mb-1",children:"Artikel *"}),c.jsx("input",{id:"item-name",type:"text",value:m,onChange:T,"data-test-id":"item-name-input","aria-label":"Artikel-Name eingeben",placeholder:"z.B. Tomaten",className:"w-full px-4 py-2 border-2 border-gray-600 rounded-lg focus:border-primary-500 focus:outline-none transition-colors bg-slate-700 text-gray-100 placeholder-gray-400",required:!0,autoFocus:!0})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"item-quantity",className:"block text-sm font-medium text-gray-200 mb-1",children:"Menge (optional)"}),c.jsx("input",{id:"item-quantity",type:"text",value:g,onChange:y,"data-test-id":"item-quantity-input","aria-label":"Menge eingeben",placeholder:"z.B. 500g, 3 Stck",className:"w-full px-4 py-2 border-2 border-gray-600 rounded-lg focus:border-primary-500 focus:outline-none transition-colors bg-slate-700 text-gray-100 placeholder-gray-400"})]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"item-category",className:"block text-sm font-medium text-gray-200 mb-1",children:"Kategorie *"}),c.jsx("select",{id:"item-category",value:S,onChange:b,"data-test-id":"item-category-select","aria-label":"Kategorie auswhlen",className:"w-full px-4 py-2 border-2 border-gray-600 rounded-lg focus:border-primary-500 focus:outline-none transition-colors bg-slate-700 text-gray-100",children:Bg.map(x=>c.jsxs("option",{value:x.key,children:[x.emoji," ",x.label]},x.key))})]}),c.jsx("button",{type:"submit","data-test-id":"submit-item","aria-label":"Artikel zur Liste hinzufgen",className:"w-full py-3 rounded-lg font-bold text-white transition-all duration-200 bg-gradient-to-r from-primary-500 to-secondary-500 hover:shadow-lg hover:scale-105",children:"Zur Liste hinzufgen"})]})]}):c.jsxs("button",{onClick:()=>d(!0),"data-test-id":"open-add-item","aria-label":"Artikel hinzufgen",className:"w-full bg-gradient-to-r from-primary-500 to-secondary-500 text-white rounded-2xl p-4 shadow-lg hover:shadow-xl transition-all duration-200 hover:scale-105 flex items-center justify-center gap-3 font-bold text-lg mb-6",children:[c.jsx(lo,{className:"h-6 w-6"}),"Artikel hinzufgen"]}),e.length>0&&c.jsxs("div",{className:"space-y-3 mb-6",children:[c.jsxs("div",{className:"flex gap-3",children:[c.jsxs("button",{onClick:_,"data-test-id":"copy-shopping-list","aria-label":"Einkaufsliste kopieren",className:"flex-1 py-3 px-4 bg-gradient-to-r from-primary-500 to-secondary-500 text-white rounded-lg font-medium hover:shadow-lg transition-all duration-200 hover:scale-105 flex items-center justify-center gap-2",children:[c.jsx(e2,{className:"h-5 w-5"}),"Kopieren"]}),c.jsxs("button",{onClick:k,"data-test-id":"share-whatsapp","aria-label":"Per WhatsApp teilen",className:"flex-1 py-3 px-4 bg-gradient-to-r from-green-500 to-green-600 text-white rounded-lg font-medium hover:shadow-lg transition-all duration-200 hover:scale-105 flex items-center justify-center gap-2",children:[c.jsx(c2,{className:"h-5 w-5"}),"WhatsApp"]})]}),c.jsxs("div",{className:"flex gap-3",children:[A>0&&c.jsxs("button",{onClick:O,"data-test-id":"clear-checked","aria-label":"Abgehakte Artikel lschen",className:"flex-1 py-2 px-4 bg-accent-100 text-accent-700 rounded-lg font-medium hover:bg-accent-200 transition-colors text-sm",children:["Abgehakte lschen (",A,")"]}),c.jsx("button",{onClick:E,"data-test-id":"clear-all","aria-label":"Alle Artikel lschen",className:"py-2 px-4 bg-red-100 text-red-600 rounded-lg font-medium hover:bg-red-200 transition-colors text-sm",children:"Alle lschen"})]})]}),e.length>0?c.jsx("div",{className:"space-y-4",children:I.map(x=>x.items.length===0?null:c.jsxs("div",{className:"bg-slate-700/50 backdrop-blur-sm rounded-2xl p-5 shadow-lg border-2 border-dark-600/50",children:[c.jsxs("h3",{className:"font-bold text-gray-100 mb-3 flex items-center gap-2 text-lg",children:[c.jsx("span",{className:"text-2xl",children:x.emoji}),x.label,c.jsxs("span",{className:"text-sm text-gray-300 font-normal ml-auto",children:[x.items.filter(Z=>Z.checked).length,"/",x.items.length]})]}),c.jsx("div",{className:"space-y-2",children:x.items.map(Z=>c.jsxs("div",{className:ve("flex items-center gap-3 p-3 rounded-lg transition-all duration-200 group",Z.checked?"bg-slate-600/30":"bg-slate-600/50 hover:bg-slate-500/50"),children:[c.jsx("button",{onClick:()=>D(Z.id),"data-test-id":`toggle-item-${Z.id}`,"aria-label":Z.checked?"Als nicht gekauft markieren":"Als gekauft markieren",className:"flex-shrink-0 transition-transform hover:scale-110",children:Z.checked?c.jsx(QE,{className:"h-6 w-6 text-accent-500"}):c.jsx(ZE,{className:"h-6 w-6 text-gray-300"})}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("p",{className:ve("font-medium",Z.checked?"line-through text-gray-400":"text-white"),children:Z.name}),Z.quantity&&c.jsx("p",{className:ve("text-sm",Z.checked?"text-gray-400":"text-gray-200"),children:Z.quantity})]}),c.jsx("button",{onClick:()=>M(Z.id),"data-test-id":`delete-item-${Z.id}`,"aria-label":`${Z.name} lschen`,className:"flex-shrink-0 p-2 rounded-lg opacity-0 group-hover:opacity-100 transition-opacity hover:bg-red-100 text-red-500",children:c.jsx(js,{className:"h-4 w-4"})})]},Z.id))})]},x.key))}):c.jsxs("div",{className:"bg-slate-800/80 backdrop-blur-sm rounded-2xl p-12 text-center shadow-lg border border-dark-600/50",children:[c.jsx("div",{className:"text-6xl mb-4",children:""}),c.jsx("h3",{className:"text-2xl font-bold text-gray-200 mb-2",children:"Deine Einkaufsliste ist leer"}),c.jsx("p",{className:"text-gray-300",children:"Fge Artikel hinzu und sie werden nach Supermarkt-Kategorien sortiert!"})]})]})},$A=()=>{const{households:t,setCurrentHousehold:e,hasSelectedHousehold:n}=Dl(),[r,s]=B.useState(null);if(n)return null;const i=l=>{s(l)},o=()=>{r&&e(r)};return c.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center p-4 z-50 overflow-y-auto",children:c.jsxs("div",{className:"bg-slate-800 rounded-2xl p-6 md:p-8 max-w-2xl w-full shadow-2xl border-2 border-primary-500/30 my-4 max-h-[90vh] overflow-y-auto",children:[c.jsxs("div",{className:"text-center mb-4 md:mb-8",children:[c.jsx("div",{className:"flex justify-center mb-3",children:c.jsx("div",{className:"p-3 bg-primary-600/20 rounded-full",children:c.jsx(ov,{className:"h-8 w-8 md:h-12 md:w-12 text-primary-500"})})}),c.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-gray-100 mb-2",children:"Willkommen bei FoodFlash! "}),c.jsx("p",{className:"text-gray-300 text-base md:text-lg",children:"Welcher Haushalt bist du?"}),c.jsxs("p",{className:"text-gray-400 text-xs md:text-sm mt-2",children:["Jeder Haushalt hat seine eigene Einkaufsliste und Wochenplanung.",c.jsx("br",{className:"hidden md:block"}),c.jsx("span",{className:"md:inline",children:" "}),"Rezepte werden mit allen geteilt! "]})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 mb-4",children:t.map(l=>c.jsxs("button",{onClick:()=>i(l),"data-test-id":`select-${l.id}`,"aria-label":`${l.name} auswhlen`,className:ve("relative p-4 md:p-6 rounded-xl border-2 transition-all duration-200","hover:scale-105 hover:shadow-xl",(r==null?void 0:r.id)===l.id?"border-primary-500 bg-primary-600/20":"border-gray-600 bg-slate-700/50 hover:border-primary-500/50"),children:[(r==null?void 0:r.id)===l.id&&c.jsx("div",{className:"absolute top-2 right-2 bg-primary-500 text-white p-1 rounded-full",children:c.jsx(YE,{className:"h-4 w-4"})}),c.jsx("div",{className:"text-4xl md:text-5xl mb-2 md:mb-3",children:l.icon}),c.jsx("h3",{className:"text-base md:text-lg font-bold text-gray-100 mb-1",children:l.name}),c.jsx("p",{className:"text-xs text-gray-400",children:"Eigene Listen & Planung"})]},l.id))}),c.jsx("div",{className:"bg-blue-900/30 border border-blue-500/30 rounded-lg p-3 mb-4",children:c.jsxs("p",{className:"text-xs md:text-sm text-blue-200",children:[" ",c.jsx("strong",{children:"Tipp:"})," Du kannst den Haushalt spter jederzeit wechseln!"]})}),c.jsx("button",{onClick:o,disabled:!r,"data-test-id":"confirm-household","aria-label":"Haushalt besttigen",className:ve("w-full py-3 md:py-4 rounded-xl font-bold text-base md:text-lg transition-all duration-200",r?"bg-gradient-to-r from-primary-500 to-secondary-500 text-white hover:shadow-xl hover:scale-105":"bg-gray-700 text-gray-500 cursor-not-allowed"),children:r?`${r.icon} ${r.name} auswhlen`:"Bitte whle einen Haushalt"}),c.jsx("p",{className:"text-center text-xs text-gray-500 mt-3",children:"Diese Einstellung wird auf deinem Gert gespeichert"})]})})},$g="foodflash_migrated_to_firebase",HA=async()=>{if(localStorage.getItem($g)){console.log(" Daten bereits zu Firebase migriert");return}console.log(" Starte Migration von localStorage zu Firebase...");try{await qA(),await WA(),localStorage.setItem($g,"true"),console.log(" Migration erfolgreich abgeschlossen!")}catch(t){throw console.error(" Fehler bei Migration:",t),t}};async function qA(){const t=localStorage.getItem("foodflash_recipes");if(!t){console.log(" Keine Rezepte in localStorage gefunden");return}const e=JSON.parse(t);if(e.length===0){console.log(" Keine Rezepte zum Migrieren");return}const n=Wr(Je,"recipes");if((await fw(n)).size>0){console.log(" Firebase hat bereits Rezepte, berspringe Migration");return}console.log(` Migriere ${e.length} Rezepte...`);for(const s of e){const{id:i,createdAt:o,...l}=s;await Xl(n,{...l,ingredients:s.ingredients||[],comments:s.comments||[],createdAt:Bs()})}console.log(` ${e.length} Rezepte migriert`)}async function WA(){const t=localStorage.getItem("foodflash_shopping");if(!t){console.log(" Keine Einkaufsliste in localStorage gefunden");return}const e=JSON.parse(t);if(e.length===0){console.log(" Keine Einkaufsartikel zum Migrieren");return}const n=Wr(Je,"shoppingList");if((await fw(n)).size>0){console.log(" Firebase hat bereits Einkaufsliste, berspringe Migration");return}console.log(` Migriere ${e.length} Einkaufsartikel...`);for(const s of e){const{id:i,...o}=s;await Xl(n,{...o,addedAt:Bs()})}console.log(` ${e.length} Artikel migriert`)}function GA(){const[t,e]=B.useState("home"),[n,r]=B.useState(null);B.useEffect(()=>{(async()=>{try{await HA()}catch(l){console.error("Migration fehlgeschlagen:",l)}})()},[]);const s=o=>{r(o),e("recipes")},i=()=>{r(null)};return c.jsx(m2,{children:c.jsxs("div",{className:"min-h-screen",children:[c.jsx($A,{}),c.jsx(p2,{activeTab:t,setActiveTab:e}),c.jsxs("main",{className:"container mx-auto px-4 py-8",children:[t==="home"&&c.jsx(g2,{onPlatformClick:s}),t==="recipes"&&c.jsx(LA,{platformFilter:n,onClearFilter:i}),t==="planner"&&c.jsx(FA,{}),t==="shopping"&&c.jsx(BA,{})]})]})})}sc.createRoot(document.getElementById("root")).render(c.jsx(j1.StrictMode,{children:c.jsx(GA,{})}));
