(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function k1(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Jg={exports:{}},El={},Zg={exports:{}},ie={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xo=Symbol.for("react.element"),S1=Symbol.for("react.portal"),I1=Symbol.for("react.fragment"),A1=Symbol.for("react.strict_mode"),R1=Symbol.for("react.profiler"),N1=Symbol.for("react.provider"),C1=Symbol.for("react.context"),P1=Symbol.for("react.forward_ref"),D1=Symbol.for("react.suspense"),j1=Symbol.for("react.memo"),V1=Symbol.for("react.lazy"),vm=Symbol.iterator;function L1(t){return t===null||typeof t!="object"?null:(t=vm&&t[vm]||t["@@iterator"],typeof t=="function"?t:null)}var ey={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ty=Object.assign,ny={};function qs(t,e,n){this.props=t,this.context=e,this.refs=ny,this.updater=n||ey}qs.prototype.isReactComponent={};qs.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};qs.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function ry(){}ry.prototype=qs.prototype;function Nh(t,e,n){this.props=t,this.context=e,this.refs=ny,this.updater=n||ey}var Ch=Nh.prototype=new ry;Ch.constructor=Nh;ty(Ch,qs.prototype);Ch.isPureReactComponent=!0;var _m=Array.isArray,sy=Object.prototype.hasOwnProperty,Ph={current:null},iy={key:!0,ref:!0,__self:!0,__source:!0};function oy(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)sy.call(e,r)&&!iy.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var u=Array(l),d=0;d<l;d++)u[d]=arguments[d+2];s.children=u}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:xo,type:t,key:i,ref:o,props:s,_owner:Ph.current}}function O1(t,e){return{$$typeof:xo,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Dh(t){return typeof t=="object"&&t!==null&&t.$$typeof===xo}function M1(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var wm=/\/+/g;function Su(t,e){return typeof t=="object"&&t!==null&&t.key!=null?M1(""+t.key):e.toString(36)}function wa(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case xo:case S1:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Su(o,0):r,_m(s)?(n="",t!=null&&(n=t.replace(wm,"$&/")+"/"),wa(s,e,n,"",function(d){return d})):s!=null&&(Dh(s)&&(s=O1(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(wm,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",_m(t))for(var l=0;l<t.length;l++){i=t[l];var u=r+Su(i,l);o+=wa(i,e,n,u,s)}else if(u=L1(t),typeof u=="function")for(t=u.call(t),l=0;!(i=t.next()).done;)i=i.value,u=r+Su(i,l++),o+=wa(i,e,n,u,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Yo(t,e,n){if(t==null)return t;var r=[],s=0;return wa(t,r,"","",function(i){return e.call(n,i,s++)}),r}function F1(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var yt={current:null},xa={transition:null},z1={ReactCurrentDispatcher:yt,ReactCurrentBatchConfig:xa,ReactCurrentOwner:Ph};function ay(){throw Error("act(...) is not supported in production builds of React.")}ie.Children={map:Yo,forEach:function(t,e,n){Yo(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Yo(t,function(){e++}),e},toArray:function(t){return Yo(t,function(e){return e})||[]},only:function(t){if(!Dh(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ie.Component=qs;ie.Fragment=I1;ie.Profiler=R1;ie.PureComponent=Nh;ie.StrictMode=A1;ie.Suspense=D1;ie.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=z1;ie.act=ay;ie.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=ty({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Ph.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)sy.call(e,u)&&!iy.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var d=0;d<u;d++)l[d]=arguments[d+2];r.children=l}return{$$typeof:xo,type:t.type,key:s,ref:i,props:r,_owner:o}};ie.createContext=function(t){return t={$$typeof:C1,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:N1,_context:t},t.Consumer=t};ie.createElement=oy;ie.createFactory=function(t){var e=oy.bind(null,t);return e.type=t,e};ie.createRef=function(){return{current:null}};ie.forwardRef=function(t){return{$$typeof:P1,render:t}};ie.isValidElement=Dh;ie.lazy=function(t){return{$$typeof:V1,_payload:{_status:-1,_result:t},_init:F1}};ie.memo=function(t,e){return{$$typeof:j1,type:t,compare:e===void 0?null:e}};ie.startTransition=function(t){var e=xa.transition;xa.transition={};try{t()}finally{xa.transition=e}};ie.unstable_act=ay;ie.useCallback=function(t,e){return yt.current.useCallback(t,e)};ie.useContext=function(t){return yt.current.useContext(t)};ie.useDebugValue=function(){};ie.useDeferredValue=function(t){return yt.current.useDeferredValue(t)};ie.useEffect=function(t,e){return yt.current.useEffect(t,e)};ie.useId=function(){return yt.current.useId()};ie.useImperativeHandle=function(t,e,n){return yt.current.useImperativeHandle(t,e,n)};ie.useInsertionEffect=function(t,e){return yt.current.useInsertionEffect(t,e)};ie.useLayoutEffect=function(t,e){return yt.current.useLayoutEffect(t,e)};ie.useMemo=function(t,e){return yt.current.useMemo(t,e)};ie.useReducer=function(t,e,n){return yt.current.useReducer(t,e,n)};ie.useRef=function(t){return yt.current.useRef(t)};ie.useState=function(t){return yt.current.useState(t)};ie.useSyncExternalStore=function(t,e,n){return yt.current.useSyncExternalStore(t,e,n)};ie.useTransition=function(){return yt.current.useTransition()};ie.version="18.3.1";Zg.exports=ie;var B=Zg.exports;const U1=k1(B);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var B1=B,$1=Symbol.for("react.element"),H1=Symbol.for("react.fragment"),q1=Object.prototype.hasOwnProperty,W1=B1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,G1={key:!0,ref:!0,__self:!0,__source:!0};function ly(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)q1.call(e,r)&&!G1.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:$1,type:t,key:i,ref:o,props:s,_owner:W1.current}}El.Fragment=H1;El.jsx=ly;El.jsxs=ly;Jg.exports=El;var c=Jg.exports,cc={},uy={exports:{}},Lt={},cy={exports:{}},hy={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(z,Q){var q=z.length;z.push(Q);e:for(;0<q;){var K=q-1>>>1,J=z[K];if(0<s(J,Q))z[K]=Q,z[q]=J,q=K;else break e}}function n(z){return z.length===0?null:z[0]}function r(z){if(z.length===0)return null;var Q=z[0],q=z.pop();if(q!==Q){z[0]=q;e:for(var K=0,J=z.length,W=J>>>1;K<W;){var se=2*(K+1)-1,Le=z[se],de=se+1,_t=z[de];if(0>s(Le,q))de<J&&0>s(_t,Le)?(z[K]=_t,z[de]=q,K=de):(z[K]=Le,z[se]=q,K=se);else if(de<J&&0>s(_t,q))z[K]=_t,z[de]=q,K=de;else break e}}return Q}function s(z,Q){var q=z.sortIndex-Q.sortIndex;return q!==0?q:z.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var u=[],d=[],m=1,p=null,g=3,w=!1,I=!1,R=!1,C=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function k(z){for(var Q=n(d);Q!==null;){if(Q.callback===null)r(d);else if(Q.startTime<=z)r(d),Q.sortIndex=Q.expirationTime,e(u,Q);else break;Q=n(d)}}function D(z){if(R=!1,k(z),!I)if(n(u)!==null)I=!0,Ue(O);else{var Q=n(d);Q!==null&&ne(D,Q.startTime-z)}}function O(z,Q){I=!1,R&&(R=!1,T(_),_=-1),w=!0;var q=g;try{for(k(Q),p=n(u);p!==null&&(!(p.expirationTime>Q)||z&&!A());){var K=p.callback;if(typeof K=="function"){p.callback=null,g=p.priorityLevel;var J=K(p.expirationTime<=Q);Q=t.unstable_now(),typeof J=="function"?p.callback=J:p===n(u)&&r(u),k(Q)}else r(u);p=n(u)}if(p!==null)var W=!0;else{var se=n(d);se!==null&&ne(D,se.startTime-Q),W=!1}return W}finally{p=null,g=q,w=!1}}var M=!1,E=null,_=-1,b=5,S=-1;function A(){return!(t.unstable_now()-S<b)}function N(){if(E!==null){var z=t.unstable_now();S=z;var Q=!0;try{Q=E(!0,z)}finally{Q?x():(M=!1,E=null)}}else M=!1}var x;if(typeof y=="function")x=function(){y(N)};else if(typeof MessageChannel<"u"){var Z=new MessageChannel,ye=Z.port2;Z.port1.onmessage=N,x=function(){ye.postMessage(null)}}else x=function(){C(N,0)};function Ue(z){E=z,M||(M=!0,x())}function ne(z,Q){_=C(function(){z(t.unstable_now())},Q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(z){z.callback=null},t.unstable_continueExecution=function(){I||w||(I=!0,Ue(O))},t.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<z?Math.floor(1e3/z):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(z){switch(g){case 1:case 2:case 3:var Q=3;break;default:Q=g}var q=g;g=Q;try{return z()}finally{g=q}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(z,Q){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var q=g;g=z;try{return Q()}finally{g=q}},t.unstable_scheduleCallback=function(z,Q,q){var K=t.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?K+q:K):q=K,z){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=q+J,z={id:m++,callback:Q,priorityLevel:z,startTime:q,expirationTime:J,sortIndex:-1},q>K?(z.sortIndex=q,e(d,z),n(u)===null&&z===n(d)&&(R?(T(_),_=-1):R=!0,ne(D,q-K))):(z.sortIndex=J,e(u,z),I||w||(I=!0,Ue(O))),z},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(z){var Q=g;return function(){var q=g;g=Q;try{return z.apply(this,arguments)}finally{g=q}}}})(hy);cy.exports=hy;var K1=cy.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Q1=B,Vt=K1;function F(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var dy=new Set,Gi={};function Yr(t,e){Ns(t,e),Ns(t+"Capture",e)}function Ns(t,e){for(Gi[t]=e,t=0;t<e.length;t++)dy.add(e[t])}var Tn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),hc=Object.prototype.hasOwnProperty,Y1=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,xm={},Em={};function X1(t){return hc.call(Em,t)?!0:hc.call(xm,t)?!1:Y1.test(t)?Em[t]=!0:(xm[t]=!0,!1)}function J1(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Z1(t,e,n,r){if(e===null||typeof e>"u"||J1(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function vt(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var nt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){nt[t]=new vt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];nt[e]=new vt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){nt[t]=new vt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){nt[t]=new vt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){nt[t]=new vt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){nt[t]=new vt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){nt[t]=new vt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){nt[t]=new vt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){nt[t]=new vt(t,5,!1,t.toLowerCase(),null,!1,!1)});var jh=/[\-:]([a-z])/g;function Vh(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(jh,Vh);nt[e]=new vt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(jh,Vh);nt[e]=new vt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(jh,Vh);nt[e]=new vt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){nt[t]=new vt(t,1,!1,t.toLowerCase(),null,!1,!1)});nt.xlinkHref=new vt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){nt[t]=new vt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Lh(t,e,n,r){var s=nt.hasOwnProperty(e)?nt[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Z1(e,n,s,r)&&(n=null),r||s===null?X1(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Cn=Q1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Xo=Symbol.for("react.element"),cs=Symbol.for("react.portal"),hs=Symbol.for("react.fragment"),Oh=Symbol.for("react.strict_mode"),dc=Symbol.for("react.profiler"),fy=Symbol.for("react.provider"),my=Symbol.for("react.context"),Mh=Symbol.for("react.forward_ref"),fc=Symbol.for("react.suspense"),mc=Symbol.for("react.suspense_list"),Fh=Symbol.for("react.memo"),zn=Symbol.for("react.lazy"),py=Symbol.for("react.offscreen"),Tm=Symbol.iterator;function pi(t){return t===null||typeof t!="object"?null:(t=Tm&&t[Tm]||t["@@iterator"],typeof t=="function"?t:null)}var Ie=Object.assign,Iu;function bi(t){if(Iu===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Iu=e&&e[1]||""}return`
`+Iu+t}var Au=!1;function Ru(t,e){if(!t||Au)return"";Au=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var u=`
`+s[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=l);break}}}finally{Au=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?bi(t):""}function ex(t){switch(t.tag){case 5:return bi(t.type);case 16:return bi("Lazy");case 13:return bi("Suspense");case 19:return bi("SuspenseList");case 0:case 2:case 15:return t=Ru(t.type,!1),t;case 11:return t=Ru(t.type.render,!1),t;case 1:return t=Ru(t.type,!0),t;default:return""}}function pc(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case hs:return"Fragment";case cs:return"Portal";case dc:return"Profiler";case Oh:return"StrictMode";case fc:return"Suspense";case mc:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case my:return(t.displayName||"Context")+".Consumer";case fy:return(t._context.displayName||"Context")+".Provider";case Mh:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Fh:return e=t.displayName||null,e!==null?e:pc(t.type)||"Memo";case zn:e=t._payload,t=t._init;try{return pc(t(e))}catch{}}return null}function tx(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return pc(e);case 8:return e===Oh?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function cr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function gy(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function nx(t){var e=gy(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Jo(t){t._valueTracker||(t._valueTracker=nx(t))}function yy(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=gy(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Oa(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function gc(t,e){var n=e.checked;return Ie({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function bm(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=cr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function vy(t,e){e=e.checked,e!=null&&Lh(t,"checked",e,!1)}function yc(t,e){vy(t,e);var n=cr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?vc(t,e.type,n):e.hasOwnProperty("defaultValue")&&vc(t,e.type,cr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function km(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function vc(t,e,n){(e!=="number"||Oa(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var ki=Array.isArray;function Ts(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+cr(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function _c(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(F(91));return Ie({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Sm(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(F(92));if(ki(n)){if(1<n.length)throw Error(F(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:cr(n)}}function _y(t,e){var n=cr(e.value),r=cr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Im(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function wy(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function wc(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?wy(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Zo,xy=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Zo=Zo||document.createElement("div"),Zo.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Zo.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ki(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ci={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},rx=["Webkit","ms","Moz","O"];Object.keys(Ci).forEach(function(t){rx.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ci[e]=Ci[t]})});function Ey(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ci.hasOwnProperty(t)&&Ci[t]?(""+e).trim():e+"px"}function Ty(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Ey(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var sx=Ie({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function xc(t,e){if(e){if(sx[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(F(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(F(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(F(61))}if(e.style!=null&&typeof e.style!="object")throw Error(F(62))}}function Ec(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Tc=null;function zh(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var bc=null,bs=null,ks=null;function Am(t){if(t=bo(t)){if(typeof bc!="function")throw Error(F(280));var e=t.stateNode;e&&(e=Il(e),bc(t.stateNode,t.type,e))}}function by(t){bs?ks?ks.push(t):ks=[t]:bs=t}function ky(){if(bs){var t=bs,e=ks;if(ks=bs=null,Am(t),e)for(t=0;t<e.length;t++)Am(e[t])}}function Sy(t,e){return t(e)}function Iy(){}var Nu=!1;function Ay(t,e,n){if(Nu)return t(e,n);Nu=!0;try{return Sy(t,e,n)}finally{Nu=!1,(bs!==null||ks!==null)&&(Iy(),ky())}}function Qi(t,e){var n=t.stateNode;if(n===null)return null;var r=Il(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(F(231,e,typeof n));return n}var kc=!1;if(Tn)try{var gi={};Object.defineProperty(gi,"passive",{get:function(){kc=!0}}),window.addEventListener("test",gi,gi),window.removeEventListener("test",gi,gi)}catch{kc=!1}function ix(t,e,n,r,s,i,o,l,u){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(m){this.onError(m)}}var Pi=!1,Ma=null,Fa=!1,Sc=null,ox={onError:function(t){Pi=!0,Ma=t}};function ax(t,e,n,r,s,i,o,l,u){Pi=!1,Ma=null,ix.apply(ox,arguments)}function lx(t,e,n,r,s,i,o,l,u){if(ax.apply(this,arguments),Pi){if(Pi){var d=Ma;Pi=!1,Ma=null}else throw Error(F(198));Fa||(Fa=!0,Sc=d)}}function Xr(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Ry(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Rm(t){if(Xr(t)!==t)throw Error(F(188))}function ux(t){var e=t.alternate;if(!e){if(e=Xr(t),e===null)throw Error(F(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Rm(s),t;if(i===r)return Rm(s),e;i=i.sibling}throw Error(F(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o)throw Error(F(189))}}if(n.alternate!==r)throw Error(F(190))}if(n.tag!==3)throw Error(F(188));return n.stateNode.current===n?t:e}function Ny(t){return t=ux(t),t!==null?Cy(t):null}function Cy(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Cy(t);if(e!==null)return e;t=t.sibling}return null}var Py=Vt.unstable_scheduleCallback,Nm=Vt.unstable_cancelCallback,cx=Vt.unstable_shouldYield,hx=Vt.unstable_requestPaint,Ve=Vt.unstable_now,dx=Vt.unstable_getCurrentPriorityLevel,Uh=Vt.unstable_ImmediatePriority,Dy=Vt.unstable_UserBlockingPriority,za=Vt.unstable_NormalPriority,fx=Vt.unstable_LowPriority,jy=Vt.unstable_IdlePriority,Tl=null,dn=null;function mx(t){if(dn&&typeof dn.onCommitFiberRoot=="function")try{dn.onCommitFiberRoot(Tl,t,void 0,(t.current.flags&128)===128)}catch{}}var Xt=Math.clz32?Math.clz32:yx,px=Math.log,gx=Math.LN2;function yx(t){return t>>>=0,t===0?32:31-(px(t)/gx|0)|0}var ea=64,ta=4194304;function Si(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ua(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~s;l!==0?r=Si(l):(i&=o,i!==0&&(r=Si(i)))}else o=n&~s,o!==0?r=Si(o):i!==0&&(r=Si(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Xt(e),s=1<<n,r|=t[n],e&=~s;return r}function vx(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function _x(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Xt(i),l=1<<o,u=s[o];u===-1?(!(l&n)||l&r)&&(s[o]=vx(l,e)):u<=e&&(t.expiredLanes|=l),i&=~l}}function Ic(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Vy(){var t=ea;return ea<<=1,!(ea&4194240)&&(ea=64),t}function Cu(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Eo(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Xt(e),t[e]=n}function wx(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Xt(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Bh(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Xt(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var me=0;function Ly(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Oy,$h,My,Fy,zy,Ac=!1,na=[],Kn=null,Qn=null,Yn=null,Yi=new Map,Xi=new Map,Bn=[],xx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Cm(t,e){switch(t){case"focusin":case"focusout":Kn=null;break;case"dragenter":case"dragleave":Qn=null;break;case"mouseover":case"mouseout":Yn=null;break;case"pointerover":case"pointerout":Yi.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Xi.delete(e.pointerId)}}function yi(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=bo(e),e!==null&&$h(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function Ex(t,e,n,r,s){switch(e){case"focusin":return Kn=yi(Kn,t,e,n,r,s),!0;case"dragenter":return Qn=yi(Qn,t,e,n,r,s),!0;case"mouseover":return Yn=yi(Yn,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Yi.set(i,yi(Yi.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Xi.set(i,yi(Xi.get(i)||null,t,e,n,r,s)),!0}return!1}function Uy(t){var e=Pr(t.target);if(e!==null){var n=Xr(e);if(n!==null){if(e=n.tag,e===13){if(e=Ry(n),e!==null){t.blockedOn=e,zy(t.priority,function(){My(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ea(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Rc(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Tc=r,n.target.dispatchEvent(r),Tc=null}else return e=bo(n),e!==null&&$h(e),t.blockedOn=n,!1;e.shift()}return!0}function Pm(t,e,n){Ea(t)&&n.delete(e)}function Tx(){Ac=!1,Kn!==null&&Ea(Kn)&&(Kn=null),Qn!==null&&Ea(Qn)&&(Qn=null),Yn!==null&&Ea(Yn)&&(Yn=null),Yi.forEach(Pm),Xi.forEach(Pm)}function vi(t,e){t.blockedOn===e&&(t.blockedOn=null,Ac||(Ac=!0,Vt.unstable_scheduleCallback(Vt.unstable_NormalPriority,Tx)))}function Ji(t){function e(s){return vi(s,t)}if(0<na.length){vi(na[0],t);for(var n=1;n<na.length;n++){var r=na[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Kn!==null&&vi(Kn,t),Qn!==null&&vi(Qn,t),Yn!==null&&vi(Yn,t),Yi.forEach(e),Xi.forEach(e),n=0;n<Bn.length;n++)r=Bn[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Bn.length&&(n=Bn[0],n.blockedOn===null);)Uy(n),n.blockedOn===null&&Bn.shift()}var Ss=Cn.ReactCurrentBatchConfig,Ba=!0;function bx(t,e,n,r){var s=me,i=Ss.transition;Ss.transition=null;try{me=1,Hh(t,e,n,r)}finally{me=s,Ss.transition=i}}function kx(t,e,n,r){var s=me,i=Ss.transition;Ss.transition=null;try{me=4,Hh(t,e,n,r)}finally{me=s,Ss.transition=i}}function Hh(t,e,n,r){if(Ba){var s=Rc(t,e,n,r);if(s===null)Uu(t,e,r,$a,n),Cm(t,r);else if(Ex(s,t,e,n,r))r.stopPropagation();else if(Cm(t,r),e&4&&-1<xx.indexOf(t)){for(;s!==null;){var i=bo(s);if(i!==null&&Oy(i),i=Rc(t,e,n,r),i===null&&Uu(t,e,r,$a,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Uu(t,e,r,null,n)}}var $a=null;function Rc(t,e,n,r){if($a=null,t=zh(r),t=Pr(t),t!==null)if(e=Xr(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Ry(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return $a=t,null}function By(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(dx()){case Uh:return 1;case Dy:return 4;case za:case fx:return 16;case jy:return 536870912;default:return 16}default:return 16}}var qn=null,qh=null,Ta=null;function $y(){if(Ta)return Ta;var t,e=qh,n=e.length,r,s="value"in qn?qn.value:qn.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return Ta=s.slice(t,1<r?1-r:void 0)}function ba(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ra(){return!0}function Dm(){return!1}function Ot(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?ra:Dm,this.isPropagationStopped=Dm,this}return Ie(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ra)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ra)},persist:function(){},isPersistent:ra}),e}var Ws={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Wh=Ot(Ws),To=Ie({},Ws,{view:0,detail:0}),Sx=Ot(To),Pu,Du,_i,bl=Ie({},To,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Gh,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==_i&&(_i&&t.type==="mousemove"?(Pu=t.screenX-_i.screenX,Du=t.screenY-_i.screenY):Du=Pu=0,_i=t),Pu)},movementY:function(t){return"movementY"in t?t.movementY:Du}}),jm=Ot(bl),Ix=Ie({},bl,{dataTransfer:0}),Ax=Ot(Ix),Rx=Ie({},To,{relatedTarget:0}),ju=Ot(Rx),Nx=Ie({},Ws,{animationName:0,elapsedTime:0,pseudoElement:0}),Cx=Ot(Nx),Px=Ie({},Ws,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Dx=Ot(Px),jx=Ie({},Ws,{data:0}),Vm=Ot(jx),Vx={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Lx={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ox={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Mx(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Ox[t])?!!e[t]:!1}function Gh(){return Mx}var Fx=Ie({},To,{key:function(t){if(t.key){var e=Vx[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ba(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Lx[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Gh,charCode:function(t){return t.type==="keypress"?ba(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ba(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),zx=Ot(Fx),Ux=Ie({},bl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Lm=Ot(Ux),Bx=Ie({},To,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Gh}),$x=Ot(Bx),Hx=Ie({},Ws,{propertyName:0,elapsedTime:0,pseudoElement:0}),qx=Ot(Hx),Wx=Ie({},bl,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Gx=Ot(Wx),Kx=[9,13,27,32],Kh=Tn&&"CompositionEvent"in window,Di=null;Tn&&"documentMode"in document&&(Di=document.documentMode);var Qx=Tn&&"TextEvent"in window&&!Di,Hy=Tn&&(!Kh||Di&&8<Di&&11>=Di),Om=" ",Mm=!1;function qy(t,e){switch(t){case"keyup":return Kx.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Wy(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ds=!1;function Yx(t,e){switch(t){case"compositionend":return Wy(e);case"keypress":return e.which!==32?null:(Mm=!0,Om);case"textInput":return t=e.data,t===Om&&Mm?null:t;default:return null}}function Xx(t,e){if(ds)return t==="compositionend"||!Kh&&qy(t,e)?(t=$y(),Ta=qh=qn=null,ds=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Hy&&e.locale!=="ko"?null:e.data;default:return null}}var Jx={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Fm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Jx[t.type]:e==="textarea"}function Gy(t,e,n,r){by(r),e=Ha(e,"onChange"),0<e.length&&(n=new Wh("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var ji=null,Zi=null;function Zx(t){s0(t,0)}function kl(t){var e=ps(t);if(yy(e))return t}function eE(t,e){if(t==="change")return e}var Ky=!1;if(Tn){var Vu;if(Tn){var Lu="oninput"in document;if(!Lu){var zm=document.createElement("div");zm.setAttribute("oninput","return;"),Lu=typeof zm.oninput=="function"}Vu=Lu}else Vu=!1;Ky=Vu&&(!document.documentMode||9<document.documentMode)}function Um(){ji&&(ji.detachEvent("onpropertychange",Qy),Zi=ji=null)}function Qy(t){if(t.propertyName==="value"&&kl(Zi)){var e=[];Gy(e,Zi,t,zh(t)),Ay(Zx,e)}}function tE(t,e,n){t==="focusin"?(Um(),ji=e,Zi=n,ji.attachEvent("onpropertychange",Qy)):t==="focusout"&&Um()}function nE(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return kl(Zi)}function rE(t,e){if(t==="click")return kl(e)}function sE(t,e){if(t==="input"||t==="change")return kl(e)}function iE(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var tn=typeof Object.is=="function"?Object.is:iE;function eo(t,e){if(tn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!hc.call(e,s)||!tn(t[s],e[s]))return!1}return!0}function Bm(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function $m(t,e){var n=Bm(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Bm(n)}}function Yy(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Yy(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Xy(){for(var t=window,e=Oa();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Oa(t.document)}return e}function Qh(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function oE(t){var e=Xy(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Yy(n.ownerDocument.documentElement,n)){if(r!==null&&Qh(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=$m(n,i);var o=$m(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var aE=Tn&&"documentMode"in document&&11>=document.documentMode,fs=null,Nc=null,Vi=null,Cc=!1;function Hm(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Cc||fs==null||fs!==Oa(r)||(r=fs,"selectionStart"in r&&Qh(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Vi&&eo(Vi,r)||(Vi=r,r=Ha(Nc,"onSelect"),0<r.length&&(e=new Wh("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=fs)))}function sa(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ms={animationend:sa("Animation","AnimationEnd"),animationiteration:sa("Animation","AnimationIteration"),animationstart:sa("Animation","AnimationStart"),transitionend:sa("Transition","TransitionEnd")},Ou={},Jy={};Tn&&(Jy=document.createElement("div").style,"AnimationEvent"in window||(delete ms.animationend.animation,delete ms.animationiteration.animation,delete ms.animationstart.animation),"TransitionEvent"in window||delete ms.transitionend.transition);function Sl(t){if(Ou[t])return Ou[t];if(!ms[t])return t;var e=ms[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Jy)return Ou[t]=e[n];return t}var Zy=Sl("animationend"),e0=Sl("animationiteration"),t0=Sl("animationstart"),n0=Sl("transitionend"),r0=new Map,qm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function _r(t,e){r0.set(t,e),Yr(e,[t])}for(var Mu=0;Mu<qm.length;Mu++){var Fu=qm[Mu],lE=Fu.toLowerCase(),uE=Fu[0].toUpperCase()+Fu.slice(1);_r(lE,"on"+uE)}_r(Zy,"onAnimationEnd");_r(e0,"onAnimationIteration");_r(t0,"onAnimationStart");_r("dblclick","onDoubleClick");_r("focusin","onFocus");_r("focusout","onBlur");_r(n0,"onTransitionEnd");Ns("onMouseEnter",["mouseout","mouseover"]);Ns("onMouseLeave",["mouseout","mouseover"]);Ns("onPointerEnter",["pointerout","pointerover"]);Ns("onPointerLeave",["pointerout","pointerover"]);Yr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Yr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Yr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Yr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Yr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Yr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ii="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),cE=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ii));function Wm(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,lx(r,e,void 0,t),t.currentTarget=null}function s0(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],u=l.instance,d=l.currentTarget;if(l=l.listener,u!==i&&s.isPropagationStopped())break e;Wm(s,l,d),i=u}else for(o=0;o<r.length;o++){if(l=r[o],u=l.instance,d=l.currentTarget,l=l.listener,u!==i&&s.isPropagationStopped())break e;Wm(s,l,d),i=u}}}if(Fa)throw t=Sc,Fa=!1,Sc=null,t}function Ee(t,e){var n=e[Lc];n===void 0&&(n=e[Lc]=new Set);var r=t+"__bubble";n.has(r)||(i0(e,t,2,!1),n.add(r))}function zu(t,e,n){var r=0;e&&(r|=4),i0(n,t,r,e)}var ia="_reactListening"+Math.random().toString(36).slice(2);function to(t){if(!t[ia]){t[ia]=!0,dy.forEach(function(n){n!=="selectionchange"&&(cE.has(n)||zu(n,!1,t),zu(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ia]||(e[ia]=!0,zu("selectionchange",!1,e))}}function i0(t,e,n,r){switch(By(e)){case 1:var s=bx;break;case 4:s=kx;break;default:s=Hh}n=s.bind(null,e,n,t),s=void 0,!kc||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Uu(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;o=o.return}for(;l!==null;){if(o=Pr(l),o===null)return;if(u=o.tag,u===5||u===6){r=i=o;continue e}l=l.parentNode}}r=r.return}Ay(function(){var d=i,m=zh(n),p=[];e:{var g=r0.get(t);if(g!==void 0){var w=Wh,I=t;switch(t){case"keypress":if(ba(n)===0)break e;case"keydown":case"keyup":w=zx;break;case"focusin":I="focus",w=ju;break;case"focusout":I="blur",w=ju;break;case"beforeblur":case"afterblur":w=ju;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":w=jm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":w=Ax;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":w=$x;break;case Zy:case e0:case t0:w=Cx;break;case n0:w=qx;break;case"scroll":w=Sx;break;case"wheel":w=Gx;break;case"copy":case"cut":case"paste":w=Dx;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":w=Lm}var R=(e&4)!==0,C=!R&&t==="scroll",T=R?g!==null?g+"Capture":null:g;R=[];for(var y=d,k;y!==null;){k=y;var D=k.stateNode;if(k.tag===5&&D!==null&&(k=D,T!==null&&(D=Qi(y,T),D!=null&&R.push(no(y,D,k)))),C)break;y=y.return}0<R.length&&(g=new w(g,I,null,n,m),p.push({event:g,listeners:R}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",w=t==="mouseout"||t==="pointerout",g&&n!==Tc&&(I=n.relatedTarget||n.fromElement)&&(Pr(I)||I[bn]))break e;if((w||g)&&(g=m.window===m?m:(g=m.ownerDocument)?g.defaultView||g.parentWindow:window,w?(I=n.relatedTarget||n.toElement,w=d,I=I?Pr(I):null,I!==null&&(C=Xr(I),I!==C||I.tag!==5&&I.tag!==6)&&(I=null)):(w=null,I=d),w!==I)){if(R=jm,D="onMouseLeave",T="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(R=Lm,D="onPointerLeave",T="onPointerEnter",y="pointer"),C=w==null?g:ps(w),k=I==null?g:ps(I),g=new R(D,y+"leave",w,n,m),g.target=C,g.relatedTarget=k,D=null,Pr(m)===d&&(R=new R(T,y+"enter",I,n,m),R.target=k,R.relatedTarget=C,D=R),C=D,w&&I)t:{for(R=w,T=I,y=0,k=R;k;k=is(k))y++;for(k=0,D=T;D;D=is(D))k++;for(;0<y-k;)R=is(R),y--;for(;0<k-y;)T=is(T),k--;for(;y--;){if(R===T||T!==null&&R===T.alternate)break t;R=is(R),T=is(T)}R=null}else R=null;w!==null&&Gm(p,g,w,R,!1),I!==null&&C!==null&&Gm(p,C,I,R,!0)}}e:{if(g=d?ps(d):window,w=g.nodeName&&g.nodeName.toLowerCase(),w==="select"||w==="input"&&g.type==="file")var O=eE;else if(Fm(g))if(Ky)O=sE;else{O=nE;var M=tE}else(w=g.nodeName)&&w.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(O=rE);if(O&&(O=O(t,d))){Gy(p,O,n,m);break e}M&&M(t,g,d),t==="focusout"&&(M=g._wrapperState)&&M.controlled&&g.type==="number"&&vc(g,"number",g.value)}switch(M=d?ps(d):window,t){case"focusin":(Fm(M)||M.contentEditable==="true")&&(fs=M,Nc=d,Vi=null);break;case"focusout":Vi=Nc=fs=null;break;case"mousedown":Cc=!0;break;case"contextmenu":case"mouseup":case"dragend":Cc=!1,Hm(p,n,m);break;case"selectionchange":if(aE)break;case"keydown":case"keyup":Hm(p,n,m)}var E;if(Kh)e:{switch(t){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else ds?qy(t,n)&&(_="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(_="onCompositionStart");_&&(Hy&&n.locale!=="ko"&&(ds||_!=="onCompositionStart"?_==="onCompositionEnd"&&ds&&(E=$y()):(qn=m,qh="value"in qn?qn.value:qn.textContent,ds=!0)),M=Ha(d,_),0<M.length&&(_=new Vm(_,t,null,n,m),p.push({event:_,listeners:M}),E?_.data=E:(E=Wy(n),E!==null&&(_.data=E)))),(E=Qx?Yx(t,n):Xx(t,n))&&(d=Ha(d,"onBeforeInput"),0<d.length&&(m=new Vm("onBeforeInput","beforeinput",null,n,m),p.push({event:m,listeners:d}),m.data=E))}s0(p,e)})}function no(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Ha(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Qi(t,n),i!=null&&r.unshift(no(t,i,s)),i=Qi(t,e),i!=null&&r.push(no(t,i,s))),t=t.return}return r}function is(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Gm(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var l=n,u=l.alternate,d=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&d!==null&&(l=d,s?(u=Qi(n,i),u!=null&&o.unshift(no(n,u,l))):s||(u=Qi(n,i),u!=null&&o.push(no(n,u,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var hE=/\r\n?/g,dE=/\u0000|\uFFFD/g;function Km(t){return(typeof t=="string"?t:""+t).replace(hE,`
`).replace(dE,"")}function oa(t,e,n){if(e=Km(e),Km(t)!==e&&n)throw Error(F(425))}function qa(){}var Pc=null,Dc=null;function jc(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Vc=typeof setTimeout=="function"?setTimeout:void 0,fE=typeof clearTimeout=="function"?clearTimeout:void 0,Qm=typeof Promise=="function"?Promise:void 0,mE=typeof queueMicrotask=="function"?queueMicrotask:typeof Qm<"u"?function(t){return Qm.resolve(null).then(t).catch(pE)}:Vc;function pE(t){setTimeout(function(){throw t})}function Bu(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Ji(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Ji(e)}function Xn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Ym(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Gs=Math.random().toString(36).slice(2),cn="__reactFiber$"+Gs,ro="__reactProps$"+Gs,bn="__reactContainer$"+Gs,Lc="__reactEvents$"+Gs,gE="__reactListeners$"+Gs,yE="__reactHandles$"+Gs;function Pr(t){var e=t[cn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[bn]||n[cn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Ym(t);t!==null;){if(n=t[cn])return n;t=Ym(t)}return e}t=n,n=t.parentNode}return null}function bo(t){return t=t[cn]||t[bn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ps(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(F(33))}function Il(t){return t[ro]||null}var Oc=[],gs=-1;function wr(t){return{current:t}}function Te(t){0>gs||(t.current=Oc[gs],Oc[gs]=null,gs--)}function we(t,e){gs++,Oc[gs]=t.current,t.current=e}var hr={},ct=wr(hr),bt=wr(!1),zr=hr;function Cs(t,e){var n=t.type.contextTypes;if(!n)return hr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function kt(t){return t=t.childContextTypes,t!=null}function Wa(){Te(bt),Te(ct)}function Xm(t,e,n){if(ct.current!==hr)throw Error(F(168));we(ct,e),we(bt,n)}function o0(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(F(108,tx(t)||"Unknown",s));return Ie({},n,r)}function Ga(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||hr,zr=ct.current,we(ct,t),we(bt,bt.current),!0}function Jm(t,e,n){var r=t.stateNode;if(!r)throw Error(F(169));n?(t=o0(t,e,zr),r.__reactInternalMemoizedMergedChildContext=t,Te(bt),Te(ct),we(ct,t)):Te(bt),we(bt,n)}var vn=null,Al=!1,$u=!1;function a0(t){vn===null?vn=[t]:vn.push(t)}function vE(t){Al=!0,a0(t)}function xr(){if(!$u&&vn!==null){$u=!0;var t=0,e=me;try{var n=vn;for(me=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}vn=null,Al=!1}catch(s){throw vn!==null&&(vn=vn.slice(t+1)),Py(Uh,xr),s}finally{me=e,$u=!1}}return null}var ys=[],vs=0,Ka=null,Qa=0,Mt=[],Ft=0,Ur=null,_n=1,wn="";function Rr(t,e){ys[vs++]=Qa,ys[vs++]=Ka,Ka=t,Qa=e}function l0(t,e,n){Mt[Ft++]=_n,Mt[Ft++]=wn,Mt[Ft++]=Ur,Ur=t;var r=_n;t=wn;var s=32-Xt(r)-1;r&=~(1<<s),n+=1;var i=32-Xt(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,_n=1<<32-Xt(e)+s|n<<s|r,wn=i+t}else _n=1<<i|n<<s|r,wn=t}function Yh(t){t.return!==null&&(Rr(t,1),l0(t,1,0))}function Xh(t){for(;t===Ka;)Ka=ys[--vs],ys[vs]=null,Qa=ys[--vs],ys[vs]=null;for(;t===Ur;)Ur=Mt[--Ft],Mt[Ft]=null,wn=Mt[--Ft],Mt[Ft]=null,_n=Mt[--Ft],Mt[Ft]=null}var Dt=null,Nt=null,be=!1,Yt=null;function u0(t,e){var n=Ut(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Zm(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Dt=t,Nt=Xn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Dt=t,Nt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ur!==null?{id:_n,overflow:wn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Ut(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Dt=t,Nt=null,!0):!1;default:return!1}}function Mc(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Fc(t){if(be){var e=Nt;if(e){var n=e;if(!Zm(t,e)){if(Mc(t))throw Error(F(418));e=Xn(n.nextSibling);var r=Dt;e&&Zm(t,e)?u0(r,n):(t.flags=t.flags&-4097|2,be=!1,Dt=t)}}else{if(Mc(t))throw Error(F(418));t.flags=t.flags&-4097|2,be=!1,Dt=t}}}function ep(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Dt=t}function aa(t){if(t!==Dt)return!1;if(!be)return ep(t),be=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!jc(t.type,t.memoizedProps)),e&&(e=Nt)){if(Mc(t))throw c0(),Error(F(418));for(;e;)u0(t,e),e=Xn(e.nextSibling)}if(ep(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(F(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Nt=Xn(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Nt=null}}else Nt=Dt?Xn(t.stateNode.nextSibling):null;return!0}function c0(){for(var t=Nt;t;)t=Xn(t.nextSibling)}function Ps(){Nt=Dt=null,be=!1}function Jh(t){Yt===null?Yt=[t]:Yt.push(t)}var _E=Cn.ReactCurrentBatchConfig;function wi(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(F(309));var r=n.stateNode}if(!r)throw Error(F(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(F(284));if(!n._owner)throw Error(F(290,t))}return t}function la(t,e){throw t=Object.prototype.toString.call(e),Error(F(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function tp(t){var e=t._init;return e(t._payload)}function h0(t){function e(T,y){if(t){var k=T.deletions;k===null?(T.deletions=[y],T.flags|=16):k.push(y)}}function n(T,y){if(!t)return null;for(;y!==null;)e(T,y),y=y.sibling;return null}function r(T,y){for(T=new Map;y!==null;)y.key!==null?T.set(y.key,y):T.set(y.index,y),y=y.sibling;return T}function s(T,y){return T=tr(T,y),T.index=0,T.sibling=null,T}function i(T,y,k){return T.index=k,t?(k=T.alternate,k!==null?(k=k.index,k<y?(T.flags|=2,y):k):(T.flags|=2,y)):(T.flags|=1048576,y)}function o(T){return t&&T.alternate===null&&(T.flags|=2),T}function l(T,y,k,D){return y===null||y.tag!==6?(y=Yu(k,T.mode,D),y.return=T,y):(y=s(y,k),y.return=T,y)}function u(T,y,k,D){var O=k.type;return O===hs?m(T,y,k.props.children,D,k.key):y!==null&&(y.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===zn&&tp(O)===y.type)?(D=s(y,k.props),D.ref=wi(T,y,k),D.return=T,D):(D=Ca(k.type,k.key,k.props,null,T.mode,D),D.ref=wi(T,y,k),D.return=T,D)}function d(T,y,k,D){return y===null||y.tag!==4||y.stateNode.containerInfo!==k.containerInfo||y.stateNode.implementation!==k.implementation?(y=Xu(k,T.mode,D),y.return=T,y):(y=s(y,k.children||[]),y.return=T,y)}function m(T,y,k,D,O){return y===null||y.tag!==7?(y=Mr(k,T.mode,D,O),y.return=T,y):(y=s(y,k),y.return=T,y)}function p(T,y,k){if(typeof y=="string"&&y!==""||typeof y=="number")return y=Yu(""+y,T.mode,k),y.return=T,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Xo:return k=Ca(y.type,y.key,y.props,null,T.mode,k),k.ref=wi(T,null,y),k.return=T,k;case cs:return y=Xu(y,T.mode,k),y.return=T,y;case zn:var D=y._init;return p(T,D(y._payload),k)}if(ki(y)||pi(y))return y=Mr(y,T.mode,k,null),y.return=T,y;la(T,y)}return null}function g(T,y,k,D){var O=y!==null?y.key:null;if(typeof k=="string"&&k!==""||typeof k=="number")return O!==null?null:l(T,y,""+k,D);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case Xo:return k.key===O?u(T,y,k,D):null;case cs:return k.key===O?d(T,y,k,D):null;case zn:return O=k._init,g(T,y,O(k._payload),D)}if(ki(k)||pi(k))return O!==null?null:m(T,y,k,D,null);la(T,k)}return null}function w(T,y,k,D,O){if(typeof D=="string"&&D!==""||typeof D=="number")return T=T.get(k)||null,l(y,T,""+D,O);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case Xo:return T=T.get(D.key===null?k:D.key)||null,u(y,T,D,O);case cs:return T=T.get(D.key===null?k:D.key)||null,d(y,T,D,O);case zn:var M=D._init;return w(T,y,k,M(D._payload),O)}if(ki(D)||pi(D))return T=T.get(k)||null,m(y,T,D,O,null);la(y,D)}return null}function I(T,y,k,D){for(var O=null,M=null,E=y,_=y=0,b=null;E!==null&&_<k.length;_++){E.index>_?(b=E,E=null):b=E.sibling;var S=g(T,E,k[_],D);if(S===null){E===null&&(E=b);break}t&&E&&S.alternate===null&&e(T,E),y=i(S,y,_),M===null?O=S:M.sibling=S,M=S,E=b}if(_===k.length)return n(T,E),be&&Rr(T,_),O;if(E===null){for(;_<k.length;_++)E=p(T,k[_],D),E!==null&&(y=i(E,y,_),M===null?O=E:M.sibling=E,M=E);return be&&Rr(T,_),O}for(E=r(T,E);_<k.length;_++)b=w(E,T,_,k[_],D),b!==null&&(t&&b.alternate!==null&&E.delete(b.key===null?_:b.key),y=i(b,y,_),M===null?O=b:M.sibling=b,M=b);return t&&E.forEach(function(A){return e(T,A)}),be&&Rr(T,_),O}function R(T,y,k,D){var O=pi(k);if(typeof O!="function")throw Error(F(150));if(k=O.call(k),k==null)throw Error(F(151));for(var M=O=null,E=y,_=y=0,b=null,S=k.next();E!==null&&!S.done;_++,S=k.next()){E.index>_?(b=E,E=null):b=E.sibling;var A=g(T,E,S.value,D);if(A===null){E===null&&(E=b);break}t&&E&&A.alternate===null&&e(T,E),y=i(A,y,_),M===null?O=A:M.sibling=A,M=A,E=b}if(S.done)return n(T,E),be&&Rr(T,_),O;if(E===null){for(;!S.done;_++,S=k.next())S=p(T,S.value,D),S!==null&&(y=i(S,y,_),M===null?O=S:M.sibling=S,M=S);return be&&Rr(T,_),O}for(E=r(T,E);!S.done;_++,S=k.next())S=w(E,T,_,S.value,D),S!==null&&(t&&S.alternate!==null&&E.delete(S.key===null?_:S.key),y=i(S,y,_),M===null?O=S:M.sibling=S,M=S);return t&&E.forEach(function(N){return e(T,N)}),be&&Rr(T,_),O}function C(T,y,k,D){if(typeof k=="object"&&k!==null&&k.type===hs&&k.key===null&&(k=k.props.children),typeof k=="object"&&k!==null){switch(k.$$typeof){case Xo:e:{for(var O=k.key,M=y;M!==null;){if(M.key===O){if(O=k.type,O===hs){if(M.tag===7){n(T,M.sibling),y=s(M,k.props.children),y.return=T,T=y;break e}}else if(M.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===zn&&tp(O)===M.type){n(T,M.sibling),y=s(M,k.props),y.ref=wi(T,M,k),y.return=T,T=y;break e}n(T,M);break}else e(T,M);M=M.sibling}k.type===hs?(y=Mr(k.props.children,T.mode,D,k.key),y.return=T,T=y):(D=Ca(k.type,k.key,k.props,null,T.mode,D),D.ref=wi(T,y,k),D.return=T,T=D)}return o(T);case cs:e:{for(M=k.key;y!==null;){if(y.key===M)if(y.tag===4&&y.stateNode.containerInfo===k.containerInfo&&y.stateNode.implementation===k.implementation){n(T,y.sibling),y=s(y,k.children||[]),y.return=T,T=y;break e}else{n(T,y);break}else e(T,y);y=y.sibling}y=Xu(k,T.mode,D),y.return=T,T=y}return o(T);case zn:return M=k._init,C(T,y,M(k._payload),D)}if(ki(k))return I(T,y,k,D);if(pi(k))return R(T,y,k,D);la(T,k)}return typeof k=="string"&&k!==""||typeof k=="number"?(k=""+k,y!==null&&y.tag===6?(n(T,y.sibling),y=s(y,k),y.return=T,T=y):(n(T,y),y=Yu(k,T.mode,D),y.return=T,T=y),o(T)):n(T,y)}return C}var Ds=h0(!0),d0=h0(!1),Ya=wr(null),Xa=null,_s=null,Zh=null;function ed(){Zh=_s=Xa=null}function td(t){var e=Ya.current;Te(Ya),t._currentValue=e}function zc(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Is(t,e){Xa=t,Zh=_s=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Tt=!0),t.firstContext=null)}function qt(t){var e=t._currentValue;if(Zh!==t)if(t={context:t,memoizedValue:e,next:null},_s===null){if(Xa===null)throw Error(F(308));_s=t,Xa.dependencies={lanes:0,firstContext:t}}else _s=_s.next=t;return e}var Dr=null;function nd(t){Dr===null?Dr=[t]:Dr.push(t)}function f0(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,nd(e)):(n.next=s.next,s.next=n),e.interleaved=n,kn(t,r)}function kn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Un=!1;function rd(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function m0(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function xn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Jn(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,he&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,kn(t,n)}return s=r.interleaved,s===null?(e.next=e,nd(r)):(e.next=s.next,s.next=e),r.interleaved=e,kn(t,n)}function ka(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Bh(t,n)}}function np(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Ja(t,e,n,r){var s=t.updateQueue;Un=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var u=l,d=u.next;u.next=null,o===null?i=d:o.next=d,o=u;var m=t.alternate;m!==null&&(m=m.updateQueue,l=m.lastBaseUpdate,l!==o&&(l===null?m.firstBaseUpdate=d:l.next=d,m.lastBaseUpdate=u))}if(i!==null){var p=s.baseState;o=0,m=d=u=null,l=i;do{var g=l.lane,w=l.eventTime;if((r&g)===g){m!==null&&(m=m.next={eventTime:w,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var I=t,R=l;switch(g=e,w=n,R.tag){case 1:if(I=R.payload,typeof I=="function"){p=I.call(w,p,g);break e}p=I;break e;case 3:I.flags=I.flags&-65537|128;case 0:if(I=R.payload,g=typeof I=="function"?I.call(w,p,g):I,g==null)break e;p=Ie({},p,g);break e;case 2:Un=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,g=s.effects,g===null?s.effects=[l]:g.push(l))}else w={eventTime:w,lane:g,tag:l.tag,payload:l.payload,callback:l.callback,next:null},m===null?(d=m=w,u=p):m=m.next=w,o|=g;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;g=l,l=g.next,g.next=null,s.lastBaseUpdate=g,s.shared.pending=null}}while(!0);if(m===null&&(u=p),s.baseState=u,s.firstBaseUpdate=d,s.lastBaseUpdate=m,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);$r|=o,t.lanes=o,t.memoizedState=p}}function rp(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(F(191,s));s.call(r)}}}var ko={},fn=wr(ko),so=wr(ko),io=wr(ko);function jr(t){if(t===ko)throw Error(F(174));return t}function sd(t,e){switch(we(io,e),we(so,t),we(fn,ko),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:wc(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=wc(e,t)}Te(fn),we(fn,e)}function js(){Te(fn),Te(so),Te(io)}function p0(t){jr(io.current);var e=jr(fn.current),n=wc(e,t.type);e!==n&&(we(so,t),we(fn,n))}function id(t){so.current===t&&(Te(fn),Te(so))}var ke=wr(0);function Za(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Hu=[];function od(){for(var t=0;t<Hu.length;t++)Hu[t]._workInProgressVersionPrimary=null;Hu.length=0}var Sa=Cn.ReactCurrentDispatcher,qu=Cn.ReactCurrentBatchConfig,Br=0,Se=null,$e=null,Ke=null,el=!1,Li=!1,oo=0,wE=0;function st(){throw Error(F(321))}function ad(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!tn(t[n],e[n]))return!1;return!0}function ld(t,e,n,r,s,i){if(Br=i,Se=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Sa.current=t===null||t.memoizedState===null?bE:kE,t=n(r,s),Li){i=0;do{if(Li=!1,oo=0,25<=i)throw Error(F(301));i+=1,Ke=$e=null,e.updateQueue=null,Sa.current=SE,t=n(r,s)}while(Li)}if(Sa.current=tl,e=$e!==null&&$e.next!==null,Br=0,Ke=$e=Se=null,el=!1,e)throw Error(F(300));return t}function ud(){var t=oo!==0;return oo=0,t}function ln(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ke===null?Se.memoizedState=Ke=t:Ke=Ke.next=t,Ke}function Wt(){if($e===null){var t=Se.alternate;t=t!==null?t.memoizedState:null}else t=$e.next;var e=Ke===null?Se.memoizedState:Ke.next;if(e!==null)Ke=e,$e=t;else{if(t===null)throw Error(F(310));$e=t,t={memoizedState:$e.memoizedState,baseState:$e.baseState,baseQueue:$e.baseQueue,queue:$e.queue,next:null},Ke===null?Se.memoizedState=Ke=t:Ke=Ke.next=t}return Ke}function ao(t,e){return typeof e=="function"?e(t):e}function Wu(t){var e=Wt(),n=e.queue;if(n===null)throw Error(F(311));n.lastRenderedReducer=t;var r=$e,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=o=null,u=null,d=i;do{var m=d.lane;if((Br&m)===m)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var p={lane:m,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(l=u=p,o=r):u=u.next=p,Se.lanes|=m,$r|=m}d=d.next}while(d!==null&&d!==i);u===null?o=r:u.next=l,tn(r,e.memoizedState)||(Tt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Se.lanes|=i,$r|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Gu(t){var e=Wt(),n=e.queue;if(n===null)throw Error(F(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);tn(i,e.memoizedState)||(Tt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function g0(){}function y0(t,e){var n=Se,r=Wt(),s=e(),i=!tn(r.memoizedState,s);if(i&&(r.memoizedState=s,Tt=!0),r=r.queue,cd(w0.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Ke!==null&&Ke.memoizedState.tag&1){if(n.flags|=2048,lo(9,_0.bind(null,n,r,s,e),void 0,null),Xe===null)throw Error(F(349));Br&30||v0(n,e,s)}return s}function v0(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Se.updateQueue,e===null?(e={lastEffect:null,stores:null},Se.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function _0(t,e,n,r){e.value=n,e.getSnapshot=r,x0(e)&&E0(t)}function w0(t,e,n){return n(function(){x0(e)&&E0(t)})}function x0(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!tn(t,n)}catch{return!0}}function E0(t){var e=kn(t,1);e!==null&&Jt(e,t,1,-1)}function sp(t){var e=ln();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ao,lastRenderedState:t},e.queue=t,t=t.dispatch=TE.bind(null,Se,t),[e.memoizedState,t]}function lo(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Se.updateQueue,e===null?(e={lastEffect:null,stores:null},Se.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function T0(){return Wt().memoizedState}function Ia(t,e,n,r){var s=ln();Se.flags|=t,s.memoizedState=lo(1|e,n,void 0,r===void 0?null:r)}function Rl(t,e,n,r){var s=Wt();r=r===void 0?null:r;var i=void 0;if($e!==null){var o=$e.memoizedState;if(i=o.destroy,r!==null&&ad(r,o.deps)){s.memoizedState=lo(e,n,i,r);return}}Se.flags|=t,s.memoizedState=lo(1|e,n,i,r)}function ip(t,e){return Ia(8390656,8,t,e)}function cd(t,e){return Rl(2048,8,t,e)}function b0(t,e){return Rl(4,2,t,e)}function k0(t,e){return Rl(4,4,t,e)}function S0(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function I0(t,e,n){return n=n!=null?n.concat([t]):null,Rl(4,4,S0.bind(null,e,t),n)}function hd(){}function A0(t,e){var n=Wt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&ad(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function R0(t,e){var n=Wt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&ad(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function N0(t,e,n){return Br&21?(tn(n,e)||(n=Vy(),Se.lanes|=n,$r|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Tt=!0),t.memoizedState=n)}function xE(t,e){var n=me;me=n!==0&&4>n?n:4,t(!0);var r=qu.transition;qu.transition={};try{t(!1),e()}finally{me=n,qu.transition=r}}function C0(){return Wt().memoizedState}function EE(t,e,n){var r=er(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},P0(t))D0(e,n);else if(n=f0(t,e,n,r),n!==null){var s=pt();Jt(n,t,r,s),j0(n,e,r)}}function TE(t,e,n){var r=er(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(P0(t))D0(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,l=i(o,n);if(s.hasEagerState=!0,s.eagerState=l,tn(l,o)){var u=e.interleaved;u===null?(s.next=s,nd(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}n=f0(t,e,s,r),n!==null&&(s=pt(),Jt(n,t,r,s),j0(n,e,r))}}function P0(t){var e=t.alternate;return t===Se||e!==null&&e===Se}function D0(t,e){Li=el=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function j0(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Bh(t,n)}}var tl={readContext:qt,useCallback:st,useContext:st,useEffect:st,useImperativeHandle:st,useInsertionEffect:st,useLayoutEffect:st,useMemo:st,useReducer:st,useRef:st,useState:st,useDebugValue:st,useDeferredValue:st,useTransition:st,useMutableSource:st,useSyncExternalStore:st,useId:st,unstable_isNewReconciler:!1},bE={readContext:qt,useCallback:function(t,e){return ln().memoizedState=[t,e===void 0?null:e],t},useContext:qt,useEffect:ip,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Ia(4194308,4,S0.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Ia(4194308,4,t,e)},useInsertionEffect:function(t,e){return Ia(4,2,t,e)},useMemo:function(t,e){var n=ln();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=ln();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=EE.bind(null,Se,t),[r.memoizedState,t]},useRef:function(t){var e=ln();return t={current:t},e.memoizedState=t},useState:sp,useDebugValue:hd,useDeferredValue:function(t){return ln().memoizedState=t},useTransition:function(){var t=sp(!1),e=t[0];return t=xE.bind(null,t[1]),ln().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Se,s=ln();if(be){if(n===void 0)throw Error(F(407));n=n()}else{if(n=e(),Xe===null)throw Error(F(349));Br&30||v0(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,ip(w0.bind(null,r,i,t),[t]),r.flags|=2048,lo(9,_0.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=ln(),e=Xe.identifierPrefix;if(be){var n=wn,r=_n;n=(r&~(1<<32-Xt(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=oo++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=wE++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},kE={readContext:qt,useCallback:A0,useContext:qt,useEffect:cd,useImperativeHandle:I0,useInsertionEffect:b0,useLayoutEffect:k0,useMemo:R0,useReducer:Wu,useRef:T0,useState:function(){return Wu(ao)},useDebugValue:hd,useDeferredValue:function(t){var e=Wt();return N0(e,$e.memoizedState,t)},useTransition:function(){var t=Wu(ao)[0],e=Wt().memoizedState;return[t,e]},useMutableSource:g0,useSyncExternalStore:y0,useId:C0,unstable_isNewReconciler:!1},SE={readContext:qt,useCallback:A0,useContext:qt,useEffect:cd,useImperativeHandle:I0,useInsertionEffect:b0,useLayoutEffect:k0,useMemo:R0,useReducer:Gu,useRef:T0,useState:function(){return Gu(ao)},useDebugValue:hd,useDeferredValue:function(t){var e=Wt();return $e===null?e.memoizedState=t:N0(e,$e.memoizedState,t)},useTransition:function(){var t=Gu(ao)[0],e=Wt().memoizedState;return[t,e]},useMutableSource:g0,useSyncExternalStore:y0,useId:C0,unstable_isNewReconciler:!1};function Kt(t,e){if(t&&t.defaultProps){e=Ie({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Uc(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ie({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Nl={isMounted:function(t){return(t=t._reactInternals)?Xr(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=pt(),s=er(t),i=xn(r,s);i.payload=e,n!=null&&(i.callback=n),e=Jn(t,i,s),e!==null&&(Jt(e,t,s,r),ka(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=pt(),s=er(t),i=xn(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Jn(t,i,s),e!==null&&(Jt(e,t,s,r),ka(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=pt(),r=er(t),s=xn(n,r);s.tag=2,e!=null&&(s.callback=e),e=Jn(t,s,r),e!==null&&(Jt(e,t,r,n),ka(e,t,r))}};function op(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!eo(n,r)||!eo(s,i):!0}function V0(t,e,n){var r=!1,s=hr,i=e.contextType;return typeof i=="object"&&i!==null?i=qt(i):(s=kt(e)?zr:ct.current,r=e.contextTypes,i=(r=r!=null)?Cs(t,s):hr),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Nl,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function ap(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Nl.enqueueReplaceState(e,e.state,null)}function Bc(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},rd(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=qt(i):(i=kt(e)?zr:ct.current,s.context=Cs(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Uc(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Nl.enqueueReplaceState(s,s.state,null),Ja(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Vs(t,e){try{var n="",r=e;do n+=ex(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Ku(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function $c(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var IE=typeof WeakMap=="function"?WeakMap:Map;function L0(t,e,n){n=xn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){rl||(rl=!0,Zc=r),$c(t,e)},n}function O0(t,e,n){n=xn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){$c(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){$c(t,e),typeof r!="function"&&(Zn===null?Zn=new Set([this]):Zn.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function lp(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new IE;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=UE.bind(null,t,e,n),e.then(t,t))}function up(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function cp(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=xn(-1,1),e.tag=2,Jn(n,e,1))),n.lanes|=1),t)}var AE=Cn.ReactCurrentOwner,Tt=!1;function mt(t,e,n,r){e.child=t===null?d0(e,null,n,r):Ds(e,t.child,n,r)}function hp(t,e,n,r,s){n=n.render;var i=e.ref;return Is(e,s),r=ld(t,e,n,r,i,s),n=ud(),t!==null&&!Tt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Sn(t,e,s)):(be&&n&&Yh(e),e.flags|=1,mt(t,e,r,s),e.child)}function dp(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!_d(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,M0(t,e,i,r,s)):(t=Ca(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:eo,n(o,r)&&t.ref===e.ref)return Sn(t,e,s)}return e.flags|=1,t=tr(i,r),t.ref=e.ref,t.return=e,e.child=t}function M0(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(eo(i,r)&&t.ref===e.ref)if(Tt=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Tt=!0);else return e.lanes=t.lanes,Sn(t,e,s)}return Hc(t,e,n,r,s)}function F0(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},we(xs,At),At|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,we(xs,At),At|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,we(xs,At),At|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,we(xs,At),At|=r;return mt(t,e,s,n),e.child}function z0(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Hc(t,e,n,r,s){var i=kt(n)?zr:ct.current;return i=Cs(e,i),Is(e,s),n=ld(t,e,n,r,i,s),r=ud(),t!==null&&!Tt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Sn(t,e,s)):(be&&r&&Yh(e),e.flags|=1,mt(t,e,n,s),e.child)}function fp(t,e,n,r,s){if(kt(n)){var i=!0;Ga(e)}else i=!1;if(Is(e,s),e.stateNode===null)Aa(t,e),V0(e,n,r),Bc(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var u=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=qt(d):(d=kt(n)?zr:ct.current,d=Cs(e,d));var m=n.getDerivedStateFromProps,p=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function";p||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||u!==d)&&ap(e,o,r,d),Un=!1;var g=e.memoizedState;o.state=g,Ja(e,r,o,s),u=e.memoizedState,l!==r||g!==u||bt.current||Un?(typeof m=="function"&&(Uc(e,n,m,r),u=e.memoizedState),(l=Un||op(e,n,l,r,g,u,d))?(p||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=d,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,m0(t,e),l=e.memoizedProps,d=e.type===e.elementType?l:Kt(e.type,l),o.props=d,p=e.pendingProps,g=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=qt(u):(u=kt(n)?zr:ct.current,u=Cs(e,u));var w=n.getDerivedStateFromProps;(m=typeof w=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==p||g!==u)&&ap(e,o,r,u),Un=!1,g=e.memoizedState,o.state=g,Ja(e,r,o,s);var I=e.memoizedState;l!==p||g!==I||bt.current||Un?(typeof w=="function"&&(Uc(e,n,w,r),I=e.memoizedState),(d=Un||op(e,n,d,r,g,I,u)||!1)?(m||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,I,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,I,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=I),o.props=r,o.state=I,o.context=u,r=d):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),r=!1)}return qc(t,e,n,r,i,s)}function qc(t,e,n,r,s,i){z0(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&Jm(e,n,!1),Sn(t,e,i);r=e.stateNode,AE.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Ds(e,t.child,null,i),e.child=Ds(e,null,l,i)):mt(t,e,l,i),e.memoizedState=r.state,s&&Jm(e,n,!0),e.child}function U0(t){var e=t.stateNode;e.pendingContext?Xm(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Xm(t,e.context,!1),sd(t,e.containerInfo)}function mp(t,e,n,r,s){return Ps(),Jh(s),e.flags|=256,mt(t,e,n,r),e.child}var Wc={dehydrated:null,treeContext:null,retryLane:0};function Gc(t){return{baseLanes:t,cachePool:null,transitions:null}}function B0(t,e,n){var r=e.pendingProps,s=ke.current,i=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),we(ke,s&1),t===null)return Fc(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Dl(o,r,0,null),t=Mr(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Gc(n),e.memoizedState=Wc,t):dd(e,o));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return RE(t,e,o,r,l,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,l=s.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=tr(s,u),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=tr(l,i):(i=Mr(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?Gc(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Wc,r}return i=t.child,t=i.sibling,r=tr(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function dd(t,e){return e=Dl({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function ua(t,e,n,r){return r!==null&&Jh(r),Ds(e,t.child,null,n),t=dd(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function RE(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=Ku(Error(F(422))),ua(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Dl({mode:"visible",children:r.children},s,0,null),i=Mr(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Ds(e,t.child,null,o),e.child.memoizedState=Gc(o),e.memoizedState=Wc,i);if(!(e.mode&1))return ua(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(F(419)),r=Ku(i,r,void 0),ua(t,e,o,r)}if(l=(o&t.childLanes)!==0,Tt||l){if(r=Xe,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,kn(t,s),Jt(r,t,s,-1))}return vd(),r=Ku(Error(F(421))),ua(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=BE.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Nt=Xn(s.nextSibling),Dt=e,be=!0,Yt=null,t!==null&&(Mt[Ft++]=_n,Mt[Ft++]=wn,Mt[Ft++]=Ur,_n=t.id,wn=t.overflow,Ur=e),e=dd(e,r.children),e.flags|=4096,e)}function pp(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),zc(t.return,e,n)}function Qu(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function $0(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(mt(t,e,r.children,n),r=ke.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&pp(t,n,e);else if(t.tag===19)pp(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(we(ke,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Za(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Qu(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Za(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Qu(e,!0,n,null,i);break;case"together":Qu(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Aa(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Sn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),$r|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(F(153));if(e.child!==null){for(t=e.child,n=tr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=tr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function NE(t,e,n){switch(e.tag){case 3:U0(e),Ps();break;case 5:p0(e);break;case 1:kt(e.type)&&Ga(e);break;case 4:sd(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;we(Ya,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(we(ke,ke.current&1),e.flags|=128,null):n&e.child.childLanes?B0(t,e,n):(we(ke,ke.current&1),t=Sn(t,e,n),t!==null?t.sibling:null);we(ke,ke.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return $0(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),we(ke,ke.current),r)break;return null;case 22:case 23:return e.lanes=0,F0(t,e,n)}return Sn(t,e,n)}var H0,Kc,q0,W0;H0=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Kc=function(){};q0=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,jr(fn.current);var i=null;switch(n){case"input":s=gc(t,s),r=gc(t,r),i=[];break;case"select":s=Ie({},s,{value:void 0}),r=Ie({},r,{value:void 0}),i=[];break;case"textarea":s=_c(t,s),r=_c(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=qa)}xc(n,r);var o;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var l=s[d];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Gi.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var u=r[d];if(l=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&u!==l&&(u!=null||l!=null))if(d==="style")if(l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(i||(i=[]),i.push(d,n)),n=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(i=i||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Gi.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&Ee("scroll",t),i||l===u||(i=[])):(i=i||[]).push(d,u))}n&&(i=i||[]).push("style",n);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};W0=function(t,e,n,r){n!==r&&(e.flags|=4)};function xi(t,e){if(!be)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function it(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function CE(t,e,n){var r=e.pendingProps;switch(Xh(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return it(e),null;case 1:return kt(e.type)&&Wa(),it(e),null;case 3:return r=e.stateNode,js(),Te(bt),Te(ct),od(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(aa(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Yt!==null&&(nh(Yt),Yt=null))),Kc(t,e),it(e),null;case 5:id(e);var s=jr(io.current);if(n=e.type,t!==null&&e.stateNode!=null)q0(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(F(166));return it(e),null}if(t=jr(fn.current),aa(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[cn]=e,r[ro]=i,t=(e.mode&1)!==0,n){case"dialog":Ee("cancel",r),Ee("close",r);break;case"iframe":case"object":case"embed":Ee("load",r);break;case"video":case"audio":for(s=0;s<Ii.length;s++)Ee(Ii[s],r);break;case"source":Ee("error",r);break;case"img":case"image":case"link":Ee("error",r),Ee("load",r);break;case"details":Ee("toggle",r);break;case"input":bm(r,i),Ee("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Ee("invalid",r);break;case"textarea":Sm(r,i),Ee("invalid",r)}xc(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&oa(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&oa(r.textContent,l,t),s=["children",""+l]):Gi.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Ee("scroll",r)}switch(n){case"input":Jo(r),km(r,i,!0);break;case"textarea":Jo(r),Im(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=qa)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=wy(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[cn]=e,t[ro]=r,H0(t,e,!1,!1),e.stateNode=t;e:{switch(o=Ec(n,r),n){case"dialog":Ee("cancel",t),Ee("close",t),s=r;break;case"iframe":case"object":case"embed":Ee("load",t),s=r;break;case"video":case"audio":for(s=0;s<Ii.length;s++)Ee(Ii[s],t);s=r;break;case"source":Ee("error",t),s=r;break;case"img":case"image":case"link":Ee("error",t),Ee("load",t),s=r;break;case"details":Ee("toggle",t),s=r;break;case"input":bm(t,r),s=gc(t,r),Ee("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Ie({},r,{value:void 0}),Ee("invalid",t);break;case"textarea":Sm(t,r),s=_c(t,r),Ee("invalid",t);break;default:s=r}xc(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var u=l[i];i==="style"?Ty(t,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&xy(t,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Ki(t,u):typeof u=="number"&&Ki(t,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Gi.hasOwnProperty(i)?u!=null&&i==="onScroll"&&Ee("scroll",t):u!=null&&Lh(t,i,u,o))}switch(n){case"input":Jo(t),km(t,r,!1);break;case"textarea":Jo(t),Im(t);break;case"option":r.value!=null&&t.setAttribute("value",""+cr(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Ts(t,!!r.multiple,i,!1):r.defaultValue!=null&&Ts(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=qa)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return it(e),null;case 6:if(t&&e.stateNode!=null)W0(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(F(166));if(n=jr(io.current),jr(fn.current),aa(e)){if(r=e.stateNode,n=e.memoizedProps,r[cn]=e,(i=r.nodeValue!==n)&&(t=Dt,t!==null))switch(t.tag){case 3:oa(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&oa(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[cn]=e,e.stateNode=r}return it(e),null;case 13:if(Te(ke),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(be&&Nt!==null&&e.mode&1&&!(e.flags&128))c0(),Ps(),e.flags|=98560,i=!1;else if(i=aa(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(F(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(F(317));i[cn]=e}else Ps(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;it(e),i=!1}else Yt!==null&&(nh(Yt),Yt=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||ke.current&1?He===0&&(He=3):vd())),e.updateQueue!==null&&(e.flags|=4),it(e),null);case 4:return js(),Kc(t,e),t===null&&to(e.stateNode.containerInfo),it(e),null;case 10:return td(e.type._context),it(e),null;case 17:return kt(e.type)&&Wa(),it(e),null;case 19:if(Te(ke),i=e.memoizedState,i===null)return it(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)xi(i,!1);else{if(He!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Za(t),o!==null){for(e.flags|=128,xi(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return we(ke,ke.current&1|2),e.child}t=t.sibling}i.tail!==null&&Ve()>Ls&&(e.flags|=128,r=!0,xi(i,!1),e.lanes=4194304)}else{if(!r)if(t=Za(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),xi(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!be)return it(e),null}else 2*Ve()-i.renderingStartTime>Ls&&n!==1073741824&&(e.flags|=128,r=!0,xi(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Ve(),e.sibling=null,n=ke.current,we(ke,r?n&1|2:n&1),e):(it(e),null);case 22:case 23:return yd(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?At&1073741824&&(it(e),e.subtreeFlags&6&&(e.flags|=8192)):it(e),null;case 24:return null;case 25:return null}throw Error(F(156,e.tag))}function PE(t,e){switch(Xh(e),e.tag){case 1:return kt(e.type)&&Wa(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return js(),Te(bt),Te(ct),od(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return id(e),null;case 13:if(Te(ke),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(F(340));Ps()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Te(ke),null;case 4:return js(),null;case 10:return td(e.type._context),null;case 22:case 23:return yd(),null;case 24:return null;default:return null}}var ca=!1,lt=!1,DE=typeof WeakSet=="function"?WeakSet:Set,G=null;function ws(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ne(t,e,r)}else n.current=null}function Qc(t,e,n){try{n()}catch(r){Ne(t,e,r)}}var gp=!1;function jE(t,e){if(Pc=Ba,t=Xy(),Qh(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,u=-1,d=0,m=0,p=t,g=null;t:for(;;){for(var w;p!==n||s!==0&&p.nodeType!==3||(l=o+s),p!==i||r!==0&&p.nodeType!==3||(u=o+r),p.nodeType===3&&(o+=p.nodeValue.length),(w=p.firstChild)!==null;)g=p,p=w;for(;;){if(p===t)break t;if(g===n&&++d===s&&(l=o),g===i&&++m===r&&(u=o),(w=p.nextSibling)!==null)break;p=g,g=p.parentNode}p=w}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Dc={focusedElem:t,selectionRange:n},Ba=!1,G=e;G!==null;)if(e=G,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,G=t;else for(;G!==null;){e=G;try{var I=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(I!==null){var R=I.memoizedProps,C=I.memoizedState,T=e.stateNode,y=T.getSnapshotBeforeUpdate(e.elementType===e.type?R:Kt(e.type,R),C);T.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var k=e.stateNode.containerInfo;k.nodeType===1?k.textContent="":k.nodeType===9&&k.documentElement&&k.removeChild(k.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(F(163))}}catch(D){Ne(e,e.return,D)}if(t=e.sibling,t!==null){t.return=e.return,G=t;break}G=e.return}return I=gp,gp=!1,I}function Oi(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Qc(e,n,i)}s=s.next}while(s!==r)}}function Cl(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Yc(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function G0(t){var e=t.alternate;e!==null&&(t.alternate=null,G0(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[cn],delete e[ro],delete e[Lc],delete e[gE],delete e[yE])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function K0(t){return t.tag===5||t.tag===3||t.tag===4}function yp(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||K0(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Xc(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=qa));else if(r!==4&&(t=t.child,t!==null))for(Xc(t,e,n),t=t.sibling;t!==null;)Xc(t,e,n),t=t.sibling}function Jc(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Jc(t,e,n),t=t.sibling;t!==null;)Jc(t,e,n),t=t.sibling}var Ze=null,Qt=!1;function Fn(t,e,n){for(n=n.child;n!==null;)Q0(t,e,n),n=n.sibling}function Q0(t,e,n){if(dn&&typeof dn.onCommitFiberUnmount=="function")try{dn.onCommitFiberUnmount(Tl,n)}catch{}switch(n.tag){case 5:lt||ws(n,e);case 6:var r=Ze,s=Qt;Ze=null,Fn(t,e,n),Ze=r,Qt=s,Ze!==null&&(Qt?(t=Ze,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ze.removeChild(n.stateNode));break;case 18:Ze!==null&&(Qt?(t=Ze,n=n.stateNode,t.nodeType===8?Bu(t.parentNode,n):t.nodeType===1&&Bu(t,n),Ji(t)):Bu(Ze,n.stateNode));break;case 4:r=Ze,s=Qt,Ze=n.stateNode.containerInfo,Qt=!0,Fn(t,e,n),Ze=r,Qt=s;break;case 0:case 11:case 14:case 15:if(!lt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Qc(n,e,o),s=s.next}while(s!==r)}Fn(t,e,n);break;case 1:if(!lt&&(ws(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Ne(n,e,l)}Fn(t,e,n);break;case 21:Fn(t,e,n);break;case 22:n.mode&1?(lt=(r=lt)||n.memoizedState!==null,Fn(t,e,n),lt=r):Fn(t,e,n);break;default:Fn(t,e,n)}}function vp(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new DE),e.forEach(function(r){var s=$E.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Gt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:Ze=l.stateNode,Qt=!1;break e;case 3:Ze=l.stateNode.containerInfo,Qt=!0;break e;case 4:Ze=l.stateNode.containerInfo,Qt=!0;break e}l=l.return}if(Ze===null)throw Error(F(160));Q0(i,o,s),Ze=null,Qt=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(d){Ne(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Y0(e,t),e=e.sibling}function Y0(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Gt(e,t),an(t),r&4){try{Oi(3,t,t.return),Cl(3,t)}catch(R){Ne(t,t.return,R)}try{Oi(5,t,t.return)}catch(R){Ne(t,t.return,R)}}break;case 1:Gt(e,t),an(t),r&512&&n!==null&&ws(n,n.return);break;case 5:if(Gt(e,t),an(t),r&512&&n!==null&&ws(n,n.return),t.flags&32){var s=t.stateNode;try{Ki(s,"")}catch(R){Ne(t,t.return,R)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&vy(s,i),Ec(l,o);var d=Ec(l,i);for(o=0;o<u.length;o+=2){var m=u[o],p=u[o+1];m==="style"?Ty(s,p):m==="dangerouslySetInnerHTML"?xy(s,p):m==="children"?Ki(s,p):Lh(s,m,p,d)}switch(l){case"input":yc(s,i);break;case"textarea":_y(s,i);break;case"select":var g=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var w=i.value;w!=null?Ts(s,!!i.multiple,w,!1):g!==!!i.multiple&&(i.defaultValue!=null?Ts(s,!!i.multiple,i.defaultValue,!0):Ts(s,!!i.multiple,i.multiple?[]:"",!1))}s[ro]=i}catch(R){Ne(t,t.return,R)}}break;case 6:if(Gt(e,t),an(t),r&4){if(t.stateNode===null)throw Error(F(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(R){Ne(t,t.return,R)}}break;case 3:if(Gt(e,t),an(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ji(e.containerInfo)}catch(R){Ne(t,t.return,R)}break;case 4:Gt(e,t),an(t);break;case 13:Gt(e,t),an(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(pd=Ve())),r&4&&vp(t);break;case 22:if(m=n!==null&&n.memoizedState!==null,t.mode&1?(lt=(d=lt)||m,Gt(e,t),lt=d):Gt(e,t),an(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!m&&t.mode&1)for(G=t,m=t.child;m!==null;){for(p=G=m;G!==null;){switch(g=G,w=g.child,g.tag){case 0:case 11:case 14:case 15:Oi(4,g,g.return);break;case 1:ws(g,g.return);var I=g.stateNode;if(typeof I.componentWillUnmount=="function"){r=g,n=g.return;try{e=r,I.props=e.memoizedProps,I.state=e.memoizedState,I.componentWillUnmount()}catch(R){Ne(r,n,R)}}break;case 5:ws(g,g.return);break;case 22:if(g.memoizedState!==null){wp(p);continue}}w!==null?(w.return=g,G=w):wp(p)}m=m.sibling}e:for(m=null,p=t;;){if(p.tag===5){if(m===null){m=p;try{s=p.stateNode,d?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=p.stateNode,u=p.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=Ey("display",o))}catch(R){Ne(t,t.return,R)}}}else if(p.tag===6){if(m===null)try{p.stateNode.nodeValue=d?"":p.memoizedProps}catch(R){Ne(t,t.return,R)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;m===p&&(m=null),p=p.return}m===p&&(m=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:Gt(e,t),an(t),r&4&&vp(t);break;case 21:break;default:Gt(e,t),an(t)}}function an(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(K0(n)){var r=n;break e}n=n.return}throw Error(F(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Ki(s,""),r.flags&=-33);var i=yp(t);Jc(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,l=yp(t);Xc(t,l,o);break;default:throw Error(F(161))}}catch(u){Ne(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function VE(t,e,n){G=t,X0(t)}function X0(t,e,n){for(var r=(t.mode&1)!==0;G!==null;){var s=G,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||ca;if(!o){var l=s.alternate,u=l!==null&&l.memoizedState!==null||lt;l=ca;var d=lt;if(ca=o,(lt=u)&&!d)for(G=s;G!==null;)o=G,u=o.child,o.tag===22&&o.memoizedState!==null?xp(s):u!==null?(u.return=o,G=u):xp(s);for(;i!==null;)G=i,X0(i),i=i.sibling;G=s,ca=l,lt=d}_p(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,G=i):_p(t)}}function _p(t){for(;G!==null;){var e=G;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:lt||Cl(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!lt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Kt(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&rp(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}rp(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var m=d.memoizedState;if(m!==null){var p=m.dehydrated;p!==null&&Ji(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(F(163))}lt||e.flags&512&&Yc(e)}catch(g){Ne(e,e.return,g)}}if(e===t){G=null;break}if(n=e.sibling,n!==null){n.return=e.return,G=n;break}G=e.return}}function wp(t){for(;G!==null;){var e=G;if(e===t){G=null;break}var n=e.sibling;if(n!==null){n.return=e.return,G=n;break}G=e.return}}function xp(t){for(;G!==null;){var e=G;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Cl(4,e)}catch(u){Ne(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(u){Ne(e,s,u)}}var i=e.return;try{Yc(e)}catch(u){Ne(e,i,u)}break;case 5:var o=e.return;try{Yc(e)}catch(u){Ne(e,o,u)}}}catch(u){Ne(e,e.return,u)}if(e===t){G=null;break}var l=e.sibling;if(l!==null){l.return=e.return,G=l;break}G=e.return}}var LE=Math.ceil,nl=Cn.ReactCurrentDispatcher,fd=Cn.ReactCurrentOwner,$t=Cn.ReactCurrentBatchConfig,he=0,Xe=null,Me=null,tt=0,At=0,xs=wr(0),He=0,uo=null,$r=0,Pl=0,md=0,Mi=null,xt=null,pd=0,Ls=1/0,yn=null,rl=!1,Zc=null,Zn=null,ha=!1,Wn=null,sl=0,Fi=0,eh=null,Ra=-1,Na=0;function pt(){return he&6?Ve():Ra!==-1?Ra:Ra=Ve()}function er(t){return t.mode&1?he&2&&tt!==0?tt&-tt:_E.transition!==null?(Na===0&&(Na=Vy()),Na):(t=me,t!==0||(t=window.event,t=t===void 0?16:By(t.type)),t):1}function Jt(t,e,n,r){if(50<Fi)throw Fi=0,eh=null,Error(F(185));Eo(t,n,r),(!(he&2)||t!==Xe)&&(t===Xe&&(!(he&2)&&(Pl|=n),He===4&&$n(t,tt)),St(t,r),n===1&&he===0&&!(e.mode&1)&&(Ls=Ve()+500,Al&&xr()))}function St(t,e){var n=t.callbackNode;_x(t,e);var r=Ua(t,t===Xe?tt:0);if(r===0)n!==null&&Nm(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Nm(n),e===1)t.tag===0?vE(Ep.bind(null,t)):a0(Ep.bind(null,t)),mE(function(){!(he&6)&&xr()}),n=null;else{switch(Ly(r)){case 1:n=Uh;break;case 4:n=Dy;break;case 16:n=za;break;case 536870912:n=jy;break;default:n=za}n=iv(n,J0.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function J0(t,e){if(Ra=-1,Na=0,he&6)throw Error(F(327));var n=t.callbackNode;if(As()&&t.callbackNode!==n)return null;var r=Ua(t,t===Xe?tt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=il(t,r);else{e=r;var s=he;he|=2;var i=ev();(Xe!==t||tt!==e)&&(yn=null,Ls=Ve()+500,Or(t,e));do try{FE();break}catch(l){Z0(t,l)}while(!0);ed(),nl.current=i,he=s,Me!==null?e=0:(Xe=null,tt=0,e=He)}if(e!==0){if(e===2&&(s=Ic(t),s!==0&&(r=s,e=th(t,s))),e===1)throw n=uo,Or(t,0),$n(t,r),St(t,Ve()),n;if(e===6)$n(t,r);else{if(s=t.current.alternate,!(r&30)&&!OE(s)&&(e=il(t,r),e===2&&(i=Ic(t),i!==0&&(r=i,e=th(t,i))),e===1))throw n=uo,Or(t,0),$n(t,r),St(t,Ve()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(F(345));case 2:Nr(t,xt,yn);break;case 3:if($n(t,r),(r&130023424)===r&&(e=pd+500-Ve(),10<e)){if(Ua(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){pt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Vc(Nr.bind(null,t,xt,yn),e);break}Nr(t,xt,yn);break;case 4:if($n(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-Xt(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Ve()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*LE(r/1960))-r,10<r){t.timeoutHandle=Vc(Nr.bind(null,t,xt,yn),r);break}Nr(t,xt,yn);break;case 5:Nr(t,xt,yn);break;default:throw Error(F(329))}}}return St(t,Ve()),t.callbackNode===n?J0.bind(null,t):null}function th(t,e){var n=Mi;return t.current.memoizedState.isDehydrated&&(Or(t,e).flags|=256),t=il(t,e),t!==2&&(e=xt,xt=n,e!==null&&nh(e)),t}function nh(t){xt===null?xt=t:xt.push.apply(xt,t)}function OE(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!tn(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function $n(t,e){for(e&=~md,e&=~Pl,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Xt(e),r=1<<n;t[n]=-1,e&=~r}}function Ep(t){if(he&6)throw Error(F(327));As();var e=Ua(t,0);if(!(e&1))return St(t,Ve()),null;var n=il(t,e);if(t.tag!==0&&n===2){var r=Ic(t);r!==0&&(e=r,n=th(t,r))}if(n===1)throw n=uo,Or(t,0),$n(t,e),St(t,Ve()),n;if(n===6)throw Error(F(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Nr(t,xt,yn),St(t,Ve()),null}function gd(t,e){var n=he;he|=1;try{return t(e)}finally{he=n,he===0&&(Ls=Ve()+500,Al&&xr())}}function Hr(t){Wn!==null&&Wn.tag===0&&!(he&6)&&As();var e=he;he|=1;var n=$t.transition,r=me;try{if($t.transition=null,me=1,t)return t()}finally{me=r,$t.transition=n,he=e,!(he&6)&&xr()}}function yd(){At=xs.current,Te(xs)}function Or(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,fE(n)),Me!==null)for(n=Me.return;n!==null;){var r=n;switch(Xh(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Wa();break;case 3:js(),Te(bt),Te(ct),od();break;case 5:id(r);break;case 4:js();break;case 13:Te(ke);break;case 19:Te(ke);break;case 10:td(r.type._context);break;case 22:case 23:yd()}n=n.return}if(Xe=t,Me=t=tr(t.current,null),tt=At=e,He=0,uo=null,md=Pl=$r=0,xt=Mi=null,Dr!==null){for(e=0;e<Dr.length;e++)if(n=Dr[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Dr=null}return t}function Z0(t,e){do{var n=Me;try{if(ed(),Sa.current=tl,el){for(var r=Se.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}el=!1}if(Br=0,Ke=$e=Se=null,Li=!1,oo=0,fd.current=null,n===null||n.return===null){He=1,uo=e,Me=null;break}e:{var i=t,o=n.return,l=n,u=e;if(e=tt,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,m=l,p=m.tag;if(!(m.mode&1)&&(p===0||p===11||p===15)){var g=m.alternate;g?(m.updateQueue=g.updateQueue,m.memoizedState=g.memoizedState,m.lanes=g.lanes):(m.updateQueue=null,m.memoizedState=null)}var w=up(o);if(w!==null){w.flags&=-257,cp(w,o,l,i,e),w.mode&1&&lp(i,d,e),e=w,u=d;var I=e.updateQueue;if(I===null){var R=new Set;R.add(u),e.updateQueue=R}else I.add(u);break e}else{if(!(e&1)){lp(i,d,e),vd();break e}u=Error(F(426))}}else if(be&&l.mode&1){var C=up(o);if(C!==null){!(C.flags&65536)&&(C.flags|=256),cp(C,o,l,i,e),Jh(Vs(u,l));break e}}i=u=Vs(u,l),He!==4&&(He=2),Mi===null?Mi=[i]:Mi.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var T=L0(i,u,e);np(i,T);break e;case 1:l=u;var y=i.type,k=i.stateNode;if(!(i.flags&128)&&(typeof y.getDerivedStateFromError=="function"||k!==null&&typeof k.componentDidCatch=="function"&&(Zn===null||!Zn.has(k)))){i.flags|=65536,e&=-e,i.lanes|=e;var D=O0(i,l,e);np(i,D);break e}}i=i.return}while(i!==null)}nv(n)}catch(O){e=O,Me===n&&n!==null&&(Me=n=n.return);continue}break}while(!0)}function ev(){var t=nl.current;return nl.current=tl,t===null?tl:t}function vd(){(He===0||He===3||He===2)&&(He=4),Xe===null||!($r&268435455)&&!(Pl&268435455)||$n(Xe,tt)}function il(t,e){var n=he;he|=2;var r=ev();(Xe!==t||tt!==e)&&(yn=null,Or(t,e));do try{ME();break}catch(s){Z0(t,s)}while(!0);if(ed(),he=n,nl.current=r,Me!==null)throw Error(F(261));return Xe=null,tt=0,He}function ME(){for(;Me!==null;)tv(Me)}function FE(){for(;Me!==null&&!cx();)tv(Me)}function tv(t){var e=sv(t.alternate,t,At);t.memoizedProps=t.pendingProps,e===null?nv(t):Me=e,fd.current=null}function nv(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=PE(n,e),n!==null){n.flags&=32767,Me=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{He=6,Me=null;return}}else if(n=CE(n,e,At),n!==null){Me=n;return}if(e=e.sibling,e!==null){Me=e;return}Me=e=t}while(e!==null);He===0&&(He=5)}function Nr(t,e,n){var r=me,s=$t.transition;try{$t.transition=null,me=1,zE(t,e,n,r)}finally{$t.transition=s,me=r}return null}function zE(t,e,n,r){do As();while(Wn!==null);if(he&6)throw Error(F(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(F(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(wx(t,i),t===Xe&&(Me=Xe=null,tt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ha||(ha=!0,iv(za,function(){return As(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=$t.transition,$t.transition=null;var o=me;me=1;var l=he;he|=4,fd.current=null,jE(t,n),Y0(n,t),oE(Dc),Ba=!!Pc,Dc=Pc=null,t.current=n,VE(n),hx(),he=l,me=o,$t.transition=i}else t.current=n;if(ha&&(ha=!1,Wn=t,sl=s),i=t.pendingLanes,i===0&&(Zn=null),mx(n.stateNode),St(t,Ve()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(rl)throw rl=!1,t=Zc,Zc=null,t;return sl&1&&t.tag!==0&&As(),i=t.pendingLanes,i&1?t===eh?Fi++:(Fi=0,eh=t):Fi=0,xr(),null}function As(){if(Wn!==null){var t=Ly(sl),e=$t.transition,n=me;try{if($t.transition=null,me=16>t?16:t,Wn===null)var r=!1;else{if(t=Wn,Wn=null,sl=0,he&6)throw Error(F(331));var s=he;for(he|=4,G=t.current;G!==null;){var i=G,o=i.child;if(G.flags&16){var l=i.deletions;if(l!==null){for(var u=0;u<l.length;u++){var d=l[u];for(G=d;G!==null;){var m=G;switch(m.tag){case 0:case 11:case 15:Oi(8,m,i)}var p=m.child;if(p!==null)p.return=m,G=p;else for(;G!==null;){m=G;var g=m.sibling,w=m.return;if(G0(m),m===d){G=null;break}if(g!==null){g.return=w,G=g;break}G=w}}}var I=i.alternate;if(I!==null){var R=I.child;if(R!==null){I.child=null;do{var C=R.sibling;R.sibling=null,R=C}while(R!==null)}}G=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,G=o;else e:for(;G!==null;){if(i=G,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Oi(9,i,i.return)}var T=i.sibling;if(T!==null){T.return=i.return,G=T;break e}G=i.return}}var y=t.current;for(G=y;G!==null;){o=G;var k=o.child;if(o.subtreeFlags&2064&&k!==null)k.return=o,G=k;else e:for(o=y;G!==null;){if(l=G,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Cl(9,l)}}catch(O){Ne(l,l.return,O)}if(l===o){G=null;break e}var D=l.sibling;if(D!==null){D.return=l.return,G=D;break e}G=l.return}}if(he=s,xr(),dn&&typeof dn.onPostCommitFiberRoot=="function")try{dn.onPostCommitFiberRoot(Tl,t)}catch{}r=!0}return r}finally{me=n,$t.transition=e}}return!1}function Tp(t,e,n){e=Vs(n,e),e=L0(t,e,1),t=Jn(t,e,1),e=pt(),t!==null&&(Eo(t,1,e),St(t,e))}function Ne(t,e,n){if(t.tag===3)Tp(t,t,n);else for(;e!==null;){if(e.tag===3){Tp(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Zn===null||!Zn.has(r))){t=Vs(n,t),t=O0(e,t,1),e=Jn(e,t,1),t=pt(),e!==null&&(Eo(e,1,t),St(e,t));break}}e=e.return}}function UE(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=pt(),t.pingedLanes|=t.suspendedLanes&n,Xe===t&&(tt&n)===n&&(He===4||He===3&&(tt&130023424)===tt&&500>Ve()-pd?Or(t,0):md|=n),St(t,e)}function rv(t,e){e===0&&(t.mode&1?(e=ta,ta<<=1,!(ta&130023424)&&(ta=4194304)):e=1);var n=pt();t=kn(t,e),t!==null&&(Eo(t,e,n),St(t,n))}function BE(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),rv(t,n)}function $E(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(F(314))}r!==null&&r.delete(e),rv(t,n)}var sv;sv=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||bt.current)Tt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Tt=!1,NE(t,e,n);Tt=!!(t.flags&131072)}else Tt=!1,be&&e.flags&1048576&&l0(e,Qa,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Aa(t,e),t=e.pendingProps;var s=Cs(e,ct.current);Is(e,n),s=ld(null,e,r,t,s,n);var i=ud();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,kt(r)?(i=!0,Ga(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,rd(e),s.updater=Nl,e.stateNode=s,s._reactInternals=e,Bc(e,r,t,n),e=qc(null,e,r,!0,i,n)):(e.tag=0,be&&i&&Yh(e),mt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Aa(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=qE(r),t=Kt(r,t),s){case 0:e=Hc(null,e,r,t,n);break e;case 1:e=fp(null,e,r,t,n);break e;case 11:e=hp(null,e,r,t,n);break e;case 14:e=dp(null,e,r,Kt(r.type,t),n);break e}throw Error(F(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Kt(r,s),Hc(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Kt(r,s),fp(t,e,r,s,n);case 3:e:{if(U0(e),t===null)throw Error(F(387));r=e.pendingProps,i=e.memoizedState,s=i.element,m0(t,e),Ja(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Vs(Error(F(423)),e),e=mp(t,e,r,n,s);break e}else if(r!==s){s=Vs(Error(F(424)),e),e=mp(t,e,r,n,s);break e}else for(Nt=Xn(e.stateNode.containerInfo.firstChild),Dt=e,be=!0,Yt=null,n=d0(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ps(),r===s){e=Sn(t,e,n);break e}mt(t,e,r,n)}e=e.child}return e;case 5:return p0(e),t===null&&Fc(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,jc(r,s)?o=null:i!==null&&jc(r,i)&&(e.flags|=32),z0(t,e),mt(t,e,o,n),e.child;case 6:return t===null&&Fc(e),null;case 13:return B0(t,e,n);case 4:return sd(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Ds(e,null,r,n):mt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Kt(r,s),hp(t,e,r,s,n);case 7:return mt(t,e,e.pendingProps,n),e.child;case 8:return mt(t,e,e.pendingProps.children,n),e.child;case 12:return mt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,we(Ya,r._currentValue),r._currentValue=o,i!==null)if(tn(i.value,o)){if(i.children===s.children&&!bt.current){e=Sn(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=xn(-1,n&-n),u.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var m=d.pending;m===null?u.next=u:(u.next=m.next,m.next=u),d.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),zc(i.return,n,e),l.lanes|=n;break}u=u.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(F(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),zc(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}mt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Is(e,n),s=qt(s),r=r(s),e.flags|=1,mt(t,e,r,n),e.child;case 14:return r=e.type,s=Kt(r,e.pendingProps),s=Kt(r.type,s),dp(t,e,r,s,n);case 15:return M0(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Kt(r,s),Aa(t,e),e.tag=1,kt(r)?(t=!0,Ga(e)):t=!1,Is(e,n),V0(e,r,s),Bc(e,r,s,n),qc(null,e,r,!0,t,n);case 19:return $0(t,e,n);case 22:return F0(t,e,n)}throw Error(F(156,e.tag))};function iv(t,e){return Py(t,e)}function HE(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ut(t,e,n,r){return new HE(t,e,n,r)}function _d(t){return t=t.prototype,!(!t||!t.isReactComponent)}function qE(t){if(typeof t=="function")return _d(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Mh)return 11;if(t===Fh)return 14}return 2}function tr(t,e){var n=t.alternate;return n===null?(n=Ut(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Ca(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")_d(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case hs:return Mr(n.children,s,i,e);case Oh:o=8,s|=8;break;case dc:return t=Ut(12,n,e,s|2),t.elementType=dc,t.lanes=i,t;case fc:return t=Ut(13,n,e,s),t.elementType=fc,t.lanes=i,t;case mc:return t=Ut(19,n,e,s),t.elementType=mc,t.lanes=i,t;case py:return Dl(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case fy:o=10;break e;case my:o=9;break e;case Mh:o=11;break e;case Fh:o=14;break e;case zn:o=16,r=null;break e}throw Error(F(130,t==null?t:typeof t,""))}return e=Ut(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Mr(t,e,n,r){return t=Ut(7,t,r,e),t.lanes=n,t}function Dl(t,e,n,r){return t=Ut(22,t,r,e),t.elementType=py,t.lanes=n,t.stateNode={isHidden:!1},t}function Yu(t,e,n){return t=Ut(6,t,null,e),t.lanes=n,t}function Xu(t,e,n){return e=Ut(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function WE(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Cu(0),this.expirationTimes=Cu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Cu(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function wd(t,e,n,r,s,i,o,l,u){return t=new WE(t,e,n,l,u),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Ut(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},rd(i),t}function GE(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:cs,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function ov(t){if(!t)return hr;t=t._reactInternals;e:{if(Xr(t)!==t||t.tag!==1)throw Error(F(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(kt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(F(171))}if(t.tag===1){var n=t.type;if(kt(n))return o0(t,n,e)}return e}function av(t,e,n,r,s,i,o,l,u){return t=wd(n,r,!0,t,s,i,o,l,u),t.context=ov(null),n=t.current,r=pt(),s=er(n),i=xn(r,s),i.callback=e??null,Jn(n,i,s),t.current.lanes=s,Eo(t,s,r),St(t,r),t}function jl(t,e,n,r){var s=e.current,i=pt(),o=er(s);return n=ov(n),e.context===null?e.context=n:e.pendingContext=n,e=xn(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Jn(s,e,o),t!==null&&(Jt(t,s,o,i),ka(t,s,o)),o}function ol(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function bp(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function xd(t,e){bp(t,e),(t=t.alternate)&&bp(t,e)}function KE(){return null}var lv=typeof reportError=="function"?reportError:function(t){console.error(t)};function Ed(t){this._internalRoot=t}Vl.prototype.render=Ed.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(F(409));jl(t,e,null,null)};Vl.prototype.unmount=Ed.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Hr(function(){jl(null,t,null,null)}),e[bn]=null}};function Vl(t){this._internalRoot=t}Vl.prototype.unstable_scheduleHydration=function(t){if(t){var e=Fy();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Bn.length&&e!==0&&e<Bn[n].priority;n++);Bn.splice(n,0,t),n===0&&Uy(t)}};function Td(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Ll(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function kp(){}function QE(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var d=ol(o);i.call(d)}}var o=av(e,r,t,0,null,!1,!1,"",kp);return t._reactRootContainer=o,t[bn]=o.current,to(t.nodeType===8?t.parentNode:t),Hr(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var d=ol(u);l.call(d)}}var u=wd(t,0,!1,null,null,!1,!1,"",kp);return t._reactRootContainer=u,t[bn]=u.current,to(t.nodeType===8?t.parentNode:t),Hr(function(){jl(e,u,n,r)}),u}function Ol(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var u=ol(o);l.call(u)}}jl(e,o,t,s)}else o=QE(n,e,t,s,r);return ol(o)}Oy=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Si(e.pendingLanes);n!==0&&(Bh(e,n|1),St(e,Ve()),!(he&6)&&(Ls=Ve()+500,xr()))}break;case 13:Hr(function(){var r=kn(t,1);if(r!==null){var s=pt();Jt(r,t,1,s)}}),xd(t,1)}};$h=function(t){if(t.tag===13){var e=kn(t,134217728);if(e!==null){var n=pt();Jt(e,t,134217728,n)}xd(t,134217728)}};My=function(t){if(t.tag===13){var e=er(t),n=kn(t,e);if(n!==null){var r=pt();Jt(n,t,e,r)}xd(t,e)}};Fy=function(){return me};zy=function(t,e){var n=me;try{return me=t,e()}finally{me=n}};bc=function(t,e,n){switch(e){case"input":if(yc(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Il(r);if(!s)throw Error(F(90));yy(r),yc(r,s)}}}break;case"textarea":_y(t,n);break;case"select":e=n.value,e!=null&&Ts(t,!!n.multiple,e,!1)}};Sy=gd;Iy=Hr;var YE={usingClientEntryPoint:!1,Events:[bo,ps,Il,by,ky,gd]},Ei={findFiberByHostInstance:Pr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},XE={bundleType:Ei.bundleType,version:Ei.version,rendererPackageName:Ei.rendererPackageName,rendererConfig:Ei.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Cn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Ny(t),t===null?null:t.stateNode},findFiberByHostInstance:Ei.findFiberByHostInstance||KE,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var da=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!da.isDisabled&&da.supportsFiber)try{Tl=da.inject(XE),dn=da}catch{}}Lt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=YE;Lt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Td(e))throw Error(F(200));return GE(t,e,null,n)};Lt.createRoot=function(t,e){if(!Td(t))throw Error(F(299));var n=!1,r="",s=lv;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=wd(t,1,!1,null,null,n,!1,r,s),t[bn]=e.current,to(t.nodeType===8?t.parentNode:t),new Ed(e)};Lt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(F(188)):(t=Object.keys(t).join(","),Error(F(268,t)));return t=Ny(e),t=t===null?null:t.stateNode,t};Lt.flushSync=function(t){return Hr(t)};Lt.hydrate=function(t,e,n){if(!Ll(e))throw Error(F(200));return Ol(null,t,e,!0,n)};Lt.hydrateRoot=function(t,e,n){if(!Td(t))throw Error(F(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=lv;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=av(e,null,t,1,n??null,s,!1,i,o),t[bn]=e.current,to(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Vl(e)};Lt.render=function(t,e,n){if(!Ll(e))throw Error(F(200));return Ol(null,t,e,!1,n)};Lt.unmountComponentAtNode=function(t){if(!Ll(t))throw Error(F(40));return t._reactRootContainer?(Hr(function(){Ol(null,null,t,!1,function(){t._reactRootContainer=null,t[bn]=null})}),!0):!1};Lt.unstable_batchedUpdates=gd;Lt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Ll(n))throw Error(F(200));if(t==null||t._reactInternals===void 0)throw Error(F(38));return Ol(t,e,n,!1,r)};Lt.version="18.3.1-next-f1338f8080-20240426";function uv(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(uv)}catch(t){console.error(t)}}uv(),uy.exports=Lt;var JE=uy.exports,Sp=JE;cc.createRoot=Sp.createRoot,cc.hydrateRoot=Sp.hydrateRoot;var ZE={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const e2=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),t2=(t,e)=>{const n=B.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,children:l,...u},d)=>B.createElement("svg",{ref:d,...ZE,width:s,height:s,stroke:r,strokeWidth:o?Number(i)*24/Number(s):i,className:`lucide lucide-${e2(t)}`,...u},[...e.map(([m,p])=>B.createElement(m,p)),...(Array.isArray(l)?l:[l])||[]]));return n.displayName=`${t}`,n};var le=t2;const cv=le("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]),hv=le("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),n2=le("CheckCircle2",[["path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",key:"14v8dr"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),r2=le("Check",[["polyline",{points:"20 6 9 17 4 12",key:"10jjfj"}]]),s2=le("ChefHat",[["path",{d:"M6 13.87A4 4 0 0 1 7.41 6a5.11 5.11 0 0 1 1.05-1.54 5 5 0 0 1 7.08 0A5.11 5.11 0 0 1 16.59 6 4 4 0 0 1 18 13.87V21H6Z",key:"z3ra2g"}],["line",{x1:"6",x2:"18",y1:"17",y2:"17",key:"12q60k"}]]),i2=le("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),o2=le("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),rh=le("Cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]),a2=le("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),l2=le("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),u2=le("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]),dv=le("Facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]),c2=le("FileJson",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1",key:"1oajmo"}],["path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1",key:"mpwhp6"}]]),h2=le("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}],["path",{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z",key:"nb9nel"}]]),fv=le("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),mv=le("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]),pv=le("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]),d2=le("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]]),f2=le("MessageCircle",[["path",{d:"m3 21 1.9-5.7a8.5 8.5 0 1 1 3.8 3.8z",key:"v2veuj"}]]),gv=le("Music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]),m2=le("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]),co=le("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),p2=le("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),yv=le("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),vv=le("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),g2=le("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]),y2=le("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]),bd=le("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]),kd=le("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]),v2=le("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]),_v=le("StickyNote",[["path",{d:"M15.5 3H5a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h14a2 2 0 0 0 2-2V8.5L15.5 3Z",key:"1wis1t"}],["path",{d:"M15 3v6h6",key:"edgan2"}]]),Os=le("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),Sd=le("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),zt=le("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Vr=le("Youtube",[["path",{d:"M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17",key:"1q2vi4"}],["path",{d:"m10 15 5-3-5-3z",key:"1jp15x"}]]),_2=le("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);function wv(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=wv(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function ge(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=wv(t))&&(r&&(r+=" "),r+=e);return r}const w2=[{id:"household1",name:"Tubacki",icon:"🏠",color:"bg-blue-600"},{id:"household2",name:"Haushalt 2",icon:"🏡",color:"bg-green-600"},{id:"household3",name:"Haushalt 3",icon:"🏘️",color:"bg-purple-600"}],xv=B.createContext(void 0),Ip="foodflash_current_household",x2=({children:t})=>{const[e,n]=B.useState(null),[r,s]=B.useState(!1);B.useEffect(()=>{const o=localStorage.getItem(Ip);if(o)try{const l=JSON.parse(o);n(l),s(!0)}catch(l){console.error("Error loading household:",l)}},[]);const i=o=>{n(o),s(!0),localStorage.setItem(Ip,JSON.stringify(o))};return c.jsx(xv.Provider,{value:{currentHousehold:e,setCurrentHousehold:i,households:w2,hasSelectedHousehold:r},children:t})},So=()=>{const t=B.useContext(xv);if(!t)throw new Error("useHousehold must be used within HouseholdProvider");return t},E2=({activeTab:t,setActiveTab:e})=>{const{currentHousehold:n,households:r,setCurrentHousehold:s}=So(),[i,o]=B.useState(!1);return c.jsx("header",{className:"bg-slate-800/95 backdrop-blur-sm shadow-2xl border-b-2 border-primary-600/50 autumn-glow",children:c.jsx("div",{className:"container mx-auto px-4 py-4",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsxs("div",{className:"relative",children:[c.jsx(_2,{className:"h-10 w-10 text-primary-400 fill-primary-400",strokeWidth:2}),c.jsx("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-accent-400 rounded-full animate-pulse autumn-glow-gold"})]}),c.jsx("h1",{className:"text-xl sm:text-3xl font-bold bg-gradient-to-r from-primary-400 via-secondary-400 to-accent-400 bg-clip-text text-transparent",children:"🍂 Food Flash"})]}),n&&c.jsxs("div",{className:"relative",children:[c.jsxs("button",{onClick:()=>o(!i),"data-test-id":"household-selector","aria-label":"Haushalt wechseln",className:"flex items-center gap-1 sm:gap-2 px-2 sm:px-3 py-1 sm:py-2 rounded-lg bg-slate-700/80 border border-slate-600 hover:border-primary-500 transition-all text-gray-200 hover:text-primary-300",children:[c.jsx("span",{className:"text-lg",children:n.icon}),c.jsx("span",{className:"hidden md:inline text-sm font-medium",children:n.name}),c.jsx(i2,{className:"h-3 w-3 sm:h-4 sm:w-4"})]}),i&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>o(!1)}),c.jsx("div",{className:"absolute top-full mt-2 left-0 bg-slate-800 border-2 border-slate-600 rounded-lg shadow-2xl overflow-hidden z-50 min-w-[200px]",children:c.jsxs("div",{className:"p-2",children:[c.jsx("p",{className:"text-xs text-gray-400 px-3 py-1 mb-1",children:"Haushalt wechseln:"}),r.map(l=>c.jsxs("button",{onClick:()=>{s(l),o(!1)},"data-test-id":`switch-to-${l.id}`,"aria-label":`Zu ${l.name} wechseln`,className:ge("w-full flex items-center gap-3 px-3 py-2 rounded-lg transition-colors text-left",n.id===l.id?"bg-primary-600 text-white":"hover:bg-slate-700 text-gray-200"),children:[c.jsx("span",{className:"text-lg",children:l.icon}),c.jsx("span",{className:"text-sm font-medium",children:l.name})]},l.id))]})})]})]})]}),c.jsxs("nav",{className:"flex gap-0.5 sm:gap-2",children:[c.jsxs("button",{onClick:()=>e("home"),"data-test-id":"nav-home","aria-label":"Zur Startseite navigieren",className:ge("flex items-center justify-center px-1.5 sm:px-4 py-1.5 sm:py-2 rounded-lg sm:rounded-full font-medium transition-all duration-200 min-w-[32px] sm:min-w-0",t==="home"?"bg-primary-600 text-white shadow-lg scale-105 autumn-glow":"bg-slate-700/50 text-gray-300 hover:bg-primary-600/20 hover:text-primary-300 border border-slate-600/50"),children:[c.jsx(mv,{className:"h-4 w-4 sm:h-5 sm:w-5"}),c.jsx("span",{className:"hidden xl:inline ml-2",children:"🏠 Start"})]}),c.jsxs("button",{onClick:()=>e("recipes"),"data-test-id":"nav-recipes","aria-label":"Zu meinen Rezepten navigieren",className:ge("flex items-center justify-center px-1.5 sm:px-4 py-1.5 sm:py-2 rounded-lg sm:rounded-full font-medium transition-all duration-200 min-w-[32px] sm:min-w-0",t==="recipes"?"bg-secondary-600 text-white shadow-lg scale-105 autumn-glow-green":"bg-slate-700/50 text-gray-300 hover:bg-secondary-600/20 hover:text-secondary-300 border border-dark-600/50"),children:[c.jsx(cv,{className:"h-4 w-4 sm:h-5 sm:w-5"}),c.jsx("span",{className:"hidden xl:inline ml-2",children:"📖 Rezepte"})]}),c.jsxs("button",{onClick:()=>e("planner"),"data-test-id":"nav-planner","aria-label":"Zum Wochenplaner navigieren",className:ge("flex items-center justify-center px-1.5 sm:px-4 py-1.5 sm:py-2 rounded-lg sm:rounded-full font-medium transition-all duration-200 min-w-[32px] sm:min-w-0",t==="planner"?"bg-accent-600 text-white shadow-lg scale-105 autumn-glow-gold":"bg-slate-700/50 text-gray-300 hover:bg-accent-600/20 hover:text-accent-300 border border-dark-600/50"),children:[c.jsx(hv,{className:"h-4 w-4 sm:h-5 sm:w-5"}),c.jsx("span",{className:"hidden xl:inline ml-2",children:"📅 Planer"})]}),c.jsxs("button",{onClick:()=>e("shopping"),"data-test-id":"nav-shopping","aria-label":"Zur Einkaufsliste navigieren",className:ge("flex items-center justify-center px-1.5 sm:px-4 py-1.5 sm:py-2 rounded-lg sm:rounded-full font-medium transition-all duration-200 min-w-[32px] sm:min-w-0",t==="shopping"?"bg-primary-600 text-white shadow-lg scale-105 autumn-glow":"bg-slate-700/50 text-gray-300 hover:bg-primary-600/20 hover:text-primary-300 border border-slate-600/50"),children:[c.jsx(bd,{className:"h-4 w-4 sm:h-5 sm:w-5"}),c.jsx("span",{className:"hidden xl:inline ml-2",children:"🛒 Einkauf"})]})]})]})})})},T2=({onPlatformClick:t})=>c.jsxs("div",{className:"text-center py-12",children:[c.jsxs("div",{className:"mb-12",children:[c.jsx("h2",{className:"text-5xl font-bold text-gray-100 mb-4 bg-gradient-to-r from-primary-400 via-accent-400 to-secondary-400 bg-clip-text text-transparent",children:"🍂 Willkommen bei Food Flash! ⚡"}),c.jsx("p",{className:"text-xl text-gray-300 max-w-2xl mx-auto",children:"Speichere deine Lieblingsrezepte von überall und habe sie immer griffbereit!"})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 max-w-6xl mx-auto mb-12",children:[c.jsxs("button",{onClick:()=>t("youtube"),"data-test-id":"platform-youtube","aria-label":"YouTube Rezepte anzeigen",className:"bg-slate-800/80 backdrop-blur-sm rounded-2xl p-6 shadow-xl border-2 border-red-500/30 hover:scale-105 transition-all duration-300 hover:border-red-400 hover:shadow-2xl hover:autumn-glow cursor-pointer",children:[c.jsx("div",{className:"w-16 h-16 bg-red-600/20 rounded-full flex items-center justify-center mx-auto mb-4 border border-red-500/30",children:c.jsx(Vr,{className:"h-8 w-8 text-red-400"})}),c.jsx("h3",{className:"font-bold text-gray-100 mb-2",children:"YouTube"}),c.jsx("p",{className:"text-sm text-gray-400",children:"Video-Rezepte speichern"})]}),c.jsxs("button",{onClick:()=>t("instagram"),"data-test-id":"platform-instagram","aria-label":"Instagram Rezepte anzeigen",className:"bg-slate-800/80 backdrop-blur-sm rounded-2xl p-6 shadow-xl border-2 border-pink-500/30 hover:scale-105 transition-all duration-300 hover:border-pink-400 hover:shadow-2xl cursor-pointer",children:[c.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-pink-600/20 to-purple-600/20 rounded-full flex items-center justify-center mx-auto mb-4 border border-pink-500/30",children:c.jsx(pv,{className:"h-8 w-8 text-pink-400"})}),c.jsx("h3",{className:"font-bold text-gray-100 mb-2",children:"Instagram"}),c.jsx("p",{className:"text-sm text-gray-400",children:"Reel-Rezepte sichern"})]}),c.jsxs("button",{onClick:()=>t("facebook"),"data-test-id":"platform-facebook","aria-label":"Facebook Rezepte anzeigen",className:"bg-slate-800/80 backdrop-blur-sm rounded-2xl p-6 shadow-xl border-2 border-blue-500/30 hover:scale-105 transition-all duration-300 hover:border-blue-400 hover:shadow-2xl cursor-pointer",children:[c.jsx("div",{className:"w-16 h-16 bg-blue-600/20 rounded-full flex items-center justify-center mx-auto mb-4 border border-blue-500/30",children:c.jsx(dv,{className:"h-8 w-8 text-blue-400"})}),c.jsx("h3",{className:"font-bold text-gray-100 mb-2",children:"Facebook"}),c.jsx("p",{className:"text-sm text-gray-400",children:"Posts & Videos merken"})]}),c.jsxs("button",{onClick:()=>t("tiktok"),"data-test-id":"platform-tiktok","aria-label":"TikTok Rezepte anzeigen",className:"bg-slate-800/80 backdrop-blur-sm rounded-2xl p-6 shadow-xl border-2 border-gray-500/30 hover:scale-105 transition-all duration-300 hover:border-gray-400 hover:shadow-2xl cursor-pointer",children:[c.jsx("div",{className:"w-16 h-16 bg-gray-600/20 rounded-full flex items-center justify-center mx-auto mb-4 border border-gray-500/30",children:c.jsx(gv,{className:"h-8 w-8 text-gray-400"})}),c.jsx("h3",{className:"font-bold text-gray-100 mb-2",children:"TikTok"}),c.jsx("p",{className:"text-sm text-gray-400",children:"Kurze Rezept-Videos"})]})]}),c.jsxs("div",{className:"bg-gradient-to-r from-primary-600/80 to-secondary-600/80 backdrop-blur-sm rounded-3xl p-8 max-w-4xl mx-auto text-white shadow-2xl border border-primary-500/30 autumn-glow",children:[c.jsx(kd,{className:"h-12 w-12 mx-auto mb-4 text-accent-400"}),c.jsx("h3",{className:"text-3xl font-bold mb-4",children:"🍂 Starte jetzt mit deiner Rezeptsammlung!"}),c.jsx("p",{className:"text-lg mb-6 opacity-90",children:'Klicke auf "📖 Rezepte" in der Navigation oben, um dein erstes Rezept hinzuzufügen.'})]})]}),b2=()=>{};var Ap={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ev=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},k2=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],l=t[n++],u=((s&7)<<18|(i&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},Tv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,l=o?t[s+1]:0,u=s+2<t.length,d=u?t[s+2]:0,m=i>>2,p=(i&3)<<4|l>>4;let g=(l&15)<<2|d>>6,w=d&63;u||(w=64,o||(g=64)),r.push(n[m],n[p],n[g],n[w])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Ev(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):k2(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const d=s<t.length?n[t.charAt(s)]:64;++s;const p=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||l==null||d==null||p==null)throw new S2;const g=i<<2|l>>4;if(r.push(g),d!==64){const w=l<<4&240|d>>2;if(r.push(w),p!==64){const I=d<<6&192|p;r.push(I)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class S2 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const I2=function(t){const e=Ev(t);return Tv.encodeByteArray(e,!0)},al=function(t){return I2(t).replace(/\./g,"")},A2=function(t){try{return Tv.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R2(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N2=()=>R2().__FIREBASE_DEFAULTS__,C2=()=>{if(typeof process>"u"||typeof Ap>"u")return;const t=Ap.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},P2=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&A2(t[1]);return e&&JSON.parse(e)},Id=()=>{try{return b2()||N2()||C2()||P2()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},D2=t=>{var e,n;return(n=(e=Id())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},bv=t=>{const e=D2(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},kv=()=>{var t;return(t=Id())==null?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j2{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Io(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Sv(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iv(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[al(JSON.stringify(n)),al(JSON.stringify(o)),""].join(".")}const zi={};function V2(){const t={prod:[],emulator:[]};for(const e of Object.keys(zi))zi[e]?t.emulator.push(e):t.prod.push(e);return t}function L2(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Rp=!1;function Av(t,e){if(typeof window>"u"||typeof document>"u"||!Io(window.location.host)||zi[t]===e||zi[t]||Rp)return;zi[t]=e;function n(g){return`__firebase__banner__${g}`}const r="__firebase__banner",i=V2().prod.length>0;function o(){const g=document.getElementById(r);g&&g.remove()}function l(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function u(g,w){g.setAttribute("width","24"),g.setAttribute("id",w),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function d(){const g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{Rp=!0,o()},g}function m(g,w){g.setAttribute("id",w),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function p(){const g=L2(r),w=n("text"),I=document.getElementById(w)||document.createElement("span"),R=n("learnmore"),C=document.getElementById(R)||document.createElement("a"),T=n("preprendIcon"),y=document.getElementById(T)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){const k=g.element;l(k),m(C,R);const D=d();u(y,T),k.append(y,I,C,D),document.body.appendChild(k)}i?(I.innerText="Preview backend disconnected.",y.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(y.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,I.innerText="Preview backend running in this workspace."),I.setAttribute("id",w)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O2(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function M2(){var e;const t=(e=Id())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function F2(){return!M2()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function z2(){try{return typeof indexedDB=="object"}catch{return!1}}function U2(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)==null?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B2="FirebaseError";class Jr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=B2,Object.setPrototypeOf(this,Jr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Rv.prototype.create)}}class Rv{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?$2(i,r):"Error",l=`${this.serviceName}: ${o} (${s}).`;return new Jr(s,l,r)}}function $2(t,e){return t.replace(H2,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const H2=/\{\$([^}]+)}/g;function ll(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(Np(i)&&Np(o)){if(!ll(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Np(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gt(t){return t&&t._delegate?t._delegate:t}class Ms{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q2{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new j2;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(G2(e))try{this.getOrInitializeService({instanceIdentifier:Cr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Cr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Cr){return this.instances.has(e)}getOptions(e=Cr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&o.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:W2(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Cr){return this.component?this.component.multipleInstances?e:Cr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function W2(t){return t===Cr?void 0:t}function G2(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K2{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new q2(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ce;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ce||(ce={}));const Q2={debug:ce.DEBUG,verbose:ce.VERBOSE,info:ce.INFO,warn:ce.WARN,error:ce.ERROR,silent:ce.SILENT},Y2=ce.INFO,X2={[ce.DEBUG]:"log",[ce.VERBOSE]:"log",[ce.INFO]:"info",[ce.WARN]:"warn",[ce.ERROR]:"error"},J2=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=X2[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Nv{constructor(e){this.name=e,this._logLevel=Y2,this._logHandler=J2,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ce))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Q2[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ce.DEBUG,...e),this._logHandler(this,ce.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ce.VERBOSE,...e),this._logHandler(this,ce.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ce.INFO,...e),this._logHandler(this,ce.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ce.WARN,...e),this._logHandler(this,ce.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ce.ERROR,...e),this._logHandler(this,ce.ERROR,...e)}}const Z2=(t,e)=>e.some(n=>t instanceof n);let Cp,Pp;function eT(){return Cp||(Cp=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function tT(){return Pp||(Pp=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Cv=new WeakMap,sh=new WeakMap,Pv=new WeakMap,Ju=new WeakMap,Ad=new WeakMap;function nT(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(nr(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Cv.set(n,t)}).catch(()=>{}),Ad.set(e,t),e}function rT(t){if(sh.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});sh.set(t,e)}let ih={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return sh.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Pv.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return nr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function sT(t){ih=t(ih)}function iT(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Zu(this),e,...n);return Pv.set(r,e.sort?e.sort():[e]),nr(r)}:tT().includes(t)?function(...e){return t.apply(Zu(this),e),nr(Cv.get(this))}:function(...e){return nr(t.apply(Zu(this),e))}}function oT(t){return typeof t=="function"?iT(t):(t instanceof IDBTransaction&&rT(t),Z2(t,eT())?new Proxy(t,ih):t)}function nr(t){if(t instanceof IDBRequest)return nT(t);if(Ju.has(t))return Ju.get(t);const e=oT(t);return e!==t&&(Ju.set(t,e),Ad.set(e,t)),e}const Zu=t=>Ad.get(t);function aT(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),l=nr(o);return r&&o.addEventListener("upgradeneeded",u=>{r(nr(o.result),u.oldVersion,u.newVersion,nr(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{i&&u.addEventListener("close",()=>i()),s&&u.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),l}const lT=["get","getKey","getAll","getAllKeys","count"],uT=["put","add","delete","clear"],ec=new Map;function Dp(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(ec.get(e))return ec.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=uT.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||lT.includes(n)))return;const i=async function(o,...l){const u=this.transaction(o,s?"readwrite":"readonly");let d=u.store;return r&&(d=d.index(l.shift())),(await Promise.all([d[n](...l),s&&u.done]))[0]};return ec.set(e,i),i}sT(t=>({...t,get:(e,n,r)=>Dp(e,n)||t.get(e,n,r),has:(e,n)=>!!Dp(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cT{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(hT(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function hT(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const oh="@firebase/app",jp="0.14.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const In=new Nv("@firebase/app"),dT="@firebase/app-compat",fT="@firebase/analytics-compat",mT="@firebase/analytics",pT="@firebase/app-check-compat",gT="@firebase/app-check",yT="@firebase/auth",vT="@firebase/auth-compat",_T="@firebase/database",wT="@firebase/data-connect",xT="@firebase/database-compat",ET="@firebase/functions",TT="@firebase/functions-compat",bT="@firebase/installations",kT="@firebase/installations-compat",ST="@firebase/messaging",IT="@firebase/messaging-compat",AT="@firebase/performance",RT="@firebase/performance-compat",NT="@firebase/remote-config",CT="@firebase/remote-config-compat",PT="@firebase/storage",DT="@firebase/storage-compat",jT="@firebase/firestore",VT="@firebase/ai",LT="@firebase/firestore-compat",OT="firebase",MT="12.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ah="[DEFAULT]",FT={[oh]:"fire-core",[dT]:"fire-core-compat",[mT]:"fire-analytics",[fT]:"fire-analytics-compat",[gT]:"fire-app-check",[pT]:"fire-app-check-compat",[yT]:"fire-auth",[vT]:"fire-auth-compat",[_T]:"fire-rtdb",[wT]:"fire-data-connect",[xT]:"fire-rtdb-compat",[ET]:"fire-fn",[TT]:"fire-fn-compat",[bT]:"fire-iid",[kT]:"fire-iid-compat",[ST]:"fire-fcm",[IT]:"fire-fcm-compat",[AT]:"fire-perf",[RT]:"fire-perf-compat",[NT]:"fire-rc",[CT]:"fire-rc-compat",[PT]:"fire-gcs",[DT]:"fire-gcs-compat",[jT]:"fire-fst",[LT]:"fire-fst-compat",[VT]:"fire-vertex","fire-js":"fire-js",[OT]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ul=new Map,zT=new Map,lh=new Map;function Vp(t,e){try{t.container.addComponent(e)}catch(n){In.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ho(t){const e=t.name;if(lh.has(e))return In.debug(`There were multiple attempts to register component ${e}.`),!1;lh.set(e,t);for(const n of ul.values())Vp(n,t);for(const n of zT.values())Vp(n,t);return!0}function Dv(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function jv(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UT={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},rr=new Rv("app","Firebase",UT);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BT{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ms("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw rr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vv=MT;function Lv(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:ah,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw rr.create("bad-app-name",{appName:String(s)});if(n||(n=kv()),!n)throw rr.create("no-options");const i=ul.get(s);if(i){if(ll(n,i.options)&&ll(r,i.config))return i;throw rr.create("duplicate-app",{appName:s})}const o=new K2(s);for(const u of lh.values())o.addComponent(u);const l=new BT(n,r,o);return ul.set(s,l),l}function Ov(t=ah){const e=ul.get(t);if(!e&&t===ah&&kv())return Lv();if(!e)throw rr.create("no-app",{appName:t});return e}function sr(t,e,n){let r=FT[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const o=[`Unable to register library "${r}" with version "${e}":`];s&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),In.warn(o.join(" "));return}ho(new Ms(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $T="firebase-heartbeat-database",HT=1,fo="firebase-heartbeat-store";let tc=null;function Mv(){return tc||(tc=aT($T,HT,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(fo)}catch(n){console.warn(n)}}}}).catch(t=>{throw rr.create("idb-open",{originalErrorMessage:t.message})})),tc}async function qT(t){try{const n=(await Mv()).transaction(fo),r=await n.objectStore(fo).get(Fv(t));return await n.done,r}catch(e){if(e instanceof Jr)In.warn(e.message);else{const n=rr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});In.warn(n.message)}}}async function Lp(t,e){try{const r=(await Mv()).transaction(fo,"readwrite");await r.objectStore(fo).put(e,Fv(t)),await r.done}catch(n){if(n instanceof Jr)In.warn(n.message);else{const r=rr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});In.warn(r.message)}}}function Fv(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WT=1024,GT=30;class KT{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new YT(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Op();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>GT){const o=XT(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){In.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Op(),{heartbeatsToSend:r,unsentEntries:s}=QT(this._heartbeatsCache.heartbeats),i=al(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return In.warn(n),""}}}function Op(){return new Date().toISOString().substring(0,10)}function QT(t,e=WT){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),Mp(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Mp(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class YT{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return z2()?U2().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await qT(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Lp(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Lp(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Mp(t){return al(JSON.stringify({version:2,heartbeats:t})).length}function XT(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JT(t){ho(new Ms("platform-logger",e=>new cT(e),"PRIVATE")),ho(new Ms("heartbeat",e=>new KT(e),"PRIVATE")),sr(oh,jp,t),sr(oh,jp,"esm2020"),sr("fire-js","")}JT("");var Fp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ir,zv;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(E,_){function b(){}b.prototype=_.prototype,E.F=_.prototype,E.prototype=new b,E.prototype.constructor=E,E.D=function(S,A,N){for(var x=Array(arguments.length-2),Z=2;Z<arguments.length;Z++)x[Z-2]=arguments[Z];return _.prototype[A].apply(S,x)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(E,_,b){b||(b=0);const S=Array(16);if(typeof _=="string")for(var A=0;A<16;++A)S[A]=_.charCodeAt(b++)|_.charCodeAt(b++)<<8|_.charCodeAt(b++)<<16|_.charCodeAt(b++)<<24;else for(A=0;A<16;++A)S[A]=_[b++]|_[b++]<<8|_[b++]<<16|_[b++]<<24;_=E.g[0],b=E.g[1],A=E.g[2];let N=E.g[3],x;x=_+(N^b&(A^N))+S[0]+3614090360&4294967295,_=b+(x<<7&4294967295|x>>>25),x=N+(A^_&(b^A))+S[1]+3905402710&4294967295,N=_+(x<<12&4294967295|x>>>20),x=A+(b^N&(_^b))+S[2]+606105819&4294967295,A=N+(x<<17&4294967295|x>>>15),x=b+(_^A&(N^_))+S[3]+3250441966&4294967295,b=A+(x<<22&4294967295|x>>>10),x=_+(N^b&(A^N))+S[4]+4118548399&4294967295,_=b+(x<<7&4294967295|x>>>25),x=N+(A^_&(b^A))+S[5]+1200080426&4294967295,N=_+(x<<12&4294967295|x>>>20),x=A+(b^N&(_^b))+S[6]+2821735955&4294967295,A=N+(x<<17&4294967295|x>>>15),x=b+(_^A&(N^_))+S[7]+4249261313&4294967295,b=A+(x<<22&4294967295|x>>>10),x=_+(N^b&(A^N))+S[8]+1770035416&4294967295,_=b+(x<<7&4294967295|x>>>25),x=N+(A^_&(b^A))+S[9]+2336552879&4294967295,N=_+(x<<12&4294967295|x>>>20),x=A+(b^N&(_^b))+S[10]+4294925233&4294967295,A=N+(x<<17&4294967295|x>>>15),x=b+(_^A&(N^_))+S[11]+2304563134&4294967295,b=A+(x<<22&4294967295|x>>>10),x=_+(N^b&(A^N))+S[12]+1804603682&4294967295,_=b+(x<<7&4294967295|x>>>25),x=N+(A^_&(b^A))+S[13]+4254626195&4294967295,N=_+(x<<12&4294967295|x>>>20),x=A+(b^N&(_^b))+S[14]+2792965006&4294967295,A=N+(x<<17&4294967295|x>>>15),x=b+(_^A&(N^_))+S[15]+1236535329&4294967295,b=A+(x<<22&4294967295|x>>>10),x=_+(A^N&(b^A))+S[1]+4129170786&4294967295,_=b+(x<<5&4294967295|x>>>27),x=N+(b^A&(_^b))+S[6]+3225465664&4294967295,N=_+(x<<9&4294967295|x>>>23),x=A+(_^b&(N^_))+S[11]+643717713&4294967295,A=N+(x<<14&4294967295|x>>>18),x=b+(N^_&(A^N))+S[0]+3921069994&4294967295,b=A+(x<<20&4294967295|x>>>12),x=_+(A^N&(b^A))+S[5]+3593408605&4294967295,_=b+(x<<5&4294967295|x>>>27),x=N+(b^A&(_^b))+S[10]+38016083&4294967295,N=_+(x<<9&4294967295|x>>>23),x=A+(_^b&(N^_))+S[15]+3634488961&4294967295,A=N+(x<<14&4294967295|x>>>18),x=b+(N^_&(A^N))+S[4]+3889429448&4294967295,b=A+(x<<20&4294967295|x>>>12),x=_+(A^N&(b^A))+S[9]+568446438&4294967295,_=b+(x<<5&4294967295|x>>>27),x=N+(b^A&(_^b))+S[14]+3275163606&4294967295,N=_+(x<<9&4294967295|x>>>23),x=A+(_^b&(N^_))+S[3]+4107603335&4294967295,A=N+(x<<14&4294967295|x>>>18),x=b+(N^_&(A^N))+S[8]+1163531501&4294967295,b=A+(x<<20&4294967295|x>>>12),x=_+(A^N&(b^A))+S[13]+2850285829&4294967295,_=b+(x<<5&4294967295|x>>>27),x=N+(b^A&(_^b))+S[2]+4243563512&4294967295,N=_+(x<<9&4294967295|x>>>23),x=A+(_^b&(N^_))+S[7]+1735328473&4294967295,A=N+(x<<14&4294967295|x>>>18),x=b+(N^_&(A^N))+S[12]+2368359562&4294967295,b=A+(x<<20&4294967295|x>>>12),x=_+(b^A^N)+S[5]+4294588738&4294967295,_=b+(x<<4&4294967295|x>>>28),x=N+(_^b^A)+S[8]+2272392833&4294967295,N=_+(x<<11&4294967295|x>>>21),x=A+(N^_^b)+S[11]+1839030562&4294967295,A=N+(x<<16&4294967295|x>>>16),x=b+(A^N^_)+S[14]+4259657740&4294967295,b=A+(x<<23&4294967295|x>>>9),x=_+(b^A^N)+S[1]+2763975236&4294967295,_=b+(x<<4&4294967295|x>>>28),x=N+(_^b^A)+S[4]+1272893353&4294967295,N=_+(x<<11&4294967295|x>>>21),x=A+(N^_^b)+S[7]+4139469664&4294967295,A=N+(x<<16&4294967295|x>>>16),x=b+(A^N^_)+S[10]+3200236656&4294967295,b=A+(x<<23&4294967295|x>>>9),x=_+(b^A^N)+S[13]+681279174&4294967295,_=b+(x<<4&4294967295|x>>>28),x=N+(_^b^A)+S[0]+3936430074&4294967295,N=_+(x<<11&4294967295|x>>>21),x=A+(N^_^b)+S[3]+3572445317&4294967295,A=N+(x<<16&4294967295|x>>>16),x=b+(A^N^_)+S[6]+76029189&4294967295,b=A+(x<<23&4294967295|x>>>9),x=_+(b^A^N)+S[9]+3654602809&4294967295,_=b+(x<<4&4294967295|x>>>28),x=N+(_^b^A)+S[12]+3873151461&4294967295,N=_+(x<<11&4294967295|x>>>21),x=A+(N^_^b)+S[15]+530742520&4294967295,A=N+(x<<16&4294967295|x>>>16),x=b+(A^N^_)+S[2]+3299628645&4294967295,b=A+(x<<23&4294967295|x>>>9),x=_+(A^(b|~N))+S[0]+4096336452&4294967295,_=b+(x<<6&4294967295|x>>>26),x=N+(b^(_|~A))+S[7]+1126891415&4294967295,N=_+(x<<10&4294967295|x>>>22),x=A+(_^(N|~b))+S[14]+2878612391&4294967295,A=N+(x<<15&4294967295|x>>>17),x=b+(N^(A|~_))+S[5]+4237533241&4294967295,b=A+(x<<21&4294967295|x>>>11),x=_+(A^(b|~N))+S[12]+1700485571&4294967295,_=b+(x<<6&4294967295|x>>>26),x=N+(b^(_|~A))+S[3]+2399980690&4294967295,N=_+(x<<10&4294967295|x>>>22),x=A+(_^(N|~b))+S[10]+4293915773&4294967295,A=N+(x<<15&4294967295|x>>>17),x=b+(N^(A|~_))+S[1]+2240044497&4294967295,b=A+(x<<21&4294967295|x>>>11),x=_+(A^(b|~N))+S[8]+1873313359&4294967295,_=b+(x<<6&4294967295|x>>>26),x=N+(b^(_|~A))+S[15]+4264355552&4294967295,N=_+(x<<10&4294967295|x>>>22),x=A+(_^(N|~b))+S[6]+2734768916&4294967295,A=N+(x<<15&4294967295|x>>>17),x=b+(N^(A|~_))+S[13]+1309151649&4294967295,b=A+(x<<21&4294967295|x>>>11),x=_+(A^(b|~N))+S[4]+4149444226&4294967295,_=b+(x<<6&4294967295|x>>>26),x=N+(b^(_|~A))+S[11]+3174756917&4294967295,N=_+(x<<10&4294967295|x>>>22),x=A+(_^(N|~b))+S[2]+718787259&4294967295,A=N+(x<<15&4294967295|x>>>17),x=b+(N^(A|~_))+S[9]+3951481745&4294967295,E.g[0]=E.g[0]+_&4294967295,E.g[1]=E.g[1]+(A+(x<<21&4294967295|x>>>11))&4294967295,E.g[2]=E.g[2]+A&4294967295,E.g[3]=E.g[3]+N&4294967295}r.prototype.v=function(E,_){_===void 0&&(_=E.length);const b=_-this.blockSize,S=this.C;let A=this.h,N=0;for(;N<_;){if(A==0)for(;N<=b;)s(this,E,N),N+=this.blockSize;if(typeof E=="string"){for(;N<_;)if(S[A++]=E.charCodeAt(N++),A==this.blockSize){s(this,S),A=0;break}}else for(;N<_;)if(S[A++]=E[N++],A==this.blockSize){s(this,S),A=0;break}}this.h=A,this.o+=_},r.prototype.A=function(){var E=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);E[0]=128;for(var _=1;_<E.length-8;++_)E[_]=0;_=this.o*8;for(var b=E.length-8;b<E.length;++b)E[b]=_&255,_/=256;for(this.v(E),E=Array(16),_=0,b=0;b<4;++b)for(let S=0;S<32;S+=8)E[_++]=this.g[b]>>>S&255;return E};function i(E,_){var b=l;return Object.prototype.hasOwnProperty.call(b,E)?b[E]:b[E]=_(E)}function o(E,_){this.h=_;const b=[];let S=!0;for(let A=E.length-1;A>=0;A--){const N=E[A]|0;S&&N==_||(b[A]=N,S=!1)}this.g=b}var l={};function u(E){return-128<=E&&E<128?i(E,function(_){return new o([_|0],_<0?-1:0)}):new o([E|0],E<0?-1:0)}function d(E){if(isNaN(E)||!isFinite(E))return p;if(E<0)return C(d(-E));const _=[];let b=1;for(let S=0;E>=b;S++)_[S]=E/b|0,b*=4294967296;return new o(_,0)}function m(E,_){if(E.length==0)throw Error("number format error: empty string");if(_=_||10,_<2||36<_)throw Error("radix out of range: "+_);if(E.charAt(0)=="-")return C(m(E.substring(1),_));if(E.indexOf("-")>=0)throw Error('number format error: interior "-" character');const b=d(Math.pow(_,8));let S=p;for(let N=0;N<E.length;N+=8){var A=Math.min(8,E.length-N);const x=parseInt(E.substring(N,N+A),_);A<8?(A=d(Math.pow(_,A)),S=S.j(A).add(d(x))):(S=S.j(b),S=S.add(d(x)))}return S}var p=u(0),g=u(1),w=u(16777216);t=o.prototype,t.m=function(){if(R(this))return-C(this).m();let E=0,_=1;for(let b=0;b<this.g.length;b++){const S=this.i(b);E+=(S>=0?S:4294967296+S)*_,_*=4294967296}return E},t.toString=function(E){if(E=E||10,E<2||36<E)throw Error("radix out of range: "+E);if(I(this))return"0";if(R(this))return"-"+C(this).toString(E);const _=d(Math.pow(E,6));var b=this;let S="";for(;;){const A=D(b,_).g;b=T(b,A.j(_));let N=((b.g.length>0?b.g[0]:b.h)>>>0).toString(E);if(b=A,I(b))return N+S;for(;N.length<6;)N="0"+N;S=N+S}},t.i=function(E){return E<0?0:E<this.g.length?this.g[E]:this.h};function I(E){if(E.h!=0)return!1;for(let _=0;_<E.g.length;_++)if(E.g[_]!=0)return!1;return!0}function R(E){return E.h==-1}t.l=function(E){return E=T(this,E),R(E)?-1:I(E)?0:1};function C(E){const _=E.g.length,b=[];for(let S=0;S<_;S++)b[S]=~E.g[S];return new o(b,~E.h).add(g)}t.abs=function(){return R(this)?C(this):this},t.add=function(E){const _=Math.max(this.g.length,E.g.length),b=[];let S=0;for(let A=0;A<=_;A++){let N=S+(this.i(A)&65535)+(E.i(A)&65535),x=(N>>>16)+(this.i(A)>>>16)+(E.i(A)>>>16);S=x>>>16,N&=65535,x&=65535,b[A]=x<<16|N}return new o(b,b[b.length-1]&-2147483648?-1:0)};function T(E,_){return E.add(C(_))}t.j=function(E){if(I(this)||I(E))return p;if(R(this))return R(E)?C(this).j(C(E)):C(C(this).j(E));if(R(E))return C(this.j(C(E)));if(this.l(w)<0&&E.l(w)<0)return d(this.m()*E.m());const _=this.g.length+E.g.length,b=[];for(var S=0;S<2*_;S++)b[S]=0;for(S=0;S<this.g.length;S++)for(let A=0;A<E.g.length;A++){const N=this.i(S)>>>16,x=this.i(S)&65535,Z=E.i(A)>>>16,ye=E.i(A)&65535;b[2*S+2*A]+=x*ye,y(b,2*S+2*A),b[2*S+2*A+1]+=N*ye,y(b,2*S+2*A+1),b[2*S+2*A+1]+=x*Z,y(b,2*S+2*A+1),b[2*S+2*A+2]+=N*Z,y(b,2*S+2*A+2)}for(E=0;E<_;E++)b[E]=b[2*E+1]<<16|b[2*E];for(E=_;E<2*_;E++)b[E]=0;return new o(b,0)};function y(E,_){for(;(E[_]&65535)!=E[_];)E[_+1]+=E[_]>>>16,E[_]&=65535,_++}function k(E,_){this.g=E,this.h=_}function D(E,_){if(I(_))throw Error("division by zero");if(I(E))return new k(p,p);if(R(E))return _=D(C(E),_),new k(C(_.g),C(_.h));if(R(_))return _=D(E,C(_)),new k(C(_.g),_.h);if(E.g.length>30){if(R(E)||R(_))throw Error("slowDivide_ only works with positive integers.");for(var b=g,S=_;S.l(E)<=0;)b=O(b),S=O(S);var A=M(b,1),N=M(S,1);for(S=M(S,2),b=M(b,2);!I(S);){var x=N.add(S);x.l(E)<=0&&(A=A.add(b),N=x),S=M(S,1),b=M(b,1)}return _=T(E,A.j(_)),new k(A,_)}for(A=p;E.l(_)>=0;){for(b=Math.max(1,Math.floor(E.m()/_.m())),S=Math.ceil(Math.log(b)/Math.LN2),S=S<=48?1:Math.pow(2,S-48),N=d(b),x=N.j(_);R(x)||x.l(E)>0;)b-=S,N=d(b),x=N.j(_);I(N)&&(N=g),A=A.add(N),E=T(E,x)}return new k(A,E)}t.B=function(E){return D(this,E).h},t.and=function(E){const _=Math.max(this.g.length,E.g.length),b=[];for(let S=0;S<_;S++)b[S]=this.i(S)&E.i(S);return new o(b,this.h&E.h)},t.or=function(E){const _=Math.max(this.g.length,E.g.length),b=[];for(let S=0;S<_;S++)b[S]=this.i(S)|E.i(S);return new o(b,this.h|E.h)},t.xor=function(E){const _=Math.max(this.g.length,E.g.length),b=[];for(let S=0;S<_;S++)b[S]=this.i(S)^E.i(S);return new o(b,this.h^E.h)};function O(E){const _=E.g.length+1,b=[];for(let S=0;S<_;S++)b[S]=E.i(S)<<1|E.i(S-1)>>>31;return new o(b,E.h)}function M(E,_){const b=_>>5;_%=32;const S=E.g.length-b,A=[];for(let N=0;N<S;N++)A[N]=_>0?E.i(N+b)>>>_|E.i(N+b+1)<<32-_:E.i(N+b);return new o(A,E.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,zv=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=m,ir=o}).apply(typeof Fp<"u"?Fp:typeof self<"u"?self:typeof window<"u"?window:{});var fa=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Uv,Ai,Bv,Pa,uh,$v,Hv,qv;(function(){var t,e=Object.defineProperty;function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof fa=="object"&&fa];for(var h=0;h<a.length;++h){var f=a[h];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function s(a,h){if(h)e:{var f=r;a=a.split(".");for(var v=0;v<a.length-1;v++){var P=a[v];if(!(P in f))break e;f=f[P]}a=a[a.length-1],v=f[a],h=h(v),h!=v&&h!=null&&e(f,a,{configurable:!0,writable:!0,value:h})}}s("Symbol.dispose",function(a){return a||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(a){return a||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(a){return a||function(h){var f=[],v;for(v in h)Object.prototype.hasOwnProperty.call(h,v)&&f.push([v,h[v]]);return f}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},o=this||self;function l(a){var h=typeof a;return h=="object"&&a!=null||h=="function"}function u(a,h,f){return a.call.apply(a.bind,arguments)}function d(a,h,f){return d=u,d.apply(null,arguments)}function m(a,h){var f=Array.prototype.slice.call(arguments,1);return function(){var v=f.slice();return v.push.apply(v,arguments),a.apply(this,v)}}function p(a,h){function f(){}f.prototype=h.prototype,a.Z=h.prototype,a.prototype=new f,a.prototype.constructor=a,a.Ob=function(v,P,j){for(var U=Array(arguments.length-2),re=2;re<arguments.length;re++)U[re-2]=arguments[re];return h.prototype[P].apply(v,U)}}var g=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?a=>a&&AsyncContext.Snapshot.wrap(a):a=>a;function w(a){const h=a.length;if(h>0){const f=Array(h);for(let v=0;v<h;v++)f[v]=a[v];return f}return[]}function I(a,h){for(let v=1;v<arguments.length;v++){const P=arguments[v];var f=typeof P;if(f=f!="object"?f:P?Array.isArray(P)?"array":f:"null",f=="array"||f=="object"&&typeof P.length=="number"){f=a.length||0;const j=P.length||0;a.length=f+j;for(let U=0;U<j;U++)a[f+U]=P[U]}else a.push(P)}}class R{constructor(h,f){this.i=h,this.j=f,this.h=0,this.g=null}get(){let h;return this.h>0?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function C(a){o.setTimeout(()=>{throw a},0)}function T(){var a=E;let h=null;return a.g&&(h=a.g,a.g=a.g.next,a.g||(a.h=null),h.next=null),h}class y{constructor(){this.h=this.g=null}add(h,f){const v=k.get();v.set(h,f),this.h?this.h.next=v:this.g=v,this.h=v}}var k=new R(()=>new D,a=>a.reset());class D{constructor(){this.next=this.g=this.h=null}set(h,f){this.h=h,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let O,M=!1,E=new y,_=()=>{const a=Promise.resolve(void 0);O=()=>{a.then(b)}};function b(){for(var a;a=T();){try{a.h.call(a.g)}catch(f){C(f)}var h=k;h.j(a),h.h<100&&(h.h++,a.next=h.g,h.g=a)}M=!1}function S(){this.u=this.u,this.C=this.C}S.prototype.u=!1,S.prototype.dispose=function(){this.u||(this.u=!0,this.N())},S.prototype[Symbol.dispose]=function(){this.dispose()},S.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function A(a,h){this.type=a,this.g=this.target=h,this.defaultPrevented=!1}A.prototype.h=function(){this.defaultPrevented=!0};var N=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var a=!1,h=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const f=()=>{};o.addEventListener("test",f,h),o.removeEventListener("test",f,h)}catch{}return a}();function x(a){return/^[\s\xa0]*$/.test(a)}function Z(a,h){A.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a&&this.init(a,h)}p(Z,A),Z.prototype.init=function(a,h){const f=this.type=a.type,v=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;this.target=a.target||a.srcElement,this.g=h,h=a.relatedTarget,h||(f=="mouseover"?h=a.fromElement:f=="mouseout"&&(h=a.toElement)),this.relatedTarget=h,v?(this.clientX=v.clientX!==void 0?v.clientX:v.pageX,this.clientY=v.clientY!==void 0?v.clientY:v.pageY,this.screenX=v.screenX||0,this.screenY=v.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=a.pointerType,this.state=a.state,this.i=a,a.defaultPrevented&&Z.Z.h.call(this)},Z.prototype.h=function(){Z.Z.h.call(this);const a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var ye="closure_listenable_"+(Math.random()*1e6|0),Ue=0;function ne(a,h,f,v,P){this.listener=a,this.proxy=null,this.src=h,this.type=f,this.capture=!!v,this.ha=P,this.key=++Ue,this.da=this.fa=!1}function z(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function Q(a,h,f){for(const v in a)h.call(f,a[v],v,a)}function q(a,h){for(const f in a)h.call(void 0,a[f],f,a)}function K(a){const h={};for(const f in a)h[f]=a[f];return h}const J="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function W(a,h){let f,v;for(let P=1;P<arguments.length;P++){v=arguments[P];for(f in v)a[f]=v[f];for(let j=0;j<J.length;j++)f=J[j],Object.prototype.hasOwnProperty.call(v,f)&&(a[f]=v[f])}}function se(a){this.src=a,this.g={},this.h=0}se.prototype.add=function(a,h,f,v,P){const j=a.toString();a=this.g[j],a||(a=this.g[j]=[],this.h++);const U=de(a,h,v,P);return U>-1?(h=a[U],f||(h.fa=!1)):(h=new ne(h,this.src,j,!!v,P),h.fa=f,a.push(h)),h};function Le(a,h){const f=h.type;if(f in a.g){var v=a.g[f],P=Array.prototype.indexOf.call(v,h,void 0),j;(j=P>=0)&&Array.prototype.splice.call(v,P,1),j&&(z(h),a.g[f].length==0&&(delete a.g[f],a.h--))}}function de(a,h,f,v){for(let P=0;P<a.length;++P){const j=a[P];if(!j.da&&j.listener==h&&j.capture==!!f&&j.ha==v)return P}return-1}var _t="closure_lm_"+(Math.random()*1e6|0),ts={};function rn(a,h,f,v,P){if(Array.isArray(h)){for(let j=0;j<h.length;j++)rn(a,h[j],f,v,P);return null}return f=Tf(f),a&&a[ye]?a.J(h,f,l(v)?!!v.capture:!1,P):Yw(a,h,f,!1,v,P)}function Yw(a,h,f,v,P,j){if(!h)throw Error("Invalid event type");const U=l(P)?!!P.capture:!!P;let re=au(a);if(re||(a[_t]=re=new se(a)),f=re.add(h,f,v,U,j),f.proxy)return f;if(v=Xw(),f.proxy=v,v.src=a,v.listener=f,a.addEventListener)N||(P=U),P===void 0&&(P=!1),a.addEventListener(h.toString(),v,P);else if(a.attachEvent)a.attachEvent(Ef(h.toString()),v);else if(a.addListener&&a.removeListener)a.addListener(v);else throw Error("addEventListener and attachEvent are unavailable.");return f}function Xw(){function a(f){return h.call(a.src,a.listener,f)}const h=Jw;return a}function xf(a,h,f,v,P){if(Array.isArray(h))for(var j=0;j<h.length;j++)xf(a,h[j],f,v,P);else v=l(v)?!!v.capture:!!v,f=Tf(f),a&&a[ye]?(a=a.i,j=String(h).toString(),j in a.g&&(h=a.g[j],f=de(h,f,v,P),f>-1&&(z(h[f]),Array.prototype.splice.call(h,f,1),h.length==0&&(delete a.g[j],a.h--)))):a&&(a=au(a))&&(h=a.g[h.toString()],a=-1,h&&(a=de(h,f,v,P)),(f=a>-1?h[a]:null)&&ou(f))}function ou(a){if(typeof a!="number"&&a&&!a.da){var h=a.src;if(h&&h[ye])Le(h.i,a);else{var f=a.type,v=a.proxy;h.removeEventListener?h.removeEventListener(f,v,a.capture):h.detachEvent?h.detachEvent(Ef(f),v):h.addListener&&h.removeListener&&h.removeListener(v),(f=au(h))?(Le(f,a),f.h==0&&(f.src=null,h[_t]=null)):z(a)}}}function Ef(a){return a in ts?ts[a]:ts[a]="on"+a}function Jw(a,h){if(a.da)a=!0;else{h=new Z(h,this);const f=a.listener,v=a.ha||a.src;a.fa&&ou(a),a=f.call(v,h)}return a}function au(a){return a=a[_t],a instanceof se?a:null}var lu="__closure_events_fn_"+(Math.random()*1e9>>>0);function Tf(a){return typeof a=="function"?a:(a[lu]||(a[lu]=function(h){return a.handleEvent(h)}),a[lu])}function rt(){S.call(this),this.i=new se(this),this.M=this,this.G=null}p(rt,S),rt.prototype[ye]=!0,rt.prototype.removeEventListener=function(a,h,f,v){xf(this,a,h,f,v)};function ht(a,h){var f,v=a.G;if(v)for(f=[];v;v=v.G)f.push(v);if(a=a.M,v=h.type||h,typeof h=="string")h=new A(h,a);else if(h instanceof A)h.target=h.target||a;else{var P=h;h=new A(v,a),W(h,P)}P=!0;let j,U;if(f)for(U=f.length-1;U>=0;U--)j=h.g=f[U],P=Mo(j,v,!0,h)&&P;if(j=h.g=a,P=Mo(j,v,!0,h)&&P,P=Mo(j,v,!1,h)&&P,f)for(U=0;U<f.length;U++)j=h.g=f[U],P=Mo(j,v,!1,h)&&P}rt.prototype.N=function(){if(rt.Z.N.call(this),this.i){var a=this.i;for(const h in a.g){const f=a.g[h];for(let v=0;v<f.length;v++)z(f[v]);delete a.g[h],a.h--}}this.G=null},rt.prototype.J=function(a,h,f,v){return this.i.add(String(a),h,!1,f,v)},rt.prototype.K=function(a,h,f,v){return this.i.add(String(a),h,!0,f,v)};function Mo(a,h,f,v){if(h=a.i.g[String(h)],!h)return!0;h=h.concat();let P=!0;for(let j=0;j<h.length;++j){const U=h[j];if(U&&!U.da&&U.capture==f){const re=U.listener,Be=U.ha||U.src;U.fa&&Le(a.i,U),P=re.call(Be,v)!==!1&&P}}return P&&!v.defaultPrevented}function Zw(a,h){if(typeof a!="function")if(a&&typeof a.handleEvent=="function")a=d(a.handleEvent,a);else throw Error("Invalid listener argument");return Number(h)>2147483647?-1:o.setTimeout(a,h||0)}function bf(a){a.g=Zw(()=>{a.g=null,a.i&&(a.i=!1,bf(a))},a.l);const h=a.h;a.h=null,a.m.apply(null,h)}class e1 extends S{constructor(h,f){super(),this.m=h,this.l=f,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:bf(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Zs(a){S.call(this),this.h=a,this.g={}}p(Zs,S);var kf=[];function Sf(a){Q(a.g,function(h,f){this.g.hasOwnProperty(f)&&ou(h)},a),a.g={}}Zs.prototype.N=function(){Zs.Z.N.call(this),Sf(this)},Zs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var uu=o.JSON.stringify,t1=o.JSON.parse,n1=class{stringify(a){return o.JSON.stringify(a,void 0)}parse(a){return o.JSON.parse(a,void 0)}};function If(){}function Af(){}var ei={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function cu(){A.call(this,"d")}p(cu,A);function hu(){A.call(this,"c")}p(hu,A);var br={},Rf=null;function Fo(){return Rf=Rf||new rt}br.Ia="serverreachability";function Nf(a){A.call(this,br.Ia,a)}p(Nf,A);function ti(a){const h=Fo();ht(h,new Nf(h))}br.STAT_EVENT="statevent";function Cf(a,h){A.call(this,br.STAT_EVENT,a),this.stat=h}p(Cf,A);function dt(a){const h=Fo();ht(h,new Cf(h,a))}br.Ja="timingevent";function Pf(a,h){A.call(this,br.Ja,a),this.size=h}p(Pf,A);function ni(a,h){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){a()},h)}function ri(){this.g=!0}ri.prototype.ua=function(){this.g=!1};function r1(a,h,f,v,P,j){a.info(function(){if(a.g)if(j){var U="",re=j.split("&");for(let pe=0;pe<re.length;pe++){var Be=re[pe].split("=");if(Be.length>1){const We=Be[0];Be=Be[1];const on=We.split("_");U=on.length>=2&&on[1]=="type"?U+(We+"="+Be+"&"):U+(We+"=redacted&")}}}else U=null;else U=j;return"XMLHTTP REQ ("+v+") [attempt "+P+"]: "+h+`
`+f+`
`+U})}function s1(a,h,f,v,P,j,U){a.info(function(){return"XMLHTTP RESP ("+v+") [ attempt "+P+"]: "+h+`
`+f+`
`+j+" "+U})}function ns(a,h,f,v){a.info(function(){return"XMLHTTP TEXT ("+h+"): "+o1(a,f)+(v?" "+v:"")})}function i1(a,h){a.info(function(){return"TIMEOUT: "+h})}ri.prototype.info=function(){};function o1(a,h){if(!a.g)return h;if(!h)return null;try{const j=JSON.parse(h);if(j){for(a=0;a<j.length;a++)if(Array.isArray(j[a])){var f=j[a];if(!(f.length<2)){var v=f[1];if(Array.isArray(v)&&!(v.length<1)){var P=v[0];if(P!="noop"&&P!="stop"&&P!="close")for(let U=1;U<v.length;U++)v[U]=""}}}}return uu(j)}catch{return h}}var zo={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Df={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},jf;function du(){}p(du,If),du.prototype.g=function(){return new XMLHttpRequest},jf=new du;function si(a){return encodeURIComponent(String(a))}function a1(a){var h=1;a=a.split(":");const f=[];for(;h>0&&a.length;)f.push(a.shift()),h--;return a.length&&f.push(a.join(":")),f}function Dn(a,h,f,v){this.j=a,this.i=h,this.l=f,this.S=v||1,this.V=new Zs(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Vf}function Vf(){this.i=null,this.g="",this.h=!1}var Lf={},fu={};function mu(a,h,f){a.M=1,a.A=Bo(sn(h)),a.u=f,a.R=!0,Of(a,null)}function Of(a,h){a.F=Date.now(),Uo(a),a.B=sn(a.A);var f=a.B,v=a.S;Array.isArray(v)||(v=[String(v)]),Yf(f.i,"t",v),a.C=0,f=a.j.L,a.h=new Vf,a.g=mm(a.j,f?h:null,!a.u),a.P>0&&(a.O=new e1(d(a.Y,a,a.g),a.P)),h=a.V,f=a.g,v=a.ba;var P="readystatechange";Array.isArray(P)||(P&&(kf[0]=P.toString()),P=kf);for(let j=0;j<P.length;j++){const U=rn(f,P[j],v||h.handleEvent,!1,h.h||h);if(!U)break;h.g[U.key]=U}h=a.J?K(a.J):{},a.u?(a.v||(a.v="POST"),h["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.B,a.v,a.u,h)):(a.v="GET",a.g.ea(a.B,a.v,null,h)),ti(),r1(a.i,a.v,a.B,a.l,a.S,a.u)}Dn.prototype.ba=function(a){a=a.target;const h=this.O;h&&Ln(a)==3?h.j():this.Y(a)},Dn.prototype.Y=function(a){try{if(a==this.g)e:{const re=Ln(this.g),Be=this.g.ya(),pe=this.g.ca();if(!(re<3)&&(re!=3||this.g&&(this.h.h||this.g.la()||rm(this.g)))){this.K||re!=4||Be==7||(Be==8||pe<=0?ti(3):ti(2)),pu(this);var h=this.g.ca();this.X=h;var f=l1(this);if(this.o=h==200,s1(this.i,this.v,this.B,this.l,this.S,re,h),this.o){if(this.U&&!this.L){t:{if(this.g){var v,P=this.g;if((v=P.g?P.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!x(v)){var j=v;break t}}j=null}if(a=j)ns(this.i,this.l,a,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,gu(this,a);else{this.o=!1,this.m=3,dt(12),kr(this),ii(this);break e}}if(this.R){a=!0;let We;for(;!this.K&&this.C<f.length;)if(We=u1(this,f),We==fu){re==4&&(this.m=4,dt(14),a=!1),ns(this.i,this.l,null,"[Incomplete Response]");break}else if(We==Lf){this.m=4,dt(15),ns(this.i,this.l,f,"[Invalid Chunk]"),a=!1;break}else ns(this.i,this.l,We,null),gu(this,We);if(Mf(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),re!=4||f.length!=0||this.h.h||(this.m=1,dt(16),a=!1),this.o=this.o&&a,!a)ns(this.i,this.l,f,"[Invalid Chunked Response]"),kr(this),ii(this);else if(f.length>0&&!this.W){this.W=!0;var U=this.j;U.g==this&&U.aa&&!U.P&&(U.j.info("Great, no buffering proxy detected. Bytes received: "+f.length),bu(U),U.P=!0,dt(11))}}else ns(this.i,this.l,f,null),gu(this,f);re==4&&kr(this),this.o&&!this.K&&(re==4?cm(this.j,this):(this.o=!1,Uo(this)))}else T1(this.g),h==400&&f.indexOf("Unknown SID")>0?(this.m=3,dt(12)):(this.m=0,dt(13)),kr(this),ii(this)}}}catch{}finally{}};function l1(a){if(!Mf(a))return a.g.la();const h=rm(a.g);if(h==="")return"";let f="";const v=h.length,P=Ln(a.g)==4;if(!a.h.i){if(typeof TextDecoder>"u")return kr(a),ii(a),"";a.h.i=new o.TextDecoder}for(let j=0;j<v;j++)a.h.h=!0,f+=a.h.i.decode(h[j],{stream:!(P&&j==v-1)});return h.length=0,a.h.g+=f,a.C=0,a.h.g}function Mf(a){return a.g?a.v=="GET"&&a.M!=2&&a.j.Aa:!1}function u1(a,h){var f=a.C,v=h.indexOf(`
`,f);return v==-1?fu:(f=Number(h.substring(f,v)),isNaN(f)?Lf:(v+=1,v+f>h.length?fu:(h=h.slice(v,v+f),a.C=v+f,h)))}Dn.prototype.cancel=function(){this.K=!0,kr(this)};function Uo(a){a.T=Date.now()+a.H,Ff(a,a.H)}function Ff(a,h){if(a.D!=null)throw Error("WatchDog timer not null");a.D=ni(d(a.aa,a),h)}function pu(a){a.D&&(o.clearTimeout(a.D),a.D=null)}Dn.prototype.aa=function(){this.D=null;const a=Date.now();a-this.T>=0?(i1(this.i,this.B),this.M!=2&&(ti(),dt(17)),kr(this),this.m=2,ii(this)):Ff(this,this.T-a)};function ii(a){a.j.I==0||a.K||cm(a.j,a)}function kr(a){pu(a);var h=a.O;h&&typeof h.dispose=="function"&&h.dispose(),a.O=null,Sf(a.V),a.g&&(h=a.g,a.g=null,h.abort(),h.dispose())}function gu(a,h){try{var f=a.j;if(f.I!=0&&(f.g==a||yu(f.h,a))){if(!a.L&&yu(f.h,a)&&f.I==3){try{var v=f.Ba.g.parse(h)}catch{v=null}if(Array.isArray(v)&&v.length==3){var P=v;if(P[0]==0){e:if(!f.v){if(f.g)if(f.g.F+3e3<a.F)Go(f),qo(f);else break e;Tu(f),dt(18)}}else f.xa=P[1],0<f.xa-f.K&&P[2]<37500&&f.F&&f.A==0&&!f.C&&(f.C=ni(d(f.Va,f),6e3));Bf(f.h)<=1&&f.ta&&(f.ta=void 0)}else Ir(f,11)}else if((a.L||f.g==a)&&Go(f),!x(h))for(P=f.Ba.g.parse(h),h=0;h<P.length;h++){let pe=P[h];const We=pe[0];if(!(We<=f.K))if(f.K=We,pe=pe[1],f.I==2)if(pe[0]=="c"){f.M=pe[1],f.ba=pe[2];const on=pe[3];on!=null&&(f.ka=on,f.j.info("VER="+f.ka));const Ar=pe[4];Ar!=null&&(f.za=Ar,f.j.info("SVER="+f.za));const On=pe[5];On!=null&&typeof On=="number"&&On>0&&(v=1.5*On,f.O=v,f.j.info("backChannelRequestTimeoutMs_="+v)),v=f;const Mn=a.g;if(Mn){const Qo=Mn.g?Mn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Qo){var j=v.h;j.g||Qo.indexOf("spdy")==-1&&Qo.indexOf("quic")==-1&&Qo.indexOf("h2")==-1||(j.j=j.l,j.g=new Set,j.h&&(vu(j,j.h),j.h=null))}if(v.G){const ku=Mn.g?Mn.g.getResponseHeader("X-HTTP-Session-Id"):null;ku&&(v.wa=ku,xe(v.J,v.G,ku))}}f.I=3,f.l&&f.l.ra(),f.aa&&(f.T=Date.now()-a.F,f.j.info("Handshake RTT: "+f.T+"ms")),v=f;var U=a;if(v.na=fm(v,v.L?v.ba:null,v.W),U.L){$f(v.h,U);var re=U,Be=v.O;Be&&(re.H=Be),re.D&&(pu(re),Uo(re)),v.g=U}else lm(v);f.i.length>0&&Wo(f)}else pe[0]!="stop"&&pe[0]!="close"||Ir(f,7);else f.I==3&&(pe[0]=="stop"||pe[0]=="close"?pe[0]=="stop"?Ir(f,7):Eu(f):pe[0]!="noop"&&f.l&&f.l.qa(pe),f.A=0)}}ti(4)}catch{}}var c1=class{constructor(a,h){this.g=a,this.map=h}};function zf(a){this.l=a||10,o.PerformanceNavigationTiming?(a=o.performance.getEntriesByType("navigation"),a=a.length>0&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Uf(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function Bf(a){return a.h?1:a.g?a.g.size:0}function yu(a,h){return a.h?a.h==h:a.g?a.g.has(h):!1}function vu(a,h){a.g?a.g.add(h):a.h=h}function $f(a,h){a.h&&a.h==h?a.h=null:a.g&&a.g.has(h)&&a.g.delete(h)}zf.prototype.cancel=function(){if(this.i=Hf(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function Hf(a){if(a.h!=null)return a.i.concat(a.h.G);if(a.g!=null&&a.g.size!==0){let h=a.i;for(const f of a.g.values())h=h.concat(f.G);return h}return w(a.i)}var qf=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function h1(a,h){if(a){a=a.split("&");for(let f=0;f<a.length;f++){const v=a[f].indexOf("=");let P,j=null;v>=0?(P=a[f].substring(0,v),j=a[f].substring(v+1)):P=a[f],h(P,j?decodeURIComponent(j.replace(/\+/g," ")):"")}}}function jn(a){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let h;a instanceof jn?(this.l=a.l,oi(this,a.j),this.o=a.o,this.g=a.g,ai(this,a.u),this.h=a.h,_u(this,Xf(a.i)),this.m=a.m):a&&(h=String(a).match(qf))?(this.l=!1,oi(this,h[1]||"",!0),this.o=li(h[2]||""),this.g=li(h[3]||"",!0),ai(this,h[4]),this.h=li(h[5]||"",!0),_u(this,h[6]||"",!0),this.m=li(h[7]||"")):(this.l=!1,this.i=new ci(null,this.l))}jn.prototype.toString=function(){const a=[];var h=this.j;h&&a.push(ui(h,Wf,!0),":");var f=this.g;return(f||h=="file")&&(a.push("//"),(h=this.o)&&a.push(ui(h,Wf,!0),"@"),a.push(si(f).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.u,f!=null&&a.push(":",String(f))),(f=this.h)&&(this.g&&f.charAt(0)!="/"&&a.push("/"),a.push(ui(f,f.charAt(0)=="/"?m1:f1,!0))),(f=this.i.toString())&&a.push("?",f),(f=this.m)&&a.push("#",ui(f,g1)),a.join("")},jn.prototype.resolve=function(a){const h=sn(this);let f=!!a.j;f?oi(h,a.j):f=!!a.o,f?h.o=a.o:f=!!a.g,f?h.g=a.g:f=a.u!=null;var v=a.h;if(f)ai(h,a.u);else if(f=!!a.h){if(v.charAt(0)!="/")if(this.g&&!this.h)v="/"+v;else{var P=h.h.lastIndexOf("/");P!=-1&&(v=h.h.slice(0,P+1)+v)}if(P=v,P==".."||P==".")v="";else if(P.indexOf("./")!=-1||P.indexOf("/.")!=-1){v=P.lastIndexOf("/",0)==0,P=P.split("/");const j=[];for(let U=0;U<P.length;){const re=P[U++];re=="."?v&&U==P.length&&j.push(""):re==".."?((j.length>1||j.length==1&&j[0]!="")&&j.pop(),v&&U==P.length&&j.push("")):(j.push(re),v=!0)}v=j.join("/")}else v=P}return f?h.h=v:f=a.i.toString()!=="",f?_u(h,Xf(a.i)):f=!!a.m,f&&(h.m=a.m),h};function sn(a){return new jn(a)}function oi(a,h,f){a.j=f?li(h,!0):h,a.j&&(a.j=a.j.replace(/:$/,""))}function ai(a,h){if(h){if(h=Number(h),isNaN(h)||h<0)throw Error("Bad port number "+h);a.u=h}else a.u=null}function _u(a,h,f){h instanceof ci?(a.i=h,y1(a.i,a.l)):(f||(h=ui(h,p1)),a.i=new ci(h,a.l))}function xe(a,h,f){a.i.set(h,f)}function Bo(a){return xe(a,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),a}function li(a,h){return a?h?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function ui(a,h,f){return typeof a=="string"?(a=encodeURI(a).replace(h,d1),f&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function d1(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var Wf=/[#\/\?@]/g,f1=/[#\?:]/g,m1=/[#\?]/g,p1=/[#\?@]/g,g1=/#/g;function ci(a,h){this.h=this.g=null,this.i=a||null,this.j=!!h}function Sr(a){a.g||(a.g=new Map,a.h=0,a.i&&h1(a.i,function(h,f){a.add(decodeURIComponent(h.replace(/\+/g," ")),f)}))}t=ci.prototype,t.add=function(a,h){Sr(this),this.i=null,a=rs(this,a);let f=this.g.get(a);return f||this.g.set(a,f=[]),f.push(h),this.h+=1,this};function Gf(a,h){Sr(a),h=rs(a,h),a.g.has(h)&&(a.i=null,a.h-=a.g.get(h).length,a.g.delete(h))}function Kf(a,h){return Sr(a),h=rs(a,h),a.g.has(h)}t.forEach=function(a,h){Sr(this),this.g.forEach(function(f,v){f.forEach(function(P){a.call(h,P,v,this)},this)},this)};function Qf(a,h){Sr(a);let f=[];if(typeof h=="string")Kf(a,h)&&(f=f.concat(a.g.get(rs(a,h))));else for(a=Array.from(a.g.values()),h=0;h<a.length;h++)f=f.concat(a[h]);return f}t.set=function(a,h){return Sr(this),this.i=null,a=rs(this,a),Kf(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[h]),this.h+=1,this},t.get=function(a,h){return a?(a=Qf(this,a),a.length>0?String(a[0]):h):h};function Yf(a,h,f){Gf(a,h),f.length>0&&(a.i=null,a.g.set(rs(a,h),w(f)),a.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],h=Array.from(this.g.keys());for(let v=0;v<h.length;v++){var f=h[v];const P=si(f);f=Qf(this,f);for(let j=0;j<f.length;j++){let U=P;f[j]!==""&&(U+="="+si(f[j])),a.push(U)}}return this.i=a.join("&")};function Xf(a){const h=new ci;return h.i=a.i,a.g&&(h.g=new Map(a.g),h.h=a.h),h}function rs(a,h){return h=String(h),a.j&&(h=h.toLowerCase()),h}function y1(a,h){h&&!a.j&&(Sr(a),a.i=null,a.g.forEach(function(f,v){const P=v.toLowerCase();v!=P&&(Gf(this,v),Yf(this,P,f))},a)),a.j=h}function v1(a,h){const f=new ri;if(o.Image){const v=new Image;v.onload=m(Vn,f,"TestLoadImage: loaded",!0,h,v),v.onerror=m(Vn,f,"TestLoadImage: error",!1,h,v),v.onabort=m(Vn,f,"TestLoadImage: abort",!1,h,v),v.ontimeout=m(Vn,f,"TestLoadImage: timeout",!1,h,v),o.setTimeout(function(){v.ontimeout&&v.ontimeout()},1e4),v.src=a}else h(!1)}function _1(a,h){const f=new ri,v=new AbortController,P=setTimeout(()=>{v.abort(),Vn(f,"TestPingServer: timeout",!1,h)},1e4);fetch(a,{signal:v.signal}).then(j=>{clearTimeout(P),j.ok?Vn(f,"TestPingServer: ok",!0,h):Vn(f,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(P),Vn(f,"TestPingServer: error",!1,h)})}function Vn(a,h,f,v,P){try{P&&(P.onload=null,P.onerror=null,P.onabort=null,P.ontimeout=null),v(f)}catch{}}function w1(){this.g=new n1}function wu(a){this.i=a.Sb||null,this.h=a.ab||!1}p(wu,If),wu.prototype.g=function(){return new $o(this.i,this.h)};function $o(a,h){rt.call(this),this.H=a,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}p($o,rt),t=$o.prototype,t.open=function(a,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=a,this.D=h,this.readyState=1,di(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const h={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};a&&(h.body=a),(this.H||o).fetch(new Request(this.D,h)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,hi(this)),this.readyState=0},t.Pa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,di(this)),this.g&&(this.readyState=3,di(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Jf(this)}else a.text().then(this.Oa.bind(this),this.ga.bind(this))};function Jf(a){a.j.read().then(a.Ma.bind(a)).catch(a.ga.bind(a))}t.Ma=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var h=a.value?a.value:new Uint8Array(0);(h=this.B.decode(h,{stream:!a.done}))&&(this.response=this.responseText+=h)}a.done?hi(this):di(this),this.readyState==3&&Jf(this)}},t.Oa=function(a){this.g&&(this.response=this.responseText=a,hi(this))},t.Na=function(a){this.g&&(this.response=a,hi(this))},t.ga=function(){this.g&&hi(this)};function hi(a){a.readyState=4,a.l=null,a.j=null,a.B=null,di(a)}t.setRequestHeader=function(a,h){this.A.append(a,h)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],h=this.h.entries();for(var f=h.next();!f.done;)f=f.value,a.push(f[0]+": "+f[1]),f=h.next();return a.join(`\r
`)};function di(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty($o.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function Zf(a){let h="";return Q(a,function(f,v){h+=v,h+=":",h+=f,h+=`\r
`}),h}function xu(a,h,f){e:{for(v in f){var v=!1;break e}v=!0}v||(f=Zf(f),typeof a=="string"?f!=null&&si(f):xe(a,h,f))}function Re(a){rt.call(this),this.headers=new Map,this.L=a||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}p(Re,rt);var x1=/^https?$/i,E1=["POST","PUT"];t=Re.prototype,t.Fa=function(a){this.H=a},t.ea=function(a,h,f,v){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);h=h?h.toUpperCase():"GET",this.D=a,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():jf.g(),this.g.onreadystatechange=g(d(this.Ca,this));try{this.B=!0,this.g.open(h,String(a),!0),this.B=!1}catch(j){em(this,j);return}if(a=f||"",f=new Map(this.headers),v)if(Object.getPrototypeOf(v)===Object.prototype)for(var P in v)f.set(P,v[P]);else if(typeof v.keys=="function"&&typeof v.get=="function")for(const j of v.keys())f.set(j,v.get(j));else throw Error("Unknown input type for opt_headers: "+String(v));v=Array.from(f.keys()).find(j=>j.toLowerCase()=="content-type"),P=o.FormData&&a instanceof o.FormData,!(Array.prototype.indexOf.call(E1,h,void 0)>=0)||v||P||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[j,U]of f)this.g.setRequestHeader(j,U);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(a),this.v=!1}catch(j){em(this,j)}};function em(a,h){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=h,a.o=5,tm(a),Ho(a)}function tm(a){a.A||(a.A=!0,ht(a,"complete"),ht(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=a||7,ht(this,"complete"),ht(this,"abort"),Ho(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ho(this,!0)),Re.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?nm(this):this.Xa())},t.Xa=function(){nm(this)};function nm(a){if(a.h&&typeof i<"u"){if(a.v&&Ln(a)==4)setTimeout(a.Ca.bind(a),0);else if(ht(a,"readystatechange"),Ln(a)==4){a.h=!1;try{const j=a.ca();e:switch(j){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var f;if(!(f=h)){var v;if(v=j===0){let U=String(a.D).match(qf)[1]||null;!U&&o.self&&o.self.location&&(U=o.self.location.protocol.slice(0,-1)),v=!x1.test(U?U.toLowerCase():"")}f=v}if(f)ht(a,"complete"),ht(a,"success");else{a.o=6;try{var P=Ln(a)>2?a.g.statusText:""}catch{P=""}a.l=P+" ["+a.ca()+"]",tm(a)}}finally{Ho(a)}}}}function Ho(a,h){if(a.g){a.m&&(clearTimeout(a.m),a.m=null);const f=a.g;a.g=null,h||ht(a,"ready");try{f.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Ln(a){return a.g?a.g.readyState:0}t.ca=function(){try{return Ln(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(a){if(this.g){var h=this.g.responseText;return a&&h.indexOf(a)==0&&(h=h.substring(a.length)),t1(h)}};function rm(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.F){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function T1(a){const h={};a=(a.g&&Ln(a)>=2&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let v=0;v<a.length;v++){if(x(a[v]))continue;var f=a1(a[v]);const P=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();const j=h[P]||[];h[P]=j,j.push(f)}q(h,function(v){return v.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function fi(a,h,f){return f&&f.internalChannelParams&&f.internalChannelParams[a]||h}function sm(a){this.za=0,this.i=[],this.j=new ri,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=fi("failFast",!1,a),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=fi("baseRetryDelayMs",5e3,a),this.Za=fi("retryDelaySeedMs",1e4,a),this.Ta=fi("forwardChannelMaxRetries",2,a),this.va=fi("forwardChannelRequestTimeoutMs",2e4,a),this.ma=a&&a.xmlHttpFactory||void 0,this.Ua=a&&a.Rb||void 0,this.Aa=a&&a.useFetchStreams||!1,this.O=void 0,this.L=a&&a.supportsCrossDomainXhr||!1,this.M="",this.h=new zf(a&&a.concurrentRequestLimit),this.Ba=new w1,this.S=a&&a.fastHandshake||!1,this.R=a&&a.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=a&&a.Pb||!1,a&&a.ua&&this.j.ua(),a&&a.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&a&&a.detectBufferingProxy||!1,this.ia=void 0,a&&a.longPollingTimeout&&a.longPollingTimeout>0&&(this.ia=a.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=sm.prototype,t.ka=8,t.I=1,t.connect=function(a,h,f,v){dt(0),this.W=a,this.H=h||{},f&&v!==void 0&&(this.H.OSID=f,this.H.OAID=v),this.F=this.X,this.J=fm(this,null,this.W),Wo(this)};function Eu(a){if(im(a),a.I==3){var h=a.V++,f=sn(a.J);if(xe(f,"SID",a.M),xe(f,"RID",h),xe(f,"TYPE","terminate"),mi(a,f),h=new Dn(a,a.j,h),h.M=2,h.A=Bo(sn(f)),f=!1,o.navigator&&o.navigator.sendBeacon)try{f=o.navigator.sendBeacon(h.A.toString(),"")}catch{}!f&&o.Image&&(new Image().src=h.A,f=!0),f||(h.g=mm(h.j,null),h.g.ea(h.A)),h.F=Date.now(),Uo(h)}dm(a)}function qo(a){a.g&&(bu(a),a.g.cancel(),a.g=null)}function im(a){qo(a),a.v&&(o.clearTimeout(a.v),a.v=null),Go(a),a.h.cancel(),a.m&&(typeof a.m=="number"&&o.clearTimeout(a.m),a.m=null)}function Wo(a){if(!Uf(a.h)&&!a.m){a.m=!0;var h=a.Ea;O||_(),M||(O(),M=!0),E.add(h,a),a.D=0}}function b1(a,h){return Bf(a.h)>=a.h.j-(a.m?1:0)?!1:a.m?(a.i=h.G.concat(a.i),!0):a.I==1||a.I==2||a.D>=(a.Sa?0:a.Ta)?!1:(a.m=ni(d(a.Ea,a,h),hm(a,a.D)),a.D++,!0)}t.Ea=function(a){if(this.m)if(this.m=null,this.I==1){if(!a){this.V=Math.floor(Math.random()*1e5),a=this.V++;const P=new Dn(this,this.j,a);let j=this.o;if(this.U&&(j?(j=K(j),W(j,this.U)):j=this.U),this.u!==null||this.R||(P.J=j,j=null),this.S)e:{for(var h=0,f=0;f<this.i.length;f++){t:{var v=this.i[f];if("__data__"in v.map&&(v=v.map.__data__,typeof v=="string")){v=v.length;break t}v=void 0}if(v===void 0)break;if(h+=v,h>4096){h=f;break e}if(h===4096||f===this.i.length-1){h=f+1;break e}}h=1e3}else h=1e3;h=am(this,P,h),f=sn(this.J),xe(f,"RID",a),xe(f,"CVER",22),this.G&&xe(f,"X-HTTP-Session-Id",this.G),mi(this,f),j&&(this.R?h="headers="+si(Zf(j))+"&"+h:this.u&&xu(f,this.u,j)),vu(this.h,P),this.Ra&&xe(f,"TYPE","init"),this.S?(xe(f,"$req",h),xe(f,"SID","null"),P.U=!0,mu(P,f,null)):mu(P,f,h),this.I=2}}else this.I==3&&(a?om(this,a):this.i.length==0||Uf(this.h)||om(this))};function om(a,h){var f;h?f=h.l:f=a.V++;const v=sn(a.J);xe(v,"SID",a.M),xe(v,"RID",f),xe(v,"AID",a.K),mi(a,v),a.u&&a.o&&xu(v,a.u,a.o),f=new Dn(a,a.j,f,a.D+1),a.u===null&&(f.J=a.o),h&&(a.i=h.G.concat(a.i)),h=am(a,f,1e3),f.H=Math.round(a.va*.5)+Math.round(a.va*.5*Math.random()),vu(a.h,f),mu(f,v,h)}function mi(a,h){a.H&&Q(a.H,function(f,v){xe(h,v,f)}),a.l&&Q({},function(f,v){xe(h,v,f)})}function am(a,h,f){f=Math.min(a.i.length,f);const v=a.l?d(a.l.Ka,a.l,a):null;e:{var P=a.i;let re=-1;for(;;){const Be=["count="+f];re==-1?f>0?(re=P[0].g,Be.push("ofs="+re)):re=0:Be.push("ofs="+re);let pe=!0;for(let We=0;We<f;We++){var j=P[We].g;const on=P[We].map;if(j-=re,j<0)re=Math.max(0,P[We].g-100),pe=!1;else try{j="req"+j+"_"||"";try{var U=on instanceof Map?on:Object.entries(on);for(const[Ar,On]of U){let Mn=On;l(On)&&(Mn=uu(On)),Be.push(j+Ar+"="+encodeURIComponent(Mn))}}catch(Ar){throw Be.push(j+"type="+encodeURIComponent("_badmap")),Ar}}catch{v&&v(on)}}if(pe){U=Be.join("&");break e}}U=void 0}return a=a.i.splice(0,f),h.G=a,U}function lm(a){if(!a.g&&!a.v){a.Y=1;var h=a.Da;O||_(),M||(O(),M=!0),E.add(h,a),a.A=0}}function Tu(a){return a.g||a.v||a.A>=3?!1:(a.Y++,a.v=ni(d(a.Da,a),hm(a,a.A)),a.A++,!0)}t.Da=function(){if(this.v=null,um(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var a=4*this.T;this.j.info("BP detection timer enabled: "+a),this.B=ni(d(this.Wa,this),a)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,dt(10),qo(this),um(this))};function bu(a){a.B!=null&&(o.clearTimeout(a.B),a.B=null)}function um(a){a.g=new Dn(a,a.j,"rpc",a.Y),a.u===null&&(a.g.J=a.o),a.g.P=0;var h=sn(a.na);xe(h,"RID","rpc"),xe(h,"SID",a.M),xe(h,"AID",a.K),xe(h,"CI",a.F?"0":"1"),!a.F&&a.ia&&xe(h,"TO",a.ia),xe(h,"TYPE","xmlhttp"),mi(a,h),a.u&&a.o&&xu(h,a.u,a.o),a.O&&(a.g.H=a.O);var f=a.g;a=a.ba,f.M=1,f.A=Bo(sn(h)),f.u=null,f.R=!0,Of(f,a)}t.Va=function(){this.C!=null&&(this.C=null,qo(this),Tu(this),dt(19))};function Go(a){a.C!=null&&(o.clearTimeout(a.C),a.C=null)}function cm(a,h){var f=null;if(a.g==h){Go(a),bu(a),a.g=null;var v=2}else if(yu(a.h,h))f=h.G,$f(a.h,h),v=1;else return;if(a.I!=0){if(h.o)if(v==1){f=h.u?h.u.length:0,h=Date.now()-h.F;var P=a.D;v=Fo(),ht(v,new Pf(v,f)),Wo(a)}else lm(a);else if(P=h.m,P==3||P==0&&h.X>0||!(v==1&&b1(a,h)||v==2&&Tu(a)))switch(f&&f.length>0&&(h=a.h,h.i=h.i.concat(f)),P){case 1:Ir(a,5);break;case 4:Ir(a,10);break;case 3:Ir(a,6);break;default:Ir(a,2)}}}function hm(a,h){let f=a.Qa+Math.floor(Math.random()*a.Za);return a.isActive()||(f*=2),f*h}function Ir(a,h){if(a.j.info("Error code "+h),h==2){var f=d(a.bb,a),v=a.Ua;const P=!v;v=new jn(v||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||oi(v,"https"),Bo(v),P?v1(v.toString(),f):_1(v.toString(),f)}else dt(2);a.I=0,a.l&&a.l.pa(h),dm(a),im(a)}t.bb=function(a){a?(this.j.info("Successfully pinged google.com"),dt(2)):(this.j.info("Failed to ping google.com"),dt(1))};function dm(a){if(a.I=0,a.ja=[],a.l){const h=Hf(a.h);(h.length!=0||a.i.length!=0)&&(I(a.ja,h),I(a.ja,a.i),a.h.i.length=0,w(a.i),a.i.length=0),a.l.oa()}}function fm(a,h,f){var v=f instanceof jn?sn(f):new jn(f);if(v.g!="")h&&(v.g=h+"."+v.g),ai(v,v.u);else{var P=o.location;v=P.protocol,h=h?h+"."+P.hostname:P.hostname,P=+P.port;const j=new jn(null);v&&oi(j,v),h&&(j.g=h),P&&ai(j,P),f&&(j.h=f),v=j}return f=a.G,h=a.wa,f&&h&&xe(v,f,h),xe(v,"VER",a.ka),mi(a,v),v}function mm(a,h,f){if(h&&!a.L)throw Error("Can't create secondary domain capable XhrIo object.");return h=a.Aa&&!a.ma?new Re(new wu({ab:f})):new Re(a.ma),h.Fa(a.L),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function pm(){}t=pm.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Ko(){}Ko.prototype.g=function(a,h){return new It(a,h)};function It(a,h){rt.call(this),this.g=new sm(h),this.l=a,this.h=h&&h.messageUrlParams||null,a=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(a?a["X-WebChannel-Content-Type"]=h.messageContentType:a={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.sa&&(a?a["X-WebChannel-Client-Profile"]=h.sa:a={"X-WebChannel-Client-Profile":h.sa}),this.g.U=a,(a=h&&h.Qb)&&!x(a)&&(this.g.u=a),this.A=h&&h.supportsCrossDomainXhr||!1,this.v=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!x(h)&&(this.g.G=h,a=this.h,a!==null&&h in a&&(a=this.h,h in a&&delete a[h])),this.j=new ss(this)}p(It,rt),It.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},It.prototype.close=function(){Eu(this.g)},It.prototype.o=function(a){var h=this.g;if(typeof a=="string"){var f={};f.__data__=a,a=f}else this.v&&(f={},f.__data__=uu(a),a=f);h.i.push(new c1(h.Ya++,a)),h.I==3&&Wo(h)},It.prototype.N=function(){this.g.l=null,delete this.j,Eu(this.g),delete this.g,It.Z.N.call(this)};function gm(a){cu.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var h=a.__sm__;if(h){e:{for(const f in h){a=f;break e}a=void 0}(this.i=a)&&(a=this.i,h=h!==null&&a in h?h[a]:void 0),this.data=h}else this.data=a}p(gm,cu);function ym(){hu.call(this),this.status=1}p(ym,hu);function ss(a){this.g=a}p(ss,pm),ss.prototype.ra=function(){ht(this.g,"a")},ss.prototype.qa=function(a){ht(this.g,new gm(a))},ss.prototype.pa=function(a){ht(this.g,new ym)},ss.prototype.oa=function(){ht(this.g,"b")},Ko.prototype.createWebChannel=Ko.prototype.g,It.prototype.send=It.prototype.o,It.prototype.open=It.prototype.m,It.prototype.close=It.prototype.close,qv=function(){return new Ko},Hv=function(){return Fo()},$v=br,uh={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},zo.NO_ERROR=0,zo.TIMEOUT=8,zo.HTTP_ERROR=6,Pa=zo,Df.COMPLETE="complete",Bv=Df,Af.EventType=ei,ei.OPEN="a",ei.CLOSE="b",ei.ERROR="c",ei.MESSAGE="d",rt.prototype.listen=rt.prototype.J,Ai=Af,Re.prototype.listenOnce=Re.prototype.K,Re.prototype.getLastError=Re.prototype.Ha,Re.prototype.getLastErrorCode=Re.prototype.ya,Re.prototype.getStatus=Re.prototype.ca,Re.prototype.getResponseJson=Re.prototype.La,Re.prototype.getResponseText=Re.prototype.la,Re.prototype.send=Re.prototype.ea,Re.prototype.setWithCredentials=Re.prototype.Fa,Uv=Re}).apply(typeof fa<"u"?fa:typeof self<"u"?self:typeof window<"u"?window:{});const zp="@firebase/firestore",Up="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}at.UNAUTHENTICATED=new at(null),at.GOOGLE_CREDENTIALS=new at("google-credentials-uid"),at.FIRST_PARTY=new at("first-party-uid"),at.MOCK_USER=new at("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ks="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qr=new Nv("@firebase/firestore");function os(){return qr.logLevel}function H(t,...e){if(qr.logLevel<=ce.DEBUG){const n=e.map(Rd);qr.debug(`Firestore (${Ks}): ${t}`,...n)}}function An(t,...e){if(qr.logLevel<=ce.ERROR){const n=e.map(Rd);qr.error(`Firestore (${Ks}): ${t}`,...n)}}function Wr(t,...e){if(qr.logLevel<=ce.WARN){const n=e.map(Rd);qr.warn(`Firestore (${Ks}): ${t}`,...n)}}function Rd(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,Wv(t,r,n)}function Wv(t,e,n){let r=`FIRESTORE (${Ks}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw An(r),new Error(r)}function fe(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||Wv(e,s,r)}function te(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class $ extends Jr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gv{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Kv{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(at.UNAUTHENTICATED))}shutdown(){}}class ZT{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class eb{constructor(e){this.t=e,this.currentUser=at.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){fe(this.o===void 0,42304);let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let i=new or;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new or,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},l=u=>{H("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(H("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new or)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(H("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(fe(typeof r.accessToken=="string",31837,{l:r}),new Gv(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return fe(e===null||typeof e=="string",2055,{h:e}),new at(e)}}class tb{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=at.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class nb{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new tb(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(at.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Bp{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class rb{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,jv(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){fe(this.o===void 0,3512);const r=i=>{i.error!=null&&H("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,H("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{H("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):H("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Bp(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(fe(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Bp(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sb(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ml{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=sb(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function oe(t,e){return t<e?-1:t>e?1:0}function ch(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),i=e.charAt(r);if(s!==i)return nc(s)===nc(i)?oe(s,i):nc(s)?1:-1}return oe(t.length,e.length)}const ib=55296,ob=57343;function nc(t){const e=t.charCodeAt(0);return e>=ib&&e<=ob}function Fs(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $p="__name__";class un{constructor(e,n,r){n===void 0?n=0:n>e.length&&X(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&X(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return un.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof un?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=un.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return oe(e.length,n.length)}static compareSegments(e,n){const r=un.isNumericId(e),s=un.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?un.extractNumericId(e).compare(un.extractNumericId(n)):ch(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ir.fromString(e.substring(4,e.length-2))}}class ve extends un{construct(e,n,r){return new ve(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new $(V.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new ve(n)}static emptyPath(){return new ve([])}}const ab=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ye extends un{construct(e,n,r){return new Ye(e,n,r)}static isValidIdentifier(e){return ab.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ye.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===$p}static keyField(){return new Ye([$p])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new $(V.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new $(V.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new $(V.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,s+=2}else l==="`"?(o=!o,s++):l!=="."||o?(r+=l,s++):(i(),s++)}if(i(),o)throw new $(V.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ye(n)}static emptyPath(){return new Ye([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y{constructor(e){this.path=e}static fromPath(e){return new Y(ve.fromString(e))}static fromName(e){return new Y(ve.fromString(e).popFirst(5))}static empty(){return new Y(ve.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ve.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ve.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Y(new ve(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qv(t,e,n){if(!n)throw new $(V.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Yv(t,e,n,r){if(e===!0&&r===!0)throw new $(V.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Hp(t){if(!Y.isDocumentKey(t))throw new $(V.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function qp(t){if(Y.isDocumentKey(t))throw new $(V.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Xv(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Fl(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":X(12329,{type:typeof t})}function jt(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new $(V.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Fl(t);throw new $(V.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ze(t,e){const n={typeString:t};return e&&(n.value=e),n}function Ao(t,e){if(!Xv(t))throw new $(V.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(s&&typeof o!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new $(V.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wp=-62135596800,Gp=1e6;class _e{static now(){return _e.fromMillis(Date.now())}static fromDate(e){return _e.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*Gp);return new _e(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new $(V.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new $(V.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Wp)throw new $(V.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new $(V.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Gp}_compareTo(e){return this.seconds===e.seconds?oe(this.nanoseconds,e.nanoseconds):oe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:_e._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Ao(e,_e._jsonSchema))return new _e(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Wp;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}_e._jsonSchemaVersion="firestore/timestamp/1.0",_e._jsonSchema={type:ze("string",_e._jsonSchemaVersion),seconds:ze("number"),nanoseconds:ze("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ee{static fromTimestamp(e){return new ee(e)}static min(){return new ee(new _e(0,0))}static max(){return new ee(new _e(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mo=-1;function lb(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=ee.fromTimestamp(r===1e9?new _e(n+1,0):new _e(n,r));return new dr(s,Y.empty(),e)}function ub(t){return new dr(t.readTime,t.key,mo)}class dr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new dr(ee.min(),Y.empty(),mo)}static max(){return new dr(ee.max(),Y.empty(),mo)}}function cb(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Y.comparator(t.documentKey,e.documentKey),n!==0?n:oe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hb="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class db{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qs(t){if(t.code!==V.FAILED_PRECONDITION||t.message!==hb)throw t;H("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&X(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new L((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof L?n:L.resolve(n)}catch(n){return L.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):L.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):L.reject(n)}static resolve(e){return new L((n,r)=>{n(e)})}static reject(e){return new L((n,r)=>{r(e)})}static waitFor(e){return new L((n,r)=>{let s=0,i=0,o=!1;e.forEach(l=>{++s,l.next(()=>{++i,o&&i===s&&n()},u=>r(u))}),o=!0,i===s&&n()})}static or(e){let n=L.resolve(!1);for(const r of e)n=n.next(s=>s?L.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new L((r,s)=>{const i=e.length,o=new Array(i);let l=0;for(let u=0;u<i;u++){const d=u;n(e[d]).next(m=>{o[d]=m,++l,l===i&&r(o)},m=>s(m))}})}static doWhile(e,n){return new L((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function fb(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ys(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zl{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}zl.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nd=-1;function Ul(t){return t==null}function cl(t){return t===0&&1/t==-1/0}function mb(t){return typeof t=="number"&&Number.isInteger(t)&&!cl(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jv="";function pb(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Kp(e)),e=gb(t.get(n),e);return Kp(e)}function gb(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case Jv:n+="";break;default:n+=i}}return n}function Kp(t){return t+Jv+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qp(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Er(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Zv(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{constructor(e,n){this.comparator=e,this.root=n||et.EMPTY}insert(e,n){return new Ae(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,et.BLACK,null,null))}remove(e){return new Ae(this.comparator,this.root.remove(e,this.comparator).copy(null,null,et.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ma(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ma(this.root,e,this.comparator,!1)}getReverseIterator(){return new ma(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ma(this.root,e,this.comparator,!0)}}class ma{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class et{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??et.RED,this.left=s??et.EMPTY,this.right=i??et.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new et(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return et.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return et.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,et.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,et.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw X(43730,{key:this.key,value:this.value});if(this.right.isRed())throw X(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw X(27949);return e+(this.isRed()?0:1)}}et.EMPTY=null,et.RED=!0,et.BLACK=!1;et.EMPTY=new class{constructor(){this.size=0}get key(){throw X(57766)}get value(){throw X(16141)}get color(){throw X(16727)}get left(){throw X(29726)}get right(){throw X(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new et(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qe{constructor(e){this.comparator=e,this.data=new Ae(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Yp(this.data.getIterator())}getIteratorFrom(e){return new Yp(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof qe)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new qe(this.comparator);return n.data=e,n}}class Yp{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(e){this.fields=e,e.sort(Ye.comparator)}static empty(){return new Ct([])}unionWith(e){let n=new qe(Ye.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Ct(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Fs(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Je{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new e_("Invalid base64 string: "+i):i}}(e);return new Je(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new Je(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return oe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Je.EMPTY_BYTE_STRING=new Je("");const yb=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function fr(t){if(fe(!!t,39018),typeof t=="string"){let e=0;const n=yb.exec(t);if(fe(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:je(t.seconds),nanos:je(t.nanos)}}function je(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function mr(t){return typeof t=="string"?Je.fromBase64String(t):Je.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t_="server_timestamp",n_="__type__",r_="__previous_value__",s_="__local_write_time__";function Cd(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[n_])==null?void 0:r.stringValue)===t_}function Bl(t){const e=t.mapValue.fields[r_];return Cd(e)?Bl(e):e}function po(t){const e=fr(t.mapValue.fields[s_].timestampValue);return new _e(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vb{constructor(e,n,r,s,i,o,l,u,d,m){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=d,this.isUsingEmulator=m}}const hl="(default)";class zs{constructor(e,n){this.projectId=e,this.database=n||hl}static empty(){return new zs("","")}get isDefaultDatabase(){return this.database===hl}isEqual(e){return e instanceof zs&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i_="__type__",_b="__max__",pa={mapValue:{}},o_="__vector__",dl="value";function pr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Cd(t)?4:xb(t)?9007199254740991:wb(t)?10:11:X(28295,{value:t})}function gn(t,e){if(t===e)return!0;const n=pr(t);if(n!==pr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return po(t).isEqual(po(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=fr(s.timestampValue),l=fr(i.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return mr(s.bytesValue).isEqual(mr(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return je(s.geoPointValue.latitude)===je(i.geoPointValue.latitude)&&je(s.geoPointValue.longitude)===je(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return je(s.integerValue)===je(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=je(s.doubleValue),l=je(i.doubleValue);return o===l?cl(o)===cl(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return Fs(t.arrayValue.values||[],e.arrayValue.values||[],gn);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},l=i.mapValue.fields||{};if(Qp(o)!==Qp(l))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(l[u]===void 0||!gn(o[u],l[u])))return!1;return!0}(t,e);default:return X(52216,{left:t})}}function go(t,e){return(t.values||[]).find(n=>gn(n,e))!==void 0}function Us(t,e){if(t===e)return 0;const n=pr(t),r=pr(e);if(n!==r)return oe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return oe(t.booleanValue,e.booleanValue);case 2:return function(i,o){const l=je(i.integerValue||i.doubleValue),u=je(o.integerValue||o.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return Xp(t.timestampValue,e.timestampValue);case 4:return Xp(po(t),po(e));case 5:return ch(t.stringValue,e.stringValue);case 6:return function(i,o){const l=mr(i),u=mr(o);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const l=i.split("/"),u=o.split("/");for(let d=0;d<l.length&&d<u.length;d++){const m=oe(l[d],u[d]);if(m!==0)return m}return oe(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const l=oe(je(i.latitude),je(o.latitude));return l!==0?l:oe(je(i.longitude),je(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Jp(t.arrayValue,e.arrayValue);case 10:return function(i,o){var g,w,I,R;const l=i.fields||{},u=o.fields||{},d=(g=l[dl])==null?void 0:g.arrayValue,m=(w=u[dl])==null?void 0:w.arrayValue,p=oe(((I=d==null?void 0:d.values)==null?void 0:I.length)||0,((R=m==null?void 0:m.values)==null?void 0:R.length)||0);return p!==0?p:Jp(d,m)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===pa.mapValue&&o===pa.mapValue)return 0;if(i===pa.mapValue)return 1;if(o===pa.mapValue)return-1;const l=i.fields||{},u=Object.keys(l),d=o.fields||{},m=Object.keys(d);u.sort(),m.sort();for(let p=0;p<u.length&&p<m.length;++p){const g=ch(u[p],m[p]);if(g!==0)return g;const w=Us(l[u[p]],d[m[p]]);if(w!==0)return w}return oe(u.length,m.length)}(t.mapValue,e.mapValue);default:throw X(23264,{he:n})}}function Xp(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return oe(t,e);const n=fr(t),r=fr(e),s=oe(n.seconds,r.seconds);return s!==0?s:oe(n.nanos,r.nanos)}function Jp(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Us(n[s],r[s]);if(i)return i}return oe(n.length,r.length)}function Bs(t){return hh(t)}function hh(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=fr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return mr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Y.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=hh(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${hh(n.fields[o])}`;return s+"}"}(t.mapValue):X(61005,{value:t})}function Da(t){switch(pr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Bl(t);return e?16+Da(e):16;case 5:return 2*t.stringValue.length;case 6:return mr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+Da(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return Er(r.fields,(i,o)=>{s+=i.length+Da(o)}),s}(t.mapValue);default:throw X(13486,{value:t})}}function Zp(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function dh(t){return!!t&&"integerValue"in t}function Pd(t){return!!t&&"arrayValue"in t}function eg(t){return!!t&&"nullValue"in t}function tg(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function ja(t){return!!t&&"mapValue"in t}function wb(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[i_])==null?void 0:r.stringValue)===o_}function Ui(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Er(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Ui(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ui(t.arrayValue.values[n]);return e}return{...t}}function xb(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===_b}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(e){this.value=e}static empty(){return new Et({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!ja(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ui(n)}setAll(e){let n=Ye.emptyPath(),r={},s=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,r,s),r={},s=[],n=l.popLast()}o?r[l.lastSegment()]=Ui(o):s.push(l.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());ja(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return gn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];ja(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Er(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new Et(Ui(this.value))}}function a_(t){const e=[];return Er(t.fields,(n,r)=>{const s=new Ye([n]);if(ja(r)){const i=a_(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Ct(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut{constructor(e,n,r,s,i,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=l}static newInvalidDocument(e){return new ut(e,0,ee.min(),ee.min(),ee.min(),Et.empty(),0)}static newFoundDocument(e,n,r,s){return new ut(e,1,n,ee.min(),r,s,0)}static newNoDocument(e,n){return new ut(e,2,n,ee.min(),ee.min(),Et.empty(),0)}static newUnknownDocument(e,n){return new ut(e,3,n,ee.min(),ee.min(),Et.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ee.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Et.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Et.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ee.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ut&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ut(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fl{constructor(e,n){this.position=e,this.inclusive=n}}function ng(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=Y.comparator(Y.fromName(o.referenceValue),n.key):r=Us(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function rg(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!gn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yo{constructor(e,n="asc"){this.field=e,this.dir=n}}function Eb(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l_{}class Fe extends l_{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new bb(e,n,r):n==="array-contains"?new Ib(e,r):n==="in"?new Ab(e,r):n==="not-in"?new Rb(e,r):n==="array-contains-any"?new Nb(e,r):new Fe(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new kb(e,r):new Sb(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Us(n,this.value)):n!==null&&pr(this.value)===pr(n)&&this.matchesComparison(Us(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return X(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class nn extends l_{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new nn(e,n)}matches(e){return u_(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function u_(t){return t.op==="and"}function c_(t){return Tb(t)&&u_(t)}function Tb(t){for(const e of t.filters)if(e instanceof nn)return!1;return!0}function fh(t){if(t instanceof Fe)return t.field.canonicalString()+t.op.toString()+Bs(t.value);if(c_(t))return t.filters.map(e=>fh(e)).join(",");{const e=t.filters.map(n=>fh(n)).join(",");return`${t.op}(${e})`}}function h_(t,e){return t instanceof Fe?function(r,s){return s instanceof Fe&&r.op===s.op&&r.field.isEqual(s.field)&&gn(r.value,s.value)}(t,e):t instanceof nn?function(r,s){return s instanceof nn&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,l)=>i&&h_(o,s.filters[l]),!0):!1}(t,e):void X(19439)}function d_(t){return t instanceof Fe?function(n){return`${n.field.canonicalString()} ${n.op} ${Bs(n.value)}`}(t):t instanceof nn?function(n){return n.op.toString()+" {"+n.getFilters().map(d_).join(" ,")+"}"}(t):"Filter"}class bb extends Fe{constructor(e,n,r){super(e,n,r),this.key=Y.fromName(r.referenceValue)}matches(e){const n=Y.comparator(e.key,this.key);return this.matchesComparison(n)}}class kb extends Fe{constructor(e,n){super(e,"in",n),this.keys=f_("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class Sb extends Fe{constructor(e,n){super(e,"not-in",n),this.keys=f_("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function f_(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>Y.fromName(r.referenceValue))}class Ib extends Fe{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Pd(n)&&go(n.arrayValue,this.value)}}class Ab extends Fe{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&go(this.value.arrayValue,n)}}class Rb extends Fe{constructor(e,n){super(e,"not-in",n)}matches(e){if(go(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!go(this.value.arrayValue,n)}}class Nb extends Fe{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Pd(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>go(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cb{constructor(e,n=null,r=[],s=[],i=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=l,this.Te=null}}function sg(t,e=null,n=[],r=[],s=null,i=null,o=null){return new Cb(t,e,n,r,s,i,o)}function Dd(t){const e=te(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>fh(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Ul(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Bs(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Bs(r)).join(",")),e.Te=n}return e.Te}function jd(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Eb(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!h_(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!rg(t.startAt,e.startAt)&&rg(t.endAt,e.endAt)}function mh(t){return Y.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xs{constructor(e,n=null,r=[],s=[],i=null,o="F",l=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=l,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function Pb(t,e,n,r,s,i,o,l){return new Xs(t,e,n,r,s,i,o,l)}function Vd(t){return new Xs(t)}function ig(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function m_(t){return t.collectionGroup!==null}function Bi(t){const e=te(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new qe(Ye.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(l=l.add(d.field))})}),l})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new yo(i,r))}),n.has(Ye.keyField().canonicalString())||e.Ie.push(new yo(Ye.keyField(),r))}return e.Ie}function mn(t){const e=te(t);return e.Ee||(e.Ee=Db(e,Bi(t))),e.Ee}function Db(t,e){if(t.limitType==="F")return sg(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new yo(s.field,i)});const n=t.endAt?new fl(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new fl(t.startAt.position,t.startAt.inclusive):null;return sg(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function ph(t,e){const n=t.filters.concat([e]);return new Xs(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function gh(t,e,n){return new Xs(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function $l(t,e){return jd(mn(t),mn(e))&&t.limitType===e.limitType}function p_(t){return`${Dd(mn(t))}|lt:${t.limitType}`}function as(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>d_(s)).join(", ")}]`),Ul(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Bs(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Bs(s)).join(",")),`Target(${r})`}(mn(t))}; limitType=${t.limitType})`}function Hl(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):Y.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of Bi(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,l,u){const d=ng(o,l,u);return o.inclusive?d<=0:d<0}(r.startAt,Bi(r),s)||r.endAt&&!function(o,l,u){const d=ng(o,l,u);return o.inclusive?d>=0:d>0}(r.endAt,Bi(r),s))}(t,e)}function jb(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function g_(t){return(e,n)=>{let r=!1;for(const s of Bi(t)){const i=Vb(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function Vb(t,e,n){const r=t.field.isKeyField()?Y.comparator(e.key,n.key):function(i,o,l){const u=o.data.field(i),d=l.data.field(i);return u!==null&&d!==null?Us(u,d):X(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return X(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zr{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Er(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return Zv(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lb=new Ae(Y.comparator);function Rn(){return Lb}const y_=new Ae(Y.comparator);function Ri(...t){let e=y_;for(const n of t)e=e.insert(n.key,n);return e}function v_(t){let e=y_;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Lr(){return $i()}function __(){return $i()}function $i(){return new Zr(t=>t.toString(),(t,e)=>t.isEqual(e))}const Ob=new Ae(Y.comparator),Mb=new qe(Y.comparator);function ae(...t){let e=Mb;for(const n of t)e=e.add(n);return e}const Fb=new qe(oe);function zb(){return Fb}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ld(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:cl(e)?"-0":e}}function w_(t){return{integerValue:""+t}}function Ub(t,e){return mb(e)?w_(e):Ld(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ql{constructor(){this._=void 0}}function Bb(t,e,n){return t instanceof vo?function(s,i){const o={fields:{[n_]:{stringValue:t_},[s_]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Cd(i)&&(i=Bl(i)),i&&(o.fields[r_]=i),{mapValue:o}}(n,e):t instanceof _o?E_(t,e):t instanceof wo?T_(t,e):function(s,i){const o=x_(s,i),l=og(o)+og(s.Ae);return dh(o)&&dh(s.Ae)?w_(l):Ld(s.serializer,l)}(t,e)}function $b(t,e,n){return t instanceof _o?E_(t,e):t instanceof wo?T_(t,e):n}function x_(t,e){return t instanceof ml?function(r){return dh(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class vo extends ql{}class _o extends ql{constructor(e){super(),this.elements=e}}function E_(t,e){const n=b_(e);for(const r of t.elements)n.some(s=>gn(s,r))||n.push(r);return{arrayValue:{values:n}}}class wo extends ql{constructor(e){super(),this.elements=e}}function T_(t,e){let n=b_(e);for(const r of t.elements)n=n.filter(s=>!gn(s,r));return{arrayValue:{values:n}}}class ml extends ql{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function og(t){return je(t.integerValue||t.doubleValue)}function b_(t){return Pd(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hb{constructor(e,n){this.field=e,this.transform=n}}function qb(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof _o&&s instanceof _o||r instanceof wo&&s instanceof wo?Fs(r.elements,s.elements,gn):r instanceof ml&&s instanceof ml?gn(r.Ae,s.Ae):r instanceof vo&&s instanceof vo}(t.transform,e.transform)}class Wb{constructor(e,n){this.version=e,this.transformResults=n}}class Ht{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Ht}static exists(e){return new Ht(void 0,e)}static updateTime(e){return new Ht(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Va(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Wl{}function k_(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Od(t.key,Ht.none()):new Ro(t.key,t.data,Ht.none());{const n=t.data,r=Et.empty();let s=new qe(Ye.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new Tr(t.key,r,new Ct(s.toArray()),Ht.none())}}function Gb(t,e,n){t instanceof Ro?function(s,i,o){const l=s.value.clone(),u=lg(s.fieldTransforms,i,o.transformResults);l.setAll(u),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof Tr?function(s,i,o){if(!Va(s.precondition,i))return void i.convertToUnknownDocument(o.version);const l=lg(s.fieldTransforms,i,o.transformResults),u=i.data;u.setAll(S_(s)),u.setAll(l),i.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Hi(t,e,n,r){return t instanceof Ro?function(i,o,l,u){if(!Va(i.precondition,o))return l;const d=i.value.clone(),m=ug(i.fieldTransforms,u,o);return d.setAll(m),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof Tr?function(i,o,l,u){if(!Va(i.precondition,o))return l;const d=ug(i.fieldTransforms,u,o),m=o.data;return m.setAll(S_(i)),m.setAll(d),o.convertToFoundDocument(o.version,m).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(i,o,l){return Va(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function Kb(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=x_(r.transform,s||null);i!=null&&(n===null&&(n=Et.empty()),n.set(r.field,i))}return n||null}function ag(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Fs(r,s,(i,o)=>qb(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Ro extends Wl{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Tr extends Wl{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function S_(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function lg(t,e,n){const r=new Map;fe(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,l=e.data.field(i.field);r.set(i.field,$b(o,l,n[s]))}return r}function ug(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,Bb(i,o,e))}return r}class Od extends Wl{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Qb extends Wl{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yb{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&Gb(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Hi(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Hi(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=__();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let l=this.applyToLocalView(o,i.mutatedFields);l=n.has(s.key)?null:l;const u=k_(o,l);u!==null&&r.set(s.key,u),o.isValidDocument()||o.convertToNoDocument(ee.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ae())}isEqual(e){return this.batchId===e.batchId&&Fs(this.mutations,e.mutations,(n,r)=>ag(n,r))&&Fs(this.baseMutations,e.baseMutations,(n,r)=>ag(n,r))}}class Md{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){fe(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=function(){return Ob}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new Md(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xb{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jb{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Oe,ue;function Zb(t){switch(t){case V.OK:return X(64938);case V.CANCELLED:case V.UNKNOWN:case V.DEADLINE_EXCEEDED:case V.RESOURCE_EXHAUSTED:case V.INTERNAL:case V.UNAVAILABLE:case V.UNAUTHENTICATED:return!1;case V.INVALID_ARGUMENT:case V.NOT_FOUND:case V.ALREADY_EXISTS:case V.PERMISSION_DENIED:case V.FAILED_PRECONDITION:case V.ABORTED:case V.OUT_OF_RANGE:case V.UNIMPLEMENTED:case V.DATA_LOSS:return!0;default:return X(15467,{code:t})}}function I_(t){if(t===void 0)return An("GRPC error has no .code"),V.UNKNOWN;switch(t){case Oe.OK:return V.OK;case Oe.CANCELLED:return V.CANCELLED;case Oe.UNKNOWN:return V.UNKNOWN;case Oe.DEADLINE_EXCEEDED:return V.DEADLINE_EXCEEDED;case Oe.RESOURCE_EXHAUSTED:return V.RESOURCE_EXHAUSTED;case Oe.INTERNAL:return V.INTERNAL;case Oe.UNAVAILABLE:return V.UNAVAILABLE;case Oe.UNAUTHENTICATED:return V.UNAUTHENTICATED;case Oe.INVALID_ARGUMENT:return V.INVALID_ARGUMENT;case Oe.NOT_FOUND:return V.NOT_FOUND;case Oe.ALREADY_EXISTS:return V.ALREADY_EXISTS;case Oe.PERMISSION_DENIED:return V.PERMISSION_DENIED;case Oe.FAILED_PRECONDITION:return V.FAILED_PRECONDITION;case Oe.ABORTED:return V.ABORTED;case Oe.OUT_OF_RANGE:return V.OUT_OF_RANGE;case Oe.UNIMPLEMENTED:return V.UNIMPLEMENTED;case Oe.DATA_LOSS:return V.DATA_LOSS;default:return X(39323,{code:t})}}(ue=Oe||(Oe={}))[ue.OK=0]="OK",ue[ue.CANCELLED=1]="CANCELLED",ue[ue.UNKNOWN=2]="UNKNOWN",ue[ue.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ue[ue.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ue[ue.NOT_FOUND=5]="NOT_FOUND",ue[ue.ALREADY_EXISTS=6]="ALREADY_EXISTS",ue[ue.PERMISSION_DENIED=7]="PERMISSION_DENIED",ue[ue.UNAUTHENTICATED=16]="UNAUTHENTICATED",ue[ue.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ue[ue.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ue[ue.ABORTED=10]="ABORTED",ue[ue.OUT_OF_RANGE=11]="OUT_OF_RANGE",ue[ue.UNIMPLEMENTED=12]="UNIMPLEMENTED",ue[ue.INTERNAL=13]="INTERNAL",ue[ue.UNAVAILABLE=14]="UNAVAILABLE",ue[ue.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ek(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tk=new ir([4294967295,4294967295],0);function cg(t){const e=ek().encode(t),n=new zv;return n.update(e),new Uint8Array(n.digest())}function hg(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new ir([n,r],0),new ir([s,i],0)]}class Fd{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Ni(`Invalid padding: ${n}`);if(r<0)throw new Ni(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ni(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Ni(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=ir.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(ir.fromNumber(r)));return s.compare(tk)===1&&(s=new ir([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=cg(e),[r,s]=hg(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);if(!this.we(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Fd(i,s,n);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.ge===0)return;const n=cg(e),[r,s]=hg(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Ni extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gl{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,No.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Gl(ee.min(),s,new Ae(oe),Rn(),ae())}}class No{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new No(r,n,ae(),ae(),ae())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class La{constructor(e,n,r,s){this.be=e,this.removedTargetIds=n,this.key=r,this.De=s}}class A_{constructor(e,n){this.targetId=e,this.Ce=n}}class R_{constructor(e,n,r=Je.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class dg{constructor(){this.ve=0,this.Fe=fg(),this.Me=Je.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ae(),n=ae(),r=ae();return this.Fe.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:X(38017,{changeType:i})}}),new No(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=fg()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,fe(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class nk{constructor(e){this.Ge=e,this.ze=new Map,this.je=Rn(),this.Je=ga(),this.He=ga(),this.Ye=new Ae(oe)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:X(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,s)=>{this.rt(s)&&n(s)})}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const i=s.target;if(mh(i))if(r===0){const o=new Y(i.path);this.et(n,o,ut.newNoDocument(o,ee.min()))}else fe(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const l=this.ut(e),u=l?this.ct(l,e,o):1;if(u!==0){this.it(n);const d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,d)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,l;try{o=mr(r).toUint8Array()}catch(u){if(u instanceof e_)return Wr("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new Fd(o,s,i)}catch(u){return Wr(u instanceof Ni?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.ge===0?null:l}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Ge.ht(),l=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.et(n,i,null),s++)}),s}Tt(e){const n=new Map;this.ze.forEach((i,o)=>{const l=this.ot(o);if(l){if(i.current&&mh(l.target)){const u=new Y(l.target.path);this.It(u).has(o)||this.Et(o,u)||this.et(o,u,ut.newNoDocument(u,e))}i.Be&&(n.set(o,i.ke()),i.qe())}});let r=ae();this.He.forEach((i,o)=>{let l=!0;o.forEachWhile(u=>{const d=this.ot(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(i))}),this.je.forEach((i,o)=>o.setReadTime(e));const s=new Gl(e,n,this.Ye,this.je,r);return this.je=Rn(),this.Je=ga(),this.He=ga(),this.Ye=new Ae(oe),s}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new dg,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new qe(oe),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new qe(oe),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||H("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new dg),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function ga(){return new Ae(Y.comparator)}function fg(){return new Ae(Y.comparator)}const rk={asc:"ASCENDING",desc:"DESCENDING"},sk={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},ik={and:"AND",or:"OR"};class ok{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function yh(t,e){return t.useProto3Json||Ul(e)?e:{value:e}}function pl(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function N_(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function ak(t,e){return pl(t,e.toTimestamp())}function pn(t){return fe(!!t,49232),ee.fromTimestamp(function(n){const r=fr(n);return new _e(r.seconds,r.nanos)}(t))}function zd(t,e){return vh(t,e).canonicalString()}function vh(t,e){const n=function(s){return new ve(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function C_(t){const e=ve.fromString(t);return fe(L_(e),10190,{key:e.toString()}),e}function _h(t,e){return zd(t.databaseId,e.path)}function rc(t,e){const n=C_(e);if(n.get(1)!==t.databaseId.projectId)throw new $(V.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new $(V.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Y(D_(n))}function P_(t,e){return zd(t.databaseId,e)}function lk(t){const e=C_(t);return e.length===4?ve.emptyPath():D_(e)}function wh(t){return new ve(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function D_(t){return fe(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function mg(t,e,n){return{name:_h(t,e),fields:n.value.mapValue.fields}}function uk(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:X(39313,{state:d})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(d,m){return d.useProto3Json?(fe(m===void 0||typeof m=="string",58123),Je.fromBase64String(m||"")):(fe(m===void 0||m instanceof Buffer||m instanceof Uint8Array,16193),Je.fromUint8Array(m||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(d){const m=d.code===void 0?V.UNKNOWN:I_(d.code);return new $(m,d.message||"")}(o);n=new R_(r,s,i,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=rc(t,r.document.name),i=pn(r.document.updateTime),o=r.document.createTime?pn(r.document.createTime):ee.min(),l=new Et({mapValue:{fields:r.document.fields}}),u=ut.newFoundDocument(s,i,o,l),d=r.targetIds||[],m=r.removedTargetIds||[];n=new La(d,m,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=rc(t,r.document),i=r.readTime?pn(r.readTime):ee.min(),o=ut.newNoDocument(s,i),l=r.removedTargetIds||[];n=new La([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=rc(t,r.document),i=r.removedTargetIds||[];n=new La([],i,s,null)}else{if(!("filter"in e))return X(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new Jb(s,i),l=r.targetId;n=new A_(l,o)}}return n}function ck(t,e){let n;if(e instanceof Ro)n={update:mg(t,e.key,e.value)};else if(e instanceof Od)n={delete:_h(t,e.key)};else if(e instanceof Tr)n={update:mg(t,e.key,e.data),updateMask:_k(e.fieldMask)};else{if(!(e instanceof Qb))return X(16599,{Vt:e.type});n={verify:_h(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const l=o.transform;if(l instanceof vo)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof _o)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof wo)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof ml)return{fieldPath:o.field.canonicalString(),increment:l.Ae};throw X(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:ak(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:X(27497)}(t,e.precondition)),n}function hk(t,e){return t&&t.length>0?(fe(e!==void 0,14353),t.map(n=>function(s,i){let o=s.updateTime?pn(s.updateTime):pn(i);return o.isEqual(ee.min())&&(o=pn(i)),new Wb(o,s.transformResults||[])}(n,e))):[]}function dk(t,e){return{documents:[P_(t,e.path)]}}function fk(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=P_(t,s);const i=function(d){if(d.length!==0)return V_(nn.create(d,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(d){if(d.length!==0)return d.map(m=>function(g){return{field:ls(g.field),direction:gk(g.dir)}}(m))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=yh(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{ft:n,parent:s}}function mk(t){let e=lk(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){fe(r===1,65062);const m=n.from[0];m.allDescendants?s=m.collectionId:e=e.child(m.collectionId)}let i=[];n.where&&(i=function(p){const g=j_(p);return g instanceof nn&&c_(g)?g.getFilters():[g]}(n.where));let o=[];n.orderBy&&(o=function(p){return p.map(g=>function(I){return new yo(us(I.field),function(C){switch(C){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(I.direction))}(g))}(n.orderBy));let l=null;n.limit&&(l=function(p){let g;return g=typeof p=="object"?p.value:p,Ul(g)?null:g}(n.limit));let u=null;n.startAt&&(u=function(p){const g=!!p.before,w=p.values||[];return new fl(w,g)}(n.startAt));let d=null;return n.endAt&&(d=function(p){const g=!p.before,w=p.values||[];return new fl(w,g)}(n.endAt)),Pb(e,s,o,i,l,"F",u,d)}function pk(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return X(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function j_(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=us(n.unaryFilter.field);return Fe.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=us(n.unaryFilter.field);return Fe.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=us(n.unaryFilter.field);return Fe.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=us(n.unaryFilter.field);return Fe.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return X(61313);default:return X(60726)}}(t):t.fieldFilter!==void 0?function(n){return Fe.create(us(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return X(58110);default:return X(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return nn.create(n.compositeFilter.filters.map(r=>j_(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return X(1026)}}(n.compositeFilter.op))}(t):X(30097,{filter:t})}function gk(t){return rk[t]}function yk(t){return sk[t]}function vk(t){return ik[t]}function ls(t){return{fieldPath:t.canonicalString()}}function us(t){return Ye.fromServerFormat(t.fieldPath)}function V_(t){return t instanceof Fe?function(n){if(n.op==="=="){if(tg(n.value))return{unaryFilter:{field:ls(n.field),op:"IS_NAN"}};if(eg(n.value))return{unaryFilter:{field:ls(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(tg(n.value))return{unaryFilter:{field:ls(n.field),op:"IS_NOT_NAN"}};if(eg(n.value))return{unaryFilter:{field:ls(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ls(n.field),op:yk(n.op),value:n.value}}}(t):t instanceof nn?function(n){const r=n.getFilters().map(s=>V_(s));return r.length===1?r[0]:{compositeFilter:{op:vk(n.op),filters:r}}}(t):X(54877,{filter:t})}function _k(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function L_(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gn{constructor(e,n,r,s,i=ee.min(),o=ee.min(),l=Je.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new Gn(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Gn(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Gn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Gn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wk{constructor(e){this.yt=e}}function xk(t){const e=mk({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?gh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ek{constructor(){this.Cn=new Tk}addToCollectionParentIndex(e,n){return this.Cn.add(n),L.resolve()}getCollectionParents(e,n){return L.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return L.resolve()}deleteFieldIndex(e,n){return L.resolve()}deleteAllFieldIndexes(e){return L.resolve()}createTargetIndexes(e,n){return L.resolve()}getDocumentsMatchingTarget(e,n){return L.resolve(null)}getIndexType(e,n){return L.resolve(0)}getFieldIndexes(e,n){return L.resolve([])}getNextCollectionGroupToUpdate(e){return L.resolve(null)}getMinOffset(e,n){return L.resolve(dr.min())}getMinOffsetFromCollectionGroup(e,n){return L.resolve(dr.min())}updateCollectionGroup(e,n,r){return L.resolve()}updateIndexEntries(e,n){return L.resolve()}}class Tk{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new qe(ve.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new qe(ve.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pg={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},O_=41943040;class wt{static withCacheSize(e){return new wt(e,wt.DEFAULT_COLLECTION_PERCENTILE,wt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */wt.DEFAULT_COLLECTION_PERCENTILE=10,wt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,wt.DEFAULT=new wt(O_,wt.DEFAULT_COLLECTION_PERCENTILE,wt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),wt.DISABLED=new wt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new $s(0)}static cr(){return new $s(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gg="LruGarbageCollector",bk=1048576;function yg([t,e],[n,r]){const s=oe(t,n);return s===0?oe(e,r):s}class kk{constructor(e){this.Ir=e,this.buffer=new qe(yg),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();yg(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class Sk{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){H(gg,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Ys(n)?H(gg,"Ignoring IndexedDB error during garbage collection: ",n):await Qs(n)}await this.Vr(3e5)})}}class Ik{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return L.resolve(zl.ce);const r=new kk(n);return this.mr.forEachTarget(e,s=>r.Ar(s.sequenceNumber)).next(()=>this.mr.pr(e,s=>r.Ar(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(H("LruGarbageCollector","Garbage collection skipped; disabled"),L.resolve(pg)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(H("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),pg):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,s,i,o,l,u,d;const m=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(H("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),s=this.params.maximumSequenceNumbersToCollect):s=p,o=Date.now(),this.nthSequenceNumber(e,s))).next(p=>(r=p,l=Date.now(),this.removeTargets(e,r,n))).next(p=>(i=p,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(d=Date.now(),os()<=ce.DEBUG&&H("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-m}ms
	Determined least recently used ${s} in `+(l-o)+`ms
	Removed ${i} targets in `+(u-l)+`ms
	Removed ${p} documents in `+(d-u)+`ms
Total Duration: ${d-m}ms`),L.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:p})))}}function Ak(t,e){return new Ik(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rk{constructor(){this.changes=new Zr(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,ut.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?L.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nk{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ck{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&Hi(r.mutation,s,Ct.empty(),_e.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ae()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ae()){const s=Lr();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=Ri();return i.forEach((l,u)=>{o=o.insert(l,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Lr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ae()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,s){let i=Rn();const o=$i(),l=function(){return $i()}();return n.forEach((u,d)=>{const m=r.get(d.key);s.has(d.key)&&(m===void 0||m.mutation instanceof Tr)?i=i.insert(d.key,d):m!==void 0?(o.set(d.key,m.mutation.getFieldMask()),Hi(m.mutation,d,m.mutation.getFieldMask(),_e.now())):o.set(d.key,Ct.empty())}),this.recalculateAndSaveOverlays(e,i).next(u=>(u.forEach((d,m)=>o.set(d,m)),n.forEach((d,m)=>l.set(d,new Nk(m,o.get(d)??null))),l))}recalculateAndSaveOverlays(e,n){const r=$i();let s=new Ae((o,l)=>o-l),i=ae();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(u=>{const d=n.get(u);if(d===null)return;let m=r.get(u)||Ct.empty();m=l.applyToLocalView(d,m),r.set(u,m);const p=(s.get(l.batchId)||ae()).add(u);s=s.insert(l.batchId,p)})}).next(()=>{const o=[],l=s.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),d=u.key,m=u.value,p=__();m.forEach(g=>{if(!i.has(g)){const w=k_(n.get(g),r.get(g));w!==null&&p.set(g,w),i=i.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,p))}return L.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return Y.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):m_(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):L.resolve(Lr());let l=mo,u=i;return o.next(d=>L.forEach(d,(m,p)=>(l<p.largestBatchId&&(l=p.largestBatchId),i.get(m)?L.resolve():this.remoteDocumentCache.getEntry(e,m).next(g=>{u=u.insert(m,g)}))).next(()=>this.populateOverlays(e,d,i)).next(()=>this.computeViews(e,u,d,ae())).next(m=>({batchId:l,changes:v_(m)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Y(n)).next(r=>{let s=Ri();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=Ri();return this.indexManager.getCollectionParents(e,i).next(l=>L.forEach(l,u=>{const d=function(p,g){return new Xs(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,u.child(i));return this.getDocumentsMatchingCollectionQuery(e,d,r,s).next(m=>{m.forEach((p,g)=>{o=o.insert(p,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((u,d)=>{const m=d.getKey();o.get(m)===null&&(o=o.insert(m,ut.newInvalidDocument(m)))});let l=Ri();return o.forEach((u,d)=>{const m=i.get(u);m!==void 0&&Hi(m.mutation,d,Ct.empty(),_e.now()),Hl(n,d)&&(l=l.insert(u,d))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pk{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return L.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:pn(s.createTime)}}(n)),L.resolve()}getNamedQuery(e,n){return L.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(s){return{name:s.name,query:xk(s.bundledQuery),readTime:pn(s.readTime)}}(n)),L.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dk{constructor(){this.overlays=new Ae(Y.comparator),this.qr=new Map}getOverlay(e,n){return L.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Lr();return L.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.St(e,n,i)}),L.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.qr.delete(r)),L.resolve()}getOverlaysForCollection(e,n,r){const s=Lr(),i=n.length+1,o=new Y(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const u=l.getNext().value,d=u.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===i&&u.largestBatchId>r&&s.set(u.getKey(),u)}return L.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Ae((d,m)=>d-m);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let m=i.get(d.largestBatchId);m===null&&(m=Lr(),i=i.insert(d.largestBatchId,m)),m.set(d.getKey(),d)}}const l=Lr(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,m)=>l.set(d,m)),!(l.size()>=s)););return L.resolve(l)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Xb(n,r));let i=this.qr.get(n);i===void 0&&(i=ae(),this.qr.set(n,i)),this.qr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jk{constructor(){this.sessionToken=Je.EMPTY_BYTE_STRING}getSessionToken(e){return L.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,L.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ud{constructor(){this.Qr=new qe(Ge.$r),this.Ur=new qe(Ge.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new Ge(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new Ge(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new Y(new ve([])),r=new Ge(n,e),s=new Ge(n,e+1),i=[];return this.Ur.forEachInRange([r,s],o=>{this.Gr(o),i.push(o.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new Y(new ve([])),r=new Ge(n,e),s=new Ge(n,e+1);let i=ae();return this.Ur.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Ge(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Ge{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return Y.comparator(e.key,n.key)||oe(e.Yr,n.Yr)}static Kr(e,n){return oe(e.Yr,n.Yr)||Y.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vk{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new qe(Ge.$r)}checkEmpty(e){return L.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Yb(i,n,r,s);this.mutationQueue.push(o);for(const l of s)this.Zr=this.Zr.add(new Ge(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return L.resolve(o)}lookupMutationBatch(e,n){return L.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ei(r),i=s<0?0:s;return L.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return L.resolve(this.mutationQueue.length===0?Nd:this.tr-1)}getAllMutationBatches(e){return L.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Ge(n,0),s=new Ge(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([r,s],o=>{const l=this.Xr(o.Yr);i.push(l)}),L.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new qe(oe);return n.forEach(s=>{const i=new Ge(s,0),o=new Ge(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,o],l=>{r=r.add(l.Yr)})}),L.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;Y.isDocumentKey(i)||(i=i.child(""));const o=new Ge(new Y(i),0);let l=new qe(oe);return this.Zr.forEachWhile(u=>{const d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===s&&(l=l.add(u.Yr)),!0)},o),L.resolve(this.ti(l))}ti(e){const n=[];return e.forEach(r=>{const s=this.Xr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){fe(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return L.forEach(n.mutations,s=>{const i=new Ge(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new Ge(n,0),s=this.Zr.firstAfterOrEqual(r);return L.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,L.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lk{constructor(e){this.ri=e,this.docs=function(){return new Ae(Y.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return L.resolve(r?r.document.mutableCopy():ut.newInvalidDocument(n))}getEntries(e,n){let r=Rn();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():ut.newInvalidDocument(s))}),L.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Rn();const o=n.path,l=new Y(o.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:d,value:{document:m}}=u.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||cb(ub(m),r)<=0||(s.has(m.key)||Hl(n,m))&&(i=i.insert(m.key,m.mutableCopy()))}return L.resolve(i)}getAllFromCollectionGroup(e,n,r,s){X(9500)}ii(e,n){return L.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Ok(this)}getSize(e){return L.resolve(this.size)}}class Ok extends Rk{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)}),L.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mk{constructor(e){this.persistence=e,this.si=new Zr(n=>Dd(n),jd),this.lastRemoteSnapshotVersion=ee.min(),this.highestTargetId=0,this.oi=0,this._i=new Ud,this.targetCount=0,this.ai=$s.ur()}forEachTarget(e,n){return this.si.forEach((r,s)=>n(s)),L.resolve()}getLastRemoteSnapshotVersion(e){return L.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return L.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),L.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),L.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new $s(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,L.resolve()}updateTargetData(e,n){return this.Pr(n),L.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,L.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.si.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.si.delete(o),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),L.waitFor(i).next(()=>s)}getTargetCount(e){return L.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return L.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),L.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),L.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),L.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return L.resolve(r)}containsKey(e,n){return L.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M_{constructor(e,n){this.ui={},this.overlays={},this.ci=new zl(0),this.li=!1,this.li=!0,this.hi=new jk,this.referenceDelegate=e(this),this.Pi=new Mk(this),this.indexManager=new Ek,this.remoteDocumentCache=function(s){return new Lk(s)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new wk(n),this.Ii=new Pk(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Dk,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new Vk(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){H("MemoryPersistence","Starting transaction:",e);const s=new Fk(this.ci.next());return this.referenceDelegate.Ei(),r(s).next(i=>this.referenceDelegate.di(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ai(e,n){return L.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class Fk extends db{constructor(e){super(),this.currentSequenceNumber=e}}class Bd{constructor(e){this.persistence=e,this.Ri=new Ud,this.Vi=null}static mi(e){return new Bd(e)}get fi(){if(this.Vi)return this.Vi;throw X(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),L.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),L.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),L.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(s=>this.fi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.fi.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return L.forEach(this.fi,r=>{const s=Y.fromPath(r);return this.gi(e,s).next(i=>{i||n.removeEntry(s,ee.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return L.or([()=>L.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class gl{constructor(e,n){this.persistence=e,this.pi=new Zr(r=>pb(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=Ak(this,n)}static mi(e,n){return new gl(e,n)}Ei(){}di(e){return L.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return L.forEach(this.pi,(r,s)=>this.br(e,r,s).next(i=>i?L.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ii(e,o=>this.br(e,o,n).next(l=>{l||(r++,i.removeEntry(o,ee.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),L.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),L.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),L.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),L.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Da(e.data.value)),n}br(e,n,r){return L.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.pi.get(n);return L.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $d{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=s}static As(e,n){let r=ae(),s=ae();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new $d(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zk{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uk{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return F2()?8:fb(O2())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ys(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ws(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new zk;return this.Ss(e,n,o).next(l=>{if(i.result=l,this.Vs)return this.bs(e,n,o,l.size)})}).next(()=>i.result)}bs(e,n,r,s){return r.documentReadCount<this.fs?(os()<=ce.DEBUG&&H("QueryEngine","SDK will not create cache indexes for query:",as(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),L.resolve()):(os()<=ce.DEBUG&&H("QueryEngine","Query:",as(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(os()<=ce.DEBUG&&H("QueryEngine","The SDK decides to create cache indexes for query:",as(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,mn(n))):L.resolve())}ys(e,n){if(ig(n))return L.resolve(null);let r=mn(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=gh(n,null,"F"),r=mn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=ae(...i);return this.ps.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(u=>{const d=this.Ds(n,l);return this.Cs(n,d,o,u.readTime)?this.ys(e,gh(n,null,"F")):this.vs(e,d,n,u)}))})))}ws(e,n,r,s){return ig(n)||s.isEqual(ee.min())?L.resolve(null):this.ps.getDocuments(e,r).next(i=>{const o=this.Ds(n,i);return this.Cs(n,o,r,s)?L.resolve(null):(os()<=ce.DEBUG&&H("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),as(n)),this.vs(e,o,n,lb(s,mo)).next(l=>l))})}Ds(e,n){let r=new qe(g_(e));return n.forEach((s,i)=>{Hl(e,i)&&(r=r.add(i))}),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ss(e,n,r){return os()<=ce.DEBUG&&H("QueryEngine","Using full collection scan to execute query:",as(n)),this.ps.getDocumentsMatchingQuery(e,n,dr.min(),r)}vs(e,n,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hd="LocalStore",Bk=3e8;class $k{constructor(e,n,r,s){this.persistence=e,this.Fs=n,this.serializer=s,this.Ms=new Ae(oe),this.xs=new Zr(i=>Dd(i),jd),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Ck(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function Hk(t,e,n,r){return new $k(t,e,n,r)}async function F_(t,e){const n=te(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],l=[];let u=ae();for(const d of s){o.push(d.batchId);for(const m of d.mutations)u=u.add(m.key)}for(const d of i){l.push(d.batchId);for(const m of d.mutations)u=u.add(m.key)}return n.localDocuments.getDocuments(r,u).next(d=>({Ls:d,removedBatchIds:o,addedBatchIds:l}))})})}function qk(t,e){const n=te(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(l,u,d,m){const p=d.batch,g=p.keys();let w=L.resolve();return g.forEach(I=>{w=w.next(()=>m.getEntry(u,I)).next(R=>{const C=d.docVersions.get(I);fe(C!==null,48541),R.version.compareTo(C)<0&&(p.applyToRemoteDocument(R,d),R.isValidDocument()&&(R.setReadTime(d.commitVersion),m.addEntry(R)))})}),w.next(()=>l.mutationQueue.removeMutationBatch(u,p))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let u=ae();for(let d=0;d<l.mutationResults.length;++d)l.mutationResults[d].transformResults.length>0&&(u=u.add(l.batch.mutations[d].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function z_(t){const e=te(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function Wk(t,e){const n=te(t),r=e.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const l=[];e.targetChanges.forEach((m,p)=>{const g=s.get(p);if(!g)return;l.push(n.Pi.removeMatchingKeys(i,m.removedDocuments,p).next(()=>n.Pi.addMatchingKeys(i,m.addedDocuments,p)));let w=g.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(p)!==null?w=w.withResumeToken(Je.EMPTY_BYTE_STRING,ee.min()).withLastLimboFreeSnapshotVersion(ee.min()):m.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(m.resumeToken,r)),s=s.insert(p,w),function(R,C,T){return R.resumeToken.approximateByteSize()===0||C.snapshotVersion.toMicroseconds()-R.snapshotVersion.toMicroseconds()>=Bk?!0:T.addedDocuments.size+T.modifiedDocuments.size+T.removedDocuments.size>0}(g,w,m)&&l.push(n.Pi.updateTargetData(i,w))});let u=Rn(),d=ae();if(e.documentUpdates.forEach(m=>{e.resolvedLimboDocuments.has(m)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,m))}),l.push(Gk(i,o,e.documentUpdates).next(m=>{u=m.ks,d=m.qs})),!r.isEqual(ee.min())){const m=n.Pi.getLastRemoteSnapshotVersion(i).next(p=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,r));l.push(m)}return L.waitFor(l).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,u,d)).next(()=>u)}).then(i=>(n.Ms=s,i))}function Gk(t,e,n){let r=ae(),s=ae();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=Rn();return n.forEach((l,u)=>{const d=i.get(l);u.isFoundDocument()!==d.isFoundDocument()&&(s=s.add(l)),u.isNoDocument()&&u.version.isEqual(ee.min())?(e.removeEntry(l,u.readTime),o=o.insert(l,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),o=o.insert(l,u)):H(Hd,"Ignoring outdated watch update for ",l,". Current version:",d.version," Watch version:",u.version)}),{ks:o,qs:s}})}function Kk(t,e){const n=te(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Nd),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Qk(t,e){const n=te(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Pi.getTargetData(r,e).next(i=>i?(s=i,L.resolve(s)):n.Pi.allocateTargetId(r).next(o=>(s=new Gn(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function xh(t,e,n){const r=te(t),s=r.Ms.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Ys(o))throw o;H(Hd,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(s.target)}function vg(t,e,n){const r=te(t);let s=ee.min(),i=ae();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,d,m){const p=te(u),g=p.xs.get(m);return g!==void 0?L.resolve(p.Ms.get(g)):p.Pi.getTargetData(d,m)}(r,o,mn(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,l.targetId).next(u=>{i=u})}).next(()=>r.Fs.getDocumentsMatchingQuery(o,e,n?s:ee.min(),n?i:ae())).next(l=>(Yk(r,jb(e),l),{documents:l,Qs:i})))}function Yk(t,e,n){let r=t.Os.get(e)||ee.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.Os.set(e,r)}class _g{constructor(){this.activeTargetIds=zb()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Xk{constructor(){this.Mo=new _g,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new _g,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jk{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wg="ConnectivityMonitor";class xg{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){H(wg,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){H(wg,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ya=null;function Eh(){return ya===null?ya=function(){return 268435456+Math.round(2147483648*Math.random())}():ya++,"0x"+ya.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sc="RestConnection",Zk={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class eS{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===hl?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,n,r,s,i){const o=Eh(),l=this.zo(e,n.toUriEncodedString());H(sc,`Sending RPC '${e}' ${o}:`,l,r);const u={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(u,s,i);const{host:d}=new URL(l),m=Io(d);return this.Jo(e,l,u,r,m).then(p=>(H(sc,`Received RPC '${e}' ${o}: `,p),p),p=>{throw Wr(sc,`RPC '${e}' ${o} failed with error: `,p,"url: ",l,"request:",r),p})}Ho(e,n,r,s,i,o){return this.Go(e,n,r,s,i)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ks}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}zo(e,n){const r=Zk[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tS{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ot="WebChannelConnection";class nS extends eS{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,i){const o=Eh();return new Promise((l,u)=>{const d=new Uv;d.setWithCredentials(!0),d.listenOnce(Bv.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case Pa.NO_ERROR:const p=d.getResponseJson();H(ot,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(p)),l(p);break;case Pa.TIMEOUT:H(ot,`RPC '${e}' ${o} timed out`),u(new $(V.DEADLINE_EXCEEDED,"Request time out"));break;case Pa.HTTP_ERROR:const g=d.getStatus();if(H(ot,`RPC '${e}' ${o} failed with status:`,g,"response text:",d.getResponseText()),g>0){let w=d.getResponseJson();Array.isArray(w)&&(w=w[0]);const I=w==null?void 0:w.error;if(I&&I.status&&I.message){const R=function(T){const y=T.toLowerCase().replace(/_/g,"-");return Object.values(V).indexOf(y)>=0?y:V.UNKNOWN}(I.status);u(new $(R,I.message))}else u(new $(V.UNKNOWN,"Server responded with status "+d.getStatus()))}else u(new $(V.UNAVAILABLE,"Connection failed."));break;default:X(9055,{l_:e,streamId:o,h_:d.getLastErrorCode(),P_:d.getLastError()})}}finally{H(ot,`RPC '${e}' ${o} completed.`)}});const m=JSON.stringify(s);H(ot,`RPC '${e}' ${o} sending request:`,s),d.send(n,"POST",m,r,15)})}T_(e,n,r){const s=Eh(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=qv(),l=Hv(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.jo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const m=i.join("");H(ot,`Creating RPC '${e}' stream ${s}: ${m}`,u);const p=o.createWebChannel(m,u);this.I_(p);let g=!1,w=!1;const I=new tS({Yo:C=>{w?H(ot,`Not sending because RPC '${e}' stream ${s} is closed:`,C):(g||(H(ot,`Opening RPC '${e}' stream ${s} transport.`),p.open(),g=!0),H(ot,`RPC '${e}' stream ${s} sending:`,C),p.send(C))},Zo:()=>p.close()}),R=(C,T,y)=>{C.listen(T,k=>{try{y(k)}catch(D){setTimeout(()=>{throw D},0)}})};return R(p,Ai.EventType.OPEN,()=>{w||(H(ot,`RPC '${e}' stream ${s} transport opened.`),I.o_())}),R(p,Ai.EventType.CLOSE,()=>{w||(w=!0,H(ot,`RPC '${e}' stream ${s} transport closed`),I.a_(),this.E_(p))}),R(p,Ai.EventType.ERROR,C=>{w||(w=!0,Wr(ot,`RPC '${e}' stream ${s} transport errored. Name:`,C.name,"Message:",C.message),I.a_(new $(V.UNAVAILABLE,"The operation could not be completed")))}),R(p,Ai.EventType.MESSAGE,C=>{var T;if(!w){const y=C.data[0];fe(!!y,16349);const k=y,D=(k==null?void 0:k.error)||((T=k[0])==null?void 0:T.error);if(D){H(ot,`RPC '${e}' stream ${s} received error:`,D);const O=D.status;let M=function(b){const S=Oe[b];if(S!==void 0)return I_(S)}(O),E=D.message;M===void 0&&(M=V.INTERNAL,E="Unknown error status: "+O+" with message "+D.message),w=!0,I.a_(new $(M,E)),p.close()}else H(ot,`RPC '${e}' stream ${s} received:`,y),I.u_(y)}}),R(l,$v.STAT_EVENT,C=>{C.stat===uh.PROXY?H(ot,`RPC '${e}' stream ${s} detected buffering proxy`):C.stat===uh.NOPROXY&&H(ot,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{I.__()},0),I}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function ic(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kl(t){return new ok(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U_{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=s,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&H("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eg="PersistentStream";class B_{constructor(e,n,r,s,i,o,l,u){this.Mi=e,this.S_=r,this.b_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new U_(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===V.RESOURCE_EXHAUSTED?(An(n.toString()),An("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===V.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.D_===n&&this.G_(r,s)},r=>{e(()=>{const s=new $(V.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(s=>{r(()=>this.z_(s))}),this.stream.onMessage(s=>{r(()=>++this.F_==1?this.J_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return H(Eg,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(H(Eg,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class rS extends B_{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=uk(this.serializer,e),r=function(i){if(!("targetChange"in i))return ee.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?ee.min():o.readTime?pn(o.readTime):ee.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=wh(this.serializer),n.addTarget=function(i,o){let l;const u=o.target;if(l=mh(u)?{documents:dk(i,u)}:{query:fk(i,u).ft},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=N_(i,o.resumeToken);const d=yh(i,o.expectedCount);d!==null&&(l.expectedCount=d)}else if(o.snapshotVersion.compareTo(ee.min())>0){l.readTime=pl(i,o.snapshotVersion.toTimestamp());const d=yh(i,o.expectedCount);d!==null&&(l.expectedCount=d)}return l}(this.serializer,e);const r=pk(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=wh(this.serializer),n.removeTarget=e,this.q_(n)}}class sS extends B_{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return fe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,fe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){fe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=hk(e.writeResults,e.commitTime),r=pn(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=wh(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>ck(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iS{}class oS extends iS{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new $(V.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Go(e,vh(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===V.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new $(V.UNKNOWN,i.toString())})}Ho(e,n,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Ho(e,vh(n,r),s,o,l,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===V.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new $(V.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class aS{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(An(n),this.aa=!1):H("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gr="RemoteStore";class lS{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(o=>{r.enqueueAndForget(async()=>{es(this)&&(H(Gr,"Restarting streams for network reachability change."),await async function(u){const d=te(u);d.Ea.add(4),await Co(d),d.Ra.set("Unknown"),d.Ea.delete(4),await Ql(d)}(this))})}),this.Ra=new aS(r,s)}}async function Ql(t){if(es(t))for(const e of t.da)await e(!0)}async function Co(t){for(const e of t.da)await e(!1)}function $_(t,e){const n=te(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Kd(n)?Gd(n):Js(n).O_()&&Wd(n,e))}function qd(t,e){const n=te(t),r=Js(n);n.Ia.delete(e),r.O_()&&H_(n,e),n.Ia.size===0&&(r.O_()?r.L_():es(n)&&n.Ra.set("Unknown"))}function Wd(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ee.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Js(t).Y_(e)}function H_(t,e){t.Va.Ue(e),Js(t).Z_(e)}function Gd(t){t.Va=new nk({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Js(t).start(),t.Ra.ua()}function Kd(t){return es(t)&&!Js(t).x_()&&t.Ia.size>0}function es(t){return te(t).Ea.size===0}function q_(t){t.Va=void 0}async function uS(t){t.Ra.set("Online")}async function cS(t){t.Ia.forEach((e,n)=>{Wd(t,e)})}async function hS(t,e){q_(t),Kd(t)?(t.Ra.ha(e),Gd(t)):t.Ra.set("Unknown")}async function dS(t,e,n){if(t.Ra.set("Online"),e instanceof R_&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const l of i.targetIds)s.Ia.has(l)&&(await s.remoteSyncer.rejectListen(l,o),s.Ia.delete(l),s.Va.removeTarget(l))}(t,e)}catch(r){H(Gr,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await yl(t,r)}else if(e instanceof La?t.Va.Ze(e):e instanceof A_?t.Va.st(e):t.Va.tt(e),!n.isEqual(ee.min()))try{const r=await z_(t.localStore);n.compareTo(r)>=0&&await function(i,o){const l=i.Va.Tt(o);return l.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const m=i.Ia.get(d);m&&i.Ia.set(d,m.withResumeToken(u.resumeToken,o))}}),l.targetMismatches.forEach((u,d)=>{const m=i.Ia.get(u);if(!m)return;i.Ia.set(u,m.withResumeToken(Je.EMPTY_BYTE_STRING,m.snapshotVersion)),H_(i,u);const p=new Gn(m.target,u,d,m.sequenceNumber);Wd(i,p)}),i.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){H(Gr,"Failed to raise snapshot:",r),await yl(t,r)}}async function yl(t,e,n){if(!Ys(e))throw e;t.Ea.add(1),await Co(t),t.Ra.set("Offline"),n||(n=()=>z_(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{H(Gr,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Ql(t)})}function W_(t,e){return e().catch(n=>yl(t,n,e))}async function Yl(t){const e=te(t),n=gr(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Nd;for(;fS(e);)try{const s=await Kk(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,mS(e,s)}catch(s){await yl(e,s)}G_(e)&&K_(e)}function fS(t){return es(t)&&t.Ta.length<10}function mS(t,e){t.Ta.push(e);const n=gr(t);n.O_()&&n.X_&&n.ea(e.mutations)}function G_(t){return es(t)&&!gr(t).x_()&&t.Ta.length>0}function K_(t){gr(t).start()}async function pS(t){gr(t).ra()}async function gS(t){const e=gr(t);for(const n of t.Ta)e.ea(n.mutations)}async function yS(t,e,n){const r=t.Ta.shift(),s=Md.from(r,e,n);await W_(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Yl(t)}async function vS(t,e){e&&gr(t).X_&&await async function(r,s){if(function(o){return Zb(o)&&o!==V.ABORTED}(s.code)){const i=r.Ta.shift();gr(r).B_(),await W_(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Yl(r)}}(t,e),G_(t)&&K_(t)}async function Tg(t,e){const n=te(t);n.asyncQueue.verifyOperationInProgress(),H(Gr,"RemoteStore received new credentials");const r=es(n);n.Ea.add(3),await Co(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Ql(n)}async function _S(t,e){const n=te(t);e?(n.Ea.delete(2),await Ql(n)):e||(n.Ea.add(2),await Co(n),n.Ra.set("Unknown"))}function Js(t){return t.ma||(t.ma=function(n,r,s){const i=te(n);return i.sa(),new rS(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:uS.bind(null,t),t_:cS.bind(null,t),r_:hS.bind(null,t),H_:dS.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),Kd(t)?Gd(t):t.Ra.set("Unknown")):(await t.ma.stop(),q_(t))})),t.ma}function gr(t){return t.fa||(t.fa=function(n,r,s){const i=te(n);return i.sa(),new sS(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:pS.bind(null,t),r_:vS.bind(null,t),ta:gS.bind(null,t),na:yS.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await Yl(t)):(await t.fa.stop(),t.Ta.length>0&&(H(Gr,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qd{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new or,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,l=new Qd(e,n,o,s,i);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new $(V.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Yd(t,e){if(An("AsyncQueue",`${e}: ${t}`),Ys(t))return new $(V.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rs{static emptySet(e){return new Rs(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||Y.comparator(n.key,r.key):(n,r)=>Y.comparator(n.key,r.key),this.keyedMap=Ri(),this.sortedSet=new Ae(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Rs)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Rs;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bg{constructor(){this.ga=new Ae(Y.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):X(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class Hs{constructor(e,n,r,s,i,o,l,u,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new Hs(e,n,Rs.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&$l(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wS{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class xS{constructor(){this.queries=kg(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=te(n),i=s.queries;s.queries=kg(),i.forEach((o,l)=>{for(const u of l.Sa)u.onError(r)})})(this,new $(V.ABORTED,"Firestore shutting down"))}}function kg(){return new Zr(t=>p_(t),$l)}async function Q_(t,e){const n=te(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.ba()&&e.Da()&&(r=2):(i=new wS,r=e.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(s,!0);break;case 1:i.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const l=Yd(o,`Initialization of query '${as(e.query)}' failed`);return void e.onError(l)}n.queries.set(s,i),i.Sa.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&Xd(n)}async function Y_(t,e){const n=te(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.Sa.indexOf(e);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?s=e.Da()?0:1:!i.ba()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function ES(t,e){const n=te(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const l of o.Sa)l.Fa(s)&&(r=!0);o.wa=s}}r&&Xd(n)}function TS(t,e,n){const r=te(t),s=r.queries.get(e);if(s)for(const i of s.Sa)i.onError(n);r.queries.delete(e)}function Xd(t){t.Ca.forEach(e=>{e.next()})}var Th,Sg;(Sg=Th||(Th={})).Ma="default",Sg.Cache="cache";class X_{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Hs(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Hs.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Th.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J_{constructor(e){this.key=e}}class Z_{constructor(e){this.key=e}}class bS{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ae(),this.mutatedKeys=ae(),this.eu=g_(e),this.tu=new Rs(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new bg,s=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,l=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,d=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((m,p)=>{const g=s.get(m),w=Hl(this.query,p)?p:null,I=!!g&&this.mutatedKeys.has(g.key),R=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let C=!1;g&&w?g.data.isEqual(w.data)?I!==R&&(r.track({type:3,doc:w}),C=!0):this.su(g,w)||(r.track({type:2,doc:w}),C=!0,(u&&this.eu(w,u)>0||d&&this.eu(w,d)<0)&&(l=!0)):!g&&w?(r.track({type:0,doc:w}),C=!0):g&&!w&&(r.track({type:1,doc:g}),C=!0,(u||d)&&(l=!0)),C&&(w?(o=o.add(w),i=R?i.add(m):i.delete(m)):(o=o.delete(m),i=i.delete(m)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const m=this.query.limitType==="F"?o.last():o.first();o=o.delete(m.key),i=i.delete(m.key),r.track({type:1,doc:m})}return{tu:o,iu:r,Cs:l,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((m,p)=>function(w,I){const R=C=>{switch(C){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return X(20277,{Rt:C})}};return R(w)-R(I)}(m.type,p.type)||this.eu(m.doc,p.doc)),this.ou(r),s=s??!1;const l=n&&!s?this._u():[],u=this.Xa.size===0&&this.current&&!s?1:0,d=u!==this.Za;return this.Za=u,o.length!==0||d?{snapshot:new Hs(this.query,e.tu,i,o,e.mutatedKeys,u===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new bg,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=ae(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new Z_(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new J_(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=ae();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Hs.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Jd="SyncEngine";class kS{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class SS{constructor(e){this.key=e,this.hu=!1}}class IS{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Zr(l=>p_(l),$l),this.Iu=new Map,this.Eu=new Set,this.du=new Ae(Y.comparator),this.Au=new Map,this.Ru=new Ud,this.Vu={},this.mu=new Map,this.fu=$s.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function AS(t,e,n=!0){const r=iw(t);let s;const i=r.Tu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await ew(r,e,n,!0),s}async function RS(t,e){const n=iw(t);await ew(n,e,!0,!1)}async function ew(t,e,n,r){const s=await Qk(t.localStore,mn(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let l;return r&&(l=await NS(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&$_(t.remoteStore,s),l}async function NS(t,e,n,r,s){t.pu=(p,g,w)=>async function(R,C,T,y){let k=C.view.ru(T);k.Cs&&(k=await vg(R.localStore,C.query,!1).then(({documents:E})=>C.view.ru(E,k)));const D=y&&y.targetChanges.get(C.targetId),O=y&&y.targetMismatches.get(C.targetId)!=null,M=C.view.applyChanges(k,R.isPrimaryClient,D,O);return Ag(R,C.targetId,M.au),M.snapshot}(t,p,g,w);const i=await vg(t.localStore,e,!0),o=new bS(e,i.Qs),l=o.ru(i.documents),u=No.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),d=o.applyChanges(l,t.isPrimaryClient,u);Ag(t,n,d.au);const m=new kS(e,n,o);return t.Tu.set(e,m),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),d.snapshot}async function CS(t,e,n){const r=te(t),s=r.Tu.get(e),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter(o=>!$l(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await xh(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&qd(r.remoteStore,s.targetId),bh(r,s.targetId)}).catch(Qs)):(bh(r,s.targetId),await xh(r.localStore,s.targetId,!0))}async function PS(t,e){const n=te(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),qd(n.remoteStore,r.targetId))}async function DS(t,e,n){const r=zS(t);try{const s=await function(o,l){const u=te(o),d=_e.now(),m=l.reduce((w,I)=>w.add(I.key),ae());let p,g;return u.persistence.runTransaction("Locally write mutations","readwrite",w=>{let I=Rn(),R=ae();return u.Ns.getEntries(w,m).next(C=>{I=C,I.forEach((T,y)=>{y.isValidDocument()||(R=R.add(T))})}).next(()=>u.localDocuments.getOverlayedDocuments(w,I)).next(C=>{p=C;const T=[];for(const y of l){const k=Kb(y,p.get(y.key).overlayedDocument);k!=null&&T.push(new Tr(y.key,k,a_(k.value.mapValue),Ht.exists(!0)))}return u.mutationQueue.addMutationBatch(w,d,T,l)}).next(C=>{g=C;const T=C.applyToLocalDocumentSet(p,R);return u.documentOverlayCache.saveOverlays(w,C.batchId,T)})}).then(()=>({batchId:g.batchId,changes:v_(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,l,u){let d=o.Vu[o.currentUser.toKey()];d||(d=new Ae(oe)),d=d.insert(l,u),o.Vu[o.currentUser.toKey()]=d}(r,s.batchId,n),await Po(r,s.changes),await Yl(r.remoteStore)}catch(s){const i=Yd(s,"Failed to persist write");n.reject(i)}}async function tw(t,e){const n=te(t);try{const r=await Wk(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Au.get(i);o&&(fe(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.hu=!0:s.modifiedDocuments.size>0?fe(o.hu,14607):s.removedDocuments.size>0&&(fe(o.hu,42227),o.hu=!1))}),await Po(n,r,e)}catch(r){await Qs(r)}}function Ig(t,e,n){const r=te(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach((i,o)=>{const l=o.view.va(e);l.snapshot&&s.push(l.snapshot)}),function(o,l){const u=te(o);u.onlineState=l;let d=!1;u.queries.forEach((m,p)=>{for(const g of p.Sa)g.va(l)&&(d=!0)}),d&&Xd(u)}(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function jS(t,e,n){const r=te(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),i=s&&s.key;if(i){let o=new Ae(Y.comparator);o=o.insert(i,ut.newNoDocument(i,ee.min()));const l=ae().add(i),u=new Gl(ee.min(),new Map,new Ae(oe),o,l);await tw(r,u),r.du=r.du.remove(i),r.Au.delete(e),Zd(r)}else await xh(r.localStore,e,!1).then(()=>bh(r,e,n)).catch(Qs)}async function VS(t,e){const n=te(t),r=e.batch.batchId;try{const s=await qk(n.localStore,e);rw(n,r,null),nw(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Po(n,s)}catch(s){await Qs(s)}}async function LS(t,e,n){const r=te(t);try{const s=await function(o,l){const u=te(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let m;return u.mutationQueue.lookupMutationBatch(d,l).next(p=>(fe(p!==null,37113),m=p.keys(),u.mutationQueue.removeMutationBatch(d,p))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,m,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,m)).next(()=>u.localDocuments.getDocuments(d,m))})}(r.localStore,e);rw(r,e,n),nw(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Po(r,s)}catch(s){await Qs(s)}}function nw(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function rw(t,e,n){const r=te(t);let s=r.Vu[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Vu[r.currentUser.toKey()]=s}}function bh(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||sw(t,r)})}function sw(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(qd(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),Zd(t))}function Ag(t,e,n){for(const r of n)r instanceof J_?(t.Ru.addReference(r.key,e),OS(t,r)):r instanceof Z_?(H(Jd,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||sw(t,r.key)):X(19791,{wu:r})}function OS(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(H(Jd,"New document in limbo: "+n),t.Eu.add(r),Zd(t))}function Zd(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new Y(ve.fromString(e)),r=t.fu.next();t.Au.set(r,new SS(n)),t.du=t.du.insert(n,r),$_(t.remoteStore,new Gn(mn(Vd(n.path)),r,"TargetPurposeLimboResolution",zl.ce))}}async function Po(t,e,n){const r=te(t),s=[],i=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((l,u)=>{o.push(r.pu(u,e,n).then(d=>{var m;if((d||n)&&r.isPrimaryClient){const p=d?!d.fromCache:(m=n==null?void 0:n.targetChanges.get(u.targetId))==null?void 0:m.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(d){s.push(d);const p=$d.As(u.targetId,d);i.push(p)}}))}),await Promise.all(o),r.Pu.H_(s),await async function(u,d){const m=te(u);try{await m.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>L.forEach(d,g=>L.forEach(g.Es,w=>m.persistence.referenceDelegate.addReference(p,g.targetId,w)).next(()=>L.forEach(g.ds,w=>m.persistence.referenceDelegate.removeReference(p,g.targetId,w)))))}catch(p){if(!Ys(p))throw p;H(Hd,"Failed to update sequence numbers: "+p)}for(const p of d){const g=p.targetId;if(!p.fromCache){const w=m.Ms.get(g),I=w.snapshotVersion,R=w.withLastLimboFreeSnapshotVersion(I);m.Ms=m.Ms.insert(g,R)}}}(r.localStore,i))}async function MS(t,e){const n=te(t);if(!n.currentUser.isEqual(e)){H(Jd,"User change. New user:",e.toKey());const r=await F_(n.localStore,e);n.currentUser=e,function(i,o){i.mu.forEach(l=>{l.forEach(u=>{u.reject(new $(V.CANCELLED,o))})}),i.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Po(n,r.Ls)}}function FS(t,e){const n=te(t),r=n.Au.get(e);if(r&&r.hu)return ae().add(r.key);{let s=ae();const i=n.Iu.get(e);if(!i)return s;for(const o of i){const l=n.Tu.get(o);s=s.unionWith(l.view.nu)}return s}}function iw(t){const e=te(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=tw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=FS.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=jS.bind(null,e),e.Pu.H_=ES.bind(null,e.eventManager),e.Pu.yu=TS.bind(null,e.eventManager),e}function zS(t){const e=te(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=VS.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=LS.bind(null,e),e}class vl{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Kl(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return Hk(this.persistence,new Uk,e.initialUser,this.serializer)}Cu(e){return new M_(Bd.mi,this.serializer)}Du(e){return new Xk}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}vl.provider={build:()=>new vl};class US extends vl{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){fe(this.persistence.referenceDelegate instanceof gl,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new Sk(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?wt.withCacheSize(this.cacheSizeBytes):wt.DEFAULT;return new M_(r=>gl.mi(r,n),this.serializer)}}class kh{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Ig(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=MS.bind(null,this.syncEngine),await _S(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new xS}()}createDatastore(e){const n=Kl(e.databaseInfo.databaseId),r=function(i){return new nS(i)}(e.databaseInfo);return function(i,o,l,u){return new oS(i,o,l,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,l){return new lS(r,s,i,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>Ig(this.syncEngine,n,0),function(){return xg.v()?new xg:new Jk}())}createSyncEngine(e,n){return function(s,i,o,l,u,d,m){const p=new IS(s,i,o,l,u,d);return m&&(p.gu=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=te(s);H(Gr,"RemoteStore shutting down."),i.Ea.add(5),await Co(i),i.Aa.shutdown(),i.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}kh.provider={build:()=>new kh};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ow{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):An("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yr="FirestoreClient";class BS{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=at.UNAUTHENTICATED,this.clientId=Ml.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{H(yr,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(H(yr,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new or;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Yd(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function oc(t,e){t.asyncQueue.verifyOperationInProgress(),H(yr,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await F_(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Rg(t,e){t.asyncQueue.verifyOperationInProgress();const n=await $S(t);H(yr,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Tg(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>Tg(e.remoteStore,s)),t._onlineComponents=e}async function $S(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){H(yr,"Using user provided OfflineComponentProvider");try{await oc(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===V.FAILED_PRECONDITION||s.code===V.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Wr("Error using user provided cache. Falling back to memory cache: "+n),await oc(t,new vl)}}else H(yr,"Using default OfflineComponentProvider"),await oc(t,new US(void 0));return t._offlineComponents}async function aw(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(H(yr,"Using user provided OnlineComponentProvider"),await Rg(t,t._uninitializedComponentsProvider._online)):(H(yr,"Using default OnlineComponentProvider"),await Rg(t,new kh))),t._onlineComponents}function HS(t){return aw(t).then(e=>e.syncEngine)}async function Sh(t){const e=await aw(t),n=e.eventManager;return n.onListen=AS.bind(null,e.syncEngine),n.onUnlisten=CS.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=RS.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=PS.bind(null,e.syncEngine),n}function qS(t,e,n={}){const r=new or;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,u,d){const m=new ow({next:g=>{m.Nu(),o.enqueueAndForget(()=>Y_(i,p)),g.fromCache&&u.source==="server"?d.reject(new $(V.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(g)},error:g=>d.reject(g)}),p=new X_(l,m,{includeMetadataChanges:!0,qa:!0});return Q_(i,p)}(await Sh(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lw(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ng=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uw="firestore.googleapis.com",Cg=!0;class Pg{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new $(V.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=uw,this.ssl=Cg}else this.host=e.host,this.ssl=e.ssl??Cg;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=O_;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<bk)throw new $(V.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Yv("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=lw(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new $(V.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new $(V.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new $(V.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Xl{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Pg({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new $(V.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new $(V.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Pg(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Kv;switch(r.type){case"firstParty":return new nb(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new $(V.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Ng.get(n);r&&(H("ComponentProvider","Removing Datastore"),Ng.delete(n),r.terminate())}(this),Promise.resolve()}}function cw(t,e,n,r={}){var d;t=jt(t,Xl);const s=Io(e),i=t._getSettings(),o={...i,emulatorOptions:t._getEmulatorOptions()},l=`${e}:${n}`;s&&(Sv(`https://${l}`),Av("Firestore",!0)),i.host!==uw&&i.host!==l&&Wr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...i,host:l,ssl:s,emulatorOptions:r};if(!ll(u,o)&&(t._setSettings(u),r.mockUserToken)){let m,p;if(typeof r.mockUserToken=="string")m=r.mockUserToken,p=at.MOCK_USER;else{m=Iv(r.mockUserToken,(d=t._app)==null?void 0:d.options.projectId);const g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new $(V.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new at(g)}t._authCredentials=new ZT(new Gv(m,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Pn(this.firestore,e,this._query)}}class Ce{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new En(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ce(this.firestore,e,this._key)}toJSON(){return{type:Ce._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Ao(n,Ce._jsonSchema))return new Ce(e,r||null,new Y(ve.fromString(n.referencePath)))}}Ce._jsonSchemaVersion="firestore/documentReference/1.0",Ce._jsonSchema={type:ze("string",Ce._jsonSchemaVersion),referencePath:ze("string")};class En extends Pn{constructor(e,n,r){super(e,n,Vd(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ce(this.firestore,null,new Y(e))}withConverter(e){return new En(this.firestore,e,this._path)}}function vr(t,e,...n){if(t=gt(t),Qv("collection","path",e),t instanceof Xl){const r=ve.fromString(e,...n);return qp(r),new En(t,null,r)}{if(!(t instanceof Ce||t instanceof En))throw new $(V.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ve.fromString(e,...n));return qp(r),new En(t.firestore,null,r)}}function Bt(t,e,...n){if(t=gt(t),arguments.length===1&&(e=Ml.newId()),Qv("doc","path",e),t instanceof Xl){const r=ve.fromString(e,...n);return Hp(r),new Ce(t,null,new Y(r))}{if(!(t instanceof Ce||t instanceof En))throw new $(V.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ve.fromString(e,...n));return Hp(r),new Ce(t.firestore,t instanceof En?t.converter:null,new Y(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dg="AsyncQueue";class jg{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new U_(this,"async_queue_retry"),this._c=()=>{const r=ic();r&&H(Dg,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=ic();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=ic();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new or;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Ys(e))throw e;H(Dg,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,An("INTERNAL UNHANDLED ERROR: ",Vg(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=Qd.createAndSchedule(this,e,n,r,i=>this.hc(i));return this.tc.push(s),s}uc(){this.nc&&X(47125,{Pc:Vg(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function Vg(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lg(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class Nn extends Xl{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new jg,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new jg(e),this._firestoreClient=void 0,await e}}}function hw(t,e){const n=typeof t=="object"?t:Ov(),r=typeof t=="string"?t:hl,s=Dv(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=bv("firestore");i&&cw(s,...i)}return s}function Jl(t){if(t._terminated)throw new $(V.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||WS(t),t._firestoreClient}function WS(t){var r,s,i;const e=t._freezeSettings(),n=function(l,u,d,m){return new vb(l,u,d,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,lw(m.experimentalLongPollingOptions),m.useFetchStreams,m.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(s=e.localCache)!=null&&s._offlineComponentProvider&&((i=e.localCache)!=null&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new BS(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Rt(Je.fromBase64String(e))}catch(n){throw new $(V.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Rt(Je.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Rt._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Ao(e,Rt._jsonSchema))return Rt.fromBase64String(e.bytes)}}Rt._jsonSchemaVersion="firestore/bytes/1.0",Rt._jsonSchema={type:ze("string",Rt._jsonSchemaVersion),bytes:ze("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new $(V.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ye(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jo{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new $(V.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new $(V.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return oe(this._lat,e._lat)||oe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Zt._jsonSchemaVersion}}static fromJSON(e){if(Ao(e,Zt._jsonSchema))return new Zt(e.latitude,e.longitude)}}Zt._jsonSchemaVersion="firestore/geoPoint/1.0",Zt._jsonSchema={type:ze("string",Zt._jsonSchemaVersion),latitude:ze("number"),longitude:ze("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:en._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Ao(e,en._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new en(e.vectorValues);throw new $(V.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}en._jsonSchemaVersion="firestore/vectorValue/1.0",en._jsonSchema={type:ze("string",en._jsonSchemaVersion),vectorValues:ze("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GS=/^__.*__$/;class KS{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Tr(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ro(e,this.data,n,this.fieldTransforms)}}class dw{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Tr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function fw(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw X(40011,{Ac:t})}}class ef{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new ef({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return _l(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(fw(this.Ac)&&GS.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class QS{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Kl(e)}Cc(e,n,r,s=!1){return new ef({Ac:e,methodName:n,Dc:r,path:Ye.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Zl(t){const e=t._freezeSettings(),n=Kl(t._databaseId);return new QS(t._databaseId,!!e.ignoreUndefinedProperties,n)}function mw(t,e,n,r,s,i={}){const o=t.Cc(i.merge||i.mergeFields?2:0,e,n,s);nf("Data must be an object, but it was:",o,r);const l=pw(r,o);let u,d;if(i.merge)u=new Ct(o.fieldMask),d=o.fieldTransforms;else if(i.mergeFields){const m=[];for(const p of i.mergeFields){const g=Ih(e,p,n);if(!o.contains(g))throw new $(V.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);yw(m,g)||m.push(g)}u=new Ct(m),d=o.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,d=o.fieldTransforms;return new KS(new Et(l),u,d)}class eu extends jo{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof eu}}class tf extends jo{_toFieldTransform(e){return new Hb(e.path,new vo)}isEqual(e){return e instanceof tf}}function YS(t,e,n,r){const s=t.Cc(1,e,n);nf("Data must be an object, but it was:",s,r);const i=[],o=Et.empty();Er(r,(u,d)=>{const m=rf(e,u,n);d=gt(d);const p=s.yc(m);if(d instanceof eu)i.push(m);else{const g=Vo(d,p);g!=null&&(i.push(m),o.set(m,g))}});const l=new Ct(i);return new dw(o,l,s.fieldTransforms)}function XS(t,e,n,r,s,i){const o=t.Cc(1,e,n),l=[Ih(e,r,n)],u=[s];if(i.length%2!=0)throw new $(V.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<i.length;g+=2)l.push(Ih(e,i[g])),u.push(i[g+1]);const d=[],m=Et.empty();for(let g=l.length-1;g>=0;--g)if(!yw(d,l[g])){const w=l[g];let I=u[g];I=gt(I);const R=o.yc(w);if(I instanceof eu)d.push(w);else{const C=Vo(I,R);C!=null&&(d.push(w),m.set(w,C))}}const p=new Ct(d);return new dw(m,p,o.fieldTransforms)}function JS(t,e,n,r=!1){return Vo(n,t.Cc(r?4:3,e))}function Vo(t,e){if(gw(t=gt(t)))return nf("Unsupported field value:",e,t),pw(t,e);if(t instanceof jo)return function(r,s){if(!fw(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const l of r){let u=Vo(l,s.wc(o));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=gt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Ub(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=_e.fromDate(r);return{timestampValue:pl(s.serializer,i)}}if(r instanceof _e){const i=new _e(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:pl(s.serializer,i)}}if(r instanceof Zt)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Rt)return{bytesValue:N_(s.serializer,r._byteString)};if(r instanceof Ce){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:zd(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof en)return function(o,l){return{mapValue:{fields:{[i_]:{stringValue:o_},[dl]:{arrayValue:{values:o.toArray().map(d=>{if(typeof d!="number")throw l.Sc("VectorValues must only contain numeric values.");return Ld(l.serializer,d)})}}}}}}(r,s);throw s.Sc(`Unsupported field value: ${Fl(r)}`)}(t,e)}function pw(t,e){const n={};return Zv(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Er(t,(r,s)=>{const i=Vo(s,e.mc(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function gw(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof _e||t instanceof Zt||t instanceof Rt||t instanceof Ce||t instanceof jo||t instanceof en)}function nf(t,e,n){if(!gw(n)||!Xv(n)){const r=Fl(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function Ih(t,e,n){if((e=gt(e))instanceof Do)return e._internalPath;if(typeof e=="string")return rf(t,e);throw _l("Field path arguments must be of type string or ",t,!1,void 0,n)}const ZS=new RegExp("[~\\*/\\[\\]]");function rf(t,e,n){if(e.search(ZS)>=0)throw _l(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Do(...e.split("."))._internalPath}catch{throw _l(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function _l(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(i||o)&&(u+=" (found",i&&(u+=` in field ${r}`),o&&(u+=` in document ${s}`),u+=")"),new $(V.INVALID_ARGUMENT,l+t+u)}function yw(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vw{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Ce(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new eI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(sf("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class eI extends vw{data(){return super.data()}}function sf(t,e){return typeof e=="string"?rf(t,e):e instanceof Do?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _w(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new $(V.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class of{}class af extends of{}function lf(t,e,...n){let r=[];e instanceof of&&r.push(e),r=r.concat(n),function(i){const o=i.filter(u=>u instanceof nu).length,l=i.filter(u=>u instanceof tu).length;if(o>1||o>0&&l>0)throw new $(V.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class tu extends af{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new tu(e,n,r)}_apply(e){const n=this._parse(e);return ww(e._query,n),new Pn(e.firestore,e.converter,ph(e._query,n))}_parse(e){const n=Zl(e.firestore);return function(i,o,l,u,d,m,p){let g;if(d.isKeyField()){if(m==="array-contains"||m==="array-contains-any")throw new $(V.INVALID_ARGUMENT,`Invalid Query. You can't perform '${m}' queries on documentId().`);if(m==="in"||m==="not-in"){Mg(p,m);const I=[];for(const R of p)I.push(Og(u,i,R));g={arrayValue:{values:I}}}else g=Og(u,i,p)}else m!=="in"&&m!=="not-in"&&m!=="array-contains-any"||Mg(p,m),g=JS(l,o,p,m==="in"||m==="not-in");return Fe.create(d,m,g)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class nu extends of{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new nu(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:nn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const l=i.getFlattenedFilters();for(const u of l)ww(o,u),o=ph(o,u)}(e._query,n),new Pn(e.firestore,e.converter,ph(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class ru extends af{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new ru(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new $(V.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new $(V.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new yo(i,o)}(e._query,this._field,this._direction);return new Pn(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new Xs(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function uf(t,e="asc"){const n=e,r=sf("orderBy",t);return ru._create(r,n)}function Og(t,e,n){if(typeof(n=gt(n))=="string"){if(n==="")throw new $(V.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!m_(e)&&n.indexOf("/")!==-1)throw new $(V.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(ve.fromString(n));if(!Y.isDocumentKey(r))throw new $(V.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Zp(t,new Y(r))}if(n instanceof Ce)return Zp(t,n._key);throw new $(V.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Fl(n)}.`)}function Mg(t,e){if(!Array.isArray(t)||t.length===0)throw new $(V.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function ww(t,e){const n=function(s,i){for(const o of s)for(const l of o.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new $(V.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new $(V.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class xw{convertValue(e,n="none"){switch(pr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return je(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(mr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw X(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Er(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var r,s,i;const n=(i=(s=(r=e.fields)==null?void 0:r[dl].arrayValue)==null?void 0:s.values)==null?void 0:i.map(o=>je(o.doubleValue));return new en(n)}convertGeoPoint(e){return new Zt(je(e.latitude),je(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Bl(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(po(e));default:return null}}convertTimestamp(e){const n=fr(e);return new _e(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=ve.fromString(e);fe(L_(r),9688,{name:e});const s=new zs(r.get(1),r.get(3)),i=new Y(r.popFirst(5));return s.isEqual(n)||An(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ew(t,e,n){let r;return r=t?t.toFirestore(e):e,r}class Es{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ar extends vw{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new qi(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(sf("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new $(V.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=ar._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}ar._jsonSchemaVersion="firestore/documentSnapshot/1.0",ar._jsonSchema={type:ze("string",ar._jsonSchemaVersion),bundleSource:ze("string","DocumentSnapshot"),bundleName:ze("string"),bundle:ze("string")};class qi extends ar{data(e={}){return super.data(e)}}class lr{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Es(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new qi(this._firestore,this._userDataWriter,r.key,r,new Es(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new $(V.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(l=>{const u=new qi(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Es(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const u=new qi(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Es(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let d=-1,m=-1;return l.type!==0&&(d=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),m=o.indexOf(l.doc.key)),{type:tI(l.type),doc:u,oldIndex:d,newIndex:m}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new $(V.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=lr._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Ml.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function tI(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return X(61501,{type:t})}}lr._jsonSchemaVersion="firestore/querySnapshot/1.0",lr._jsonSchema={type:ze("string",lr._jsonSchemaVersion),bundleSource:ze("string","QuerySnapshot"),bundleName:ze("string"),bundle:ze("string")};class cf extends xw{constructor(e){super(),this.firestore=e}convertBytes(e){return new Rt(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ce(this.firestore,null,n)}}function hf(t){t=jt(t,Pn);const e=jt(t.firestore,Nn),n=Jl(e),r=new cf(e);return _w(t._query),qS(n,t._query).then(s=>new lr(e,r,t,s))}function Ah(t,e,n){t=jt(t,Ce);const r=jt(t.firestore,Nn),s=Ew(t.converter,e);return Oo(r,[mw(Zl(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Ht.none())])}function df(t,e,n,...r){t=jt(t,Ce);const s=jt(t.firestore,Nn),i=Zl(s);let o;return o=typeof(e=gt(e))=="string"||e instanceof Do?XS(i,"updateDoc",t._key,e,n,r):YS(i,"updateDoc",t._key,e),Oo(s,[o.toMutation(t._key,Ht.exists(!0))])}function ur(t){return Oo(jt(t.firestore,Nn),[new Od(t._key,Ht.none())])}function Lo(t,e){const n=jt(t.firestore,Nn),r=Bt(t),s=Ew(t.converter,e);return Oo(n,[mw(Zl(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,Ht.exists(!1))]).then(()=>r)}function su(t,...e){var u,d,m;t=gt(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||Lg(e[r])||(n=e[r++]);const s={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(Lg(e[r])){const p=e[r];e[r]=(u=p.next)==null?void 0:u.bind(p),e[r+1]=(d=p.error)==null?void 0:d.bind(p),e[r+2]=(m=p.complete)==null?void 0:m.bind(p)}let i,o,l;if(t instanceof Ce)o=jt(t.firestore,Nn),l=Vd(t._key.path),i={next:p=>{e[r]&&e[r](nI(o,t,p))},error:e[r+1],complete:e[r+2]};else{const p=jt(t,Pn);o=jt(p.firestore,Nn),l=p._query;const g=new cf(o);i={next:w=>{e[r]&&e[r](new lr(o,g,p,w))},error:e[r+1],complete:e[r+2]},_w(t._query)}return function(g,w,I,R){const C=new ow(R),T=new X_(w,C,I);return g.asyncQueue.enqueueAndForget(async()=>Q_(await Sh(g),T)),()=>{C.Nu(),g.asyncQueue.enqueueAndForget(async()=>Y_(await Sh(g),T))}}(Jl(o),l,s,i)}function Oo(t,e){return function(r,s){const i=new or;return r.asyncQueue.enqueueAndForget(async()=>DS(await HS(r),s,i)),i.promise}(Jl(t),e)}function nI(t,e,n){const r=n.docs.get(e._key),s=new cf(t);return new ar(t,s,e._key,r,new Es(n.hasPendingWrites,n.fromCache),e.converter)}function Kr(){return new tf("serverTimestamp")}(function(e,n=!0){(function(s){Ks=s})(Vv),ho(new Ms("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),l=new Nn(new eb(r.getProvider("auth-internal")),new rb(o,r.getProvider("app-check-internal")),function(d,m){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new $(V.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new zs(d.options.projectId,m)}(o,s),o);return i={useFetchStreams:n,...i},l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),sr(zp,Up,e),sr(zp,Up,"esm2020")})();const rI=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:xw,Bytes:Rt,CollectionReference:En,DocumentReference:Ce,DocumentSnapshot:ar,FieldPath:Do,FieldValue:jo,Firestore:Nn,FirestoreError:$,GeoPoint:Zt,Query:Pn,QueryCompositeFilterConstraint:nu,QueryConstraint:af,QueryDocumentSnapshot:qi,QueryFieldFilterConstraint:tu,QueryOrderByConstraint:ru,QuerySnapshot:lr,SnapshotMetadata:Es,Timestamp:_e,VectorValue:en,_AutoId:Ml,_ByteString:Je,_DatabaseId:zs,_DocumentKey:Y,_EmptyAuthCredentialsProvider:Kv,_FieldPath:Ye,_cast:jt,_logWarn:Wr,_validateIsNotUsedTogether:Yv,addDoc:Lo,collection:vr,connectFirestoreEmulator:cw,deleteDoc:ur,doc:Bt,ensureFirestoreConfigured:Jl,executeWrite:Oo,getDocs:hf,getFirestore:hw,onSnapshot:su,orderBy:uf,query:lf,serverTimestamp:Kr,setDoc:Ah,updateDoc:df},Symbol.toStringTag,{value:"Module"}));var sI="firebase",iI="12.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */sr(sI,iI,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tw="firebasestorage.googleapis.com",bw="storageBucket",oI=2*60*1e3,aI=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class De extends Jr{constructor(e,n,r=0){super(ac(e),`Firebase Storage: ${n} (${ac(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,De.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return ac(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Pe;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Pe||(Pe={}));function ac(t){return"storage/"+t}function ff(){const t="An unknown error occurred, please check the error payload for server response.";return new De(Pe.UNKNOWN,t)}function lI(t){return new De(Pe.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function uI(t){return new De(Pe.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function cI(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new De(Pe.UNAUTHENTICATED,t)}function hI(){return new De(Pe.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function dI(t){return new De(Pe.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function fI(){return new De(Pe.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function mI(){return new De(Pe.CANCELED,"User canceled the upload/download.")}function pI(t){return new De(Pe.INVALID_URL,"Invalid URL '"+t+"'.")}function gI(t){return new De(Pe.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function yI(){return new De(Pe.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+bw+"' property when initializing the app?")}function vI(){return new De(Pe.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function _I(){return new De(Pe.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function wI(t){return new De(Pe.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Rh(t){return new De(Pe.INVALID_ARGUMENT,t)}function kw(){return new De(Pe.APP_DELETED,"The Firebase app was deleted.")}function xI(t){return new De(Pe.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Wi(t,e){return new De(Pe.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Ti(t){throw new De(Pe.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pt{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Pt.makeFromUrl(e,n)}catch{return new Pt(e,"")}if(r.path==="")return r;throw gI(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(D){D.path.charAt(D.path.length-1)==="/"&&(D.path_=D.path_.slice(0,-1))}const o="(/(.*))?$",l=new RegExp("^gs://"+s+o,"i"),u={bucket:1,path:3};function d(D){D.path_=decodeURIComponent(D.path)}const m="v[A-Za-z0-9_]+",p=n.replace(/[.]/g,"\\."),g="(/([^?#]*).*)?$",w=new RegExp(`^https?://${p}/${m}/b/${s}/o${g}`,"i"),I={bucket:1,path:3},R=n===Tw?"(?:storage.googleapis.com|storage.cloud.google.com)":n,C="([^?#]*)",T=new RegExp(`^https?://${R}/${s}/${C}`,"i"),k=[{regex:l,indices:u,postModify:i},{regex:w,indices:I,postModify:d},{regex:T,indices:{bucket:1,path:2},postModify:d}];for(let D=0;D<k.length;D++){const O=k[D],M=O.regex.exec(e);if(M){const E=M[O.indices.bucket];let _=M[O.indices.path];_||(_=""),r=new Pt(E,_),O.postModify(r);break}}if(r==null)throw pI(e);return r}}class EI{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TI(t,e,n){let r=1,s=null,i=null,o=!1,l=0;function u(){return l===2}let d=!1;function m(...C){d||(d=!0,e.apply(null,C))}function p(C){s=setTimeout(()=>{s=null,t(w,u())},C)}function g(){i&&clearTimeout(i)}function w(C,...T){if(d){g();return}if(C){g(),m.call(null,C,...T);return}if(u()||o){g(),m.call(null,C,...T);return}r<64&&(r*=2);let k;l===1?(l=2,k=0):k=(r+Math.random())*1e3,p(k)}let I=!1;function R(C){I||(I=!0,g(),!d&&(s!==null?(C||(l=2),clearTimeout(s),p(0)):C||(l=1)))}return p(0),i=setTimeout(()=>{o=!0,R(!0)},n),R}function bI(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kI(t){return t!==void 0}function SI(t){return typeof t=="object"&&!Array.isArray(t)}function mf(t){return typeof t=="string"||t instanceof String}function Fg(t){return pf()&&t instanceof Blob}function pf(){return typeof Blob<"u"}function zg(t,e,n,r){if(r<e)throw Rh(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Rh(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iu(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function Sw(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var Fr;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Fr||(Fr={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function II(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AI{constructor(e,n,r,s,i,o,l,u,d,m,p,g=!0,w=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=l,this.errorCallback_=u,this.timeout_=d,this.progressCallback_=m,this.connectionFactory_=p,this.retry=g,this.isUsingEmulator=w,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((I,R)=>{this.resolve_=I,this.reject_=R,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new va(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=l=>{const u=l.loaded,d=l.lengthComputable?l.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,d)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const l=i.getErrorCode()===Fr.NO_ERROR,u=i.getStatus();if(!l||II(u,this.additionalRetryCodes_)&&this.retry){const m=i.getErrorCode()===Fr.ABORT;r(!1,new va(!1,null,m));return}const d=this.successCodes_.indexOf(u)!==-1;r(!0,new va(d,i))})},n=(r,s)=>{const i=this.resolve_,o=this.reject_,l=s.connection;if(s.wasSuccessCode)try{const u=this.callback_(l,l.getResponse());kI(u)?i(u):i()}catch(u){o(u)}else if(l!==null){const u=ff();u.serverResponse=l.getErrorText(),this.errorCallback_?o(this.errorCallback_(l,u)):o(u)}else if(s.canceled){const u=this.appDelete_?kw():mI();o(u)}else{const u=fI();o(u)}};this.canceled_?n(!1,new va(!1,null,!0)):this.backoffId_=TI(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&bI(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class va{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function RI(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function NI(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function CI(t,e){e&&(t["X-Firebase-GMPID"]=e)}function PI(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function DI(t,e,n,r,s,i,o=!0,l=!1){const u=Sw(t.urlParams),d=t.url+u,m=Object.assign({},t.headers);return CI(m,e),RI(m,n),NI(m,i),PI(m,r),new AI(d,t.method,m,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o,l)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jI(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function VI(...t){const e=jI();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(pf())return new Blob(t);throw new De(Pe.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function LI(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OI(t){if(typeof atob>"u")throw wI("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hn={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class lc{constructor(e,n){this.data=e,this.contentType=n||null}}function MI(t,e){switch(t){case hn.RAW:return new lc(Iw(e));case hn.BASE64:case hn.BASE64URL:return new lc(Aw(t,e));case hn.DATA_URL:return new lc(zI(e),UI(e))}throw ff()}function Iw(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const i=r,o=t.charCodeAt(++n);r=65536|(i&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function FI(t){let e;try{e=decodeURIComponent(t)}catch{throw Wi(hn.DATA_URL,"Malformed data URL.")}return Iw(e)}function Aw(t,e){switch(t){case hn.BASE64:{const s=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(s||i)throw Wi(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case hn.BASE64URL:{const s=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(s||i)throw Wi(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=OI(e)}catch(s){throw s.message.includes("polyfill")?s:Wi(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class Rw{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Wi(hn.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=BI(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function zI(t){const e=new Rw(t);return e.base64?Aw(hn.BASE64,e.rest):FI(e.rest)}function UI(t){return new Rw(t).contentType}function BI(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hn{constructor(e,n){let r=0,s="";Fg(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(Fg(this.data_)){const r=this.data_,s=LI(r,e,n);return s===null?null:new Hn(s)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new Hn(r,!0)}}static getBlob(...e){if(pf()){const n=e.map(r=>r instanceof Hn?r.data_:r);return new Hn(VI.apply(null,n))}else{const n=e.map(o=>mf(o)?MI(hn.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const s=new Uint8Array(r);let i=0;return n.forEach(o=>{for(let l=0;l<o.length;l++)s[i++]=o[l]}),new Hn(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nw(t){let e;try{e=JSON.parse(t)}catch{return null}return SI(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $I(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function HI(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function Cw(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qI(t,e){return e}class ft{constructor(e,n,r,s){this.server=e,this.local=n||e,this.writable=!!r,this.xform=s||qI}}let _a=null;function WI(t){return!mf(t)||t.length<2?t:Cw(t)}function Pw(){if(_a)return _a;const t=[];t.push(new ft("bucket")),t.push(new ft("generation")),t.push(new ft("metageneration")),t.push(new ft("name","fullPath",!0));function e(i,o){return WI(o)}const n=new ft("name");n.xform=e,t.push(n);function r(i,o){return o!==void 0?Number(o):o}const s=new ft("size");return s.xform=r,t.push(s),t.push(new ft("timeCreated")),t.push(new ft("updated")),t.push(new ft("md5Hash",null,!0)),t.push(new ft("cacheControl",null,!0)),t.push(new ft("contentDisposition",null,!0)),t.push(new ft("contentEncoding",null,!0)),t.push(new ft("contentLanguage",null,!0)),t.push(new ft("contentType",null,!0)),t.push(new ft("metadata","customMetadata",!0)),_a=t,_a}function GI(t,e){function n(){const r=t.bucket,s=t.fullPath,i=new Pt(r,s);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:n})}function KI(t,e,n){const r={};r.type="file";const s=n.length;for(let i=0;i<s;i++){const o=n[i];r[o.local]=o.xform(r,e[o.server])}return GI(r,t),r}function Dw(t,e,n){const r=Nw(e);return r===null?null:KI(t,r,n)}function QI(t,e,n,r){const s=Nw(e);if(s===null||!mf(s.downloadTokens))return null;const i=s.downloadTokens;if(i.length===0)return null;const o=encodeURIComponent;return i.split(",").map(d=>{const m=t.bucket,p=t.fullPath,g="/b/"+o(m)+"/o/"+o(p),w=iu(g,n,r),I=Sw({alt:"media",token:d});return w+I})[0]}function YI(t,e){const n={},r=e.length;for(let s=0;s<r;s++){const i=e[s];i.writable&&(n[i.server]=t[i.local])}return JSON.stringify(n)}class gf{constructor(e,n,r,s){this.url=e,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jw(t){if(!t)throw ff()}function XI(t,e){function n(r,s){const i=Dw(t,s,e);return jw(i!==null),i}return n}function JI(t,e){function n(r,s){const i=Dw(t,s,e);return jw(i!==null),QI(i,s,t.host,t._protocol)}return n}function Vw(t){function e(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=hI():s=cI():n.getStatus()===402?s=uI(t.bucket):n.getStatus()===403?s=dI(t.path):s=r,s.status=n.getStatus(),s.serverResponse=r.serverResponse,s}return e}function Lw(t){const e=Vw(t);function n(r,s){let i=e(r,s);return r.getStatus()===404&&(i=lI(t.path)),i.serverResponse=s.serverResponse,i}return n}function ZI(t,e,n){const r=e.fullServerUrl(),s=iu(r,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,l=new gf(s,i,JI(t,n),o);return l.errorHandler=Lw(e),l}function eA(t,e){const n=e.fullServerUrl(),r=iu(n,t.host,t._protocol),s="DELETE",i=t.maxOperationRetryTime;function o(u,d){}const l=new gf(r,s,o,i);return l.successCodes=[200,204],l.errorHandler=Lw(e),l}function tA(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function nA(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=tA(null,e)),r}function rA(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function l(){let k="";for(let D=0;D<2;D++)k=k+Math.random().toString().slice(2);return k}const u=l();o["Content-Type"]="multipart/related; boundary="+u;const d=nA(e,r,s),m=YI(d,n),p="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+m+`\r
--`+u+`\r
Content-Type: `+d.contentType+`\r
\r
`,g=`\r
--`+u+"--",w=Hn.getBlob(p,r,g);if(w===null)throw vI();const I={name:d.fullPath},R=iu(i,t.host,t._protocol),C="POST",T=t.maxUploadRetryTime,y=new gf(R,C,XI(t,n),T);return y.urlParams=I,y.headers=o,y.body=w.uploadData(),y.errorHandler=Vw(e),y}class sA{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Fr.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Fr.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Fr.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,s,i){if(this.sent_)throw Ti("cannot .send() more than once");if(Io(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const o in i)i.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,i[o].toString());return s!==void 0?this.xhr_.send(s):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Ti("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Ti("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Ti("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Ti("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class iA extends sA{initXhr(){this.xhr_.responseType="text"}}function yf(){return new iA}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qr{constructor(e,n){this._service=e,n instanceof Pt?this._location=n:this._location=Pt.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Qr(e,n)}get root(){const e=new Pt(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Cw(this._location.path)}get storage(){return this._service}get parent(){const e=$I(this._location.path);if(e===null)return null;const n=new Pt(this._location.bucket,e);return new Qr(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw xI(e)}}function oA(t,e,n){t._throwIfRoot("uploadBytes");const r=rA(t.storage,t._location,Pw(),new Hn(e,!0),n);return t.storage.makeRequestWithTokens(r,yf).then(s=>({metadata:s,ref:t}))}function aA(t){t._throwIfRoot("getDownloadURL");const e=ZI(t.storage,t._location,Pw());return t.storage.makeRequestWithTokens(e,yf).then(n=>{if(n===null)throw _I();return n})}function lA(t){t._throwIfRoot("deleteObject");const e=eA(t.storage,t._location);return t.storage.makeRequestWithTokens(e,yf)}function uA(t,e){const n=HI(t._location.path,e),r=new Pt(t._location.bucket,n);return new Qr(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cA(t){return/^[A-Za-z]+:\/\//.test(t)}function hA(t,e){return new Qr(t,e)}function Ow(t,e){if(t instanceof vf){const n=t;if(n._bucket==null)throw yI();const r=new Qr(n,n._bucket);return e!=null?Ow(r,e):r}else return e!==void 0?uA(t,e):t}function dA(t,e){if(e&&cA(e)){if(t instanceof vf)return hA(t,e);throw Rh("To use ref(service, url), the first argument must be a Storage instance.")}else return Ow(t,e)}function Ug(t,e){const n=e==null?void 0:e[bw];return n==null?null:Pt.makeFromBucketSpec(n,t)}function fA(t,e,n,r={}){t.host=`${e}:${n}`;const s=Io(e);s&&(Sv(`https://${t.host}/b`),Av("Storage",!0)),t._isUsingEmulator=!0,t._protocol=s?"https":"http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:Iv(i,t.app.options.projectId))}class vf{constructor(e,n,r,s,i,o=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._isUsingEmulator=o,this._bucket=null,this._host=Tw,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=oI,this._maxUploadRetryTime=aI,this._requests=new Set,s!=null?this._bucket=Pt.makeFromBucketSpec(s,this._host):this._bucket=Ug(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Pt.makeFromBucketSpec(this._url,e):this._bucket=Ug(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){zg("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){zg("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(jv(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Qr(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new EI(kw());{const o=DI(e,this._appId,r,s,n,this._firebaseVersion,i,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const Bg="@firebase/storage",$g="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mw="storage";function mA(t,e,n){return t=gt(t),oA(t,e,n)}function pA(t){return t=gt(t),aA(t)}function gA(t){return t=gt(t),lA(t)}function Fw(t,e){return t=gt(t),dA(t,e)}function yA(t=Ov(),e){t=gt(t);const r=Dv(t,Mw).getImmediate({identifier:e}),s=bv("storage");return s&&vA(r,...s),r}function vA(t,e,n,r={}){fA(t,e,n,r)}function _A(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new vf(n,r,s,e,Vv)}function wA(){ho(new Ms(Mw,_A,"PUBLIC").setMultipleInstances(!0)),sr(Bg,$g,""),sr(Bg,$g,"esm2020")}wA();const xA={apiKey:"AIzaSyBQwo6qEZWlOyXRv3iPycYiLIqRt3PalkE",authDomain:"foodflash-46a42.firebaseapp.com",projectId:"foodflash-46a42",storageBucket:"foodflash-46a42.firebasestorage.app",messagingSenderId:"497618057237",appId:"1:497618057237:web:3025f9c950cdf76b67361c"},zw=Lv(xA),Qe=hw(zw),_f=yA(zw),EA=Object.freeze(Object.defineProperty({__proto__:null,db:Qe,storage:_f},Symbol.toStringTag,{value:"Module"})),wf=()=>{const[t,e]=B.useState([]),[n,r]=B.useState(!0),[s,i]=B.useState(null);return B.useEffect(()=>{const d=vr(Qe,"recipes"),m=lf(d,uf("createdAt","desc")),p=su(m,g=>{const w=[];g.forEach(I=>{var C,T,y;const R=I.data();w.push({id:I.id,...R,ingredients:R.ingredients||[],comments:R.comments||[],createdAt:((y=(T=(C=R.createdAt)==null?void 0:C.toDate)==null?void 0:T.call(C))==null?void 0:y.toISOString())||new Date().toISOString()})}),e(w),r(!1),i(null)},g=>{console.error("Error fetching recipes:",g),i("Fehler beim Laden der Rezepte"),r(!1)});return()=>p()},[]),{recipes:t,isLoading:n,error:s,addRecipe:async d=>{try{const m=vr(Qe,"recipes"),p={...d,createdAt:Kr(),ingredients:d.ingredients||[],comments:d.comments||[]};Object.keys(p).forEach(g=>{p[g]===void 0&&delete p[g]}),await Lo(m,p)}catch(m){throw console.error("Error adding recipe:",m),i("Fehler beim Hinzufügen des Rezepts"),m}},updateRecipe:async(d,m)=>{try{const p=Bt(Qe,"recipes",d),g={...m};Object.keys(g).forEach(w=>{g[w]===void 0&&delete g[w]}),await df(p,g)}catch(p){throw console.error("Error updating recipe:",p),i("Fehler beim Aktualisieren des Rezepts"),p}},deleteRecipe:async d=>{try{const m=Bt(Qe,"recipes",d);await ur(m)}catch(m){throw console.error("Error deleting recipe:",m),i("Fehler beim Löschen des Rezepts"),m}}}},Uw=t=>{if(!t||t.trim()==="")return"own";const e=t.toLowerCase();return e.includes("youtube.com")||e.includes("youtu.be")?"youtube":e.includes("instagram.com")?"instagram":e.includes("facebook.com")||e.includes("fb.com")?"facebook":e.includes("tiktok.com")?"tiktok":"other"},Bw=t=>{if(!t)return null;try{const e=t.toLowerCase();let n=null;if(e.includes("youtube.com/watch"))n=new URL(t).searchParams.get("v");else if(e.includes("youtu.be/")){const r=t.match(/youtu\.be\/([^?&]+)/);n=r?r[1]:null}else if(e.includes("youtube.com/embed/")){const r=t.match(/youtube\.com\/embed\/([^?&]+)/);n=r?r[1]:null}return n?`https://img.youtube.com/vi/${n}/maxresdefault.jpg`:null}catch(e){return console.error("Error extracting YouTube thumbnail:",e),null}},$w=t=>{if(!t)return!1;const e=t.toLowerCase();return e.includes("youtube.com")||e.includes("youtu.be")},wl=t=>{if(!t||!t.includes("drive.google.com"))return t;try{let e=null;const r=t.split("?")[0].match(/\/file\/d\/([^/]+)/);if(r&&(e=r[1]),!e){const s=t.match(/[?&]id=([^&]+)/);s&&(e=s[1])}if(!e){const s=t.match(/[?&]id=([^&]+)/);s&&(e=s[1])}return e?`https://drive.google.com/thumbnail?id=${e}&sz=w1000`:(t.includes("uc?export=view")||t.includes("thumbnail?id="),t)}catch(e){return console.error("Error converting Google Drive URL:",e),t}},xl=t=>!!(t&&t.includes("drive.google.com")),TA=(t,e=800,n=600,r=.85)=>new Promise((s,i)=>{const o=new FileReader;o.onload=l=>{var d;const u=new Image;u.onload=()=>{const m=document.createElement("canvas"),p=m.getContext("2d");if(!p){i(new Error("Canvas context nicht verfügbar"));return}let{width:g,height:w}=u;g>e&&(w=w*e/g,g=e),w>n&&(g=g*n/w,w=n),m.width=g,m.height=w,p.drawImage(u,0,0,g,w),m.toBlob(I=>{I?s(I):i(new Error("Fehler beim Komprimieren"))},"image/jpeg",r)},u.onerror=()=>{i(new Error("Fehler beim Laden des Bildes"))},u.src=(d=l.target)==null?void 0:d.result},o.onerror=()=>{i(new Error("Fehler beim Lesen der Datei"))},o.readAsDataURL(t)}),Hw=(t,e=10)=>{if(!["image/jpeg","image/jpg","image/png","image/webp"].includes(t.type))return"Nur JPEG, PNG und WebP Bilder sind erlaubt!";const r=e*1024*1024;return t.size>r?`Datei zu groß! Maximum: ${e} MB`:!0},qw=async(t,e)=>{try{const n=await TA(t),r=Date.now(),i=`recipe-${e}-${r}.jpg`,o=Fw(_f,`recipe-images/${i}`);return await mA(o,n),await pA(o)}catch(n){throw console.error("Fehler beim Upload:",n),new Error("Bild konnte nicht hochgeladen werden")}},Hg=async t=>{try{const e=t.split("/o/");if(e.length<2){console.warn("Ungültige Storage-URL, kann nicht gelöscht werden");return}const n=e[1].split("?")[0],r=decodeURIComponent(n),s=Fw(_f,r);await gA(s)}catch(e){console.error("Fehler beim Löschen:",e)}},qg=t=>t.includes("firebasestorage.googleapis.com")||t.includes("firebasestorage.app"),Ww=({ingredients:t,onChange:e})=>{const[n,r]=B.useState(""),[s,i]=B.useState(""),o=p=>{r(p.target.value)},l=p=>{i(p.target.value)},u=()=>{if(!n.trim())return;const p={name:n.trim(),quantity:s.trim()||void 0};e([...t,p]),r(""),i("")},d=p=>{e(t.filter((g,w)=>w!==p))},m=p=>{p.key==="Enter"&&(p.preventDefault(),u())};return c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-200 mb-2",children:"Zutaten (optional)"}),t.length>0&&c.jsx("div",{className:"space-y-1 mb-3 max-h-32 overflow-y-auto",children:t.map((p,g)=>c.jsxs("div",{className:"flex items-center gap-2 bg-slate-700 rounded-lg px-3 py-2 group",children:[c.jsxs("span",{className:"flex-1 text-sm text-gray-100",children:[p.name,p.quantity&&c.jsxs("span",{className:"text-gray-400 ml-2",children:["(",p.quantity,")"]})]}),c.jsx("button",{type:"button",onClick:()=>d(g),"data-test-id":`remove-ingredient-${g}`,"aria-label":"Zutat entfernen",className:"opacity-0 group-hover:opacity-100 transition-opacity text-red-500 hover:text-red-600",children:c.jsx(zt,{className:"h-4 w-4"})})]},g))}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("input",{type:"text",value:n,onChange:o,onKeyPress:m,placeholder:"Zutat, z.B. Tomaten",className:"flex-1 px-3 py-2 text-sm border-2 border-gray-600 rounded-lg focus:border-primary-500 focus:outline-none transition-colors bg-slate-700 text-gray-100 placeholder-gray-400"}),c.jsx("input",{type:"text",value:s,onChange:l,onKeyPress:m,placeholder:"Menge",className:"w-24 px-3 py-2 text-sm border-2 border-gray-600 rounded-lg focus:border-primary-500 focus:outline-none transition-colors bg-slate-700 text-gray-100 placeholder-gray-400"}),c.jsx("button",{type:"button",onClick:u,"data-test-id":"add-ingredient","aria-label":"Zutat hinzufügen",disabled:!n.trim(),className:ge("px-3 py-2 rounded-lg transition-all duration-200",n.trim()?"bg-accent-500 text-white hover:bg-accent-600":"bg-slate-600 text-gray-500 cursor-not-allowed"),children:c.jsx(co,{className:"h-4 w-4"})})]}),c.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Enter drücken oder Plus-Button zum Hinzufügen"})]})},bA=({onAdd:t})=>{const[e,n]=B.useState(!1),[r,s]=B.useState(""),[i,o]=B.useState(""),[l,u]=B.useState(""),[d,m]=B.useState(""),[p,g]=B.useState([]),[w,I]=B.useState(!1),[R,C]=B.useState(null),[T,y]=B.useState(null),[k,D]=B.useState(!1),O=async q=>{if(q.preventDefault(),!r.trim()){alert("Bitte Titel eingeben!");return}D(!0);try{const K=Uw(i);let J;if(R){const W=crypto.randomUUID();J=await qw(R,W)}t({title:r.trim(),url:i.trim()||"",description:l.trim(),imageUrl:d.trim()||void 0,uploadedImageUrl:J,ingredients:p,platform:K}),s(""),o(""),u(""),m(""),g([]),C(null),y(null),n(!1)}catch(K){console.error("Fehler beim Speichern:",K),alert("Fehler beim Hochladen des Bildes!")}finally{D(!1)}},M=q=>{s(q.target.value)},E=q=>{o(q.target.value)},_=q=>{u(q.target.value)},b=q=>{const K=q.target.value;m(K)};B.useEffect(()=>{if(d&&xl(d)){const q=wl(d);q!==d&&m(q)}},[d]);const S=()=>{const q=Bw(i);q&&m(q)},A=()=>{n(!e)},N=()=>{I(!w)},x=q=>{var se;const K=(se=q.target.files)==null?void 0:se[0];if(!K)return;const J=Hw(K);if(J!==!0){alert(J);return}C(K);const W=new FileReader;W.onloadend=()=>{y(W.result)},W.readAsDataURL(K)},Z=()=>{C(null),y(null)},ye=$w(i),Ue=i.toLowerCase(),ne=Ue.includes("instagram.com"),z=Ue.includes("facebook.com")||Ue.includes("fb.com"),Q=Ue.includes("tiktok.com");return e?c.jsxs("div",{className:"bg-slate-800/80 backdrop-blur-sm rounded-2xl p-6 shadow-xl border-2 border-primary-500/30 autumn-glow",children:[c.jsxs("div",{className:"flex items-center justify-between mb-6",children:[c.jsxs("h3",{className:"text-2xl font-bold text-gray-100 flex items-center gap-2",children:[c.jsx(co,{className:"h-6 w-6 text-primary-500"}),"Neues Rezept"]}),c.jsx("button",{onClick:A,"data-test-id":"close-add-recipe","aria-label":"Formular schließen",className:"p-2 hover:bg-slate-700 rounded-full transition-colors",children:c.jsx(zt,{className:"h-6 w-6 text-gray-300"})})]}),c.jsxs("form",{onSubmit:O,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"recipe-title",className:"block text-sm font-medium text-gray-200 mb-1",children:"Rezept-Titel *"}),c.jsx("input",{id:"recipe-title",type:"text",value:r,onChange:M,"data-test-id":"recipe-title-input","aria-label":"Rezept-Titel eingeben",placeholder:"z.B. Spaghetti Carbonara",className:"w-full px-4 py-2 border-2 border-gray-600 rounded-lg focus:border-primary-500 focus:outline-none transition-colors bg-slate-700 text-gray-100 placeholder-gray-400",required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"recipe-url",className:"block text-sm font-medium text-gray-200 mb-1",children:"Link zum Rezept (optional)"}),c.jsx("input",{id:"recipe-url",type:"url",value:i,onChange:E,"data-test-id":"recipe-url-input","aria-label":"Rezept-URL eingeben",placeholder:"https://www.youtube.com/watch?v=... (oder leer für eigenes Rezept)",className:"w-full px-4 py-2 border-2 border-gray-600 rounded-lg focus:border-primary-500 focus:outline-none transition-colors bg-slate-700 text-gray-100 placeholder-gray-400"}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"YouTube, Instagram, Facebook, TikTok Link - oder leer lassen für eigene Rezepte"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"recipe-description",className:"block text-sm font-medium text-gray-200 mb-1",children:"Beschreibung (optional)"}),c.jsx("textarea",{id:"recipe-description",value:l,onChange:_,"data-test-id":"recipe-description-input","aria-label":"Rezept-Beschreibung eingeben",placeholder:"Was macht dieses Rezept besonders?",rows:3,className:"w-full px-4 py-2 border-2 border-gray-600 rounded-lg focus:border-primary-500 focus:outline-none transition-colors resize-none bg-slate-700 text-gray-100 placeholder-gray-400"})]}),c.jsx(Ww,{ingredients:p,onChange:g}),c.jsxs("div",{className:"border-2 border-dashed border-primary-500/30 rounded-xl p-4 bg-slate-700/30",children:[c.jsxs("div",{className:"flex items-center justify-between mb-3",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-200",children:"📸 Eigenes Foto hochladen (optional)"}),c.jsx("span",{className:"text-xs text-gray-400",children:"Max. 10 MB"})]}),T?c.jsxs("div",{className:"relative",children:[c.jsx("img",{src:T,alt:"Vorschau",className:"w-full h-48 object-cover rounded-lg"}),c.jsx("button",{type:"button",onClick:Z,"data-test-id":"remove-uploaded-image","aria-label":"Hochgeladenes Bild entfernen",className:"absolute top-2 right-2 p-2 bg-red-600 hover:bg-red-700 text-white rounded-full shadow-lg transition-colors",children:c.jsx(Os,{className:"h-4 w-4"})}),c.jsx("div",{className:"absolute bottom-2 left-2 bg-green-600 text-white text-xs px-2 py-1 rounded-full font-medium",children:"✓ Bereit zum Upload"})]}):c.jsxs("div",{children:[c.jsx("input",{id:"recipe-image-upload",type:"file",accept:"image/jpeg,image/jpg,image/png,image/webp",onChange:x,"data-test-id":"recipe-image-upload","aria-label":"Bild hochladen",className:"hidden"}),c.jsxs("label",{htmlFor:"recipe-image-upload",className:"flex flex-col items-center justify-center p-6 border-2 border-dashed border-gray-600 rounded-lg cursor-pointer hover:border-primary-500 hover:bg-slate-600/30 transition-all",children:[c.jsx(Sd,{className:"h-8 w-8 text-gray-400 mb-2"}),c.jsx("span",{className:"text-sm font-medium text-gray-300 mb-1",children:"Klicke hier oder ziehe ein Bild rein"}),c.jsx("span",{className:"text-xs text-gray-500",children:"JPEG, PNG oder WebP • Wird automatisch komprimiert"})]})]}),c.jsxs("p",{className:"text-xs text-gray-400 mt-2 text-center",children:["💡 ",c.jsx("strong",{children:"Hybrid-Lösung:"})," Du kannst sowohl ein eigenes Foto hochladen als auch eine YouTube-URL unten angeben!"]})]}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center justify-between mb-1",children:[c.jsx("label",{htmlFor:"recipe-image",className:"block text-sm font-medium text-gray-200",children:"Bild-URL (optional)"}),c.jsxs("div",{className:"flex items-center gap-2",children:[ye&&c.jsxs("button",{type:"button",onClick:S,"data-test-id":"auto-fill-image","aria-label":"Bild automatisch aus YouTube laden",className:"flex items-center gap-1 text-xs font-medium text-primary-500 hover:text-primary-600 transition-colors",children:[c.jsx(kd,{className:"h-3 w-3"}),"Auto-Fill"]}),(ne||z||Q)&&c.jsxs("button",{type:"button",onClick:N,"data-test-id":"thumbnail-help","aria-label":"Hilfe zum Thumbnail finden",className:"flex items-center gap-1 text-xs font-medium text-secondary-500 hover:text-secondary-600 transition-colors",children:[c.jsx(fv,{className:"h-3 w-3"}),"Hilfe"]})]})]}),c.jsx("input",{id:"recipe-image",type:"url",value:d,onChange:b,"data-test-id":"recipe-image-input","aria-label":"Bild-URL eingeben",placeholder:ye?"Klicke 'Auto-Fill' für YouTube-Thumbnail":"Google Drive oder imgbb.com Link",className:"w-full px-4 py-2 border-2 border-gray-600 rounded-lg focus:border-primary-500 focus:outline-none transition-colors bg-slate-700 text-gray-100 placeholder-gray-400"}),ye&&c.jsx("p",{className:"text-xs text-primary-600 mt-1",children:'💡 YouTube-Thumbnail verfügbar - klicke "Auto-Fill"'}),d&&xl(d)&&c.jsx("p",{className:"text-xs text-green-600 mt-1",children:"✅ Google Drive Link erkannt - wird automatisch konvertiert"}),d&&c.jsxs("div",{className:"mt-3",children:[c.jsx("p",{className:"text-xs font-medium text-gray-200 mb-1",children:"Vorschau:"}),c.jsx("div",{className:"relative w-full h-40 bg-slate-700 rounded-lg overflow-hidden border-2 border-gray-600",children:c.jsx("img",{src:wl(d),alt:"Vorschau",className:"w-full h-full object-cover",onError:q=>{const K=q.target;K.style.display="none";const J=K.parentElement;J&&(J.innerHTML='<div class="flex items-center justify-center h-full text-red-500 text-sm p-4 text-center"><div><p class="font-bold">❌ Bild kann nicht geladen werden</p><p class="text-xs mt-1">Prüfe Google Drive Freigabe:<br/>"Jeder mit dem Link"</p></div></div>')},onLoad:q=>{const J=q.target.parentElement;if(J){const W=document.createElement("div");W.className="absolute top-2 right-2 bg-green-500 text-white text-xs px-2 py-1 rounded-full font-medium",W.textContent="✓ OK",J.appendChild(W)}}})})]}),w&&(ne||z||Q)&&c.jsxs("div",{className:"mt-3 p-4 bg-blue-50 border-2 border-blue-200 rounded-lg",children:[c.jsxs("div",{className:"flex items-start justify-between mb-2",children:[c.jsxs("h4",{className:"font-bold text-blue-800 text-sm",children:[ne&&"📷 Instagram Thumbnail finden",z&&"📘 Facebook Thumbnail finden",Q&&"🎵 TikTok Thumbnail finden"]}),c.jsx("button",{type:"button",onClick:N,className:"text-blue-600 hover:text-blue-800",children:c.jsx(zt,{className:"h-4 w-4"})})]}),ne&&c.jsxs("ol",{className:"text-xs text-blue-700 space-y-1 list-decimal list-inside",children:[c.jsx("li",{children:"Öffne den Instagram-Post im Browser"}),c.jsx("li",{children:'Rechtsklick auf das Bild/Video → "Bild-URL kopieren" oder "Grafik-Adresse kopieren"'}),c.jsx("li",{children:"Füge die URL hier ein"}),c.jsxs("li",{children:[c.jsx("strong",{children:"Alternative:"})," Screenshot vom Post machen"]})]}),z&&c.jsxs("ol",{className:"text-xs text-blue-700 space-y-1 list-decimal list-inside",children:[c.jsx("li",{children:"Öffne das Facebook-Video im Browser"}),c.jsx("li",{children:'Rechtsklick auf das Video-Thumbnail → "Grafikadresse kopieren"'}),c.jsx("li",{children:"Füge die URL hier ein"}),c.jsxs("li",{children:[c.jsx("strong",{children:"Alternative:"})," Screenshot machen"]})]}),Q&&c.jsxs("ol",{className:"text-xs text-blue-700 space-y-1 list-decimal list-inside",children:[c.jsx("li",{children:"Öffne das TikTok-Video im Browser"}),c.jsx("li",{children:"Pause das Video bei einem guten Frame"}),c.jsx("li",{children:"Screenshot vom Video machen"})]}),c.jsxs("div",{className:"mt-3 pt-3 border-t border-blue-300",children:[c.jsx("p",{className:"text-xs font-bold text-blue-800 mb-2",children:"📁 Mit Google Drive (empfohlen):"}),c.jsxs("ol",{className:"text-xs text-blue-700 space-y-1 list-decimal list-inside",children:[c.jsx("li",{children:"Screenshot/Bild in Google Drive hochladen"}),c.jsx("li",{children:'Rechtsklick auf Datei → "Link teilen"'}),c.jsx("li",{children:'Auf "Eingeschränkt" klicken → "Jeder mit dem Link" wählen'}),c.jsxs("li",{children:["Link kopieren (sieht aus wie: ",c.jsx("code",{className:"bg-blue-100 px-1",children:"drive.google.com/file/d/XXXX/view"}),")"]}),c.jsxs("li",{children:["Ändere das Format zu: ",c.jsx("code",{className:"bg-blue-100 px-1 block mt-1",children:"drive.google.com/uc?export=view&id=XXXX"})]}),c.jsx("li",{children:"Füge diesen Link hier ein"})]})]}),c.jsxs("div",{className:"mt-2 pt-2 border-t border-blue-300",children:[c.jsx("p",{className:"text-xs font-bold text-blue-800 mb-1",children:"🌐 Alternative: imgbb.com"}),c.jsx("p",{className:"text-xs text-blue-700",children:"Kostenlos, kein Account nötig - einfach hochladen & Link kopieren"})]})]})]}),c.jsx("button",{type:"submit",disabled:k,"data-test-id":"submit-recipe","aria-label":"Rezept speichern",className:ge("w-full py-3 rounded-lg font-bold text-white transition-all duration-200",k?"bg-gray-600 cursor-not-allowed":"bg-gradient-to-r from-primary-500 to-secondary-500 hover:shadow-lg hover:scale-105"),children:k?"⏳ Bild wird hochgeladen...":"Rezept speichern ⚡"})]})]}):c.jsxs("button",{onClick:A,"data-test-id":"open-add-recipe","aria-label":"Neues Rezept hinzufügen",className:"w-full bg-gradient-to-r from-primary-500 to-secondary-500 text-white rounded-2xl p-6 shadow-lg hover:shadow-xl transition-all duration-200 hover:scale-105 flex items-center justify-center gap-3 font-bold text-lg",children:[c.jsx(co,{className:"h-6 w-6"}),"Neues Rezept hinzufügen"]})},kA=({rating:t,onRatingChange:e,readonly:n=!1,size:r="md"})=>{const s={sm:"h-4 w-4",md:"h-5 w-5",lg:"h-6 w-6"},i=o=>{!n&&e&&e(o)};return c.jsx("div",{className:"flex items-center gap-1",children:[1,2,3,4,5].map(o=>{const l=o<=t;return c.jsx("button",{onClick:()=>i(o),"data-test-id":`star-${o}`,"aria-label":`${o} ${o===1?"Stern":"Sterne"} bewerten`,disabled:n,className:ge("transition-all duration-200",!n&&"hover:scale-110 cursor-pointer",n&&"cursor-default"),children:c.jsx(v2,{className:ge(s[r],l?"fill-yellow-400 text-yellow-400":"text-gray-300")})},o)})})},SA=({recipe:t,onSave:e,onClose:n})=>{const[r,s]=B.useState(t.title),[i,o]=B.useState(t.url),[l,u]=B.useState(t.description),[d,m]=B.useState(t.imageUrl||""),[p,g]=B.useState(t.ingredients||[]),[w,I]=B.useState(!1),[R,C]=B.useState(null),[T,y]=B.useState(t.uploadedImageUrl||null),[k,D]=B.useState(!1),[O,M]=B.useState(!1),E=async K=>{if(K.preventDefault(),!r.trim()){alert("Bitte Titel eingeben!");return}D(!0);try{const J=Uw(i);let W=T;R&&(W=await qw(R,t.id),t.uploadedImageUrl&&qg(t.uploadedImageUrl)&&await Hg(t.uploadedImageUrl)),O&&t.uploadedImageUrl&&qg(t.uploadedImageUrl)&&(await Hg(t.uploadedImageUrl),W=null),e(t.id,{title:r.trim(),url:i.trim()||"",description:l.trim(),imageUrl:d.trim()||void 0,uploadedImageUrl:W||void 0,ingredients:p,platform:J}),n()}catch(J){console.error("Fehler beim Speichern:",J),alert("Fehler beim Hochladen des Bildes!")}finally{D(!1)}},_=K=>{s(K.target.value)},b=K=>{o(K.target.value)},S=K=>{u(K.target.value)},A=K=>{m(K.target.value)},N=()=>{const K=Bw(i);K&&m(K)},x=()=>{I(!w)},Z=K=>{var Le;const J=(Le=K.target.files)==null?void 0:Le[0];if(!J)return;const W=Hw(J);if(W!==!0){alert(W);return}C(J);const se=new FileReader;se.onloadend=()=>{y(se.result)},se.readAsDataURL(J),M(!1)},ye=()=>{C(null),y(null),M(!0)};B.useEffect(()=>{if(d&&xl(d)){const K=wl(d);K!==d&&m(K)}},[d]);const Ue=$w(i),ne=i.toLowerCase(),z=ne.includes("instagram.com"),Q=ne.includes("facebook.com")||ne.includes("fb.com"),q=ne.includes("tiktok.com");return c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:c.jsxs("div",{className:"bg-slate-800/80 rounded-2xl p-6 max-w-2xl w-full shadow-2xl max-h-[90vh] overflow-y-auto",children:[c.jsxs("div",{className:"flex items-center justify-between mb-6",children:[c.jsx("h3",{className:"text-2xl font-bold text-gray-100",children:"Rezept bearbeiten"}),c.jsx("button",{onClick:n,"data-test-id":"close-edit-modal","aria-label":"Bearbeiten abbrechen",className:"p-2 hover:bg-slate-700 rounded-full transition-colors",children:c.jsx(zt,{className:"h-6 w-6 text-gray-300"})})]}),c.jsxs("form",{onSubmit:E,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"edit-title",className:"block text-sm font-medium text-gray-200 mb-1",children:"Rezept-Titel *"}),c.jsx("input",{id:"edit-title",type:"text",value:r,onChange:_,placeholder:"z.B. Spaghetti Carbonara",className:"w-full px-4 py-2 border-2 border-gray-600 rounded-lg focus:border-primary-500 focus:outline-none transition-colors bg-slate-700 text-gray-100 placeholder-gray-400",required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"edit-url",className:"block text-sm font-medium text-gray-200 mb-1",children:"Link zum Rezept (optional)"}),c.jsx("input",{id:"edit-url",type:"url",value:i,onChange:b,placeholder:"https://www.youtube.com/watch?v=... (oder leer für eigenes Rezept)",className:"w-full px-4 py-2 border-2 border-gray-600 rounded-lg focus:border-primary-500 focus:outline-none transition-colors bg-slate-700 text-gray-100 placeholder-gray-400"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"edit-description",className:"block text-sm font-medium text-gray-200 mb-1",children:"Beschreibung (optional)"}),c.jsx("textarea",{id:"edit-description",value:l,onChange:S,placeholder:"Was macht dieses Rezept besonders?",rows:3,className:"w-full px-4 py-2 border-2 border-gray-600 rounded-lg focus:border-primary-500 focus:outline-none transition-colors resize-none bg-slate-700 text-gray-100 placeholder-gray-400"})]}),c.jsx(Ww,{ingredients:p,onChange:g}),c.jsxs("div",{className:"border-2 border-dashed border-primary-500/30 rounded-xl p-4 bg-slate-700/30",children:[c.jsxs("div",{className:"flex items-center justify-between mb-3",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-200",children:"📸 Eigenes Foto hochladen (optional)"}),c.jsx("span",{className:"text-xs text-gray-400",children:"Max. 10 MB"})]}),T?c.jsxs("div",{className:"relative",children:[c.jsx("img",{src:T,alt:"Vorschau",className:"w-full h-48 object-cover rounded-lg"}),c.jsx("button",{type:"button",onClick:ye,className:"absolute top-2 right-2 p-2 bg-red-600 hover:bg-red-700 text-white rounded-full shadow-lg transition-colors",children:c.jsx(Os,{className:"h-4 w-4"})}),c.jsx("div",{className:"absolute bottom-2 left-2 bg-green-600 text-white text-xs px-2 py-1 rounded-full font-medium",children:R?"✓ Bereit zum Upload":"✓ Aktuelles Foto"})]}):c.jsxs("div",{children:[c.jsx("input",{id:"edit-image-upload",type:"file",accept:"image/jpeg,image/jpg,image/png,image/webp",onChange:Z,className:"hidden"}),c.jsxs("label",{htmlFor:"edit-image-upload",className:"flex flex-col items-center justify-center p-6 border-2 border-dashed border-gray-600 rounded-lg cursor-pointer hover:border-primary-500 hover:bg-slate-600/30 transition-all",children:[c.jsx(Sd,{className:"h-8 w-8 text-gray-400 mb-2"}),c.jsx("span",{className:"text-sm font-medium text-gray-300 mb-1",children:"Klicke hier oder ziehe ein Bild rein"}),c.jsx("span",{className:"text-xs text-gray-500",children:"JPEG, PNG oder WebP • Wird automatisch komprimiert"})]})]}),c.jsxs("p",{className:"text-xs text-gray-400 mt-2 text-center",children:["💡 ",c.jsx("strong",{children:"Hybrid-Lösung:"})," Du kannst sowohl ein eigenes Foto hochladen als auch eine YouTube-URL unten angeben!"]})]}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center justify-between mb-1",children:[c.jsx("label",{htmlFor:"edit-image",className:"block text-sm font-medium text-gray-200",children:"Bild-URL (optional)"}),c.jsxs("div",{className:"flex items-center gap-2",children:[Ue&&c.jsxs("button",{type:"button",onClick:N,className:"flex items-center gap-1 text-xs font-medium text-primary-500 hover:text-primary-600 transition-colors",children:[c.jsx(kd,{className:"h-3 w-3"}),"Auto-Fill"]}),(z||Q||q)&&c.jsxs("button",{type:"button",onClick:x,className:"flex items-center gap-1 text-xs font-medium text-secondary-500 hover:text-secondary-600 transition-colors",children:[c.jsx(fv,{className:"h-3 w-3"}),"Hilfe"]})]})]}),c.jsx("input",{id:"edit-image",type:"url",value:d,onChange:A,placeholder:"Google Drive oder imgbb.com Link",className:"w-full px-4 py-2 border-2 border-gray-600 rounded-lg focus:border-primary-500 focus:outline-none transition-colors bg-slate-700 text-gray-100 placeholder-gray-400"}),d&&xl(d)&&c.jsx("p",{className:"text-xs text-green-400 mt-1",children:"✅ Google Drive Link erkannt - wird automatisch konvertiert"}),d&&c.jsxs("div",{className:"mt-3",children:[c.jsx("p",{className:"text-xs font-medium text-gray-200 mb-1",children:"Vorschau:"}),c.jsx("div",{className:"relative w-full h-40 bg-slate-700 rounded-lg overflow-hidden border-2 border-gray-600",children:c.jsx("img",{src:wl(d),alt:"Vorschau",className:"w-full h-full object-cover",onError:K=>{const J=K.target;J.style.display="none";const W=J.parentElement;W&&(W.innerHTML='<div class="flex items-center justify-center h-full text-red-500 text-sm p-4 text-center"><div><p class="font-bold">❌ Bild kann nicht geladen werden</p><p class="text-xs mt-1">Prüfe Google Drive Freigabe:<br/>"Jeder mit dem Link"</p></div></div>')},onLoad:K=>{const W=K.target.parentElement;if(W){const se=document.createElement("div");se.className="absolute top-2 right-2 bg-green-500 text-white text-xs px-2 py-1 rounded-full font-medium",se.textContent="✓ OK",W.appendChild(se)}}})})]}),w&&(z||Q||q)&&c.jsxs("div",{className:"mt-3 p-3 bg-slate-700 border border-primary-500/30 rounded-lg text-xs text-gray-200",children:[c.jsx("p",{className:"font-bold mb-1",children:"💡 Tipp:"}),c.jsxs("p",{children:["Screenshot machen und auf ",c.jsx("a",{href:"https://imgbb.com",target:"_blank",rel:"noopener noreferrer",className:"underline",children:"imgbb.com"})," oder Google Drive hochladen"]})]})]}),c.jsxs("div",{className:"flex gap-3 pt-2",children:[c.jsx("button",{type:"button",onClick:n,disabled:k,className:"flex-1 py-3 rounded-lg font-medium bg-slate-700 text-gray-100 hover:bg-slate-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Abbrechen"}),c.jsx("button",{type:"submit",disabled:k,className:`flex-1 py-3 rounded-lg font-bold text-white transition-all duration-200 flex items-center justify-center gap-2 ${k?"bg-gray-600 cursor-not-allowed":"bg-gradient-to-r from-primary-500 to-secondary-500 hover:shadow-lg hover:scale-105"}`,children:k?c.jsx(c.Fragment,{children:"⏳ Wird hochgeladen..."}):c.jsxs(c.Fragment,{children:[c.jsx(yv,{className:"h-5 w-5"}),"Speichern"]})})]})]})]})})},Gw=t=>{const[e,n]=B.useState([]),[r,s]=B.useState(!0),[i,o]=B.useState(null);return B.useEffect(()=>{if(!t){s(!1);return}const g=`households/${t}/shoppingList`,w=vr(Qe,g),I=lf(w,uf("addedAt","desc")),R=su(I,C=>{const T=[];C.forEach(y=>{var D,O,M;const k=y.data();T.push({id:y.id,...k,addedAt:((M=(O=(D=k.addedAt)==null?void 0:D.toDate)==null?void 0:O.call(D))==null?void 0:M.toISOString())||new Date().toISOString()})}),n(T),s(!1),o(null)},C=>{console.error("Error fetching shopping list:",C),o("Fehler beim Laden der Einkaufsliste"),s(!1)});return()=>R()},[t]),{items:e,isLoading:r,error:i,addItem:async(g,w,I)=>{if(t)try{const R=`households/${t}/shoppingList`,C=vr(Qe,R);await Lo(C,{name:g,quantity:I||"",category:w,checked:!1,addedAt:Kr()})}catch(R){throw console.error("Error adding item:",R),o("Fehler beim Hinzufügen des Artikels"),R}},toggleItem:async g=>{if(t)try{const w=e.find(C=>C.id===g);if(!w)return;const I=`households/${t}/shoppingList`,R=Bt(Qe,I,g);await df(R,{checked:!w.checked})}catch(w){throw console.error("Error toggling item:",w),o("Fehler beim Aktualisieren des Artikels"),w}},removeItem:async g=>{if(t)try{const w=`households/${t}/shoppingList`,I=Bt(Qe,w,g);await ur(I)}catch(w){throw console.error("Error removing item:",w),o("Fehler beim Löschen des Artikels"),w}},clearAllItems:async()=>{if(t)try{const g=`households/${t}/shoppingList`,w=e.map(I=>ur(Bt(Qe,g,I.id)));await Promise.all(w)}catch(g){throw console.error("Error clearing shopping list:",g),o("Fehler beim Leeren der Einkaufsliste"),g}},clearCheckedItems:async()=>{if(t)try{const g=`households/${t}/shoppingList`,I=e.filter(R=>R.checked).map(R=>ur(Bt(Qe,g,R.id)));await Promise.all(I)}catch(g){throw console.error("Error clearing checked items:",g),o("Fehler beim Löschen der erledigten Artikel"),g}}}},IA={produce:["tomate","gurke","salat","paprika","zwiebel","knoblauch","karotte","kartoffel","apfel","banane","zitrone","orange","beere","spinat","brokkoli","pilz","champignon"],bakery:["brot","brötchen","baguette","toast","croissant","mehl","hefe"],meat:["hähnchen","huhn","rind","schwein","hack","steak","filet","schnitzel","bratwurst"],deli:["schinken","salami","mortadella","aufschnitt","wurst"],dairy:["milch","butter","käse","joghurt","sahne","schmand","quark","frischkäse","mozzarella","parmesan","ei","eier"],beverages:["wasser","saft","cola","limo","bier","wein","kaffee","tee","milch"],pantry:["reis","nudel","pasta","dose","konserve","öl","essig","gewürz","salz","pfeffer","zucker","honig","marmelade","ketchup","senf","mayonnaise","soße"],snacks:["schokolade","keks","chips","süßigkeit","gummibär","bonbon"],frozen:["tiefkühl","tk-","eis","eiscreme","gefrier"],household:["spülmittel","schwamm","putzmittel","klopapier","küchenpapier","müllbeutel","alufolie","frischhaltefolie"]},AA=t=>{const e=t.toLowerCase();for(const[n,r]of Object.entries(IA))if(r.some(s=>e.includes(s)))return n;return"produce"},RA={youtube:{icon:Vr,color:"bg-red-600/20 text-red-400 border-red-500/30",label:"YouTube"},instagram:{icon:pv,color:"bg-pink-600/20 text-pink-400 border-pink-500/30",label:"Instagram"},facebook:{icon:dv,color:"bg-blue-600/20 text-blue-400 border-blue-500/30",label:"Facebook"},tiktok:{icon:gv,color:"bg-gray-600/20 text-gray-400 border-gray-500/30",label:"TikTok"},own:{icon:_v,color:"bg-secondary-600/20 text-secondary-400 border-secondary-500/30",label:"Eigenes Rezept"},other:{icon:h2,color:"bg-accent-600/20 text-accent-400 border-accent-500/30",label:"Andere"}},NA=({recipe:t,onDelete:e,onUpdate:n})=>{const r=RA[t.platform],s=r.icon,[i,o]=B.useState(!1),[l,u]=B.useState(t.notes||""),[d,m]=B.useState(!1),[p,g]=B.useState(""),[w,I]=B.useState(!1),[R,C]=B.useState(!1),{currentHousehold:T}=So(),{addItem:y}=Gw(T==null?void 0:T.id),k=()=>{confirm(`Möchtest du "${t.title}" wirklich löschen?`)&&e(t.id)},D=()=>{t.url&&t.url.trim()!==""&&window.open(t.url,"_blank","noopener,noreferrer")},O=ne=>{u(ne.target.value)},M=()=>{n(t.id,{notes:l}),o(!1)},E=()=>{i&&u(t.notes||""),o(!i)},_=ne=>{n(t.id,{rating:ne})},b=ne=>{g(ne.target.value)},S=ne=>{if(ne.preventDefault(),!p.trim())return;const z={id:crypto.randomUUID(),text:p.trim(),createdAt:new Date().toISOString()},Q=[...t.comments,z];n(t.id,{comments:Q}),g("")},A=()=>{m(!d)},N=()=>{I(!0)},x=()=>{I(!1)},Z=(ne,z)=>{n(ne,z),I(!1)},ye=()=>{if(t.ingredients.length===0){alert("Dieses Rezept hat keine Zutaten!");return}let ne=0;t.ingredients.forEach(z=>{const Q=AA(z.name);y(z.name,Q,z.quantity),ne++}),alert(`✅ ${ne} ${ne===1?"Zutat":"Zutaten"} zur Einkaufsliste hinzugefügt!`)},Ue=()=>{C(!R)};return c.jsxs(c.Fragment,{children:[w&&c.jsx(SA,{recipe:t,onSave:Z,onClose:x}),c.jsxs("div",{className:"bg-slate-800/80 backdrop-blur-sm rounded-2xl overflow-hidden shadow-xl hover:shadow-2xl transition-all duration-300 border-2 border-dark-600/50 hover:border-primary-500/30 hover:autumn-glow",children:[c.jsx("button",{onClick:Ue,className:"w-full",children:t.uploadedImageUrl||t.imageUrl?c.jsxs("div",{className:"h-40 sm:h-48 overflow-hidden bg-gradient-to-br from-primary-100 to-secondary-100 relative",children:[c.jsx("img",{src:t.uploadedImageUrl||t.imageUrl,alt:t.title,className:"w-full h-full object-cover",onError:ne=>{const z=ne.target;z.style.display="none"}}),c.jsx("div",{className:"absolute bottom-2 right-2 bg-black bg-opacity-50 text-white text-xs px-2 py-1 rounded-full",children:R?"▼ Weniger":"▶ Mehr"}),t.uploadedImageUrl&&c.jsx("div",{className:"absolute top-2 left-2 bg-green-600 text-white text-xs px-2 py-1 rounded-full font-medium flex items-center gap-1",children:"📸 Eigenes Foto"})]}):c.jsxs("div",{className:"h-40 sm:h-48 bg-gradient-to-br from-primary-100 via-secondary-100 to-accent-100 flex items-center justify-center relative",children:[c.jsx(s,{className:"h-16 w-16 text-white opacity-50"}),c.jsx("div",{className:"absolute bottom-2 right-2 bg-black bg-opacity-50 text-white text-xs px-2 py-1 rounded-full",children:R?"▼ Weniger":"▶ Mehr"})]})}),c.jsxs("div",{className:"p-5",children:[c.jsxs("div",{className:"flex items-center justify-between mb-3",children:[c.jsxs("div",{className:ge("inline-flex items-center gap-2 px-3 py-1 rounded-full text-sm font-medium border-2",r.color),children:[c.jsx(s,{className:"h-4 w-4"}),r.label]}),c.jsx("button",{onClick:N,"data-test-id":`edit-recipe-${t.id}`,"aria-label":`Rezept ${t.title} bearbeiten`,className:"p-2 hover:bg-slate-700/50 rounded-lg transition-colors text-gray-400 hover:text-primary-400",children:c.jsx(m2,{className:"h-4 w-4"})})]}),c.jsx("button",{onClick:Ue,className:"w-full text-left mb-3",children:c.jsx("h3",{className:"text-xl font-bold text-gray-100 line-clamp-2 hover:text-primary-400 transition-colors",children:t.title})}),R&&c.jsxs("div",{className:"space-y-4 animate-in fade-in slide-in-from-top-2 duration-200",children:[t.description&&c.jsx("p",{className:"text-gray-300 text-sm",children:t.description}),c.jsxs("p",{className:"text-xs text-gray-500",children:["Hinzugefügt: ",new Date(t.createdAt).toLocaleDateString("de-DE")]}),c.jsxs("div",{className:"mb-4 pb-4 border-b border-dark-600/50",children:[c.jsxs("div",{className:"flex items-center justify-between mb-2",children:[c.jsx("span",{className:"text-sm font-medium text-gray-200",children:"Bewertung"}),t.rating&&c.jsxs("span",{className:"text-xs text-gray-400",children:[t.rating,"/5"]})]}),c.jsx(kA,{rating:t.rating||0,onRatingChange:_,size:"lg"})]}),t.ingredients&&t.ingredients.length>0&&c.jsxs("div",{className:"pb-4 border-b border-dark-600/50",children:[c.jsxs("div",{className:"flex items-center justify-between mb-2",children:[c.jsxs("span",{className:"text-sm font-medium text-gray-200",children:["Zutaten (",t.ingredients.length,")"]}),c.jsxs("button",{onClick:ye,"data-test-id":`add-ingredients-to-list-${t.id}`,"aria-label":"Zutaten zur Einkaufsliste hinzufügen",className:"flex items-center gap-1 text-xs font-medium text-primary-500 hover:text-primary-600 transition-colors",children:[c.jsx(bd,{className:"h-3 w-3"}),"Zur Einkaufsliste"]})]}),c.jsx("div",{className:"space-y-1 max-h-32 overflow-y-auto",children:t.ingredients.map((ne,z)=>c.jsxs("div",{className:"text-sm text-gray-200 bg-slate-700/50 rounded px-2 py-1 flex justify-between",children:[c.jsx("span",{children:ne.name}),ne.quantity&&c.jsx("span",{className:"text-gray-400 text-xs",children:ne.quantity})]},z))})]}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center justify-between mb-2",children:[c.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium text-gray-200",children:[c.jsx(_v,{className:"h-4 w-4 text-accent-500"}),"Notizen"]}),c.jsx("button",{onClick:E,"data-test-id":`toggle-notes-${t.id}`,"aria-label":i?"Notizen-Bearbeitung abbrechen":"Notizen bearbeiten",className:"text-xs text-primary-500 hover:text-primary-600 font-medium transition-colors",children:i?"Abbrechen":"Bearbeiten"})]}),i?c.jsxs("div",{className:"space-y-2",children:[c.jsx("textarea",{value:l,onChange:O,"data-test-id":`notes-input-${t.id}`,"aria-label":"Notizen bearbeiten",placeholder:"Füge deine Notizen hinzu...",rows:3,className:"w-full px-3 py-2 text-sm border-2 border-gray-600 rounded-lg focus:border-accent-500 focus:outline-none transition-colors resize-none bg-slate-700 text-gray-100 placeholder-gray-400"}),c.jsxs("button",{onClick:M,"data-test-id":`save-notes-${t.id}`,"aria-label":"Notizen speichern",className:ge("w-full flex items-center justify-center gap-2 px-3 py-2 rounded-lg text-sm font-medium transition-all duration-200","bg-accent-500 text-white hover:bg-accent-600"),children:[c.jsx(yv,{className:"h-4 w-4"}),"Speichern"]})]}):c.jsx("div",{className:"text-sm text-gray-300 bg-slate-700/50 rounded-lg p-3 min-h-[60px]",children:t.notes||c.jsx("span",{className:"text-gray-500 italic",children:"Keine Notizen vorhanden"})})]}),c.jsxs("div",{className:"pb-4 border-b border-slate-600",children:[c.jsxs("button",{onClick:A,"data-test-id":`toggle-comments-${t.id}`,"aria-label":d?"Kommentare ausblenden":"Kommentare anzeigen",className:"flex items-center justify-between w-full text-sm font-medium text-gray-200 hover:text-gray-100 transition-colors",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(f2,{className:"h-4 w-4 text-secondary-500"}),"Kommentare",t.comments.length>0&&c.jsx("span",{className:"bg-secondary-100 text-secondary-700 text-xs px-2 py-0.5 rounded-full",children:t.comments.length})]}),c.jsx("span",{className:"text-xs text-primary-500",children:d?"Ausblenden":"Anzeigen"})]}),d&&c.jsxs("div",{className:"mt-3 space-y-3",children:[t.comments.length>0&&c.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:t.comments.map(ne=>c.jsxs("div",{className:"bg-slate-700/50 rounded-lg p-3 text-sm",children:[c.jsx("p",{className:"text-gray-200",children:ne.text}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:new Date(ne.createdAt).toLocaleDateString("de-DE",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})})]},ne.id))}),c.jsxs("form",{onSubmit:S,className:"flex gap-2",children:[c.jsx("input",{type:"text",value:p,onChange:b,"data-test-id":`comment-input-${t.id}`,"aria-label":"Kommentar hinzufügen",placeholder:"Kommentar hinzufügen...",className:"flex-1 px-3 py-2 text-sm border-2 border-gray-600 rounded-lg focus:border-secondary-500 focus:outline-none transition-colors bg-slate-700 text-gray-100 placeholder-gray-400"}),c.jsx("button",{type:"submit","data-test-id":`add-comment-${t.id}`,"aria-label":"Kommentar senden",disabled:!p.trim(),className:ge("px-3 py-2 rounded-lg transition-all duration-200",p.trim()?"bg-secondary-500 text-white hover:bg-secondary-600":"bg-slate-600/50 text-gray-500 cursor-not-allowed"),children:c.jsx(g2,{className:"h-4 w-4"})})]})]})]}),c.jsxs("div",{className:"flex gap-2",children:[t.url&&t.url.trim()!==""&&c.jsxs("button",{onClick:D,"data-test-id":`open-recipe-${t.id}`,"aria-label":`Rezept ${t.title} öffnen`,className:ge("flex-1 flex items-center justify-center gap-2 px-4 py-2 rounded-lg font-medium transition-all duration-200","bg-primary-500 text-white hover:bg-primary-600 hover:shadow-md"),children:[c.jsx(u2,{className:"h-4 w-4"}),"Öffnen"]}),c.jsx("button",{onClick:k,"data-test-id":`delete-recipe-${t.id}`,"aria-label":`Rezept ${t.title} löschen`,className:ge("px-4 py-2 rounded-lg font-medium transition-all duration-200","bg-red-100 text-red-600 hover:bg-red-200",!t.url||t.url.trim()===""?"flex-1":""),children:c.jsx(Os,{className:"h-4 w-4"})})]}),c.jsx("button",{onClick:Ue,"data-test-id":`collapse-recipe-${t.id}`,"aria-label":"Details ausblenden",className:"w-full mt-4 py-2 text-sm font-medium text-gray-400 hover:text-primary-400 transition-colors border-t border-dark-600/50 pt-4",children:"▲ Weniger anzeigen"})]}),!R&&c.jsxs("div",{className:"flex items-center justify-between pt-3 border-t border-dark-600/50",children:[c.jsxs("div",{className:"flex items-center gap-3 text-xs text-gray-400",children:[t.rating&&c.jsxs("span",{className:"flex items-center gap-1",children:["⭐ ",t.rating,"/5"]}),t.ingredients.length>0&&c.jsxs("span",{children:["🥕 ",t.ingredients.length]}),t.comments.length>0&&c.jsxs("span",{children:["💬 ",t.comments.length]})]}),c.jsx("button",{onClick:Ue,className:"text-xs text-primary-500 hover:text-primary-600 font-medium",children:"Mehr anzeigen ▼"})]})]})]})]})},CA=({searchTerm:t,onSearchChange:e})=>{const n=s=>{e(s.target.value)},r=()=>{e("")};return c.jsxs("div",{className:"relative",children:[c.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:c.jsx(vv,{className:"h-5 w-5 text-gray-400"})}),c.jsx("input",{type:"text",value:t,onChange:n,"data-test-id":"search-recipes","aria-label":"Rezepte suchen",placeholder:"Suche nach Rezepten...",className:ge("w-full pl-12 pr-12 py-3 rounded-full border-2 border-gray-600","focus:border-primary-500 focus:outline-none transition-colors","bg-slate-800/80 shadow-sm text-gray-100 placeholder-gray-400")}),t&&c.jsx("button",{onClick:r,"data-test-id":"clear-search","aria-label":"Suche löschen",className:"absolute inset-y-0 right-0 pr-4 flex items-center hover:text-gray-200 text-gray-400 transition-colors",children:c.jsx(zt,{className:"h-5 w-5"})})]})},Kw=async t=>{try{const e=Qw(t);if(!e)throw new Error("Ungültige Gist-URL");const n=`https://api.github.com/gists/${e}`,r=await fetch(n);if(!r.ok)throw new Error("Gist konnte nicht geladen werden");const s=await r.json(),i=Object.values(s.files);if(!i.length)throw new Error("Gist enthält keine Dateien");const o=i[0].content,l=JSON.parse(o);if(!l.recipes||!Array.isArray(l.recipes))throw new Error("Ungültiges Datenformat");return l}catch(e){throw new Error("Fehler beim Laden vom Gist: "+e.message)}},Qw=t=>{const e=[/gist\.github\.com\/[^\/]+\/([a-f0-9]+)/i,/gist\.github\.com\/([a-f0-9]+)/i,/^([a-f0-9]{32})$/i];for(const n of e){const r=t.match(n);if(r)return r[1]}return null},PA=t=>Qw(t)!==null,DA="https://gist.github.com/tubackit/ab2aa98a3c0fd463e82701a616f0dbf6",jA=({onSync:t,mode:e="merge"})=>{const[n,r]=B.useState(!1),[s,i]=B.useState(localStorage.getItem("foodflash_last_sync")),o=async()=>{r(!0);try{const u=await Kw(DA);e==="replace"&&localStorage.removeItem("foodflash_recipes"),t(u.recipes);const d=new Date().toISOString();i(d),localStorage.setItem("foodflash_last_sync",d),alert(`✅ ${u.recipes.length} Familien-Rezepte geladen!`)}catch(u){alert("❌ Fehler beim Laden: "+u.message)}finally{r(!1)}},l=()=>s?new Date(s).toLocaleDateString("de-DE",{day:"2-digit",month:"2-digit",hour:"2-digit",minute:"2-digit"}):"Nie";return c.jsxs("div",{className:"bg-gradient-to-r from-blue-500 to-purple-500 rounded-2xl p-4 shadow-lg text-white",children:[c.jsxs("div",{className:"flex items-center justify-between mb-2",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(rh,{className:"h-5 w-5"}),c.jsx("h3",{className:"font-bold",children:"Familien-Rezepte"})]}),c.jsxs("p",{className:"text-xs opacity-90",children:["Letzter Sync: ",l()]})]}),c.jsxs("button",{onClick:o,disabled:n,"data-test-id":"family-sync","aria-label":"Familien-Rezepte synchronisieren",className:ge("w-full py-2 px-4 rounded-lg font-medium transition-all duration-200 flex items-center justify-center gap-2",n?"bg-slate-800/80/30 cursor-not-allowed":"bg-slate-800/80 text-blue-600 hover:bg-blue-50 hover:shadow-md"),children:[c.jsx(p2,{className:ge("h-4 w-4",n&&"animate-spin")}),n?"Lade...":"Familien-Rezepte aktualisieren"]}),c.jsx("p",{className:"text-xs opacity-75 mt-2 text-center",children:"Lädt die neuesten Rezepte von der Familien-Cloud"})]})},VA="AIzaSyCEonhSF4OlyLDSx0yG5nz0iWUAZQMcpcU",LA=async t=>{const e=`${t} rezept`,n=`https://www.googleapis.com/youtube/v3/search?part=snippet&q=${encodeURIComponent(e)}&type=video&maxResults=12&key=${VA}`;try{const r=await fetch(n);if(!r.ok)throw r.status===403?new Error("API-Key ungültig oder Quota überschritten"):new Error("YouTube API Fehler: "+r.statusText);return(await r.json()).items.map(i=>({id:i.id.videoId,title:i.snippet.title,thumbnail:i.snippet.thumbnails.medium.url,channelTitle:i.snippet.channelTitle,description:i.snippet.description,url:`https://www.youtube.com/watch?v=${i.id.videoId}`}))}catch(r){throw console.error("YouTube API Error:",r),r}},OA=({onSelect:t,onClose:e})=>{const[n,r]=B.useState(""),[s,i]=B.useState([]),[o,l]=B.useState(!1),[u,d]=B.useState(""),m=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1"||window.location.hostname.startsWith("192.168.")||window.location.hostname.startsWith("10.")||window.location.hostname.endsWith(".local"),p=I=>{r(I.target.value)},g=async I=>{if(I.preventDefault(),!!n.trim()){l(!0),d(""),i([]);try{const R=await LA(n);i(R)}catch(R){d(R.message)}finally{l(!1)}}},w=I=>{t(I),e()};return m?c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:c.jsxs("div",{className:"bg-slate-800/80 rounded-2xl p-6 max-w-4xl w-full max-h-[90vh] overflow-hidden flex flex-col shadow-2xl",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsxs("h3",{className:"text-2xl font-bold text-gray-100 flex items-center gap-2",children:[c.jsx(Vr,{className:"h-7 w-7 text-red-600"}),"Auf YouTube suchen"]}),c.jsx("button",{onClick:e,"data-test-id":"close-youtube-search","aria-label":"Suche schließen",className:"p-2 hover:bg-slate-700 rounded-full transition-colors",children:c.jsx(zt,{className:"h-6 w-6 text-gray-300"})})]}),c.jsx("form",{onSubmit:g,className:"mb-4",children:c.jsxs("div",{className:"relative",children:[c.jsx("input",{type:"text",value:n,onChange:p,placeholder:"Suche nach Rezepten... z.B. 'Carbonara'",className:"w-full pl-12 pr-4 py-3 border-2 border-gray-600 rounded-lg focus:border-red-500 focus:outline-none transition-colors bg-slate-700 text-gray-100 placeholder-gray-400",autoFocus:!0}),c.jsx(vv,{className:"absolute left-4 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),c.jsx("button",{type:"submit",disabled:o||!n.trim(),className:ge("absolute right-2 top-1/2 -translate-y-1/2 px-4 py-1.5 rounded-lg font-medium transition-all",o||!n.trim()?"bg-gray-200 text-gray-400":"bg-red-600 text-white hover:bg-red-700"),children:o?"Suche...":"Suchen"})]})}),u&&c.jsxs("div",{className:"mb-4 p-4 bg-red-50 border-2 border-red-200 rounded-lg text-red-700",children:["❌ ",u]}),o&&c.jsx("div",{className:"flex-1 flex items-center justify-center",children:c.jsx(d2,{className:"h-8 w-8 text-red-600 animate-spin"})}),!o&&s.length>0&&c.jsxs("div",{className:"flex-1 overflow-y-auto",children:[c.jsxs("p",{className:"text-sm text-gray-600 mb-3",children:[s.length," Ergebnisse gefunden"]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.map(I=>c.jsxs("button",{onClick:()=>w(I),"data-test-id":`youtube-video-${I.id}`,"aria-label":`${I.title} auswählen`,className:"bg-slate-800/80 border-2 border-gray-600 rounded-xl overflow-hidden hover:border-red-400 hover:shadow-lg transition-all duration-200 text-left group",children:[c.jsxs("div",{className:"relative aspect-video bg-slate-700",children:[c.jsx("img",{src:I.thumbnail,alt:I.title,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-200"}),c.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-10 transition-all flex items-center justify-center",children:c.jsx(Vr,{className:"h-12 w-12 text-white opacity-0 group-hover:opacity-100 transition-opacity"})})]}),c.jsxs("div",{className:"p-3",children:[c.jsx("h4",{className:"font-bold text-gray-100 text-sm line-clamp-2 mb-1",children:I.title}),c.jsx("p",{className:"text-xs text-gray-500 line-clamp-1",children:I.channelTitle})]})]},I.id))})]}),!o&&!u&&s.length===0&&n===""&&c.jsx("div",{className:"flex-1 flex items-center justify-center text-center p-8",children:c.jsxs("div",{children:[c.jsx(Vr,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),c.jsx("p",{className:"text-gray-500",children:"Suche nach Rezepten auf YouTube"}),c.jsx("p",{className:"text-sm text-gray-400 mt-2",children:'z.B. "Spaghetti Carbonara"'})]})})]})}):c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:c.jsxs("div",{className:"bg-slate-800/80 rounded-2xl p-6 max-w-md w-full shadow-2xl text-center",children:[c.jsxs("div",{className:"mb-4",children:[c.jsx(Vr,{className:"h-16 w-16 text-red-600 mx-auto mb-4"}),c.jsx("h3",{className:"text-2xl font-bold text-gray-100 mb-2",children:"YouTube-Suche nur lokal verfügbar"}),c.jsx("p",{className:"text-gray-300 mb-6",children:"Die YouTube-Suche funktioniert nur auf dem lokalen Development-Server aus Sicherheitsgründen. Verwende die App lokal unter:"}),c.jsx("code",{className:"bg-slate-700 px-3 py-2 rounded text-primary-400 font-mono text-sm",children:"http://localhost:5174/FoodFlash/"})]}),c.jsx("button",{onClick:e,className:"w-full bg-primary-600 text-white py-3 px-6 rounded-lg font-medium hover:bg-primary-700 transition-colors",children:"Schließen"})]})})},MA=(t,e,n)=>{const r={version:"1.0",exportDate:new Date().toISOString(),recipes:t,weekPlan:e,shoppingList:n},s=JSON.stringify(r,null,2),i=new Blob([s],{type:"application/json"}),o=URL.createObjectURL(i),l=document.createElement("a");l.href=o,l.download=`foodflash-export-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(o)},FA=t=>new Promise((e,n)=>{const r=new FileReader;r.onload=s=>{var i;try{const o=(i=s.target)==null?void 0:i.result,l=JSON.parse(o);if(!l.recipes||!Array.isArray(l.recipes))throw new Error("Ungültiges Datenformat");e(l)}catch(o){n(new Error("Fehler beim Lesen der Datei: "+o.message))}},r.onerror=()=>{n(new Error("Fehler beim Lesen der Datei"))},r.readAsText(t)}),zA="modulepreload",UA=function(t){return"/FoodFlash/"+t},Wg={},Gg=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(u=>{if(u=UA(u),u in Wg)return;Wg[u]=!0;const d=u.endsWith(".css"),m=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${m}`))return;const p=document.createElement("link");if(p.rel=d?"stylesheet":zA,d||(p.as="script"),p.crossOrigin="",p.href=u,l&&p.setAttribute("nonce",l),document.head.appendChild(p),d)return new Promise((g,w)=>{p.addEventListener("load",g),p.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${u}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return s.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return e().catch(i)})},BA=()=>{try{console.log("🧹 Force cleaning recipe data..."),localStorage.removeItem("foodflash_recipes"),localStorage.removeItem("foodflash_migration_completed"),console.log("✅ Force cleanup completed!"),window.location.reload()}catch(t){console.error("Error during force cleanup:",t)}},$A=async()=>{var t;try{console.log("🍕 Attempting direct pizza recipe deletion...");const{collection:e,getDocs:n,deleteDoc:r,doc:s}=await Gg(async()=>{const{collection:d,getDocs:m,deleteDoc:p,doc:g}=await Promise.resolve().then(()=>rI);return{collection:d,getDocs:m,deleteDoc:p,doc:g}},void 0),{db:i}=await Gg(async()=>{const{db:d}=await Promise.resolve().then(()=>EA);return{db:d}},void 0),o=e(i,"recipes"),l=await n(o);let u=!1;for(const d of l.docs){const m=d.data(),p=((t=m.title)==null?void 0:t.toLowerCase())||"";(p.includes("pizza")||p.includes("pizzarezept")||p.includes("pizzarezept"))&&(console.log(`🗑️ Deleting pizza recipe: "${m.title}"`),await r(s(i,"recipes",d.id)),u=!0)}u?(console.log("✅ Pizza recipe(s) deleted successfully!"),alert("🍕 Pizzarezept erfolgreich gelöscht!"),window.location.reload()):(console.log("ℹ️ No pizza recipes found"),alert("ℹ️ Kein Pizzarezept gefunden"))}catch(e){console.error("Error deleting pizza recipe:",e),alert("❌ Fehler beim Löschen des Pizzarezepts")}},HA=({platformFilter:t,onClearFilter:e})=>{const{recipes:n,addRecipe:r,deleteRecipe:s,updateRecipe:i,isLoading:o}=wf(),[l,u]=B.useState(""),[d,m]=B.useState(!1),[p,g]=B.useState("merge"),w=B.useRef(null),[I,R]=B.useState(!1),[C,T]=B.useState(""),[y,k]=B.useState(!1),[D,O]=B.useState(!0),[M,E]=B.useState(!1),_=B.useMemo(()=>{let W=n;if(t&&(W=W.filter(se=>se.platform===t)),l.trim()){const se=l.toLowerCase();W=W.filter(Le=>{const de=Le.title.toLowerCase(),_t=Le.description.toLowerCase(),ts=Le.platform.toLowerCase(),rn=(Le.notes||"").toLowerCase();return de.includes(se)||_t.includes(se)||ts.includes(se)||rn.includes(se)})}return W},[n,l,t]),b=()=>{MA(n)},S=()=>{m(!0)},A=async W=>{var Le;const se=(Le=W.target.files)==null?void 0:Le[0];if(se)try{const de=await FA(se);if(p==="replace")localStorage.removeItem("foodflash_recipes"),de.recipes.forEach(_t=>r(_t));else{const _t=new Set(n.map(rn=>rn.url));de.recipes.filter(rn=>!_t.has(rn.url)).forEach(rn=>r(rn))}m(!1),w.current&&(w.current.value=""),alert(`✅ ${p==="replace"?"Ersetzt":"Hinzugefügt"}: ${de.recipes.length} Rezepte`)}catch(de){alert("❌ Fehler beim Importieren: "+de.message)}},N=W=>{g(W)},x=()=>{m(!1),w.current&&(w.current.value="")},Z=()=>{const W=localStorage.getItem("foodflash_gist_url");W&&T(W),R(!0)},ye=()=>{R(!1),T("")},Ue=W=>{T(W.target.value)},ne=async()=>{if(!C.trim()){alert("Bitte Gist-URL eingeben!");return}if(!PA(C)){alert("Ungültige Gist-URL! Bitte überprüfe die URL.");return}k(!0);try{const W=await Kw(C);if(p==="replace")localStorage.removeItem("foodflash_recipes"),W.recipes.forEach(se=>r(se));else{const se=new Set(n.map(de=>de.url));W.recipes.filter(de=>!se.has(de.url)).forEach(de=>r(de))}D&&localStorage.setItem("foodflash_gist_url",C),R(!1),T(""),alert(`✅ ${W.recipes.length} Rezepte von Gist geladen!`)}catch(W){alert("❌ "+W.message)}finally{k(!1)}},z=()=>{localStorage.removeItem("foodflash_gist_url"),T(""),alert("✅ Gespeicherte Gist-URL wurde gelöscht")},Q=W=>{const se=new Set(n.map(de=>de.url));W.filter(de=>!se.has(de.url)).forEach(de=>r(de))},q=()=>{E(!0)},K=()=>{E(!1)},J=W=>{r({title:W.title,url:W.url,description:W.description.slice(0,200),imageUrl:W.thumbnail,platform:"youtube",ingredients:[],comments:[],rating:void 0,notes:""}),E(!1)};return c.jsxs("div",{className:"max-w-6xl mx-auto",children:[c.jsxs("div",{className:"text-center mb-8",children:[c.jsxs("h2",{className:"text-4xl font-bold text-gray-100 mb-2 flex items-center justify-center gap-3",children:[c.jsx(cv,{className:"h-10 w-10 text-primary-500"}),"Deine Rezepte"]}),c.jsx("p",{className:"text-gray-600",children:n.length===0?"Füge dein erstes Rezept hinzu!":`${n.length} ${n.length===1?"Rezept":"Rezepte"} gespeichert`})]}),t&&e&&c.jsx("div",{className:"flex justify-center mb-6",children:c.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-primary-100 text-primary-700 rounded-full font-medium",children:[c.jsxs("span",{children:["Filter: ",t==="youtube"?"YouTube":t==="instagram"?"Instagram":t==="facebook"?"Facebook":t==="tiktok"?"TikTok":t==="own"?"Eigene Rezepte":t]}),c.jsx("button",{onClick:e,"data-test-id":"clear-platform-filter","aria-label":"Filter entfernen",className:"p-1 hover:bg-primary-200 rounded-full transition-colors",children:c.jsx(zt,{className:"h-4 w-4"})})]})}),c.jsx("div",{className:"mb-8",children:c.jsx(bA,{onAdd:W=>r({...W,ingredients:W.ingredients||[],comments:[],rating:void 0})})}),c.jsx("div",{className:"mb-6 text-center space-y-2",children:c.jsxs("div",{className:"flex gap-2 justify-center flex-wrap",children:[c.jsxs("button",{onClick:()=>{confirm(`🍕 Pizzarezept direkt aus Firebase löschen?

Dies umgeht alle Konflikte und löscht das Rezept sofort.`)&&$A()},className:"px-4 py-2 bg-orange-600 hover:bg-orange-700 text-white rounded-lg transition-colors text-sm flex items-center gap-2",children:[c.jsx(zt,{className:"h-4 w-4"}),"Pizzarezept löschen"]}),c.jsxs("button",{onClick:()=>{confirm(`🧹 Alte Daten bereinigen und Seite neu laden?

Dies kann helfen, wenn Rezepte nicht gelöscht werden können.`)&&BA()},className:"px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg transition-colors text-sm flex items-center gap-2",children:[c.jsx(zt,{className:"h-4 w-4"}),"Alte Daten bereinigen"]})]})}),c.jsx("div",{className:"mb-6",children:c.jsx(jA,{onSync:Q,mode:"merge"})}),c.jsx("div",{className:"mb-6",children:c.jsxs("button",{onClick:q,"data-test-id":"youtube-search","aria-label":"Auf YouTube nach Rezepten suchen",className:"w-full bg-gradient-to-r from-red-500 to-red-600 text-white rounded-2xl p-4 shadow-lg hover:shadow-xl transition-all duration-200 hover:scale-105 flex items-center justify-center gap-3 font-bold text-lg",children:[c.jsx(Vr,{className:"h-6 w-6"}),"Rezept auf YouTube suchen"]})}),M&&c.jsx(OA,{onSelect:J,onClose:K}),c.jsxs("div",{className:"flex flex-wrap gap-3 mb-6 justify-center",children:[n.length>0&&c.jsxs("button",{onClick:b,"data-test-id":"export-recipes","aria-label":"Rezepte exportieren",className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-accent-500 to-accent-600 text-white rounded-lg font-medium hover:shadow-lg transition-all duration-200 hover:scale-105",children:[c.jsx(l2,{className:"h-5 w-5"}),"Exportieren"]}),c.jsxs("button",{onClick:S,"data-test-id":"import-recipes","aria-label":"Rezepte importieren",className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-secondary-500 to-secondary-600 text-white rounded-lg font-medium hover:shadow-lg transition-all duration-200 hover:scale-105",children:[c.jsx(Sd,{className:"h-5 w-5"}),"Datei"]}),c.jsxs("button",{onClick:Z,"data-test-id":"load-from-gist","aria-label":"Von GitHub Gist laden",className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-lg font-medium hover:shadow-lg transition-all duration-200 hover:scale-105",children:[c.jsx(rh,{className:"h-5 w-5"}),"Gist-Cloud"]})]}),d&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:c.jsxs("div",{className:"bg-slate-800/80 rounded-2xl p-6 max-w-md w-full shadow-2xl",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsxs("h3",{className:"text-xl font-bold text-gray-100 flex items-center gap-2",children:[c.jsx(c2,{className:"h-6 w-6 text-secondary-500"}),"Rezepte importieren"]}),c.jsx("button",{onClick:x,"data-test-id":"close-import-dialog","aria-label":"Dialog schließen",className:"p-2 hover:bg-slate-700 rounded-full transition-colors",children:c.jsx(zt,{className:"h-6 w-6 text-gray-500"})})]}),c.jsxs("div",{className:"mb-4",children:[c.jsx("p",{className:"text-sm font-medium text-gray-200 mb-2",children:"Import-Modus:"}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[c.jsx("input",{type:"radio",name:"import-mode",checked:p==="merge",onChange:()=>N("merge"),className:"w-4 h-4 text-secondary-500"}),c.jsxs("div",{children:[c.jsx("span",{className:"font-medium text-gray-100",children:"Hinzufügen"}),c.jsx("p",{className:"text-xs text-gray-600",children:"Neue Rezepte zu bestehenden hinzufügen"})]})]}),c.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[c.jsx("input",{type:"radio",name:"import-mode",checked:p==="replace",onChange:()=>N("replace"),className:"w-4 h-4 text-secondary-500"}),c.jsxs("div",{children:[c.jsx("span",{className:"font-medium text-gray-100",children:"Ersetzen"}),c.jsx("p",{className:"text-xs text-gray-600",children:"Alle bestehenden Rezepte löschen und ersetzen"})]})]})]})]}),c.jsx("input",{ref:w,type:"file",accept:".json,application/json",onChange:A,className:"hidden",id:"recipe-file-input"}),c.jsx("label",{htmlFor:"recipe-file-input",className:ge("block w-full py-3 text-center rounded-lg font-bold cursor-pointer transition-all duration-200","bg-gradient-to-r from-secondary-500 to-secondary-600 text-white hover:shadow-lg hover:scale-105"),children:"Datei auswählen"}),c.jsx("p",{className:"text-xs text-gray-500 mt-3 text-center",children:"Wähle eine FoodFlash JSON-Datei aus"})]})}),I&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:c.jsxs("div",{className:"bg-slate-800/80 rounded-2xl p-6 max-w-lg w-full shadow-2xl",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsxs("h3",{className:"text-xl font-bold text-gray-100 flex items-center gap-2",children:[c.jsx(rh,{className:"h-6 w-6 text-blue-500"}),"Von GitHub Gist laden"]}),c.jsx("button",{onClick:ye,"data-test-id":"close-gist-dialog","aria-label":"Dialog schließen",className:"p-2 hover:bg-slate-700 rounded-full transition-colors",children:c.jsx(zt,{className:"h-6 w-6 text-gray-500"})})]}),c.jsxs("div",{className:"mb-4 p-4 bg-blue-50 border-2 border-blue-200 rounded-lg",children:[c.jsx("p",{className:"text-sm text-blue-800 font-medium mb-2",children:"💡 So funktioniert's:"}),c.jsxs("ol",{className:"text-xs text-blue-700 space-y-1 list-decimal list-inside",children:[c.jsxs("li",{children:["Ein Familienmitglied erstellt einen ",c.jsx("strong",{children:"öffentlichen Gist"})," mit der Export-Datei"]}),c.jsx("li",{children:"Gist-URL wird mit der Familie geteilt"}),c.jsx("li",{children:"Alle laden die Rezepte von dieser URL"})]}),c.jsxs("p",{className:"text-xs text-blue-600 mt-2",children:["📖 ",c.jsx("a",{href:"https://gist.github.com",target:"_blank",rel:"noopener noreferrer",className:"underline",children:"gist.github.com"})," - kostenlos & einfach!"]})]}),c.jsxs("div",{className:"mb-4",children:[c.jsx("p",{className:"text-sm font-medium text-gray-200 mb-2",children:"Import-Modus:"}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[c.jsx("input",{type:"radio",name:"gist-import-mode",checked:p==="merge",onChange:()=>N("merge"),className:"w-4 h-4 text-blue-500"}),c.jsxs("div",{children:[c.jsx("span",{className:"font-medium text-gray-100",children:"Hinzufügen"}),c.jsx("p",{className:"text-xs text-gray-600",children:"Neue Rezepte zu bestehenden hinzufügen"})]})]}),c.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[c.jsx("input",{type:"radio",name:"gist-import-mode",checked:p==="replace",onChange:()=>N("replace"),className:"w-4 h-4 text-blue-500"}),c.jsxs("div",{children:[c.jsx("span",{className:"font-medium text-gray-100",children:"Ersetzen"}),c.jsx("p",{className:"text-xs text-gray-600",children:"Alle bestehenden Rezepte löschen und ersetzen"})]})]})]})]}),c.jsxs("div",{className:"mb-4",children:[c.jsxs("div",{className:"flex items-center justify-between mb-1",children:[c.jsx("label",{htmlFor:"gist-url",className:"block text-sm font-medium text-gray-200",children:"GitHub Gist URL"}),localStorage.getItem("foodflash_gist_url")&&c.jsx("button",{onClick:z,className:"text-xs text-red-500 hover:text-red-600 font-medium",children:"URL löschen"})]}),c.jsx("input",{id:"gist-url",type:"url",value:C,onChange:Ue,placeholder:"https://gist.github.com/username/...",className:"w-full px-4 py-2 border-2 border-gray-600 rounded-lg focus:border-blue-500 focus:outline-none transition-colors bg-slate-700 text-gray-100 placeholder-gray-400"}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Z.B.: https://gist.github.com/username/abc123..."}),c.jsxs("label",{className:"flex items-center gap-2 mt-2 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:D,onChange:W=>O(W.target.checked),className:"w-4 h-4 text-blue-500"}),c.jsx("span",{className:"text-sm text-gray-200",children:"URL für nächstes Mal speichern"})]})]}),c.jsx("button",{onClick:ne,disabled:y,className:ge("w-full py-3 rounded-lg font-bold text-white transition-all duration-200",y?"bg-gray-400 cursor-not-allowed":"bg-gradient-to-r from-blue-500 to-blue-600 hover:shadow-lg hover:scale-105"),children:y?"Lade...":"Von Gist laden"})]})}),n.length>0&&c.jsxs("div",{className:"mb-8",children:[c.jsx(CA,{searchTerm:l,onSearchChange:u}),l&&c.jsxs("p",{className:"text-sm text-gray-500 mt-2 text-center",children:[_.length," ",_.length===1?"Ergebnis":"Ergebnisse"," gefunden"]})]}),o?c.jsxs("div",{className:"bg-slate-800/80 rounded-2xl p-12 text-center shadow-lg",children:[c.jsx("div",{className:"text-6xl mb-4 animate-pulse",children:"🔄"}),c.jsx("h3",{className:"text-2xl font-bold text-gray-200 mb-2",children:"Lade Rezepte..."}),c.jsx("p",{className:"text-gray-400",children:"Synchronisiere mit der Cloud ☁️"})]}):n.length>0?_.length>0?c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:_.map(W=>c.jsx(NA,{recipe:W,onDelete:s,onUpdate:i},W.id))}):c.jsxs("div",{className:"bg-slate-800/80 rounded-2xl p-12 text-center shadow-lg",children:[c.jsx("div",{className:"text-6xl mb-4",children:"🔍"}),c.jsx("h3",{className:"text-2xl font-bold text-gray-200 mb-2",children:"Keine Ergebnisse"}),c.jsxs("p",{className:"text-gray-500",children:['Keine Rezepte für "',l,'" gefunden.']})]}):c.jsxs("div",{className:"bg-slate-800/80 rounded-2xl p-12 text-center shadow-lg",children:[c.jsx("div",{className:"text-6xl mb-4",children:"🍳"}),c.jsx("h3",{className:"text-2xl font-bold text-gray-200 mb-2",children:"Noch keine Rezepte"}),c.jsx("p",{className:"text-gray-500",children:"Klicke auf den Button oben, um dein erstes Rezept zu speichern!"})]})]})},qA=t=>{const[e,n]=B.useState([]),[r,s]=B.useState(!0),[i,o]=B.useState(null);return B.useEffect(()=>{if(!t){s(!1);return}const g=`households/${t}/weekPlanner`,w=vr(Qe,g),I=su(w,R=>{const C=[];R.forEach(T=>{C.push({date:T.id,meals:T.data().meals||[]})}),C.sort((T,y)=>T.date.localeCompare(y.date)),n(C),s(!1),o(null)},R=>{console.error("Error fetching week planner:",R),o("Fehler beim Laden des Wochenplaners"),s(!1)});return()=>I()},[t]),{weekPlan:e,isLoading:r,error:i,addMealToDay:async(g,w,I,R)=>{if(t)try{const C=`households/${t}/weekPlanner`,T=Bt(Qe,C,g),y=e.find(D=>D.date===g),k=y?[...y.meals]:[];k.push({recipeId:w,recipeTitle:I,mealType:R}),await Ah(T,{meals:k,updatedAt:Kr()})}catch(C){throw console.error("Error adding meal:",C),o("Fehler beim Hinzufügen der Mahlzeit"),C}},removeMealFromDay:async(g,w)=>{if(t)try{const I=e.find(y=>y.date===g);if(!I)return;const R=I.meals.filter((y,k)=>k!==w),C=`households/${t}/weekPlanner`,T=Bt(Qe,C,g);R.length===0?await ur(T):await Ah(T,{meals:R,updatedAt:Kr()})}catch(I){throw console.error("Error removing meal:",I),o("Fehler beim Entfernen der Mahlzeit"),I}},clearDay:async g=>{if(t)try{const w=`households/${t}/weekPlanner`,I=Bt(Qe,w,g);await ur(I)}catch(w){throw console.error("Error clearing day:",w),o("Fehler beim Leeren des Tages"),w}},clearWeekPlan:async()=>{if(t)try{const g=`households/${t}/weekPlanner`,w=e.map(I=>ur(Bt(Qe,g,I.date)));await Promise.all(w)}catch(g){throw console.error("Error clearing week plan:",g),o("Fehler beim Leeren des Wochenplaners"),g}},getMealsForDate:g=>{const w=e.find(I=>I.date===g);return(w==null?void 0:w.meals)||[]}}},WA=t=>{const e=qA(t),{recipes:n}=wf(),r={monday:{meals:[]},tuesday:{meals:[]},wednesday:{meals:[]},thursday:{meals:[]},friday:{meals:[]},saturday:{meals:[]},sunday:{meals:[]}},s=m=>{const p=new Date,g=p.getDay(),R={sunday:0,monday:1,tuesday:2,wednesday:3,thursday:4,friday:5,saturday:6}[m]-g,C=new Date(p);return C.setDate(p.getDate()+R),C.toISOString().split("T")[0]};e.weekPlan.forEach(m=>{const g=new Date(m.date).getDay(),I=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"][g];r[I].meals=m.meals.map(R=>({recipeId:R.recipeId,mealType:R.mealType}))});const i={weekStart:new Date().toISOString(),days:r},o=async(m,p)=>{const g=s(m),w=n.find(I=>I.id===p.recipeId);if(!w){console.error("Recipe not found:",p.recipeId);return}await e.addMealToDay(g,p.recipeId,w.title,p.mealType)},l=async(m,p,g)=>{const w=s(m),R=e.getMealsForDate(w).findIndex(C=>C.recipeId===p&&C.mealType===g);R!==-1&&await e.removeMealFromDay(w,R)},u=async m=>{const p=s(m);await e.clearDay(p)},d=async()=>{await e.clearWeekPlan()};return{weekPlan:i,isLoading:e.isLoading,error:e.error,addMealToDay:o,removeMealFromDay:l,clearDay:u,clearWeek:d}},uc=[{key:"monday",label:"Montag",short:"Mo"},{key:"tuesday",label:"Dienstag",short:"Di"},{key:"wednesday",label:"Mittwoch",short:"Mi"},{key:"thursday",label:"Donnerstag",short:"Do"},{key:"friday",label:"Freitag",short:"Fr"},{key:"saturday",label:"Samstag",short:"Sa"},{key:"sunday",label:"Sonntag",short:"So"}],Kg=[{key:"breakfast",label:"Frühstück",emoji:"🥐"},{key:"lunch",label:"Mittagessen",emoji:"🍽️"},{key:"dinner",label:"Abendessen",emoji:"🍝"},{key:"snack",label:"Snack",emoji:"🍪"}],GA=()=>{var T;const{currentHousehold:t}=So(),{weekPlan:e,addMealToDay:n,removeMealFromDay:r,clearDay:s,clearWeek:i,isLoading:o}=WA(t==null?void 0:t.id),{recipes:l}=wf(),[u,d]=B.useState(null),[m,p]=B.useState("lunch"),g=y=>{u&&(n(u,{recipeId:y,mealType:m}),d(null))},w=(y,k,D)=>{r(y,k,D)},I=y=>{var k;confirm(`Möchtest du alle Mahlzeiten für ${(k=uc.find(D=>D.key===y))==null?void 0:k.label} löschen?`)&&s(y)},R=()=>{confirm("Möchtest du den gesamten Wochenplan löschen?")&&i()},C=y=>l.find(k=>k.id===y);return c.jsxs("div",{className:"max-w-7xl mx-auto",children:[c.jsxs("div",{className:"text-center mb-8",children:[c.jsxs("h2",{className:"text-4xl font-bold text-gray-100 mb-2 flex items-center justify-center gap-3",children:[c.jsx(hv,{className:"h-10 w-10 text-accent-500"}),"Wochenplaner"]}),c.jsx("p",{className:"text-gray-400 mb-4",children:o?"🔄 Synchronisiere mit der Cloud...":"Plane deine Mahlzeiten für die Woche"}),c.jsx("button",{onClick:R,"data-test-id":"clear-week","aria-label":"Wochenplan löschen",className:"text-sm text-red-500 hover:text-red-600 font-medium transition-colors",children:"Wochenplan zurücksetzen"})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-7 gap-4 mb-8",children:uc.map(y=>{const k=e.days[y.key].meals,D=Kg.map(O=>({...O,meals:k.filter(M=>M.mealType===O.key)}));return c.jsxs("div",{className:"bg-slate-700/50 backdrop-blur-sm rounded-2xl p-4 shadow-lg border-2 border-dark-600/50",children:[c.jsxs("div",{className:"flex items-center justify-between mb-3 pb-2 border-b-2 border-slate-600",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"font-bold text-gray-100 hidden lg:block",children:y.label}),c.jsx("h3",{className:"font-bold text-gray-100 lg:hidden",children:y.short})]}),c.jsx("button",{onClick:()=>I(y.key),"data-test-id":`clear-day-${y.key}`,"aria-label":`${y.label} löschen`,className:"p-1 hover:bg-red-600/20 rounded-lg transition-colors text-red-400",children:c.jsx(Os,{className:"h-4 w-4"})})]}),c.jsx("div",{className:"space-y-3",children:D.map(O=>c.jsxs("div",{children:[c.jsxs("div",{className:"text-xs font-medium text-gray-400 mb-1 flex items-center gap-1",children:[c.jsx("span",{children:O.emoji}),c.jsx("span",{className:"hidden lg:inline",children:O.label})]}),c.jsx("div",{className:"space-y-1",children:O.meals.map((M,E)=>{const _=C(M.recipeId);return _?c.jsxs("div",{className:"bg-gradient-to-r from-primary-600/30 to-secondary-600/30 rounded-lg p-2 text-xs group relative border border-primary-500/20",children:[c.jsx("p",{className:"font-medium text-gray-100 pr-6 line-clamp-2",children:_.title}),c.jsx("button",{onClick:()=>w(y.key,M.recipeId,M.mealType),"data-test-id":`remove-meal-${y.key}-${M.recipeId}`,"aria-label":`${_.title} entfernen`,className:"absolute top-1 right-1 p-1 bg-slate-800 rounded opacity-0 group-hover:opacity-100 transition-opacity hover:bg-red-600/20 text-red-400",children:c.jsx(Os,{className:"h-3 w-3"})})]},`${M.recipeId}-${E}`):null})})]},O.key))}),c.jsxs("button",{onClick:()=>d(y.key),"data-test-id":`add-meal-${y.key}`,"aria-label":`Mahlzeit zu ${y.label} hinzufügen`,className:ge("w-full mt-3 py-2 rounded-lg font-medium text-sm transition-all duration-200 flex items-center justify-center gap-2",u===y.key?"bg-accent-500 text-white shadow-lg":"bg-slate-700 text-gray-300 hover:bg-accent-600/20 hover:text-accent-400"),children:[c.jsx(co,{className:"h-4 w-4"}),c.jsx("span",{className:"hidden lg:inline",children:"Hinzufügen"})]})]},y.key)})}),u&&c.jsxs("div",{className:"bg-slate-800/80 backdrop-blur-sm rounded-2xl p-6 shadow-2xl border-2 border-accent-500/30 autumn-glow-gold",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsxs("h3",{className:"text-xl font-bold text-gray-100 flex items-center gap-2",children:[c.jsx(s2,{className:"h-6 w-6 text-accent-500"}),"Rezept für ",(T=uc.find(y=>y.key===u))==null?void 0:T.label," auswählen"]}),c.jsx("button",{onClick:()=>d(null),"data-test-id":"close-recipe-selection","aria-label":"Rezeptauswahl schließen",className:"text-gray-400 hover:text-gray-200",children:"✕"})]}),c.jsxs("div",{className:"mb-4",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-200 mb-2",children:"Mahlzeit"}),c.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:Kg.map(y=>c.jsxs("button",{onClick:()=>p(y.key),"data-test-id":`select-meal-type-${y.key}`,"aria-label":`${y.label} auswählen`,className:ge("py-2 px-3 rounded-lg font-medium text-sm transition-all duration-200",m===y.key?"bg-accent-500 text-white shadow-md":"bg-slate-700 text-gray-300 hover:bg-accent-600/20 hover:text-accent-400"),children:[c.jsx("span",{className:"mr-1",children:y.emoji}),y.label]},y.key))})]}),l.length>0?c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3 max-h-96 overflow-y-auto",children:l.map(y=>c.jsxs("button",{onClick:()=>g(y.id),"data-test-id":`select-recipe-${y.id}`,"aria-label":`${y.title} hinzufügen`,className:"bg-slate-700/80 hover:bg-slate-600/80 rounded-xl p-4 text-left transition-all duration-200 hover:shadow-lg hover:scale-105 border-2 border-slate-600/50 hover:border-accent-500/50",children:[c.jsx("p",{className:"font-bold text-gray-100 mb-1 line-clamp-2",children:y.title}),y.rating&&c.jsxs("p",{className:"text-xs text-gray-400",children:["⭐ ",y.rating,"/5"]})]},y.id))}):c.jsx("div",{className:"text-center py-8 text-gray-400",children:c.jsx("p",{children:"Keine Rezepte vorhanden. Füge zuerst Rezepte hinzu!"})})]})]})},KA={produce:{label:"Obst & Gemüse",emoji:"🥬"},bakery:{label:"Brot & Backwaren",emoji:"🥖"},meat:{label:"Fleisch & Wurst",emoji:"🥩"},deli:{label:"Aufschnitt",emoji:"🥓"},dairy:{label:"Käse & Milchprodukte",emoji:"🧀"},beverages:{label:"Getränke",emoji:"🥤"},pantry:{label:"Konserven & Vorräte",emoji:"🥫"},snacks:{label:"Süßigkeiten & Snacks",emoji:"🍫"},frozen:{label:"Tiefkühlware",emoji:"🧊"},household:{label:"Haushalt & Sonstiges",emoji:"🧹"}},QA=["produce","bakery","meat","deli","dairy","beverages","pantry","snacks","frozen","household"],Qg=t=>{if(t.length===0)return"🛒 Einkaufsliste ist leer";const e=t.filter(r=>!r.checked);if(e.length===0)return"✅ Alle Artikel wurden bereits gekauft!";let n=`🛒 *Einkaufsliste*

`;return QA.forEach(r=>{const s=e.filter(i=>i.category===r);if(s.length>0){const i=KA[r];n+=`${i.emoji} *${i.label}*
`,s.forEach(o=>{const l=o.quantity?` (${o.quantity})`:"";n+=`  • ${o.name}${l}
`}),n+=`
`}}),n+=`📊 Insgesamt: ${e.length} ${e.length===1,"Artikel"}`,n},Yg=[{key:"produce",label:"Obst & Gemüse",emoji:"🥬"},{key:"bakery",label:"Brot & Backwaren",emoji:"🥖"},{key:"meat",label:"Fleisch & Wurst",emoji:"🥩"},{key:"deli",label:"Aufschnitt",emoji:"🥓"},{key:"dairy",label:"Käse & Milchprodukte",emoji:"🧀"},{key:"beverages",label:"Getränke",emoji:"🥤"},{key:"pantry",label:"Konserven & Vorräte",emoji:"🥫"},{key:"snacks",label:"Süßigkeiten & Snacks",emoji:"🍫"},{key:"frozen",label:"Tiefkühlware",emoji:"🧊"},{key:"household",label:"Haushalt & Sonstiges",emoji:"🧹"}],YA=()=>{const{currentHousehold:t}=So(),{items:e,addItem:n,toggleItem:r,removeItem:s,clearCheckedItems:i,clearAllItems:o,isLoading:l}=Gw(t==null?void 0:t.id),[u,d]=B.useState(!1),[m,p]=B.useState(""),[g,w]=B.useState(""),[I,R]=B.useState("produce"),C=x=>{if(x.preventDefault(),!!m.trim()){if(!t){alert("❌ Bitte wähle zuerst einen Haushalt aus!");return}n(m,I,g),p(""),w(""),d(!1)}},T=x=>{p(x.target.value)},y=x=>{w(x.target.value)},k=x=>{R(x.target.value)},D=x=>{r(x)},O=x=>{s(x)},M=()=>{confirm("Möchtest du alle abgehakten Artikel löschen?")&&i()},E=()=>{confirm("Möchtest du die gesamte Einkaufsliste löschen?")&&o()},_=async()=>{const x=Qg(e);try{await navigator.clipboard.writeText(x),alert("✅ Einkaufsliste in Zwischenablage kopiert!")}catch{const ye=document.createElement("textarea");ye.value=x,document.body.appendChild(ye),ye.select(),document.execCommand("copy"),document.body.removeChild(ye),alert("✅ Einkaufsliste kopiert!")}},b=()=>{const x=Qg(e),ye=`https://wa.me/?text=${encodeURIComponent(x)}`;window.open(ye,"_blank")},S=Yg.map(x=>({...x,items:e.filter(Z=>Z.category===x.key)})),A=e.filter(x=>x.checked).length,N=e.length;return c.jsxs("div",{className:"max-w-4xl mx-auto",children:[!t&&c.jsxs("div",{className:"bg-red-900/30 border-2 border-red-500 rounded-xl p-6 mb-6 text-center",children:[c.jsx("p",{className:"text-red-200 text-lg font-bold mb-2",children:"⚠️ Kein Haushalt gewählt!"}),c.jsx("p",{className:"text-red-300 text-sm",children:"Bitte wähle zuerst einen Haushalt aus, um die Einkaufsliste zu nutzen."})]}),c.jsxs("div",{className:"text-center mb-8",children:[c.jsxs("h2",{className:"text-4xl font-bold text-gray-100 mb-2 flex items-center justify-center gap-3",children:[c.jsx(bd,{className:"h-10 w-10 text-primary-500"}),"Einkaufsliste",t&&c.jsxs("span",{className:"text-lg text-gray-400",children:["(",t.icon," ",t.name,")"]})]}),c.jsx("p",{className:"text-gray-300",children:l?"🔄 Synchronisiere mit der Cloud...":N===0?"Füge Artikel zu deiner Einkaufsliste hinzu":c.jsxs(c.Fragment,{children:[A," von ",N," ",N===1?"Artikel":"Artikeln"," gekauft"]})})]}),u?c.jsxs("div",{className:"bg-slate-800/80 backdrop-blur-sm rounded-2xl p-6 shadow-xl border-2 border-primary-500/30 autumn-glow mb-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-100",children:"Neuer Artikel"}),c.jsx("button",{onClick:()=>d(!1),"data-test-id":"close-add-item","aria-label":"Formular schließen",className:"p-2 hover:bg-slate-700 rounded-full transition-colors",children:c.jsx(zt,{className:"h-6 w-6 text-gray-300"})})]}),c.jsxs("form",{onSubmit:C,className:"space-y-4",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"item-name",className:"block text-sm font-medium text-gray-200 mb-1",children:"Artikel *"}),c.jsx("input",{id:"item-name",type:"text",value:m,onChange:T,"data-test-id":"item-name-input","aria-label":"Artikel-Name eingeben",placeholder:"z.B. Tomaten",className:"w-full px-4 py-2 border-2 border-gray-600 rounded-lg focus:border-primary-500 focus:outline-none transition-colors bg-slate-700 text-gray-100 placeholder-gray-400",required:!0,autoFocus:!0})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"item-quantity",className:"block text-sm font-medium text-gray-200 mb-1",children:"Menge (optional)"}),c.jsx("input",{id:"item-quantity",type:"text",value:g,onChange:y,"data-test-id":"item-quantity-input","aria-label":"Menge eingeben",placeholder:"z.B. 500g, 3 Stück",className:"w-full px-4 py-2 border-2 border-gray-600 rounded-lg focus:border-primary-500 focus:outline-none transition-colors bg-slate-700 text-gray-100 placeholder-gray-400"})]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"item-category",className:"block text-sm font-medium text-gray-200 mb-1",children:"Kategorie *"}),c.jsx("select",{id:"item-category",value:I,onChange:k,"data-test-id":"item-category-select","aria-label":"Kategorie auswählen",className:"w-full px-4 py-2 border-2 border-gray-600 rounded-lg focus:border-primary-500 focus:outline-none transition-colors bg-slate-700 text-gray-100",children:Yg.map(x=>c.jsxs("option",{value:x.key,children:[x.emoji," ",x.label]},x.key))})]}),c.jsx("button",{type:"submit","data-test-id":"submit-item","aria-label":"Artikel zur Liste hinzufügen",className:"w-full py-3 rounded-lg font-bold text-white transition-all duration-200 bg-gradient-to-r from-primary-500 to-secondary-500 hover:shadow-lg hover:scale-105",children:"Zur Liste hinzufügen"})]})]}):c.jsxs("button",{onClick:()=>d(!0),"data-test-id":"open-add-item","aria-label":"Artikel hinzufügen",className:"w-full bg-gradient-to-r from-primary-500 to-secondary-500 text-white rounded-2xl p-4 shadow-lg hover:shadow-xl transition-all duration-200 hover:scale-105 flex items-center justify-center gap-3 font-bold text-lg mb-6",children:[c.jsx(co,{className:"h-6 w-6"}),"Artikel hinzufügen"]}),e.length>0&&c.jsxs("div",{className:"space-y-3 mb-6",children:[c.jsxs("div",{className:"flex gap-3",children:[c.jsxs("button",{onClick:_,"data-test-id":"copy-shopping-list","aria-label":"Einkaufsliste kopieren",className:"flex-1 py-3 px-4 bg-gradient-to-r from-primary-500 to-secondary-500 text-white rounded-lg font-medium hover:shadow-lg transition-all duration-200 hover:scale-105 flex items-center justify-center gap-2",children:[c.jsx(a2,{className:"h-5 w-5"}),"Kopieren"]}),c.jsxs("button",{onClick:b,"data-test-id":"share-whatsapp","aria-label":"Per WhatsApp teilen",className:"flex-1 py-3 px-4 bg-gradient-to-r from-green-500 to-green-600 text-white rounded-lg font-medium hover:shadow-lg transition-all duration-200 hover:scale-105 flex items-center justify-center gap-2",children:[c.jsx(y2,{className:"h-5 w-5"}),"WhatsApp"]})]}),c.jsxs("div",{className:"flex gap-3",children:[A>0&&c.jsxs("button",{onClick:M,"data-test-id":"clear-checked","aria-label":"Abgehakte Artikel löschen",className:"flex-1 py-2 px-4 bg-accent-100 text-accent-700 rounded-lg font-medium hover:bg-accent-200 transition-colors text-sm",children:["Abgehakte löschen (",A,")"]}),c.jsx("button",{onClick:E,"data-test-id":"clear-all","aria-label":"Alle Artikel löschen",className:"py-2 px-4 bg-red-100 text-red-600 rounded-lg font-medium hover:bg-red-200 transition-colors text-sm",children:"Alle löschen"})]})]}),e.length>0?c.jsx("div",{className:"space-y-4",children:S.map(x=>x.items.length===0?null:c.jsxs("div",{className:"bg-slate-700/50 backdrop-blur-sm rounded-2xl p-5 shadow-lg border-2 border-dark-600/50",children:[c.jsxs("h3",{className:"font-bold text-gray-100 mb-3 flex items-center gap-2 text-lg",children:[c.jsx("span",{className:"text-2xl",children:x.emoji}),x.label,c.jsxs("span",{className:"text-sm text-gray-300 font-normal ml-auto",children:[x.items.filter(Z=>Z.checked).length,"/",x.items.length]})]}),c.jsx("div",{className:"space-y-2",children:x.items.map(Z=>c.jsxs("div",{className:ge("flex items-center gap-3 p-3 rounded-lg transition-all duration-200 group",Z.checked?"bg-slate-600/30":"bg-slate-600/50 hover:bg-slate-500/50"),children:[c.jsx("button",{onClick:()=>D(Z.id),"data-test-id":`toggle-item-${Z.id}`,"aria-label":Z.checked?"Als nicht gekauft markieren":"Als gekauft markieren",className:"flex-shrink-0 transition-transform hover:scale-110",children:Z.checked?c.jsx(n2,{className:"h-6 w-6 text-accent-500"}):c.jsx(o2,{className:"h-6 w-6 text-gray-300"})}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("p",{className:ge("font-medium",Z.checked?"line-through text-gray-400":"text-white"),children:Z.name}),Z.quantity&&c.jsx("p",{className:ge("text-sm",Z.checked?"text-gray-400":"text-gray-200"),children:Z.quantity})]}),c.jsx("button",{onClick:()=>O(Z.id),"data-test-id":`delete-item-${Z.id}`,"aria-label":`${Z.name} löschen`,className:"flex-shrink-0 p-2 rounded-lg opacity-0 group-hover:opacity-100 transition-opacity hover:bg-red-100 text-red-500",children:c.jsx(Os,{className:"h-4 w-4"})})]},Z.id))})]},x.key))}):c.jsxs("div",{className:"bg-slate-800/80 backdrop-blur-sm rounded-2xl p-12 text-center shadow-lg border border-dark-600/50",children:[c.jsx("div",{className:"text-6xl mb-4",children:"🛒"}),c.jsx("h3",{className:"text-2xl font-bold text-gray-200 mb-2",children:"Deine Einkaufsliste ist leer"}),c.jsx("p",{className:"text-gray-300",children:"Füge Artikel hinzu und sie werden nach Supermarkt-Kategorien sortiert!"})]})]})},XA=()=>{const{households:t,setCurrentHousehold:e,hasSelectedHousehold:n}=So(),[r,s]=B.useState(null);if(n)return null;const i=l=>{s(l)},o=()=>{r&&e(r)};return c.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm z-50 overflow-y-auto",children:c.jsx("div",{className:"min-h-screen flex items-center justify-center p-4 py-8",children:c.jsxs("div",{className:"bg-slate-800 rounded-2xl p-6 md:p-8 max-w-2xl w-full shadow-2xl border-2 border-primary-500/30 max-h-[85vh] overflow-y-auto",children:[c.jsxs("div",{className:"text-center mb-4 md:mb-8",children:[c.jsx("div",{className:"flex justify-center mb-3",children:c.jsx("div",{className:"p-3 bg-primary-600/20 rounded-full",children:c.jsx(mv,{className:"h-8 w-8 md:h-12 md:w-12 text-primary-500"})})}),c.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-gray-100 mb-2",children:"Willkommen bei FoodFlash! 🎉"}),c.jsx("p",{className:"text-gray-300 text-base md:text-lg",children:"Welcher Haushalt bist du?"}),c.jsxs("p",{className:"text-gray-400 text-xs md:text-sm mt-2",children:["Jeder Haushalt hat seine eigene Einkaufsliste und Wochenplanung.",c.jsx("br",{className:"hidden md:block"}),c.jsx("span",{className:"md:inline",children:" "}),"Rezepte werden mit allen geteilt! 👨‍👩‍👧‍👦"]})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 mb-4",children:t.map(l=>c.jsxs("button",{onClick:()=>i(l),"data-test-id":`select-${l.id}`,"aria-label":`${l.name} auswählen`,className:ge("relative p-4 md:p-6 rounded-xl border-2 transition-all duration-200","hover:scale-105 hover:shadow-xl",(r==null?void 0:r.id)===l.id?"border-primary-500 bg-primary-600/20":"border-gray-600 bg-slate-700/50 hover:border-primary-500/50"),children:[(r==null?void 0:r.id)===l.id&&c.jsx("div",{className:"absolute top-2 right-2 bg-primary-500 text-white p-1 rounded-full",children:c.jsx(r2,{className:"h-4 w-4"})}),c.jsx("div",{className:"text-4xl md:text-5xl mb-2 md:mb-3",children:l.icon}),c.jsx("h3",{className:"text-base md:text-lg font-bold text-gray-100 mb-1",children:l.name}),c.jsx("p",{className:"text-xs text-gray-400",children:"Eigene Listen & Planung"})]},l.id))}),c.jsx("div",{className:"bg-blue-900/30 border border-blue-500/30 rounded-lg p-3 mb-4",children:c.jsxs("p",{className:"text-xs md:text-sm text-blue-200",children:["💡 ",c.jsx("strong",{children:"Tipp:"})," Du kannst den Haushalt später jederzeit wechseln!"]})}),c.jsx("button",{onClick:o,disabled:!r,"data-test-id":"confirm-household","aria-label":"Haushalt bestätigen",className:ge("w-full py-3 md:py-4 rounded-xl font-bold text-base md:text-lg transition-all duration-200",r?"bg-gradient-to-r from-primary-500 to-secondary-500 text-white hover:shadow-xl hover:scale-105":"bg-gray-700 text-gray-500 cursor-not-allowed"),children:r?`${r.icon} ${r.name} auswählen`:"Bitte wähle einen Haushalt"}),c.jsx("p",{className:"text-center text-xs text-gray-500 mt-3",children:"Diese Einstellung wird auf deinem Gerät gespeichert"})]})})})},Xg="foodflash_migrated_to_firebase",JA=async()=>{if(localStorage.getItem(Xg)){console.log("✅ Daten bereits zu Firebase migriert");return}console.log("🔄 Starte Migration von localStorage zu Firebase...");try{await ZA(),await eR(),localStorage.setItem(Xg,"true"),console.log("✅ Migration erfolgreich abgeschlossen!")}catch(t){throw console.error("❌ Fehler bei Migration:",t),t}};async function ZA(){const t=localStorage.getItem("foodflash_recipes");if(!t){console.log("ℹ️ Keine Rezepte in localStorage gefunden");return}const e=JSON.parse(t);if(e.length===0){console.log("ℹ️ Keine Rezepte zum Migrieren");return}const n=vr(Qe,"recipes");if((await hf(n)).size>0){console.log("ℹ️ Firebase hat bereits Rezepte, überspringe Migration");return}console.log(`📦 Migriere ${e.length} Rezepte...`);for(const s of e){const{id:i,createdAt:o,...l}=s;await Lo(n,{...l,ingredients:s.ingredients||[],comments:s.comments||[],createdAt:Kr()})}console.log(`✅ ${e.length} Rezepte migriert`)}async function eR(){const t=localStorage.getItem("foodflash_shopping");if(!t){console.log("ℹ️ Keine Einkaufsliste in localStorage gefunden");return}const e=JSON.parse(t);if(e.length===0){console.log("ℹ️ Keine Einkaufsartikel zum Migrieren");return}const n=vr(Qe,"shoppingList");if((await hf(n)).size>0){console.log("ℹ️ Firebase hat bereits Einkaufsliste, überspringe Migration");return}console.log(`🛒 Migriere ${e.length} Einkaufsartikel...`);for(const s of e){const{id:i,...o}=s;await Lo(n,{...o,addedAt:Kr()})}console.log(`✅ ${e.length} Artikel migriert`)}function tR(){const[t,e]=B.useState("home"),[n,r]=B.useState(null);B.useEffect(()=>{(async()=>{try{await JA()}catch(l){console.error("Migration fehlgeschlagen:",l)}})()},[]);const s=o=>{r(o),e("recipes")},i=()=>{r(null)};return c.jsx(x2,{children:c.jsxs("div",{className:"min-h-screen",children:[c.jsx(XA,{}),c.jsx(E2,{activeTab:t,setActiveTab:e}),c.jsxs("main",{className:"container mx-auto px-4 py-8 pb-16 sm:pb-8",children:[t==="home"&&c.jsx(T2,{onPlatformClick:s}),t==="recipes"&&c.jsx(HA,{platformFilter:n,onClearFilter:i}),t==="planner"&&c.jsx(GA,{}),t==="shopping"&&c.jsx(YA,{})]})]})})}cc.createRoot(document.getElementById("root")).render(c.jsx(U1.StrictMode,{children:c.jsx(tR,{})}));
