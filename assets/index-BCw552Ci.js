(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function x1(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Gg={exports:{}},_l={},Kg={exports:{}},ie={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xo=Symbol.for("react.element"),E1=Symbol.for("react.portal"),T1=Symbol.for("react.fragment"),b1=Symbol.for("react.strict_mode"),S1=Symbol.for("react.profiler"),k1=Symbol.for("react.provider"),I1=Symbol.for("react.context"),A1=Symbol.for("react.forward_ref"),R1=Symbol.for("react.suspense"),N1=Symbol.for("react.memo"),C1=Symbol.for("react.lazy"),mm=Symbol.iterator;function P1(t){return t===null||typeof t!="object"?null:(t=mm&&t[mm]||t["@@iterator"],typeof t=="function"?t:null)}var Qg={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Yg=Object.assign,Xg={};function Hs(t,e,n){this.props=t,this.context=e,this.refs=Xg,this.updater=n||Qg}Hs.prototype.isReactComponent={};Hs.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Hs.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Jg(){}Jg.prototype=Hs.prototype;function Sh(t,e,n){this.props=t,this.context=e,this.refs=Xg,this.updater=n||Qg}var kh=Sh.prototype=new Jg;kh.constructor=Sh;Yg(kh,Hs.prototype);kh.isPureReactComponent=!0;var pm=Array.isArray,Zg=Object.prototype.hasOwnProperty,Ih={current:null},ey={key:!0,ref:!0,__self:!0,__source:!0};function ty(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)Zg.call(e,r)&&!ey.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var u=Array(l),d=0;d<l;d++)u[d]=arguments[d+2];s.children=u}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:xo,type:t,key:i,ref:o,props:s,_owner:Ih.current}}function D1(t,e){return{$$typeof:xo,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Ah(t){return typeof t=="object"&&t!==null&&t.$$typeof===xo}function j1(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var gm=/\/+/g;function xu(t,e){return typeof t=="object"&&t!==null&&t.key!=null?j1(""+t.key):e.toString(36)}function ga(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case xo:case E1:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+xu(o,0):r,pm(s)?(n="",t!=null&&(n=t.replace(gm,"$&/")+"/"),ga(s,e,n,"",function(d){return d})):s!=null&&(Ah(s)&&(s=D1(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(gm,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",pm(t))for(var l=0;l<t.length;l++){i=t[l];var u=r+xu(i,l);o+=ga(i,e,n,u,s)}else if(u=P1(t),typeof u=="function")for(t=u.call(t),l=0;!(i=t.next()).done;)i=i.value,u=r+xu(i,l++),o+=ga(i,e,n,u,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Wo(t,e,n){if(t==null)return t;var r=[],s=0;return ga(t,r,"","",function(i){return e.call(n,i,s++)}),r}function V1(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var yt={current:null},ya={transition:null},L1={ReactCurrentDispatcher:yt,ReactCurrentBatchConfig:ya,ReactCurrentOwner:Ih};function ny(){throw Error("act(...) is not supported in production builds of React.")}ie.Children={map:Wo,forEach:function(t,e,n){Wo(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Wo(t,function(){e++}),e},toArray:function(t){return Wo(t,function(e){return e})||[]},only:function(t){if(!Ah(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ie.Component=Hs;ie.Fragment=T1;ie.Profiler=S1;ie.PureComponent=Sh;ie.StrictMode=b1;ie.Suspense=R1;ie.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=L1;ie.act=ny;ie.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Yg({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Ih.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)Zg.call(e,u)&&!ey.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var d=0;d<u;d++)l[d]=arguments[d+2];r.children=l}return{$$typeof:xo,type:t.type,key:s,ref:i,props:r,_owner:o}};ie.createContext=function(t){return t={$$typeof:I1,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:k1,_context:t},t.Consumer=t};ie.createElement=ty;ie.createFactory=function(t){var e=ty.bind(null,t);return e.type=t,e};ie.createRef=function(){return{current:null}};ie.forwardRef=function(t){return{$$typeof:A1,render:t}};ie.isValidElement=Ah;ie.lazy=function(t){return{$$typeof:C1,_payload:{_status:-1,_result:t},_init:V1}};ie.memo=function(t,e){return{$$typeof:N1,type:t,compare:e===void 0?null:e}};ie.startTransition=function(t){var e=ya.transition;ya.transition={};try{t()}finally{ya.transition=e}};ie.unstable_act=ny;ie.useCallback=function(t,e){return yt.current.useCallback(t,e)};ie.useContext=function(t){return yt.current.useContext(t)};ie.useDebugValue=function(){};ie.useDeferredValue=function(t){return yt.current.useDeferredValue(t)};ie.useEffect=function(t,e){return yt.current.useEffect(t,e)};ie.useId=function(){return yt.current.useId()};ie.useImperativeHandle=function(t,e,n){return yt.current.useImperativeHandle(t,e,n)};ie.useInsertionEffect=function(t,e){return yt.current.useInsertionEffect(t,e)};ie.useLayoutEffect=function(t,e){return yt.current.useLayoutEffect(t,e)};ie.useMemo=function(t,e){return yt.current.useMemo(t,e)};ie.useReducer=function(t,e,n){return yt.current.useReducer(t,e,n)};ie.useRef=function(t){return yt.current.useRef(t)};ie.useState=function(t){return yt.current.useState(t)};ie.useSyncExternalStore=function(t,e,n){return yt.current.useSyncExternalStore(t,e,n)};ie.useTransition=function(){return yt.current.useTransition()};ie.version="18.3.1";Kg.exports=ie;var B=Kg.exports;const M1=x1(B);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var O1=B,F1=Symbol.for("react.element"),U1=Symbol.for("react.fragment"),z1=Object.prototype.hasOwnProperty,B1=O1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,$1={key:!0,ref:!0,__self:!0,__source:!0};function ry(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)z1.call(e,r)&&!$1.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:F1,type:t,key:i,ref:o,props:s,_owner:B1.current}}_l.Fragment=U1;_l.jsx=ry;_l.jsxs=ry;Gg.exports=_l;var c=Gg.exports,ic={},sy={exports:{}},jt={},iy={exports:{}},oy={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(U,Q){var q=U.length;U.push(Q);e:for(;0<q;){var K=q-1>>>1,J=U[K];if(0<s(J,Q))U[K]=Q,U[q]=J,q=K;else break e}}function n(U){return U.length===0?null:U[0]}function r(U){if(U.length===0)return null;var Q=U[0],q=U.pop();if(q!==Q){U[0]=q;e:for(var K=0,J=U.length,G=J>>>1;K<G;){var se=2*(K+1)-1,ze=U[se],_e=se+1,_t=U[_e];if(0>s(ze,q))_e<J&&0>s(_t,ze)?(U[K]=_t,U[_e]=q,K=_e):(U[K]=ze,U[se]=q,K=se);else if(_e<J&&0>s(_t,q))U[K]=_t,U[_e]=q,K=_e;else break e}}return Q}function s(U,Q){var q=U.sortIndex-Q.sortIndex;return q!==0?q:U.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var u=[],d=[],m=1,p=null,g=3,x=!1,k=!1,R=!1,P=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(U){for(var Q=n(d);Q!==null;){if(Q.callback===null)r(d);else if(Q.startTime<=U)r(d),Q.sortIndex=Q.expirationTime,e(u,Q);else break;Q=n(d)}}function D(U){if(R=!1,S(U),!k)if(n(u)!==null)k=!0,Ue(M);else{var Q=n(d);Q!==null&&ne(D,Q.startTime-U)}}function M(U,Q){k=!1,R&&(R=!1,T(_),_=-1),x=!0;var q=g;try{for(S(Q),p=n(u);p!==null&&(!(p.expirationTime>Q)||U&&!A());){var K=p.callback;if(typeof K=="function"){p.callback=null,g=p.priorityLevel;var J=K(p.expirationTime<=Q);Q=t.unstable_now(),typeof J=="function"?p.callback=J:p===n(u)&&r(u),S(Q)}else r(u);p=n(u)}if(p!==null)var G=!0;else{var se=n(d);se!==null&&ne(D,se.startTime-Q),G=!1}return G}finally{p=null,g=q,x=!1}}var O=!1,E=null,_=-1,b=5,I=-1;function A(){return!(t.unstable_now()-I<b)}function N(){if(E!==null){var U=t.unstable_now();I=U;var Q=!0;try{Q=E(!0,U)}finally{Q?w():(O=!1,E=null)}}else O=!1}var w;if(typeof y=="function")w=function(){y(N)};else if(typeof MessageChannel<"u"){var Z=new MessageChannel,ge=Z.port2;Z.port1.onmessage=N,w=function(){ge.postMessage(null)}}else w=function(){P(N,0)};function Ue(U){E=U,O||(O=!0,w())}function ne(U,Q){_=P(function(){U(t.unstable_now())},Q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(U){U.callback=null},t.unstable_continueExecution=function(){k||x||(k=!0,Ue(M))},t.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<U?Math.floor(1e3/U):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(U){switch(g){case 1:case 2:case 3:var Q=3;break;default:Q=g}var q=g;g=Q;try{return U()}finally{g=q}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(U,Q){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var q=g;g=U;try{return Q()}finally{g=q}},t.unstable_scheduleCallback=function(U,Q,q){var K=t.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?K+q:K):q=K,U){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=q+J,U={id:m++,callback:Q,priorityLevel:U,startTime:q,expirationTime:J,sortIndex:-1},q>K?(U.sortIndex=q,e(d,U),n(u)===null&&U===n(d)&&(R?(T(_),_=-1):R=!0,ne(D,q-K))):(U.sortIndex=J,e(u,U),k||x||(k=!0,Ue(M))),U},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(U){var Q=g;return function(){var q=g;g=Q;try{return U.apply(this,arguments)}finally{g=q}}}})(oy);iy.exports=oy;var H1=iy.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var q1=B,Dt=H1;function F(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var ay=new Set,Wi={};function Qr(t,e){As(t,e),As(t+"Capture",e)}function As(t,e){for(Wi[t]=e,t=0;t<e.length;t++)ay.add(e[t])}var En=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),oc=Object.prototype.hasOwnProperty,W1=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ym={},vm={};function G1(t){return oc.call(vm,t)?!0:oc.call(ym,t)?!1:W1.test(t)?vm[t]=!0:(ym[t]=!0,!1)}function K1(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Q1(t,e,n,r){if(e===null||typeof e>"u"||K1(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function vt(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var tt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){tt[t]=new vt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];tt[e]=new vt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){tt[t]=new vt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){tt[t]=new vt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){tt[t]=new vt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){tt[t]=new vt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){tt[t]=new vt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){tt[t]=new vt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){tt[t]=new vt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Rh=/[\-:]([a-z])/g;function Nh(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Rh,Nh);tt[e]=new vt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Rh,Nh);tt[e]=new vt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Rh,Nh);tt[e]=new vt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){tt[t]=new vt(t,1,!1,t.toLowerCase(),null,!1,!1)});tt.xlinkHref=new vt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){tt[t]=new vt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Ch(t,e,n,r){var s=tt.hasOwnProperty(e)?tt[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Q1(e,n,s,r)&&(n=null),r||s===null?G1(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Rn=q1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Go=Symbol.for("react.element"),us=Symbol.for("react.portal"),cs=Symbol.for("react.fragment"),Ph=Symbol.for("react.strict_mode"),ac=Symbol.for("react.profiler"),ly=Symbol.for("react.provider"),uy=Symbol.for("react.context"),Dh=Symbol.for("react.forward_ref"),lc=Symbol.for("react.suspense"),uc=Symbol.for("react.suspense_list"),jh=Symbol.for("react.memo"),Mn=Symbol.for("react.lazy"),cy=Symbol.for("react.offscreen"),_m=Symbol.iterator;function mi(t){return t===null||typeof t!="object"?null:(t=_m&&t[_m]||t["@@iterator"],typeof t=="function"?t:null)}var Ie=Object.assign,Eu;function Ti(t){if(Eu===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Eu=e&&e[1]||""}return`
`+Eu+t}var Tu=!1;function bu(t,e){if(!t||Tu)return"";Tu=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var u=`
`+s[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=l);break}}}finally{Tu=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ti(t):""}function Y1(t){switch(t.tag){case 5:return Ti(t.type);case 16:return Ti("Lazy");case 13:return Ti("Suspense");case 19:return Ti("SuspenseList");case 0:case 2:case 15:return t=bu(t.type,!1),t;case 11:return t=bu(t.type.render,!1),t;case 1:return t=bu(t.type,!0),t;default:return""}}function cc(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case cs:return"Fragment";case us:return"Portal";case ac:return"Profiler";case Ph:return"StrictMode";case lc:return"Suspense";case uc:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case uy:return(t.displayName||"Context")+".Consumer";case ly:return(t._context.displayName||"Context")+".Provider";case Dh:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case jh:return e=t.displayName||null,e!==null?e:cc(t.type)||"Memo";case Mn:e=t._payload,t=t._init;try{return cc(t(e))}catch{}}return null}function X1(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return cc(e);case 8:return e===Ph?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ir(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function hy(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function J1(t){var e=hy(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Ko(t){t._valueTracker||(t._valueTracker=J1(t))}function dy(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=hy(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function ja(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function hc(t,e){var n=e.checked;return Ie({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function wm(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=ir(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function fy(t,e){e=e.checked,e!=null&&Ch(t,"checked",e,!1)}function dc(t,e){fy(t,e);var n=ir(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?fc(t,e.type,n):e.hasOwnProperty("defaultValue")&&fc(t,e.type,ir(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function xm(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function fc(t,e,n){(e!=="number"||ja(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var bi=Array.isArray;function xs(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+ir(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function mc(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(F(91));return Ie({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Em(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(F(92));if(bi(n)){if(1<n.length)throw Error(F(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ir(n)}}function my(t,e){var n=ir(e.value),r=ir(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Tm(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function py(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function pc(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?py(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Qo,gy=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Qo=Qo||document.createElement("div"),Qo.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Qo.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Gi(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ci={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Z1=["Webkit","ms","Moz","O"];Object.keys(Ci).forEach(function(t){Z1.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ci[e]=Ci[t]})});function yy(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ci.hasOwnProperty(t)&&Ci[t]?(""+e).trim():e+"px"}function vy(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=yy(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var ex=Ie({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function gc(t,e){if(e){if(ex[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(F(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(F(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(F(61))}if(e.style!=null&&typeof e.style!="object")throw Error(F(62))}}function yc(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var vc=null;function Vh(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var _c=null,Es=null,Ts=null;function bm(t){if(t=bo(t)){if(typeof _c!="function")throw Error(F(280));var e=t.stateNode;e&&(e=bl(e),_c(t.stateNode,t.type,e))}}function _y(t){Es?Ts?Ts.push(t):Ts=[t]:Es=t}function wy(){if(Es){var t=Es,e=Ts;if(Ts=Es=null,bm(t),e)for(t=0;t<e.length;t++)bm(e[t])}}function xy(t,e){return t(e)}function Ey(){}var Su=!1;function Ty(t,e,n){if(Su)return t(e,n);Su=!0;try{return xy(t,e,n)}finally{Su=!1,(Es!==null||Ts!==null)&&(Ey(),wy())}}function Ki(t,e){var n=t.stateNode;if(n===null)return null;var r=bl(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(F(231,e,typeof n));return n}var wc=!1;if(En)try{var pi={};Object.defineProperty(pi,"passive",{get:function(){wc=!0}}),window.addEventListener("test",pi,pi),window.removeEventListener("test",pi,pi)}catch{wc=!1}function tx(t,e,n,r,s,i,o,l,u){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(m){this.onError(m)}}var Pi=!1,Va=null,La=!1,xc=null,nx={onError:function(t){Pi=!0,Va=t}};function rx(t,e,n,r,s,i,o,l,u){Pi=!1,Va=null,tx.apply(nx,arguments)}function sx(t,e,n,r,s,i,o,l,u){if(rx.apply(this,arguments),Pi){if(Pi){var d=Va;Pi=!1,Va=null}else throw Error(F(198));La||(La=!0,xc=d)}}function Yr(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function by(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Sm(t){if(Yr(t)!==t)throw Error(F(188))}function ix(t){var e=t.alternate;if(!e){if(e=Yr(t),e===null)throw Error(F(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Sm(s),t;if(i===r)return Sm(s),e;i=i.sibling}throw Error(F(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o)throw Error(F(189))}}if(n.alternate!==r)throw Error(F(190))}if(n.tag!==3)throw Error(F(188));return n.stateNode.current===n?t:e}function Sy(t){return t=ix(t),t!==null?ky(t):null}function ky(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=ky(t);if(e!==null)return e;t=t.sibling}return null}var Iy=Dt.unstable_scheduleCallback,km=Dt.unstable_cancelCallback,ox=Dt.unstable_shouldYield,ax=Dt.unstable_requestPaint,je=Dt.unstable_now,lx=Dt.unstable_getCurrentPriorityLevel,Lh=Dt.unstable_ImmediatePriority,Ay=Dt.unstable_UserBlockingPriority,Ma=Dt.unstable_NormalPriority,ux=Dt.unstable_LowPriority,Ry=Dt.unstable_IdlePriority,wl=null,un=null;function cx(t){if(un&&typeof un.onCommitFiberRoot=="function")try{un.onCommitFiberRoot(wl,t,void 0,(t.current.flags&128)===128)}catch{}}var Yt=Math.clz32?Math.clz32:fx,hx=Math.log,dx=Math.LN2;function fx(t){return t>>>=0,t===0?32:31-(hx(t)/dx|0)|0}var Yo=64,Xo=4194304;function Si(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Oa(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~s;l!==0?r=Si(l):(i&=o,i!==0&&(r=Si(i)))}else o=n&~s,o!==0?r=Si(o):i!==0&&(r=Si(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Yt(e),s=1<<n,r|=t[n],e&=~s;return r}function mx(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function px(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Yt(i),l=1<<o,u=s[o];u===-1?(!(l&n)||l&r)&&(s[o]=mx(l,e)):u<=e&&(t.expiredLanes|=l),i&=~l}}function Ec(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Ny(){var t=Yo;return Yo<<=1,!(Yo&4194240)&&(Yo=64),t}function ku(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Eo(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Yt(e),t[e]=n}function gx(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Yt(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Mh(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Yt(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var fe=0;function Cy(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Py,Oh,Dy,jy,Vy,Tc=!1,Jo=[],qn=null,Wn=null,Gn=null,Qi=new Map,Yi=new Map,Fn=[],yx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Im(t,e){switch(t){case"focusin":case"focusout":qn=null;break;case"dragenter":case"dragleave":Wn=null;break;case"mouseover":case"mouseout":Gn=null;break;case"pointerover":case"pointerout":Qi.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Yi.delete(e.pointerId)}}function gi(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=bo(e),e!==null&&Oh(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function vx(t,e,n,r,s){switch(e){case"focusin":return qn=gi(qn,t,e,n,r,s),!0;case"dragenter":return Wn=gi(Wn,t,e,n,r,s),!0;case"mouseover":return Gn=gi(Gn,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Qi.set(i,gi(Qi.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Yi.set(i,gi(Yi.get(i)||null,t,e,n,r,s)),!0}return!1}function Ly(t){var e=Nr(t.target);if(e!==null){var n=Yr(e);if(n!==null){if(e=n.tag,e===13){if(e=by(n),e!==null){t.blockedOn=e,Vy(t.priority,function(){Dy(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function va(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=bc(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);vc=r,n.target.dispatchEvent(r),vc=null}else return e=bo(n),e!==null&&Oh(e),t.blockedOn=n,!1;e.shift()}return!0}function Am(t,e,n){va(t)&&n.delete(e)}function _x(){Tc=!1,qn!==null&&va(qn)&&(qn=null),Wn!==null&&va(Wn)&&(Wn=null),Gn!==null&&va(Gn)&&(Gn=null),Qi.forEach(Am),Yi.forEach(Am)}function yi(t,e){t.blockedOn===e&&(t.blockedOn=null,Tc||(Tc=!0,Dt.unstable_scheduleCallback(Dt.unstable_NormalPriority,_x)))}function Xi(t){function e(s){return yi(s,t)}if(0<Jo.length){yi(Jo[0],t);for(var n=1;n<Jo.length;n++){var r=Jo[n];r.blockedOn===t&&(r.blockedOn=null)}}for(qn!==null&&yi(qn,t),Wn!==null&&yi(Wn,t),Gn!==null&&yi(Gn,t),Qi.forEach(e),Yi.forEach(e),n=0;n<Fn.length;n++)r=Fn[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Fn.length&&(n=Fn[0],n.blockedOn===null);)Ly(n),n.blockedOn===null&&Fn.shift()}var bs=Rn.ReactCurrentBatchConfig,Fa=!0;function wx(t,e,n,r){var s=fe,i=bs.transition;bs.transition=null;try{fe=1,Fh(t,e,n,r)}finally{fe=s,bs.transition=i}}function xx(t,e,n,r){var s=fe,i=bs.transition;bs.transition=null;try{fe=4,Fh(t,e,n,r)}finally{fe=s,bs.transition=i}}function Fh(t,e,n,r){if(Fa){var s=bc(t,e,n,r);if(s===null)Lu(t,e,r,Ua,n),Im(t,r);else if(vx(s,t,e,n,r))r.stopPropagation();else if(Im(t,r),e&4&&-1<yx.indexOf(t)){for(;s!==null;){var i=bo(s);if(i!==null&&Py(i),i=bc(t,e,n,r),i===null&&Lu(t,e,r,Ua,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Lu(t,e,r,null,n)}}var Ua=null;function bc(t,e,n,r){if(Ua=null,t=Vh(r),t=Nr(t),t!==null)if(e=Yr(t),e===null)t=null;else if(n=e.tag,n===13){if(t=by(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ua=t,null}function My(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(lx()){case Lh:return 1;case Ay:return 4;case Ma:case ux:return 16;case Ry:return 536870912;default:return 16}default:return 16}}var Bn=null,Uh=null,_a=null;function Oy(){if(_a)return _a;var t,e=Uh,n=e.length,r,s="value"in Bn?Bn.value:Bn.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return _a=s.slice(t,1<r?1-r:void 0)}function wa(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Zo(){return!0}function Rm(){return!1}function Vt(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Zo:Rm,this.isPropagationStopped=Rm,this}return Ie(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Zo)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Zo)},persist:function(){},isPersistent:Zo}),e}var qs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},zh=Vt(qs),To=Ie({},qs,{view:0,detail:0}),Ex=Vt(To),Iu,Au,vi,xl=Ie({},To,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Bh,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==vi&&(vi&&t.type==="mousemove"?(Iu=t.screenX-vi.screenX,Au=t.screenY-vi.screenY):Au=Iu=0,vi=t),Iu)},movementY:function(t){return"movementY"in t?t.movementY:Au}}),Nm=Vt(xl),Tx=Ie({},xl,{dataTransfer:0}),bx=Vt(Tx),Sx=Ie({},To,{relatedTarget:0}),Ru=Vt(Sx),kx=Ie({},qs,{animationName:0,elapsedTime:0,pseudoElement:0}),Ix=Vt(kx),Ax=Ie({},qs,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Rx=Vt(Ax),Nx=Ie({},qs,{data:0}),Cm=Vt(Nx),Cx={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Px={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Dx={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function jx(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Dx[t])?!!e[t]:!1}function Bh(){return jx}var Vx=Ie({},To,{key:function(t){if(t.key){var e=Cx[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=wa(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Px[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Bh,charCode:function(t){return t.type==="keypress"?wa(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?wa(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Lx=Vt(Vx),Mx=Ie({},xl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Pm=Vt(Mx),Ox=Ie({},To,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Bh}),Fx=Vt(Ox),Ux=Ie({},qs,{propertyName:0,elapsedTime:0,pseudoElement:0}),zx=Vt(Ux),Bx=Ie({},xl,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),$x=Vt(Bx),Hx=[9,13,27,32],$h=En&&"CompositionEvent"in window,Di=null;En&&"documentMode"in document&&(Di=document.documentMode);var qx=En&&"TextEvent"in window&&!Di,Fy=En&&(!$h||Di&&8<Di&&11>=Di),Dm=" ",jm=!1;function Uy(t,e){switch(t){case"keyup":return Hx.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zy(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var hs=!1;function Wx(t,e){switch(t){case"compositionend":return zy(e);case"keypress":return e.which!==32?null:(jm=!0,Dm);case"textInput":return t=e.data,t===Dm&&jm?null:t;default:return null}}function Gx(t,e){if(hs)return t==="compositionend"||!$h&&Uy(t,e)?(t=Oy(),_a=Uh=Bn=null,hs=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Fy&&e.locale!=="ko"?null:e.data;default:return null}}var Kx={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Kx[t.type]:e==="textarea"}function By(t,e,n,r){_y(r),e=za(e,"onChange"),0<e.length&&(n=new zh("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var ji=null,Ji=null;function Qx(t){Zy(t,0)}function El(t){var e=ms(t);if(dy(e))return t}function Yx(t,e){if(t==="change")return e}var $y=!1;if(En){var Nu;if(En){var Cu="oninput"in document;if(!Cu){var Lm=document.createElement("div");Lm.setAttribute("oninput","return;"),Cu=typeof Lm.oninput=="function"}Nu=Cu}else Nu=!1;$y=Nu&&(!document.documentMode||9<document.documentMode)}function Mm(){ji&&(ji.detachEvent("onpropertychange",Hy),Ji=ji=null)}function Hy(t){if(t.propertyName==="value"&&El(Ji)){var e=[];By(e,Ji,t,Vh(t)),Ty(Qx,e)}}function Xx(t,e,n){t==="focusin"?(Mm(),ji=e,Ji=n,ji.attachEvent("onpropertychange",Hy)):t==="focusout"&&Mm()}function Jx(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return El(Ji)}function Zx(t,e){if(t==="click")return El(e)}function eE(t,e){if(t==="input"||t==="change")return El(e)}function tE(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Jt=typeof Object.is=="function"?Object.is:tE;function Zi(t,e){if(Jt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!oc.call(e,s)||!Jt(t[s],e[s]))return!1}return!0}function Om(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Fm(t,e){var n=Om(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Om(n)}}function qy(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?qy(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Wy(){for(var t=window,e=ja();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=ja(t.document)}return e}function Hh(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function nE(t){var e=Wy(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&qy(n.ownerDocument.documentElement,n)){if(r!==null&&Hh(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=Fm(n,i);var o=Fm(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var rE=En&&"documentMode"in document&&11>=document.documentMode,ds=null,Sc=null,Vi=null,kc=!1;function Um(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;kc||ds==null||ds!==ja(r)||(r=ds,"selectionStart"in r&&Hh(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Vi&&Zi(Vi,r)||(Vi=r,r=za(Sc,"onSelect"),0<r.length&&(e=new zh("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=ds)))}function ea(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var fs={animationend:ea("Animation","AnimationEnd"),animationiteration:ea("Animation","AnimationIteration"),animationstart:ea("Animation","AnimationStart"),transitionend:ea("Transition","TransitionEnd")},Pu={},Gy={};En&&(Gy=document.createElement("div").style,"AnimationEvent"in window||(delete fs.animationend.animation,delete fs.animationiteration.animation,delete fs.animationstart.animation),"TransitionEvent"in window||delete fs.transitionend.transition);function Tl(t){if(Pu[t])return Pu[t];if(!fs[t])return t;var e=fs[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Gy)return Pu[t]=e[n];return t}var Ky=Tl("animationend"),Qy=Tl("animationiteration"),Yy=Tl("animationstart"),Xy=Tl("transitionend"),Jy=new Map,zm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function pr(t,e){Jy.set(t,e),Qr(e,[t])}for(var Du=0;Du<zm.length;Du++){var ju=zm[Du],sE=ju.toLowerCase(),iE=ju[0].toUpperCase()+ju.slice(1);pr(sE,"on"+iE)}pr(Ky,"onAnimationEnd");pr(Qy,"onAnimationIteration");pr(Yy,"onAnimationStart");pr("dblclick","onDoubleClick");pr("focusin","onFocus");pr("focusout","onBlur");pr(Xy,"onTransitionEnd");As("onMouseEnter",["mouseout","mouseover"]);As("onMouseLeave",["mouseout","mouseover"]);As("onPointerEnter",["pointerout","pointerover"]);As("onPointerLeave",["pointerout","pointerover"]);Qr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Qr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Qr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Qr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Qr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Qr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ki="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),oE=new Set("cancel close invalid load scroll toggle".split(" ").concat(ki));function Bm(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,sx(r,e,void 0,t),t.currentTarget=null}function Zy(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],u=l.instance,d=l.currentTarget;if(l=l.listener,u!==i&&s.isPropagationStopped())break e;Bm(s,l,d),i=u}else for(o=0;o<r.length;o++){if(l=r[o],u=l.instance,d=l.currentTarget,l=l.listener,u!==i&&s.isPropagationStopped())break e;Bm(s,l,d),i=u}}}if(La)throw t=xc,La=!1,xc=null,t}function xe(t,e){var n=e[Cc];n===void 0&&(n=e[Cc]=new Set);var r=t+"__bubble";n.has(r)||(e0(e,t,2,!1),n.add(r))}function Vu(t,e,n){var r=0;e&&(r|=4),e0(n,t,r,e)}var ta="_reactListening"+Math.random().toString(36).slice(2);function eo(t){if(!t[ta]){t[ta]=!0,ay.forEach(function(n){n!=="selectionchange"&&(oE.has(n)||Vu(n,!1,t),Vu(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ta]||(e[ta]=!0,Vu("selectionchange",!1,e))}}function e0(t,e,n,r){switch(My(e)){case 1:var s=wx;break;case 4:s=xx;break;default:s=Fh}n=s.bind(null,e,n,t),s=void 0,!wc||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Lu(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;o=o.return}for(;l!==null;){if(o=Nr(l),o===null)return;if(u=o.tag,u===5||u===6){r=i=o;continue e}l=l.parentNode}}r=r.return}Ty(function(){var d=i,m=Vh(n),p=[];e:{var g=Jy.get(t);if(g!==void 0){var x=zh,k=t;switch(t){case"keypress":if(wa(n)===0)break e;case"keydown":case"keyup":x=Lx;break;case"focusin":k="focus",x=Ru;break;case"focusout":k="blur",x=Ru;break;case"beforeblur":case"afterblur":x=Ru;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":x=Nm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":x=bx;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":x=Fx;break;case Ky:case Qy:case Yy:x=Ix;break;case Xy:x=zx;break;case"scroll":x=Ex;break;case"wheel":x=$x;break;case"copy":case"cut":case"paste":x=Rx;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":x=Pm}var R=(e&4)!==0,P=!R&&t==="scroll",T=R?g!==null?g+"Capture":null:g;R=[];for(var y=d,S;y!==null;){S=y;var D=S.stateNode;if(S.tag===5&&D!==null&&(S=D,T!==null&&(D=Ki(y,T),D!=null&&R.push(to(y,D,S)))),P)break;y=y.return}0<R.length&&(g=new x(g,k,null,n,m),p.push({event:g,listeners:R}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",x=t==="mouseout"||t==="pointerout",g&&n!==vc&&(k=n.relatedTarget||n.fromElement)&&(Nr(k)||k[Tn]))break e;if((x||g)&&(g=m.window===m?m:(g=m.ownerDocument)?g.defaultView||g.parentWindow:window,x?(k=n.relatedTarget||n.toElement,x=d,k=k?Nr(k):null,k!==null&&(P=Yr(k),k!==P||k.tag!==5&&k.tag!==6)&&(k=null)):(x=null,k=d),x!==k)){if(R=Nm,D="onMouseLeave",T="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(R=Pm,D="onPointerLeave",T="onPointerEnter",y="pointer"),P=x==null?g:ms(x),S=k==null?g:ms(k),g=new R(D,y+"leave",x,n,m),g.target=P,g.relatedTarget=S,D=null,Nr(m)===d&&(R=new R(T,y+"enter",k,n,m),R.target=S,R.relatedTarget=P,D=R),P=D,x&&k)t:{for(R=x,T=k,y=0,S=R;S;S=ss(S))y++;for(S=0,D=T;D;D=ss(D))S++;for(;0<y-S;)R=ss(R),y--;for(;0<S-y;)T=ss(T),S--;for(;y--;){if(R===T||T!==null&&R===T.alternate)break t;R=ss(R),T=ss(T)}R=null}else R=null;x!==null&&$m(p,g,x,R,!1),k!==null&&P!==null&&$m(p,P,k,R,!0)}}e:{if(g=d?ms(d):window,x=g.nodeName&&g.nodeName.toLowerCase(),x==="select"||x==="input"&&g.type==="file")var M=Yx;else if(Vm(g))if($y)M=eE;else{M=Jx;var O=Xx}else(x=g.nodeName)&&x.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(M=Zx);if(M&&(M=M(t,d))){By(p,M,n,m);break e}O&&O(t,g,d),t==="focusout"&&(O=g._wrapperState)&&O.controlled&&g.type==="number"&&fc(g,"number",g.value)}switch(O=d?ms(d):window,t){case"focusin":(Vm(O)||O.contentEditable==="true")&&(ds=O,Sc=d,Vi=null);break;case"focusout":Vi=Sc=ds=null;break;case"mousedown":kc=!0;break;case"contextmenu":case"mouseup":case"dragend":kc=!1,Um(p,n,m);break;case"selectionchange":if(rE)break;case"keydown":case"keyup":Um(p,n,m)}var E;if($h)e:{switch(t){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else hs?Uy(t,n)&&(_="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(_="onCompositionStart");_&&(Fy&&n.locale!=="ko"&&(hs||_!=="onCompositionStart"?_==="onCompositionEnd"&&hs&&(E=Oy()):(Bn=m,Uh="value"in Bn?Bn.value:Bn.textContent,hs=!0)),O=za(d,_),0<O.length&&(_=new Cm(_,t,null,n,m),p.push({event:_,listeners:O}),E?_.data=E:(E=zy(n),E!==null&&(_.data=E)))),(E=qx?Wx(t,n):Gx(t,n))&&(d=za(d,"onBeforeInput"),0<d.length&&(m=new Cm("onBeforeInput","beforeinput",null,n,m),p.push({event:m,listeners:d}),m.data=E))}Zy(p,e)})}function to(t,e,n){return{instance:t,listener:e,currentTarget:n}}function za(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Ki(t,n),i!=null&&r.unshift(to(t,i,s)),i=Ki(t,e),i!=null&&r.push(to(t,i,s))),t=t.return}return r}function ss(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function $m(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var l=n,u=l.alternate,d=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&d!==null&&(l=d,s?(u=Ki(n,i),u!=null&&o.unshift(to(n,u,l))):s||(u=Ki(n,i),u!=null&&o.push(to(n,u,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var aE=/\r\n?/g,lE=/\u0000|\uFFFD/g;function Hm(t){return(typeof t=="string"?t:""+t).replace(aE,`
`).replace(lE,"")}function na(t,e,n){if(e=Hm(e),Hm(t)!==e&&n)throw Error(F(425))}function Ba(){}var Ic=null,Ac=null;function Rc(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Nc=typeof setTimeout=="function"?setTimeout:void 0,uE=typeof clearTimeout=="function"?clearTimeout:void 0,qm=typeof Promise=="function"?Promise:void 0,cE=typeof queueMicrotask=="function"?queueMicrotask:typeof qm<"u"?function(t){return qm.resolve(null).then(t).catch(hE)}:Nc;function hE(t){setTimeout(function(){throw t})}function Mu(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Xi(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Xi(e)}function Kn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Wm(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ws=Math.random().toString(36).slice(2),an="__reactFiber$"+Ws,no="__reactProps$"+Ws,Tn="__reactContainer$"+Ws,Cc="__reactEvents$"+Ws,dE="__reactListeners$"+Ws,fE="__reactHandles$"+Ws;function Nr(t){var e=t[an];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Tn]||n[an]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Wm(t);t!==null;){if(n=t[an])return n;t=Wm(t)}return e}t=n,n=t.parentNode}return null}function bo(t){return t=t[an]||t[Tn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ms(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(F(33))}function bl(t){return t[no]||null}var Pc=[],ps=-1;function gr(t){return{current:t}}function Te(t){0>ps||(t.current=Pc[ps],Pc[ps]=null,ps--)}function ve(t,e){ps++,Pc[ps]=t.current,t.current=e}var or={},ct=gr(or),bt=gr(!1),zr=or;function Rs(t,e){var n=t.type.contextTypes;if(!n)return or;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function St(t){return t=t.childContextTypes,t!=null}function $a(){Te(bt),Te(ct)}function Gm(t,e,n){if(ct.current!==or)throw Error(F(168));ve(ct,e),ve(bt,n)}function t0(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(F(108,X1(t)||"Unknown",s));return Ie({},n,r)}function Ha(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||or,zr=ct.current,ve(ct,t),ve(bt,bt.current),!0}function Km(t,e,n){var r=t.stateNode;if(!r)throw Error(F(169));n?(t=t0(t,e,zr),r.__reactInternalMemoizedMergedChildContext=t,Te(bt),Te(ct),ve(ct,t)):Te(bt),ve(bt,n)}var vn=null,Sl=!1,Ou=!1;function n0(t){vn===null?vn=[t]:vn.push(t)}function mE(t){Sl=!0,n0(t)}function yr(){if(!Ou&&vn!==null){Ou=!0;var t=0,e=fe;try{var n=vn;for(fe=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}vn=null,Sl=!1}catch(s){throw vn!==null&&(vn=vn.slice(t+1)),Iy(Lh,yr),s}finally{fe=e,Ou=!1}}return null}var gs=[],ys=0,qa=null,Wa=0,Lt=[],Mt=0,Br=null,_n=1,wn="";function kr(t,e){gs[ys++]=Wa,gs[ys++]=qa,qa=t,Wa=e}function r0(t,e,n){Lt[Mt++]=_n,Lt[Mt++]=wn,Lt[Mt++]=Br,Br=t;var r=_n;t=wn;var s=32-Yt(r)-1;r&=~(1<<s),n+=1;var i=32-Yt(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,_n=1<<32-Yt(e)+s|n<<s|r,wn=i+t}else _n=1<<i|n<<s|r,wn=t}function qh(t){t.return!==null&&(kr(t,1),r0(t,1,0))}function Wh(t){for(;t===qa;)qa=gs[--ys],gs[ys]=null,Wa=gs[--ys],gs[ys]=null;for(;t===Br;)Br=Lt[--Mt],Lt[Mt]=null,wn=Lt[--Mt],Lt[Mt]=null,_n=Lt[--Mt],Lt[Mt]=null}var Pt=null,Rt=null,be=!1,Kt=null;function s0(t,e){var n=Ft(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Qm(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Pt=t,Rt=Kn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Pt=t,Rt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Br!==null?{id:_n,overflow:wn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Ft(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Pt=t,Rt=null,!0):!1;default:return!1}}function Dc(t){return(t.mode&1)!==0&&(t.flags&128)===0}function jc(t){if(be){var e=Rt;if(e){var n=e;if(!Qm(t,e)){if(Dc(t))throw Error(F(418));e=Kn(n.nextSibling);var r=Pt;e&&Qm(t,e)?s0(r,n):(t.flags=t.flags&-4097|2,be=!1,Pt=t)}}else{if(Dc(t))throw Error(F(418));t.flags=t.flags&-4097|2,be=!1,Pt=t}}}function Ym(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Pt=t}function ra(t){if(t!==Pt)return!1;if(!be)return Ym(t),be=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Rc(t.type,t.memoizedProps)),e&&(e=Rt)){if(Dc(t))throw i0(),Error(F(418));for(;e;)s0(t,e),e=Kn(e.nextSibling)}if(Ym(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(F(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Rt=Kn(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Rt=null}}else Rt=Pt?Kn(t.stateNode.nextSibling):null;return!0}function i0(){for(var t=Rt;t;)t=Kn(t.nextSibling)}function Ns(){Rt=Pt=null,be=!1}function Gh(t){Kt===null?Kt=[t]:Kt.push(t)}var pE=Rn.ReactCurrentBatchConfig;function _i(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(F(309));var r=n.stateNode}if(!r)throw Error(F(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(F(284));if(!n._owner)throw Error(F(290,t))}return t}function sa(t,e){throw t=Object.prototype.toString.call(e),Error(F(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Xm(t){var e=t._init;return e(t._payload)}function o0(t){function e(T,y){if(t){var S=T.deletions;S===null?(T.deletions=[y],T.flags|=16):S.push(y)}}function n(T,y){if(!t)return null;for(;y!==null;)e(T,y),y=y.sibling;return null}function r(T,y){for(T=new Map;y!==null;)y.key!==null?T.set(y.key,y):T.set(y.index,y),y=y.sibling;return T}function s(T,y){return T=Jn(T,y),T.index=0,T.sibling=null,T}function i(T,y,S){return T.index=S,t?(S=T.alternate,S!==null?(S=S.index,S<y?(T.flags|=2,y):S):(T.flags|=2,y)):(T.flags|=1048576,y)}function o(T){return t&&T.alternate===null&&(T.flags|=2),T}function l(T,y,S,D){return y===null||y.tag!==6?(y=qu(S,T.mode,D),y.return=T,y):(y=s(y,S),y.return=T,y)}function u(T,y,S,D){var M=S.type;return M===cs?m(T,y,S.props.children,D,S.key):y!==null&&(y.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===Mn&&Xm(M)===y.type)?(D=s(y,S.props),D.ref=_i(T,y,S),D.return=T,D):(D=Ia(S.type,S.key,S.props,null,T.mode,D),D.ref=_i(T,y,S),D.return=T,D)}function d(T,y,S,D){return y===null||y.tag!==4||y.stateNode.containerInfo!==S.containerInfo||y.stateNode.implementation!==S.implementation?(y=Wu(S,T.mode,D),y.return=T,y):(y=s(y,S.children||[]),y.return=T,y)}function m(T,y,S,D,M){return y===null||y.tag!==7?(y=Lr(S,T.mode,D,M),y.return=T,y):(y=s(y,S),y.return=T,y)}function p(T,y,S){if(typeof y=="string"&&y!==""||typeof y=="number")return y=qu(""+y,T.mode,S),y.return=T,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Go:return S=Ia(y.type,y.key,y.props,null,T.mode,S),S.ref=_i(T,null,y),S.return=T,S;case us:return y=Wu(y,T.mode,S),y.return=T,y;case Mn:var D=y._init;return p(T,D(y._payload),S)}if(bi(y)||mi(y))return y=Lr(y,T.mode,S,null),y.return=T,y;sa(T,y)}return null}function g(T,y,S,D){var M=y!==null?y.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return M!==null?null:l(T,y,""+S,D);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Go:return S.key===M?u(T,y,S,D):null;case us:return S.key===M?d(T,y,S,D):null;case Mn:return M=S._init,g(T,y,M(S._payload),D)}if(bi(S)||mi(S))return M!==null?null:m(T,y,S,D,null);sa(T,S)}return null}function x(T,y,S,D,M){if(typeof D=="string"&&D!==""||typeof D=="number")return T=T.get(S)||null,l(y,T,""+D,M);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case Go:return T=T.get(D.key===null?S:D.key)||null,u(y,T,D,M);case us:return T=T.get(D.key===null?S:D.key)||null,d(y,T,D,M);case Mn:var O=D._init;return x(T,y,S,O(D._payload),M)}if(bi(D)||mi(D))return T=T.get(S)||null,m(y,T,D,M,null);sa(y,D)}return null}function k(T,y,S,D){for(var M=null,O=null,E=y,_=y=0,b=null;E!==null&&_<S.length;_++){E.index>_?(b=E,E=null):b=E.sibling;var I=g(T,E,S[_],D);if(I===null){E===null&&(E=b);break}t&&E&&I.alternate===null&&e(T,E),y=i(I,y,_),O===null?M=I:O.sibling=I,O=I,E=b}if(_===S.length)return n(T,E),be&&kr(T,_),M;if(E===null){for(;_<S.length;_++)E=p(T,S[_],D),E!==null&&(y=i(E,y,_),O===null?M=E:O.sibling=E,O=E);return be&&kr(T,_),M}for(E=r(T,E);_<S.length;_++)b=x(E,T,_,S[_],D),b!==null&&(t&&b.alternate!==null&&E.delete(b.key===null?_:b.key),y=i(b,y,_),O===null?M=b:O.sibling=b,O=b);return t&&E.forEach(function(A){return e(T,A)}),be&&kr(T,_),M}function R(T,y,S,D){var M=mi(S);if(typeof M!="function")throw Error(F(150));if(S=M.call(S),S==null)throw Error(F(151));for(var O=M=null,E=y,_=y=0,b=null,I=S.next();E!==null&&!I.done;_++,I=S.next()){E.index>_?(b=E,E=null):b=E.sibling;var A=g(T,E,I.value,D);if(A===null){E===null&&(E=b);break}t&&E&&A.alternate===null&&e(T,E),y=i(A,y,_),O===null?M=A:O.sibling=A,O=A,E=b}if(I.done)return n(T,E),be&&kr(T,_),M;if(E===null){for(;!I.done;_++,I=S.next())I=p(T,I.value,D),I!==null&&(y=i(I,y,_),O===null?M=I:O.sibling=I,O=I);return be&&kr(T,_),M}for(E=r(T,E);!I.done;_++,I=S.next())I=x(E,T,_,I.value,D),I!==null&&(t&&I.alternate!==null&&E.delete(I.key===null?_:I.key),y=i(I,y,_),O===null?M=I:O.sibling=I,O=I);return t&&E.forEach(function(N){return e(T,N)}),be&&kr(T,_),M}function P(T,y,S,D){if(typeof S=="object"&&S!==null&&S.type===cs&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case Go:e:{for(var M=S.key,O=y;O!==null;){if(O.key===M){if(M=S.type,M===cs){if(O.tag===7){n(T,O.sibling),y=s(O,S.props.children),y.return=T,T=y;break e}}else if(O.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===Mn&&Xm(M)===O.type){n(T,O.sibling),y=s(O,S.props),y.ref=_i(T,O,S),y.return=T,T=y;break e}n(T,O);break}else e(T,O);O=O.sibling}S.type===cs?(y=Lr(S.props.children,T.mode,D,S.key),y.return=T,T=y):(D=Ia(S.type,S.key,S.props,null,T.mode,D),D.ref=_i(T,y,S),D.return=T,T=D)}return o(T);case us:e:{for(O=S.key;y!==null;){if(y.key===O)if(y.tag===4&&y.stateNode.containerInfo===S.containerInfo&&y.stateNode.implementation===S.implementation){n(T,y.sibling),y=s(y,S.children||[]),y.return=T,T=y;break e}else{n(T,y);break}else e(T,y);y=y.sibling}y=Wu(S,T.mode,D),y.return=T,T=y}return o(T);case Mn:return O=S._init,P(T,y,O(S._payload),D)}if(bi(S))return k(T,y,S,D);if(mi(S))return R(T,y,S,D);sa(T,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,y!==null&&y.tag===6?(n(T,y.sibling),y=s(y,S),y.return=T,T=y):(n(T,y),y=qu(S,T.mode,D),y.return=T,T=y),o(T)):n(T,y)}return P}var Cs=o0(!0),a0=o0(!1),Ga=gr(null),Ka=null,vs=null,Kh=null;function Qh(){Kh=vs=Ka=null}function Yh(t){var e=Ga.current;Te(Ga),t._currentValue=e}function Vc(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Ss(t,e){Ka=t,Kh=vs=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Tt=!0),t.firstContext=null)}function $t(t){var e=t._currentValue;if(Kh!==t)if(t={context:t,memoizedValue:e,next:null},vs===null){if(Ka===null)throw Error(F(308));vs=t,Ka.dependencies={lanes:0,firstContext:t}}else vs=vs.next=t;return e}var Cr=null;function Xh(t){Cr===null?Cr=[t]:Cr.push(t)}function l0(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Xh(e)):(n.next=s.next,s.next=n),e.interleaved=n,bn(t,r)}function bn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var On=!1;function Jh(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function u0(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function xn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Qn(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,he&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,bn(t,n)}return s=r.interleaved,s===null?(e.next=e,Xh(r)):(e.next=s.next,s.next=e),r.interleaved=e,bn(t,n)}function xa(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Mh(t,n)}}function Jm(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Qa(t,e,n,r){var s=t.updateQueue;On=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var u=l,d=u.next;u.next=null,o===null?i=d:o.next=d,o=u;var m=t.alternate;m!==null&&(m=m.updateQueue,l=m.lastBaseUpdate,l!==o&&(l===null?m.firstBaseUpdate=d:l.next=d,m.lastBaseUpdate=u))}if(i!==null){var p=s.baseState;o=0,m=d=u=null,l=i;do{var g=l.lane,x=l.eventTime;if((r&g)===g){m!==null&&(m=m.next={eventTime:x,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var k=t,R=l;switch(g=e,x=n,R.tag){case 1:if(k=R.payload,typeof k=="function"){p=k.call(x,p,g);break e}p=k;break e;case 3:k.flags=k.flags&-65537|128;case 0:if(k=R.payload,g=typeof k=="function"?k.call(x,p,g):k,g==null)break e;p=Ie({},p,g);break e;case 2:On=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,g=s.effects,g===null?s.effects=[l]:g.push(l))}else x={eventTime:x,lane:g,tag:l.tag,payload:l.payload,callback:l.callback,next:null},m===null?(d=m=x,u=p):m=m.next=x,o|=g;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;g=l,l=g.next,g.next=null,s.lastBaseUpdate=g,s.shared.pending=null}}while(!0);if(m===null&&(u=p),s.baseState=u,s.firstBaseUpdate=d,s.lastBaseUpdate=m,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Hr|=o,t.lanes=o,t.memoizedState=p}}function Zm(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(F(191,s));s.call(r)}}}var So={},cn=gr(So),ro=gr(So),so=gr(So);function Pr(t){if(t===So)throw Error(F(174));return t}function Zh(t,e){switch(ve(so,e),ve(ro,t),ve(cn,So),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:pc(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=pc(e,t)}Te(cn),ve(cn,e)}function Ps(){Te(cn),Te(ro),Te(so)}function c0(t){Pr(so.current);var e=Pr(cn.current),n=pc(e,t.type);e!==n&&(ve(ro,t),ve(cn,n))}function ed(t){ro.current===t&&(Te(cn),Te(ro))}var Se=gr(0);function Ya(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Fu=[];function td(){for(var t=0;t<Fu.length;t++)Fu[t]._workInProgressVersionPrimary=null;Fu.length=0}var Ea=Rn.ReactCurrentDispatcher,Uu=Rn.ReactCurrentBatchConfig,$r=0,ke=null,$e=null,Ke=null,Xa=!1,Li=!1,io=0,gE=0;function st(){throw Error(F(321))}function nd(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Jt(t[n],e[n]))return!1;return!0}function rd(t,e,n,r,s,i){if($r=i,ke=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ea.current=t===null||t.memoizedState===null?wE:xE,t=n(r,s),Li){i=0;do{if(Li=!1,io=0,25<=i)throw Error(F(301));i+=1,Ke=$e=null,e.updateQueue=null,Ea.current=EE,t=n(r,s)}while(Li)}if(Ea.current=Ja,e=$e!==null&&$e.next!==null,$r=0,Ke=$e=ke=null,Xa=!1,e)throw Error(F(300));return t}function sd(){var t=io!==0;return io=0,t}function sn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ke===null?ke.memoizedState=Ke=t:Ke=Ke.next=t,Ke}function Ht(){if($e===null){var t=ke.alternate;t=t!==null?t.memoizedState:null}else t=$e.next;var e=Ke===null?ke.memoizedState:Ke.next;if(e!==null)Ke=e,$e=t;else{if(t===null)throw Error(F(310));$e=t,t={memoizedState:$e.memoizedState,baseState:$e.baseState,baseQueue:$e.baseQueue,queue:$e.queue,next:null},Ke===null?ke.memoizedState=Ke=t:Ke=Ke.next=t}return Ke}function oo(t,e){return typeof e=="function"?e(t):e}function zu(t){var e=Ht(),n=e.queue;if(n===null)throw Error(F(311));n.lastRenderedReducer=t;var r=$e,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=o=null,u=null,d=i;do{var m=d.lane;if(($r&m)===m)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var p={lane:m,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(l=u=p,o=r):u=u.next=p,ke.lanes|=m,Hr|=m}d=d.next}while(d!==null&&d!==i);u===null?o=r:u.next=l,Jt(r,e.memoizedState)||(Tt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,ke.lanes|=i,Hr|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Bu(t){var e=Ht(),n=e.queue;if(n===null)throw Error(F(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);Jt(i,e.memoizedState)||(Tt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function h0(){}function d0(t,e){var n=ke,r=Ht(),s=e(),i=!Jt(r.memoizedState,s);if(i&&(r.memoizedState=s,Tt=!0),r=r.queue,id(p0.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Ke!==null&&Ke.memoizedState.tag&1){if(n.flags|=2048,ao(9,m0.bind(null,n,r,s,e),void 0,null),Ye===null)throw Error(F(349));$r&30||f0(n,e,s)}return s}function f0(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ke.updateQueue,e===null?(e={lastEffect:null,stores:null},ke.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function m0(t,e,n,r){e.value=n,e.getSnapshot=r,g0(e)&&y0(t)}function p0(t,e,n){return n(function(){g0(e)&&y0(t)})}function g0(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Jt(t,n)}catch{return!0}}function y0(t){var e=bn(t,1);e!==null&&Xt(e,t,1,-1)}function ep(t){var e=sn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:oo,lastRenderedState:t},e.queue=t,t=t.dispatch=_E.bind(null,ke,t),[e.memoizedState,t]}function ao(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=ke.updateQueue,e===null?(e={lastEffect:null,stores:null},ke.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function v0(){return Ht().memoizedState}function Ta(t,e,n,r){var s=sn();ke.flags|=t,s.memoizedState=ao(1|e,n,void 0,r===void 0?null:r)}function kl(t,e,n,r){var s=Ht();r=r===void 0?null:r;var i=void 0;if($e!==null){var o=$e.memoizedState;if(i=o.destroy,r!==null&&nd(r,o.deps)){s.memoizedState=ao(e,n,i,r);return}}ke.flags|=t,s.memoizedState=ao(1|e,n,i,r)}function tp(t,e){return Ta(8390656,8,t,e)}function id(t,e){return kl(2048,8,t,e)}function _0(t,e){return kl(4,2,t,e)}function w0(t,e){return kl(4,4,t,e)}function x0(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function E0(t,e,n){return n=n!=null?n.concat([t]):null,kl(4,4,x0.bind(null,e,t),n)}function od(){}function T0(t,e){var n=Ht();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&nd(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function b0(t,e){var n=Ht();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&nd(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function S0(t,e,n){return $r&21?(Jt(n,e)||(n=Ny(),ke.lanes|=n,Hr|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Tt=!0),t.memoizedState=n)}function yE(t,e){var n=fe;fe=n!==0&&4>n?n:4,t(!0);var r=Uu.transition;Uu.transition={};try{t(!1),e()}finally{fe=n,Uu.transition=r}}function k0(){return Ht().memoizedState}function vE(t,e,n){var r=Xn(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},I0(t))A0(e,n);else if(n=l0(t,e,n,r),n!==null){var s=pt();Xt(n,t,r,s),R0(n,e,r)}}function _E(t,e,n){var r=Xn(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(I0(t))A0(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,l=i(o,n);if(s.hasEagerState=!0,s.eagerState=l,Jt(l,o)){var u=e.interleaved;u===null?(s.next=s,Xh(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}n=l0(t,e,s,r),n!==null&&(s=pt(),Xt(n,t,r,s),R0(n,e,r))}}function I0(t){var e=t.alternate;return t===ke||e!==null&&e===ke}function A0(t,e){Li=Xa=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function R0(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Mh(t,n)}}var Ja={readContext:$t,useCallback:st,useContext:st,useEffect:st,useImperativeHandle:st,useInsertionEffect:st,useLayoutEffect:st,useMemo:st,useReducer:st,useRef:st,useState:st,useDebugValue:st,useDeferredValue:st,useTransition:st,useMutableSource:st,useSyncExternalStore:st,useId:st,unstable_isNewReconciler:!1},wE={readContext:$t,useCallback:function(t,e){return sn().memoizedState=[t,e===void 0?null:e],t},useContext:$t,useEffect:tp,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Ta(4194308,4,x0.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Ta(4194308,4,t,e)},useInsertionEffect:function(t,e){return Ta(4,2,t,e)},useMemo:function(t,e){var n=sn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=sn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=vE.bind(null,ke,t),[r.memoizedState,t]},useRef:function(t){var e=sn();return t={current:t},e.memoizedState=t},useState:ep,useDebugValue:od,useDeferredValue:function(t){return sn().memoizedState=t},useTransition:function(){var t=ep(!1),e=t[0];return t=yE.bind(null,t[1]),sn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=ke,s=sn();if(be){if(n===void 0)throw Error(F(407));n=n()}else{if(n=e(),Ye===null)throw Error(F(349));$r&30||f0(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,tp(p0.bind(null,r,i,t),[t]),r.flags|=2048,ao(9,m0.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=sn(),e=Ye.identifierPrefix;if(be){var n=wn,r=_n;n=(r&~(1<<32-Yt(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=io++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=gE++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},xE={readContext:$t,useCallback:T0,useContext:$t,useEffect:id,useImperativeHandle:E0,useInsertionEffect:_0,useLayoutEffect:w0,useMemo:b0,useReducer:zu,useRef:v0,useState:function(){return zu(oo)},useDebugValue:od,useDeferredValue:function(t){var e=Ht();return S0(e,$e.memoizedState,t)},useTransition:function(){var t=zu(oo)[0],e=Ht().memoizedState;return[t,e]},useMutableSource:h0,useSyncExternalStore:d0,useId:k0,unstable_isNewReconciler:!1},EE={readContext:$t,useCallback:T0,useContext:$t,useEffect:id,useImperativeHandle:E0,useInsertionEffect:_0,useLayoutEffect:w0,useMemo:b0,useReducer:Bu,useRef:v0,useState:function(){return Bu(oo)},useDebugValue:od,useDeferredValue:function(t){var e=Ht();return $e===null?e.memoizedState=t:S0(e,$e.memoizedState,t)},useTransition:function(){var t=Bu(oo)[0],e=Ht().memoizedState;return[t,e]},useMutableSource:h0,useSyncExternalStore:d0,useId:k0,unstable_isNewReconciler:!1};function Wt(t,e){if(t&&t.defaultProps){e=Ie({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Lc(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ie({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Il={isMounted:function(t){return(t=t._reactInternals)?Yr(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=pt(),s=Xn(t),i=xn(r,s);i.payload=e,n!=null&&(i.callback=n),e=Qn(t,i,s),e!==null&&(Xt(e,t,s,r),xa(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=pt(),s=Xn(t),i=xn(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Qn(t,i,s),e!==null&&(Xt(e,t,s,r),xa(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=pt(),r=Xn(t),s=xn(n,r);s.tag=2,e!=null&&(s.callback=e),e=Qn(t,s,r),e!==null&&(Xt(e,t,r,n),xa(e,t,r))}};function np(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Zi(n,r)||!Zi(s,i):!0}function N0(t,e,n){var r=!1,s=or,i=e.contextType;return typeof i=="object"&&i!==null?i=$t(i):(s=St(e)?zr:ct.current,r=e.contextTypes,i=(r=r!=null)?Rs(t,s):or),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Il,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function rp(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Il.enqueueReplaceState(e,e.state,null)}function Mc(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Jh(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=$t(i):(i=St(e)?zr:ct.current,s.context=Rs(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Lc(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Il.enqueueReplaceState(s,s.state,null),Qa(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Ds(t,e){try{var n="",r=e;do n+=Y1(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function $u(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Oc(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var TE=typeof WeakMap=="function"?WeakMap:Map;function C0(t,e,n){n=xn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){el||(el=!0,Kc=r),Oc(t,e)},n}function P0(t,e,n){n=xn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Oc(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Oc(t,e),typeof r!="function"&&(Yn===null?Yn=new Set([this]):Yn.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function sp(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new TE;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=ME.bind(null,t,e,n),e.then(t,t))}function ip(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function op(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=xn(-1,1),e.tag=2,Qn(n,e,1))),n.lanes|=1),t)}var bE=Rn.ReactCurrentOwner,Tt=!1;function mt(t,e,n,r){e.child=t===null?a0(e,null,n,r):Cs(e,t.child,n,r)}function ap(t,e,n,r,s){n=n.render;var i=e.ref;return Ss(e,s),r=rd(t,e,n,r,i,s),n=sd(),t!==null&&!Tt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Sn(t,e,s)):(be&&n&&qh(e),e.flags|=1,mt(t,e,r,s),e.child)}function lp(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!md(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,D0(t,e,i,r,s)):(t=Ia(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Zi,n(o,r)&&t.ref===e.ref)return Sn(t,e,s)}return e.flags|=1,t=Jn(i,r),t.ref=e.ref,t.return=e,e.child=t}function D0(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Zi(i,r)&&t.ref===e.ref)if(Tt=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Tt=!0);else return e.lanes=t.lanes,Sn(t,e,s)}return Fc(t,e,n,r,s)}function j0(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ve(ws,At),At|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ve(ws,At),At|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,ve(ws,At),At|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,ve(ws,At),At|=r;return mt(t,e,s,n),e.child}function V0(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Fc(t,e,n,r,s){var i=St(n)?zr:ct.current;return i=Rs(e,i),Ss(e,s),n=rd(t,e,n,r,i,s),r=sd(),t!==null&&!Tt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Sn(t,e,s)):(be&&r&&qh(e),e.flags|=1,mt(t,e,n,s),e.child)}function up(t,e,n,r,s){if(St(n)){var i=!0;Ha(e)}else i=!1;if(Ss(e,s),e.stateNode===null)ba(t,e),N0(e,n,r),Mc(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var u=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=$t(d):(d=St(n)?zr:ct.current,d=Rs(e,d));var m=n.getDerivedStateFromProps,p=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function";p||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||u!==d)&&rp(e,o,r,d),On=!1;var g=e.memoizedState;o.state=g,Qa(e,r,o,s),u=e.memoizedState,l!==r||g!==u||bt.current||On?(typeof m=="function"&&(Lc(e,n,m,r),u=e.memoizedState),(l=On||np(e,n,l,r,g,u,d))?(p||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=d,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,u0(t,e),l=e.memoizedProps,d=e.type===e.elementType?l:Wt(e.type,l),o.props=d,p=e.pendingProps,g=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=$t(u):(u=St(n)?zr:ct.current,u=Rs(e,u));var x=n.getDerivedStateFromProps;(m=typeof x=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==p||g!==u)&&rp(e,o,r,u),On=!1,g=e.memoizedState,o.state=g,Qa(e,r,o,s);var k=e.memoizedState;l!==p||g!==k||bt.current||On?(typeof x=="function"&&(Lc(e,n,x,r),k=e.memoizedState),(d=On||np(e,n,d,r,g,k,u)||!1)?(m||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,k,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,k,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=k),o.props=r,o.state=k,o.context=u,r=d):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),r=!1)}return Uc(t,e,n,r,i,s)}function Uc(t,e,n,r,s,i){V0(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&Km(e,n,!1),Sn(t,e,i);r=e.stateNode,bE.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Cs(e,t.child,null,i),e.child=Cs(e,null,l,i)):mt(t,e,l,i),e.memoizedState=r.state,s&&Km(e,n,!0),e.child}function L0(t){var e=t.stateNode;e.pendingContext?Gm(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Gm(t,e.context,!1),Zh(t,e.containerInfo)}function cp(t,e,n,r,s){return Ns(),Gh(s),e.flags|=256,mt(t,e,n,r),e.child}var zc={dehydrated:null,treeContext:null,retryLane:0};function Bc(t){return{baseLanes:t,cachePool:null,transitions:null}}function M0(t,e,n){var r=e.pendingProps,s=Se.current,i=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),ve(Se,s&1),t===null)return jc(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Nl(o,r,0,null),t=Lr(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Bc(n),e.memoizedState=zc,t):ad(e,o));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return SE(t,e,o,r,l,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,l=s.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=Jn(s,u),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=Jn(l,i):(i=Lr(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?Bc(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=zc,r}return i=t.child,t=i.sibling,r=Jn(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function ad(t,e){return e=Nl({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function ia(t,e,n,r){return r!==null&&Gh(r),Cs(e,t.child,null,n),t=ad(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function SE(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=$u(Error(F(422))),ia(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Nl({mode:"visible",children:r.children},s,0,null),i=Lr(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Cs(e,t.child,null,o),e.child.memoizedState=Bc(o),e.memoizedState=zc,i);if(!(e.mode&1))return ia(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(F(419)),r=$u(i,r,void 0),ia(t,e,o,r)}if(l=(o&t.childLanes)!==0,Tt||l){if(r=Ye,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,bn(t,s),Xt(r,t,s,-1))}return fd(),r=$u(Error(F(421))),ia(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=OE.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Rt=Kn(s.nextSibling),Pt=e,be=!0,Kt=null,t!==null&&(Lt[Mt++]=_n,Lt[Mt++]=wn,Lt[Mt++]=Br,_n=t.id,wn=t.overflow,Br=e),e=ad(e,r.children),e.flags|=4096,e)}function hp(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Vc(t.return,e,n)}function Hu(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function O0(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(mt(t,e,r.children,n),r=Se.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&hp(t,n,e);else if(t.tag===19)hp(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ve(Se,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Ya(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Hu(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Ya(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Hu(e,!0,n,null,i);break;case"together":Hu(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ba(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Sn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Hr|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(F(153));if(e.child!==null){for(t=e.child,n=Jn(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Jn(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function kE(t,e,n){switch(e.tag){case 3:L0(e),Ns();break;case 5:c0(e);break;case 1:St(e.type)&&Ha(e);break;case 4:Zh(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;ve(Ga,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ve(Se,Se.current&1),e.flags|=128,null):n&e.child.childLanes?M0(t,e,n):(ve(Se,Se.current&1),t=Sn(t,e,n),t!==null?t.sibling:null);ve(Se,Se.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return O0(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),ve(Se,Se.current),r)break;return null;case 22:case 23:return e.lanes=0,j0(t,e,n)}return Sn(t,e,n)}var F0,$c,U0,z0;F0=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};$c=function(){};U0=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Pr(cn.current);var i=null;switch(n){case"input":s=hc(t,s),r=hc(t,r),i=[];break;case"select":s=Ie({},s,{value:void 0}),r=Ie({},r,{value:void 0}),i=[];break;case"textarea":s=mc(t,s),r=mc(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Ba)}gc(n,r);var o;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var l=s[d];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Wi.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var u=r[d];if(l=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&u!==l&&(u!=null||l!=null))if(d==="style")if(l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(i||(i=[]),i.push(d,n)),n=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(i=i||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Wi.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&xe("scroll",t),i||l===u||(i=[])):(i=i||[]).push(d,u))}n&&(i=i||[]).push("style",n);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};z0=function(t,e,n,r){n!==r&&(e.flags|=4)};function wi(t,e){if(!be)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function it(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function IE(t,e,n){var r=e.pendingProps;switch(Wh(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return it(e),null;case 1:return St(e.type)&&$a(),it(e),null;case 3:return r=e.stateNode,Ps(),Te(bt),Te(ct),td(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(ra(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Kt!==null&&(Xc(Kt),Kt=null))),$c(t,e),it(e),null;case 5:ed(e);var s=Pr(so.current);if(n=e.type,t!==null&&e.stateNode!=null)U0(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(F(166));return it(e),null}if(t=Pr(cn.current),ra(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[an]=e,r[no]=i,t=(e.mode&1)!==0,n){case"dialog":xe("cancel",r),xe("close",r);break;case"iframe":case"object":case"embed":xe("load",r);break;case"video":case"audio":for(s=0;s<ki.length;s++)xe(ki[s],r);break;case"source":xe("error",r);break;case"img":case"image":case"link":xe("error",r),xe("load",r);break;case"details":xe("toggle",r);break;case"input":wm(r,i),xe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},xe("invalid",r);break;case"textarea":Em(r,i),xe("invalid",r)}gc(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&na(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&na(r.textContent,l,t),s=["children",""+l]):Wi.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&xe("scroll",r)}switch(n){case"input":Ko(r),xm(r,i,!0);break;case"textarea":Ko(r),Tm(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Ba)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=py(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[an]=e,t[no]=r,F0(t,e,!1,!1),e.stateNode=t;e:{switch(o=yc(n,r),n){case"dialog":xe("cancel",t),xe("close",t),s=r;break;case"iframe":case"object":case"embed":xe("load",t),s=r;break;case"video":case"audio":for(s=0;s<ki.length;s++)xe(ki[s],t);s=r;break;case"source":xe("error",t),s=r;break;case"img":case"image":case"link":xe("error",t),xe("load",t),s=r;break;case"details":xe("toggle",t),s=r;break;case"input":wm(t,r),s=hc(t,r),xe("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Ie({},r,{value:void 0}),xe("invalid",t);break;case"textarea":Em(t,r),s=mc(t,r),xe("invalid",t);break;default:s=r}gc(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var u=l[i];i==="style"?vy(t,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&gy(t,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Gi(t,u):typeof u=="number"&&Gi(t,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Wi.hasOwnProperty(i)?u!=null&&i==="onScroll"&&xe("scroll",t):u!=null&&Ch(t,i,u,o))}switch(n){case"input":Ko(t),xm(t,r,!1);break;case"textarea":Ko(t),Tm(t);break;case"option":r.value!=null&&t.setAttribute("value",""+ir(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?xs(t,!!r.multiple,i,!1):r.defaultValue!=null&&xs(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Ba)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return it(e),null;case 6:if(t&&e.stateNode!=null)z0(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(F(166));if(n=Pr(so.current),Pr(cn.current),ra(e)){if(r=e.stateNode,n=e.memoizedProps,r[an]=e,(i=r.nodeValue!==n)&&(t=Pt,t!==null))switch(t.tag){case 3:na(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&na(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[an]=e,e.stateNode=r}return it(e),null;case 13:if(Te(Se),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(be&&Rt!==null&&e.mode&1&&!(e.flags&128))i0(),Ns(),e.flags|=98560,i=!1;else if(i=ra(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(F(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(F(317));i[an]=e}else Ns(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;it(e),i=!1}else Kt!==null&&(Xc(Kt),Kt=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Se.current&1?He===0&&(He=3):fd())),e.updateQueue!==null&&(e.flags|=4),it(e),null);case 4:return Ps(),$c(t,e),t===null&&eo(e.stateNode.containerInfo),it(e),null;case 10:return Yh(e.type._context),it(e),null;case 17:return St(e.type)&&$a(),it(e),null;case 19:if(Te(Se),i=e.memoizedState,i===null)return it(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)wi(i,!1);else{if(He!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Ya(t),o!==null){for(e.flags|=128,wi(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ve(Se,Se.current&1|2),e.child}t=t.sibling}i.tail!==null&&je()>js&&(e.flags|=128,r=!0,wi(i,!1),e.lanes=4194304)}else{if(!r)if(t=Ya(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),wi(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!be)return it(e),null}else 2*je()-i.renderingStartTime>js&&n!==1073741824&&(e.flags|=128,r=!0,wi(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=je(),e.sibling=null,n=Se.current,ve(Se,r?n&1|2:n&1),e):(it(e),null);case 22:case 23:return dd(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?At&1073741824&&(it(e),e.subtreeFlags&6&&(e.flags|=8192)):it(e),null;case 24:return null;case 25:return null}throw Error(F(156,e.tag))}function AE(t,e){switch(Wh(e),e.tag){case 1:return St(e.type)&&$a(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ps(),Te(bt),Te(ct),td(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return ed(e),null;case 13:if(Te(Se),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(F(340));Ns()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Te(Se),null;case 4:return Ps(),null;case 10:return Yh(e.type._context),null;case 22:case 23:return dd(),null;case 24:return null;default:return null}}var oa=!1,lt=!1,RE=typeof WeakSet=="function"?WeakSet:Set,W=null;function _s(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ne(t,e,r)}else n.current=null}function Hc(t,e,n){try{n()}catch(r){Ne(t,e,r)}}var dp=!1;function NE(t,e){if(Ic=Fa,t=Wy(),Hh(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,u=-1,d=0,m=0,p=t,g=null;t:for(;;){for(var x;p!==n||s!==0&&p.nodeType!==3||(l=o+s),p!==i||r!==0&&p.nodeType!==3||(u=o+r),p.nodeType===3&&(o+=p.nodeValue.length),(x=p.firstChild)!==null;)g=p,p=x;for(;;){if(p===t)break t;if(g===n&&++d===s&&(l=o),g===i&&++m===r&&(u=o),(x=p.nextSibling)!==null)break;p=g,g=p.parentNode}p=x}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Ac={focusedElem:t,selectionRange:n},Fa=!1,W=e;W!==null;)if(e=W,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,W=t;else for(;W!==null;){e=W;try{var k=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(k!==null){var R=k.memoizedProps,P=k.memoizedState,T=e.stateNode,y=T.getSnapshotBeforeUpdate(e.elementType===e.type?R:Wt(e.type,R),P);T.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(F(163))}}catch(D){Ne(e,e.return,D)}if(t=e.sibling,t!==null){t.return=e.return,W=t;break}W=e.return}return k=dp,dp=!1,k}function Mi(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Hc(e,n,i)}s=s.next}while(s!==r)}}function Al(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function qc(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function B0(t){var e=t.alternate;e!==null&&(t.alternate=null,B0(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[an],delete e[no],delete e[Cc],delete e[dE],delete e[fE])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function $0(t){return t.tag===5||t.tag===3||t.tag===4}function fp(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||$0(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Wc(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Ba));else if(r!==4&&(t=t.child,t!==null))for(Wc(t,e,n),t=t.sibling;t!==null;)Wc(t,e,n),t=t.sibling}function Gc(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Gc(t,e,n),t=t.sibling;t!==null;)Gc(t,e,n),t=t.sibling}var Xe=null,Gt=!1;function Ln(t,e,n){for(n=n.child;n!==null;)H0(t,e,n),n=n.sibling}function H0(t,e,n){if(un&&typeof un.onCommitFiberUnmount=="function")try{un.onCommitFiberUnmount(wl,n)}catch{}switch(n.tag){case 5:lt||_s(n,e);case 6:var r=Xe,s=Gt;Xe=null,Ln(t,e,n),Xe=r,Gt=s,Xe!==null&&(Gt?(t=Xe,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Xe.removeChild(n.stateNode));break;case 18:Xe!==null&&(Gt?(t=Xe,n=n.stateNode,t.nodeType===8?Mu(t.parentNode,n):t.nodeType===1&&Mu(t,n),Xi(t)):Mu(Xe,n.stateNode));break;case 4:r=Xe,s=Gt,Xe=n.stateNode.containerInfo,Gt=!0,Ln(t,e,n),Xe=r,Gt=s;break;case 0:case 11:case 14:case 15:if(!lt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Hc(n,e,o),s=s.next}while(s!==r)}Ln(t,e,n);break;case 1:if(!lt&&(_s(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Ne(n,e,l)}Ln(t,e,n);break;case 21:Ln(t,e,n);break;case 22:n.mode&1?(lt=(r=lt)||n.memoizedState!==null,Ln(t,e,n),lt=r):Ln(t,e,n);break;default:Ln(t,e,n)}}function mp(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new RE),e.forEach(function(r){var s=FE.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function qt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:Xe=l.stateNode,Gt=!1;break e;case 3:Xe=l.stateNode.containerInfo,Gt=!0;break e;case 4:Xe=l.stateNode.containerInfo,Gt=!0;break e}l=l.return}if(Xe===null)throw Error(F(160));H0(i,o,s),Xe=null,Gt=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(d){Ne(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)q0(e,t),e=e.sibling}function q0(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(qt(e,t),rn(t),r&4){try{Mi(3,t,t.return),Al(3,t)}catch(R){Ne(t,t.return,R)}try{Mi(5,t,t.return)}catch(R){Ne(t,t.return,R)}}break;case 1:qt(e,t),rn(t),r&512&&n!==null&&_s(n,n.return);break;case 5:if(qt(e,t),rn(t),r&512&&n!==null&&_s(n,n.return),t.flags&32){var s=t.stateNode;try{Gi(s,"")}catch(R){Ne(t,t.return,R)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&fy(s,i),yc(l,o);var d=yc(l,i);for(o=0;o<u.length;o+=2){var m=u[o],p=u[o+1];m==="style"?vy(s,p):m==="dangerouslySetInnerHTML"?gy(s,p):m==="children"?Gi(s,p):Ch(s,m,p,d)}switch(l){case"input":dc(s,i);break;case"textarea":my(s,i);break;case"select":var g=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var x=i.value;x!=null?xs(s,!!i.multiple,x,!1):g!==!!i.multiple&&(i.defaultValue!=null?xs(s,!!i.multiple,i.defaultValue,!0):xs(s,!!i.multiple,i.multiple?[]:"",!1))}s[no]=i}catch(R){Ne(t,t.return,R)}}break;case 6:if(qt(e,t),rn(t),r&4){if(t.stateNode===null)throw Error(F(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(R){Ne(t,t.return,R)}}break;case 3:if(qt(e,t),rn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Xi(e.containerInfo)}catch(R){Ne(t,t.return,R)}break;case 4:qt(e,t),rn(t);break;case 13:qt(e,t),rn(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(cd=je())),r&4&&mp(t);break;case 22:if(m=n!==null&&n.memoizedState!==null,t.mode&1?(lt=(d=lt)||m,qt(e,t),lt=d):qt(e,t),rn(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!m&&t.mode&1)for(W=t,m=t.child;m!==null;){for(p=W=m;W!==null;){switch(g=W,x=g.child,g.tag){case 0:case 11:case 14:case 15:Mi(4,g,g.return);break;case 1:_s(g,g.return);var k=g.stateNode;if(typeof k.componentWillUnmount=="function"){r=g,n=g.return;try{e=r,k.props=e.memoizedProps,k.state=e.memoizedState,k.componentWillUnmount()}catch(R){Ne(r,n,R)}}break;case 5:_s(g,g.return);break;case 22:if(g.memoizedState!==null){gp(p);continue}}x!==null?(x.return=g,W=x):gp(p)}m=m.sibling}e:for(m=null,p=t;;){if(p.tag===5){if(m===null){m=p;try{s=p.stateNode,d?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=p.stateNode,u=p.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=yy("display",o))}catch(R){Ne(t,t.return,R)}}}else if(p.tag===6){if(m===null)try{p.stateNode.nodeValue=d?"":p.memoizedProps}catch(R){Ne(t,t.return,R)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;m===p&&(m=null),p=p.return}m===p&&(m=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:qt(e,t),rn(t),r&4&&mp(t);break;case 21:break;default:qt(e,t),rn(t)}}function rn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if($0(n)){var r=n;break e}n=n.return}throw Error(F(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Gi(s,""),r.flags&=-33);var i=fp(t);Gc(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,l=fp(t);Wc(t,l,o);break;default:throw Error(F(161))}}catch(u){Ne(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function CE(t,e,n){W=t,W0(t)}function W0(t,e,n){for(var r=(t.mode&1)!==0;W!==null;){var s=W,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||oa;if(!o){var l=s.alternate,u=l!==null&&l.memoizedState!==null||lt;l=oa;var d=lt;if(oa=o,(lt=u)&&!d)for(W=s;W!==null;)o=W,u=o.child,o.tag===22&&o.memoizedState!==null?yp(s):u!==null?(u.return=o,W=u):yp(s);for(;i!==null;)W=i,W0(i),i=i.sibling;W=s,oa=l,lt=d}pp(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,W=i):pp(t)}}function pp(t){for(;W!==null;){var e=W;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:lt||Al(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!lt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Wt(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Zm(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Zm(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var m=d.memoizedState;if(m!==null){var p=m.dehydrated;p!==null&&Xi(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(F(163))}lt||e.flags&512&&qc(e)}catch(g){Ne(e,e.return,g)}}if(e===t){W=null;break}if(n=e.sibling,n!==null){n.return=e.return,W=n;break}W=e.return}}function gp(t){for(;W!==null;){var e=W;if(e===t){W=null;break}var n=e.sibling;if(n!==null){n.return=e.return,W=n;break}W=e.return}}function yp(t){for(;W!==null;){var e=W;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Al(4,e)}catch(u){Ne(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(u){Ne(e,s,u)}}var i=e.return;try{qc(e)}catch(u){Ne(e,i,u)}break;case 5:var o=e.return;try{qc(e)}catch(u){Ne(e,o,u)}}}catch(u){Ne(e,e.return,u)}if(e===t){W=null;break}var l=e.sibling;if(l!==null){l.return=e.return,W=l;break}W=e.return}}var PE=Math.ceil,Za=Rn.ReactCurrentDispatcher,ld=Rn.ReactCurrentOwner,Ut=Rn.ReactCurrentBatchConfig,he=0,Ye=null,Me=null,et=0,At=0,ws=gr(0),He=0,lo=null,Hr=0,Rl=0,ud=0,Oi=null,xt=null,cd=0,js=1/0,yn=null,el=!1,Kc=null,Yn=null,aa=!1,$n=null,tl=0,Fi=0,Qc=null,Sa=-1,ka=0;function pt(){return he&6?je():Sa!==-1?Sa:Sa=je()}function Xn(t){return t.mode&1?he&2&&et!==0?et&-et:pE.transition!==null?(ka===0&&(ka=Ny()),ka):(t=fe,t!==0||(t=window.event,t=t===void 0?16:My(t.type)),t):1}function Xt(t,e,n,r){if(50<Fi)throw Fi=0,Qc=null,Error(F(185));Eo(t,n,r),(!(he&2)||t!==Ye)&&(t===Ye&&(!(he&2)&&(Rl|=n),He===4&&Un(t,et)),kt(t,r),n===1&&he===0&&!(e.mode&1)&&(js=je()+500,Sl&&yr()))}function kt(t,e){var n=t.callbackNode;px(t,e);var r=Oa(t,t===Ye?et:0);if(r===0)n!==null&&km(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&km(n),e===1)t.tag===0?mE(vp.bind(null,t)):n0(vp.bind(null,t)),cE(function(){!(he&6)&&yr()}),n=null;else{switch(Cy(r)){case 1:n=Lh;break;case 4:n=Ay;break;case 16:n=Ma;break;case 536870912:n=Ry;break;default:n=Ma}n=ev(n,G0.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function G0(t,e){if(Sa=-1,ka=0,he&6)throw Error(F(327));var n=t.callbackNode;if(ks()&&t.callbackNode!==n)return null;var r=Oa(t,t===Ye?et:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=nl(t,r);else{e=r;var s=he;he|=2;var i=Q0();(Ye!==t||et!==e)&&(yn=null,js=je()+500,Vr(t,e));do try{VE();break}catch(l){K0(t,l)}while(!0);Qh(),Za.current=i,he=s,Me!==null?e=0:(Ye=null,et=0,e=He)}if(e!==0){if(e===2&&(s=Ec(t),s!==0&&(r=s,e=Yc(t,s))),e===1)throw n=lo,Vr(t,0),Un(t,r),kt(t,je()),n;if(e===6)Un(t,r);else{if(s=t.current.alternate,!(r&30)&&!DE(s)&&(e=nl(t,r),e===2&&(i=Ec(t),i!==0&&(r=i,e=Yc(t,i))),e===1))throw n=lo,Vr(t,0),Un(t,r),kt(t,je()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(F(345));case 2:Ir(t,xt,yn);break;case 3:if(Un(t,r),(r&130023424)===r&&(e=cd+500-je(),10<e)){if(Oa(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){pt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Nc(Ir.bind(null,t,xt,yn),e);break}Ir(t,xt,yn);break;case 4:if(Un(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-Yt(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=je()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*PE(r/1960))-r,10<r){t.timeoutHandle=Nc(Ir.bind(null,t,xt,yn),r);break}Ir(t,xt,yn);break;case 5:Ir(t,xt,yn);break;default:throw Error(F(329))}}}return kt(t,je()),t.callbackNode===n?G0.bind(null,t):null}function Yc(t,e){var n=Oi;return t.current.memoizedState.isDehydrated&&(Vr(t,e).flags|=256),t=nl(t,e),t!==2&&(e=xt,xt=n,e!==null&&Xc(e)),t}function Xc(t){xt===null?xt=t:xt.push.apply(xt,t)}function DE(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Jt(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Un(t,e){for(e&=~ud,e&=~Rl,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Yt(e),r=1<<n;t[n]=-1,e&=~r}}function vp(t){if(he&6)throw Error(F(327));ks();var e=Oa(t,0);if(!(e&1))return kt(t,je()),null;var n=nl(t,e);if(t.tag!==0&&n===2){var r=Ec(t);r!==0&&(e=r,n=Yc(t,r))}if(n===1)throw n=lo,Vr(t,0),Un(t,e),kt(t,je()),n;if(n===6)throw Error(F(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ir(t,xt,yn),kt(t,je()),null}function hd(t,e){var n=he;he|=1;try{return t(e)}finally{he=n,he===0&&(js=je()+500,Sl&&yr())}}function qr(t){$n!==null&&$n.tag===0&&!(he&6)&&ks();var e=he;he|=1;var n=Ut.transition,r=fe;try{if(Ut.transition=null,fe=1,t)return t()}finally{fe=r,Ut.transition=n,he=e,!(he&6)&&yr()}}function dd(){At=ws.current,Te(ws)}function Vr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,uE(n)),Me!==null)for(n=Me.return;n!==null;){var r=n;switch(Wh(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&$a();break;case 3:Ps(),Te(bt),Te(ct),td();break;case 5:ed(r);break;case 4:Ps();break;case 13:Te(Se);break;case 19:Te(Se);break;case 10:Yh(r.type._context);break;case 22:case 23:dd()}n=n.return}if(Ye=t,Me=t=Jn(t.current,null),et=At=e,He=0,lo=null,ud=Rl=Hr=0,xt=Oi=null,Cr!==null){for(e=0;e<Cr.length;e++)if(n=Cr[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Cr=null}return t}function K0(t,e){do{var n=Me;try{if(Qh(),Ea.current=Ja,Xa){for(var r=ke.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Xa=!1}if($r=0,Ke=$e=ke=null,Li=!1,io=0,ld.current=null,n===null||n.return===null){He=1,lo=e,Me=null;break}e:{var i=t,o=n.return,l=n,u=e;if(e=et,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,m=l,p=m.tag;if(!(m.mode&1)&&(p===0||p===11||p===15)){var g=m.alternate;g?(m.updateQueue=g.updateQueue,m.memoizedState=g.memoizedState,m.lanes=g.lanes):(m.updateQueue=null,m.memoizedState=null)}var x=ip(o);if(x!==null){x.flags&=-257,op(x,o,l,i,e),x.mode&1&&sp(i,d,e),e=x,u=d;var k=e.updateQueue;if(k===null){var R=new Set;R.add(u),e.updateQueue=R}else k.add(u);break e}else{if(!(e&1)){sp(i,d,e),fd();break e}u=Error(F(426))}}else if(be&&l.mode&1){var P=ip(o);if(P!==null){!(P.flags&65536)&&(P.flags|=256),op(P,o,l,i,e),Gh(Ds(u,l));break e}}i=u=Ds(u,l),He!==4&&(He=2),Oi===null?Oi=[i]:Oi.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var T=C0(i,u,e);Jm(i,T);break e;case 1:l=u;var y=i.type,S=i.stateNode;if(!(i.flags&128)&&(typeof y.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(Yn===null||!Yn.has(S)))){i.flags|=65536,e&=-e,i.lanes|=e;var D=P0(i,l,e);Jm(i,D);break e}}i=i.return}while(i!==null)}X0(n)}catch(M){e=M,Me===n&&n!==null&&(Me=n=n.return);continue}break}while(!0)}function Q0(){var t=Za.current;return Za.current=Ja,t===null?Ja:t}function fd(){(He===0||He===3||He===2)&&(He=4),Ye===null||!(Hr&268435455)&&!(Rl&268435455)||Un(Ye,et)}function nl(t,e){var n=he;he|=2;var r=Q0();(Ye!==t||et!==e)&&(yn=null,Vr(t,e));do try{jE();break}catch(s){K0(t,s)}while(!0);if(Qh(),he=n,Za.current=r,Me!==null)throw Error(F(261));return Ye=null,et=0,He}function jE(){for(;Me!==null;)Y0(Me)}function VE(){for(;Me!==null&&!ox();)Y0(Me)}function Y0(t){var e=Z0(t.alternate,t,At);t.memoizedProps=t.pendingProps,e===null?X0(t):Me=e,ld.current=null}function X0(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=AE(n,e),n!==null){n.flags&=32767,Me=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{He=6,Me=null;return}}else if(n=IE(n,e,At),n!==null){Me=n;return}if(e=e.sibling,e!==null){Me=e;return}Me=e=t}while(e!==null);He===0&&(He=5)}function Ir(t,e,n){var r=fe,s=Ut.transition;try{Ut.transition=null,fe=1,LE(t,e,n,r)}finally{Ut.transition=s,fe=r}return null}function LE(t,e,n,r){do ks();while($n!==null);if(he&6)throw Error(F(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(F(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(gx(t,i),t===Ye&&(Me=Ye=null,et=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||aa||(aa=!0,ev(Ma,function(){return ks(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Ut.transition,Ut.transition=null;var o=fe;fe=1;var l=he;he|=4,ld.current=null,NE(t,n),q0(n,t),nE(Ac),Fa=!!Ic,Ac=Ic=null,t.current=n,CE(n),ax(),he=l,fe=o,Ut.transition=i}else t.current=n;if(aa&&(aa=!1,$n=t,tl=s),i=t.pendingLanes,i===0&&(Yn=null),cx(n.stateNode),kt(t,je()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(el)throw el=!1,t=Kc,Kc=null,t;return tl&1&&t.tag!==0&&ks(),i=t.pendingLanes,i&1?t===Qc?Fi++:(Fi=0,Qc=t):Fi=0,yr(),null}function ks(){if($n!==null){var t=Cy(tl),e=Ut.transition,n=fe;try{if(Ut.transition=null,fe=16>t?16:t,$n===null)var r=!1;else{if(t=$n,$n=null,tl=0,he&6)throw Error(F(331));var s=he;for(he|=4,W=t.current;W!==null;){var i=W,o=i.child;if(W.flags&16){var l=i.deletions;if(l!==null){for(var u=0;u<l.length;u++){var d=l[u];for(W=d;W!==null;){var m=W;switch(m.tag){case 0:case 11:case 15:Mi(8,m,i)}var p=m.child;if(p!==null)p.return=m,W=p;else for(;W!==null;){m=W;var g=m.sibling,x=m.return;if(B0(m),m===d){W=null;break}if(g!==null){g.return=x,W=g;break}W=x}}}var k=i.alternate;if(k!==null){var R=k.child;if(R!==null){k.child=null;do{var P=R.sibling;R.sibling=null,R=P}while(R!==null)}}W=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,W=o;else e:for(;W!==null;){if(i=W,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Mi(9,i,i.return)}var T=i.sibling;if(T!==null){T.return=i.return,W=T;break e}W=i.return}}var y=t.current;for(W=y;W!==null;){o=W;var S=o.child;if(o.subtreeFlags&2064&&S!==null)S.return=o,W=S;else e:for(o=y;W!==null;){if(l=W,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Al(9,l)}}catch(M){Ne(l,l.return,M)}if(l===o){W=null;break e}var D=l.sibling;if(D!==null){D.return=l.return,W=D;break e}W=l.return}}if(he=s,yr(),un&&typeof un.onPostCommitFiberRoot=="function")try{un.onPostCommitFiberRoot(wl,t)}catch{}r=!0}return r}finally{fe=n,Ut.transition=e}}return!1}function _p(t,e,n){e=Ds(n,e),e=C0(t,e,1),t=Qn(t,e,1),e=pt(),t!==null&&(Eo(t,1,e),kt(t,e))}function Ne(t,e,n){if(t.tag===3)_p(t,t,n);else for(;e!==null;){if(e.tag===3){_p(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Yn===null||!Yn.has(r))){t=Ds(n,t),t=P0(e,t,1),e=Qn(e,t,1),t=pt(),e!==null&&(Eo(e,1,t),kt(e,t));break}}e=e.return}}function ME(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=pt(),t.pingedLanes|=t.suspendedLanes&n,Ye===t&&(et&n)===n&&(He===4||He===3&&(et&130023424)===et&&500>je()-cd?Vr(t,0):ud|=n),kt(t,e)}function J0(t,e){e===0&&(t.mode&1?(e=Xo,Xo<<=1,!(Xo&130023424)&&(Xo=4194304)):e=1);var n=pt();t=bn(t,e),t!==null&&(Eo(t,e,n),kt(t,n))}function OE(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),J0(t,n)}function FE(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(F(314))}r!==null&&r.delete(e),J0(t,n)}var Z0;Z0=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||bt.current)Tt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Tt=!1,kE(t,e,n);Tt=!!(t.flags&131072)}else Tt=!1,be&&e.flags&1048576&&r0(e,Wa,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;ba(t,e),t=e.pendingProps;var s=Rs(e,ct.current);Ss(e,n),s=rd(null,e,r,t,s,n);var i=sd();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,St(r)?(i=!0,Ha(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Jh(e),s.updater=Il,e.stateNode=s,s._reactInternals=e,Mc(e,r,t,n),e=Uc(null,e,r,!0,i,n)):(e.tag=0,be&&i&&qh(e),mt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(ba(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=zE(r),t=Wt(r,t),s){case 0:e=Fc(null,e,r,t,n);break e;case 1:e=up(null,e,r,t,n);break e;case 11:e=ap(null,e,r,t,n);break e;case 14:e=lp(null,e,r,Wt(r.type,t),n);break e}throw Error(F(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Wt(r,s),Fc(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Wt(r,s),up(t,e,r,s,n);case 3:e:{if(L0(e),t===null)throw Error(F(387));r=e.pendingProps,i=e.memoizedState,s=i.element,u0(t,e),Qa(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Ds(Error(F(423)),e),e=cp(t,e,r,n,s);break e}else if(r!==s){s=Ds(Error(F(424)),e),e=cp(t,e,r,n,s);break e}else for(Rt=Kn(e.stateNode.containerInfo.firstChild),Pt=e,be=!0,Kt=null,n=a0(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ns(),r===s){e=Sn(t,e,n);break e}mt(t,e,r,n)}e=e.child}return e;case 5:return c0(e),t===null&&jc(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Rc(r,s)?o=null:i!==null&&Rc(r,i)&&(e.flags|=32),V0(t,e),mt(t,e,o,n),e.child;case 6:return t===null&&jc(e),null;case 13:return M0(t,e,n);case 4:return Zh(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Cs(e,null,r,n):mt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Wt(r,s),ap(t,e,r,s,n);case 7:return mt(t,e,e.pendingProps,n),e.child;case 8:return mt(t,e,e.pendingProps.children,n),e.child;case 12:return mt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,ve(Ga,r._currentValue),r._currentValue=o,i!==null)if(Jt(i.value,o)){if(i.children===s.children&&!bt.current){e=Sn(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=xn(-1,n&-n),u.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var m=d.pending;m===null?u.next=u:(u.next=m.next,m.next=u),d.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),Vc(i.return,n,e),l.lanes|=n;break}u=u.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(F(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Vc(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}mt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Ss(e,n),s=$t(s),r=r(s),e.flags|=1,mt(t,e,r,n),e.child;case 14:return r=e.type,s=Wt(r,e.pendingProps),s=Wt(r.type,s),lp(t,e,r,s,n);case 15:return D0(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Wt(r,s),ba(t,e),e.tag=1,St(r)?(t=!0,Ha(e)):t=!1,Ss(e,n),N0(e,r,s),Mc(e,r,s,n),Uc(null,e,r,!0,t,n);case 19:return O0(t,e,n);case 22:return j0(t,e,n)}throw Error(F(156,e.tag))};function ev(t,e){return Iy(t,e)}function UE(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ft(t,e,n,r){return new UE(t,e,n,r)}function md(t){return t=t.prototype,!(!t||!t.isReactComponent)}function zE(t){if(typeof t=="function")return md(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Dh)return 11;if(t===jh)return 14}return 2}function Jn(t,e){var n=t.alternate;return n===null?(n=Ft(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Ia(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")md(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case cs:return Lr(n.children,s,i,e);case Ph:o=8,s|=8;break;case ac:return t=Ft(12,n,e,s|2),t.elementType=ac,t.lanes=i,t;case lc:return t=Ft(13,n,e,s),t.elementType=lc,t.lanes=i,t;case uc:return t=Ft(19,n,e,s),t.elementType=uc,t.lanes=i,t;case cy:return Nl(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case ly:o=10;break e;case uy:o=9;break e;case Dh:o=11;break e;case jh:o=14;break e;case Mn:o=16,r=null;break e}throw Error(F(130,t==null?t:typeof t,""))}return e=Ft(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Lr(t,e,n,r){return t=Ft(7,t,r,e),t.lanes=n,t}function Nl(t,e,n,r){return t=Ft(22,t,r,e),t.elementType=cy,t.lanes=n,t.stateNode={isHidden:!1},t}function qu(t,e,n){return t=Ft(6,t,null,e),t.lanes=n,t}function Wu(t,e,n){return e=Ft(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function BE(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ku(0),this.expirationTimes=ku(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ku(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function pd(t,e,n,r,s,i,o,l,u){return t=new BE(t,e,n,l,u),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Ft(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Jh(i),t}function $E(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:us,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function tv(t){if(!t)return or;t=t._reactInternals;e:{if(Yr(t)!==t||t.tag!==1)throw Error(F(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(St(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(F(171))}if(t.tag===1){var n=t.type;if(St(n))return t0(t,n,e)}return e}function nv(t,e,n,r,s,i,o,l,u){return t=pd(n,r,!0,t,s,i,o,l,u),t.context=tv(null),n=t.current,r=pt(),s=Xn(n),i=xn(r,s),i.callback=e??null,Qn(n,i,s),t.current.lanes=s,Eo(t,s,r),kt(t,r),t}function Cl(t,e,n,r){var s=e.current,i=pt(),o=Xn(s);return n=tv(n),e.context===null?e.context=n:e.pendingContext=n,e=xn(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Qn(s,e,o),t!==null&&(Xt(t,s,o,i),xa(t,s,o)),o}function rl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function wp(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function gd(t,e){wp(t,e),(t=t.alternate)&&wp(t,e)}function HE(){return null}var rv=typeof reportError=="function"?reportError:function(t){console.error(t)};function yd(t){this._internalRoot=t}Pl.prototype.render=yd.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(F(409));Cl(t,e,null,null)};Pl.prototype.unmount=yd.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;qr(function(){Cl(null,t,null,null)}),e[Tn]=null}};function Pl(t){this._internalRoot=t}Pl.prototype.unstable_scheduleHydration=function(t){if(t){var e=jy();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Fn.length&&e!==0&&e<Fn[n].priority;n++);Fn.splice(n,0,t),n===0&&Ly(t)}};function vd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Dl(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function xp(){}function qE(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var d=rl(o);i.call(d)}}var o=nv(e,r,t,0,null,!1,!1,"",xp);return t._reactRootContainer=o,t[Tn]=o.current,eo(t.nodeType===8?t.parentNode:t),qr(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var d=rl(u);l.call(d)}}var u=pd(t,0,!1,null,null,!1,!1,"",xp);return t._reactRootContainer=u,t[Tn]=u.current,eo(t.nodeType===8?t.parentNode:t),qr(function(){Cl(e,u,n,r)}),u}function jl(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var u=rl(o);l.call(u)}}Cl(e,o,t,s)}else o=qE(n,e,t,s,r);return rl(o)}Py=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Si(e.pendingLanes);n!==0&&(Mh(e,n|1),kt(e,je()),!(he&6)&&(js=je()+500,yr()))}break;case 13:qr(function(){var r=bn(t,1);if(r!==null){var s=pt();Xt(r,t,1,s)}}),gd(t,1)}};Oh=function(t){if(t.tag===13){var e=bn(t,134217728);if(e!==null){var n=pt();Xt(e,t,134217728,n)}gd(t,134217728)}};Dy=function(t){if(t.tag===13){var e=Xn(t),n=bn(t,e);if(n!==null){var r=pt();Xt(n,t,e,r)}gd(t,e)}};jy=function(){return fe};Vy=function(t,e){var n=fe;try{return fe=t,e()}finally{fe=n}};_c=function(t,e,n){switch(e){case"input":if(dc(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=bl(r);if(!s)throw Error(F(90));dy(r),dc(r,s)}}}break;case"textarea":my(t,n);break;case"select":e=n.value,e!=null&&xs(t,!!n.multiple,e,!1)}};xy=hd;Ey=qr;var WE={usingClientEntryPoint:!1,Events:[bo,ms,bl,_y,wy,hd]},xi={findFiberByHostInstance:Nr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},GE={bundleType:xi.bundleType,version:xi.version,rendererPackageName:xi.rendererPackageName,rendererConfig:xi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Rn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Sy(t),t===null?null:t.stateNode},findFiberByHostInstance:xi.findFiberByHostInstance||HE,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var la=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!la.isDisabled&&la.supportsFiber)try{wl=la.inject(GE),un=la}catch{}}jt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=WE;jt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!vd(e))throw Error(F(200));return $E(t,e,null,n)};jt.createRoot=function(t,e){if(!vd(t))throw Error(F(299));var n=!1,r="",s=rv;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=pd(t,1,!1,null,null,n,!1,r,s),t[Tn]=e.current,eo(t.nodeType===8?t.parentNode:t),new yd(e)};jt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(F(188)):(t=Object.keys(t).join(","),Error(F(268,t)));return t=Sy(e),t=t===null?null:t.stateNode,t};jt.flushSync=function(t){return qr(t)};jt.hydrate=function(t,e,n){if(!Dl(e))throw Error(F(200));return jl(null,t,e,!0,n)};jt.hydrateRoot=function(t,e,n){if(!vd(t))throw Error(F(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=rv;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=nv(e,null,t,1,n??null,s,!1,i,o),t[Tn]=e.current,eo(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Pl(e)};jt.render=function(t,e,n){if(!Dl(e))throw Error(F(200));return jl(null,t,e,!1,n)};jt.unmountComponentAtNode=function(t){if(!Dl(t))throw Error(F(40));return t._reactRootContainer?(qr(function(){jl(null,null,t,!1,function(){t._reactRootContainer=null,t[Tn]=null})}),!0):!1};jt.unstable_batchedUpdates=hd;jt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Dl(n))throw Error(F(200));if(t==null||t._reactInternals===void 0)throw Error(F(38));return jl(t,e,n,!1,r)};jt.version="18.3.1-next-f1338f8080-20240426";function sv(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(sv)}catch(t){console.error(t)}}sv(),sy.exports=jt;var KE=sy.exports,Ep=KE;ic.createRoot=Ep.createRoot,ic.hydrateRoot=Ep.hydrateRoot;var QE={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const YE=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),XE=(t,e)=>{const n=B.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,children:l,...u},d)=>B.createElement("svg",{ref:d,...QE,width:s,height:s,stroke:r,strokeWidth:o?Number(i)*24/Number(s):i,className:`lucide lucide-${YE(t)}`,...u},[...e.map(([m,p])=>B.createElement(m,p)),...(Array.isArray(l)?l:[l])||[]]));return n.displayName=`${t}`,n};var le=XE;const iv=le("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]),ov=le("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),JE=le("CheckCircle2",[["path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",key:"14v8dr"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),ZE=le("Check",[["polyline",{points:"20 6 9 17 4 12",key:"10jjfj"}]]),e2=le("ChefHat",[["path",{d:"M6 13.87A4 4 0 0 1 7.41 6a5.11 5.11 0 0 1 1.05-1.54 5 5 0 0 1 7.08 0A5.11 5.11 0 0 1 16.59 6 4 4 0 0 1 18 13.87V21H6Z",key:"z3ra2g"}],["line",{x1:"6",x2:"18",y1:"17",y2:"17",key:"12q60k"}]]),t2=le("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),n2=le("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),Tp=le("Cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]),r2=le("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),s2=le("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),i2=le("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]),av=le("Facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]),o2=le("FileJson",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1",key:"1oajmo"}],["path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1",key:"mpwhp6"}]]),a2=le("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}],["path",{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z",key:"nb9nel"}]]),lv=le("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),uv=le("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]),cv=le("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]),l2=le("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]]),u2=le("MessageCircle",[["path",{d:"m3 21 1.9-5.7a8.5 8.5 0 1 1 3.8 3.8z",key:"v2veuj"}]]),hv=le("Music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]),c2=le("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]),uo=le("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),h2=le("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),dv=le("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),fv=le("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),d2=le("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]),f2=le("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]),_d=le("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]),wd=le("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]),m2=le("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]),mv=le("StickyNote",[["path",{d:"M15.5 3H5a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h14a2 2 0 0 0 2-2V8.5L15.5 3Z",key:"1wis1t"}],["path",{d:"M15 3v6h6",key:"edgan2"}]]),Vs=le("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),xd=le("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),hn=le("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Dr=le("Youtube",[["path",{d:"M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17",key:"1q2vi4"}],["path",{d:"m10 15 5-3-5-3z",key:"1jp15x"}]]),p2=le("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);function pv(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=pv(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function pe(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=pv(t))&&(r&&(r+=" "),r+=e);return r}const g2=[{id:"household1",name:"Tubacki",icon:"🏠",color:"bg-blue-600"},{id:"household2",name:"Haushalt 2",icon:"🏡",color:"bg-green-600"},{id:"household3",name:"Haushalt 3",icon:"🏘️",color:"bg-purple-600"}],gv=B.createContext(void 0),bp="foodflash_current_household",y2=({children:t})=>{const[e,n]=B.useState(null),[r,s]=B.useState(!1);B.useEffect(()=>{const o=localStorage.getItem(bp);if(o)try{const l=JSON.parse(o);n(l),s(!0)}catch(l){console.error("Error loading household:",l)}},[]);const i=o=>{n(o),s(!0),localStorage.setItem(bp,JSON.stringify(o))};return c.jsx(gv.Provider,{value:{currentHousehold:e,setCurrentHousehold:i,households:g2,hasSelectedHousehold:r},children:t})},ko=()=>{const t=B.useContext(gv);if(!t)throw new Error("useHousehold must be used within HouseholdProvider");return t},v2=()=>{};var Sp={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yv=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},_2=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],l=t[n++],u=((s&7)<<18|(i&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},vv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,l=o?t[s+1]:0,u=s+2<t.length,d=u?t[s+2]:0,m=i>>2,p=(i&3)<<4|l>>4;let g=(l&15)<<2|d>>6,x=d&63;u||(x=64,o||(g=64)),r.push(n[m],n[p],n[g],n[x])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(yv(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):_2(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const d=s<t.length?n[t.charAt(s)]:64;++s;const p=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||l==null||d==null||p==null)throw new w2;const g=i<<2|l>>4;if(r.push(g),d!==64){const x=l<<4&240|d>>2;if(r.push(x),p!==64){const k=d<<6&192|p;r.push(k)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class w2 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const x2=function(t){const e=yv(t);return vv.encodeByteArray(e,!0)},sl=function(t){return x2(t).replace(/\./g,"")},E2=function(t){try{return vv.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T2(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b2=()=>T2().__FIREBASE_DEFAULTS__,S2=()=>{if(typeof process>"u"||typeof Sp>"u")return;const t=Sp.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},k2=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&E2(t[1]);return e&&JSON.parse(e)},Ed=()=>{try{return v2()||b2()||S2()||k2()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},I2=t=>{var e,n;return(n=(e=Ed())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},_v=t=>{const e=I2(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},wv=()=>{var t;return(t=Ed())==null?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A2{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Io(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function xv(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ev(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[sl(JSON.stringify(n)),sl(JSON.stringify(o)),""].join(".")}const Ui={};function R2(){const t={prod:[],emulator:[]};for(const e of Object.keys(Ui))Ui[e]?t.emulator.push(e):t.prod.push(e);return t}function N2(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let kp=!1;function Tv(t,e){if(typeof window>"u"||typeof document>"u"||!Io(window.location.host)||Ui[t]===e||Ui[t]||kp)return;Ui[t]=e;function n(g){return`__firebase__banner__${g}`}const r="__firebase__banner",i=R2().prod.length>0;function o(){const g=document.getElementById(r);g&&g.remove()}function l(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function u(g,x){g.setAttribute("width","24"),g.setAttribute("id",x),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function d(){const g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{kp=!0,o()},g}function m(g,x){g.setAttribute("id",x),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function p(){const g=N2(r),x=n("text"),k=document.getElementById(x)||document.createElement("span"),R=n("learnmore"),P=document.getElementById(R)||document.createElement("a"),T=n("preprendIcon"),y=document.getElementById(T)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){const S=g.element;l(S),m(P,R);const D=d();u(y,T),S.append(y,k,P,D),document.body.appendChild(S)}i?(k.innerText="Preview backend disconnected.",y.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(y.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,k.innerText="Preview backend running in this workspace."),k.setAttribute("id",x)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C2(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function P2(){var e;const t=(e=Ed())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function D2(){return!P2()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function j2(){try{return typeof indexedDB=="object"}catch{return!1}}function V2(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)==null?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L2="FirebaseError";class Xr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=L2,Object.setPrototypeOf(this,Xr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,bv.prototype.create)}}class bv{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?M2(i,r):"Error",l=`${this.serviceName}: ${o} (${s}).`;return new Xr(s,l,r)}}function M2(t,e){return t.replace(O2,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const O2=/\{\$([^}]+)}/g;function il(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(Ip(i)&&Ip(o)){if(!il(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Ip(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gt(t){return t&&t._delegate?t._delegate:t}class Ls{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ar="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F2{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new A2;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(z2(e))try{this.getOrInitializeService({instanceIdentifier:Ar})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Ar){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ar){return this.instances.has(e)}getOptions(e=Ar){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&o.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:U2(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ar){return this.component?this.component.multipleInstances?e:Ar:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function U2(t){return t===Ar?void 0:t}function z2(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B2{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new F2(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ce;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ce||(ce={}));const $2={debug:ce.DEBUG,verbose:ce.VERBOSE,info:ce.INFO,warn:ce.WARN,error:ce.ERROR,silent:ce.SILENT},H2=ce.INFO,q2={[ce.DEBUG]:"log",[ce.VERBOSE]:"log",[ce.INFO]:"info",[ce.WARN]:"warn",[ce.ERROR]:"error"},W2=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=q2[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Sv{constructor(e){this.name=e,this._logLevel=H2,this._logHandler=W2,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ce))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?$2[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ce.DEBUG,...e),this._logHandler(this,ce.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ce.VERBOSE,...e),this._logHandler(this,ce.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ce.INFO,...e),this._logHandler(this,ce.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ce.WARN,...e),this._logHandler(this,ce.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ce.ERROR,...e),this._logHandler(this,ce.ERROR,...e)}}const G2=(t,e)=>e.some(n=>t instanceof n);let Ap,Rp;function K2(){return Ap||(Ap=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Q2(){return Rp||(Rp=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const kv=new WeakMap,Jc=new WeakMap,Iv=new WeakMap,Gu=new WeakMap,Td=new WeakMap;function Y2(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Zn(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&kv.set(n,t)}).catch(()=>{}),Td.set(e,t),e}function X2(t){if(Jc.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Jc.set(t,e)}let Zc={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Jc.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Iv.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Zn(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function J2(t){Zc=t(Zc)}function Z2(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Ku(this),e,...n);return Iv.set(r,e.sort?e.sort():[e]),Zn(r)}:Q2().includes(t)?function(...e){return t.apply(Ku(this),e),Zn(kv.get(this))}:function(...e){return Zn(t.apply(Ku(this),e))}}function eT(t){return typeof t=="function"?Z2(t):(t instanceof IDBTransaction&&X2(t),G2(t,K2())?new Proxy(t,Zc):t)}function Zn(t){if(t instanceof IDBRequest)return Y2(t);if(Gu.has(t))return Gu.get(t);const e=eT(t);return e!==t&&(Gu.set(t,e),Td.set(e,t)),e}const Ku=t=>Td.get(t);function tT(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),l=Zn(o);return r&&o.addEventListener("upgradeneeded",u=>{r(Zn(o.result),u.oldVersion,u.newVersion,Zn(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{i&&u.addEventListener("close",()=>i()),s&&u.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),l}const nT=["get","getKey","getAll","getAllKeys","count"],rT=["put","add","delete","clear"],Qu=new Map;function Np(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Qu.get(e))return Qu.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=rT.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||nT.includes(n)))return;const i=async function(o,...l){const u=this.transaction(o,s?"readwrite":"readonly");let d=u.store;return r&&(d=d.index(l.shift())),(await Promise.all([d[n](...l),s&&u.done]))[0]};return Qu.set(e,i),i}J2(t=>({...t,get:(e,n,r)=>Np(e,n)||t.get(e,n,r),has:(e,n)=>!!Np(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sT{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(iT(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function iT(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const eh="@firebase/app",Cp="0.14.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kn=new Sv("@firebase/app"),oT="@firebase/app-compat",aT="@firebase/analytics-compat",lT="@firebase/analytics",uT="@firebase/app-check-compat",cT="@firebase/app-check",hT="@firebase/auth",dT="@firebase/auth-compat",fT="@firebase/database",mT="@firebase/data-connect",pT="@firebase/database-compat",gT="@firebase/functions",yT="@firebase/functions-compat",vT="@firebase/installations",_T="@firebase/installations-compat",wT="@firebase/messaging",xT="@firebase/messaging-compat",ET="@firebase/performance",TT="@firebase/performance-compat",bT="@firebase/remote-config",ST="@firebase/remote-config-compat",kT="@firebase/storage",IT="@firebase/storage-compat",AT="@firebase/firestore",RT="@firebase/ai",NT="@firebase/firestore-compat",CT="firebase",PT="12.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const th="[DEFAULT]",DT={[eh]:"fire-core",[oT]:"fire-core-compat",[lT]:"fire-analytics",[aT]:"fire-analytics-compat",[cT]:"fire-app-check",[uT]:"fire-app-check-compat",[hT]:"fire-auth",[dT]:"fire-auth-compat",[fT]:"fire-rtdb",[mT]:"fire-data-connect",[pT]:"fire-rtdb-compat",[gT]:"fire-fn",[yT]:"fire-fn-compat",[vT]:"fire-iid",[_T]:"fire-iid-compat",[wT]:"fire-fcm",[xT]:"fire-fcm-compat",[ET]:"fire-perf",[TT]:"fire-perf-compat",[bT]:"fire-rc",[ST]:"fire-rc-compat",[kT]:"fire-gcs",[IT]:"fire-gcs-compat",[AT]:"fire-fst",[NT]:"fire-fst-compat",[RT]:"fire-vertex","fire-js":"fire-js",[CT]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ol=new Map,jT=new Map,nh=new Map;function Pp(t,e){try{t.container.addComponent(e)}catch(n){kn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function co(t){const e=t.name;if(nh.has(e))return kn.debug(`There were multiple attempts to register component ${e}.`),!1;nh.set(e,t);for(const n of ol.values())Pp(n,t);for(const n of jT.values())Pp(n,t);return!0}function Av(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Rv(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VT={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},er=new bv("app","Firebase",VT);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LT{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ls("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw er.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nv=PT;function Cv(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:th,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw er.create("bad-app-name",{appName:String(s)});if(n||(n=wv()),!n)throw er.create("no-options");const i=ol.get(s);if(i){if(il(n,i.options)&&il(r,i.config))return i;throw er.create("duplicate-app",{appName:s})}const o=new B2(s);for(const u of nh.values())o.addComponent(u);const l=new LT(n,r,o);return ol.set(s,l),l}function Pv(t=th){const e=ol.get(t);if(!e&&t===th&&wv())return Cv();if(!e)throw er.create("no-app",{appName:t});return e}function tr(t,e,n){let r=DT[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const o=[`Unable to register library "${r}" with version "${e}":`];s&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),kn.warn(o.join(" "));return}co(new Ls(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MT="firebase-heartbeat-database",OT=1,ho="firebase-heartbeat-store";let Yu=null;function Dv(){return Yu||(Yu=tT(MT,OT,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(ho)}catch(n){console.warn(n)}}}}).catch(t=>{throw er.create("idb-open",{originalErrorMessage:t.message})})),Yu}async function FT(t){try{const n=(await Dv()).transaction(ho),r=await n.objectStore(ho).get(jv(t));return await n.done,r}catch(e){if(e instanceof Xr)kn.warn(e.message);else{const n=er.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});kn.warn(n.message)}}}async function Dp(t,e){try{const r=(await Dv()).transaction(ho,"readwrite");await r.objectStore(ho).put(e,jv(t)),await r.done}catch(n){if(n instanceof Xr)kn.warn(n.message);else{const r=er.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});kn.warn(r.message)}}}function jv(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UT=1024,zT=30;class BT{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new HT(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=jp();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>zT){const o=qT(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){kn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=jp(),{heartbeatsToSend:r,unsentEntries:s}=$T(this._heartbeatsCache.heartbeats),i=sl(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return kn.warn(n),""}}}function jp(){return new Date().toISOString().substring(0,10)}function $T(t,e=UT){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),Vp(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Vp(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class HT{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return j2()?V2().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await FT(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Dp(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Dp(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Vp(t){return sl(JSON.stringify({version:2,heartbeats:t})).length}function qT(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WT(t){co(new Ls("platform-logger",e=>new sT(e),"PRIVATE")),co(new Ls("heartbeat",e=>new BT(e),"PRIVATE")),tr(eh,Cp,t),tr(eh,Cp,"esm2020"),tr("fire-js","")}WT("");var Lp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var nr,Vv;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(E,_){function b(){}b.prototype=_.prototype,E.F=_.prototype,E.prototype=new b,E.prototype.constructor=E,E.D=function(I,A,N){for(var w=Array(arguments.length-2),Z=2;Z<arguments.length;Z++)w[Z-2]=arguments[Z];return _.prototype[A].apply(I,w)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(E,_,b){b||(b=0);const I=Array(16);if(typeof _=="string")for(var A=0;A<16;++A)I[A]=_.charCodeAt(b++)|_.charCodeAt(b++)<<8|_.charCodeAt(b++)<<16|_.charCodeAt(b++)<<24;else for(A=0;A<16;++A)I[A]=_[b++]|_[b++]<<8|_[b++]<<16|_[b++]<<24;_=E.g[0],b=E.g[1],A=E.g[2];let N=E.g[3],w;w=_+(N^b&(A^N))+I[0]+3614090360&4294967295,_=b+(w<<7&4294967295|w>>>25),w=N+(A^_&(b^A))+I[1]+3905402710&4294967295,N=_+(w<<12&4294967295|w>>>20),w=A+(b^N&(_^b))+I[2]+606105819&4294967295,A=N+(w<<17&4294967295|w>>>15),w=b+(_^A&(N^_))+I[3]+3250441966&4294967295,b=A+(w<<22&4294967295|w>>>10),w=_+(N^b&(A^N))+I[4]+4118548399&4294967295,_=b+(w<<7&4294967295|w>>>25),w=N+(A^_&(b^A))+I[5]+1200080426&4294967295,N=_+(w<<12&4294967295|w>>>20),w=A+(b^N&(_^b))+I[6]+2821735955&4294967295,A=N+(w<<17&4294967295|w>>>15),w=b+(_^A&(N^_))+I[7]+4249261313&4294967295,b=A+(w<<22&4294967295|w>>>10),w=_+(N^b&(A^N))+I[8]+1770035416&4294967295,_=b+(w<<7&4294967295|w>>>25),w=N+(A^_&(b^A))+I[9]+2336552879&4294967295,N=_+(w<<12&4294967295|w>>>20),w=A+(b^N&(_^b))+I[10]+4294925233&4294967295,A=N+(w<<17&4294967295|w>>>15),w=b+(_^A&(N^_))+I[11]+2304563134&4294967295,b=A+(w<<22&4294967295|w>>>10),w=_+(N^b&(A^N))+I[12]+1804603682&4294967295,_=b+(w<<7&4294967295|w>>>25),w=N+(A^_&(b^A))+I[13]+4254626195&4294967295,N=_+(w<<12&4294967295|w>>>20),w=A+(b^N&(_^b))+I[14]+2792965006&4294967295,A=N+(w<<17&4294967295|w>>>15),w=b+(_^A&(N^_))+I[15]+1236535329&4294967295,b=A+(w<<22&4294967295|w>>>10),w=_+(A^N&(b^A))+I[1]+4129170786&4294967295,_=b+(w<<5&4294967295|w>>>27),w=N+(b^A&(_^b))+I[6]+3225465664&4294967295,N=_+(w<<9&4294967295|w>>>23),w=A+(_^b&(N^_))+I[11]+643717713&4294967295,A=N+(w<<14&4294967295|w>>>18),w=b+(N^_&(A^N))+I[0]+3921069994&4294967295,b=A+(w<<20&4294967295|w>>>12),w=_+(A^N&(b^A))+I[5]+3593408605&4294967295,_=b+(w<<5&4294967295|w>>>27),w=N+(b^A&(_^b))+I[10]+38016083&4294967295,N=_+(w<<9&4294967295|w>>>23),w=A+(_^b&(N^_))+I[15]+3634488961&4294967295,A=N+(w<<14&4294967295|w>>>18),w=b+(N^_&(A^N))+I[4]+3889429448&4294967295,b=A+(w<<20&4294967295|w>>>12),w=_+(A^N&(b^A))+I[9]+568446438&4294967295,_=b+(w<<5&4294967295|w>>>27),w=N+(b^A&(_^b))+I[14]+3275163606&4294967295,N=_+(w<<9&4294967295|w>>>23),w=A+(_^b&(N^_))+I[3]+4107603335&4294967295,A=N+(w<<14&4294967295|w>>>18),w=b+(N^_&(A^N))+I[8]+1163531501&4294967295,b=A+(w<<20&4294967295|w>>>12),w=_+(A^N&(b^A))+I[13]+2850285829&4294967295,_=b+(w<<5&4294967295|w>>>27),w=N+(b^A&(_^b))+I[2]+4243563512&4294967295,N=_+(w<<9&4294967295|w>>>23),w=A+(_^b&(N^_))+I[7]+1735328473&4294967295,A=N+(w<<14&4294967295|w>>>18),w=b+(N^_&(A^N))+I[12]+2368359562&4294967295,b=A+(w<<20&4294967295|w>>>12),w=_+(b^A^N)+I[5]+4294588738&4294967295,_=b+(w<<4&4294967295|w>>>28),w=N+(_^b^A)+I[8]+2272392833&4294967295,N=_+(w<<11&4294967295|w>>>21),w=A+(N^_^b)+I[11]+1839030562&4294967295,A=N+(w<<16&4294967295|w>>>16),w=b+(A^N^_)+I[14]+4259657740&4294967295,b=A+(w<<23&4294967295|w>>>9),w=_+(b^A^N)+I[1]+2763975236&4294967295,_=b+(w<<4&4294967295|w>>>28),w=N+(_^b^A)+I[4]+1272893353&4294967295,N=_+(w<<11&4294967295|w>>>21),w=A+(N^_^b)+I[7]+4139469664&4294967295,A=N+(w<<16&4294967295|w>>>16),w=b+(A^N^_)+I[10]+3200236656&4294967295,b=A+(w<<23&4294967295|w>>>9),w=_+(b^A^N)+I[13]+681279174&4294967295,_=b+(w<<4&4294967295|w>>>28),w=N+(_^b^A)+I[0]+3936430074&4294967295,N=_+(w<<11&4294967295|w>>>21),w=A+(N^_^b)+I[3]+3572445317&4294967295,A=N+(w<<16&4294967295|w>>>16),w=b+(A^N^_)+I[6]+76029189&4294967295,b=A+(w<<23&4294967295|w>>>9),w=_+(b^A^N)+I[9]+3654602809&4294967295,_=b+(w<<4&4294967295|w>>>28),w=N+(_^b^A)+I[12]+3873151461&4294967295,N=_+(w<<11&4294967295|w>>>21),w=A+(N^_^b)+I[15]+530742520&4294967295,A=N+(w<<16&4294967295|w>>>16),w=b+(A^N^_)+I[2]+3299628645&4294967295,b=A+(w<<23&4294967295|w>>>9),w=_+(A^(b|~N))+I[0]+4096336452&4294967295,_=b+(w<<6&4294967295|w>>>26),w=N+(b^(_|~A))+I[7]+1126891415&4294967295,N=_+(w<<10&4294967295|w>>>22),w=A+(_^(N|~b))+I[14]+2878612391&4294967295,A=N+(w<<15&4294967295|w>>>17),w=b+(N^(A|~_))+I[5]+4237533241&4294967295,b=A+(w<<21&4294967295|w>>>11),w=_+(A^(b|~N))+I[12]+1700485571&4294967295,_=b+(w<<6&4294967295|w>>>26),w=N+(b^(_|~A))+I[3]+2399980690&4294967295,N=_+(w<<10&4294967295|w>>>22),w=A+(_^(N|~b))+I[10]+4293915773&4294967295,A=N+(w<<15&4294967295|w>>>17),w=b+(N^(A|~_))+I[1]+2240044497&4294967295,b=A+(w<<21&4294967295|w>>>11),w=_+(A^(b|~N))+I[8]+1873313359&4294967295,_=b+(w<<6&4294967295|w>>>26),w=N+(b^(_|~A))+I[15]+4264355552&4294967295,N=_+(w<<10&4294967295|w>>>22),w=A+(_^(N|~b))+I[6]+2734768916&4294967295,A=N+(w<<15&4294967295|w>>>17),w=b+(N^(A|~_))+I[13]+1309151649&4294967295,b=A+(w<<21&4294967295|w>>>11),w=_+(A^(b|~N))+I[4]+4149444226&4294967295,_=b+(w<<6&4294967295|w>>>26),w=N+(b^(_|~A))+I[11]+3174756917&4294967295,N=_+(w<<10&4294967295|w>>>22),w=A+(_^(N|~b))+I[2]+718787259&4294967295,A=N+(w<<15&4294967295|w>>>17),w=b+(N^(A|~_))+I[9]+3951481745&4294967295,E.g[0]=E.g[0]+_&4294967295,E.g[1]=E.g[1]+(A+(w<<21&4294967295|w>>>11))&4294967295,E.g[2]=E.g[2]+A&4294967295,E.g[3]=E.g[3]+N&4294967295}r.prototype.v=function(E,_){_===void 0&&(_=E.length);const b=_-this.blockSize,I=this.C;let A=this.h,N=0;for(;N<_;){if(A==0)for(;N<=b;)s(this,E,N),N+=this.blockSize;if(typeof E=="string"){for(;N<_;)if(I[A++]=E.charCodeAt(N++),A==this.blockSize){s(this,I),A=0;break}}else for(;N<_;)if(I[A++]=E[N++],A==this.blockSize){s(this,I),A=0;break}}this.h=A,this.o+=_},r.prototype.A=function(){var E=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);E[0]=128;for(var _=1;_<E.length-8;++_)E[_]=0;_=this.o*8;for(var b=E.length-8;b<E.length;++b)E[b]=_&255,_/=256;for(this.v(E),E=Array(16),_=0,b=0;b<4;++b)for(let I=0;I<32;I+=8)E[_++]=this.g[b]>>>I&255;return E};function i(E,_){var b=l;return Object.prototype.hasOwnProperty.call(b,E)?b[E]:b[E]=_(E)}function o(E,_){this.h=_;const b=[];let I=!0;for(let A=E.length-1;A>=0;A--){const N=E[A]|0;I&&N==_||(b[A]=N,I=!1)}this.g=b}var l={};function u(E){return-128<=E&&E<128?i(E,function(_){return new o([_|0],_<0?-1:0)}):new o([E|0],E<0?-1:0)}function d(E){if(isNaN(E)||!isFinite(E))return p;if(E<0)return P(d(-E));const _=[];let b=1;for(let I=0;E>=b;I++)_[I]=E/b|0,b*=4294967296;return new o(_,0)}function m(E,_){if(E.length==0)throw Error("number format error: empty string");if(_=_||10,_<2||36<_)throw Error("radix out of range: "+_);if(E.charAt(0)=="-")return P(m(E.substring(1),_));if(E.indexOf("-")>=0)throw Error('number format error: interior "-" character');const b=d(Math.pow(_,8));let I=p;for(let N=0;N<E.length;N+=8){var A=Math.min(8,E.length-N);const w=parseInt(E.substring(N,N+A),_);A<8?(A=d(Math.pow(_,A)),I=I.j(A).add(d(w))):(I=I.j(b),I=I.add(d(w)))}return I}var p=u(0),g=u(1),x=u(16777216);t=o.prototype,t.m=function(){if(R(this))return-P(this).m();let E=0,_=1;for(let b=0;b<this.g.length;b++){const I=this.i(b);E+=(I>=0?I:4294967296+I)*_,_*=4294967296}return E},t.toString=function(E){if(E=E||10,E<2||36<E)throw Error("radix out of range: "+E);if(k(this))return"0";if(R(this))return"-"+P(this).toString(E);const _=d(Math.pow(E,6));var b=this;let I="";for(;;){const A=D(b,_).g;b=T(b,A.j(_));let N=((b.g.length>0?b.g[0]:b.h)>>>0).toString(E);if(b=A,k(b))return N+I;for(;N.length<6;)N="0"+N;I=N+I}},t.i=function(E){return E<0?0:E<this.g.length?this.g[E]:this.h};function k(E){if(E.h!=0)return!1;for(let _=0;_<E.g.length;_++)if(E.g[_]!=0)return!1;return!0}function R(E){return E.h==-1}t.l=function(E){return E=T(this,E),R(E)?-1:k(E)?0:1};function P(E){const _=E.g.length,b=[];for(let I=0;I<_;I++)b[I]=~E.g[I];return new o(b,~E.h).add(g)}t.abs=function(){return R(this)?P(this):this},t.add=function(E){const _=Math.max(this.g.length,E.g.length),b=[];let I=0;for(let A=0;A<=_;A++){let N=I+(this.i(A)&65535)+(E.i(A)&65535),w=(N>>>16)+(this.i(A)>>>16)+(E.i(A)>>>16);I=w>>>16,N&=65535,w&=65535,b[A]=w<<16|N}return new o(b,b[b.length-1]&-2147483648?-1:0)};function T(E,_){return E.add(P(_))}t.j=function(E){if(k(this)||k(E))return p;if(R(this))return R(E)?P(this).j(P(E)):P(P(this).j(E));if(R(E))return P(this.j(P(E)));if(this.l(x)<0&&E.l(x)<0)return d(this.m()*E.m());const _=this.g.length+E.g.length,b=[];for(var I=0;I<2*_;I++)b[I]=0;for(I=0;I<this.g.length;I++)for(let A=0;A<E.g.length;A++){const N=this.i(I)>>>16,w=this.i(I)&65535,Z=E.i(A)>>>16,ge=E.i(A)&65535;b[2*I+2*A]+=w*ge,y(b,2*I+2*A),b[2*I+2*A+1]+=N*ge,y(b,2*I+2*A+1),b[2*I+2*A+1]+=w*Z,y(b,2*I+2*A+1),b[2*I+2*A+2]+=N*Z,y(b,2*I+2*A+2)}for(E=0;E<_;E++)b[E]=b[2*E+1]<<16|b[2*E];for(E=_;E<2*_;E++)b[E]=0;return new o(b,0)};function y(E,_){for(;(E[_]&65535)!=E[_];)E[_+1]+=E[_]>>>16,E[_]&=65535,_++}function S(E,_){this.g=E,this.h=_}function D(E,_){if(k(_))throw Error("division by zero");if(k(E))return new S(p,p);if(R(E))return _=D(P(E),_),new S(P(_.g),P(_.h));if(R(_))return _=D(E,P(_)),new S(P(_.g),_.h);if(E.g.length>30){if(R(E)||R(_))throw Error("slowDivide_ only works with positive integers.");for(var b=g,I=_;I.l(E)<=0;)b=M(b),I=M(I);var A=O(b,1),N=O(I,1);for(I=O(I,2),b=O(b,2);!k(I);){var w=N.add(I);w.l(E)<=0&&(A=A.add(b),N=w),I=O(I,1),b=O(b,1)}return _=T(E,A.j(_)),new S(A,_)}for(A=p;E.l(_)>=0;){for(b=Math.max(1,Math.floor(E.m()/_.m())),I=Math.ceil(Math.log(b)/Math.LN2),I=I<=48?1:Math.pow(2,I-48),N=d(b),w=N.j(_);R(w)||w.l(E)>0;)b-=I,N=d(b),w=N.j(_);k(N)&&(N=g),A=A.add(N),E=T(E,w)}return new S(A,E)}t.B=function(E){return D(this,E).h},t.and=function(E){const _=Math.max(this.g.length,E.g.length),b=[];for(let I=0;I<_;I++)b[I]=this.i(I)&E.i(I);return new o(b,this.h&E.h)},t.or=function(E){const _=Math.max(this.g.length,E.g.length),b=[];for(let I=0;I<_;I++)b[I]=this.i(I)|E.i(I);return new o(b,this.h|E.h)},t.xor=function(E){const _=Math.max(this.g.length,E.g.length),b=[];for(let I=0;I<_;I++)b[I]=this.i(I)^E.i(I);return new o(b,this.h^E.h)};function M(E){const _=E.g.length+1,b=[];for(let I=0;I<_;I++)b[I]=E.i(I)<<1|E.i(I-1)>>>31;return new o(b,E.h)}function O(E,_){const b=_>>5;_%=32;const I=E.g.length-b,A=[];for(let N=0;N<I;N++)A[N]=_>0?E.i(N+b)>>>_|E.i(N+b+1)<<32-_:E.i(N+b);return new o(A,E.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,Vv=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=m,nr=o}).apply(typeof Lp<"u"?Lp:typeof self<"u"?self:typeof window<"u"?window:{});var ua=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Lv,Ii,Mv,Aa,rh,Ov,Fv,Uv;(function(){var t,e=Object.defineProperty;function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof ua=="object"&&ua];for(var h=0;h<a.length;++h){var f=a[h];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function s(a,h){if(h)e:{var f=r;a=a.split(".");for(var v=0;v<a.length-1;v++){var C=a[v];if(!(C in f))break e;f=f[C]}a=a[a.length-1],v=f[a],h=h(v),h!=v&&h!=null&&e(f,a,{configurable:!0,writable:!0,value:h})}}s("Symbol.dispose",function(a){return a||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(a){return a||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(a){return a||function(h){var f=[],v;for(v in h)Object.prototype.hasOwnProperty.call(h,v)&&f.push([v,h[v]]);return f}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},o=this||self;function l(a){var h=typeof a;return h=="object"&&a!=null||h=="function"}function u(a,h,f){return a.call.apply(a.bind,arguments)}function d(a,h,f){return d=u,d.apply(null,arguments)}function m(a,h){var f=Array.prototype.slice.call(arguments,1);return function(){var v=f.slice();return v.push.apply(v,arguments),a.apply(this,v)}}function p(a,h){function f(){}f.prototype=h.prototype,a.Z=h.prototype,a.prototype=new f,a.prototype.constructor=a,a.Ob=function(v,C,j){for(var z=Array(arguments.length-2),re=2;re<arguments.length;re++)z[re-2]=arguments[re];return h.prototype[C].apply(v,z)}}var g=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?a=>a&&AsyncContext.Snapshot.wrap(a):a=>a;function x(a){const h=a.length;if(h>0){const f=Array(h);for(let v=0;v<h;v++)f[v]=a[v];return f}return[]}function k(a,h){for(let v=1;v<arguments.length;v++){const C=arguments[v];var f=typeof C;if(f=f!="object"?f:C?Array.isArray(C)?"array":f:"null",f=="array"||f=="object"&&typeof C.length=="number"){f=a.length||0;const j=C.length||0;a.length=f+j;for(let z=0;z<j;z++)a[f+z]=C[z]}else a.push(C)}}class R{constructor(h,f){this.i=h,this.j=f,this.h=0,this.g=null}get(){let h;return this.h>0?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function P(a){o.setTimeout(()=>{throw a},0)}function T(){var a=E;let h=null;return a.g&&(h=a.g,a.g=a.g.next,a.g||(a.h=null),h.next=null),h}class y{constructor(){this.h=this.g=null}add(h,f){const v=S.get();v.set(h,f),this.h?this.h.next=v:this.g=v,this.h=v}}var S=new R(()=>new D,a=>a.reset());class D{constructor(){this.next=this.g=this.h=null}set(h,f){this.h=h,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let M,O=!1,E=new y,_=()=>{const a=Promise.resolve(void 0);M=()=>{a.then(b)}};function b(){for(var a;a=T();){try{a.h.call(a.g)}catch(f){P(f)}var h=S;h.j(a),h.h<100&&(h.h++,a.next=h.g,h.g=a)}O=!1}function I(){this.u=this.u,this.C=this.C}I.prototype.u=!1,I.prototype.dispose=function(){this.u||(this.u=!0,this.N())},I.prototype[Symbol.dispose]=function(){this.dispose()},I.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function A(a,h){this.type=a,this.g=this.target=h,this.defaultPrevented=!1}A.prototype.h=function(){this.defaultPrevented=!0};var N=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var a=!1,h=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const f=()=>{};o.addEventListener("test",f,h),o.removeEventListener("test",f,h)}catch{}return a}();function w(a){return/^[\s\xa0]*$/.test(a)}function Z(a,h){A.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a&&this.init(a,h)}p(Z,A),Z.prototype.init=function(a,h){const f=this.type=a.type,v=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;this.target=a.target||a.srcElement,this.g=h,h=a.relatedTarget,h||(f=="mouseover"?h=a.fromElement:f=="mouseout"&&(h=a.toElement)),this.relatedTarget=h,v?(this.clientX=v.clientX!==void 0?v.clientX:v.pageX,this.clientY=v.clientY!==void 0?v.clientY:v.pageY,this.screenX=v.screenX||0,this.screenY=v.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=a.pointerType,this.state=a.state,this.i=a,a.defaultPrevented&&Z.Z.h.call(this)},Z.prototype.h=function(){Z.Z.h.call(this);const a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var ge="closure_listenable_"+(Math.random()*1e6|0),Ue=0;function ne(a,h,f,v,C){this.listener=a,this.proxy=null,this.src=h,this.type=f,this.capture=!!v,this.ha=C,this.key=++Ue,this.da=this.fa=!1}function U(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function Q(a,h,f){for(const v in a)h.call(f,a[v],v,a)}function q(a,h){for(const f in a)h.call(void 0,a[f],f,a)}function K(a){const h={};for(const f in a)h[f]=a[f];return h}const J="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function G(a,h){let f,v;for(let C=1;C<arguments.length;C++){v=arguments[C];for(f in v)a[f]=v[f];for(let j=0;j<J.length;j++)f=J[j],Object.prototype.hasOwnProperty.call(v,f)&&(a[f]=v[f])}}function se(a){this.src=a,this.g={},this.h=0}se.prototype.add=function(a,h,f,v,C){const j=a.toString();a=this.g[j],a||(a=this.g[j]=[],this.h++);const z=_e(a,h,v,C);return z>-1?(h=a[z],f||(h.fa=!1)):(h=new ne(h,this.src,j,!!v,C),h.fa=f,a.push(h)),h};function ze(a,h){const f=h.type;if(f in a.g){var v=a.g[f],C=Array.prototype.indexOf.call(v,h,void 0),j;(j=C>=0)&&Array.prototype.splice.call(v,C,1),j&&(U(h),a.g[f].length==0&&(delete a.g[f],a.h--))}}function _e(a,h,f,v){for(let C=0;C<a.length;++C){const j=a[C];if(!j.da&&j.listener==h&&j.capture==!!f&&j.ha==v)return C}return-1}var _t="closure_lm_"+(Math.random()*1e6|0),es={};function en(a,h,f,v,C){if(Array.isArray(h)){for(let j=0;j<h.length;j++)en(a,h[j],f,v,C);return null}return f=_f(f),a&&a[ge]?a.J(h,f,l(v)?!!v.capture:!1,C):Ww(a,h,f,!1,v,C)}function Ww(a,h,f,v,C,j){if(!h)throw Error("Invalid event type");const z=l(C)?!!C.capture:!!C;let re=nu(a);if(re||(a[_t]=re=new se(a)),f=re.add(h,f,v,z,j),f.proxy)return f;if(v=Gw(),f.proxy=v,v.src=a,v.listener=f,a.addEventListener)N||(C=z),C===void 0&&(C=!1),a.addEventListener(h.toString(),v,C);else if(a.attachEvent)a.attachEvent(vf(h.toString()),v);else if(a.addListener&&a.removeListener)a.addListener(v);else throw Error("addEventListener and attachEvent are unavailable.");return f}function Gw(){function a(f){return h.call(a.src,a.listener,f)}const h=Kw;return a}function yf(a,h,f,v,C){if(Array.isArray(h))for(var j=0;j<h.length;j++)yf(a,h[j],f,v,C);else v=l(v)?!!v.capture:!!v,f=_f(f),a&&a[ge]?(a=a.i,j=String(h).toString(),j in a.g&&(h=a.g[j],f=_e(h,f,v,C),f>-1&&(U(h[f]),Array.prototype.splice.call(h,f,1),h.length==0&&(delete a.g[j],a.h--)))):a&&(a=nu(a))&&(h=a.g[h.toString()],a=-1,h&&(a=_e(h,f,v,C)),(f=a>-1?h[a]:null)&&tu(f))}function tu(a){if(typeof a!="number"&&a&&!a.da){var h=a.src;if(h&&h[ge])ze(h.i,a);else{var f=a.type,v=a.proxy;h.removeEventListener?h.removeEventListener(f,v,a.capture):h.detachEvent?h.detachEvent(vf(f),v):h.addListener&&h.removeListener&&h.removeListener(v),(f=nu(h))?(ze(f,a),f.h==0&&(f.src=null,h[_t]=null)):U(a)}}}function vf(a){return a in es?es[a]:es[a]="on"+a}function Kw(a,h){if(a.da)a=!0;else{h=new Z(h,this);const f=a.listener,v=a.ha||a.src;a.fa&&tu(a),a=f.call(v,h)}return a}function nu(a){return a=a[_t],a instanceof se?a:null}var ru="__closure_events_fn_"+(Math.random()*1e9>>>0);function _f(a){return typeof a=="function"?a:(a[ru]||(a[ru]=function(h){return a.handleEvent(h)}),a[ru])}function rt(){I.call(this),this.i=new se(this),this.M=this,this.G=null}p(rt,I),rt.prototype[ge]=!0,rt.prototype.removeEventListener=function(a,h,f,v){yf(this,a,h,f,v)};function ht(a,h){var f,v=a.G;if(v)for(f=[];v;v=v.G)f.push(v);if(a=a.M,v=h.type||h,typeof h=="string")h=new A(h,a);else if(h instanceof A)h.target=h.target||a;else{var C=h;h=new A(v,a),G(h,C)}C=!0;let j,z;if(f)for(z=f.length-1;z>=0;z--)j=h.g=f[z],C=jo(j,v,!0,h)&&C;if(j=h.g=a,C=jo(j,v,!0,h)&&C,C=jo(j,v,!1,h)&&C,f)for(z=0;z<f.length;z++)j=h.g=f[z],C=jo(j,v,!1,h)&&C}rt.prototype.N=function(){if(rt.Z.N.call(this),this.i){var a=this.i;for(const h in a.g){const f=a.g[h];for(let v=0;v<f.length;v++)U(f[v]);delete a.g[h],a.h--}}this.G=null},rt.prototype.J=function(a,h,f,v){return this.i.add(String(a),h,!1,f,v)},rt.prototype.K=function(a,h,f,v){return this.i.add(String(a),h,!0,f,v)};function jo(a,h,f,v){if(h=a.i.g[String(h)],!h)return!0;h=h.concat();let C=!0;for(let j=0;j<h.length;++j){const z=h[j];if(z&&!z.da&&z.capture==f){const re=z.listener,Be=z.ha||z.src;z.fa&&ze(a.i,z),C=re.call(Be,v)!==!1&&C}}return C&&!v.defaultPrevented}function Qw(a,h){if(typeof a!="function")if(a&&typeof a.handleEvent=="function")a=d(a.handleEvent,a);else throw Error("Invalid listener argument");return Number(h)>2147483647?-1:o.setTimeout(a,h||0)}function wf(a){a.g=Qw(()=>{a.g=null,a.i&&(a.i=!1,wf(a))},a.l);const h=a.h;a.h=null,a.m.apply(null,h)}class Yw extends I{constructor(h,f){super(),this.m=h,this.l=f,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:wf(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Js(a){I.call(this),this.h=a,this.g={}}p(Js,I);var xf=[];function Ef(a){Q(a.g,function(h,f){this.g.hasOwnProperty(f)&&tu(h)},a),a.g={}}Js.prototype.N=function(){Js.Z.N.call(this),Ef(this)},Js.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var su=o.JSON.stringify,Xw=o.JSON.parse,Jw=class{stringify(a){return o.JSON.stringify(a,void 0)}parse(a){return o.JSON.parse(a,void 0)}};function Tf(){}function bf(){}var Zs={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function iu(){A.call(this,"d")}p(iu,A);function ou(){A.call(this,"c")}p(ou,A);var xr={},Sf=null;function Vo(){return Sf=Sf||new rt}xr.Ia="serverreachability";function kf(a){A.call(this,xr.Ia,a)}p(kf,A);function ei(a){const h=Vo();ht(h,new kf(h))}xr.STAT_EVENT="statevent";function If(a,h){A.call(this,xr.STAT_EVENT,a),this.stat=h}p(If,A);function dt(a){const h=Vo();ht(h,new If(h,a))}xr.Ja="timingevent";function Af(a,h){A.call(this,xr.Ja,a),this.size=h}p(Af,A);function ti(a,h){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){a()},h)}function ni(){this.g=!0}ni.prototype.ua=function(){this.g=!1};function Zw(a,h,f,v,C,j){a.info(function(){if(a.g)if(j){var z="",re=j.split("&");for(let me=0;me<re.length;me++){var Be=re[me].split("=");if(Be.length>1){const We=Be[0];Be=Be[1];const nn=We.split("_");z=nn.length>=2&&nn[1]=="type"?z+(We+"="+Be+"&"):z+(We+"=redacted&")}}}else z=null;else z=j;return"XMLHTTP REQ ("+v+") [attempt "+C+"]: "+h+`
`+f+`
`+z})}function e1(a,h,f,v,C,j,z){a.info(function(){return"XMLHTTP RESP ("+v+") [ attempt "+C+"]: "+h+`
`+f+`
`+j+" "+z})}function ts(a,h,f,v){a.info(function(){return"XMLHTTP TEXT ("+h+"): "+n1(a,f)+(v?" "+v:"")})}function t1(a,h){a.info(function(){return"TIMEOUT: "+h})}ni.prototype.info=function(){};function n1(a,h){if(!a.g)return h;if(!h)return null;try{const j=JSON.parse(h);if(j){for(a=0;a<j.length;a++)if(Array.isArray(j[a])){var f=j[a];if(!(f.length<2)){var v=f[1];if(Array.isArray(v)&&!(v.length<1)){var C=v[0];if(C!="noop"&&C!="stop"&&C!="close")for(let z=1;z<v.length;z++)v[z]=""}}}}return su(j)}catch{return h}}var Lo={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Rf={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Nf;function au(){}p(au,Tf),au.prototype.g=function(){return new XMLHttpRequest},Nf=new au;function ri(a){return encodeURIComponent(String(a))}function r1(a){var h=1;a=a.split(":");const f=[];for(;h>0&&a.length;)f.push(a.shift()),h--;return a.length&&f.push(a.join(":")),f}function Nn(a,h,f,v){this.j=a,this.i=h,this.l=f,this.S=v||1,this.V=new Js(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Cf}function Cf(){this.i=null,this.g="",this.h=!1}var Pf={},lu={};function uu(a,h,f){a.M=1,a.A=Oo(tn(h)),a.u=f,a.R=!0,Df(a,null)}function Df(a,h){a.F=Date.now(),Mo(a),a.B=tn(a.A);var f=a.B,v=a.S;Array.isArray(v)||(v=[String(v)]),Wf(f.i,"t",v),a.C=0,f=a.j.L,a.h=new Cf,a.g=cm(a.j,f?h:null,!a.u),a.P>0&&(a.O=new Yw(d(a.Y,a,a.g),a.P)),h=a.V,f=a.g,v=a.ba;var C="readystatechange";Array.isArray(C)||(C&&(xf[0]=C.toString()),C=xf);for(let j=0;j<C.length;j++){const z=en(f,C[j],v||h.handleEvent,!1,h.h||h);if(!z)break;h.g[z.key]=z}h=a.J?K(a.J):{},a.u?(a.v||(a.v="POST"),h["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.B,a.v,a.u,h)):(a.v="GET",a.g.ea(a.B,a.v,null,h)),ei(),Zw(a.i,a.v,a.B,a.l,a.S,a.u)}Nn.prototype.ba=function(a){a=a.target;const h=this.O;h&&Dn(a)==3?h.j():this.Y(a)},Nn.prototype.Y=function(a){try{if(a==this.g)e:{const re=Dn(this.g),Be=this.g.ya(),me=this.g.ca();if(!(re<3)&&(re!=3||this.g&&(this.h.h||this.g.la()||Zf(this.g)))){this.K||re!=4||Be==7||(Be==8||me<=0?ei(3):ei(2)),cu(this);var h=this.g.ca();this.X=h;var f=s1(this);if(this.o=h==200,e1(this.i,this.v,this.B,this.l,this.S,re,h),this.o){if(this.U&&!this.L){t:{if(this.g){var v,C=this.g;if((v=C.g?C.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(v)){var j=v;break t}}j=null}if(a=j)ts(this.i,this.l,a,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,hu(this,a);else{this.o=!1,this.m=3,dt(12),Er(this),si(this);break e}}if(this.R){a=!0;let We;for(;!this.K&&this.C<f.length;)if(We=i1(this,f),We==lu){re==4&&(this.m=4,dt(14),a=!1),ts(this.i,this.l,null,"[Incomplete Response]");break}else if(We==Pf){this.m=4,dt(15),ts(this.i,this.l,f,"[Invalid Chunk]"),a=!1;break}else ts(this.i,this.l,We,null),hu(this,We);if(jf(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),re!=4||f.length!=0||this.h.h||(this.m=1,dt(16),a=!1),this.o=this.o&&a,!a)ts(this.i,this.l,f,"[Invalid Chunked Response]"),Er(this),si(this);else if(f.length>0&&!this.W){this.W=!0;var z=this.j;z.g==this&&z.aa&&!z.P&&(z.j.info("Great, no buffering proxy detected. Bytes received: "+f.length),_u(z),z.P=!0,dt(11))}}else ts(this.i,this.l,f,null),hu(this,f);re==4&&Er(this),this.o&&!this.K&&(re==4?om(this.j,this):(this.o=!1,Mo(this)))}else _1(this.g),h==400&&f.indexOf("Unknown SID")>0?(this.m=3,dt(12)):(this.m=0,dt(13)),Er(this),si(this)}}}catch{}finally{}};function s1(a){if(!jf(a))return a.g.la();const h=Zf(a.g);if(h==="")return"";let f="";const v=h.length,C=Dn(a.g)==4;if(!a.h.i){if(typeof TextDecoder>"u")return Er(a),si(a),"";a.h.i=new o.TextDecoder}for(let j=0;j<v;j++)a.h.h=!0,f+=a.h.i.decode(h[j],{stream:!(C&&j==v-1)});return h.length=0,a.h.g+=f,a.C=0,a.h.g}function jf(a){return a.g?a.v=="GET"&&a.M!=2&&a.j.Aa:!1}function i1(a,h){var f=a.C,v=h.indexOf(`
`,f);return v==-1?lu:(f=Number(h.substring(f,v)),isNaN(f)?Pf:(v+=1,v+f>h.length?lu:(h=h.slice(v,v+f),a.C=v+f,h)))}Nn.prototype.cancel=function(){this.K=!0,Er(this)};function Mo(a){a.T=Date.now()+a.H,Vf(a,a.H)}function Vf(a,h){if(a.D!=null)throw Error("WatchDog timer not null");a.D=ti(d(a.aa,a),h)}function cu(a){a.D&&(o.clearTimeout(a.D),a.D=null)}Nn.prototype.aa=function(){this.D=null;const a=Date.now();a-this.T>=0?(t1(this.i,this.B),this.M!=2&&(ei(),dt(17)),Er(this),this.m=2,si(this)):Vf(this,this.T-a)};function si(a){a.j.I==0||a.K||om(a.j,a)}function Er(a){cu(a);var h=a.O;h&&typeof h.dispose=="function"&&h.dispose(),a.O=null,Ef(a.V),a.g&&(h=a.g,a.g=null,h.abort(),h.dispose())}function hu(a,h){try{var f=a.j;if(f.I!=0&&(f.g==a||du(f.h,a))){if(!a.L&&du(f.h,a)&&f.I==3){try{var v=f.Ba.g.parse(h)}catch{v=null}if(Array.isArray(v)&&v.length==3){var C=v;if(C[0]==0){e:if(!f.v){if(f.g)if(f.g.F+3e3<a.F)$o(f),zo(f);else break e;vu(f),dt(18)}}else f.xa=C[1],0<f.xa-f.K&&C[2]<37500&&f.F&&f.A==0&&!f.C&&(f.C=ti(d(f.Va,f),6e3));Of(f.h)<=1&&f.ta&&(f.ta=void 0)}else br(f,11)}else if((a.L||f.g==a)&&$o(f),!w(h))for(C=f.Ba.g.parse(h),h=0;h<C.length;h++){let me=C[h];const We=me[0];if(!(We<=f.K))if(f.K=We,me=me[1],f.I==2)if(me[0]=="c"){f.M=me[1],f.ba=me[2];const nn=me[3];nn!=null&&(f.ka=nn,f.j.info("VER="+f.ka));const Sr=me[4];Sr!=null&&(f.za=Sr,f.j.info("SVER="+f.za));const jn=me[5];jn!=null&&typeof jn=="number"&&jn>0&&(v=1.5*jn,f.O=v,f.j.info("backChannelRequestTimeoutMs_="+v)),v=f;const Vn=a.g;if(Vn){const qo=Vn.g?Vn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(qo){var j=v.h;j.g||qo.indexOf("spdy")==-1&&qo.indexOf("quic")==-1&&qo.indexOf("h2")==-1||(j.j=j.l,j.g=new Set,j.h&&(fu(j,j.h),j.h=null))}if(v.G){const wu=Vn.g?Vn.g.getResponseHeader("X-HTTP-Session-Id"):null;wu&&(v.wa=wu,we(v.J,v.G,wu))}}f.I=3,f.l&&f.l.ra(),f.aa&&(f.T=Date.now()-a.F,f.j.info("Handshake RTT: "+f.T+"ms")),v=f;var z=a;if(v.na=um(v,v.L?v.ba:null,v.W),z.L){Ff(v.h,z);var re=z,Be=v.O;Be&&(re.H=Be),re.D&&(cu(re),Mo(re)),v.g=z}else sm(v);f.i.length>0&&Bo(f)}else me[0]!="stop"&&me[0]!="close"||br(f,7);else f.I==3&&(me[0]=="stop"||me[0]=="close"?me[0]=="stop"?br(f,7):yu(f):me[0]!="noop"&&f.l&&f.l.qa(me),f.A=0)}}ei(4)}catch{}}var o1=class{constructor(a,h){this.g=a,this.map=h}};function Lf(a){this.l=a||10,o.PerformanceNavigationTiming?(a=o.performance.getEntriesByType("navigation"),a=a.length>0&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Mf(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function Of(a){return a.h?1:a.g?a.g.size:0}function du(a,h){return a.h?a.h==h:a.g?a.g.has(h):!1}function fu(a,h){a.g?a.g.add(h):a.h=h}function Ff(a,h){a.h&&a.h==h?a.h=null:a.g&&a.g.has(h)&&a.g.delete(h)}Lf.prototype.cancel=function(){if(this.i=Uf(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function Uf(a){if(a.h!=null)return a.i.concat(a.h.G);if(a.g!=null&&a.g.size!==0){let h=a.i;for(const f of a.g.values())h=h.concat(f.G);return h}return x(a.i)}var zf=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function a1(a,h){if(a){a=a.split("&");for(let f=0;f<a.length;f++){const v=a[f].indexOf("=");let C,j=null;v>=0?(C=a[f].substring(0,v),j=a[f].substring(v+1)):C=a[f],h(C,j?decodeURIComponent(j.replace(/\+/g," ")):"")}}}function Cn(a){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let h;a instanceof Cn?(this.l=a.l,ii(this,a.j),this.o=a.o,this.g=a.g,oi(this,a.u),this.h=a.h,mu(this,Gf(a.i)),this.m=a.m):a&&(h=String(a).match(zf))?(this.l=!1,ii(this,h[1]||"",!0),this.o=ai(h[2]||""),this.g=ai(h[3]||"",!0),oi(this,h[4]),this.h=ai(h[5]||"",!0),mu(this,h[6]||"",!0),this.m=ai(h[7]||"")):(this.l=!1,this.i=new ui(null,this.l))}Cn.prototype.toString=function(){const a=[];var h=this.j;h&&a.push(li(h,Bf,!0),":");var f=this.g;return(f||h=="file")&&(a.push("//"),(h=this.o)&&a.push(li(h,Bf,!0),"@"),a.push(ri(f).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.u,f!=null&&a.push(":",String(f))),(f=this.h)&&(this.g&&f.charAt(0)!="/"&&a.push("/"),a.push(li(f,f.charAt(0)=="/"?c1:u1,!0))),(f=this.i.toString())&&a.push("?",f),(f=this.m)&&a.push("#",li(f,d1)),a.join("")},Cn.prototype.resolve=function(a){const h=tn(this);let f=!!a.j;f?ii(h,a.j):f=!!a.o,f?h.o=a.o:f=!!a.g,f?h.g=a.g:f=a.u!=null;var v=a.h;if(f)oi(h,a.u);else if(f=!!a.h){if(v.charAt(0)!="/")if(this.g&&!this.h)v="/"+v;else{var C=h.h.lastIndexOf("/");C!=-1&&(v=h.h.slice(0,C+1)+v)}if(C=v,C==".."||C==".")v="";else if(C.indexOf("./")!=-1||C.indexOf("/.")!=-1){v=C.lastIndexOf("/",0)==0,C=C.split("/");const j=[];for(let z=0;z<C.length;){const re=C[z++];re=="."?v&&z==C.length&&j.push(""):re==".."?((j.length>1||j.length==1&&j[0]!="")&&j.pop(),v&&z==C.length&&j.push("")):(j.push(re),v=!0)}v=j.join("/")}else v=C}return f?h.h=v:f=a.i.toString()!=="",f?mu(h,Gf(a.i)):f=!!a.m,f&&(h.m=a.m),h};function tn(a){return new Cn(a)}function ii(a,h,f){a.j=f?ai(h,!0):h,a.j&&(a.j=a.j.replace(/:$/,""))}function oi(a,h){if(h){if(h=Number(h),isNaN(h)||h<0)throw Error("Bad port number "+h);a.u=h}else a.u=null}function mu(a,h,f){h instanceof ui?(a.i=h,f1(a.i,a.l)):(f||(h=li(h,h1)),a.i=new ui(h,a.l))}function we(a,h,f){a.i.set(h,f)}function Oo(a){return we(a,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),a}function ai(a,h){return a?h?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function li(a,h,f){return typeof a=="string"?(a=encodeURI(a).replace(h,l1),f&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function l1(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var Bf=/[#\/\?@]/g,u1=/[#\?:]/g,c1=/[#\?]/g,h1=/[#\?@]/g,d1=/#/g;function ui(a,h){this.h=this.g=null,this.i=a||null,this.j=!!h}function Tr(a){a.g||(a.g=new Map,a.h=0,a.i&&a1(a.i,function(h,f){a.add(decodeURIComponent(h.replace(/\+/g," ")),f)}))}t=ui.prototype,t.add=function(a,h){Tr(this),this.i=null,a=ns(this,a);let f=this.g.get(a);return f||this.g.set(a,f=[]),f.push(h),this.h+=1,this};function $f(a,h){Tr(a),h=ns(a,h),a.g.has(h)&&(a.i=null,a.h-=a.g.get(h).length,a.g.delete(h))}function Hf(a,h){return Tr(a),h=ns(a,h),a.g.has(h)}t.forEach=function(a,h){Tr(this),this.g.forEach(function(f,v){f.forEach(function(C){a.call(h,C,v,this)},this)},this)};function qf(a,h){Tr(a);let f=[];if(typeof h=="string")Hf(a,h)&&(f=f.concat(a.g.get(ns(a,h))));else for(a=Array.from(a.g.values()),h=0;h<a.length;h++)f=f.concat(a[h]);return f}t.set=function(a,h){return Tr(this),this.i=null,a=ns(this,a),Hf(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[h]),this.h+=1,this},t.get=function(a,h){return a?(a=qf(this,a),a.length>0?String(a[0]):h):h};function Wf(a,h,f){$f(a,h),f.length>0&&(a.i=null,a.g.set(ns(a,h),x(f)),a.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],h=Array.from(this.g.keys());for(let v=0;v<h.length;v++){var f=h[v];const C=ri(f);f=qf(this,f);for(let j=0;j<f.length;j++){let z=C;f[j]!==""&&(z+="="+ri(f[j])),a.push(z)}}return this.i=a.join("&")};function Gf(a){const h=new ui;return h.i=a.i,a.g&&(h.g=new Map(a.g),h.h=a.h),h}function ns(a,h){return h=String(h),a.j&&(h=h.toLowerCase()),h}function f1(a,h){h&&!a.j&&(Tr(a),a.i=null,a.g.forEach(function(f,v){const C=v.toLowerCase();v!=C&&($f(this,v),Wf(this,C,f))},a)),a.j=h}function m1(a,h){const f=new ni;if(o.Image){const v=new Image;v.onload=m(Pn,f,"TestLoadImage: loaded",!0,h,v),v.onerror=m(Pn,f,"TestLoadImage: error",!1,h,v),v.onabort=m(Pn,f,"TestLoadImage: abort",!1,h,v),v.ontimeout=m(Pn,f,"TestLoadImage: timeout",!1,h,v),o.setTimeout(function(){v.ontimeout&&v.ontimeout()},1e4),v.src=a}else h(!1)}function p1(a,h){const f=new ni,v=new AbortController,C=setTimeout(()=>{v.abort(),Pn(f,"TestPingServer: timeout",!1,h)},1e4);fetch(a,{signal:v.signal}).then(j=>{clearTimeout(C),j.ok?Pn(f,"TestPingServer: ok",!0,h):Pn(f,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(C),Pn(f,"TestPingServer: error",!1,h)})}function Pn(a,h,f,v,C){try{C&&(C.onload=null,C.onerror=null,C.onabort=null,C.ontimeout=null),v(f)}catch{}}function g1(){this.g=new Jw}function pu(a){this.i=a.Sb||null,this.h=a.ab||!1}p(pu,Tf),pu.prototype.g=function(){return new Fo(this.i,this.h)};function Fo(a,h){rt.call(this),this.H=a,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}p(Fo,rt),t=Fo.prototype,t.open=function(a,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=a,this.D=h,this.readyState=1,hi(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const h={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};a&&(h.body=a),(this.H||o).fetch(new Request(this.D,h)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,ci(this)),this.readyState=0},t.Pa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,hi(this)),this.g&&(this.readyState=3,hi(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Kf(this)}else a.text().then(this.Oa.bind(this),this.ga.bind(this))};function Kf(a){a.j.read().then(a.Ma.bind(a)).catch(a.ga.bind(a))}t.Ma=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var h=a.value?a.value:new Uint8Array(0);(h=this.B.decode(h,{stream:!a.done}))&&(this.response=this.responseText+=h)}a.done?ci(this):hi(this),this.readyState==3&&Kf(this)}},t.Oa=function(a){this.g&&(this.response=this.responseText=a,ci(this))},t.Na=function(a){this.g&&(this.response=a,ci(this))},t.ga=function(){this.g&&ci(this)};function ci(a){a.readyState=4,a.l=null,a.j=null,a.B=null,hi(a)}t.setRequestHeader=function(a,h){this.A.append(a,h)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],h=this.h.entries();for(var f=h.next();!f.done;)f=f.value,a.push(f[0]+": "+f[1]),f=h.next();return a.join(`\r
`)};function hi(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(Fo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function Qf(a){let h="";return Q(a,function(f,v){h+=v,h+=":",h+=f,h+=`\r
`}),h}function gu(a,h,f){e:{for(v in f){var v=!1;break e}v=!0}v||(f=Qf(f),typeof a=="string"?f!=null&&ri(f):we(a,h,f))}function Re(a){rt.call(this),this.headers=new Map,this.L=a||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}p(Re,rt);var y1=/^https?$/i,v1=["POST","PUT"];t=Re.prototype,t.Fa=function(a){this.H=a},t.ea=function(a,h,f,v){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);h=h?h.toUpperCase():"GET",this.D=a,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Nf.g(),this.g.onreadystatechange=g(d(this.Ca,this));try{this.B=!0,this.g.open(h,String(a),!0),this.B=!1}catch(j){Yf(this,j);return}if(a=f||"",f=new Map(this.headers),v)if(Object.getPrototypeOf(v)===Object.prototype)for(var C in v)f.set(C,v[C]);else if(typeof v.keys=="function"&&typeof v.get=="function")for(const j of v.keys())f.set(j,v.get(j));else throw Error("Unknown input type for opt_headers: "+String(v));v=Array.from(f.keys()).find(j=>j.toLowerCase()=="content-type"),C=o.FormData&&a instanceof o.FormData,!(Array.prototype.indexOf.call(v1,h,void 0)>=0)||v||C||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[j,z]of f)this.g.setRequestHeader(j,z);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(a),this.v=!1}catch(j){Yf(this,j)}};function Yf(a,h){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=h,a.o=5,Xf(a),Uo(a)}function Xf(a){a.A||(a.A=!0,ht(a,"complete"),ht(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=a||7,ht(this,"complete"),ht(this,"abort"),Uo(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Uo(this,!0)),Re.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Jf(this):this.Xa())},t.Xa=function(){Jf(this)};function Jf(a){if(a.h&&typeof i<"u"){if(a.v&&Dn(a)==4)setTimeout(a.Ca.bind(a),0);else if(ht(a,"readystatechange"),Dn(a)==4){a.h=!1;try{const j=a.ca();e:switch(j){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var f;if(!(f=h)){var v;if(v=j===0){let z=String(a.D).match(zf)[1]||null;!z&&o.self&&o.self.location&&(z=o.self.location.protocol.slice(0,-1)),v=!y1.test(z?z.toLowerCase():"")}f=v}if(f)ht(a,"complete"),ht(a,"success");else{a.o=6;try{var C=Dn(a)>2?a.g.statusText:""}catch{C=""}a.l=C+" ["+a.ca()+"]",Xf(a)}}finally{Uo(a)}}}}function Uo(a,h){if(a.g){a.m&&(clearTimeout(a.m),a.m=null);const f=a.g;a.g=null,h||ht(a,"ready");try{f.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Dn(a){return a.g?a.g.readyState:0}t.ca=function(){try{return Dn(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(a){if(this.g){var h=this.g.responseText;return a&&h.indexOf(a)==0&&(h=h.substring(a.length)),Xw(h)}};function Zf(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.F){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function _1(a){const h={};a=(a.g&&Dn(a)>=2&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let v=0;v<a.length;v++){if(w(a[v]))continue;var f=r1(a[v]);const C=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();const j=h[C]||[];h[C]=j,j.push(f)}q(h,function(v){return v.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function di(a,h,f){return f&&f.internalChannelParams&&f.internalChannelParams[a]||h}function em(a){this.za=0,this.i=[],this.j=new ni,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=di("failFast",!1,a),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=di("baseRetryDelayMs",5e3,a),this.Za=di("retryDelaySeedMs",1e4,a),this.Ta=di("forwardChannelMaxRetries",2,a),this.va=di("forwardChannelRequestTimeoutMs",2e4,a),this.ma=a&&a.xmlHttpFactory||void 0,this.Ua=a&&a.Rb||void 0,this.Aa=a&&a.useFetchStreams||!1,this.O=void 0,this.L=a&&a.supportsCrossDomainXhr||!1,this.M="",this.h=new Lf(a&&a.concurrentRequestLimit),this.Ba=new g1,this.S=a&&a.fastHandshake||!1,this.R=a&&a.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=a&&a.Pb||!1,a&&a.ua&&this.j.ua(),a&&a.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&a&&a.detectBufferingProxy||!1,this.ia=void 0,a&&a.longPollingTimeout&&a.longPollingTimeout>0&&(this.ia=a.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=em.prototype,t.ka=8,t.I=1,t.connect=function(a,h,f,v){dt(0),this.W=a,this.H=h||{},f&&v!==void 0&&(this.H.OSID=f,this.H.OAID=v),this.F=this.X,this.J=um(this,null,this.W),Bo(this)};function yu(a){if(tm(a),a.I==3){var h=a.V++,f=tn(a.J);if(we(f,"SID",a.M),we(f,"RID",h),we(f,"TYPE","terminate"),fi(a,f),h=new Nn(a,a.j,h),h.M=2,h.A=Oo(tn(f)),f=!1,o.navigator&&o.navigator.sendBeacon)try{f=o.navigator.sendBeacon(h.A.toString(),"")}catch{}!f&&o.Image&&(new Image().src=h.A,f=!0),f||(h.g=cm(h.j,null),h.g.ea(h.A)),h.F=Date.now(),Mo(h)}lm(a)}function zo(a){a.g&&(_u(a),a.g.cancel(),a.g=null)}function tm(a){zo(a),a.v&&(o.clearTimeout(a.v),a.v=null),$o(a),a.h.cancel(),a.m&&(typeof a.m=="number"&&o.clearTimeout(a.m),a.m=null)}function Bo(a){if(!Mf(a.h)&&!a.m){a.m=!0;var h=a.Ea;M||_(),O||(M(),O=!0),E.add(h,a),a.D=0}}function w1(a,h){return Of(a.h)>=a.h.j-(a.m?1:0)?!1:a.m?(a.i=h.G.concat(a.i),!0):a.I==1||a.I==2||a.D>=(a.Sa?0:a.Ta)?!1:(a.m=ti(d(a.Ea,a,h),am(a,a.D)),a.D++,!0)}t.Ea=function(a){if(this.m)if(this.m=null,this.I==1){if(!a){this.V=Math.floor(Math.random()*1e5),a=this.V++;const C=new Nn(this,this.j,a);let j=this.o;if(this.U&&(j?(j=K(j),G(j,this.U)):j=this.U),this.u!==null||this.R||(C.J=j,j=null),this.S)e:{for(var h=0,f=0;f<this.i.length;f++){t:{var v=this.i[f];if("__data__"in v.map&&(v=v.map.__data__,typeof v=="string")){v=v.length;break t}v=void 0}if(v===void 0)break;if(h+=v,h>4096){h=f;break e}if(h===4096||f===this.i.length-1){h=f+1;break e}}h=1e3}else h=1e3;h=rm(this,C,h),f=tn(this.J),we(f,"RID",a),we(f,"CVER",22),this.G&&we(f,"X-HTTP-Session-Id",this.G),fi(this,f),j&&(this.R?h="headers="+ri(Qf(j))+"&"+h:this.u&&gu(f,this.u,j)),fu(this.h,C),this.Ra&&we(f,"TYPE","init"),this.S?(we(f,"$req",h),we(f,"SID","null"),C.U=!0,uu(C,f,null)):uu(C,f,h),this.I=2}}else this.I==3&&(a?nm(this,a):this.i.length==0||Mf(this.h)||nm(this))};function nm(a,h){var f;h?f=h.l:f=a.V++;const v=tn(a.J);we(v,"SID",a.M),we(v,"RID",f),we(v,"AID",a.K),fi(a,v),a.u&&a.o&&gu(v,a.u,a.o),f=new Nn(a,a.j,f,a.D+1),a.u===null&&(f.J=a.o),h&&(a.i=h.G.concat(a.i)),h=rm(a,f,1e3),f.H=Math.round(a.va*.5)+Math.round(a.va*.5*Math.random()),fu(a.h,f),uu(f,v,h)}function fi(a,h){a.H&&Q(a.H,function(f,v){we(h,v,f)}),a.l&&Q({},function(f,v){we(h,v,f)})}function rm(a,h,f){f=Math.min(a.i.length,f);const v=a.l?d(a.l.Ka,a.l,a):null;e:{var C=a.i;let re=-1;for(;;){const Be=["count="+f];re==-1?f>0?(re=C[0].g,Be.push("ofs="+re)):re=0:Be.push("ofs="+re);let me=!0;for(let We=0;We<f;We++){var j=C[We].g;const nn=C[We].map;if(j-=re,j<0)re=Math.max(0,C[We].g-100),me=!1;else try{j="req"+j+"_"||"";try{var z=nn instanceof Map?nn:Object.entries(nn);for(const[Sr,jn]of z){let Vn=jn;l(jn)&&(Vn=su(jn)),Be.push(j+Sr+"="+encodeURIComponent(Vn))}}catch(Sr){throw Be.push(j+"type="+encodeURIComponent("_badmap")),Sr}}catch{v&&v(nn)}}if(me){z=Be.join("&");break e}}z=void 0}return a=a.i.splice(0,f),h.G=a,z}function sm(a){if(!a.g&&!a.v){a.Y=1;var h=a.Da;M||_(),O||(M(),O=!0),E.add(h,a),a.A=0}}function vu(a){return a.g||a.v||a.A>=3?!1:(a.Y++,a.v=ti(d(a.Da,a),am(a,a.A)),a.A++,!0)}t.Da=function(){if(this.v=null,im(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var a=4*this.T;this.j.info("BP detection timer enabled: "+a),this.B=ti(d(this.Wa,this),a)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,dt(10),zo(this),im(this))};function _u(a){a.B!=null&&(o.clearTimeout(a.B),a.B=null)}function im(a){a.g=new Nn(a,a.j,"rpc",a.Y),a.u===null&&(a.g.J=a.o),a.g.P=0;var h=tn(a.na);we(h,"RID","rpc"),we(h,"SID",a.M),we(h,"AID",a.K),we(h,"CI",a.F?"0":"1"),!a.F&&a.ia&&we(h,"TO",a.ia),we(h,"TYPE","xmlhttp"),fi(a,h),a.u&&a.o&&gu(h,a.u,a.o),a.O&&(a.g.H=a.O);var f=a.g;a=a.ba,f.M=1,f.A=Oo(tn(h)),f.u=null,f.R=!0,Df(f,a)}t.Va=function(){this.C!=null&&(this.C=null,zo(this),vu(this),dt(19))};function $o(a){a.C!=null&&(o.clearTimeout(a.C),a.C=null)}function om(a,h){var f=null;if(a.g==h){$o(a),_u(a),a.g=null;var v=2}else if(du(a.h,h))f=h.G,Ff(a.h,h),v=1;else return;if(a.I!=0){if(h.o)if(v==1){f=h.u?h.u.length:0,h=Date.now()-h.F;var C=a.D;v=Vo(),ht(v,new Af(v,f)),Bo(a)}else sm(a);else if(C=h.m,C==3||C==0&&h.X>0||!(v==1&&w1(a,h)||v==2&&vu(a)))switch(f&&f.length>0&&(h=a.h,h.i=h.i.concat(f)),C){case 1:br(a,5);break;case 4:br(a,10);break;case 3:br(a,6);break;default:br(a,2)}}}function am(a,h){let f=a.Qa+Math.floor(Math.random()*a.Za);return a.isActive()||(f*=2),f*h}function br(a,h){if(a.j.info("Error code "+h),h==2){var f=d(a.bb,a),v=a.Ua;const C=!v;v=new Cn(v||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||ii(v,"https"),Oo(v),C?m1(v.toString(),f):p1(v.toString(),f)}else dt(2);a.I=0,a.l&&a.l.pa(h),lm(a),tm(a)}t.bb=function(a){a?(this.j.info("Successfully pinged google.com"),dt(2)):(this.j.info("Failed to ping google.com"),dt(1))};function lm(a){if(a.I=0,a.ja=[],a.l){const h=Uf(a.h);(h.length!=0||a.i.length!=0)&&(k(a.ja,h),k(a.ja,a.i),a.h.i.length=0,x(a.i),a.i.length=0),a.l.oa()}}function um(a,h,f){var v=f instanceof Cn?tn(f):new Cn(f);if(v.g!="")h&&(v.g=h+"."+v.g),oi(v,v.u);else{var C=o.location;v=C.protocol,h=h?h+"."+C.hostname:C.hostname,C=+C.port;const j=new Cn(null);v&&ii(j,v),h&&(j.g=h),C&&oi(j,C),f&&(j.h=f),v=j}return f=a.G,h=a.wa,f&&h&&we(v,f,h),we(v,"VER",a.ka),fi(a,v),v}function cm(a,h,f){if(h&&!a.L)throw Error("Can't create secondary domain capable XhrIo object.");return h=a.Aa&&!a.ma?new Re(new pu({ab:f})):new Re(a.ma),h.Fa(a.L),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function hm(){}t=hm.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Ho(){}Ho.prototype.g=function(a,h){return new It(a,h)};function It(a,h){rt.call(this),this.g=new em(h),this.l=a,this.h=h&&h.messageUrlParams||null,a=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(a?a["X-WebChannel-Content-Type"]=h.messageContentType:a={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.sa&&(a?a["X-WebChannel-Client-Profile"]=h.sa:a={"X-WebChannel-Client-Profile":h.sa}),this.g.U=a,(a=h&&h.Qb)&&!w(a)&&(this.g.u=a),this.A=h&&h.supportsCrossDomainXhr||!1,this.v=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!w(h)&&(this.g.G=h,a=this.h,a!==null&&h in a&&(a=this.h,h in a&&delete a[h])),this.j=new rs(this)}p(It,rt),It.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},It.prototype.close=function(){yu(this.g)},It.prototype.o=function(a){var h=this.g;if(typeof a=="string"){var f={};f.__data__=a,a=f}else this.v&&(f={},f.__data__=su(a),a=f);h.i.push(new o1(h.Ya++,a)),h.I==3&&Bo(h)},It.prototype.N=function(){this.g.l=null,delete this.j,yu(this.g),delete this.g,It.Z.N.call(this)};function dm(a){iu.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var h=a.__sm__;if(h){e:{for(const f in h){a=f;break e}a=void 0}(this.i=a)&&(a=this.i,h=h!==null&&a in h?h[a]:void 0),this.data=h}else this.data=a}p(dm,iu);function fm(){ou.call(this),this.status=1}p(fm,ou);function rs(a){this.g=a}p(rs,hm),rs.prototype.ra=function(){ht(this.g,"a")},rs.prototype.qa=function(a){ht(this.g,new dm(a))},rs.prototype.pa=function(a){ht(this.g,new fm)},rs.prototype.oa=function(){ht(this.g,"b")},Ho.prototype.createWebChannel=Ho.prototype.g,It.prototype.send=It.prototype.o,It.prototype.open=It.prototype.m,It.prototype.close=It.prototype.close,Uv=function(){return new Ho},Fv=function(){return Vo()},Ov=xr,rh={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Lo.NO_ERROR=0,Lo.TIMEOUT=8,Lo.HTTP_ERROR=6,Aa=Lo,Rf.COMPLETE="complete",Mv=Rf,bf.EventType=Zs,Zs.OPEN="a",Zs.CLOSE="b",Zs.ERROR="c",Zs.MESSAGE="d",rt.prototype.listen=rt.prototype.J,Ii=bf,Re.prototype.listenOnce=Re.prototype.K,Re.prototype.getLastError=Re.prototype.Ha,Re.prototype.getLastErrorCode=Re.prototype.ya,Re.prototype.getStatus=Re.prototype.ca,Re.prototype.getResponseJson=Re.prototype.La,Re.prototype.getResponseText=Re.prototype.la,Re.prototype.send=Re.prototype.ea,Re.prototype.setWithCredentials=Re.prototype.Fa,Lv=Re}).apply(typeof ua<"u"?ua:typeof self<"u"?self:typeof window<"u"?window:{});const Mp="@firebase/firestore",Op="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}at.UNAUTHENTICATED=new at(null),at.GOOGLE_CREDENTIALS=new at("google-credentials-uid"),at.FIRST_PARTY=new at("first-party-uid"),at.MOCK_USER=new at("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gs="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wr=new Sv("@firebase/firestore");function is(){return Wr.logLevel}function H(t,...e){if(Wr.logLevel<=ce.DEBUG){const n=e.map(bd);Wr.debug(`Firestore (${Gs}): ${t}`,...n)}}function In(t,...e){if(Wr.logLevel<=ce.ERROR){const n=e.map(bd);Wr.error(`Firestore (${Gs}): ${t}`,...n)}}function Ms(t,...e){if(Wr.logLevel<=ce.WARN){const n=e.map(bd);Wr.warn(`Firestore (${Gs}): ${t}`,...n)}}function bd(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,zv(t,r,n)}function zv(t,e,n){let r=`FIRESTORE (${Gs}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw In(r),new Error(r)}function de(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||zv(e,s,r)}function te(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class $ extends Xr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bv{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class GT{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(at.UNAUTHENTICATED))}shutdown(){}}class KT{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class QT{constructor(e){this.t=e,this.currentUser=at.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){de(this.o===void 0,42304);let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let i=new rr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new rr,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},l=u=>{H("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(H("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new rr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(H("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(de(typeof r.accessToken=="string",31837,{l:r}),new Bv(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return de(e===null||typeof e=="string",2055,{h:e}),new at(e)}}class YT{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=at.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class XT{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new YT(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(at.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Fp{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class JT{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Rv(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){de(this.o===void 0,3512);const r=i=>{i.error!=null&&H("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,H("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{H("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):H("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Fp(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(de(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Fp(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZT(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sd{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=ZT(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function oe(t,e){return t<e?-1:t>e?1:0}function sh(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),i=e.charAt(r);if(s!==i)return Xu(s)===Xu(i)?oe(s,i):Xu(s)?1:-1}return oe(t.length,e.length)}const eb=55296,tb=57343;function Xu(t){const e=t.charCodeAt(0);return e>=eb&&e<=tb}function Os(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Up="__name__";class on{constructor(e,n,r){n===void 0?n=0:n>e.length&&X(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&X(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return on.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof on?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=on.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return oe(e.length,n.length)}static compareSegments(e,n){const r=on.isNumericId(e),s=on.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?on.extractNumericId(e).compare(on.extractNumericId(n)):sh(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return nr.fromString(e.substring(4,e.length-2))}}class ye extends on{construct(e,n,r){return new ye(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new $(V.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new ye(n)}static emptyPath(){return new ye([])}}const nb=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ze extends on{construct(e,n,r){return new Ze(e,n,r)}static isValidIdentifier(e){return nb.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ze.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Up}static keyField(){return new Ze([Up])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new $(V.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new $(V.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new $(V.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,s+=2}else l==="`"?(o=!o,s++):l!=="."||o?(r+=l,s++):(i(),s++)}if(i(),o)throw new $(V.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ze(n)}static emptyPath(){return new Ze([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y{constructor(e){this.path=e}static fromPath(e){return new Y(ye.fromString(e))}static fromName(e){return new Y(ye.fromString(e).popFirst(5))}static empty(){return new Y(ye.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ye.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ye.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Y(new ye(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $v(t,e,n){if(!n)throw new $(V.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function rb(t,e,n,r){if(e===!0&&r===!0)throw new $(V.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function zp(t){if(!Y.isDocumentKey(t))throw new $(V.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Bp(t){if(Y.isDocumentKey(t))throw new $(V.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Hv(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Vl(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":X(12329,{type:typeof t})}function zt(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new $(V.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Vl(t);throw new $(V.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fe(t,e){const n={typeString:t};return e&&(n.value=e),n}function Ao(t,e){if(!Hv(t))throw new $(V.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(s&&typeof o!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new $(V.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $p=-62135596800,Hp=1e6;class Ee{static now(){return Ee.fromMillis(Date.now())}static fromDate(e){return Ee.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*Hp);return new Ee(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new $(V.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new $(V.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<$p)throw new $(V.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new $(V.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Hp}_compareTo(e){return this.seconds===e.seconds?oe(this.nanoseconds,e.nanoseconds):oe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ee._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Ao(e,Ee._jsonSchema))return new Ee(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-$p;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ee._jsonSchemaVersion="firestore/timestamp/1.0",Ee._jsonSchema={type:Fe("string",Ee._jsonSchemaVersion),seconds:Fe("number"),nanoseconds:Fe("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ee{static fromTimestamp(e){return new ee(e)}static min(){return new ee(new Ee(0,0))}static max(){return new ee(new Ee(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fo=-1;function sb(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=ee.fromTimestamp(r===1e9?new Ee(n+1,0):new Ee(n,r));return new ar(s,Y.empty(),e)}function ib(t){return new ar(t.readTime,t.key,fo)}class ar{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new ar(ee.min(),Y.empty(),fo)}static max(){return new ar(ee.max(),Y.empty(),fo)}}function ob(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Y.comparator(t.documentKey,e.documentKey),n!==0?n:oe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ab="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class lb{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ks(t){if(t.code!==V.FAILED_PRECONDITION||t.message!==ab)throw t;H("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&X(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new L((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof L?n:L.resolve(n)}catch(n){return L.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):L.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):L.reject(n)}static resolve(e){return new L((n,r)=>{n(e)})}static reject(e){return new L((n,r)=>{r(e)})}static waitFor(e){return new L((n,r)=>{let s=0,i=0,o=!1;e.forEach(l=>{++s,l.next(()=>{++i,o&&i===s&&n()},u=>r(u))}),o=!0,i===s&&n()})}static or(e){let n=L.resolve(!1);for(const r of e)n=n.next(s=>s?L.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new L((r,s)=>{const i=e.length,o=new Array(i);let l=0;for(let u=0;u<i;u++){const d=u;n(e[d]).next(m=>{o[d]=m,++l,l===i&&r(o)},m=>s(m))}})}static doWhile(e,n){return new L((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function ub(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Qs(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ll{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Ll.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kd=-1;function Ml(t){return t==null}function al(t){return t===0&&1/t==-1/0}function cb(t){return typeof t=="number"&&Number.isInteger(t)&&!al(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qv="";function hb(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=qp(e)),e=db(t.get(n),e);return qp(e)}function db(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case qv:n+="";break;default:n+=i}}return n}function qp(t){return t+qv+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wp(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function vr(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Wv(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{constructor(e,n){this.comparator=e,this.root=n||Je.EMPTY}insert(e,n){return new Ae(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Je.BLACK,null,null))}remove(e){return new Ae(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Je.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ca(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ca(this.root,e,this.comparator,!1)}getReverseIterator(){return new ca(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ca(this.root,e,this.comparator,!0)}}class ca{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Je{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Je.RED,this.left=s??Je.EMPTY,this.right=i??Je.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new Je(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Je.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Je.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Je.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Je.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw X(43730,{key:this.key,value:this.value});if(this.right.isRed())throw X(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw X(27949);return e+(this.isRed()?0:1)}}Je.EMPTY=null,Je.RED=!0,Je.BLACK=!1;Je.EMPTY=new class{constructor(){this.size=0}get key(){throw X(57766)}get value(){throw X(16141)}get color(){throw X(16727)}get left(){throw X(29726)}get right(){throw X(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new Je(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qe{constructor(e){this.comparator=e,this.data=new Ae(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Gp(this.data.getIterator())}getIteratorFrom(e){return new Gp(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof qe)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new qe(this.comparator);return n.data=e,n}}class Gp{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nt{constructor(e){this.fields=e,e.sort(Ze.comparator)}static empty(){return new Nt([])}unionWith(e){let n=new qe(Ze.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Nt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Os(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gv extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new Gv("Invalid base64 string: "+i):i}}(e);return new nt(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new nt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return oe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}nt.EMPTY_BYTE_STRING=new nt("");const fb=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function lr(t){if(de(!!t,39018),typeof t=="string"){let e=0;const n=fb.exec(t);if(de(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:De(t.seconds),nanos:De(t.nanos)}}function De(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ur(t){return typeof t=="string"?nt.fromBase64String(t):nt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kv="server_timestamp",Qv="__type__",Yv="__previous_value__",Xv="__local_write_time__";function Id(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[Qv])==null?void 0:r.stringValue)===Kv}function Ol(t){const e=t.mapValue.fields[Yv];return Id(e)?Ol(e):e}function mo(t){const e=lr(t.mapValue.fields[Xv].timestampValue);return new Ee(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mb{constructor(e,n,r,s,i,o,l,u,d,m){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=d,this.isUsingEmulator=m}}const ll="(default)";class po{constructor(e,n){this.projectId=e,this.database=n||ll}static empty(){return new po("","")}get isDefaultDatabase(){return this.database===ll}isEqual(e){return e instanceof po&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jv="__type__",pb="__max__",ha={mapValue:{}},Zv="__vector__",ul="value";function cr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Id(t)?4:yb(t)?9007199254740991:gb(t)?10:11:X(28295,{value:t})}function gn(t,e){if(t===e)return!0;const n=cr(t);if(n!==cr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return mo(t).isEqual(mo(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=lr(s.timestampValue),l=lr(i.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return ur(s.bytesValue).isEqual(ur(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return De(s.geoPointValue.latitude)===De(i.geoPointValue.latitude)&&De(s.geoPointValue.longitude)===De(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return De(s.integerValue)===De(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=De(s.doubleValue),l=De(i.doubleValue);return o===l?al(o)===al(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return Os(t.arrayValue.values||[],e.arrayValue.values||[],gn);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},l=i.mapValue.fields||{};if(Wp(o)!==Wp(l))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(l[u]===void 0||!gn(o[u],l[u])))return!1;return!0}(t,e);default:return X(52216,{left:t})}}function go(t,e){return(t.values||[]).find(n=>gn(n,e))!==void 0}function Fs(t,e){if(t===e)return 0;const n=cr(t),r=cr(e);if(n!==r)return oe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return oe(t.booleanValue,e.booleanValue);case 2:return function(i,o){const l=De(i.integerValue||i.doubleValue),u=De(o.integerValue||o.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return Kp(t.timestampValue,e.timestampValue);case 4:return Kp(mo(t),mo(e));case 5:return sh(t.stringValue,e.stringValue);case 6:return function(i,o){const l=ur(i),u=ur(o);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const l=i.split("/"),u=o.split("/");for(let d=0;d<l.length&&d<u.length;d++){const m=oe(l[d],u[d]);if(m!==0)return m}return oe(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const l=oe(De(i.latitude),De(o.latitude));return l!==0?l:oe(De(i.longitude),De(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Qp(t.arrayValue,e.arrayValue);case 10:return function(i,o){var g,x,k,R;const l=i.fields||{},u=o.fields||{},d=(g=l[ul])==null?void 0:g.arrayValue,m=(x=u[ul])==null?void 0:x.arrayValue,p=oe(((k=d==null?void 0:d.values)==null?void 0:k.length)||0,((R=m==null?void 0:m.values)==null?void 0:R.length)||0);return p!==0?p:Qp(d,m)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===ha.mapValue&&o===ha.mapValue)return 0;if(i===ha.mapValue)return 1;if(o===ha.mapValue)return-1;const l=i.fields||{},u=Object.keys(l),d=o.fields||{},m=Object.keys(d);u.sort(),m.sort();for(let p=0;p<u.length&&p<m.length;++p){const g=sh(u[p],m[p]);if(g!==0)return g;const x=Fs(l[u[p]],d[m[p]]);if(x!==0)return x}return oe(u.length,m.length)}(t.mapValue,e.mapValue);default:throw X(23264,{he:n})}}function Kp(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return oe(t,e);const n=lr(t),r=lr(e),s=oe(n.seconds,r.seconds);return s!==0?s:oe(n.nanos,r.nanos)}function Qp(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Fs(n[s],r[s]);if(i)return i}return oe(n.length,r.length)}function Us(t){return ih(t)}function ih(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=lr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return ur(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Y.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=ih(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${ih(n.fields[o])}`;return s+"}"}(t.mapValue):X(61005,{value:t})}function Ra(t){switch(cr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Ol(t);return e?16+Ra(e):16;case 5:return 2*t.stringValue.length;case 6:return ur(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+Ra(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return vr(r.fields,(i,o)=>{s+=i.length+Ra(o)}),s}(t.mapValue);default:throw X(13486,{value:t})}}function Yp(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function oh(t){return!!t&&"integerValue"in t}function Ad(t){return!!t&&"arrayValue"in t}function Xp(t){return!!t&&"nullValue"in t}function Jp(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Na(t){return!!t&&"mapValue"in t}function gb(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[Jv])==null?void 0:r.stringValue)===Zv}function zi(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return vr(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=zi(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=zi(t.arrayValue.values[n]);return e}return{...t}}function yb(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===pb}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(e){this.value=e}static empty(){return new Et({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Na(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=zi(n)}setAll(e){let n=Ze.emptyPath(),r={},s=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,r,s),r={},s=[],n=l.popLast()}o?r[l.lastSegment()]=zi(o):s.push(l.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Na(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return gn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Na(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){vr(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new Et(zi(this.value))}}function e_(t){const e=[];return vr(t.fields,(n,r)=>{const s=new Ze([n]);if(Na(r)){const i=e_(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Nt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut{constructor(e,n,r,s,i,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=l}static newInvalidDocument(e){return new ut(e,0,ee.min(),ee.min(),ee.min(),Et.empty(),0)}static newFoundDocument(e,n,r,s){return new ut(e,1,n,ee.min(),r,s,0)}static newNoDocument(e,n){return new ut(e,2,n,ee.min(),ee.min(),Et.empty(),0)}static newUnknownDocument(e,n){return new ut(e,3,n,ee.min(),ee.min(),Et.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ee.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Et.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Et.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ee.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ut&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ut(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cl{constructor(e,n){this.position=e,this.inclusive=n}}function Zp(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=Y.comparator(Y.fromName(o.referenceValue),n.key):r=Fs(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function eg(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!gn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yo{constructor(e,n="asc"){this.field=e,this.dir=n}}function vb(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t_{}class Oe extends t_{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new wb(e,n,r):n==="array-contains"?new Tb(e,r):n==="in"?new bb(e,r):n==="not-in"?new Sb(e,r):n==="array-contains-any"?new kb(e,r):new Oe(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new xb(e,r):new Eb(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Fs(n,this.value)):n!==null&&cr(this.value)===cr(n)&&this.matchesComparison(Fs(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return X(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Zt extends t_{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Zt(e,n)}matches(e){return n_(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function n_(t){return t.op==="and"}function r_(t){return _b(t)&&n_(t)}function _b(t){for(const e of t.filters)if(e instanceof Zt)return!1;return!0}function ah(t){if(t instanceof Oe)return t.field.canonicalString()+t.op.toString()+Us(t.value);if(r_(t))return t.filters.map(e=>ah(e)).join(",");{const e=t.filters.map(n=>ah(n)).join(",");return`${t.op}(${e})`}}function s_(t,e){return t instanceof Oe?function(r,s){return s instanceof Oe&&r.op===s.op&&r.field.isEqual(s.field)&&gn(r.value,s.value)}(t,e):t instanceof Zt?function(r,s){return s instanceof Zt&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,l)=>i&&s_(o,s.filters[l]),!0):!1}(t,e):void X(19439)}function i_(t){return t instanceof Oe?function(n){return`${n.field.canonicalString()} ${n.op} ${Us(n.value)}`}(t):t instanceof Zt?function(n){return n.op.toString()+" {"+n.getFilters().map(i_).join(" ,")+"}"}(t):"Filter"}class wb extends Oe{constructor(e,n,r){super(e,n,r),this.key=Y.fromName(r.referenceValue)}matches(e){const n=Y.comparator(e.key,this.key);return this.matchesComparison(n)}}class xb extends Oe{constructor(e,n){super(e,"in",n),this.keys=o_("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class Eb extends Oe{constructor(e,n){super(e,"not-in",n),this.keys=o_("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function o_(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>Y.fromName(r.referenceValue))}class Tb extends Oe{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Ad(n)&&go(n.arrayValue,this.value)}}class bb extends Oe{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&go(this.value.arrayValue,n)}}class Sb extends Oe{constructor(e,n){super(e,"not-in",n)}matches(e){if(go(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!go(this.value.arrayValue,n)}}class kb extends Oe{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Ad(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>go(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ib{constructor(e,n=null,r=[],s=[],i=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=l,this.Te=null}}function tg(t,e=null,n=[],r=[],s=null,i=null,o=null){return new Ib(t,e,n,r,s,i,o)}function Rd(t){const e=te(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>ah(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Ml(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Us(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Us(r)).join(",")),e.Te=n}return e.Te}function Nd(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!vb(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!s_(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!eg(t.startAt,e.startAt)&&eg(t.endAt,e.endAt)}function lh(t){return Y.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ys{constructor(e,n=null,r=[],s=[],i=null,o="F",l=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=l,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function Ab(t,e,n,r,s,i,o,l){return new Ys(t,e,n,r,s,i,o,l)}function Cd(t){return new Ys(t)}function ng(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function a_(t){return t.collectionGroup!==null}function Bi(t){const e=te(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new qe(Ze.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(l=l.add(d.field))})}),l})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new yo(i,r))}),n.has(Ze.keyField().canonicalString())||e.Ie.push(new yo(Ze.keyField(),r))}return e.Ie}function dn(t){const e=te(t);return e.Ee||(e.Ee=Rb(e,Bi(t))),e.Ee}function Rb(t,e){if(t.limitType==="F")return tg(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new yo(s.field,i)});const n=t.endAt?new cl(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new cl(t.startAt.position,t.startAt.inclusive):null;return tg(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function uh(t,e){const n=t.filters.concat([e]);return new Ys(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function ch(t,e,n){return new Ys(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Fl(t,e){return Nd(dn(t),dn(e))&&t.limitType===e.limitType}function l_(t){return`${Rd(dn(t))}|lt:${t.limitType}`}function os(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>i_(s)).join(", ")}]`),Ml(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Us(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Us(s)).join(",")),`Target(${r})`}(dn(t))}; limitType=${t.limitType})`}function Ul(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):Y.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of Bi(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,l,u){const d=Zp(o,l,u);return o.inclusive?d<=0:d<0}(r.startAt,Bi(r),s)||r.endAt&&!function(o,l,u){const d=Zp(o,l,u);return o.inclusive?d>=0:d>0}(r.endAt,Bi(r),s))}(t,e)}function Nb(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function u_(t){return(e,n)=>{let r=!1;for(const s of Bi(t)){const i=Cb(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function Cb(t,e,n){const r=t.field.isKeyField()?Y.comparator(e.key,n.key):function(i,o,l){const u=o.data.field(i),d=l.data.field(i);return u!==null&&d!==null?Fs(u,d):X(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return X(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jr{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){vr(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return Wv(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pb=new Ae(Y.comparator);function An(){return Pb}const c_=new Ae(Y.comparator);function Ai(...t){let e=c_;for(const n of t)e=e.insert(n.key,n);return e}function h_(t){let e=c_;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function jr(){return $i()}function d_(){return $i()}function $i(){return new Jr(t=>t.toString(),(t,e)=>t.isEqual(e))}const Db=new Ae(Y.comparator),jb=new qe(Y.comparator);function ae(...t){let e=jb;for(const n of t)e=e.add(n);return e}const Vb=new qe(oe);function Lb(){return Vb}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pd(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:al(e)?"-0":e}}function f_(t){return{integerValue:""+t}}function Mb(t,e){return cb(e)?f_(e):Pd(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zl{constructor(){this._=void 0}}function Ob(t,e,n){return t instanceof vo?function(s,i){const o={fields:{[Qv]:{stringValue:Kv},[Xv]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Id(i)&&(i=Ol(i)),i&&(o.fields[Yv]=i),{mapValue:o}}(n,e):t instanceof _o?p_(t,e):t instanceof wo?g_(t,e):function(s,i){const o=m_(s,i),l=rg(o)+rg(s.Ae);return oh(o)&&oh(s.Ae)?f_(l):Pd(s.serializer,l)}(t,e)}function Fb(t,e,n){return t instanceof _o?p_(t,e):t instanceof wo?g_(t,e):n}function m_(t,e){return t instanceof hl?function(r){return oh(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class vo extends zl{}class _o extends zl{constructor(e){super(),this.elements=e}}function p_(t,e){const n=y_(e);for(const r of t.elements)n.some(s=>gn(s,r))||n.push(r);return{arrayValue:{values:n}}}class wo extends zl{constructor(e){super(),this.elements=e}}function g_(t,e){let n=y_(e);for(const r of t.elements)n=n.filter(s=>!gn(s,r));return{arrayValue:{values:n}}}class hl extends zl{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function rg(t){return De(t.integerValue||t.doubleValue)}function y_(t){return Ad(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ub{constructor(e,n){this.field=e,this.transform=n}}function zb(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof _o&&s instanceof _o||r instanceof wo&&s instanceof wo?Os(r.elements,s.elements,gn):r instanceof hl&&s instanceof hl?gn(r.Ae,s.Ae):r instanceof vo&&s instanceof vo}(t.transform,e.transform)}class Bb{constructor(e,n){this.version=e,this.transformResults=n}}class Bt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Bt}static exists(e){return new Bt(void 0,e)}static updateTime(e){return new Bt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ca(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Bl{}function v_(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Dd(t.key,Bt.none()):new Ro(t.key,t.data,Bt.none());{const n=t.data,r=Et.empty();let s=new qe(Ze.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new _r(t.key,r,new Nt(s.toArray()),Bt.none())}}function $b(t,e,n){t instanceof Ro?function(s,i,o){const l=s.value.clone(),u=ig(s.fieldTransforms,i,o.transformResults);l.setAll(u),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof _r?function(s,i,o){if(!Ca(s.precondition,i))return void i.convertToUnknownDocument(o.version);const l=ig(s.fieldTransforms,i,o.transformResults),u=i.data;u.setAll(__(s)),u.setAll(l),i.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Hi(t,e,n,r){return t instanceof Ro?function(i,o,l,u){if(!Ca(i.precondition,o))return l;const d=i.value.clone(),m=og(i.fieldTransforms,u,o);return d.setAll(m),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof _r?function(i,o,l,u){if(!Ca(i.precondition,o))return l;const d=og(i.fieldTransforms,u,o),m=o.data;return m.setAll(__(i)),m.setAll(d),o.convertToFoundDocument(o.version,m).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(i,o,l){return Ca(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function Hb(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=m_(r.transform,s||null);i!=null&&(n===null&&(n=Et.empty()),n.set(r.field,i))}return n||null}function sg(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Os(r,s,(i,o)=>zb(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Ro extends Bl{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class _r extends Bl{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function __(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function ig(t,e,n){const r=new Map;de(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,l=e.data.field(i.field);r.set(i.field,Fb(o,l,n[s]))}return r}function og(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,Ob(i,o,e))}return r}class Dd extends Bl{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class qb extends Bl{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wb{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&$b(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Hi(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Hi(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=d_();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let l=this.applyToLocalView(o,i.mutatedFields);l=n.has(s.key)?null:l;const u=v_(o,l);u!==null&&r.set(s.key,u),o.isValidDocument()||o.convertToNoDocument(ee.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ae())}isEqual(e){return this.batchId===e.batchId&&Os(this.mutations,e.mutations,(n,r)=>sg(n,r))&&Os(this.baseMutations,e.baseMutations,(n,r)=>sg(n,r))}}class jd{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){de(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=function(){return Db}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new jd(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gb{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kb{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Le,ue;function Qb(t){switch(t){case V.OK:return X(64938);case V.CANCELLED:case V.UNKNOWN:case V.DEADLINE_EXCEEDED:case V.RESOURCE_EXHAUSTED:case V.INTERNAL:case V.UNAVAILABLE:case V.UNAUTHENTICATED:return!1;case V.INVALID_ARGUMENT:case V.NOT_FOUND:case V.ALREADY_EXISTS:case V.PERMISSION_DENIED:case V.FAILED_PRECONDITION:case V.ABORTED:case V.OUT_OF_RANGE:case V.UNIMPLEMENTED:case V.DATA_LOSS:return!0;default:return X(15467,{code:t})}}function w_(t){if(t===void 0)return In("GRPC error has no .code"),V.UNKNOWN;switch(t){case Le.OK:return V.OK;case Le.CANCELLED:return V.CANCELLED;case Le.UNKNOWN:return V.UNKNOWN;case Le.DEADLINE_EXCEEDED:return V.DEADLINE_EXCEEDED;case Le.RESOURCE_EXHAUSTED:return V.RESOURCE_EXHAUSTED;case Le.INTERNAL:return V.INTERNAL;case Le.UNAVAILABLE:return V.UNAVAILABLE;case Le.UNAUTHENTICATED:return V.UNAUTHENTICATED;case Le.INVALID_ARGUMENT:return V.INVALID_ARGUMENT;case Le.NOT_FOUND:return V.NOT_FOUND;case Le.ALREADY_EXISTS:return V.ALREADY_EXISTS;case Le.PERMISSION_DENIED:return V.PERMISSION_DENIED;case Le.FAILED_PRECONDITION:return V.FAILED_PRECONDITION;case Le.ABORTED:return V.ABORTED;case Le.OUT_OF_RANGE:return V.OUT_OF_RANGE;case Le.UNIMPLEMENTED:return V.UNIMPLEMENTED;case Le.DATA_LOSS:return V.DATA_LOSS;default:return X(39323,{code:t})}}(ue=Le||(Le={}))[ue.OK=0]="OK",ue[ue.CANCELLED=1]="CANCELLED",ue[ue.UNKNOWN=2]="UNKNOWN",ue[ue.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ue[ue.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ue[ue.NOT_FOUND=5]="NOT_FOUND",ue[ue.ALREADY_EXISTS=6]="ALREADY_EXISTS",ue[ue.PERMISSION_DENIED=7]="PERMISSION_DENIED",ue[ue.UNAUTHENTICATED=16]="UNAUTHENTICATED",ue[ue.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ue[ue.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ue[ue.ABORTED=10]="ABORTED",ue[ue.OUT_OF_RANGE=11]="OUT_OF_RANGE",ue[ue.UNIMPLEMENTED=12]="UNIMPLEMENTED",ue[ue.INTERNAL=13]="INTERNAL",ue[ue.UNAVAILABLE=14]="UNAVAILABLE",ue[ue.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yb(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xb=new nr([4294967295,4294967295],0);function ag(t){const e=Yb().encode(t),n=new Vv;return n.update(e),new Uint8Array(n.digest())}function lg(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new nr([n,r],0),new nr([s,i],0)]}class Vd{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Ri(`Invalid padding: ${n}`);if(r<0)throw new Ri(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ri(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Ri(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=nr.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(nr.fromNumber(r)));return s.compare(Xb)===1&&(s=new nr([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=ag(e),[r,s]=lg(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);if(!this.we(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Vd(i,s,n);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.ge===0)return;const n=ag(e),[r,s]=lg(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Ri extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $l{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,No.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new $l(ee.min(),s,new Ae(oe),An(),ae())}}class No{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new No(r,n,ae(),ae(),ae())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pa{constructor(e,n,r,s){this.be=e,this.removedTargetIds=n,this.key=r,this.De=s}}class x_{constructor(e,n){this.targetId=e,this.Ce=n}}class E_{constructor(e,n,r=nt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class ug{constructor(){this.ve=0,this.Fe=cg(),this.Me=nt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ae(),n=ae(),r=ae();return this.Fe.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:X(38017,{changeType:i})}}),new No(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=cg()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,de(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class Jb{constructor(e){this.Ge=e,this.ze=new Map,this.je=An(),this.Je=da(),this.He=da(),this.Ye=new Ae(oe)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:X(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,s)=>{this.rt(s)&&n(s)})}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const i=s.target;if(lh(i))if(r===0){const o=new Y(i.path);this.et(n,o,ut.newNoDocument(o,ee.min()))}else de(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const l=this.ut(e),u=l?this.ct(l,e,o):1;if(u!==0){this.it(n);const d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,d)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,l;try{o=ur(r).toUint8Array()}catch(u){if(u instanceof Gv)return Ms("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new Vd(o,s,i)}catch(u){return Ms(u instanceof Ri?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.ge===0?null:l}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Ge.ht(),l=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.et(n,i,null),s++)}),s}Tt(e){const n=new Map;this.ze.forEach((i,o)=>{const l=this.ot(o);if(l){if(i.current&&lh(l.target)){const u=new Y(l.target.path);this.It(u).has(o)||this.Et(o,u)||this.et(o,u,ut.newNoDocument(u,e))}i.Be&&(n.set(o,i.ke()),i.qe())}});let r=ae();this.He.forEach((i,o)=>{let l=!0;o.forEachWhile(u=>{const d=this.ot(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(i))}),this.je.forEach((i,o)=>o.setReadTime(e));const s=new $l(e,n,this.Ye,this.je,r);return this.je=An(),this.Je=da(),this.He=da(),this.Ye=new Ae(oe),s}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new ug,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new qe(oe),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new qe(oe),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||H("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new ug),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function da(){return new Ae(Y.comparator)}function cg(){return new Ae(Y.comparator)}const Zb={asc:"ASCENDING",desc:"DESCENDING"},eS={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},tS={and:"AND",or:"OR"};class nS{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function hh(t,e){return t.useProto3Json||Ml(e)?e:{value:e}}function dl(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function T_(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function rS(t,e){return dl(t,e.toTimestamp())}function fn(t){return de(!!t,49232),ee.fromTimestamp(function(n){const r=lr(n);return new Ee(r.seconds,r.nanos)}(t))}function Ld(t,e){return dh(t,e).canonicalString()}function dh(t,e){const n=function(s){return new ye(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function b_(t){const e=ye.fromString(t);return de(R_(e),10190,{key:e.toString()}),e}function fh(t,e){return Ld(t.databaseId,e.path)}function Ju(t,e){const n=b_(e);if(n.get(1)!==t.databaseId.projectId)throw new $(V.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new $(V.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Y(k_(n))}function S_(t,e){return Ld(t.databaseId,e)}function sS(t){const e=b_(t);return e.length===4?ye.emptyPath():k_(e)}function mh(t){return new ye(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function k_(t){return de(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function hg(t,e,n){return{name:fh(t,e),fields:n.value.mapValue.fields}}function iS(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:X(39313,{state:d})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(d,m){return d.useProto3Json?(de(m===void 0||typeof m=="string",58123),nt.fromBase64String(m||"")):(de(m===void 0||m instanceof Buffer||m instanceof Uint8Array,16193),nt.fromUint8Array(m||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(d){const m=d.code===void 0?V.UNKNOWN:w_(d.code);return new $(m,d.message||"")}(o);n=new E_(r,s,i,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Ju(t,r.document.name),i=fn(r.document.updateTime),o=r.document.createTime?fn(r.document.createTime):ee.min(),l=new Et({mapValue:{fields:r.document.fields}}),u=ut.newFoundDocument(s,i,o,l),d=r.targetIds||[],m=r.removedTargetIds||[];n=new Pa(d,m,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Ju(t,r.document),i=r.readTime?fn(r.readTime):ee.min(),o=ut.newNoDocument(s,i),l=r.removedTargetIds||[];n=new Pa([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Ju(t,r.document),i=r.removedTargetIds||[];n=new Pa([],i,s,null)}else{if(!("filter"in e))return X(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new Kb(s,i),l=r.targetId;n=new x_(l,o)}}return n}function oS(t,e){let n;if(e instanceof Ro)n={update:hg(t,e.key,e.value)};else if(e instanceof Dd)n={delete:fh(t,e.key)};else if(e instanceof _r)n={update:hg(t,e.key,e.data),updateMask:pS(e.fieldMask)};else{if(!(e instanceof qb))return X(16599,{Vt:e.type});n={verify:fh(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const l=o.transform;if(l instanceof vo)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof _o)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof wo)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof hl)return{fieldPath:o.field.canonicalString(),increment:l.Ae};throw X(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:rS(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:X(27497)}(t,e.precondition)),n}function aS(t,e){return t&&t.length>0?(de(e!==void 0,14353),t.map(n=>function(s,i){let o=s.updateTime?fn(s.updateTime):fn(i);return o.isEqual(ee.min())&&(o=fn(i)),new Bb(o,s.transformResults||[])}(n,e))):[]}function lS(t,e){return{documents:[S_(t,e.path)]}}function uS(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=S_(t,s);const i=function(d){if(d.length!==0)return A_(Zt.create(d,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(d){if(d.length!==0)return d.map(m=>function(g){return{field:as(g.field),direction:dS(g.dir)}}(m))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=hh(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{ft:n,parent:s}}function cS(t){let e=sS(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){de(r===1,65062);const m=n.from[0];m.allDescendants?s=m.collectionId:e=e.child(m.collectionId)}let i=[];n.where&&(i=function(p){const g=I_(p);return g instanceof Zt&&r_(g)?g.getFilters():[g]}(n.where));let o=[];n.orderBy&&(o=function(p){return p.map(g=>function(k){return new yo(ls(k.field),function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(k.direction))}(g))}(n.orderBy));let l=null;n.limit&&(l=function(p){let g;return g=typeof p=="object"?p.value:p,Ml(g)?null:g}(n.limit));let u=null;n.startAt&&(u=function(p){const g=!!p.before,x=p.values||[];return new cl(x,g)}(n.startAt));let d=null;return n.endAt&&(d=function(p){const g=!p.before,x=p.values||[];return new cl(x,g)}(n.endAt)),Ab(e,s,o,i,l,"F",u,d)}function hS(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return X(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function I_(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=ls(n.unaryFilter.field);return Oe.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=ls(n.unaryFilter.field);return Oe.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=ls(n.unaryFilter.field);return Oe.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=ls(n.unaryFilter.field);return Oe.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return X(61313);default:return X(60726)}}(t):t.fieldFilter!==void 0?function(n){return Oe.create(ls(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return X(58110);default:return X(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Zt.create(n.compositeFilter.filters.map(r=>I_(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return X(1026)}}(n.compositeFilter.op))}(t):X(30097,{filter:t})}function dS(t){return Zb[t]}function fS(t){return eS[t]}function mS(t){return tS[t]}function as(t){return{fieldPath:t.canonicalString()}}function ls(t){return Ze.fromServerFormat(t.fieldPath)}function A_(t){return t instanceof Oe?function(n){if(n.op==="=="){if(Jp(n.value))return{unaryFilter:{field:as(n.field),op:"IS_NAN"}};if(Xp(n.value))return{unaryFilter:{field:as(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Jp(n.value))return{unaryFilter:{field:as(n.field),op:"IS_NOT_NAN"}};if(Xp(n.value))return{unaryFilter:{field:as(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:as(n.field),op:fS(n.op),value:n.value}}}(t):t instanceof Zt?function(n){const r=n.getFilters().map(s=>A_(s));return r.length===1?r[0]:{compositeFilter:{op:mS(n.op),filters:r}}}(t):X(54877,{filter:t})}function pS(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function R_(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hn{constructor(e,n,r,s,i=ee.min(),o=ee.min(),l=nt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new Hn(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Hn(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Hn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Hn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gS{constructor(e){this.yt=e}}function yS(t){const e=cS({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?ch(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vS{constructor(){this.Cn=new _S}addToCollectionParentIndex(e,n){return this.Cn.add(n),L.resolve()}getCollectionParents(e,n){return L.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return L.resolve()}deleteFieldIndex(e,n){return L.resolve()}deleteAllFieldIndexes(e){return L.resolve()}createTargetIndexes(e,n){return L.resolve()}getDocumentsMatchingTarget(e,n){return L.resolve(null)}getIndexType(e,n){return L.resolve(0)}getFieldIndexes(e,n){return L.resolve([])}getNextCollectionGroupToUpdate(e){return L.resolve(null)}getMinOffset(e,n){return L.resolve(ar.min())}getMinOffsetFromCollectionGroup(e,n){return L.resolve(ar.min())}updateCollectionGroup(e,n,r){return L.resolve()}updateIndexEntries(e,n){return L.resolve()}}class _S{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new qe(ye.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new qe(ye.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dg={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},N_=41943040;class wt{static withCacheSize(e){return new wt(e,wt.DEFAULT_COLLECTION_PERCENTILE,wt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */wt.DEFAULT_COLLECTION_PERCENTILE=10,wt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,wt.DEFAULT=new wt(N_,wt.DEFAULT_COLLECTION_PERCENTILE,wt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),wt.DISABLED=new wt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zs{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new zs(0)}static cr(){return new zs(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fg="LruGarbageCollector",wS=1048576;function mg([t,e],[n,r]){const s=oe(t,n);return s===0?oe(e,r):s}class xS{constructor(e){this.Ir=e,this.buffer=new qe(mg),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();mg(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class ES{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){H(fg,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Qs(n)?H(fg,"Ignoring IndexedDB error during garbage collection: ",n):await Ks(n)}await this.Vr(3e5)})}}class TS{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return L.resolve(Ll.ce);const r=new xS(n);return this.mr.forEachTarget(e,s=>r.Ar(s.sequenceNumber)).next(()=>this.mr.pr(e,s=>r.Ar(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(H("LruGarbageCollector","Garbage collection skipped; disabled"),L.resolve(dg)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(H("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),dg):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,s,i,o,l,u,d;const m=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(H("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),s=this.params.maximumSequenceNumbersToCollect):s=p,o=Date.now(),this.nthSequenceNumber(e,s))).next(p=>(r=p,l=Date.now(),this.removeTargets(e,r,n))).next(p=>(i=p,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(d=Date.now(),is()<=ce.DEBUG&&H("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-m}ms
	Determined least recently used ${s} in `+(l-o)+`ms
	Removed ${i} targets in `+(u-l)+`ms
	Removed ${p} documents in `+(d-u)+`ms
Total Duration: ${d-m}ms`),L.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:p})))}}function bS(t,e){return new TS(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SS{constructor(){this.changes=new Jr(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,ut.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?L.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kS{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IS{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&Hi(r.mutation,s,Nt.empty(),Ee.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ae()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ae()){const s=jr();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=Ai();return i.forEach((l,u)=>{o=o.insert(l,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=jr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ae()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,s){let i=An();const o=$i(),l=function(){return $i()}();return n.forEach((u,d)=>{const m=r.get(d.key);s.has(d.key)&&(m===void 0||m.mutation instanceof _r)?i=i.insert(d.key,d):m!==void 0?(o.set(d.key,m.mutation.getFieldMask()),Hi(m.mutation,d,m.mutation.getFieldMask(),Ee.now())):o.set(d.key,Nt.empty())}),this.recalculateAndSaveOverlays(e,i).next(u=>(u.forEach((d,m)=>o.set(d,m)),n.forEach((d,m)=>l.set(d,new kS(m,o.get(d)??null))),l))}recalculateAndSaveOverlays(e,n){const r=$i();let s=new Ae((o,l)=>o-l),i=ae();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(u=>{const d=n.get(u);if(d===null)return;let m=r.get(u)||Nt.empty();m=l.applyToLocalView(d,m),r.set(u,m);const p=(s.get(l.batchId)||ae()).add(u);s=s.insert(l.batchId,p)})}).next(()=>{const o=[],l=s.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),d=u.key,m=u.value,p=d_();m.forEach(g=>{if(!i.has(g)){const x=v_(n.get(g),r.get(g));x!==null&&p.set(g,x),i=i.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,p))}return L.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return Y.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):a_(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):L.resolve(jr());let l=fo,u=i;return o.next(d=>L.forEach(d,(m,p)=>(l<p.largestBatchId&&(l=p.largestBatchId),i.get(m)?L.resolve():this.remoteDocumentCache.getEntry(e,m).next(g=>{u=u.insert(m,g)}))).next(()=>this.populateOverlays(e,d,i)).next(()=>this.computeViews(e,u,d,ae())).next(m=>({batchId:l,changes:h_(m)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Y(n)).next(r=>{let s=Ai();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=Ai();return this.indexManager.getCollectionParents(e,i).next(l=>L.forEach(l,u=>{const d=function(p,g){return new Ys(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,u.child(i));return this.getDocumentsMatchingCollectionQuery(e,d,r,s).next(m=>{m.forEach((p,g)=>{o=o.insert(p,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((u,d)=>{const m=d.getKey();o.get(m)===null&&(o=o.insert(m,ut.newInvalidDocument(m)))});let l=Ai();return o.forEach((u,d)=>{const m=i.get(u);m!==void 0&&Hi(m.mutation,d,Nt.empty(),Ee.now()),Ul(n,d)&&(l=l.insert(u,d))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AS{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return L.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:fn(s.createTime)}}(n)),L.resolve()}getNamedQuery(e,n){return L.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(s){return{name:s.name,query:yS(s.bundledQuery),readTime:fn(s.readTime)}}(n)),L.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RS{constructor(){this.overlays=new Ae(Y.comparator),this.qr=new Map}getOverlay(e,n){return L.resolve(this.overlays.get(n))}getOverlays(e,n){const r=jr();return L.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.St(e,n,i)}),L.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.qr.delete(r)),L.resolve()}getOverlaysForCollection(e,n,r){const s=jr(),i=n.length+1,o=new Y(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const u=l.getNext().value,d=u.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===i&&u.largestBatchId>r&&s.set(u.getKey(),u)}return L.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Ae((d,m)=>d-m);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let m=i.get(d.largestBatchId);m===null&&(m=jr(),i=i.insert(d.largestBatchId,m)),m.set(d.getKey(),d)}}const l=jr(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,m)=>l.set(d,m)),!(l.size()>=s)););return L.resolve(l)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Gb(n,r));let i=this.qr.get(n);i===void 0&&(i=ae(),this.qr.set(n,i)),this.qr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NS{constructor(){this.sessionToken=nt.EMPTY_BYTE_STRING}getSessionToken(e){return L.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,L.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Md{constructor(){this.Qr=new qe(Ge.$r),this.Ur=new qe(Ge.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new Ge(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new Ge(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new Y(new ye([])),r=new Ge(n,e),s=new Ge(n,e+1),i=[];return this.Ur.forEachInRange([r,s],o=>{this.Gr(o),i.push(o.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new Y(new ye([])),r=new Ge(n,e),s=new Ge(n,e+1);let i=ae();return this.Ur.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Ge(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Ge{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return Y.comparator(e.key,n.key)||oe(e.Yr,n.Yr)}static Kr(e,n){return oe(e.Yr,n.Yr)||Y.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CS{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new qe(Ge.$r)}checkEmpty(e){return L.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Wb(i,n,r,s);this.mutationQueue.push(o);for(const l of s)this.Zr=this.Zr.add(new Ge(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return L.resolve(o)}lookupMutationBatch(e,n){return L.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ei(r),i=s<0?0:s;return L.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return L.resolve(this.mutationQueue.length===0?kd:this.tr-1)}getAllMutationBatches(e){return L.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Ge(n,0),s=new Ge(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([r,s],o=>{const l=this.Xr(o.Yr);i.push(l)}),L.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new qe(oe);return n.forEach(s=>{const i=new Ge(s,0),o=new Ge(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,o],l=>{r=r.add(l.Yr)})}),L.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;Y.isDocumentKey(i)||(i=i.child(""));const o=new Ge(new Y(i),0);let l=new qe(oe);return this.Zr.forEachWhile(u=>{const d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===s&&(l=l.add(u.Yr)),!0)},o),L.resolve(this.ti(l))}ti(e){const n=[];return e.forEach(r=>{const s=this.Xr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){de(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return L.forEach(n.mutations,s=>{const i=new Ge(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new Ge(n,0),s=this.Zr.firstAfterOrEqual(r);return L.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,L.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PS{constructor(e){this.ri=e,this.docs=function(){return new Ae(Y.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return L.resolve(r?r.document.mutableCopy():ut.newInvalidDocument(n))}getEntries(e,n){let r=An();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():ut.newInvalidDocument(s))}),L.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=An();const o=n.path,l=new Y(o.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:d,value:{document:m}}=u.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||ob(ib(m),r)<=0||(s.has(m.key)||Ul(n,m))&&(i=i.insert(m.key,m.mutableCopy()))}return L.resolve(i)}getAllFromCollectionGroup(e,n,r,s){X(9500)}ii(e,n){return L.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new DS(this)}getSize(e){return L.resolve(this.size)}}class DS extends SS{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)}),L.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jS{constructor(e){this.persistence=e,this.si=new Jr(n=>Rd(n),Nd),this.lastRemoteSnapshotVersion=ee.min(),this.highestTargetId=0,this.oi=0,this._i=new Md,this.targetCount=0,this.ai=zs.ur()}forEachTarget(e,n){return this.si.forEach((r,s)=>n(s)),L.resolve()}getLastRemoteSnapshotVersion(e){return L.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return L.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),L.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),L.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new zs(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,L.resolve()}updateTargetData(e,n){return this.Pr(n),L.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,L.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.si.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.si.delete(o),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),L.waitFor(i).next(()=>s)}getTargetCount(e){return L.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return L.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),L.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),L.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),L.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return L.resolve(r)}containsKey(e,n){return L.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C_{constructor(e,n){this.ui={},this.overlays={},this.ci=new Ll(0),this.li=!1,this.li=!0,this.hi=new NS,this.referenceDelegate=e(this),this.Pi=new jS(this),this.indexManager=new vS,this.remoteDocumentCache=function(s){return new PS(s)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new gS(n),this.Ii=new AS(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new RS,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new CS(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){H("MemoryPersistence","Starting transaction:",e);const s=new VS(this.ci.next());return this.referenceDelegate.Ei(),r(s).next(i=>this.referenceDelegate.di(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ai(e,n){return L.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class VS extends lb{constructor(e){super(),this.currentSequenceNumber=e}}class Od{constructor(e){this.persistence=e,this.Ri=new Md,this.Vi=null}static mi(e){return new Od(e)}get fi(){if(this.Vi)return this.Vi;throw X(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),L.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),L.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),L.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(s=>this.fi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.fi.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return L.forEach(this.fi,r=>{const s=Y.fromPath(r);return this.gi(e,s).next(i=>{i||n.removeEntry(s,ee.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return L.or([()=>L.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class fl{constructor(e,n){this.persistence=e,this.pi=new Jr(r=>hb(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=bS(this,n)}static mi(e,n){return new fl(e,n)}Ei(){}di(e){return L.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return L.forEach(this.pi,(r,s)=>this.br(e,r,s).next(i=>i?L.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ii(e,o=>this.br(e,o,n).next(l=>{l||(r++,i.removeEntry(o,ee.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),L.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),L.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),L.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),L.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Ra(e.data.value)),n}br(e,n,r){return L.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.pi.get(n);return L.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fd{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=s}static As(e,n){let r=ae(),s=ae();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Fd(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LS{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MS{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return D2()?8:ub(C2())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ys(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ws(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new LS;return this.Ss(e,n,o).next(l=>{if(i.result=l,this.Vs)return this.bs(e,n,o,l.size)})}).next(()=>i.result)}bs(e,n,r,s){return r.documentReadCount<this.fs?(is()<=ce.DEBUG&&H("QueryEngine","SDK will not create cache indexes for query:",os(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),L.resolve()):(is()<=ce.DEBUG&&H("QueryEngine","Query:",os(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(is()<=ce.DEBUG&&H("QueryEngine","The SDK decides to create cache indexes for query:",os(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,dn(n))):L.resolve())}ys(e,n){if(ng(n))return L.resolve(null);let r=dn(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=ch(n,null,"F"),r=dn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=ae(...i);return this.ps.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(u=>{const d=this.Ds(n,l);return this.Cs(n,d,o,u.readTime)?this.ys(e,ch(n,null,"F")):this.vs(e,d,n,u)}))})))}ws(e,n,r,s){return ng(n)||s.isEqual(ee.min())?L.resolve(null):this.ps.getDocuments(e,r).next(i=>{const o=this.Ds(n,i);return this.Cs(n,o,r,s)?L.resolve(null):(is()<=ce.DEBUG&&H("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),os(n)),this.vs(e,o,n,sb(s,fo)).next(l=>l))})}Ds(e,n){let r=new qe(u_(e));return n.forEach((s,i)=>{Ul(e,i)&&(r=r.add(i))}),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ss(e,n,r){return is()<=ce.DEBUG&&H("QueryEngine","Using full collection scan to execute query:",os(n)),this.ps.getDocumentsMatchingQuery(e,n,ar.min(),r)}vs(e,n,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ud="LocalStore",OS=3e8;class FS{constructor(e,n,r,s){this.persistence=e,this.Fs=n,this.serializer=s,this.Ms=new Ae(oe),this.xs=new Jr(i=>Rd(i),Nd),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new IS(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function US(t,e,n,r){return new FS(t,e,n,r)}async function P_(t,e){const n=te(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],l=[];let u=ae();for(const d of s){o.push(d.batchId);for(const m of d.mutations)u=u.add(m.key)}for(const d of i){l.push(d.batchId);for(const m of d.mutations)u=u.add(m.key)}return n.localDocuments.getDocuments(r,u).next(d=>({Ls:d,removedBatchIds:o,addedBatchIds:l}))})})}function zS(t,e){const n=te(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(l,u,d,m){const p=d.batch,g=p.keys();let x=L.resolve();return g.forEach(k=>{x=x.next(()=>m.getEntry(u,k)).next(R=>{const P=d.docVersions.get(k);de(P!==null,48541),R.version.compareTo(P)<0&&(p.applyToRemoteDocument(R,d),R.isValidDocument()&&(R.setReadTime(d.commitVersion),m.addEntry(R)))})}),x.next(()=>l.mutationQueue.removeMutationBatch(u,p))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let u=ae();for(let d=0;d<l.mutationResults.length;++d)l.mutationResults[d].transformResults.length>0&&(u=u.add(l.batch.mutations[d].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function D_(t){const e=te(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function BS(t,e){const n=te(t),r=e.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const l=[];e.targetChanges.forEach((m,p)=>{const g=s.get(p);if(!g)return;l.push(n.Pi.removeMatchingKeys(i,m.removedDocuments,p).next(()=>n.Pi.addMatchingKeys(i,m.addedDocuments,p)));let x=g.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(p)!==null?x=x.withResumeToken(nt.EMPTY_BYTE_STRING,ee.min()).withLastLimboFreeSnapshotVersion(ee.min()):m.resumeToken.approximateByteSize()>0&&(x=x.withResumeToken(m.resumeToken,r)),s=s.insert(p,x),function(R,P,T){return R.resumeToken.approximateByteSize()===0||P.snapshotVersion.toMicroseconds()-R.snapshotVersion.toMicroseconds()>=OS?!0:T.addedDocuments.size+T.modifiedDocuments.size+T.removedDocuments.size>0}(g,x,m)&&l.push(n.Pi.updateTargetData(i,x))});let u=An(),d=ae();if(e.documentUpdates.forEach(m=>{e.resolvedLimboDocuments.has(m)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,m))}),l.push($S(i,o,e.documentUpdates).next(m=>{u=m.ks,d=m.qs})),!r.isEqual(ee.min())){const m=n.Pi.getLastRemoteSnapshotVersion(i).next(p=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,r));l.push(m)}return L.waitFor(l).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,u,d)).next(()=>u)}).then(i=>(n.Ms=s,i))}function $S(t,e,n){let r=ae(),s=ae();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=An();return n.forEach((l,u)=>{const d=i.get(l);u.isFoundDocument()!==d.isFoundDocument()&&(s=s.add(l)),u.isNoDocument()&&u.version.isEqual(ee.min())?(e.removeEntry(l,u.readTime),o=o.insert(l,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),o=o.insert(l,u)):H(Ud,"Ignoring outdated watch update for ",l,". Current version:",d.version," Watch version:",u.version)}),{ks:o,qs:s}})}function HS(t,e){const n=te(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=kd),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function qS(t,e){const n=te(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Pi.getTargetData(r,e).next(i=>i?(s=i,L.resolve(s)):n.Pi.allocateTargetId(r).next(o=>(s=new Hn(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function ph(t,e,n){const r=te(t),s=r.Ms.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Qs(o))throw o;H(Ud,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(s.target)}function pg(t,e,n){const r=te(t);let s=ee.min(),i=ae();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,d,m){const p=te(u),g=p.xs.get(m);return g!==void 0?L.resolve(p.Ms.get(g)):p.Pi.getTargetData(d,m)}(r,o,dn(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,l.targetId).next(u=>{i=u})}).next(()=>r.Fs.getDocumentsMatchingQuery(o,e,n?s:ee.min(),n?i:ae())).next(l=>(WS(r,Nb(e),l),{documents:l,Qs:i})))}function WS(t,e,n){let r=t.Os.get(e)||ee.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.Os.set(e,r)}class gg{constructor(){this.activeTargetIds=Lb()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class GS{constructor(){this.Mo=new gg,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new gg,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KS{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yg="ConnectivityMonitor";class vg{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){H(yg,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){H(yg,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fa=null;function gh(){return fa===null?fa=function(){return 268435456+Math.round(2147483648*Math.random())}():fa++,"0x"+fa.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zu="RestConnection",QS={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class YS{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===ll?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,n,r,s,i){const o=gh(),l=this.zo(e,n.toUriEncodedString());H(Zu,`Sending RPC '${e}' ${o}:`,l,r);const u={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(u,s,i);const{host:d}=new URL(l),m=Io(d);return this.Jo(e,l,u,r,m).then(p=>(H(Zu,`Received RPC '${e}' ${o}: `,p),p),p=>{throw Ms(Zu,`RPC '${e}' ${o} failed with error: `,p,"url: ",l,"request:",r),p})}Ho(e,n,r,s,i,o){return this.Go(e,n,r,s,i)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Gs}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}zo(e,n){const r=QS[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XS{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ot="WebChannelConnection";class JS extends YS{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,i){const o=gh();return new Promise((l,u)=>{const d=new Lv;d.setWithCredentials(!0),d.listenOnce(Mv.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case Aa.NO_ERROR:const p=d.getResponseJson();H(ot,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(p)),l(p);break;case Aa.TIMEOUT:H(ot,`RPC '${e}' ${o} timed out`),u(new $(V.DEADLINE_EXCEEDED,"Request time out"));break;case Aa.HTTP_ERROR:const g=d.getStatus();if(H(ot,`RPC '${e}' ${o} failed with status:`,g,"response text:",d.getResponseText()),g>0){let x=d.getResponseJson();Array.isArray(x)&&(x=x[0]);const k=x==null?void 0:x.error;if(k&&k.status&&k.message){const R=function(T){const y=T.toLowerCase().replace(/_/g,"-");return Object.values(V).indexOf(y)>=0?y:V.UNKNOWN}(k.status);u(new $(R,k.message))}else u(new $(V.UNKNOWN,"Server responded with status "+d.getStatus()))}else u(new $(V.UNAVAILABLE,"Connection failed."));break;default:X(9055,{l_:e,streamId:o,h_:d.getLastErrorCode(),P_:d.getLastError()})}}finally{H(ot,`RPC '${e}' ${o} completed.`)}});const m=JSON.stringify(s);H(ot,`RPC '${e}' ${o} sending request:`,s),d.send(n,"POST",m,r,15)})}T_(e,n,r){const s=gh(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Uv(),l=Fv(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.jo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const m=i.join("");H(ot,`Creating RPC '${e}' stream ${s}: ${m}`,u);const p=o.createWebChannel(m,u);this.I_(p);let g=!1,x=!1;const k=new XS({Yo:P=>{x?H(ot,`Not sending because RPC '${e}' stream ${s} is closed:`,P):(g||(H(ot,`Opening RPC '${e}' stream ${s} transport.`),p.open(),g=!0),H(ot,`RPC '${e}' stream ${s} sending:`,P),p.send(P))},Zo:()=>p.close()}),R=(P,T,y)=>{P.listen(T,S=>{try{y(S)}catch(D){setTimeout(()=>{throw D},0)}})};return R(p,Ii.EventType.OPEN,()=>{x||(H(ot,`RPC '${e}' stream ${s} transport opened.`),k.o_())}),R(p,Ii.EventType.CLOSE,()=>{x||(x=!0,H(ot,`RPC '${e}' stream ${s} transport closed`),k.a_(),this.E_(p))}),R(p,Ii.EventType.ERROR,P=>{x||(x=!0,Ms(ot,`RPC '${e}' stream ${s} transport errored. Name:`,P.name,"Message:",P.message),k.a_(new $(V.UNAVAILABLE,"The operation could not be completed")))}),R(p,Ii.EventType.MESSAGE,P=>{var T;if(!x){const y=P.data[0];de(!!y,16349);const S=y,D=(S==null?void 0:S.error)||((T=S[0])==null?void 0:T.error);if(D){H(ot,`RPC '${e}' stream ${s} received error:`,D);const M=D.status;let O=function(b){const I=Le[b];if(I!==void 0)return w_(I)}(M),E=D.message;O===void 0&&(O=V.INTERNAL,E="Unknown error status: "+M+" with message "+D.message),x=!0,k.a_(new $(O,E)),p.close()}else H(ot,`RPC '${e}' stream ${s} received:`,y),k.u_(y)}}),R(l,Ov.STAT_EVENT,P=>{P.stat===rh.PROXY?H(ot,`RPC '${e}' stream ${s} detected buffering proxy`):P.stat===rh.NOPROXY&&H(ot,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{k.__()},0),k}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function ec(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hl(t){return new nS(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j_{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=s,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&H("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _g="PersistentStream";class V_{constructor(e,n,r,s,i,o,l,u){this.Mi=e,this.S_=r,this.b_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new j_(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===V.RESOURCE_EXHAUSTED?(In(n.toString()),In("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===V.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.D_===n&&this.G_(r,s)},r=>{e(()=>{const s=new $(V.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(s=>{r(()=>this.z_(s))}),this.stream.onMessage(s=>{r(()=>++this.F_==1?this.J_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return H(_g,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(H(_g,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class ZS extends V_{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=iS(this.serializer,e),r=function(i){if(!("targetChange"in i))return ee.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?ee.min():o.readTime?fn(o.readTime):ee.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=mh(this.serializer),n.addTarget=function(i,o){let l;const u=o.target;if(l=lh(u)?{documents:lS(i,u)}:{query:uS(i,u).ft},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=T_(i,o.resumeToken);const d=hh(i,o.expectedCount);d!==null&&(l.expectedCount=d)}else if(o.snapshotVersion.compareTo(ee.min())>0){l.readTime=dl(i,o.snapshotVersion.toTimestamp());const d=hh(i,o.expectedCount);d!==null&&(l.expectedCount=d)}return l}(this.serializer,e);const r=hS(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=mh(this.serializer),n.removeTarget=e,this.q_(n)}}class ek extends V_{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return de(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,de(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){de(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=aS(e.writeResults,e.commitTime),r=fn(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=mh(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>oS(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tk{}class nk extends tk{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new $(V.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Go(e,dh(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===V.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new $(V.UNKNOWN,i.toString())})}Ho(e,n,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Ho(e,dh(n,r),s,o,l,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===V.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new $(V.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class rk{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(In(n),this.aa=!1):H("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gr="RemoteStore";class sk{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(o=>{r.enqueueAndForget(async()=>{Zr(this)&&(H(Gr,"Restarting streams for network reachability change."),await async function(u){const d=te(u);d.Ea.add(4),await Co(d),d.Ra.set("Unknown"),d.Ea.delete(4),await ql(d)}(this))})}),this.Ra=new rk(r,s)}}async function ql(t){if(Zr(t))for(const e of t.da)await e(!0)}async function Co(t){for(const e of t.da)await e(!1)}function L_(t,e){const n=te(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Hd(n)?$d(n):Xs(n).O_()&&Bd(n,e))}function zd(t,e){const n=te(t),r=Xs(n);n.Ia.delete(e),r.O_()&&M_(n,e),n.Ia.size===0&&(r.O_()?r.L_():Zr(n)&&n.Ra.set("Unknown"))}function Bd(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ee.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Xs(t).Y_(e)}function M_(t,e){t.Va.Ue(e),Xs(t).Z_(e)}function $d(t){t.Va=new Jb({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Xs(t).start(),t.Ra.ua()}function Hd(t){return Zr(t)&&!Xs(t).x_()&&t.Ia.size>0}function Zr(t){return te(t).Ea.size===0}function O_(t){t.Va=void 0}async function ik(t){t.Ra.set("Online")}async function ok(t){t.Ia.forEach((e,n)=>{Bd(t,e)})}async function ak(t,e){O_(t),Hd(t)?(t.Ra.ha(e),$d(t)):t.Ra.set("Unknown")}async function lk(t,e,n){if(t.Ra.set("Online"),e instanceof E_&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const l of i.targetIds)s.Ia.has(l)&&(await s.remoteSyncer.rejectListen(l,o),s.Ia.delete(l),s.Va.removeTarget(l))}(t,e)}catch(r){H(Gr,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await ml(t,r)}else if(e instanceof Pa?t.Va.Ze(e):e instanceof x_?t.Va.st(e):t.Va.tt(e),!n.isEqual(ee.min()))try{const r=await D_(t.localStore);n.compareTo(r)>=0&&await function(i,o){const l=i.Va.Tt(o);return l.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const m=i.Ia.get(d);m&&i.Ia.set(d,m.withResumeToken(u.resumeToken,o))}}),l.targetMismatches.forEach((u,d)=>{const m=i.Ia.get(u);if(!m)return;i.Ia.set(u,m.withResumeToken(nt.EMPTY_BYTE_STRING,m.snapshotVersion)),M_(i,u);const p=new Hn(m.target,u,d,m.sequenceNumber);Bd(i,p)}),i.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){H(Gr,"Failed to raise snapshot:",r),await ml(t,r)}}async function ml(t,e,n){if(!Qs(e))throw e;t.Ea.add(1),await Co(t),t.Ra.set("Offline"),n||(n=()=>D_(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{H(Gr,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await ql(t)})}function F_(t,e){return e().catch(n=>ml(t,n,e))}async function Wl(t){const e=te(t),n=hr(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:kd;for(;uk(e);)try{const s=await HS(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,ck(e,s)}catch(s){await ml(e,s)}U_(e)&&z_(e)}function uk(t){return Zr(t)&&t.Ta.length<10}function ck(t,e){t.Ta.push(e);const n=hr(t);n.O_()&&n.X_&&n.ea(e.mutations)}function U_(t){return Zr(t)&&!hr(t).x_()&&t.Ta.length>0}function z_(t){hr(t).start()}async function hk(t){hr(t).ra()}async function dk(t){const e=hr(t);for(const n of t.Ta)e.ea(n.mutations)}async function fk(t,e,n){const r=t.Ta.shift(),s=jd.from(r,e,n);await F_(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Wl(t)}async function mk(t,e){e&&hr(t).X_&&await async function(r,s){if(function(o){return Qb(o)&&o!==V.ABORTED}(s.code)){const i=r.Ta.shift();hr(r).B_(),await F_(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Wl(r)}}(t,e),U_(t)&&z_(t)}async function wg(t,e){const n=te(t);n.asyncQueue.verifyOperationInProgress(),H(Gr,"RemoteStore received new credentials");const r=Zr(n);n.Ea.add(3),await Co(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await ql(n)}async function pk(t,e){const n=te(t);e?(n.Ea.delete(2),await ql(n)):e||(n.Ea.add(2),await Co(n),n.Ra.set("Unknown"))}function Xs(t){return t.ma||(t.ma=function(n,r,s){const i=te(n);return i.sa(),new ZS(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:ik.bind(null,t),t_:ok.bind(null,t),r_:ak.bind(null,t),H_:lk.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),Hd(t)?$d(t):t.Ra.set("Unknown")):(await t.ma.stop(),O_(t))})),t.ma}function hr(t){return t.fa||(t.fa=function(n,r,s){const i=te(n);return i.sa(),new ek(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:hk.bind(null,t),r_:mk.bind(null,t),ta:dk.bind(null,t),na:fk.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await Wl(t)):(await t.fa.stop(),t.Ta.length>0&&(H(Gr,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qd{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new rr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,l=new qd(e,n,o,s,i);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new $(V.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Wd(t,e){if(In("AsyncQueue",`${e}: ${t}`),Qs(t))return new $(V.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Is{static emptySet(e){return new Is(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||Y.comparator(n.key,r.key):(n,r)=>Y.comparator(n.key,r.key),this.keyedMap=Ai(),this.sortedSet=new Ae(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Is)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Is;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xg{constructor(){this.ga=new Ae(Y.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):X(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class Bs{constructor(e,n,r,s,i,o,l,u,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new Bs(e,n,Is.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Fl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gk{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class yk{constructor(){this.queries=Eg(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=te(n),i=s.queries;s.queries=Eg(),i.forEach((o,l)=>{for(const u of l.Sa)u.onError(r)})})(this,new $(V.ABORTED,"Firestore shutting down"))}}function Eg(){return new Jr(t=>l_(t),Fl)}async function B_(t,e){const n=te(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.ba()&&e.Da()&&(r=2):(i=new gk,r=e.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(s,!0);break;case 1:i.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const l=Wd(o,`Initialization of query '${os(e.query)}' failed`);return void e.onError(l)}n.queries.set(s,i),i.Sa.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&Gd(n)}async function $_(t,e){const n=te(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.Sa.indexOf(e);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?s=e.Da()?0:1:!i.ba()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function vk(t,e){const n=te(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const l of o.Sa)l.Fa(s)&&(r=!0);o.wa=s}}r&&Gd(n)}function _k(t,e,n){const r=te(t),s=r.queries.get(e);if(s)for(const i of s.Sa)i.onError(n);r.queries.delete(e)}function Gd(t){t.Ca.forEach(e=>{e.next()})}var yh,Tg;(Tg=yh||(yh={})).Ma="default",Tg.Cache="cache";class H_{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Bs(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Bs.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==yh.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q_{constructor(e){this.key=e}}class W_{constructor(e){this.key=e}}class wk{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ae(),this.mutatedKeys=ae(),this.eu=u_(e),this.tu=new Is(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new xg,s=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,l=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,d=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((m,p)=>{const g=s.get(m),x=Ul(this.query,p)?p:null,k=!!g&&this.mutatedKeys.has(g.key),R=!!x&&(x.hasLocalMutations||this.mutatedKeys.has(x.key)&&x.hasCommittedMutations);let P=!1;g&&x?g.data.isEqual(x.data)?k!==R&&(r.track({type:3,doc:x}),P=!0):this.su(g,x)||(r.track({type:2,doc:x}),P=!0,(u&&this.eu(x,u)>0||d&&this.eu(x,d)<0)&&(l=!0)):!g&&x?(r.track({type:0,doc:x}),P=!0):g&&!x&&(r.track({type:1,doc:g}),P=!0,(u||d)&&(l=!0)),P&&(x?(o=o.add(x),i=R?i.add(m):i.delete(m)):(o=o.delete(m),i=i.delete(m)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const m=this.query.limitType==="F"?o.last():o.first();o=o.delete(m.key),i=i.delete(m.key),r.track({type:1,doc:m})}return{tu:o,iu:r,Cs:l,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((m,p)=>function(x,k){const R=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return X(20277,{Rt:P})}};return R(x)-R(k)}(m.type,p.type)||this.eu(m.doc,p.doc)),this.ou(r),s=s??!1;const l=n&&!s?this._u():[],u=this.Xa.size===0&&this.current&&!s?1:0,d=u!==this.Za;return this.Za=u,o.length!==0||d?{snapshot:new Bs(this.query,e.tu,i,o,e.mutatedKeys,u===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new xg,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=ae(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new W_(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new q_(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=ae();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Bs.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Kd="SyncEngine";class xk{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class Ek{constructor(e){this.key=e,this.hu=!1}}class Tk{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Jr(l=>l_(l),Fl),this.Iu=new Map,this.Eu=new Set,this.du=new Ae(Y.comparator),this.Au=new Map,this.Ru=new Md,this.Vu={},this.mu=new Map,this.fu=zs.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function bk(t,e,n=!0){const r=J_(t);let s;const i=r.Tu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await G_(r,e,n,!0),s}async function Sk(t,e){const n=J_(t);await G_(n,e,!0,!1)}async function G_(t,e,n,r){const s=await qS(t.localStore,dn(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let l;return r&&(l=await kk(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&L_(t.remoteStore,s),l}async function kk(t,e,n,r,s){t.pu=(p,g,x)=>async function(R,P,T,y){let S=P.view.ru(T);S.Cs&&(S=await pg(R.localStore,P.query,!1).then(({documents:E})=>P.view.ru(E,S)));const D=y&&y.targetChanges.get(P.targetId),M=y&&y.targetMismatches.get(P.targetId)!=null,O=P.view.applyChanges(S,R.isPrimaryClient,D,M);return Sg(R,P.targetId,O.au),O.snapshot}(t,p,g,x);const i=await pg(t.localStore,e,!0),o=new wk(e,i.Qs),l=o.ru(i.documents),u=No.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),d=o.applyChanges(l,t.isPrimaryClient,u);Sg(t,n,d.au);const m=new xk(e,n,o);return t.Tu.set(e,m),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),d.snapshot}async function Ik(t,e,n){const r=te(t),s=r.Tu.get(e),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter(o=>!Fl(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await ph(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&zd(r.remoteStore,s.targetId),vh(r,s.targetId)}).catch(Ks)):(vh(r,s.targetId),await ph(r.localStore,s.targetId,!0))}async function Ak(t,e){const n=te(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),zd(n.remoteStore,r.targetId))}async function Rk(t,e,n){const r=Lk(t);try{const s=await function(o,l){const u=te(o),d=Ee.now(),m=l.reduce((x,k)=>x.add(k.key),ae());let p,g;return u.persistence.runTransaction("Locally write mutations","readwrite",x=>{let k=An(),R=ae();return u.Ns.getEntries(x,m).next(P=>{k=P,k.forEach((T,y)=>{y.isValidDocument()||(R=R.add(T))})}).next(()=>u.localDocuments.getOverlayedDocuments(x,k)).next(P=>{p=P;const T=[];for(const y of l){const S=Hb(y,p.get(y.key).overlayedDocument);S!=null&&T.push(new _r(y.key,S,e_(S.value.mapValue),Bt.exists(!0)))}return u.mutationQueue.addMutationBatch(x,d,T,l)}).next(P=>{g=P;const T=P.applyToLocalDocumentSet(p,R);return u.documentOverlayCache.saveOverlays(x,P.batchId,T)})}).then(()=>({batchId:g.batchId,changes:h_(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,l,u){let d=o.Vu[o.currentUser.toKey()];d||(d=new Ae(oe)),d=d.insert(l,u),o.Vu[o.currentUser.toKey()]=d}(r,s.batchId,n),await Po(r,s.changes),await Wl(r.remoteStore)}catch(s){const i=Wd(s,"Failed to persist write");n.reject(i)}}async function K_(t,e){const n=te(t);try{const r=await BS(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Au.get(i);o&&(de(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.hu=!0:s.modifiedDocuments.size>0?de(o.hu,14607):s.removedDocuments.size>0&&(de(o.hu,42227),o.hu=!1))}),await Po(n,r,e)}catch(r){await Ks(r)}}function bg(t,e,n){const r=te(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach((i,o)=>{const l=o.view.va(e);l.snapshot&&s.push(l.snapshot)}),function(o,l){const u=te(o);u.onlineState=l;let d=!1;u.queries.forEach((m,p)=>{for(const g of p.Sa)g.va(l)&&(d=!0)}),d&&Gd(u)}(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function Nk(t,e,n){const r=te(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),i=s&&s.key;if(i){let o=new Ae(Y.comparator);o=o.insert(i,ut.newNoDocument(i,ee.min()));const l=ae().add(i),u=new $l(ee.min(),new Map,new Ae(oe),o,l);await K_(r,u),r.du=r.du.remove(i),r.Au.delete(e),Qd(r)}else await ph(r.localStore,e,!1).then(()=>vh(r,e,n)).catch(Ks)}async function Ck(t,e){const n=te(t),r=e.batch.batchId;try{const s=await zS(n.localStore,e);Y_(n,r,null),Q_(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Po(n,s)}catch(s){await Ks(s)}}async function Pk(t,e,n){const r=te(t);try{const s=await function(o,l){const u=te(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let m;return u.mutationQueue.lookupMutationBatch(d,l).next(p=>(de(p!==null,37113),m=p.keys(),u.mutationQueue.removeMutationBatch(d,p))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,m,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,m)).next(()=>u.localDocuments.getDocuments(d,m))})}(r.localStore,e);Y_(r,e,n),Q_(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Po(r,s)}catch(s){await Ks(s)}}function Q_(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function Y_(t,e,n){const r=te(t);let s=r.Vu[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Vu[r.currentUser.toKey()]=s}}function vh(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||X_(t,r)})}function X_(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(zd(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),Qd(t))}function Sg(t,e,n){for(const r of n)r instanceof q_?(t.Ru.addReference(r.key,e),Dk(t,r)):r instanceof W_?(H(Kd,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||X_(t,r.key)):X(19791,{wu:r})}function Dk(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(H(Kd,"New document in limbo: "+n),t.Eu.add(r),Qd(t))}function Qd(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new Y(ye.fromString(e)),r=t.fu.next();t.Au.set(r,new Ek(n)),t.du=t.du.insert(n,r),L_(t.remoteStore,new Hn(dn(Cd(n.path)),r,"TargetPurposeLimboResolution",Ll.ce))}}async function Po(t,e,n){const r=te(t),s=[],i=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((l,u)=>{o.push(r.pu(u,e,n).then(d=>{var m;if((d||n)&&r.isPrimaryClient){const p=d?!d.fromCache:(m=n==null?void 0:n.targetChanges.get(u.targetId))==null?void 0:m.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(d){s.push(d);const p=Fd.As(u.targetId,d);i.push(p)}}))}),await Promise.all(o),r.Pu.H_(s),await async function(u,d){const m=te(u);try{await m.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>L.forEach(d,g=>L.forEach(g.Es,x=>m.persistence.referenceDelegate.addReference(p,g.targetId,x)).next(()=>L.forEach(g.ds,x=>m.persistence.referenceDelegate.removeReference(p,g.targetId,x)))))}catch(p){if(!Qs(p))throw p;H(Ud,"Failed to update sequence numbers: "+p)}for(const p of d){const g=p.targetId;if(!p.fromCache){const x=m.Ms.get(g),k=x.snapshotVersion,R=x.withLastLimboFreeSnapshotVersion(k);m.Ms=m.Ms.insert(g,R)}}}(r.localStore,i))}async function jk(t,e){const n=te(t);if(!n.currentUser.isEqual(e)){H(Kd,"User change. New user:",e.toKey());const r=await P_(n.localStore,e);n.currentUser=e,function(i,o){i.mu.forEach(l=>{l.forEach(u=>{u.reject(new $(V.CANCELLED,o))})}),i.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Po(n,r.Ls)}}function Vk(t,e){const n=te(t),r=n.Au.get(e);if(r&&r.hu)return ae().add(r.key);{let s=ae();const i=n.Iu.get(e);if(!i)return s;for(const o of i){const l=n.Tu.get(o);s=s.unionWith(l.view.nu)}return s}}function J_(t){const e=te(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=K_.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Vk.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Nk.bind(null,e),e.Pu.H_=vk.bind(null,e.eventManager),e.Pu.yu=_k.bind(null,e.eventManager),e}function Lk(t){const e=te(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Ck.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Pk.bind(null,e),e}class pl{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Hl(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return US(this.persistence,new MS,e.initialUser,this.serializer)}Cu(e){return new C_(Od.mi,this.serializer)}Du(e){return new GS}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}pl.provider={build:()=>new pl};class Mk extends pl{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){de(this.persistence.referenceDelegate instanceof fl,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new ES(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?wt.withCacheSize(this.cacheSizeBytes):wt.DEFAULT;return new C_(r=>fl.mi(r,n),this.serializer)}}class _h{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>bg(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=jk.bind(null,this.syncEngine),await pk(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new yk}()}createDatastore(e){const n=Hl(e.databaseInfo.databaseId),r=function(i){return new JS(i)}(e.databaseInfo);return function(i,o,l,u){return new nk(i,o,l,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,l){return new sk(r,s,i,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>bg(this.syncEngine,n,0),function(){return vg.v()?new vg:new KS}())}createSyncEngine(e,n){return function(s,i,o,l,u,d,m){const p=new Tk(s,i,o,l,u,d);return m&&(p.gu=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=te(s);H(Gr,"RemoteStore shutting down."),i.Ea.add(5),await Co(i),i.Aa.shutdown(),i.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}_h.provider={build:()=>new _h};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z_{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):In("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dr="FirestoreClient";class Ok{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=at.UNAUTHENTICATED,this.clientId=Sd.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{H(dr,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(H(dr,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new rr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Wd(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function tc(t,e){t.asyncQueue.verifyOperationInProgress(),H(dr,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await P_(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function kg(t,e){t.asyncQueue.verifyOperationInProgress();const n=await Fk(t);H(dr,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>wg(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>wg(e.remoteStore,s)),t._onlineComponents=e}async function Fk(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){H(dr,"Using user provided OfflineComponentProvider");try{await tc(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===V.FAILED_PRECONDITION||s.code===V.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Ms("Error using user provided cache. Falling back to memory cache: "+n),await tc(t,new pl)}}else H(dr,"Using default OfflineComponentProvider"),await tc(t,new Mk(void 0));return t._offlineComponents}async function ew(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(H(dr,"Using user provided OnlineComponentProvider"),await kg(t,t._uninitializedComponentsProvider._online)):(H(dr,"Using default OnlineComponentProvider"),await kg(t,new _h))),t._onlineComponents}function Uk(t){return ew(t).then(e=>e.syncEngine)}async function wh(t){const e=await ew(t),n=e.eventManager;return n.onListen=bk.bind(null,e.syncEngine),n.onUnlisten=Ik.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Sk.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=Ak.bind(null,e.syncEngine),n}function zk(t,e,n={}){const r=new rr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,u,d){const m=new Z_({next:g=>{m.Nu(),o.enqueueAndForget(()=>$_(i,p)),g.fromCache&&u.source==="server"?d.reject(new $(V.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(g)},error:g=>d.reject(g)}),p=new H_(l,m,{includeMetadataChanges:!0,qa:!0});return B_(i,p)}(await wh(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tw(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ig=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nw="firestore.googleapis.com",Ag=!0;class Rg{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new $(V.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=nw,this.ssl=Ag}else this.host=e.host,this.ssl=e.ssl??Ag;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=N_;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<wS)throw new $(V.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}rb("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=tw(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new $(V.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new $(V.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new $(V.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Gl{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Rg({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new $(V.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new $(V.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Rg(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new GT;switch(r.type){case"firstParty":return new XT(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new $(V.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Ig.get(n);r&&(H("ComponentProvider","Removing Datastore"),Ig.delete(n),r.terminate())}(this),Promise.resolve()}}function Bk(t,e,n,r={}){var d;t=zt(t,Gl);const s=Io(e),i=t._getSettings(),o={...i,emulatorOptions:t._getEmulatorOptions()},l=`${e}:${n}`;s&&(xv(`https://${l}`),Tv("Firestore",!0)),i.host!==nw&&i.host!==l&&Ms("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...i,host:l,ssl:s,emulatorOptions:r};if(!il(u,o)&&(t._setSettings(u),r.mockUserToken)){let m,p;if(typeof r.mockUserToken=="string")m=r.mockUserToken,p=at.MOCK_USER;else{m=Ev(r.mockUserToken,(d=t._app)==null?void 0:d.options.projectId);const g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new $(V.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new at(g)}t._authCredentials=new KT(new Bv(m,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new wr(this.firestore,e,this._query)}}class Ve{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new sr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ve(this.firestore,e,this._key)}toJSON(){return{type:Ve._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Ao(n,Ve._jsonSchema))return new Ve(e,r||null,new Y(ye.fromString(n.referencePath)))}}Ve._jsonSchemaVersion="firestore/documentReference/1.0",Ve._jsonSchema={type:Fe("string",Ve._jsonSchemaVersion),referencePath:Fe("string")};class sr extends wr{constructor(e,n,r){super(e,n,Cd(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ve(this.firestore,null,new Y(e))}withConverter(e){return new sr(this.firestore,e,this._path)}}function fr(t,e,...n){if(t=gt(t),$v("collection","path",e),t instanceof Gl){const r=ye.fromString(e,...n);return Bp(r),new sr(t,null,r)}{if(!(t instanceof Ve||t instanceof sr))throw new $(V.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ye.fromString(e,...n));return Bp(r),new sr(t.firestore,null,r)}}function Qt(t,e,...n){if(t=gt(t),arguments.length===1&&(e=Sd.newId()),$v("doc","path",e),t instanceof Gl){const r=ye.fromString(e,...n);return zp(r),new Ve(t,null,new Y(r))}{if(!(t instanceof Ve||t instanceof sr))throw new $(V.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ye.fromString(e,...n));return zp(r),new Ve(t.firestore,t instanceof sr?t.converter:null,new Y(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ng="AsyncQueue";class Cg{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new j_(this,"async_queue_retry"),this._c=()=>{const r=ec();r&&H(Ng,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=ec();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=ec();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new rr;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Qs(e))throw e;H(Ng,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,In("INTERNAL UNHANDLED ERROR: ",Pg(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=qd.createAndSchedule(this,e,n,r,i=>this.hc(i));return this.tc.push(s),s}uc(){this.nc&&X(47125,{Pc:Pg(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function Pg(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dg(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class mr extends Gl{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new Cg,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Cg(e),this._firestoreClient=void 0,await e}}}function $k(t,e){const n=typeof t=="object"?t:Pv(),r=typeof t=="string"?t:ll,s=Av(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=_v("firestore");i&&Bk(s,...i)}return s}function Yd(t){if(t._terminated)throw new $(V.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||Hk(t),t._firestoreClient}function Hk(t){var r,s,i;const e=t._freezeSettings(),n=function(l,u,d,m){return new mb(l,u,d,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,tw(m.experimentalLongPollingOptions),m.useFetchStreams,m.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(s=e.localCache)!=null&&s._offlineComponentProvider&&((i=e.localCache)!=null&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new Ok(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ot(nt.fromBase64String(e))}catch(n){throw new $(V.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ot(nt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Ot._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Ao(e,Ot._jsonSchema))return Ot.fromBase64String(e.bytes)}}Ot._jsonSchemaVersion="firestore/bytes/1.0",Ot._jsonSchema={type:Fe("string",Ot._jsonSchemaVersion),bytes:Fe("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kl{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new $(V.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ze(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ql{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new $(V.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new $(V.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return oe(this._lat,e._lat)||oe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:mn._jsonSchemaVersion}}static fromJSON(e){if(Ao(e,mn._jsonSchema))return new mn(e.latitude,e.longitude)}}mn._jsonSchemaVersion="firestore/geoPoint/1.0",mn._jsonSchema={type:Fe("string",mn._jsonSchemaVersion),latitude:Fe("number"),longitude:Fe("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:pn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Ao(e,pn._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new pn(e.vectorValues);throw new $(V.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}pn._jsonSchemaVersion="firestore/vectorValue/1.0",pn._jsonSchema={type:Fe("string",pn._jsonSchemaVersion),vectorValues:Fe("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qk=/^__.*__$/;class Wk{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new _r(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ro(e,this.data,n,this.fieldTransforms)}}class rw{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new _r(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function sw(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw X(40011,{Ac:t})}}class Xd{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Xd({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return gl(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(sw(this.Ac)&&qk.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class Gk{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Hl(e)}Cc(e,n,r,s=!1){return new Xd({Ac:e,methodName:n,Dc:r,path:Ze.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Yl(t){const e=t._freezeSettings(),n=Hl(t._databaseId);return new Gk(t._databaseId,!!e.ignoreUndefinedProperties,n)}function iw(t,e,n,r,s,i={}){const o=t.Cc(i.merge||i.mergeFields?2:0,e,n,s);Zd("Data must be an object, but it was:",o,r);const l=ow(r,o);let u,d;if(i.merge)u=new Nt(o.fieldMask),d=o.fieldTransforms;else if(i.mergeFields){const m=[];for(const p of i.mergeFields){const g=xh(e,p,n);if(!o.contains(g))throw new $(V.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);lw(m,g)||m.push(g)}u=new Nt(m),d=o.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,d=o.fieldTransforms;return new Wk(new Et(l),u,d)}class Xl extends Ql{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Xl}}class Jd extends Ql{_toFieldTransform(e){return new Ub(e.path,new vo)}isEqual(e){return e instanceof Jd}}function Kk(t,e,n,r){const s=t.Cc(1,e,n);Zd("Data must be an object, but it was:",s,r);const i=[],o=Et.empty();vr(r,(u,d)=>{const m=ef(e,u,n);d=gt(d);const p=s.yc(m);if(d instanceof Xl)i.push(m);else{const g=Do(d,p);g!=null&&(i.push(m),o.set(m,g))}});const l=new Nt(i);return new rw(o,l,s.fieldTransforms)}function Qk(t,e,n,r,s,i){const o=t.Cc(1,e,n),l=[xh(e,r,n)],u=[s];if(i.length%2!=0)throw new $(V.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<i.length;g+=2)l.push(xh(e,i[g])),u.push(i[g+1]);const d=[],m=Et.empty();for(let g=l.length-1;g>=0;--g)if(!lw(d,l[g])){const x=l[g];let k=u[g];k=gt(k);const R=o.yc(x);if(k instanceof Xl)d.push(x);else{const P=Do(k,R);P!=null&&(d.push(x),m.set(x,P))}}const p=new Nt(d);return new rw(m,p,o.fieldTransforms)}function Yk(t,e,n,r=!1){return Do(n,t.Cc(r?4:3,e))}function Do(t,e){if(aw(t=gt(t)))return Zd("Unsupported field value:",e,t),ow(t,e);if(t instanceof Ql)return function(r,s){if(!sw(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const l of r){let u=Do(l,s.wc(o));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=gt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Mb(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Ee.fromDate(r);return{timestampValue:dl(s.serializer,i)}}if(r instanceof Ee){const i=new Ee(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:dl(s.serializer,i)}}if(r instanceof mn)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ot)return{bytesValue:T_(s.serializer,r._byteString)};if(r instanceof Ve){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Ld(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof pn)return function(o,l){return{mapValue:{fields:{[Jv]:{stringValue:Zv},[ul]:{arrayValue:{values:o.toArray().map(d=>{if(typeof d!="number")throw l.Sc("VectorValues must only contain numeric values.");return Pd(l.serializer,d)})}}}}}}(r,s);throw s.Sc(`Unsupported field value: ${Vl(r)}`)}(t,e)}function ow(t,e){const n={};return Wv(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):vr(t,(r,s)=>{const i=Do(s,e.mc(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function aw(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ee||t instanceof mn||t instanceof Ot||t instanceof Ve||t instanceof Ql||t instanceof pn)}function Zd(t,e,n){if(!aw(n)||!Hv(n)){const r=Vl(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function xh(t,e,n){if((e=gt(e))instanceof Kl)return e._internalPath;if(typeof e=="string")return ef(t,e);throw gl("Field path arguments must be of type string or ",t,!1,void 0,n)}const Xk=new RegExp("[~\\*/\\[\\]]");function ef(t,e,n){if(e.search(Xk)>=0)throw gl(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Kl(...e.split("."))._internalPath}catch{throw gl(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function gl(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(i||o)&&(u+=" (found",i&&(u+=` in field ${r}`),o&&(u+=` in document ${s}`),u+=")"),new $(V.INVALID_ARGUMENT,l+t+u)}function lw(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uw{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Ve(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Jk(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(tf("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class Jk extends uw{data(){return super.data()}}function tf(t,e){return typeof e=="string"?ef(t,e):e instanceof Kl?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cw(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new $(V.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class nf{}class hw extends nf{}function dw(t,e,...n){let r=[];e instanceof nf&&r.push(e),r=r.concat(n),function(i){const o=i.filter(u=>u instanceof sf).length,l=i.filter(u=>u instanceof rf).length;if(o>1||o>0&&l>0)throw new $(V.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class rf extends hw{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new rf(e,n,r)}_apply(e){const n=this._parse(e);return mw(e._query,n),new wr(e.firestore,e.converter,uh(e._query,n))}_parse(e){const n=Yl(e.firestore);return function(i,o,l,u,d,m,p){let g;if(d.isKeyField()){if(m==="array-contains"||m==="array-contains-any")throw new $(V.INVALID_ARGUMENT,`Invalid Query. You can't perform '${m}' queries on documentId().`);if(m==="in"||m==="not-in"){Vg(p,m);const k=[];for(const R of p)k.push(jg(u,i,R));g={arrayValue:{values:k}}}else g=jg(u,i,p)}else m!=="in"&&m!=="not-in"&&m!=="array-contains-any"||Vg(p,m),g=Yk(l,o,p,m==="in"||m==="not-in");return Oe.create(d,m,g)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class sf extends nf{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new sf(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Zt.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const l=i.getFlattenedFilters();for(const u of l)mw(o,u),o=uh(o,u)}(e._query,n),new wr(e.firestore,e.converter,uh(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class of extends hw{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new of(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new $(V.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new $(V.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new yo(i,o)}(e._query,this._field,this._direction);return new wr(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new Ys(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function fw(t,e="asc"){const n=e,r=tf("orderBy",t);return of._create(r,n)}function jg(t,e,n){if(typeof(n=gt(n))=="string"){if(n==="")throw new $(V.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!a_(e)&&n.indexOf("/")!==-1)throw new $(V.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(ye.fromString(n));if(!Y.isDocumentKey(r))throw new $(V.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Yp(t,new Y(r))}if(n instanceof Ve)return Yp(t,n._key);throw new $(V.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Vl(n)}.`)}function Vg(t,e){if(!Array.isArray(t)||t.length===0)throw new $(V.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function mw(t,e){const n=function(s,i){for(const o of s)for(const l of o.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new $(V.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new $(V.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class Zk{convertValue(e,n="none"){switch(cr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return De(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ur(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw X(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return vr(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var r,s,i;const n=(i=(s=(r=e.fields)==null?void 0:r[ul].arrayValue)==null?void 0:s.values)==null?void 0:i.map(o=>De(o.doubleValue));return new pn(n)}convertGeoPoint(e){return new mn(De(e.latitude),De(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Ol(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(mo(e));default:return null}}convertTimestamp(e){const n=lr(e);return new Ee(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=ye.fromString(e);de(R_(r),9688,{name:e});const s=new po(r.get(1),r.get(3)),i=new Y(r.popFirst(5));return s.isEqual(n)||In(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pw(t,e,n){let r;return r=t?t.toFirestore(e):e,r}class Ni{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Mr extends uw{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Da(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(tf("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new $(V.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Mr._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Mr._jsonSchemaVersion="firestore/documentSnapshot/1.0",Mr._jsonSchema={type:Fe("string",Mr._jsonSchemaVersion),bundleSource:Fe("string","DocumentSnapshot"),bundleName:Fe("string"),bundle:Fe("string")};class Da extends Mr{data(e={}){return super.data(e)}}class Or{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Ni(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Da(this._firestore,this._userDataWriter,r.key,r,new Ni(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new $(V.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(l=>{const u=new Da(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Ni(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const u=new Da(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Ni(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let d=-1,m=-1;return l.type!==0&&(d=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),m=o.indexOf(l.doc.key)),{type:eI(l.type),doc:u,oldIndex:d,newIndex:m}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new $(V.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Or._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Sd.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function eI(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return X(61501,{type:t})}}Or._jsonSchemaVersion="firestore/querySnapshot/1.0",Or._jsonSchema={type:Fe("string",Or._jsonSchemaVersion),bundleSource:Fe("string","QuerySnapshot"),bundleName:Fe("string"),bundle:Fe("string")};class af extends Zk{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ot(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ve(this.firestore,null,n)}}function lf(t){t=zt(t,wr);const e=zt(t.firestore,mr),n=Yd(e),r=new af(e);return cw(t._query),zk(n,t._query).then(s=>new Or(e,r,t,s))}function Lg(t,e,n){t=zt(t,Ve);const r=zt(t.firestore,mr),s=pw(t.converter,e);return Zl(r,[iw(Yl(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Bt.none())])}function gw(t,e,n,...r){t=zt(t,Ve);const s=zt(t.firestore,mr),i=Yl(s);let o;return o=typeof(e=gt(e))=="string"||e instanceof Kl?Qk(i,"updateDoc",t._key,e,n,r):Kk(i,"updateDoc",t._key,e),Zl(s,[o.toMutation(t._key,Bt.exists(!0))])}function Fr(t){return Zl(zt(t.firestore,mr),[new Dd(t._key,Bt.none())])}function Jl(t,e){const n=zt(t.firestore,mr),r=Qt(t),s=pw(t.converter,e);return Zl(n,[iw(Yl(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,Bt.exists(!1))]).then(()=>r)}function uf(t,...e){var u,d,m;t=gt(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||Dg(e[r])||(n=e[r++]);const s={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(Dg(e[r])){const p=e[r];e[r]=(u=p.next)==null?void 0:u.bind(p),e[r+1]=(d=p.error)==null?void 0:d.bind(p),e[r+2]=(m=p.complete)==null?void 0:m.bind(p)}let i,o,l;if(t instanceof Ve)o=zt(t.firestore,mr),l=Cd(t._key.path),i={next:p=>{e[r]&&e[r](tI(o,t,p))},error:e[r+1],complete:e[r+2]};else{const p=zt(t,wr);o=zt(p.firestore,mr),l=p._query;const g=new af(o);i={next:x=>{e[r]&&e[r](new Or(o,g,p,x))},error:e[r+1],complete:e[r+2]},cw(t._query)}return function(g,x,k,R){const P=new Z_(R),T=new H_(x,P,k);return g.asyncQueue.enqueueAndForget(async()=>B_(await wh(g),T)),()=>{P.Nu(),g.asyncQueue.enqueueAndForget(async()=>$_(await wh(g),T))}}(Yd(o),l,s,i)}function Zl(t,e){return function(r,s){const i=new rr;return r.asyncQueue.enqueueAndForget(async()=>Rk(await Uk(r),s,i)),i.promise}(Yd(t),e)}function tI(t,e,n){const r=n.docs.get(e._key),s=new af(t);return new Mr(t,s,e._key,r,new Ni(n.hasPendingWrites,n.fromCache),e.converter)}function $s(){return new Jd("serverTimestamp")}(function(e,n=!0){(function(s){Gs=s})(Nv),co(new Ls("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),l=new mr(new QT(r.getProvider("auth-internal")),new JT(o,r.getProvider("app-check-internal")),function(d,m){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new $(V.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new po(d.options.projectId,m)}(o,s),o);return i={useFetchStreams:n,...i},l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),tr(Mp,Op,e),tr(Mp,Op,"esm2020")})();var nI="firebase",rI="12.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */tr(nI,rI,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yw="firebasestorage.googleapis.com",vw="storageBucket",sI=2*60*1e3,iI=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pe extends Xr{constructor(e,n,r=0){super(nc(e),`Firebase Storage: ${n} (${nc(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Pe.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return nc(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Ce;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Ce||(Ce={}));function nc(t){return"storage/"+t}function cf(){const t="An unknown error occurred, please check the error payload for server response.";return new Pe(Ce.UNKNOWN,t)}function oI(t){return new Pe(Ce.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function aI(t){return new Pe(Ce.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function lI(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Pe(Ce.UNAUTHENTICATED,t)}function uI(){return new Pe(Ce.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function cI(t){return new Pe(Ce.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function hI(){return new Pe(Ce.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function dI(){return new Pe(Ce.CANCELED,"User canceled the upload/download.")}function fI(t){return new Pe(Ce.INVALID_URL,"Invalid URL '"+t+"'.")}function mI(t){return new Pe(Ce.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function pI(){return new Pe(Ce.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+vw+"' property when initializing the app?")}function gI(){return new Pe(Ce.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function yI(){return new Pe(Ce.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function vI(t){return new Pe(Ce.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Eh(t){return new Pe(Ce.INVALID_ARGUMENT,t)}function _w(){return new Pe(Ce.APP_DELETED,"The Firebase app was deleted.")}function _I(t){return new Pe(Ce.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function qi(t,e){return new Pe(Ce.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Ei(t){throw new Pe(Ce.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Ct.makeFromUrl(e,n)}catch{return new Ct(e,"")}if(r.path==="")return r;throw mI(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(D){D.path.charAt(D.path.length-1)==="/"&&(D.path_=D.path_.slice(0,-1))}const o="(/(.*))?$",l=new RegExp("^gs://"+s+o,"i"),u={bucket:1,path:3};function d(D){D.path_=decodeURIComponent(D.path)}const m="v[A-Za-z0-9_]+",p=n.replace(/[.]/g,"\\."),g="(/([^?#]*).*)?$",x=new RegExp(`^https?://${p}/${m}/b/${s}/o${g}`,"i"),k={bucket:1,path:3},R=n===yw?"(?:storage.googleapis.com|storage.cloud.google.com)":n,P="([^?#]*)",T=new RegExp(`^https?://${R}/${s}/${P}`,"i"),S=[{regex:l,indices:u,postModify:i},{regex:x,indices:k,postModify:d},{regex:T,indices:{bucket:1,path:2},postModify:d}];for(let D=0;D<S.length;D++){const M=S[D],O=M.regex.exec(e);if(O){const E=O[M.indices.bucket];let _=O[M.indices.path];_||(_=""),r=new Ct(E,_),M.postModify(r);break}}if(r==null)throw fI(e);return r}}class wI{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xI(t,e,n){let r=1,s=null,i=null,o=!1,l=0;function u(){return l===2}let d=!1;function m(...P){d||(d=!0,e.apply(null,P))}function p(P){s=setTimeout(()=>{s=null,t(x,u())},P)}function g(){i&&clearTimeout(i)}function x(P,...T){if(d){g();return}if(P){g(),m.call(null,P,...T);return}if(u()||o){g(),m.call(null,P,...T);return}r<64&&(r*=2);let S;l===1?(l=2,S=0):S=(r+Math.random())*1e3,p(S)}let k=!1;function R(P){k||(k=!0,g(),!d&&(s!==null?(P||(l=2),clearTimeout(s),p(0)):P||(l=1)))}return p(0),i=setTimeout(()=>{o=!0,R(!0)},n),R}function EI(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TI(t){return t!==void 0}function bI(t){return typeof t=="object"&&!Array.isArray(t)}function hf(t){return typeof t=="string"||t instanceof String}function Mg(t){return df()&&t instanceof Blob}function df(){return typeof Blob<"u"}function Og(t,e,n,r){if(r<e)throw Eh(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Eh(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eu(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function ww(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var Ur;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Ur||(Ur={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SI(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kI{constructor(e,n,r,s,i,o,l,u,d,m,p,g=!0,x=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=l,this.errorCallback_=u,this.timeout_=d,this.progressCallback_=m,this.connectionFactory_=p,this.retry=g,this.isUsingEmulator=x,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((k,R)=>{this.resolve_=k,this.reject_=R,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new ma(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=l=>{const u=l.loaded,d=l.lengthComputable?l.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,d)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const l=i.getErrorCode()===Ur.NO_ERROR,u=i.getStatus();if(!l||SI(u,this.additionalRetryCodes_)&&this.retry){const m=i.getErrorCode()===Ur.ABORT;r(!1,new ma(!1,null,m));return}const d=this.successCodes_.indexOf(u)!==-1;r(!0,new ma(d,i))})},n=(r,s)=>{const i=this.resolve_,o=this.reject_,l=s.connection;if(s.wasSuccessCode)try{const u=this.callback_(l,l.getResponse());TI(u)?i(u):i()}catch(u){o(u)}else if(l!==null){const u=cf();u.serverResponse=l.getErrorText(),this.errorCallback_?o(this.errorCallback_(l,u)):o(u)}else if(s.canceled){const u=this.appDelete_?_w():dI();o(u)}else{const u=hI();o(u)}};this.canceled_?n(!1,new ma(!1,null,!0)):this.backoffId_=xI(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&EI(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class ma{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function II(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function AI(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function RI(t,e){e&&(t["X-Firebase-GMPID"]=e)}function NI(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function CI(t,e,n,r,s,i,o=!0,l=!1){const u=ww(t.urlParams),d=t.url+u,m=Object.assign({},t.headers);return RI(m,e),II(m,n),AI(m,i),NI(m,r),new kI(d,t.method,m,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o,l)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PI(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function DI(...t){const e=PI();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(df())return new Blob(t);throw new Pe(Ce.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function jI(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VI(t){if(typeof atob>"u")throw vI("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ln={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class rc{constructor(e,n){this.data=e,this.contentType=n||null}}function LI(t,e){switch(t){case ln.RAW:return new rc(xw(e));case ln.BASE64:case ln.BASE64URL:return new rc(Ew(t,e));case ln.DATA_URL:return new rc(OI(e),FI(e))}throw cf()}function xw(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const i=r,o=t.charCodeAt(++n);r=65536|(i&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function MI(t){let e;try{e=decodeURIComponent(t)}catch{throw qi(ln.DATA_URL,"Malformed data URL.")}return xw(e)}function Ew(t,e){switch(t){case ln.BASE64:{const s=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(s||i)throw qi(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case ln.BASE64URL:{const s=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(s||i)throw qi(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=VI(e)}catch(s){throw s.message.includes("polyfill")?s:qi(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class Tw{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw qi(ln.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=UI(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function OI(t){const e=new Tw(t);return e.base64?Ew(ln.BASE64,e.rest):MI(e.rest)}function FI(t){return new Tw(t).contentType}function UI(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zn{constructor(e,n){let r=0,s="";Mg(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(Mg(this.data_)){const r=this.data_,s=jI(r,e,n);return s===null?null:new zn(s)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new zn(r,!0)}}static getBlob(...e){if(df()){const n=e.map(r=>r instanceof zn?r.data_:r);return new zn(DI.apply(null,n))}else{const n=e.map(o=>hf(o)?LI(ln.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const s=new Uint8Array(r);let i=0;return n.forEach(o=>{for(let l=0;l<o.length;l++)s[i++]=o[l]}),new zn(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bw(t){let e;try{e=JSON.parse(t)}catch{return null}return bI(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zI(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function BI(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function Sw(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $I(t,e){return e}class ft{constructor(e,n,r,s){this.server=e,this.local=n||e,this.writable=!!r,this.xform=s||$I}}let pa=null;function HI(t){return!hf(t)||t.length<2?t:Sw(t)}function kw(){if(pa)return pa;const t=[];t.push(new ft("bucket")),t.push(new ft("generation")),t.push(new ft("metageneration")),t.push(new ft("name","fullPath",!0));function e(i,o){return HI(o)}const n=new ft("name");n.xform=e,t.push(n);function r(i,o){return o!==void 0?Number(o):o}const s=new ft("size");return s.xform=r,t.push(s),t.push(new ft("timeCreated")),t.push(new ft("updated")),t.push(new ft("md5Hash",null,!0)),t.push(new ft("cacheControl",null,!0)),t.push(new ft("contentDisposition",null,!0)),t.push(new ft("contentEncoding",null,!0)),t.push(new ft("contentLanguage",null,!0)),t.push(new ft("contentType",null,!0)),t.push(new ft("metadata","customMetadata",!0)),pa=t,pa}function qI(t,e){function n(){const r=t.bucket,s=t.fullPath,i=new Ct(r,s);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:n})}function WI(t,e,n){const r={};r.type="file";const s=n.length;for(let i=0;i<s;i++){const o=n[i];r[o.local]=o.xform(r,e[o.server])}return qI(r,t),r}function Iw(t,e,n){const r=bw(e);return r===null?null:WI(t,r,n)}function GI(t,e,n,r){const s=bw(e);if(s===null||!hf(s.downloadTokens))return null;const i=s.downloadTokens;if(i.length===0)return null;const o=encodeURIComponent;return i.split(",").map(d=>{const m=t.bucket,p=t.fullPath,g="/b/"+o(m)+"/o/"+o(p),x=eu(g,n,r),k=ww({alt:"media",token:d});return x+k})[0]}function KI(t,e){const n={},r=e.length;for(let s=0;s<r;s++){const i=e[s];i.writable&&(n[i.server]=t[i.local])}return JSON.stringify(n)}class ff{constructor(e,n,r,s){this.url=e,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Aw(t){if(!t)throw cf()}function QI(t,e){function n(r,s){const i=Iw(t,s,e);return Aw(i!==null),i}return n}function YI(t,e){function n(r,s){const i=Iw(t,s,e);return Aw(i!==null),GI(i,s,t.host,t._protocol)}return n}function Rw(t){function e(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=uI():s=lI():n.getStatus()===402?s=aI(t.bucket):n.getStatus()===403?s=cI(t.path):s=r,s.status=n.getStatus(),s.serverResponse=r.serverResponse,s}return e}function Nw(t){const e=Rw(t);function n(r,s){let i=e(r,s);return r.getStatus()===404&&(i=oI(t.path)),i.serverResponse=s.serverResponse,i}return n}function XI(t,e,n){const r=e.fullServerUrl(),s=eu(r,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,l=new ff(s,i,YI(t,n),o);return l.errorHandler=Nw(e),l}function JI(t,e){const n=e.fullServerUrl(),r=eu(n,t.host,t._protocol),s="DELETE",i=t.maxOperationRetryTime;function o(u,d){}const l=new ff(r,s,o,i);return l.successCodes=[200,204],l.errorHandler=Nw(e),l}function ZI(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function eA(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=ZI(null,e)),r}function tA(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function l(){let S="";for(let D=0;D<2;D++)S=S+Math.random().toString().slice(2);return S}const u=l();o["Content-Type"]="multipart/related; boundary="+u;const d=eA(e,r,s),m=KI(d,n),p="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+m+`\r
--`+u+`\r
Content-Type: `+d.contentType+`\r
\r
`,g=`\r
--`+u+"--",x=zn.getBlob(p,r,g);if(x===null)throw gI();const k={name:d.fullPath},R=eu(i,t.host,t._protocol),P="POST",T=t.maxUploadRetryTime,y=new ff(R,P,QI(t,n),T);return y.urlParams=k,y.headers=o,y.body=x.uploadData(),y.errorHandler=Rw(e),y}class nA{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Ur.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Ur.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Ur.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,s,i){if(this.sent_)throw Ei("cannot .send() more than once");if(Io(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const o in i)i.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,i[o].toString());return s!==void 0?this.xhr_.send(s):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Ei("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Ei("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Ei("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Ei("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class rA extends nA{initXhr(){this.xhr_.responseType="text"}}function mf(){return new rA}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr{constructor(e,n){this._service=e,n instanceof Ct?this._location=n:this._location=Ct.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Kr(e,n)}get root(){const e=new Ct(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Sw(this._location.path)}get storage(){return this._service}get parent(){const e=zI(this._location.path);if(e===null)return null;const n=new Ct(this._location.bucket,e);return new Kr(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw _I(e)}}function sA(t,e,n){t._throwIfRoot("uploadBytes");const r=tA(t.storage,t._location,kw(),new zn(e,!0),n);return t.storage.makeRequestWithTokens(r,mf).then(s=>({metadata:s,ref:t}))}function iA(t){t._throwIfRoot("getDownloadURL");const e=XI(t.storage,t._location,kw());return t.storage.makeRequestWithTokens(e,mf).then(n=>{if(n===null)throw yI();return n})}function oA(t){t._throwIfRoot("deleteObject");const e=JI(t.storage,t._location);return t.storage.makeRequestWithTokens(e,mf)}function aA(t,e){const n=BI(t._location.path,e),r=new Ct(t._location.bucket,n);return new Kr(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lA(t){return/^[A-Za-z]+:\/\//.test(t)}function uA(t,e){return new Kr(t,e)}function Cw(t,e){if(t instanceof pf){const n=t;if(n._bucket==null)throw pI();const r=new Kr(n,n._bucket);return e!=null?Cw(r,e):r}else return e!==void 0?aA(t,e):t}function cA(t,e){if(e&&lA(e)){if(t instanceof pf)return uA(t,e);throw Eh("To use ref(service, url), the first argument must be a Storage instance.")}else return Cw(t,e)}function Fg(t,e){const n=e==null?void 0:e[vw];return n==null?null:Ct.makeFromBucketSpec(n,t)}function hA(t,e,n,r={}){t.host=`${e}:${n}`;const s=Io(e);s&&(xv(`https://${t.host}/b`),Tv("Storage",!0)),t._isUsingEmulator=!0,t._protocol=s?"https":"http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:Ev(i,t.app.options.projectId))}class pf{constructor(e,n,r,s,i,o=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._isUsingEmulator=o,this._bucket=null,this._host=yw,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=sI,this._maxUploadRetryTime=iI,this._requests=new Set,s!=null?this._bucket=Ct.makeFromBucketSpec(s,this._host):this._bucket=Fg(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Ct.makeFromBucketSpec(this._url,e):this._bucket=Fg(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Og("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Og("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(Rv(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Kr(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new wI(_w());{const o=CI(e,this._appId,r,s,n,this._firebaseVersion,i,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const Ug="@firebase/storage",zg="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pw="storage";function dA(t,e,n){return t=gt(t),sA(t,e,n)}function fA(t){return t=gt(t),iA(t)}function mA(t){return t=gt(t),oA(t)}function Dw(t,e){return t=gt(t),cA(t,e)}function pA(t=Pv(),e){t=gt(t);const r=Av(t,Pw).getImmediate({identifier:e}),s=_v("storage");return s&&gA(r,...s),r}function gA(t,e,n,r={}){hA(t,e,n,r)}function yA(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new pf(n,r,s,e,Nv)}function vA(){co(new Ls(Pw,yA,"PUBLIC").setMultipleInstances(!0)),tr(Ug,zg,""),tr(Ug,zg,"esm2020")}vA();const _A={apiKey:"AIzaSyBQwo6qEZWlOyXRv3iPycYiLIqRt3PalkE",authDomain:"foodflash-46a42.firebaseapp.com",projectId:"foodflash-46a42",storageBucket:"foodflash-46a42.firebasestorage.app",messagingSenderId:"497618057237",appId:"1:497618057237:web:3025f9c950cdf76b67361c"},jw=Cv(_A),Qe=$k(jw),Vw=pA(jw),Rr="foodflash_migrated_to_firebase",Th="foodflash_recipes",Lw=async()=>{console.log("🔄 Überprüfe Migration-Status...");try{const t=localStorage.getItem(Th);if(!t){console.log("ℹ️ Keine localStorage-Rezepte gefunden"),localStorage.getItem(Rr)||localStorage.setItem(Rr,"true");return}const e=JSON.parse(t);if(e.length===0){console.log("ℹ️ localStorage ist leer"),localStorage.getItem(Rr)||localStorage.setItem(Rr,"true");return}const n=fr(Qe,"recipes"),r=await lf(n),s=new Set;r.forEach(o=>{const l=o.data();l.url&&s.add(l.url)});const i=e.filter(o=>!o.url||o.url.trim()===""?!Array.from(r.docs).some(u=>{const d=u.data();return d.title===o.title&&d.platform===o.platform}):!s.has(o.url));if(i.length===0){console.log("✅ Alle localStorage-Rezepte sind bereits in Firebase"),localStorage.setItem(Rr,"true");return}console.log(`📦 Migriere ${i.length} fehlende Rezepte zu Firebase...`);for(const o of i){const{id:l,createdAt:u,...d}=o;try{await Jl(n,{...d,ingredients:o.ingredients||[],comments:o.comments||[],rating:o.rating||void 0,notes:o.notes||"",createdAt:$s()})}catch(m){console.error(`❌ Fehler beim Migrieren von Rezept "${o.title}":`,m)}}console.log(`✅ ${i.length} Rezepte erfolgreich migriert!`),await wA(),localStorage.setItem(Rr,"true"),console.log("🗑️ Lösche alte localStorage-Rezepte (haben falsche IDs)..."),localStorage.removeItem(Th),console.log("✅ localStorage bereinigt - App verwendet jetzt nur noch Firebase-Daten")}catch(t){console.error("❌ Fehler bei Migration:",t)}};async function wA(){const t=localStorage.getItem("foodflash_shopping");if(!t){console.log("ℹ️ Keine Einkaufsliste in localStorage gefunden");return}const e=JSON.parse(t);if(e.length===0){console.log("ℹ️ Keine Einkaufsartikel zum Migrieren");return}const n=fr(Qe,"shoppingList");if((await lf(n)).size>0){console.log("ℹ️ Firebase hat bereits Einkaufsliste, überspringe Migration");return}console.log(`🛒 Migriere ${e.length} Einkaufsartikel...`);for(const s of e){const{id:i,...o}=s;await Jl(n,{...o,addedAt:$s()})}console.log(`✅ ${e.length} Artikel migriert`)}const Mw=async()=>{console.log("🔄 Erzwinge Re-Migration..."),localStorage.removeItem(Rr),await Lw(),console.log("✅ Re-Migration abgeschlossen")},bh=async()=>{const t=localStorage.getItem(Th);if(!t)return{localCount:0,firebaseCount:0,needsMigration:!1,unmigrated:0};const e=JSON.parse(t),n=fr(Qe,"recipes"),r=await lf(n),s=new Set;r.forEach(o=>{const l=o.data();l.url&&s.add(l.url)});const i=e.filter(o=>!o.url||o.url.trim()===""?!Array.from(r.docs).some(u=>{const d=u.data();return d.title===o.title&&d.platform===o.platform}):!s.has(o.url)).length;return{localCount:e.length,firebaseCount:r.size,needsMigration:i>0,unmigrated:i}},xA=({activeTab:t,setActiveTab:e})=>{const{currentHousehold:n,households:r,setCurrentHousehold:s}=ko(),[i,o]=B.useState(!1),[l,u]=B.useState(!1),d=async()=>{if(!l){u(!0);try{const m=await bh();if(m.needsMigration){const p=`📦 Migration erforderlich:

• localStorage: ${m.localCount} Rezepte
• Firebase: ${m.firebaseCount} Rezepte
• Noch zu migrieren: ${m.unmigrated} Rezepte

Möchtest du die Migration jetzt durchführen?`;confirm(p)&&(await Mw(),alert(`✅ Migration abgeschlossen!

Bitte aktualisiere die Seite (F5) um die Änderungen zu sehen.`),window.location.reload())}else alert(`✅ Alle Rezepte sind bereits migriert!

• localStorage: ${m.localCount} Rezepte
• Firebase: ${m.firebaseCount} Rezepte
• Keine Migration nötig`)}catch(m){console.error("Migration error:",m),alert("❌ Migration fehlgeschlagen. Bitte überprüfe die Browser-Console.")}finally{u(!1)}}};return c.jsx("header",{className:"bg-slate-800/95 backdrop-blur-sm shadow-2xl border-b-2 border-primary-600/50 autumn-glow",children:c.jsx("div",{className:"container mx-auto px-4 py-4",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsxs("div",{className:"relative",children:[c.jsx(p2,{className:"h-10 w-10 text-primary-400 fill-primary-400",strokeWidth:2}),c.jsx("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-accent-400 rounded-full animate-pulse autumn-glow-gold"})]}),c.jsx("h1",{className:"text-xl sm:text-3xl font-bold bg-gradient-to-r from-primary-400 via-secondary-400 to-accent-400 bg-clip-text text-transparent",children:"🍂 Food Flash"})]}),n&&c.jsxs("div",{className:"relative",children:[c.jsxs("button",{onClick:()=>o(!i),"data-test-id":"household-selector","aria-label":"Haushalt wechseln",className:"flex items-center gap-1 sm:gap-2 px-2 sm:px-3 py-1 sm:py-2 rounded-lg bg-slate-700/80 border border-slate-600 hover:border-primary-500 transition-all text-gray-200 hover:text-primary-300",children:[c.jsx("span",{className:"text-lg",children:n.icon}),c.jsx("span",{className:"hidden md:inline text-sm font-medium",children:n.name}),c.jsx(t2,{className:"h-3 w-3 sm:h-4 sm:w-4"})]}),i&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>o(!1)}),c.jsx("div",{className:"absolute top-full mt-2 left-0 bg-slate-800 border-2 border-slate-600 rounded-lg shadow-2xl overflow-hidden z-50 min-w-[200px]",children:c.jsxs("div",{className:"p-2",children:[c.jsx("p",{className:"text-xs text-gray-400 px-3 py-1 mb-1",children:"Haushalt wechseln:"}),r.map(m=>c.jsxs("button",{onClick:()=>{s(m),o(!1)},"data-test-id":`switch-to-${m.id}`,"aria-label":`Zu ${m.name} wechseln`,className:pe("w-full flex items-center gap-3 px-3 py-2 rounded-lg transition-colors text-left",n.id===m.id?"bg-primary-600 text-white":"hover:bg-slate-700 text-gray-200"),children:[c.jsx("span",{className:"text-lg",children:m.icon}),c.jsx("span",{className:"text-sm font-medium",children:m.name})]},m.id))]})})]})]}),c.jsxs("button",{onClick:d,"data-test-id":"migration-button","aria-label":"Rezepte zu Firebase migrieren",disabled:l,className:pe("flex items-center gap-1 sm:gap-2 px-2 sm:px-3 py-1 sm:py-2 rounded-lg border transition-all text-xs sm:text-sm font-medium",l?"bg-gray-700/50 border-gray-600 text-gray-400 cursor-not-allowed":"bg-blue-600/20 border-blue-500 text-blue-300 hover:bg-blue-600/30 hover:text-blue-200"),title:"Alte Rezepte aus localStorage zu Firebase migrieren",children:[c.jsx(h2,{className:pe("h-3 w-3 sm:h-4 sm:w-4",l&&"animate-spin")}),c.jsx("span",{className:"hidden lg:inline",children:l?"Migriere...":"Migration"})]})]}),c.jsxs("nav",{className:"flex gap-0.5 sm:gap-2",children:[c.jsxs("button",{onClick:()=>e("home"),"data-test-id":"nav-home","aria-label":"Zur Startseite navigieren",className:pe("flex items-center justify-center px-1.5 sm:px-4 py-1.5 sm:py-2 rounded-lg sm:rounded-full font-medium transition-all duration-200 min-w-[32px] sm:min-w-0",t==="home"?"bg-primary-600 text-white shadow-lg scale-105 autumn-glow":"bg-slate-700/50 text-gray-300 hover:bg-primary-600/20 hover:text-primary-300 border border-slate-600/50"),children:[c.jsx(uv,{className:"h-4 w-4 sm:h-5 sm:w-5"}),c.jsx("span",{className:"hidden xl:inline ml-2",children:"🏠 Start"})]}),c.jsxs("button",{onClick:()=>e("recipes"),"data-test-id":"nav-recipes","aria-label":"Zu meinen Rezepten navigieren",className:pe("flex items-center justify-center px-1.5 sm:px-4 py-1.5 sm:py-2 rounded-lg sm:rounded-full font-medium transition-all duration-200 min-w-[32px] sm:min-w-0",t==="recipes"?"bg-secondary-600 text-white shadow-lg scale-105 autumn-glow-green":"bg-slate-700/50 text-gray-300 hover:bg-secondary-600/20 hover:text-secondary-300 border border-dark-600/50"),children:[c.jsx(iv,{className:"h-4 w-4 sm:h-5 sm:w-5"}),c.jsx("span",{className:"hidden xl:inline ml-2",children:"📖 Rezepte"})]}),c.jsxs("button",{onClick:()=>e("planner"),"data-test-id":"nav-planner","aria-label":"Zum Wochenplaner navigieren",className:pe("flex items-center justify-center px-1.5 sm:px-4 py-1.5 sm:py-2 rounded-lg sm:rounded-full font-medium transition-all duration-200 min-w-[32px] sm:min-w-0",t==="planner"?"bg-accent-600 text-white shadow-lg scale-105 autumn-glow-gold":"bg-slate-700/50 text-gray-300 hover:bg-accent-600/20 hover:text-accent-300 border border-dark-600/50"),children:[c.jsx(ov,{className:"h-4 w-4 sm:h-5 sm:w-5"}),c.jsx("span",{className:"hidden xl:inline ml-2",children:"📅 Planer"})]}),c.jsxs("button",{onClick:()=>e("shopping"),"data-test-id":"nav-shopping","aria-label":"Zur Einkaufsliste navigieren",className:pe("flex items-center justify-center px-1.5 sm:px-4 py-1.5 sm:py-2 rounded-lg sm:rounded-full font-medium transition-all duration-200 min-w-[32px] sm:min-w-0",t==="shopping"?"bg-primary-600 text-white shadow-lg scale-105 autumn-glow":"bg-slate-700/50 text-gray-300 hover:bg-primary-600/20 hover:text-primary-300 border border-slate-600/50"),children:[c.jsx(_d,{className:"h-4 w-4 sm:h-5 sm:w-5"}),c.jsx("span",{className:"hidden xl:inline ml-2",children:"🛒 Einkauf"})]})]})]})})})},EA=({onPlatformClick:t})=>c.jsxs("div",{className:"text-center py-12",children:[c.jsxs("div",{className:"mb-12",children:[c.jsx("h2",{className:"text-5xl font-bold text-gray-100 mb-4 bg-gradient-to-r from-primary-400 via-accent-400 to-secondary-400 bg-clip-text text-transparent",children:"🍂 Willkommen bei Food Flash! ⚡"}),c.jsx("p",{className:"text-xl text-gray-300 max-w-2xl mx-auto",children:"Speichere deine Lieblingsrezepte von überall und habe sie immer griffbereit!"})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 max-w-6xl mx-auto mb-12",children:[c.jsxs("button",{onClick:()=>t("youtube"),"data-test-id":"platform-youtube","aria-label":"YouTube Rezepte anzeigen",className:"bg-slate-800/80 backdrop-blur-sm rounded-2xl p-6 shadow-xl border-2 border-red-500/30 hover:scale-105 transition-all duration-300 hover:border-red-400 hover:shadow-2xl hover:autumn-glow cursor-pointer",children:[c.jsx("div",{className:"w-16 h-16 bg-red-600/20 rounded-full flex items-center justify-center mx-auto mb-4 border border-red-500/30",children:c.jsx(Dr,{className:"h-8 w-8 text-red-400"})}),c.jsx("h3",{className:"font-bold text-gray-100 mb-2",children:"YouTube"}),c.jsx("p",{className:"text-sm text-gray-400",children:"Video-Rezepte speichern"})]}),c.jsxs("button",{onClick:()=>t("instagram"),"data-test-id":"platform-instagram","aria-label":"Instagram Rezepte anzeigen",className:"bg-slate-800/80 backdrop-blur-sm rounded-2xl p-6 shadow-xl border-2 border-pink-500/30 hover:scale-105 transition-all duration-300 hover:border-pink-400 hover:shadow-2xl cursor-pointer",children:[c.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-pink-600/20 to-purple-600/20 rounded-full flex items-center justify-center mx-auto mb-4 border border-pink-500/30",children:c.jsx(cv,{className:"h-8 w-8 text-pink-400"})}),c.jsx("h3",{className:"font-bold text-gray-100 mb-2",children:"Instagram"}),c.jsx("p",{className:"text-sm text-gray-400",children:"Reel-Rezepte sichern"})]}),c.jsxs("button",{onClick:()=>t("facebook"),"data-test-id":"platform-facebook","aria-label":"Facebook Rezepte anzeigen",className:"bg-slate-800/80 backdrop-blur-sm rounded-2xl p-6 shadow-xl border-2 border-blue-500/30 hover:scale-105 transition-all duration-300 hover:border-blue-400 hover:shadow-2xl cursor-pointer",children:[c.jsx("div",{className:"w-16 h-16 bg-blue-600/20 rounded-full flex items-center justify-center mx-auto mb-4 border border-blue-500/30",children:c.jsx(av,{className:"h-8 w-8 text-blue-400"})}),c.jsx("h3",{className:"font-bold text-gray-100 mb-2",children:"Facebook"}),c.jsx("p",{className:"text-sm text-gray-400",children:"Posts & Videos merken"})]}),c.jsxs("button",{onClick:()=>t("tiktok"),"data-test-id":"platform-tiktok","aria-label":"TikTok Rezepte anzeigen",className:"bg-slate-800/80 backdrop-blur-sm rounded-2xl p-6 shadow-xl border-2 border-gray-500/30 hover:scale-105 transition-all duration-300 hover:border-gray-400 hover:shadow-2xl cursor-pointer",children:[c.jsx("div",{className:"w-16 h-16 bg-gray-600/20 rounded-full flex items-center justify-center mx-auto mb-4 border border-gray-500/30",children:c.jsx(hv,{className:"h-8 w-8 text-gray-400"})}),c.jsx("h3",{className:"font-bold text-gray-100 mb-2",children:"TikTok"}),c.jsx("p",{className:"text-sm text-gray-400",children:"Kurze Rezept-Videos"})]})]}),c.jsxs("div",{className:"bg-gradient-to-r from-primary-600/80 to-secondary-600/80 backdrop-blur-sm rounded-3xl p-8 max-w-4xl mx-auto text-white shadow-2xl border border-primary-500/30 autumn-glow",children:[c.jsx(wd,{className:"h-12 w-12 mx-auto mb-4 text-accent-400"}),c.jsx("h3",{className:"text-3xl font-bold mb-4",children:"🍂 Starte jetzt mit deiner Rezeptsammlung!"}),c.jsx("p",{className:"text-lg mb-6 opacity-90",children:'Klicke auf "📖 Rezepte" in der Navigation oben, um dein erstes Rezept hinzuzufügen.'})]})]}),gf=()=>{const[t,e]=B.useState([]),[n,r]=B.useState(!0),[s,i]=B.useState(null);return B.useEffect(()=>{const d=localStorage.getItem("foodflash_recipes"),m=localStorage.getItem("foodflash_migrated_to_firebase");if(d&&m==="true"){console.warn("🗑️ ULTRA-FIX: Migration ist abgeschlossen, lösche alte localStorage-Rezepte JETZT!"),localStorage.removeItem("foodflash_recipes"),console.warn("✅ localStorage gelöscht - ERZWINGE HARD RELOAD!"),setTimeout(()=>{window.location.reload()},500);return}const p=fr(Qe,"recipes"),g=dw(p,fw("createdAt","desc")),x=uf(g,k=>{const R=[];k.forEach(P=>{var y,S,D;const T=P.data();R.push({id:P.id,...T,ingredients:T.ingredients||[],comments:T.comments||[],createdAt:((D=(S=(y=T.createdAt)==null?void 0:y.toDate)==null?void 0:S.call(y))==null?void 0:D.toISOString())||new Date().toISOString()})}),e(R),r(!1),i(null)},k=>{console.error("Error fetching recipes:",k),i("Fehler beim Laden der Rezepte"),r(!1)});return()=>x()},[]),{recipes:t,isLoading:n,error:s,addRecipe:async d=>{try{const m=fr(Qe,"recipes"),p={...d,createdAt:$s(),ingredients:d.ingredients||[],comments:d.comments||[]};Object.keys(p).forEach(g=>{p[g]===void 0&&delete p[g]}),await Jl(m,p)}catch(m){throw console.error("Error adding recipe:",m),i("Fehler beim Hinzufügen des Rezepts"),m}},updateRecipe:async(d,m)=>{try{const p=Qt(Qe,"recipes",d),g={...m};Object.keys(g).forEach(x=>{g[x]===void 0&&delete g[x]}),await gw(p,g)}catch(p){console.error("Error updating recipe:",p);const g=p.message||"";throw g.includes("NOT_FOUND")||g.includes("No document")?(console.error("⚠️ Rezept existiert nicht in Firebase! ID:",d),console.error("🔧 Dieses Rezept wurde bereits migriert und sollte nicht mehr angezeigt werden."),i("Dieses Rezept existiert nicht in Firebase"),alert(`⚠️ Dieses Rezept hat eine veraltete ID.

Bitte kontaktiere den Support oder starte die App neu.`)):i("Fehler beim Aktualisieren des Rezepts"),p}},deleteRecipe:async d=>{try{const m=Qt(Qe,"recipes",d);await Fr(m)}catch(m){throw console.error("Error deleting recipe:",m),i("Fehler beim Löschen des Rezepts"),m}}}},Ow=t=>{if(!t||t.trim()==="")return"own";const e=t.toLowerCase();return e.includes("youtube.com")||e.includes("youtu.be")?"youtube":e.includes("instagram.com")?"instagram":e.includes("facebook.com")||e.includes("fb.com")?"facebook":e.includes("tiktok.com")?"tiktok":"other"},Fw=t=>{if(!t)return null;try{const e=t.toLowerCase();let n=null;if(e.includes("youtube.com/watch"))n=new URL(t).searchParams.get("v");else if(e.includes("youtu.be/")){const r=t.match(/youtu\.be\/([^?&]+)/);n=r?r[1]:null}else if(e.includes("youtube.com/embed/")){const r=t.match(/youtube\.com\/embed\/([^?&]+)/);n=r?r[1]:null}return n?`https://img.youtube.com/vi/${n}/maxresdefault.jpg`:null}catch(e){return console.error("Error extracting YouTube thumbnail:",e),null}},Uw=t=>{if(!t)return!1;const e=t.toLowerCase();return e.includes("youtube.com")||e.includes("youtu.be")},yl=t=>{if(!t||!t.includes("drive.google.com"))return t;try{let e=null;const r=t.split("?")[0].match(/\/file\/d\/([^/]+)/);if(r&&(e=r[1]),!e){const s=t.match(/[?&]id=([^&]+)/);s&&(e=s[1])}if(!e){const s=t.match(/[?&]id=([^&]+)/);s&&(e=s[1])}return e?`https://drive.google.com/thumbnail?id=${e}&sz=w1000`:(t.includes("uc?export=view")||t.includes("thumbnail?id="),t)}catch(e){return console.error("Error converting Google Drive URL:",e),t}},vl=t=>!!(t&&t.includes("drive.google.com")),TA=(t,e=800,n=600,r=.85)=>new Promise((s,i)=>{const o=new FileReader;o.onload=l=>{var d;const u=new Image;u.onload=()=>{const m=document.createElement("canvas"),p=m.getContext("2d");if(!p){i(new Error("Canvas context nicht verfügbar"));return}let{width:g,height:x}=u;g>e&&(x=x*e/g,g=e),x>n&&(g=g*n/x,x=n),m.width=g,m.height=x,p.drawImage(u,0,0,g,x),m.toBlob(k=>{k?s(k):i(new Error("Fehler beim Komprimieren"))},"image/jpeg",r)},u.onerror=()=>{i(new Error("Fehler beim Laden des Bildes"))},u.src=(d=l.target)==null?void 0:d.result},o.onerror=()=>{i(new Error("Fehler beim Lesen der Datei"))},o.readAsDataURL(t)}),zw=(t,e=10)=>{if(!["image/jpeg","image/jpg","image/png","image/webp"].includes(t.type))return"Nur JPEG, PNG und WebP Bilder sind erlaubt!";const r=e*1024*1024;return t.size>r?`Datei zu groß! Maximum: ${e} MB`:!0},Bw=async(t,e)=>{try{const n=await TA(t),r=Date.now(),i=`recipe-${e}-${r}.jpg`,o=Dw(Vw,`recipe-images/${i}`);return await dA(o,n),await fA(o)}catch(n){throw console.error("Fehler beim Upload:",n),new Error("Bild konnte nicht hochgeladen werden")}},Bg=async t=>{try{const e=t.split("/o/");if(e.length<2){console.warn("Ungültige Storage-URL, kann nicht gelöscht werden");return}const n=e[1].split("?")[0],r=decodeURIComponent(n),s=Dw(Vw,r);await mA(s)}catch(e){console.error("Fehler beim Löschen:",e)}},$g=t=>t.includes("firebasestorage.googleapis.com")||t.includes("firebasestorage.app"),$w=({ingredients:t,onChange:e})=>{const[n,r]=B.useState(""),[s,i]=B.useState(""),o=p=>{r(p.target.value)},l=p=>{i(p.target.value)},u=()=>{if(!n.trim())return;const p={name:n.trim(),quantity:s.trim()||void 0};e([...t,p]),r(""),i("")},d=p=>{e(t.filter((g,x)=>x!==p))},m=p=>{p.key==="Enter"&&(p.preventDefault(),u())};return c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-200 mb-2",children:"Zutaten (optional)"}),t.length>0&&c.jsx("div",{className:"space-y-1 mb-3 max-h-32 overflow-y-auto",children:t.map((p,g)=>c.jsxs("div",{className:"flex items-center gap-2 bg-slate-700 rounded-lg px-3 py-2 group",children:[c.jsxs("span",{className:"flex-1 text-sm text-gray-100",children:[p.name,p.quantity&&c.jsxs("span",{className:"text-gray-400 ml-2",children:["(",p.quantity,")"]})]}),c.jsx("button",{type:"button",onClick:()=>d(g),"data-test-id":`remove-ingredient-${g}`,"aria-label":"Zutat entfernen",className:"opacity-0 group-hover:opacity-100 transition-opacity text-red-500 hover:text-red-600",children:c.jsx(hn,{className:"h-4 w-4"})})]},g))}),c.jsxs("div",{className:"space-y-2 w-full",children:[c.jsx("input",{type:"text",value:n,onChange:o,onKeyPress:m,placeholder:"Zutat, z.B. Tomaten",className:"w-full px-3 py-2 text-sm border-2 border-gray-600 rounded-lg focus:border-primary-500 focus:outline-none transition-colors bg-slate-700 text-gray-100 placeholder-gray-400"}),c.jsx("input",{type:"text",value:s,onChange:l,onKeyPress:m,placeholder:"Menge (optional)",className:"w-full px-3 py-2 text-sm border-2 border-gray-600 rounded-lg focus:border-primary-500 focus:outline-none transition-colors bg-slate-700 text-gray-100 placeholder-gray-400"}),c.jsxs("button",{type:"button",onClick:u,"data-test-id":"add-ingredient","aria-label":"Zutat hinzufügen",disabled:!n.trim(),className:pe("w-full flex items-center justify-center gap-2 px-4 py-3 rounded-lg transition-all duration-200 font-medium text-sm",n.trim()?"bg-accent-500 text-white hover:bg-accent-600 hover:shadow-lg active:scale-95":"bg-slate-600 text-gray-500 cursor-not-allowed"),children:[c.jsx(uo,{className:"h-5 w-5"}),c.jsx("span",{children:"Zutat hinzufügen"})]})]}),c.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Enter drücken oder Plus-Button zum Hinzufügen"})]})},bA=({onAdd:t})=>{const[e,n]=B.useState(!1),[r,s]=B.useState(""),[i,o]=B.useState(""),[l,u]=B.useState(""),[d,m]=B.useState(""),[p,g]=B.useState([]),[x,k]=B.useState(!1),[R,P]=B.useState(null),[T,y]=B.useState(null),[S,D]=B.useState(!1),M=async q=>{if(q.preventDefault(),!r.trim()){alert("Bitte Titel eingeben!");return}D(!0);try{const K=Ow(i);let J;if(R){const G=crypto.randomUUID();J=await Bw(R,G)}t({title:r.trim(),url:i.trim()||"",description:l.trim(),imageUrl:d.trim()||void 0,uploadedImageUrl:J,ingredients:p,platform:K}),s(""),o(""),u(""),m(""),g([]),P(null),y(null),n(!1)}catch(K){console.error("Fehler beim Speichern:",K),alert("Fehler beim Hochladen des Bildes!")}finally{D(!1)}},O=q=>{s(q.target.value)},E=q=>{o(q.target.value)},_=q=>{u(q.target.value)},b=q=>{const K=q.target.value;m(K)};B.useEffect(()=>{if(d&&vl(d)){const q=yl(d);q!==d&&m(q)}},[d]);const I=()=>{const q=Fw(i);q&&m(q)},A=()=>{n(!e)},N=()=>{k(!x)},w=q=>{var se;const K=(se=q.target.files)==null?void 0:se[0];if(!K)return;const J=zw(K);if(J!==!0){alert(J);return}P(K);const G=new FileReader;G.onloadend=()=>{y(G.result)},G.readAsDataURL(K)},Z=()=>{P(null),y(null)},ge=Uw(i),Ue=i.toLowerCase(),ne=Ue.includes("instagram.com"),U=Ue.includes("facebook.com")||Ue.includes("fb.com"),Q=Ue.includes("tiktok.com");return e?c.jsxs("div",{className:"bg-slate-800/80 backdrop-blur-sm rounded-2xl p-6 shadow-xl border-2 border-primary-500/30 autumn-glow",children:[c.jsxs("div",{className:"flex items-center justify-between mb-6",children:[c.jsxs("h3",{className:"text-2xl font-bold text-gray-100 flex items-center gap-2",children:[c.jsx(uo,{className:"h-6 w-6 text-primary-500"}),"Neues Rezept"]}),c.jsx("button",{onClick:A,"data-test-id":"close-add-recipe","aria-label":"Formular schließen",className:"p-2 hover:bg-slate-700 rounded-full transition-colors",children:c.jsx(hn,{className:"h-6 w-6 text-gray-300"})})]}),c.jsxs("form",{onSubmit:M,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"recipe-title",className:"block text-sm font-medium text-gray-200 mb-1",children:"Rezept-Titel *"}),c.jsx("input",{id:"recipe-title",type:"text",value:r,onChange:O,"data-test-id":"recipe-title-input","aria-label":"Rezept-Titel eingeben",placeholder:"z.B. Spaghetti Carbonara",className:"w-full px-4 py-2 border-2 border-gray-600 rounded-lg focus:border-primary-500 focus:outline-none transition-colors bg-slate-700 text-gray-100 placeholder-gray-400",required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"recipe-url",className:"block text-sm font-medium text-gray-200 mb-1",children:"Link zum Rezept (optional)"}),c.jsx("input",{id:"recipe-url",type:"url",value:i,onChange:E,"data-test-id":"recipe-url-input","aria-label":"Rezept-URL eingeben",placeholder:"https://www.youtube.com/watch?v=... (oder leer für eigenes Rezept)",className:"w-full px-4 py-2 border-2 border-gray-600 rounded-lg focus:border-primary-500 focus:outline-none transition-colors bg-slate-700 text-gray-100 placeholder-gray-400"}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"YouTube, Instagram, Facebook, TikTok Link - oder leer lassen für eigene Rezepte"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"recipe-description",className:"block text-sm font-medium text-gray-200 mb-1",children:"Beschreibung (optional)"}),c.jsx("textarea",{id:"recipe-description",value:l,onChange:_,"data-test-id":"recipe-description-input","aria-label":"Rezept-Beschreibung eingeben",placeholder:"Was macht dieses Rezept besonders?",rows:3,className:"w-full px-4 py-2 border-2 border-gray-600 rounded-lg focus:border-primary-500 focus:outline-none transition-colors resize-none bg-slate-700 text-gray-100 placeholder-gray-400"})]}),c.jsx($w,{ingredients:p,onChange:g}),c.jsxs("div",{className:"border-2 border-dashed border-primary-500/30 rounded-xl p-4 bg-slate-700/30",children:[c.jsxs("div",{className:"flex items-center justify-between mb-3",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-200",children:"📸 Eigenes Foto hochladen (optional)"}),c.jsx("span",{className:"text-xs text-gray-400",children:"Max. 10 MB"})]}),T?c.jsxs("div",{className:"relative",children:[c.jsx("img",{src:T,alt:"Vorschau",className:"w-full h-48 object-cover rounded-lg"}),c.jsx("button",{type:"button",onClick:Z,"data-test-id":"remove-uploaded-image","aria-label":"Hochgeladenes Bild entfernen",className:"absolute top-2 right-2 p-2 bg-red-600 hover:bg-red-700 text-white rounded-full shadow-lg transition-colors",children:c.jsx(Vs,{className:"h-4 w-4"})}),c.jsx("div",{className:"absolute bottom-2 left-2 bg-green-600 text-white text-xs px-2 py-1 rounded-full font-medium",children:"✓ Bereit zum Upload"})]}):c.jsxs("div",{children:[c.jsx("input",{id:"recipe-image-upload",type:"file",accept:"image/jpeg,image/jpg,image/png,image/webp",onChange:w,"data-test-id":"recipe-image-upload","aria-label":"Bild hochladen",className:"hidden"}),c.jsxs("label",{htmlFor:"recipe-image-upload",className:"flex flex-col items-center justify-center p-6 border-2 border-dashed border-gray-600 rounded-lg cursor-pointer hover:border-primary-500 hover:bg-slate-600/30 transition-all",children:[c.jsx(xd,{className:"h-8 w-8 text-gray-400 mb-2"}),c.jsx("span",{className:"text-sm font-medium text-gray-300 mb-1",children:"Klicke hier oder ziehe ein Bild rein"}),c.jsx("span",{className:"text-xs text-gray-500",children:"JPEG, PNG oder WebP • Wird automatisch komprimiert"})]})]}),c.jsxs("p",{className:"text-xs text-gray-400 mt-2 text-center",children:["💡 ",c.jsx("strong",{children:"Hybrid-Lösung:"})," Du kannst sowohl ein eigenes Foto hochladen als auch eine YouTube-URL unten angeben!"]})]}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center justify-between mb-1",children:[c.jsx("label",{htmlFor:"recipe-image",className:"block text-sm font-medium text-gray-200",children:"Bild-URL (optional)"}),c.jsxs("div",{className:"flex items-center gap-2",children:[ge&&c.jsxs("button",{type:"button",onClick:I,"data-test-id":"auto-fill-image","aria-label":"Bild automatisch aus YouTube laden",className:"flex items-center gap-1 text-xs font-medium text-primary-500 hover:text-primary-600 transition-colors",children:[c.jsx(wd,{className:"h-3 w-3"}),"Auto-Fill"]}),(ne||U||Q)&&c.jsxs("button",{type:"button",onClick:N,"data-test-id":"thumbnail-help","aria-label":"Hilfe zum Thumbnail finden",className:"flex items-center gap-1 text-xs font-medium text-secondary-500 hover:text-secondary-600 transition-colors",children:[c.jsx(lv,{className:"h-3 w-3"}),"Hilfe"]})]})]}),c.jsx("input",{id:"recipe-image",type:"url",value:d,onChange:b,"data-test-id":"recipe-image-input","aria-label":"Bild-URL eingeben",placeholder:ge?"Klicke 'Auto-Fill' für YouTube-Thumbnail":"Google Drive oder imgbb.com Link",className:"w-full px-4 py-2 border-2 border-gray-600 rounded-lg focus:border-primary-500 focus:outline-none transition-colors bg-slate-700 text-gray-100 placeholder-gray-400"}),ge&&c.jsx("p",{className:"text-xs text-primary-600 mt-1",children:'💡 YouTube-Thumbnail verfügbar - klicke "Auto-Fill"'}),d&&vl(d)&&c.jsx("p",{className:"text-xs text-green-600 mt-1",children:"✅ Google Drive Link erkannt - wird automatisch konvertiert"}),d&&c.jsxs("div",{className:"mt-3",children:[c.jsx("p",{className:"text-xs font-medium text-gray-200 mb-1",children:"Vorschau:"}),c.jsx("div",{className:"relative w-full h-40 bg-slate-700 rounded-lg overflow-hidden border-2 border-gray-600",children:c.jsx("img",{src:yl(d),alt:"Vorschau",className:"w-full h-full object-cover",onError:q=>{const K=q.target;K.style.display="none";const J=K.parentElement;J&&(J.innerHTML='<div class="flex items-center justify-center h-full text-red-500 text-sm p-4 text-center"><div><p class="font-bold">❌ Bild kann nicht geladen werden</p><p class="text-xs mt-1">Prüfe Google Drive Freigabe:<br/>"Jeder mit dem Link"</p></div></div>')},onLoad:q=>{const J=q.target.parentElement;if(J){const G=document.createElement("div");G.className="absolute top-2 right-2 bg-green-500 text-white text-xs px-2 py-1 rounded-full font-medium",G.textContent="✓ OK",J.appendChild(G)}}})})]}),x&&(ne||U||Q)&&c.jsxs("div",{className:"mt-3 p-4 bg-blue-50 border-2 border-blue-200 rounded-lg",children:[c.jsxs("div",{className:"flex items-start justify-between mb-2",children:[c.jsxs("h4",{className:"font-bold text-blue-800 text-sm",children:[ne&&"📷 Instagram Thumbnail finden",U&&"📘 Facebook Thumbnail finden",Q&&"🎵 TikTok Thumbnail finden"]}),c.jsx("button",{type:"button",onClick:N,className:"text-blue-600 hover:text-blue-800",children:c.jsx(hn,{className:"h-4 w-4"})})]}),ne&&c.jsxs("ol",{className:"text-xs text-blue-700 space-y-1 list-decimal list-inside",children:[c.jsx("li",{children:"Öffne den Instagram-Post im Browser"}),c.jsx("li",{children:'Rechtsklick auf das Bild/Video → "Bild-URL kopieren" oder "Grafik-Adresse kopieren"'}),c.jsx("li",{children:"Füge die URL hier ein"}),c.jsxs("li",{children:[c.jsx("strong",{children:"Alternative:"})," Screenshot vom Post machen"]})]}),U&&c.jsxs("ol",{className:"text-xs text-blue-700 space-y-1 list-decimal list-inside",children:[c.jsx("li",{children:"Öffne das Facebook-Video im Browser"}),c.jsx("li",{children:'Rechtsklick auf das Video-Thumbnail → "Grafikadresse kopieren"'}),c.jsx("li",{children:"Füge die URL hier ein"}),c.jsxs("li",{children:[c.jsx("strong",{children:"Alternative:"})," Screenshot machen"]})]}),Q&&c.jsxs("ol",{className:"text-xs text-blue-700 space-y-1 list-decimal list-inside",children:[c.jsx("li",{children:"Öffne das TikTok-Video im Browser"}),c.jsx("li",{children:"Pause das Video bei einem guten Frame"}),c.jsx("li",{children:"Screenshot vom Video machen"})]}),c.jsxs("div",{className:"mt-3 pt-3 border-t border-blue-300",children:[c.jsx("p",{className:"text-xs font-bold text-blue-800 mb-2",children:"📁 Mit Google Drive (empfohlen):"}),c.jsxs("ol",{className:"text-xs text-blue-700 space-y-1 list-decimal list-inside",children:[c.jsx("li",{children:"Screenshot/Bild in Google Drive hochladen"}),c.jsx("li",{children:'Rechtsklick auf Datei → "Link teilen"'}),c.jsx("li",{children:'Auf "Eingeschränkt" klicken → "Jeder mit dem Link" wählen'}),c.jsxs("li",{children:["Link kopieren (sieht aus wie: ",c.jsx("code",{className:"bg-blue-100 px-1",children:"drive.google.com/file/d/XXXX/view"}),")"]}),c.jsxs("li",{children:["Ändere das Format zu: ",c.jsx("code",{className:"bg-blue-100 px-1 block mt-1",children:"drive.google.com/uc?export=view&id=XXXX"})]}),c.jsx("li",{children:"Füge diesen Link hier ein"})]})]}),c.jsxs("div",{className:"mt-2 pt-2 border-t border-blue-300",children:[c.jsx("p",{className:"text-xs font-bold text-blue-800 mb-1",children:"🌐 Alternative: imgbb.com"}),c.jsx("p",{className:"text-xs text-blue-700",children:"Kostenlos, kein Account nötig - einfach hochladen & Link kopieren"})]})]})]}),c.jsx("button",{type:"submit",disabled:S,"data-test-id":"submit-recipe","aria-label":"Rezept speichern",className:pe("w-full py-3 rounded-lg font-bold text-white transition-all duration-200",S?"bg-gray-600 cursor-not-allowed":"bg-gradient-to-r from-primary-500 to-secondary-500 hover:shadow-lg hover:scale-105"),children:S?"⏳ Bild wird hochgeladen...":"Rezept speichern ⚡"})]})]}):c.jsxs("button",{onClick:A,"data-test-id":"open-add-recipe","aria-label":"Neues Rezept hinzufügen",className:"w-full bg-gradient-to-r from-primary-500 to-secondary-500 text-white rounded-2xl p-6 shadow-lg hover:shadow-xl transition-all duration-200 hover:scale-105 flex items-center justify-center gap-3 font-bold text-lg",children:[c.jsx(uo,{className:"h-6 w-6"}),"Neues Rezept hinzufügen"]})},SA=({rating:t,onRatingChange:e,readonly:n=!1,size:r="md"})=>{const s={sm:"h-4 w-4",md:"h-5 w-5",lg:"h-6 w-6"},i=o=>{!n&&e&&e(o)};return c.jsx("div",{className:"flex items-center gap-1",children:[1,2,3,4,5].map(o=>{const l=o<=t;return c.jsx("button",{onClick:()=>i(o),"data-test-id":`star-${o}`,"aria-label":`${o} ${o===1?"Stern":"Sterne"} bewerten`,disabled:n,className:pe("transition-all duration-200",!n&&"hover:scale-110 cursor-pointer",n&&"cursor-default"),children:c.jsx(m2,{className:pe(s[r],l?"fill-yellow-400 text-yellow-400":"text-gray-300")})},o)})})},kA=({recipe:t,onSave:e,onClose:n})=>{const[r,s]=B.useState(t.title),[i,o]=B.useState(t.url),[l,u]=B.useState(t.description),[d,m]=B.useState(t.imageUrl||""),[p,g]=B.useState(t.ingredients||[]),[x,k]=B.useState(!1),[R,P]=B.useState(null),[T,y]=B.useState(t.uploadedImageUrl||null),[S,D]=B.useState(!1),[M,O]=B.useState(!1),E=async K=>{if(K.preventDefault(),!r.trim()){alert("Bitte Titel eingeben!");return}D(!0);try{const J=Ow(i);let G=T;R&&(G=await Bw(R,t.id),t.uploadedImageUrl&&$g(t.uploadedImageUrl)&&await Bg(t.uploadedImageUrl)),M&&t.uploadedImageUrl&&$g(t.uploadedImageUrl)&&(await Bg(t.uploadedImageUrl),G=null),e(t.id,{title:r.trim(),url:i.trim()||"",description:l.trim(),imageUrl:d.trim()||void 0,uploadedImageUrl:G||void 0,ingredients:p,platform:J}),n()}catch(J){console.error("Fehler beim Speichern:",J),alert("Fehler beim Hochladen des Bildes!")}finally{D(!1)}},_=K=>{s(K.target.value)},b=K=>{o(K.target.value)},I=K=>{u(K.target.value)},A=K=>{m(K.target.value)},N=()=>{const K=Fw(i);K&&m(K)},w=()=>{k(!x)},Z=K=>{var ze;const J=(ze=K.target.files)==null?void 0:ze[0];if(!J)return;const G=zw(J);if(G!==!0){alert(G);return}P(J);const se=new FileReader;se.onloadend=()=>{y(se.result)},se.readAsDataURL(J),O(!1)},ge=()=>{P(null),y(null),O(!0)};B.useEffect(()=>{if(d&&vl(d)){const K=yl(d);K!==d&&m(K)}},[d]);const Ue=Uw(i),ne=i.toLowerCase(),U=ne.includes("instagram.com"),Q=ne.includes("facebook.com")||ne.includes("fb.com"),q=ne.includes("tiktok.com");return c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:c.jsxs("div",{className:"bg-slate-800/80 rounded-2xl p-6 max-w-2xl w-full shadow-2xl max-h-[90vh] overflow-y-auto",children:[c.jsxs("div",{className:"flex items-center justify-between mb-6",children:[c.jsx("h3",{className:"text-2xl font-bold text-gray-100",children:"Rezept bearbeiten"}),c.jsx("button",{onClick:n,"data-test-id":"close-edit-modal","aria-label":"Bearbeiten abbrechen",className:"p-2 hover:bg-slate-700 rounded-full transition-colors",children:c.jsx(hn,{className:"h-6 w-6 text-gray-300"})})]}),c.jsxs("form",{onSubmit:E,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"edit-title",className:"block text-sm font-medium text-gray-200 mb-1",children:"Rezept-Titel *"}),c.jsx("input",{id:"edit-title",type:"text",value:r,onChange:_,placeholder:"z.B. Spaghetti Carbonara",className:"w-full px-4 py-2 border-2 border-gray-600 rounded-lg focus:border-primary-500 focus:outline-none transition-colors bg-slate-700 text-gray-100 placeholder-gray-400",required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"edit-url",className:"block text-sm font-medium text-gray-200 mb-1",children:"Link zum Rezept (optional)"}),c.jsx("input",{id:"edit-url",type:"url",value:i,onChange:b,placeholder:"https://www.youtube.com/watch?v=... (oder leer für eigenes Rezept)",className:"w-full px-4 py-2 border-2 border-gray-600 rounded-lg focus:border-primary-500 focus:outline-none transition-colors bg-slate-700 text-gray-100 placeholder-gray-400"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"edit-description",className:"block text-sm font-medium text-gray-200 mb-1",children:"Beschreibung (optional)"}),c.jsx("textarea",{id:"edit-description",value:l,onChange:I,placeholder:"Was macht dieses Rezept besonders?",rows:3,className:"w-full px-4 py-2 border-2 border-gray-600 rounded-lg focus:border-primary-500 focus:outline-none transition-colors resize-none bg-slate-700 text-gray-100 placeholder-gray-400"})]}),c.jsx($w,{ingredients:p,onChange:g}),c.jsxs("div",{className:"border-2 border-dashed border-primary-500/30 rounded-xl p-4 bg-slate-700/30",children:[c.jsxs("div",{className:"flex items-center justify-between mb-3",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-200",children:"📸 Eigenes Foto hochladen (optional)"}),c.jsx("span",{className:"text-xs text-gray-400",children:"Max. 10 MB"})]}),T?c.jsxs("div",{className:"relative",children:[c.jsx("img",{src:T,alt:"Vorschau",className:"w-full h-48 object-cover rounded-lg"}),c.jsx("button",{type:"button",onClick:ge,className:"absolute top-2 right-2 p-2 bg-red-600 hover:bg-red-700 text-white rounded-full shadow-lg transition-colors",children:c.jsx(Vs,{className:"h-4 w-4"})}),c.jsx("div",{className:"absolute bottom-2 left-2 bg-green-600 text-white text-xs px-2 py-1 rounded-full font-medium",children:R?"✓ Bereit zum Upload":"✓ Aktuelles Foto"})]}):c.jsxs("div",{children:[c.jsx("input",{id:"edit-image-upload",type:"file",accept:"image/jpeg,image/jpg,image/png,image/webp",onChange:Z,className:"hidden"}),c.jsxs("label",{htmlFor:"edit-image-upload",className:"flex flex-col items-center justify-center p-6 border-2 border-dashed border-gray-600 rounded-lg cursor-pointer hover:border-primary-500 hover:bg-slate-600/30 transition-all",children:[c.jsx(xd,{className:"h-8 w-8 text-gray-400 mb-2"}),c.jsx("span",{className:"text-sm font-medium text-gray-300 mb-1",children:"Klicke hier oder ziehe ein Bild rein"}),c.jsx("span",{className:"text-xs text-gray-500",children:"JPEG, PNG oder WebP • Wird automatisch komprimiert"})]})]}),c.jsxs("p",{className:"text-xs text-gray-400 mt-2 text-center",children:["💡 ",c.jsx("strong",{children:"Hybrid-Lösung:"})," Du kannst sowohl ein eigenes Foto hochladen als auch eine YouTube-URL unten angeben!"]})]}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center justify-between mb-1",children:[c.jsx("label",{htmlFor:"edit-image",className:"block text-sm font-medium text-gray-200",children:"Bild-URL (optional)"}),c.jsxs("div",{className:"flex items-center gap-2",children:[Ue&&c.jsxs("button",{type:"button",onClick:N,className:"flex items-center gap-1 text-xs font-medium text-primary-500 hover:text-primary-600 transition-colors",children:[c.jsx(wd,{className:"h-3 w-3"}),"Auto-Fill"]}),(U||Q||q)&&c.jsxs("button",{type:"button",onClick:w,className:"flex items-center gap-1 text-xs font-medium text-secondary-500 hover:text-secondary-600 transition-colors",children:[c.jsx(lv,{className:"h-3 w-3"}),"Hilfe"]})]})]}),c.jsx("input",{id:"edit-image",type:"url",value:d,onChange:A,placeholder:"Google Drive oder imgbb.com Link",className:"w-full px-4 py-2 border-2 border-gray-600 rounded-lg focus:border-primary-500 focus:outline-none transition-colors bg-slate-700 text-gray-100 placeholder-gray-400"}),d&&vl(d)&&c.jsx("p",{className:"text-xs text-green-400 mt-1",children:"✅ Google Drive Link erkannt - wird automatisch konvertiert"}),d&&c.jsxs("div",{className:"mt-3",children:[c.jsx("p",{className:"text-xs font-medium text-gray-200 mb-1",children:"Vorschau:"}),c.jsx("div",{className:"relative w-full h-40 bg-slate-700 rounded-lg overflow-hidden border-2 border-gray-600",children:c.jsx("img",{src:yl(d),alt:"Vorschau",className:"w-full h-full object-cover",onError:K=>{const J=K.target;J.style.display="none";const G=J.parentElement;G&&(G.innerHTML='<div class="flex items-center justify-center h-full text-red-500 text-sm p-4 text-center"><div><p class="font-bold">❌ Bild kann nicht geladen werden</p><p class="text-xs mt-1">Prüfe Google Drive Freigabe:<br/>"Jeder mit dem Link"</p></div></div>')},onLoad:K=>{const G=K.target.parentElement;if(G){const se=document.createElement("div");se.className="absolute top-2 right-2 bg-green-500 text-white text-xs px-2 py-1 rounded-full font-medium",se.textContent="✓ OK",G.appendChild(se)}}})})]}),x&&(U||Q||q)&&c.jsxs("div",{className:"mt-3 p-3 bg-slate-700 border border-primary-500/30 rounded-lg text-xs text-gray-200",children:[c.jsx("p",{className:"font-bold mb-1",children:"💡 Tipp:"}),c.jsxs("p",{children:["Screenshot machen und auf ",c.jsx("a",{href:"https://imgbb.com",target:"_blank",rel:"noopener noreferrer",className:"underline",children:"imgbb.com"})," oder Google Drive hochladen"]})]})]}),c.jsxs("div",{className:"flex gap-3 pt-2",children:[c.jsx("button",{type:"button",onClick:n,disabled:S,className:"flex-1 py-3 rounded-lg font-medium bg-slate-700 text-gray-100 hover:bg-slate-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Abbrechen"}),c.jsx("button",{type:"submit",disabled:S,className:`flex-1 py-3 rounded-lg font-bold text-white transition-all duration-200 flex items-center justify-center gap-2 ${S?"bg-gray-600 cursor-not-allowed":"bg-gradient-to-r from-primary-500 to-secondary-500 hover:shadow-lg hover:scale-105"}`,children:S?c.jsx(c.Fragment,{children:"⏳ Wird hochgeladen..."}):c.jsxs(c.Fragment,{children:[c.jsx(dv,{className:"h-5 w-5"}),"Speichern"]})})]})]})]})})},Hw=t=>{const[e,n]=B.useState([]),[r,s]=B.useState(!0),[i,o]=B.useState(null);return B.useEffect(()=>{if(!t){s(!1);return}const g=`households/${t}/shoppingList`,x=fr(Qe,g),k=dw(x,fw("addedAt","desc")),R=uf(k,P=>{const T=[];P.forEach(y=>{var D,M,O;const S=y.data();T.push({id:y.id,...S,addedAt:((O=(M=(D=S.addedAt)==null?void 0:D.toDate)==null?void 0:M.call(D))==null?void 0:O.toISOString())||new Date().toISOString()})}),n(T),s(!1),o(null)},P=>{console.error("Error fetching shopping list:",P),o("Fehler beim Laden der Einkaufsliste"),s(!1)});return()=>R()},[t]),{items:e,isLoading:r,error:i,addItem:async(g,x,k)=>{if(t)try{const R=`households/${t}/shoppingList`,P=fr(Qe,R);await Jl(P,{name:g,quantity:k||"",category:x,checked:!1,addedAt:$s()})}catch(R){throw console.error("Error adding item:",R),o("Fehler beim Hinzufügen des Artikels"),R}},toggleItem:async g=>{if(t)try{const x=e.find(P=>P.id===g);if(!x)return;const k=`households/${t}/shoppingList`,R=Qt(Qe,k,g);await gw(R,{checked:!x.checked})}catch(x){throw console.error("Error toggling item:",x),o("Fehler beim Aktualisieren des Artikels"),x}},removeItem:async g=>{if(t)try{const x=`households/${t}/shoppingList`,k=Qt(Qe,x,g);await Fr(k)}catch(x){throw console.error("Error removing item:",x),o("Fehler beim Löschen des Artikels"),x}},clearAllItems:async()=>{if(t)try{const g=`households/${t}/shoppingList`,x=e.map(k=>Fr(Qt(Qe,g,k.id)));await Promise.all(x)}catch(g){throw console.error("Error clearing shopping list:",g),o("Fehler beim Leeren der Einkaufsliste"),g}},clearCheckedItems:async()=>{if(t)try{const g=`households/${t}/shoppingList`,k=e.filter(R=>R.checked).map(R=>Fr(Qt(Qe,g,R.id)));await Promise.all(k)}catch(g){throw console.error("Error clearing checked items:",g),o("Fehler beim Löschen der erledigten Artikel"),g}}}},IA={produce:["tomate","gurke","salat","paprika","zwiebel","knoblauch","karotte","kartoffel","apfel","banane","zitrone","orange","beere","spinat","brokkoli","pilz","champignon"],bakery:["brot","brötchen","baguette","toast","croissant","mehl","hefe"],meat:["hähnchen","huhn","rind","schwein","hack","steak","filet","schnitzel","bratwurst"],deli:["schinken","salami","mortadella","aufschnitt","wurst"],dairy:["milch","butter","käse","joghurt","sahne","schmand","quark","frischkäse","mozzarella","parmesan","ei","eier"],beverages:["wasser","saft","cola","limo","bier","wein","kaffee","tee","milch"],pantry:["reis","nudel","pasta","dose","konserve","öl","essig","gewürz","salz","pfeffer","zucker","honig","marmelade","ketchup","senf","mayonnaise","soße"],snacks:["schokolade","keks","chips","süßigkeit","gummibär","bonbon"],frozen:["tiefkühl","tk-","eis","eiscreme","gefrier"],household:["spülmittel","schwamm","putzmittel","klopapier","küchenpapier","müllbeutel","alufolie","frischhaltefolie"]},AA=t=>{const e=t.toLowerCase();for(const[n,r]of Object.entries(IA))if(r.some(s=>e.includes(s)))return n;return"produce"},RA={youtube:{icon:Dr,color:"bg-red-600/20 text-red-400 border-red-500/30",label:"YouTube"},instagram:{icon:cv,color:"bg-pink-600/20 text-pink-400 border-pink-500/30",label:"Instagram"},facebook:{icon:av,color:"bg-blue-600/20 text-blue-400 border-blue-500/30",label:"Facebook"},tiktok:{icon:hv,color:"bg-gray-600/20 text-gray-400 border-gray-500/30",label:"TikTok"},own:{icon:mv,color:"bg-secondary-600/20 text-secondary-400 border-secondary-500/30",label:"Eigenes Rezept"},other:{icon:a2,color:"bg-accent-600/20 text-accent-400 border-accent-500/30",label:"Andere"}},NA=({recipe:t,onDelete:e,onUpdate:n})=>{const r=RA[t.platform],s=r.icon,[i,o]=B.useState(!1),[l,u]=B.useState(t.notes||""),[d,m]=B.useState(!1),[p,g]=B.useState(""),[x,k]=B.useState(!1),[R,P]=B.useState(!1),{currentHousehold:T}=ko(),{addItem:y}=Hw(T==null?void 0:T.id),S=()=>{confirm(`Möchtest du "${t.title}" wirklich löschen?`)&&e(t.id)},D=()=>{t.url&&t.url.trim()!==""&&window.open(t.url,"_blank","noopener,noreferrer")},M=ne=>{u(ne.target.value)},O=()=>{n(t.id,{notes:l}),o(!1)},E=()=>{i&&u(t.notes||""),o(!i)},_=ne=>{n(t.id,{rating:ne})},b=ne=>{g(ne.target.value)},I=ne=>{if(ne.preventDefault(),!p.trim())return;const U={id:crypto.randomUUID(),text:p.trim(),createdAt:new Date().toISOString()},Q=[...t.comments,U];n(t.id,{comments:Q}),g("")},A=()=>{m(!d)},N=()=>{k(!0)},w=()=>{k(!1)},Z=(ne,U)=>{n(ne,U),k(!1)},ge=()=>{if(t.ingredients.length===0){alert("Dieses Rezept hat keine Zutaten!");return}let ne=0;t.ingredients.forEach(U=>{const Q=AA(U.name);y(U.name,Q,U.quantity),ne++}),alert(`✅ ${ne} ${ne===1?"Zutat":"Zutaten"} zur Einkaufsliste hinzugefügt!`)},Ue=()=>{P(!R)};return c.jsxs(c.Fragment,{children:[x&&c.jsx(kA,{recipe:t,onSave:Z,onClose:w}),c.jsxs("div",{className:"bg-slate-800/80 backdrop-blur-sm rounded-2xl overflow-hidden shadow-xl hover:shadow-2xl transition-all duration-300 border-2 border-dark-600/50 hover:border-primary-500/30 hover:autumn-glow",children:[c.jsx("button",{onClick:Ue,className:"w-full",children:t.uploadedImageUrl||t.imageUrl?c.jsxs("div",{className:"h-40 sm:h-48 overflow-hidden bg-gradient-to-br from-primary-100 to-secondary-100 relative",children:[c.jsx("img",{src:t.uploadedImageUrl||t.imageUrl,alt:t.title,className:"w-full h-full object-cover",onError:ne=>{const U=ne.target;U.style.display="none"}}),c.jsx("div",{className:"absolute bottom-2 right-2 bg-black bg-opacity-50 text-white text-xs px-2 py-1 rounded-full",children:R?"▼ Weniger":"▶ Mehr"}),t.uploadedImageUrl&&c.jsx("div",{className:"absolute top-2 left-2 bg-green-600 text-white text-xs px-2 py-1 rounded-full font-medium flex items-center gap-1",children:"📸 Eigenes Foto"})]}):c.jsxs("div",{className:"h-40 sm:h-48 bg-gradient-to-br from-primary-100 via-secondary-100 to-accent-100 flex items-center justify-center relative",children:[c.jsx(s,{className:"h-16 w-16 text-white opacity-50"}),c.jsx("div",{className:"absolute bottom-2 right-2 bg-black bg-opacity-50 text-white text-xs px-2 py-1 rounded-full",children:R?"▼ Weniger":"▶ Mehr"})]})}),c.jsxs("div",{className:"p-5",children:[c.jsxs("div",{className:"flex items-center justify-between mb-3",children:[c.jsxs("div",{className:pe("inline-flex items-center gap-2 px-3 py-1 rounded-full text-sm font-medium border-2",r.color),children:[c.jsx(s,{className:"h-4 w-4"}),r.label]}),c.jsx("button",{onClick:N,"data-test-id":`edit-recipe-${t.id}`,"aria-label":`Rezept ${t.title} bearbeiten`,className:"p-2 hover:bg-slate-700/50 rounded-lg transition-colors text-gray-400 hover:text-primary-400",children:c.jsx(c2,{className:"h-4 w-4"})})]}),c.jsx("button",{onClick:Ue,className:"w-full text-left mb-3",children:c.jsx("h3",{className:"text-xl font-bold text-gray-100 line-clamp-2 hover:text-primary-400 transition-colors",children:t.title})}),R&&c.jsxs("div",{className:"space-y-4 animate-in fade-in slide-in-from-top-2 duration-200",children:[t.description&&c.jsx("p",{className:"text-gray-300 text-sm",children:t.description}),c.jsxs("p",{className:"text-xs text-gray-500",children:["Hinzugefügt: ",new Date(t.createdAt).toLocaleDateString("de-DE")]}),c.jsxs("div",{className:"mb-4 pb-4 border-b border-dark-600/50",children:[c.jsxs("div",{className:"flex items-center justify-between mb-2",children:[c.jsx("span",{className:"text-sm font-medium text-gray-200",children:"Bewertung"}),t.rating&&c.jsxs("span",{className:"text-xs text-gray-400",children:[t.rating,"/5"]})]}),c.jsx(SA,{rating:t.rating||0,onRatingChange:_,size:"lg"})]}),t.ingredients&&t.ingredients.length>0&&c.jsxs("div",{className:"pb-4 border-b border-dark-600/50",children:[c.jsxs("div",{className:"flex items-center justify-between mb-2",children:[c.jsxs("span",{className:"text-sm font-medium text-gray-200",children:["Zutaten (",t.ingredients.length,")"]}),c.jsxs("button",{onClick:ge,"data-test-id":`add-ingredients-to-list-${t.id}`,"aria-label":"Zutaten zur Einkaufsliste hinzufügen",className:"flex items-center gap-1 text-xs font-medium text-primary-500 hover:text-primary-600 transition-colors",children:[c.jsx(_d,{className:"h-3 w-3"}),"Zur Einkaufsliste"]})]}),c.jsx("div",{className:"space-y-1 max-h-32 overflow-y-auto",children:t.ingredients.map((ne,U)=>c.jsxs("div",{className:"text-sm text-gray-200 bg-slate-700/50 rounded px-2 py-1 flex justify-between",children:[c.jsx("span",{children:ne.name}),ne.quantity&&c.jsx("span",{className:"text-gray-400 text-xs",children:ne.quantity})]},U))})]}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center justify-between mb-2",children:[c.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium text-gray-200",children:[c.jsx(mv,{className:"h-4 w-4 text-accent-500"}),"Notizen"]}),c.jsx("button",{onClick:E,"data-test-id":`toggle-notes-${t.id}`,"aria-label":i?"Notizen-Bearbeitung abbrechen":"Notizen bearbeiten",className:"text-xs text-primary-500 hover:text-primary-600 font-medium transition-colors",children:i?"Abbrechen":"Bearbeiten"})]}),i?c.jsxs("div",{className:"space-y-2",children:[c.jsx("textarea",{value:l,onChange:M,"data-test-id":`notes-input-${t.id}`,"aria-label":"Notizen bearbeiten",placeholder:"Füge deine Notizen hinzu...",rows:3,className:"w-full px-3 py-2 text-sm border-2 border-gray-600 rounded-lg focus:border-accent-500 focus:outline-none transition-colors resize-none bg-slate-700 text-gray-100 placeholder-gray-400"}),c.jsxs("button",{onClick:O,"data-test-id":`save-notes-${t.id}`,"aria-label":"Notizen speichern",className:pe("w-full flex items-center justify-center gap-2 px-3 py-2 rounded-lg text-sm font-medium transition-all duration-200","bg-accent-500 text-white hover:bg-accent-600"),children:[c.jsx(dv,{className:"h-4 w-4"}),"Speichern"]})]}):c.jsx("div",{className:"text-sm text-gray-300 bg-slate-700/50 rounded-lg p-3 min-h-[60px]",children:t.notes||c.jsx("span",{className:"text-gray-500 italic",children:"Keine Notizen vorhanden"})})]}),c.jsxs("div",{className:"pb-4 border-b border-slate-600",children:[c.jsxs("button",{onClick:A,"data-test-id":`toggle-comments-${t.id}`,"aria-label":d?"Kommentare ausblenden":"Kommentare anzeigen",className:"flex items-center justify-between w-full text-sm font-medium text-gray-200 hover:text-gray-100 transition-colors",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(u2,{className:"h-4 w-4 text-secondary-500"}),"Kommentare",t.comments.length>0&&c.jsx("span",{className:"bg-secondary-100 text-secondary-700 text-xs px-2 py-0.5 rounded-full",children:t.comments.length})]}),c.jsx("span",{className:"text-xs text-primary-500",children:d?"Ausblenden":"Anzeigen"})]}),d&&c.jsxs("div",{className:"mt-3 space-y-3",children:[t.comments.length>0&&c.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:t.comments.map(ne=>c.jsxs("div",{className:"bg-slate-700/50 rounded-lg p-3 text-sm",children:[c.jsx("p",{className:"text-gray-200",children:ne.text}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:new Date(ne.createdAt).toLocaleDateString("de-DE",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})})]},ne.id))}),c.jsxs("form",{onSubmit:I,className:"flex gap-2",children:[c.jsx("input",{type:"text",value:p,onChange:b,"data-test-id":`comment-input-${t.id}`,"aria-label":"Kommentar hinzufügen",placeholder:"Kommentar hinzufügen...",className:"flex-1 px-3 py-2 text-sm border-2 border-gray-600 rounded-lg focus:border-secondary-500 focus:outline-none transition-colors bg-slate-700 text-gray-100 placeholder-gray-400"}),c.jsx("button",{type:"submit","data-test-id":`add-comment-${t.id}`,"aria-label":"Kommentar senden",disabled:!p.trim(),className:pe("px-3 py-2 rounded-lg transition-all duration-200",p.trim()?"bg-secondary-500 text-white hover:bg-secondary-600":"bg-slate-600/50 text-gray-500 cursor-not-allowed"),children:c.jsx(d2,{className:"h-4 w-4"})})]})]})]}),c.jsxs("div",{className:"flex gap-2",children:[t.url&&t.url.trim()!==""&&c.jsxs("button",{onClick:D,"data-test-id":`open-recipe-${t.id}`,"aria-label":`Rezept ${t.title} öffnen`,className:pe("flex-1 flex items-center justify-center gap-2 px-4 py-2 rounded-lg font-medium transition-all duration-200","bg-primary-500 text-white hover:bg-primary-600 hover:shadow-md"),children:[c.jsx(i2,{className:"h-4 w-4"}),"Öffnen"]}),c.jsx("button",{onClick:S,"data-test-id":`delete-recipe-${t.id}`,"aria-label":`Rezept ${t.title} löschen`,className:pe("px-4 py-2 rounded-lg font-medium transition-all duration-200","bg-red-100 text-red-600 hover:bg-red-200",!t.url||t.url.trim()===""?"flex-1":""),children:c.jsx(Vs,{className:"h-4 w-4"})})]}),c.jsx("button",{onClick:Ue,"data-test-id":`collapse-recipe-${t.id}`,"aria-label":"Details ausblenden",className:"w-full mt-4 py-2 text-sm font-medium text-gray-400 hover:text-primary-400 transition-colors border-t border-dark-600/50 pt-4",children:"▲ Weniger anzeigen"})]}),!R&&c.jsxs("div",{className:"flex items-center justify-between pt-3 border-t border-dark-600/50",children:[c.jsxs("div",{className:"flex items-center gap-3 text-xs text-gray-400",children:[t.rating&&c.jsxs("span",{className:"flex items-center gap-1",children:["⭐ ",t.rating,"/5"]}),t.ingredients.length>0&&c.jsxs("span",{children:["🥕 ",t.ingredients.length]}),t.comments.length>0&&c.jsxs("span",{children:["💬 ",t.comments.length]})]}),c.jsx("button",{onClick:Ue,className:"text-xs text-primary-500 hover:text-primary-600 font-medium",children:"Mehr anzeigen ▼"})]})]})]})]})},CA=({searchTerm:t,onSearchChange:e})=>{const n=s=>{e(s.target.value)},r=()=>{e("")};return c.jsxs("div",{className:"relative",children:[c.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:c.jsx(fv,{className:"h-5 w-5 text-gray-400"})}),c.jsx("input",{type:"text",value:t,onChange:n,"data-test-id":"search-recipes","aria-label":"Rezepte suchen",placeholder:"Suche nach Rezepten...",className:pe("w-full pl-12 pr-12 py-3 rounded-full border-2 border-gray-600","focus:border-primary-500 focus:outline-none transition-colors","bg-slate-800/80 shadow-sm text-gray-100 placeholder-gray-400")}),t&&c.jsx("button",{onClick:r,"data-test-id":"clear-search","aria-label":"Suche löschen",className:"absolute inset-y-0 right-0 pr-4 flex items-center hover:text-gray-200 text-gray-400 transition-colors",children:c.jsx(hn,{className:"h-5 w-5"})})]})},PA=async t=>{try{const e=qw(t);if(!e)throw new Error("Ungültige Gist-URL");const n=`https://api.github.com/gists/${e}`,r=await fetch(n);if(!r.ok)throw new Error("Gist konnte nicht geladen werden");const s=await r.json(),i=Object.values(s.files);if(!i.length)throw new Error("Gist enthält keine Dateien");const o=i[0].content,l=JSON.parse(o);if(!l.recipes||!Array.isArray(l.recipes))throw new Error("Ungültiges Datenformat");return l}catch(e){throw new Error("Fehler beim Laden vom Gist: "+e.message)}},qw=t=>{const e=[/gist\.github\.com\/[^\/]+\/([a-f0-9]+)/i,/gist\.github\.com\/([a-f0-9]+)/i,/^([a-f0-9]{32})$/i];for(const n of e){const r=t.match(n);if(r)return r[1]}return null},DA=t=>qw(t)!==null,jA=!1,VA="AIzaSyCEonhSF4OlyLDSx0yG5nz0iWUAZQMcpcU",LA=async t=>{const e=`${t} rezept`,n=`https://www.googleapis.com/youtube/v3/search?part=snippet&q=${encodeURIComponent(e)}&type=video&maxResults=12&key=${VA}`;try{const r=await fetch(n);if(!r.ok)throw r.status===403?new Error("API-Key ungültig oder Quota überschritten"):new Error("YouTube API Fehler: "+r.statusText);return(await r.json()).items.map(i=>({id:i.id.videoId,title:i.snippet.title,thumbnail:i.snippet.thumbnails.medium.url,channelTitle:i.snippet.channelTitle,description:i.snippet.description,url:`https://www.youtube.com/watch?v=${i.id.videoId}`}))}catch(r){throw console.error("YouTube API Error:",r),r}},MA=({onSelect:t,onClose:e})=>{const[n,r]=B.useState(""),[s,i]=B.useState([]),[o,l]=B.useState(!1),[u,d]=B.useState(""),m=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1"||window.location.hostname.startsWith("192.168.")||window.location.hostname.startsWith("10.")||window.location.hostname.endsWith(".local"),p=k=>{r(k.target.value)},g=async k=>{if(k.preventDefault(),!!n.trim()){l(!0),d(""),i([]);try{const R=await LA(n);i(R)}catch(R){d(R.message)}finally{l(!1)}}},x=k=>{t(k),e()};return m?c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:c.jsxs("div",{className:"bg-slate-800/80 rounded-2xl p-6 max-w-4xl w-full max-h-[90vh] overflow-hidden flex flex-col shadow-2xl",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsxs("h3",{className:"text-2xl font-bold text-gray-100 flex items-center gap-2",children:[c.jsx(Dr,{className:"h-7 w-7 text-red-600"}),"Auf YouTube suchen"]}),c.jsx("button",{onClick:e,"data-test-id":"close-youtube-search","aria-label":"Suche schließen",className:"p-2 hover:bg-slate-700 rounded-full transition-colors",children:c.jsx(hn,{className:"h-6 w-6 text-gray-300"})})]}),c.jsx("form",{onSubmit:g,className:"mb-4",children:c.jsxs("div",{className:"relative",children:[c.jsx("input",{type:"text",value:n,onChange:p,placeholder:"Suche nach Rezepten... z.B. 'Carbonara'",className:"w-full pl-12 pr-4 py-3 border-2 border-gray-600 rounded-lg focus:border-red-500 focus:outline-none transition-colors bg-slate-700 text-gray-100 placeholder-gray-400",autoFocus:!0}),c.jsx(fv,{className:"absolute left-4 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),c.jsx("button",{type:"submit",disabled:o||!n.trim(),className:pe("absolute right-2 top-1/2 -translate-y-1/2 px-4 py-1.5 rounded-lg font-medium transition-all",o||!n.trim()?"bg-gray-200 text-gray-400":"bg-red-600 text-white hover:bg-red-700"),children:o?"Suche...":"Suchen"})]})}),u&&c.jsxs("div",{className:"mb-4 p-4 bg-red-50 border-2 border-red-200 rounded-lg text-red-700",children:["❌ ",u]}),o&&c.jsx("div",{className:"flex-1 flex items-center justify-center",children:c.jsx(l2,{className:"h-8 w-8 text-red-600 animate-spin"})}),!o&&s.length>0&&c.jsxs("div",{className:"flex-1 overflow-y-auto",children:[c.jsxs("p",{className:"text-sm text-gray-600 mb-3",children:[s.length," Ergebnisse gefunden"]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.map(k=>c.jsxs("button",{onClick:()=>x(k),"data-test-id":`youtube-video-${k.id}`,"aria-label":`${k.title} auswählen`,className:"bg-slate-800/80 border-2 border-gray-600 rounded-xl overflow-hidden hover:border-red-400 hover:shadow-lg transition-all duration-200 text-left group",children:[c.jsxs("div",{className:"relative aspect-video bg-slate-700",children:[c.jsx("img",{src:k.thumbnail,alt:k.title,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-200"}),c.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-10 transition-all flex items-center justify-center",children:c.jsx(Dr,{className:"h-12 w-12 text-white opacity-0 group-hover:opacity-100 transition-opacity"})})]}),c.jsxs("div",{className:"p-3",children:[c.jsx("h4",{className:"font-bold text-gray-100 text-sm line-clamp-2 mb-1",children:k.title}),c.jsx("p",{className:"text-xs text-gray-500 line-clamp-1",children:k.channelTitle})]})]},k.id))})]}),!o&&!u&&s.length===0&&n===""&&c.jsx("div",{className:"flex-1 flex items-center justify-center text-center p-8",children:c.jsxs("div",{children:[c.jsx(Dr,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),c.jsx("p",{className:"text-gray-500",children:"Suche nach Rezepten auf YouTube"}),c.jsx("p",{className:"text-sm text-gray-400 mt-2",children:'z.B. "Spaghetti Carbonara"'})]})})]})}):c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:c.jsxs("div",{className:"bg-slate-800/80 rounded-2xl p-6 max-w-md w-full shadow-2xl text-center",children:[c.jsxs("div",{className:"mb-4",children:[c.jsx(Dr,{className:"h-16 w-16 text-red-600 mx-auto mb-4"}),c.jsx("h3",{className:"text-2xl font-bold text-gray-100 mb-2",children:"YouTube-Suche nur lokal verfügbar"}),c.jsx("p",{className:"text-gray-300 mb-6",children:"Die YouTube-Suche funktioniert nur auf dem lokalen Development-Server aus Sicherheitsgründen. Verwende die App lokal unter:"}),c.jsx("code",{className:"bg-slate-700 px-3 py-2 rounded text-primary-400 font-mono text-sm",children:"http://localhost:5174/FoodFlash/"})]}),c.jsx("button",{onClick:e,className:"w-full bg-primary-600 text-white py-3 px-6 rounded-lg font-medium hover:bg-primary-700 transition-colors",children:"Schließen"})]})})},OA=(t,e,n)=>{const r={version:"1.0",exportDate:new Date().toISOString(),recipes:t,weekPlan:e,shoppingList:n},s=JSON.stringify(r,null,2),i=new Blob([s],{type:"application/json"}),o=URL.createObjectURL(i),l=document.createElement("a");l.href=o,l.download=`foodflash-export-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(o)},FA=t=>new Promise((e,n)=>{const r=new FileReader;r.onload=s=>{var i;try{const o=(i=s.target)==null?void 0:i.result,l=JSON.parse(o);if(!l.recipes||!Array.isArray(l.recipes))throw new Error("Ungültiges Datenformat");e(l)}catch(o){n(new Error("Fehler beim Lesen der Datei: "+o.message))}},r.onerror=()=>{n(new Error("Fehler beim Lesen der Datei"))},r.readAsText(t)}),UA=({platformFilter:t,onClearFilter:e})=>{const{recipes:n,addRecipe:r,deleteRecipe:s,updateRecipe:i,isLoading:o,error:l}=gf();l&&n.length===0&&console.warn("⚠️ Firebase-Fehler:",l);const[u,d]=B.useState(""),[m,p]=B.useState(!1),[g,x]=B.useState("merge"),k=B.useRef(null),[R,P]=B.useState(!1),[T,y]=B.useState(""),[S,D]=B.useState(!1),[M,O]=B.useState(!0),[E,_]=B.useState(!1),b=B.useMemo(()=>{let G=n;if(t&&(G=G.filter(se=>se.platform===t)),u.trim()){const se=u.toLowerCase();G=G.filter(ze=>{const _e=ze.title.toLowerCase(),_t=ze.description.toLowerCase(),es=ze.platform.toLowerCase(),en=(ze.notes||"").toLowerCase();return _e.includes(se)||_t.includes(se)||es.includes(se)||en.includes(se)})}return G},[n,u,t]),I=()=>{OA(n)},A=()=>{p(!0)},N=async G=>{var ze;const se=(ze=G.target.files)==null?void 0:ze[0];if(se)try{const _e=await FA(se);if(g==="replace")localStorage.removeItem("foodflash_recipes"),_e.recipes.forEach(_t=>r(_t));else{const _t=new Set(n.map(en=>en.url));_e.recipes.filter(en=>!_t.has(en.url)).forEach(en=>r(en))}p(!1),k.current&&(k.current.value=""),alert(`✅ ${g==="replace"?"Ersetzt":"Hinzugefügt"}: ${_e.recipes.length} Rezepte`)}catch(_e){alert("❌ Fehler beim Importieren: "+_e.message)}},w=G=>{x(G)},Z=()=>{p(!1),k.current&&(k.current.value="")},ge=()=>{const G=localStorage.getItem("foodflash_gist_url");G&&y(G),P(!0)},Ue=()=>{P(!1),y("")},ne=G=>{y(G.target.value)},U=async()=>{if(!T.trim()){alert("Bitte Gist-URL eingeben!");return}if(!DA(T)){alert("Ungültige Gist-URL! Bitte überprüfe die URL.");return}D(!0);try{const G=await PA(T);if(g==="replace")localStorage.removeItem("foodflash_recipes"),G.recipes.forEach(se=>r(se));else{const se=new Set(n.map(_e=>_e.url));G.recipes.filter(_e=>!se.has(_e.url)).forEach(_e=>r(_e))}M&&localStorage.setItem("foodflash_gist_url",T),P(!1),y(""),alert(`✅ ${G.recipes.length} Rezepte von Gist geladen!`)}catch(G){alert("❌ "+G.message)}finally{D(!1)}},Q=()=>{localStorage.removeItem("foodflash_gist_url"),y(""),alert("✅ Gespeicherte Gist-URL wurde gelöscht")},q=()=>{_(!0)},K=()=>{_(!1)},J=G=>{r({title:G.title,url:G.url,description:G.description.slice(0,200),imageUrl:G.thumbnail,platform:"youtube",ingredients:[],comments:[],rating:void 0,notes:""}),_(!1)};return c.jsxs("div",{className:"max-w-6xl mx-auto",children:[c.jsxs("div",{className:"text-center mb-8",children:[c.jsxs("h2",{className:"text-4xl font-bold text-gray-100 mb-2 flex items-center justify-center gap-3",children:[c.jsx(iv,{className:"h-10 w-10 text-primary-500"}),"Deine Rezepte"]}),c.jsx("p",{className:"text-gray-600",children:n.length===0?"Füge dein erstes Rezept hinzu!":`${n.length} ${n.length===1?"Rezept":"Rezepte"} gespeichert`})]}),t&&e&&c.jsx("div",{className:"flex justify-center mb-6",children:c.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-primary-100 text-primary-700 rounded-full font-medium",children:[c.jsxs("span",{children:["Filter: ",t==="youtube"?"YouTube":t==="instagram"?"Instagram":t==="facebook"?"Facebook":t==="tiktok"?"TikTok":t==="own"?"Eigene Rezepte":t]}),c.jsx("button",{onClick:e,"data-test-id":"clear-platform-filter","aria-label":"Filter entfernen",className:"p-1 hover:bg-primary-200 rounded-full transition-colors",children:c.jsx(hn,{className:"h-4 w-4"})})]})}),c.jsx("div",{className:"mb-8",children:c.jsx(bA,{onAdd:G=>r({...G,ingredients:G.ingredients||[],comments:[],rating:void 0})})}),jA,c.jsx("div",{className:"mb-6",children:c.jsxs("button",{onClick:q,"data-test-id":"youtube-search","aria-label":"Auf YouTube nach Rezepten suchen",className:"w-full bg-gradient-to-r from-red-500 to-red-600 text-white rounded-2xl p-4 shadow-lg hover:shadow-xl transition-all duration-200 hover:scale-105 flex items-center justify-center gap-3 font-bold text-lg",children:[c.jsx(Dr,{className:"h-6 w-6"}),"Rezept auf YouTube suchen"]})}),E&&c.jsx(MA,{onSelect:J,onClose:K}),c.jsxs("div",{className:"flex flex-wrap gap-3 mb-6 justify-center",children:[n.length>0&&c.jsxs("button",{onClick:I,"data-test-id":"export-recipes","aria-label":"Rezepte exportieren",className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-accent-500 to-accent-600 text-white rounded-lg font-medium hover:shadow-lg transition-all duration-200 hover:scale-105",children:[c.jsx(s2,{className:"h-5 w-5"}),"Exportieren"]}),c.jsxs("button",{onClick:A,"data-test-id":"import-recipes","aria-label":"Rezepte importieren",className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-secondary-500 to-secondary-600 text-white rounded-lg font-medium hover:shadow-lg transition-all duration-200 hover:scale-105",children:[c.jsx(xd,{className:"h-5 w-5"}),"Datei"]}),c.jsxs("button",{onClick:ge,"data-test-id":"load-from-gist","aria-label":"Von GitHub Gist laden",className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-lg font-medium hover:shadow-lg transition-all duration-200 hover:scale-105",children:[c.jsx(Tp,{className:"h-5 w-5"}),"Gist-Cloud"]})]}),m&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:c.jsxs("div",{className:"bg-slate-800/80 rounded-2xl p-6 max-w-md w-full shadow-2xl",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsxs("h3",{className:"text-xl font-bold text-gray-100 flex items-center gap-2",children:[c.jsx(o2,{className:"h-6 w-6 text-secondary-500"}),"Rezepte importieren"]}),c.jsx("button",{onClick:Z,"data-test-id":"close-import-dialog","aria-label":"Dialog schließen",className:"p-2 hover:bg-slate-700 rounded-full transition-colors",children:c.jsx(hn,{className:"h-6 w-6 text-gray-500"})})]}),c.jsxs("div",{className:"mb-4",children:[c.jsx("p",{className:"text-sm font-medium text-gray-200 mb-2",children:"Import-Modus:"}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[c.jsx("input",{type:"radio",name:"import-mode",checked:g==="merge",onChange:()=>w("merge"),className:"w-4 h-4 text-secondary-500"}),c.jsxs("div",{children:[c.jsx("span",{className:"font-medium text-gray-100",children:"Hinzufügen"}),c.jsx("p",{className:"text-xs text-gray-600",children:"Neue Rezepte zu bestehenden hinzufügen"})]})]}),c.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[c.jsx("input",{type:"radio",name:"import-mode",checked:g==="replace",onChange:()=>w("replace"),className:"w-4 h-4 text-secondary-500"}),c.jsxs("div",{children:[c.jsx("span",{className:"font-medium text-gray-100",children:"Ersetzen"}),c.jsx("p",{className:"text-xs text-gray-600",children:"Alle bestehenden Rezepte löschen und ersetzen"})]})]})]})]}),c.jsx("input",{ref:k,type:"file",accept:".json,application/json",onChange:N,className:"hidden",id:"recipe-file-input"}),c.jsx("label",{htmlFor:"recipe-file-input",className:pe("block w-full py-3 text-center rounded-lg font-bold cursor-pointer transition-all duration-200","bg-gradient-to-r from-secondary-500 to-secondary-600 text-white hover:shadow-lg hover:scale-105"),children:"Datei auswählen"}),c.jsx("p",{className:"text-xs text-gray-500 mt-3 text-center",children:"Wähle eine FoodFlash JSON-Datei aus"})]})}),R&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:c.jsxs("div",{className:"bg-slate-800/80 rounded-2xl p-6 max-w-lg w-full shadow-2xl",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsxs("h3",{className:"text-xl font-bold text-gray-100 flex items-center gap-2",children:[c.jsx(Tp,{className:"h-6 w-6 text-blue-500"}),"Von GitHub Gist laden"]}),c.jsx("button",{onClick:Ue,"data-test-id":"close-gist-dialog","aria-label":"Dialog schließen",className:"p-2 hover:bg-slate-700 rounded-full transition-colors",children:c.jsx(hn,{className:"h-6 w-6 text-gray-500"})})]}),c.jsxs("div",{className:"mb-4 p-4 bg-blue-50 border-2 border-blue-200 rounded-lg",children:[c.jsx("p",{className:"text-sm text-blue-800 font-medium mb-2",children:"💡 So funktioniert's:"}),c.jsxs("ol",{className:"text-xs text-blue-700 space-y-1 list-decimal list-inside",children:[c.jsxs("li",{children:["Ein Familienmitglied erstellt einen ",c.jsx("strong",{children:"öffentlichen Gist"})," mit der Export-Datei"]}),c.jsx("li",{children:"Gist-URL wird mit der Familie geteilt"}),c.jsx("li",{children:"Alle laden die Rezepte von dieser URL"})]}),c.jsxs("p",{className:"text-xs text-blue-600 mt-2",children:["📖 ",c.jsx("a",{href:"https://gist.github.com",target:"_blank",rel:"noopener noreferrer",className:"underline",children:"gist.github.com"})," - kostenlos & einfach!"]})]}),c.jsxs("div",{className:"mb-4",children:[c.jsx("p",{className:"text-sm font-medium text-gray-200 mb-2",children:"Import-Modus:"}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[c.jsx("input",{type:"radio",name:"gist-import-mode",checked:g==="merge",onChange:()=>w("merge"),className:"w-4 h-4 text-blue-500"}),c.jsxs("div",{children:[c.jsx("span",{className:"font-medium text-gray-100",children:"Hinzufügen"}),c.jsx("p",{className:"text-xs text-gray-600",children:"Neue Rezepte zu bestehenden hinzufügen"})]})]}),c.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[c.jsx("input",{type:"radio",name:"gist-import-mode",checked:g==="replace",onChange:()=>w("replace"),className:"w-4 h-4 text-blue-500"}),c.jsxs("div",{children:[c.jsx("span",{className:"font-medium text-gray-100",children:"Ersetzen"}),c.jsx("p",{className:"text-xs text-gray-600",children:"Alle bestehenden Rezepte löschen und ersetzen"})]})]})]})]}),c.jsxs("div",{className:"mb-4",children:[c.jsxs("div",{className:"flex items-center justify-between mb-1",children:[c.jsx("label",{htmlFor:"gist-url",className:"block text-sm font-medium text-gray-200",children:"GitHub Gist URL"}),localStorage.getItem("foodflash_gist_url")&&c.jsx("button",{onClick:Q,className:"text-xs text-red-500 hover:text-red-600 font-medium",children:"URL löschen"})]}),c.jsx("input",{id:"gist-url",type:"url",value:T,onChange:ne,placeholder:"https://gist.github.com/username/...",className:"w-full px-4 py-2 border-2 border-gray-600 rounded-lg focus:border-blue-500 focus:outline-none transition-colors bg-slate-700 text-gray-100 placeholder-gray-400"}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Z.B.: https://gist.github.com/username/abc123..."}),c.jsxs("label",{className:"flex items-center gap-2 mt-2 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:M,onChange:G=>O(G.target.checked),className:"w-4 h-4 text-blue-500"}),c.jsx("span",{className:"text-sm text-gray-200",children:"URL für nächstes Mal speichern"})]})]}),c.jsx("button",{onClick:U,disabled:S,className:pe("w-full py-3 rounded-lg font-bold text-white transition-all duration-200",S?"bg-gray-400 cursor-not-allowed":"bg-gradient-to-r from-blue-500 to-blue-600 hover:shadow-lg hover:scale-105"),children:S?"Lade...":"Von Gist laden"})]})}),n.length>0&&c.jsxs("div",{className:"mb-8",children:[c.jsx(CA,{searchTerm:u,onSearchChange:d}),u&&c.jsxs("p",{className:"text-sm text-gray-500 mt-2 text-center",children:[b.length," ",b.length===1?"Ergebnis":"Ergebnisse"," gefunden"]})]}),o?c.jsxs("div",{className:"bg-slate-800/80 rounded-2xl p-12 text-center shadow-lg",children:[c.jsx("div",{className:"text-6xl mb-4 animate-pulse",children:"🔄"}),c.jsx("h3",{className:"text-2xl font-bold text-gray-200 mb-2",children:"Lade Rezepte..."}),c.jsx("p",{className:"text-gray-400",children:"Synchronisiere mit der Cloud ☁️"})]}):n.length>0?b.length>0?c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:b.map(G=>c.jsx(NA,{recipe:G,onDelete:s,onUpdate:i},G.id))}):c.jsxs("div",{className:"bg-slate-800/80 rounded-2xl p-12 text-center shadow-lg",children:[c.jsx("div",{className:"text-6xl mb-4",children:"🔍"}),c.jsx("h3",{className:"text-2xl font-bold text-gray-200 mb-2",children:"Keine Ergebnisse"}),c.jsxs("p",{className:"text-gray-500",children:['Keine Rezepte für "',u,'" gefunden.']})]}):c.jsxs("div",{className:"bg-slate-800/80 rounded-2xl p-12 text-center shadow-lg",children:[c.jsx("div",{className:"text-6xl mb-4",children:"🍳"}),c.jsx("h3",{className:"text-2xl font-bold text-gray-200 mb-2",children:"Noch keine Rezepte"}),c.jsx("p",{className:"text-gray-500",children:"Klicke auf den Button oben, um dein erstes Rezept zu speichern!"})]})]})},zA=t=>{const[e,n]=B.useState([]),[r,s]=B.useState(!0),[i,o]=B.useState(null);return B.useEffect(()=>{if(!t){s(!1);return}const g=`households/${t}/weekPlanner`,x=fr(Qe,g),k=uf(x,R=>{const P=[];R.forEach(T=>{P.push({date:T.id,meals:T.data().meals||[]})}),P.sort((T,y)=>T.date.localeCompare(y.date)),n(P),s(!1),o(null)},R=>{console.error("Error fetching week planner:",R),o("Fehler beim Laden des Wochenplaners"),s(!1)});return()=>k()},[t]),{weekPlan:e,isLoading:r,error:i,addMealToDay:async(g,x,k,R)=>{if(t)try{const P=`households/${t}/weekPlanner`,T=Qt(Qe,P,g),y=e.find(D=>D.date===g),S=y?[...y.meals]:[];S.push({recipeId:x,recipeTitle:k,mealType:R}),await Lg(T,{meals:S,updatedAt:$s()})}catch(P){throw console.error("Error adding meal:",P),o("Fehler beim Hinzufügen der Mahlzeit"),P}},removeMealFromDay:async(g,x)=>{if(t)try{const k=e.find(y=>y.date===g);if(!k)return;const R=k.meals.filter((y,S)=>S!==x),P=`households/${t}/weekPlanner`,T=Qt(Qe,P,g);R.length===0?await Fr(T):await Lg(T,{meals:R,updatedAt:$s()})}catch(k){throw console.error("Error removing meal:",k),o("Fehler beim Entfernen der Mahlzeit"),k}},clearDay:async g=>{if(t)try{const x=`households/${t}/weekPlanner`,k=Qt(Qe,x,g);await Fr(k)}catch(x){throw console.error("Error clearing day:",x),o("Fehler beim Leeren des Tages"),x}},clearWeekPlan:async()=>{if(t)try{const g=`households/${t}/weekPlanner`,x=e.map(k=>Fr(Qt(Qe,g,k.date)));await Promise.all(x)}catch(g){throw console.error("Error clearing week plan:",g),o("Fehler beim Leeren des Wochenplaners"),g}},getMealsForDate:g=>{const x=e.find(k=>k.date===g);return(x==null?void 0:x.meals)||[]}}},BA=t=>{const e=zA(t),{recipes:n}=gf(),r={monday:{meals:[]},tuesday:{meals:[]},wednesday:{meals:[]},thursday:{meals:[]},friday:{meals:[]},saturday:{meals:[]},sunday:{meals:[]}},s=m=>{const p=new Date,g=p.getDay(),R={sunday:0,monday:1,tuesday:2,wednesday:3,thursday:4,friday:5,saturday:6}[m]-g,P=new Date(p);return P.setDate(p.getDate()+R),P.toISOString().split("T")[0]};e.weekPlan.forEach(m=>{const g=new Date(m.date).getDay(),k=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"][g];r[k].meals=m.meals.map(R=>({recipeId:R.recipeId,mealType:R.mealType}))});const i={weekStart:new Date().toISOString(),days:r},o=async(m,p)=>{const g=s(m),x=n.find(k=>k.id===p.recipeId);if(!x){console.error("Recipe not found:",p.recipeId);return}await e.addMealToDay(g,p.recipeId,x.title,p.mealType)},l=async(m,p,g)=>{const x=s(m),R=e.getMealsForDate(x).findIndex(P=>P.recipeId===p&&P.mealType===g);R!==-1&&await e.removeMealFromDay(x,R)},u=async m=>{const p=s(m);await e.clearDay(p)},d=async()=>{await e.clearWeekPlan()};return{weekPlan:i,isLoading:e.isLoading,error:e.error,addMealToDay:o,removeMealFromDay:l,clearDay:u,clearWeek:d}},sc=[{key:"monday",label:"Montag",short:"Mo"},{key:"tuesday",label:"Dienstag",short:"Di"},{key:"wednesday",label:"Mittwoch",short:"Mi"},{key:"thursday",label:"Donnerstag",short:"Do"},{key:"friday",label:"Freitag",short:"Fr"},{key:"saturday",label:"Samstag",short:"Sa"},{key:"sunday",label:"Sonntag",short:"So"}],Hg=[{key:"breakfast",label:"Frühstück",emoji:"🥐"},{key:"lunch",label:"Mittagessen",emoji:"🍽️"},{key:"dinner",label:"Abendessen",emoji:"🍝"},{key:"snack",label:"Snack",emoji:"🍪"}],$A=()=>{var T;const{currentHousehold:t}=ko(),{weekPlan:e,addMealToDay:n,removeMealFromDay:r,clearDay:s,clearWeek:i,isLoading:o}=BA(t==null?void 0:t.id),{recipes:l}=gf(),[u,d]=B.useState(null),[m,p]=B.useState("lunch"),g=y=>{u&&(n(u,{recipeId:y,mealType:m}),d(null))},x=(y,S,D)=>{r(y,S,D)},k=y=>{var S;confirm(`Möchtest du alle Mahlzeiten für ${(S=sc.find(D=>D.key===y))==null?void 0:S.label} löschen?`)&&s(y)},R=()=>{confirm("Möchtest du den gesamten Wochenplan löschen?")&&i()},P=y=>l.find(S=>S.id===y);return c.jsxs("div",{className:"max-w-7xl mx-auto",children:[c.jsxs("div",{className:"text-center mb-8",children:[c.jsxs("h2",{className:"text-4xl font-bold text-gray-100 mb-2 flex items-center justify-center gap-3",children:[c.jsx(ov,{className:"h-10 w-10 text-accent-500"}),"Wochenplaner"]}),c.jsx("p",{className:"text-gray-400 mb-4",children:o?"🔄 Synchronisiere mit der Cloud...":"Plane deine Mahlzeiten für die Woche"}),c.jsx("button",{onClick:R,"data-test-id":"clear-week","aria-label":"Wochenplan löschen",className:"text-sm text-red-500 hover:text-red-600 font-medium transition-colors",children:"Wochenplan zurücksetzen"})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-7 gap-4 mb-8",children:sc.map(y=>{const S=e.days[y.key].meals,D=Hg.map(M=>({...M,meals:S.filter(O=>O.mealType===M.key)}));return c.jsxs("div",{className:"bg-slate-700/50 backdrop-blur-sm rounded-2xl p-4 shadow-lg border-2 border-dark-600/50",children:[c.jsxs("div",{className:"flex items-center justify-between mb-3 pb-2 border-b-2 border-slate-600",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"font-bold text-gray-100 hidden lg:block",children:y.label}),c.jsx("h3",{className:"font-bold text-gray-100 lg:hidden",children:y.short})]}),c.jsx("button",{onClick:()=>k(y.key),"data-test-id":`clear-day-${y.key}`,"aria-label":`${y.label} löschen`,className:"p-1 hover:bg-red-600/20 rounded-lg transition-colors text-red-400",children:c.jsx(Vs,{className:"h-4 w-4"})})]}),c.jsx("div",{className:"space-y-3",children:D.map(M=>c.jsxs("div",{children:[c.jsxs("div",{className:"text-xs font-medium text-gray-400 mb-1 flex items-center gap-1",children:[c.jsx("span",{children:M.emoji}),c.jsx("span",{className:"hidden lg:inline",children:M.label})]}),c.jsx("div",{className:"space-y-1",children:M.meals.map((O,E)=>{const _=P(O.recipeId);return _?c.jsxs("div",{className:"bg-gradient-to-r from-primary-600/30 to-secondary-600/30 rounded-lg p-2 text-xs group relative border border-primary-500/20",children:[c.jsx("p",{className:"font-medium text-gray-100 pr-6 line-clamp-2",children:_.title}),c.jsx("button",{onClick:()=>x(y.key,O.recipeId,O.mealType),"data-test-id":`remove-meal-${y.key}-${O.recipeId}`,"aria-label":`${_.title} entfernen`,className:"absolute top-1 right-1 p-1 bg-slate-800 rounded opacity-0 group-hover:opacity-100 transition-opacity hover:bg-red-600/20 text-red-400",children:c.jsx(Vs,{className:"h-3 w-3"})})]},`${O.recipeId}-${E}`):null})})]},M.key))}),c.jsxs("button",{onClick:()=>d(y.key),"data-test-id":`add-meal-${y.key}`,"aria-label":`Mahlzeit zu ${y.label} hinzufügen`,className:pe("w-full mt-3 py-2 rounded-lg font-medium text-sm transition-all duration-200 flex items-center justify-center gap-2",u===y.key?"bg-accent-500 text-white shadow-lg":"bg-slate-700 text-gray-300 hover:bg-accent-600/20 hover:text-accent-400"),children:[c.jsx(uo,{className:"h-4 w-4"}),c.jsx("span",{className:"hidden lg:inline",children:"Hinzufügen"})]})]},y.key)})}),u&&c.jsxs("div",{className:"bg-slate-800/80 backdrop-blur-sm rounded-2xl p-6 shadow-2xl border-2 border-accent-500/30 autumn-glow-gold",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsxs("h3",{className:"text-xl font-bold text-gray-100 flex items-center gap-2",children:[c.jsx(e2,{className:"h-6 w-6 text-accent-500"}),"Rezept für ",(T=sc.find(y=>y.key===u))==null?void 0:T.label," auswählen"]}),c.jsx("button",{onClick:()=>d(null),"data-test-id":"close-recipe-selection","aria-label":"Rezeptauswahl schließen",className:"text-gray-400 hover:text-gray-200",children:"✕"})]}),c.jsxs("div",{className:"mb-4",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-200 mb-2",children:"Mahlzeit"}),c.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:Hg.map(y=>c.jsxs("button",{onClick:()=>p(y.key),"data-test-id":`select-meal-type-${y.key}`,"aria-label":`${y.label} auswählen`,className:pe("py-2 px-3 rounded-lg font-medium text-sm transition-all duration-200",m===y.key?"bg-accent-500 text-white shadow-md":"bg-slate-700 text-gray-300 hover:bg-accent-600/20 hover:text-accent-400"),children:[c.jsx("span",{className:"mr-1",children:y.emoji}),y.label]},y.key))})]}),l.length>0?c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3 max-h-96 overflow-y-auto",children:l.map(y=>c.jsxs("button",{onClick:()=>g(y.id),"data-test-id":`select-recipe-${y.id}`,"aria-label":`${y.title} hinzufügen`,className:"bg-slate-700/80 hover:bg-slate-600/80 rounded-xl p-4 text-left transition-all duration-200 hover:shadow-lg hover:scale-105 border-2 border-slate-600/50 hover:border-accent-500/50",children:[c.jsx("p",{className:"font-bold text-gray-100 mb-1 line-clamp-2",children:y.title}),y.rating&&c.jsxs("p",{className:"text-xs text-gray-400",children:["⭐ ",y.rating,"/5"]})]},y.id))}):c.jsx("div",{className:"text-center py-8 text-gray-400",children:c.jsx("p",{children:"Keine Rezepte vorhanden. Füge zuerst Rezepte hinzu!"})})]})]})},HA={produce:{label:"Obst & Gemüse",emoji:"🥬"},bakery:{label:"Brot & Backwaren",emoji:"🥖"},meat:{label:"Fleisch & Wurst",emoji:"🥩"},deli:{label:"Aufschnitt",emoji:"🥓"},dairy:{label:"Käse & Milchprodukte",emoji:"🧀"},beverages:{label:"Getränke",emoji:"🥤"},pantry:{label:"Konserven & Vorräte",emoji:"🥫"},snacks:{label:"Süßigkeiten & Snacks",emoji:"🍫"},frozen:{label:"Tiefkühlware",emoji:"🧊"},household:{label:"Haushalt & Sonstiges",emoji:"🧹"}},qA=["produce","bakery","meat","deli","dairy","beverages","pantry","snacks","frozen","household"],qg=t=>{if(t.length===0)return"🛒 Einkaufsliste ist leer";const e=t.filter(r=>!r.checked);if(e.length===0)return"✅ Alle Artikel wurden bereits gekauft!";let n=`🛒 *Einkaufsliste*

`;return qA.forEach(r=>{const s=e.filter(i=>i.category===r);if(s.length>0){const i=HA[r];n+=`${i.emoji} *${i.label}*
`,s.forEach(o=>{const l=o.quantity?` (${o.quantity})`:"";n+=`  • ${o.name}${l}
`}),n+=`
`}}),n+=`📊 Insgesamt: ${e.length} ${e.length===1,"Artikel"}`,n},Wg=[{key:"produce",label:"Obst & Gemüse",emoji:"🥬"},{key:"bakery",label:"Brot & Backwaren",emoji:"🥖"},{key:"meat",label:"Fleisch & Wurst",emoji:"🥩"},{key:"deli",label:"Aufschnitt",emoji:"🥓"},{key:"dairy",label:"Käse & Milchprodukte",emoji:"🧀"},{key:"beverages",label:"Getränke",emoji:"🥤"},{key:"pantry",label:"Konserven & Vorräte",emoji:"🥫"},{key:"snacks",label:"Süßigkeiten & Snacks",emoji:"🍫"},{key:"frozen",label:"Tiefkühlware",emoji:"🧊"},{key:"household",label:"Haushalt & Sonstiges",emoji:"🧹"}],WA=()=>{const{currentHousehold:t}=ko(),{items:e,addItem:n,toggleItem:r,removeItem:s,clearCheckedItems:i,clearAllItems:o,isLoading:l}=Hw(t==null?void 0:t.id),[u,d]=B.useState(!1),[m,p]=B.useState(""),[g,x]=B.useState(""),[k,R]=B.useState("produce"),P=w=>{if(w.preventDefault(),!!m.trim()){if(!t){alert("❌ Bitte wähle zuerst einen Haushalt aus!");return}n(m,k,g),p(""),x(""),d(!1)}},T=w=>{p(w.target.value)},y=w=>{x(w.target.value)},S=w=>{R(w.target.value)},D=w=>{r(w)},M=w=>{s(w)},O=()=>{confirm("Möchtest du alle abgehakten Artikel löschen?")&&i()},E=()=>{confirm("Möchtest du die gesamte Einkaufsliste löschen?")&&o()},_=async()=>{const w=qg(e);try{await navigator.clipboard.writeText(w),alert("✅ Einkaufsliste in Zwischenablage kopiert!")}catch{const ge=document.createElement("textarea");ge.value=w,document.body.appendChild(ge),ge.select(),document.execCommand("copy"),document.body.removeChild(ge),alert("✅ Einkaufsliste kopiert!")}},b=()=>{const w=qg(e),ge=`https://wa.me/?text=${encodeURIComponent(w)}`;window.open(ge,"_blank")},I=Wg.map(w=>({...w,items:e.filter(Z=>Z.category===w.key)})),A=e.filter(w=>w.checked).length,N=e.length;return c.jsxs("div",{className:"max-w-4xl mx-auto",children:[!t&&c.jsxs("div",{className:"bg-red-900/30 border-2 border-red-500 rounded-xl p-6 mb-6 text-center",children:[c.jsx("p",{className:"text-red-200 text-lg font-bold mb-2",children:"⚠️ Kein Haushalt gewählt!"}),c.jsx("p",{className:"text-red-300 text-sm",children:"Bitte wähle zuerst einen Haushalt aus, um die Einkaufsliste zu nutzen."})]}),c.jsxs("div",{className:"text-center mb-8",children:[c.jsxs("h2",{className:"text-4xl font-bold text-gray-100 mb-2 flex items-center justify-center gap-3",children:[c.jsx(_d,{className:"h-10 w-10 text-primary-500"}),"Einkaufsliste",t&&c.jsxs("span",{className:"text-lg text-gray-400",children:["(",t.icon," ",t.name,")"]})]}),c.jsx("p",{className:"text-gray-300",children:l?"🔄 Synchronisiere mit der Cloud...":N===0?"Füge Artikel zu deiner Einkaufsliste hinzu":c.jsxs(c.Fragment,{children:[A," von ",N," ",N===1?"Artikel":"Artikeln"," gekauft"]})})]}),u?c.jsxs("div",{className:"bg-slate-800/80 backdrop-blur-sm rounded-2xl p-6 shadow-xl border-2 border-primary-500/30 autumn-glow mb-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-100",children:"Neuer Artikel"}),c.jsx("button",{onClick:()=>d(!1),"data-test-id":"close-add-item","aria-label":"Formular schließen",className:"p-2 hover:bg-slate-700 rounded-full transition-colors",children:c.jsx(hn,{className:"h-6 w-6 text-gray-300"})})]}),c.jsxs("form",{onSubmit:P,className:"space-y-4",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"item-name",className:"block text-sm font-medium text-gray-200 mb-1",children:"Artikel *"}),c.jsx("input",{id:"item-name",type:"text",value:m,onChange:T,"data-test-id":"item-name-input","aria-label":"Artikel-Name eingeben",placeholder:"z.B. Tomaten",className:"w-full px-4 py-2 border-2 border-gray-600 rounded-lg focus:border-primary-500 focus:outline-none transition-colors bg-slate-700 text-gray-100 placeholder-gray-400",required:!0,autoFocus:!0})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"item-quantity",className:"block text-sm font-medium text-gray-200 mb-1",children:"Menge (optional)"}),c.jsx("input",{id:"item-quantity",type:"text",value:g,onChange:y,"data-test-id":"item-quantity-input","aria-label":"Menge eingeben",placeholder:"z.B. 500g, 3 Stück",className:"w-full px-4 py-2 border-2 border-gray-600 rounded-lg focus:border-primary-500 focus:outline-none transition-colors bg-slate-700 text-gray-100 placeholder-gray-400"})]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"item-category",className:"block text-sm font-medium text-gray-200 mb-1",children:"Kategorie *"}),c.jsx("select",{id:"item-category",value:k,onChange:S,"data-test-id":"item-category-select","aria-label":"Kategorie auswählen",className:"w-full px-4 py-2 border-2 border-gray-600 rounded-lg focus:border-primary-500 focus:outline-none transition-colors bg-slate-700 text-gray-100",children:Wg.map(w=>c.jsxs("option",{value:w.key,children:[w.emoji," ",w.label]},w.key))})]}),c.jsx("button",{type:"submit","data-test-id":"submit-item","aria-label":"Artikel zur Liste hinzufügen",className:"w-full py-3 rounded-lg font-bold text-white transition-all duration-200 bg-gradient-to-r from-primary-500 to-secondary-500 hover:shadow-lg hover:scale-105",children:"Zur Liste hinzufügen"})]})]}):c.jsxs("button",{onClick:()=>d(!0),"data-test-id":"open-add-item","aria-label":"Artikel hinzufügen",className:"w-full bg-gradient-to-r from-primary-500 to-secondary-500 text-white rounded-2xl p-4 shadow-lg hover:shadow-xl transition-all duration-200 hover:scale-105 flex items-center justify-center gap-3 font-bold text-lg mb-6",children:[c.jsx(uo,{className:"h-6 w-6"}),"Artikel hinzufügen"]}),e.length>0&&c.jsxs("div",{className:"space-y-3 mb-6",children:[c.jsxs("div",{className:"flex gap-3",children:[c.jsxs("button",{onClick:_,"data-test-id":"copy-shopping-list","aria-label":"Einkaufsliste kopieren",className:"flex-1 py-3 px-4 bg-gradient-to-r from-primary-500 to-secondary-500 text-white rounded-lg font-medium hover:shadow-lg transition-all duration-200 hover:scale-105 flex items-center justify-center gap-2",children:[c.jsx(r2,{className:"h-5 w-5"}),"Kopieren"]}),c.jsxs("button",{onClick:b,"data-test-id":"share-whatsapp","aria-label":"Per WhatsApp teilen",className:"flex-1 py-3 px-4 bg-gradient-to-r from-green-500 to-green-600 text-white rounded-lg font-medium hover:shadow-lg transition-all duration-200 hover:scale-105 flex items-center justify-center gap-2",children:[c.jsx(f2,{className:"h-5 w-5"}),"WhatsApp"]})]}),c.jsxs("div",{className:"flex gap-3",children:[A>0&&c.jsxs("button",{onClick:O,"data-test-id":"clear-checked","aria-label":"Abgehakte Artikel löschen",className:"flex-1 py-2 px-4 bg-accent-100 text-accent-700 rounded-lg font-medium hover:bg-accent-200 transition-colors text-sm",children:["Abgehakte löschen (",A,")"]}),c.jsx("button",{onClick:E,"data-test-id":"clear-all","aria-label":"Alle Artikel löschen",className:"py-2 px-4 bg-red-100 text-red-600 rounded-lg font-medium hover:bg-red-200 transition-colors text-sm",children:"Alle löschen"})]})]}),e.length>0?c.jsx("div",{className:"space-y-4",children:I.map(w=>w.items.length===0?null:c.jsxs("div",{className:"bg-slate-700/50 backdrop-blur-sm rounded-2xl p-5 shadow-lg border-2 border-dark-600/50",children:[c.jsxs("h3",{className:"font-bold text-gray-100 mb-3 flex items-center gap-2 text-lg",children:[c.jsx("span",{className:"text-2xl",children:w.emoji}),w.label,c.jsxs("span",{className:"text-sm text-gray-300 font-normal ml-auto",children:[w.items.filter(Z=>Z.checked).length,"/",w.items.length]})]}),c.jsx("div",{className:"space-y-2",children:w.items.map(Z=>c.jsxs("div",{className:pe("flex items-center gap-3 p-3 rounded-lg transition-all duration-200 group",Z.checked?"bg-slate-600/30":"bg-slate-600/50 hover:bg-slate-500/50"),children:[c.jsx("button",{onClick:()=>D(Z.id),"data-test-id":`toggle-item-${Z.id}`,"aria-label":Z.checked?"Als nicht gekauft markieren":"Als gekauft markieren",className:"flex-shrink-0 transition-transform hover:scale-110",children:Z.checked?c.jsx(JE,{className:"h-6 w-6 text-accent-500"}):c.jsx(n2,{className:"h-6 w-6 text-gray-300"})}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("p",{className:pe("font-medium",Z.checked?"line-through text-gray-400":"text-white"),children:Z.name}),Z.quantity&&c.jsx("p",{className:pe("text-sm",Z.checked?"text-gray-400":"text-gray-200"),children:Z.quantity})]}),c.jsx("button",{onClick:()=>M(Z.id),"data-test-id":`delete-item-${Z.id}`,"aria-label":`${Z.name} löschen`,className:"flex-shrink-0 p-2 rounded-lg opacity-0 group-hover:opacity-100 transition-opacity hover:bg-red-100 text-red-500",children:c.jsx(Vs,{className:"h-4 w-4"})})]},Z.id))})]},w.key))}):c.jsxs("div",{className:"bg-slate-800/80 backdrop-blur-sm rounded-2xl p-12 text-center shadow-lg border border-dark-600/50",children:[c.jsx("div",{className:"text-6xl mb-4",children:"🛒"}),c.jsx("h3",{className:"text-2xl font-bold text-gray-200 mb-2",children:"Deine Einkaufsliste ist leer"}),c.jsx("p",{className:"text-gray-300",children:"Füge Artikel hinzu und sie werden nach Supermarkt-Kategorien sortiert!"})]})]})},GA=()=>{const{households:t,setCurrentHousehold:e,hasSelectedHousehold:n}=ko(),[r,s]=B.useState(null);if(n)return null;const i=l=>{s(l)},o=()=>{r&&e(r)};return c.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm z-50 overflow-y-auto",children:c.jsx("div",{className:"min-h-screen flex items-center justify-center p-4 py-8",children:c.jsxs("div",{className:"bg-slate-800 rounded-2xl p-6 md:p-8 max-w-2xl w-full shadow-2xl border-2 border-primary-500/30 max-h-[85vh] overflow-y-auto",children:[c.jsxs("div",{className:"text-center mb-4 md:mb-8",children:[c.jsx("div",{className:"flex justify-center mb-3",children:c.jsx("div",{className:"p-3 bg-primary-600/20 rounded-full",children:c.jsx(uv,{className:"h-8 w-8 md:h-12 md:w-12 text-primary-500"})})}),c.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-gray-100 mb-2",children:"Willkommen bei FoodFlash! 🎉"}),c.jsx("p",{className:"text-gray-300 text-base md:text-lg",children:"Welcher Haushalt bist du?"}),c.jsxs("p",{className:"text-gray-400 text-xs md:text-sm mt-2",children:["Jeder Haushalt hat seine eigene Einkaufsliste und Wochenplanung.",c.jsx("br",{className:"hidden md:block"}),c.jsx("span",{className:"md:inline",children:" "}),"Rezepte werden mit allen geteilt! 👨‍👩‍👧‍👦"]})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 mb-4",children:t.map(l=>c.jsxs("button",{onClick:()=>i(l),"data-test-id":`select-${l.id}`,"aria-label":`${l.name} auswählen`,className:pe("relative p-4 md:p-6 rounded-xl border-2 transition-all duration-200","hover:scale-105 hover:shadow-xl",(r==null?void 0:r.id)===l.id?"border-primary-500 bg-primary-600/20":"border-gray-600 bg-slate-700/50 hover:border-primary-500/50"),children:[(r==null?void 0:r.id)===l.id&&c.jsx("div",{className:"absolute top-2 right-2 bg-primary-500 text-white p-1 rounded-full",children:c.jsx(ZE,{className:"h-4 w-4"})}),c.jsx("div",{className:"text-4xl md:text-5xl mb-2 md:mb-3",children:l.icon}),c.jsx("h3",{className:"text-base md:text-lg font-bold text-gray-100 mb-1",children:l.name}),c.jsx("p",{className:"text-xs text-gray-400",children:"Eigene Listen & Planung"})]},l.id))}),c.jsx("div",{className:"bg-blue-900/30 border border-blue-500/30 rounded-lg p-3 mb-4",children:c.jsxs("p",{className:"text-xs md:text-sm text-blue-200",children:["💡 ",c.jsx("strong",{children:"Tipp:"})," Du kannst den Haushalt später jederzeit wechseln!"]})}),c.jsx("button",{onClick:o,disabled:!r,"data-test-id":"confirm-household","aria-label":"Haushalt bestätigen",className:pe("w-full py-3 md:py-4 rounded-xl font-bold text-base md:text-lg transition-all duration-200",r?"bg-gradient-to-r from-primary-500 to-secondary-500 text-white hover:shadow-xl hover:scale-105":"bg-gray-700 text-gray-500 cursor-not-allowed"),children:r?`${r.icon} ${r.name} auswählen`:"Bitte wähle einen Haushalt"}),c.jsx("p",{className:"text-center text-xs text-gray-500 mt-3",children:"Diese Einstellung wird auf deinem Gerät gespeichert"})]})})})};function KA(){const[t,e]=B.useState("home"),[n,r]=B.useState(null);B.useEffect(()=>{(async()=>{try{console.log("🔄 Starte Migration und Bereinigung..."),await Lw();const l=await bh();console.log("📊 Migration-Status:",l)}catch(l){console.error("Migration fehlgeschlagen:",l)}})(),window.FoodFlash={forceReMigration:Mw,checkMigrationStatus:bh,version:"2.0.0",clearLocalStorage:()=>{localStorage.removeItem("foodflash_recipes"),localStorage.removeItem("foodflash_migrated_to_firebase"),console.log("✅ localStorage gelöscht - bitte Seite neu laden (F5)")}},console.log("🍂 FoodFlash geladen! Verfügbare Debugging-Tools:"),console.log("  - window.FoodFlash.forceReMigration() - Migration erneut durchführen"),console.log("  - window.FoodFlash.checkMigrationStatus() - Migration-Status überprüfen"),console.log("  - window.FoodFlash.clearLocalStorage() - localStorage löschen")},[]);const s=o=>{r(o),e("recipes")},i=()=>{r(null)};return c.jsx(y2,{children:c.jsxs("div",{className:"min-h-screen",children:[c.jsx(GA,{}),c.jsx(xA,{activeTab:t,setActiveTab:e}),c.jsxs("main",{className:"container mx-auto px-4 py-8 pb-16 sm:pb-8",children:[t==="home"&&c.jsx(EA,{onPlatformClick:s}),t==="recipes"&&c.jsx(UA,{platformFilter:n,onClearFilter:i}),t==="planner"&&c.jsx($A,{}),t==="shopping"&&c.jsx(WA,{})]})]})})}ic.createRoot(document.getElementById("root")).render(c.jsx(M1.StrictMode,{children:c.jsx(KA,{})}));
