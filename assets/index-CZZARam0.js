(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function u1(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var dg={exports:{}},sl={},fg={exports:{}},te={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ao=Symbol.for("react.element"),c1=Symbol.for("react.portal"),h1=Symbol.for("react.fragment"),d1=Symbol.for("react.strict_mode"),f1=Symbol.for("react.profiler"),m1=Symbol.for("react.provider"),p1=Symbol.for("react.context"),g1=Symbol.for("react.forward_ref"),y1=Symbol.for("react.suspense"),v1=Symbol.for("react.memo"),_1=Symbol.for("react.lazy"),Uf=Symbol.iterator;function w1(t){return t===null||typeof t!="object"?null:(t=Uf&&t[Uf]||t["@@iterator"],typeof t=="function"?t:null)}var mg={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},pg=Object.assign,gg={};function Ps(t,e,n){this.props=t,this.context=e,this.refs=gg,this.updater=n||mg}Ps.prototype.isReactComponent={};Ps.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ps.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function yg(){}yg.prototype=Ps.prototype;function ih(t,e,n){this.props=t,this.context=e,this.refs=gg,this.updater=n||mg}var oh=ih.prototype=new yg;oh.constructor=ih;pg(oh,Ps.prototype);oh.isPureReactComponent=!0;var Bf=Array.isArray,vg=Object.prototype.hasOwnProperty,ah={current:null},_g={key:!0,ref:!0,__self:!0,__source:!0};function wg(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)vg.call(e,r)&&!_g.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var u=Array(l),h=0;h<l;h++)u[h]=arguments[h+2];s.children=u}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:ao,type:t,key:i,ref:o,props:s,_owner:ah.current}}function x1(t,e){return{$$typeof:ao,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function lh(t){return typeof t=="object"&&t!==null&&t.$$typeof===ao}function E1(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var $f=/\/+/g;function iu(t,e){return typeof t=="object"&&t!==null&&t.key!=null?E1(""+t.key):e.toString(36)}function Zo(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case ao:case c1:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+iu(o,0):r,Bf(s)?(n="",t!=null&&(n=t.replace($f,"$&/")+"/"),Zo(s,e,n,"",function(h){return h})):s!=null&&(lh(s)&&(s=x1(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace($f,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",Bf(t))for(var l=0;l<t.length;l++){i=t[l];var u=r+iu(i,l);o+=Zo(i,e,n,u,s)}else if(u=w1(t),typeof u=="function")for(t=u.call(t),l=0;!(i=t.next()).done;)i=i.value,u=r+iu(i,l++),o+=Zo(i,e,n,u,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Ro(t,e,n){if(t==null)return t;var r=[],s=0;return Zo(t,r,"","",function(i){return e.call(n,i,s++)}),r}function T1(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var ft={current:null},ea={transition:null},S1={ReactCurrentDispatcher:ft,ReactCurrentBatchConfig:ea,ReactCurrentOwner:ah};function xg(){throw Error("act(...) is not supported in production builds of React.")}te.Children={map:Ro,forEach:function(t,e,n){Ro(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Ro(t,function(){e++}),e},toArray:function(t){return Ro(t,function(e){return e})||[]},only:function(t){if(!lh(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};te.Component=Ps;te.Fragment=h1;te.Profiler=f1;te.PureComponent=ih;te.StrictMode=d1;te.Suspense=y1;te.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=S1;te.act=xg;te.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=pg({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=ah.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)vg.call(e,u)&&!_g.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var h=0;h<u;h++)l[h]=arguments[h+2];r.children=l}return{$$typeof:ao,type:t.type,key:s,ref:i,props:r,_owner:o}};te.createContext=function(t){return t={$$typeof:p1,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:m1,_context:t},t.Consumer=t};te.createElement=wg;te.createFactory=function(t){var e=wg.bind(null,t);return e.type=t,e};te.createRef=function(){return{current:null}};te.forwardRef=function(t){return{$$typeof:g1,render:t}};te.isValidElement=lh;te.lazy=function(t){return{$$typeof:_1,_payload:{_status:-1,_result:t},_init:T1}};te.memo=function(t,e){return{$$typeof:v1,type:t,compare:e===void 0?null:e}};te.startTransition=function(t){var e=ea.transition;ea.transition={};try{t()}finally{ea.transition=e}};te.unstable_act=xg;te.useCallback=function(t,e){return ft.current.useCallback(t,e)};te.useContext=function(t){return ft.current.useContext(t)};te.useDebugValue=function(){};te.useDeferredValue=function(t){return ft.current.useDeferredValue(t)};te.useEffect=function(t,e){return ft.current.useEffect(t,e)};te.useId=function(){return ft.current.useId()};te.useImperativeHandle=function(t,e,n){return ft.current.useImperativeHandle(t,e,n)};te.useInsertionEffect=function(t,e){return ft.current.useInsertionEffect(t,e)};te.useLayoutEffect=function(t,e){return ft.current.useLayoutEffect(t,e)};te.useMemo=function(t,e){return ft.current.useMemo(t,e)};te.useReducer=function(t,e,n){return ft.current.useReducer(t,e,n)};te.useRef=function(t){return ft.current.useRef(t)};te.useState=function(t){return ft.current.useState(t)};te.useSyncExternalStore=function(t,e,n){return ft.current.useSyncExternalStore(t,e,n)};te.useTransition=function(){return ft.current.useTransition()};te.version="18.3.1";fg.exports=te;var H=fg.exports;const I1=u1(H);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var k1=H,A1=Symbol.for("react.element"),b1=Symbol.for("react.fragment"),C1=Object.prototype.hasOwnProperty,N1=k1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,R1={key:!0,ref:!0,__self:!0,__source:!0};function Eg(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)C1.call(e,r)&&!R1.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:A1,type:t,key:i,ref:o,props:s,_owner:N1.current}}sl.Fragment=b1;sl.jsx=Eg;sl.jsxs=Eg;dg.exports=sl;var d=dg.exports,Uu={},Tg={exports:{}},Ct={},Sg={exports:{}},Ig={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(U,Q){var J=U.length;U.push(Q);e:for(;0<J;){var me=J-1>>>1,Te=U[me];if(0<s(Te,Q))U[me]=Q,U[J]=Te,J=me;else break e}}function n(U){return U.length===0?null:U[0]}function r(U){if(U.length===0)return null;var Q=U[0],J=U.pop();if(J!==Q){U[0]=J;e:for(var me=0,Te=U.length,X=Te>>>1;me<X;){var de=2*(me+1)-1,Ge=U[de],ue=de+1,pt=U[ue];if(0>s(Ge,J))ue<Te&&0>s(pt,Ge)?(U[me]=pt,U[ue]=J,me=ue):(U[me]=Ge,U[de]=J,me=de);else if(ue<Te&&0>s(pt,J))U[me]=pt,U[ue]=J,me=ue;else break e}}return Q}function s(U,Q){var J=U.sortIndex-Q.sortIndex;return J!==0?J:U.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var u=[],h=[],p=1,m=null,g=3,S=!1,C=!1,N=!1,D=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(U){for(var Q=n(h);Q!==null;){if(Q.callback===null)r(h);else if(Q.startTime<=U)r(h),Q.sortIndex=Q.expirationTime,e(u,Q);else break;Q=n(h)}}function V(U){if(N=!1,b(U),!C)if(n(u)!==null)C=!0,le(M);else{var Q=n(h);Q!==null&&Oe(V,Q.startTime-U)}}function M(U,Q){C=!1,N&&(N=!1,_(v),v=-1),S=!0;var J=g;try{for(b(Q),m=n(u);m!==null&&(!(m.expirationTime>Q)||U&&!I());){var me=m.callback;if(typeof me=="function"){m.callback=null,g=m.priorityLevel;var Te=me(m.expirationTime<=Q);Q=t.unstable_now(),typeof Te=="function"?m.callback=Te:m===n(u)&&r(u),b(Q)}else r(u);m=n(u)}if(m!==null)var X=!0;else{var de=n(h);de!==null&&Oe(V,de.startTime-Q),X=!1}return X}finally{m=null,g=J,S=!1}}var F=!1,E=null,v=-1,T=5,k=-1;function I(){return!(t.unstable_now()-k<T)}function A(){if(E!==null){var U=t.unstable_now();k=U;var Q=!0;try{Q=E(!0,U)}finally{Q?w():(F=!1,E=null)}}else F=!1}var w;if(typeof x=="function")w=function(){x(A)};else if(typeof MessageChannel<"u"){var ee=new MessageChannel,Ve=ee.port2;ee.port1.onmessage=A,w=function(){Ve.postMessage(null)}}else w=function(){D(A,0)};function le(U){E=U,F||(F=!0,w())}function Oe(U,Q){v=D(function(){U(t.unstable_now())},Q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(U){U.callback=null},t.unstable_continueExecution=function(){C||S||(C=!0,le(M))},t.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<U?Math.floor(1e3/U):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(U){switch(g){case 1:case 2:case 3:var Q=3;break;default:Q=g}var J=g;g=Q;try{return U()}finally{g=J}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(U,Q){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var J=g;g=U;try{return Q()}finally{g=J}},t.unstable_scheduleCallback=function(U,Q,J){var me=t.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?me+J:me):J=me,U){case 1:var Te=-1;break;case 2:Te=250;break;case 5:Te=1073741823;break;case 4:Te=1e4;break;default:Te=5e3}return Te=J+Te,U={id:p++,callback:Q,priorityLevel:U,startTime:J,expirationTime:Te,sortIndex:-1},J>me?(U.sortIndex=J,e(h,U),n(u)===null&&U===n(h)&&(N?(_(v),v=-1):N=!0,Oe(V,J-me))):(U.sortIndex=Te,e(u,U),C||S||(C=!0,le(M))),U},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(U){var Q=g;return function(){var J=g;g=Q;try{return U.apply(this,arguments)}finally{g=J}}}})(Ig);Sg.exports=Ig;var P1=Sg.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var V1=H,bt=P1;function O(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var kg=new Set,Vi={};function Fr(t,e){vs(t,e),vs(t+"Capture",e)}function vs(t,e){for(Vi[t]=e,t=0;t<e.length;t++)kg.add(e[t])}var yn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Bu=Object.prototype.hasOwnProperty,D1=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,qf={},Hf={};function j1(t){return Bu.call(Hf,t)?!0:Bu.call(qf,t)?!1:D1.test(t)?Hf[t]=!0:(qf[t]=!0,!1)}function L1(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function M1(t,e,n,r){if(e===null||typeof e>"u"||L1(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function mt(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Ze={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ze[t]=new mt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ze[e]=new mt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ze[t]=new mt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ze[t]=new mt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ze[t]=new mt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ze[t]=new mt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ze[t]=new mt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ze[t]=new mt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ze[t]=new mt(t,5,!1,t.toLowerCase(),null,!1,!1)});var uh=/[\-:]([a-z])/g;function ch(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(uh,ch);Ze[e]=new mt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(uh,ch);Ze[e]=new mt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(uh,ch);Ze[e]=new mt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ze[t]=new mt(t,1,!1,t.toLowerCase(),null,!1,!1)});Ze.xlinkHref=new mt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ze[t]=new mt(t,1,!1,t.toLowerCase(),null,!0,!0)});function hh(t,e,n,r){var s=Ze.hasOwnProperty(e)?Ze[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(M1(e,n,s,r)&&(n=null),r||s===null?j1(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Sn=V1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Po=Symbol.for("react.element"),Jr=Symbol.for("react.portal"),Zr=Symbol.for("react.fragment"),dh=Symbol.for("react.strict_mode"),$u=Symbol.for("react.profiler"),Ag=Symbol.for("react.provider"),bg=Symbol.for("react.context"),fh=Symbol.for("react.forward_ref"),qu=Symbol.for("react.suspense"),Hu=Symbol.for("react.suspense_list"),mh=Symbol.for("react.memo"),Pn=Symbol.for("react.lazy"),Cg=Symbol.for("react.offscreen"),Wf=Symbol.iterator;function ri(t){return t===null||typeof t!="object"?null:(t=Wf&&t[Wf]||t["@@iterator"],typeof t=="function"?t:null)}var ke=Object.assign,ou;function hi(t){if(ou===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);ou=e&&e[1]||""}return`
`+ou+t}var au=!1;function lu(t,e){if(!t||au)return"";au=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(h){var r=h}Reflect.construct(t,[],e)}else{try{e.call()}catch(h){r=h}t.call(e.prototype)}else{try{throw Error()}catch(h){r=h}t()}}catch(h){if(h&&r&&typeof h.stack=="string"){for(var s=h.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var u=`
`+s[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=l);break}}}finally{au=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?hi(t):""}function O1(t){switch(t.tag){case 5:return hi(t.type);case 16:return hi("Lazy");case 13:return hi("Suspense");case 19:return hi("SuspenseList");case 0:case 2:case 15:return t=lu(t.type,!1),t;case 11:return t=lu(t.type.render,!1),t;case 1:return t=lu(t.type,!0),t;default:return""}}function Wu(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Zr:return"Fragment";case Jr:return"Portal";case $u:return"Profiler";case dh:return"StrictMode";case qu:return"Suspense";case Hu:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case bg:return(t.displayName||"Context")+".Consumer";case Ag:return(t._context.displayName||"Context")+".Provider";case fh:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case mh:return e=t.displayName||null,e!==null?e:Wu(t.type)||"Memo";case Pn:e=t._payload,t=t._init;try{return Wu(t(e))}catch{}}return null}function F1(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Wu(e);case 8:return e===dh?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Jn(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Ng(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function z1(t){var e=Ng(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Vo(t){t._valueTracker||(t._valueTracker=z1(t))}function Rg(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Ng(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function ya(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Gu(t,e){var n=e.checked;return ke({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Gf(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Jn(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Pg(t,e){e=e.checked,e!=null&&hh(t,"checked",e,!1)}function Qu(t,e){Pg(t,e);var n=Jn(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Ku(t,e.type,n):e.hasOwnProperty("defaultValue")&&Ku(t,e.type,Jn(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Qf(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Ku(t,e,n){(e!=="number"||ya(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var di=Array.isArray;function cs(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Jn(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Yu(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(O(91));return ke({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Kf(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(O(92));if(di(n)){if(1<n.length)throw Error(O(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Jn(n)}}function Vg(t,e){var n=Jn(e.value),r=Jn(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Yf(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Dg(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Xu(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Dg(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Do,jg=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Do=Do||document.createElement("div"),Do.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Do.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Di(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var _i={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},U1=["Webkit","ms","Moz","O"];Object.keys(_i).forEach(function(t){U1.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),_i[e]=_i[t]})});function Lg(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||_i.hasOwnProperty(t)&&_i[t]?(""+e).trim():e+"px"}function Mg(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Lg(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var B1=ke({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ju(t,e){if(e){if(B1[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(O(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(O(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(O(61))}if(e.style!=null&&typeof e.style!="object")throw Error(O(62))}}function Zu(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ec=null;function ph(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var tc=null,hs=null,ds=null;function Xf(t){if(t=co(t)){if(typeof tc!="function")throw Error(O(280));var e=t.stateNode;e&&(e=ul(e),tc(t.stateNode,t.type,e))}}function Og(t){hs?ds?ds.push(t):ds=[t]:hs=t}function Fg(){if(hs){var t=hs,e=ds;if(ds=hs=null,Xf(t),e)for(t=0;t<e.length;t++)Xf(e[t])}}function zg(t,e){return t(e)}function Ug(){}var uu=!1;function Bg(t,e,n){if(uu)return t(e,n);uu=!0;try{return zg(t,e,n)}finally{uu=!1,(hs!==null||ds!==null)&&(Ug(),Fg())}}function ji(t,e){var n=t.stateNode;if(n===null)return null;var r=ul(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(O(231,e,typeof n));return n}var nc=!1;if(yn)try{var si={};Object.defineProperty(si,"passive",{get:function(){nc=!0}}),window.addEventListener("test",si,si),window.removeEventListener("test",si,si)}catch{nc=!1}function $1(t,e,n,r,s,i,o,l,u){var h=Array.prototype.slice.call(arguments,3);try{e.apply(n,h)}catch(p){this.onError(p)}}var wi=!1,va=null,_a=!1,rc=null,q1={onError:function(t){wi=!0,va=t}};function H1(t,e,n,r,s,i,o,l,u){wi=!1,va=null,$1.apply(q1,arguments)}function W1(t,e,n,r,s,i,o,l,u){if(H1.apply(this,arguments),wi){if(wi){var h=va;wi=!1,va=null}else throw Error(O(198));_a||(_a=!0,rc=h)}}function zr(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function $g(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Jf(t){if(zr(t)!==t)throw Error(O(188))}function G1(t){var e=t.alternate;if(!e){if(e=zr(t),e===null)throw Error(O(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Jf(s),t;if(i===r)return Jf(s),e;i=i.sibling}throw Error(O(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o)throw Error(O(189))}}if(n.alternate!==r)throw Error(O(190))}if(n.tag!==3)throw Error(O(188));return n.stateNode.current===n?t:e}function qg(t){return t=G1(t),t!==null?Hg(t):null}function Hg(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Hg(t);if(e!==null)return e;t=t.sibling}return null}var Wg=bt.unstable_scheduleCallback,Zf=bt.unstable_cancelCallback,Q1=bt.unstable_shouldYield,K1=bt.unstable_requestPaint,Re=bt.unstable_now,Y1=bt.unstable_getCurrentPriorityLevel,gh=bt.unstable_ImmediatePriority,Gg=bt.unstable_UserBlockingPriority,wa=bt.unstable_NormalPriority,X1=bt.unstable_LowPriority,Qg=bt.unstable_IdlePriority,il=null,nn=null;function J1(t){if(nn&&typeof nn.onCommitFiberRoot=="function")try{nn.onCommitFiberRoot(il,t,void 0,(t.current.flags&128)===128)}catch{}}var Ht=Math.clz32?Math.clz32:tw,Z1=Math.log,ew=Math.LN2;function tw(t){return t>>>=0,t===0?32:31-(Z1(t)/ew|0)|0}var jo=64,Lo=4194304;function fi(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function xa(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~s;l!==0?r=fi(l):(i&=o,i!==0&&(r=fi(i)))}else o=n&~s,o!==0?r=fi(o):i!==0&&(r=fi(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Ht(e),s=1<<n,r|=t[n],e&=~s;return r}function nw(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function rw(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Ht(i),l=1<<o,u=s[o];u===-1?(!(l&n)||l&r)&&(s[o]=nw(l,e)):u<=e&&(t.expiredLanes|=l),i&=~l}}function sc(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Kg(){var t=jo;return jo<<=1,!(jo&4194240)&&(jo=64),t}function cu(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function lo(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Ht(e),t[e]=n}function sw(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Ht(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function yh(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Ht(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var he=0;function Yg(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Xg,vh,Jg,Zg,ey,ic=!1,Mo=[],Fn=null,zn=null,Un=null,Li=new Map,Mi=new Map,Dn=[],iw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function em(t,e){switch(t){case"focusin":case"focusout":Fn=null;break;case"dragenter":case"dragleave":zn=null;break;case"mouseover":case"mouseout":Un=null;break;case"pointerover":case"pointerout":Li.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Mi.delete(e.pointerId)}}function ii(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=co(e),e!==null&&vh(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function ow(t,e,n,r,s){switch(e){case"focusin":return Fn=ii(Fn,t,e,n,r,s),!0;case"dragenter":return zn=ii(zn,t,e,n,r,s),!0;case"mouseover":return Un=ii(Un,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Li.set(i,ii(Li.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Mi.set(i,ii(Mi.get(i)||null,t,e,n,r,s)),!0}return!1}function ty(t){var e=xr(t.target);if(e!==null){var n=zr(e);if(n!==null){if(e=n.tag,e===13){if(e=$g(n),e!==null){t.blockedOn=e,ey(t.priority,function(){Jg(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ta(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=oc(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);ec=r,n.target.dispatchEvent(r),ec=null}else return e=co(n),e!==null&&vh(e),t.blockedOn=n,!1;e.shift()}return!0}function tm(t,e,n){ta(t)&&n.delete(e)}function aw(){ic=!1,Fn!==null&&ta(Fn)&&(Fn=null),zn!==null&&ta(zn)&&(zn=null),Un!==null&&ta(Un)&&(Un=null),Li.forEach(tm),Mi.forEach(tm)}function oi(t,e){t.blockedOn===e&&(t.blockedOn=null,ic||(ic=!0,bt.unstable_scheduleCallback(bt.unstable_NormalPriority,aw)))}function Oi(t){function e(s){return oi(s,t)}if(0<Mo.length){oi(Mo[0],t);for(var n=1;n<Mo.length;n++){var r=Mo[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Fn!==null&&oi(Fn,t),zn!==null&&oi(zn,t),Un!==null&&oi(Un,t),Li.forEach(e),Mi.forEach(e),n=0;n<Dn.length;n++)r=Dn[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Dn.length&&(n=Dn[0],n.blockedOn===null);)ty(n),n.blockedOn===null&&Dn.shift()}var fs=Sn.ReactCurrentBatchConfig,Ea=!0;function lw(t,e,n,r){var s=he,i=fs.transition;fs.transition=null;try{he=1,_h(t,e,n,r)}finally{he=s,fs.transition=i}}function uw(t,e,n,r){var s=he,i=fs.transition;fs.transition=null;try{he=4,_h(t,e,n,r)}finally{he=s,fs.transition=i}}function _h(t,e,n,r){if(Ea){var s=oc(t,e,n,r);if(s===null)wu(t,e,r,Ta,n),em(t,r);else if(ow(s,t,e,n,r))r.stopPropagation();else if(em(t,r),e&4&&-1<iw.indexOf(t)){for(;s!==null;){var i=co(s);if(i!==null&&Xg(i),i=oc(t,e,n,r),i===null&&wu(t,e,r,Ta,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else wu(t,e,r,null,n)}}var Ta=null;function oc(t,e,n,r){if(Ta=null,t=ph(r),t=xr(t),t!==null)if(e=zr(t),e===null)t=null;else if(n=e.tag,n===13){if(t=$g(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ta=t,null}function ny(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Y1()){case gh:return 1;case Gg:return 4;case wa:case X1:return 16;case Qg:return 536870912;default:return 16}default:return 16}}var Ln=null,wh=null,na=null;function ry(){if(na)return na;var t,e=wh,n=e.length,r,s="value"in Ln?Ln.value:Ln.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return na=s.slice(t,1<r?1-r:void 0)}function ra(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Oo(){return!0}function nm(){return!1}function Nt(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Oo:nm,this.isPropagationStopped=nm,this}return ke(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Oo)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Oo)},persist:function(){},isPersistent:Oo}),e}var Vs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xh=Nt(Vs),uo=ke({},Vs,{view:0,detail:0}),cw=Nt(uo),hu,du,ai,ol=ke({},uo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Eh,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ai&&(ai&&t.type==="mousemove"?(hu=t.screenX-ai.screenX,du=t.screenY-ai.screenY):du=hu=0,ai=t),hu)},movementY:function(t){return"movementY"in t?t.movementY:du}}),rm=Nt(ol),hw=ke({},ol,{dataTransfer:0}),dw=Nt(hw),fw=ke({},uo,{relatedTarget:0}),fu=Nt(fw),mw=ke({},Vs,{animationName:0,elapsedTime:0,pseudoElement:0}),pw=Nt(mw),gw=ke({},Vs,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),yw=Nt(gw),vw=ke({},Vs,{data:0}),sm=Nt(vw),_w={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ww={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xw={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ew(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=xw[t])?!!e[t]:!1}function Eh(){return Ew}var Tw=ke({},uo,{key:function(t){if(t.key){var e=_w[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ra(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?ww[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Eh,charCode:function(t){return t.type==="keypress"?ra(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ra(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Sw=Nt(Tw),Iw=ke({},ol,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),im=Nt(Iw),kw=ke({},uo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Eh}),Aw=Nt(kw),bw=ke({},Vs,{propertyName:0,elapsedTime:0,pseudoElement:0}),Cw=Nt(bw),Nw=ke({},ol,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Rw=Nt(Nw),Pw=[9,13,27,32],Th=yn&&"CompositionEvent"in window,xi=null;yn&&"documentMode"in document&&(xi=document.documentMode);var Vw=yn&&"TextEvent"in window&&!xi,sy=yn&&(!Th||xi&&8<xi&&11>=xi),om=" ",am=!1;function iy(t,e){switch(t){case"keyup":return Pw.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function oy(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var es=!1;function Dw(t,e){switch(t){case"compositionend":return oy(e);case"keypress":return e.which!==32?null:(am=!0,om);case"textInput":return t=e.data,t===om&&am?null:t;default:return null}}function jw(t,e){if(es)return t==="compositionend"||!Th&&iy(t,e)?(t=ry(),na=wh=Ln=null,es=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return sy&&e.locale!=="ko"?null:e.data;default:return null}}var Lw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function lm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Lw[t.type]:e==="textarea"}function ay(t,e,n,r){Og(r),e=Sa(e,"onChange"),0<e.length&&(n=new xh("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Ei=null,Fi=null;function Mw(t){vy(t,0)}function al(t){var e=rs(t);if(Rg(e))return t}function Ow(t,e){if(t==="change")return e}var ly=!1;if(yn){var mu;if(yn){var pu="oninput"in document;if(!pu){var um=document.createElement("div");um.setAttribute("oninput","return;"),pu=typeof um.oninput=="function"}mu=pu}else mu=!1;ly=mu&&(!document.documentMode||9<document.documentMode)}function cm(){Ei&&(Ei.detachEvent("onpropertychange",uy),Fi=Ei=null)}function uy(t){if(t.propertyName==="value"&&al(Fi)){var e=[];ay(e,Fi,t,ph(t)),Bg(Mw,e)}}function Fw(t,e,n){t==="focusin"?(cm(),Ei=e,Fi=n,Ei.attachEvent("onpropertychange",uy)):t==="focusout"&&cm()}function zw(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return al(Fi)}function Uw(t,e){if(t==="click")return al(e)}function Bw(t,e){if(t==="input"||t==="change")return al(e)}function $w(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Gt=typeof Object.is=="function"?Object.is:$w;function zi(t,e){if(Gt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Bu.call(e,s)||!Gt(t[s],e[s]))return!1}return!0}function hm(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function dm(t,e){var n=hm(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=hm(n)}}function cy(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?cy(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function hy(){for(var t=window,e=ya();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=ya(t.document)}return e}function Sh(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function qw(t){var e=hy(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&cy(n.ownerDocument.documentElement,n)){if(r!==null&&Sh(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=dm(n,i);var o=dm(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Hw=yn&&"documentMode"in document&&11>=document.documentMode,ts=null,ac=null,Ti=null,lc=!1;function fm(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;lc||ts==null||ts!==ya(r)||(r=ts,"selectionStart"in r&&Sh(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ti&&zi(Ti,r)||(Ti=r,r=Sa(ac,"onSelect"),0<r.length&&(e=new xh("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=ts)))}function Fo(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ns={animationend:Fo("Animation","AnimationEnd"),animationiteration:Fo("Animation","AnimationIteration"),animationstart:Fo("Animation","AnimationStart"),transitionend:Fo("Transition","TransitionEnd")},gu={},dy={};yn&&(dy=document.createElement("div").style,"AnimationEvent"in window||(delete ns.animationend.animation,delete ns.animationiteration.animation,delete ns.animationstart.animation),"TransitionEvent"in window||delete ns.transitionend.transition);function ll(t){if(gu[t])return gu[t];if(!ns[t])return t;var e=ns[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in dy)return gu[t]=e[n];return t}var fy=ll("animationend"),my=ll("animationiteration"),py=ll("animationstart"),gy=ll("transitionend"),yy=new Map,mm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ar(t,e){yy.set(t,e),Fr(e,[t])}for(var yu=0;yu<mm.length;yu++){var vu=mm[yu],Ww=vu.toLowerCase(),Gw=vu[0].toUpperCase()+vu.slice(1);ar(Ww,"on"+Gw)}ar(fy,"onAnimationEnd");ar(my,"onAnimationIteration");ar(py,"onAnimationStart");ar("dblclick","onDoubleClick");ar("focusin","onFocus");ar("focusout","onBlur");ar(gy,"onTransitionEnd");vs("onMouseEnter",["mouseout","mouseover"]);vs("onMouseLeave",["mouseout","mouseover"]);vs("onPointerEnter",["pointerout","pointerover"]);vs("onPointerLeave",["pointerout","pointerover"]);Fr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Fr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Fr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Fr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Fr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Fr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var mi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Qw=new Set("cancel close invalid load scroll toggle".split(" ").concat(mi));function pm(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,W1(r,e,void 0,t),t.currentTarget=null}function vy(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],u=l.instance,h=l.currentTarget;if(l=l.listener,u!==i&&s.isPropagationStopped())break e;pm(s,l,h),i=u}else for(o=0;o<r.length;o++){if(l=r[o],u=l.instance,h=l.currentTarget,l=l.listener,u!==i&&s.isPropagationStopped())break e;pm(s,l,h),i=u}}}if(_a)throw t=rc,_a=!1,rc=null,t}function ve(t,e){var n=e[fc];n===void 0&&(n=e[fc]=new Set);var r=t+"__bubble";n.has(r)||(_y(e,t,2,!1),n.add(r))}function _u(t,e,n){var r=0;e&&(r|=4),_y(n,t,r,e)}var zo="_reactListening"+Math.random().toString(36).slice(2);function Ui(t){if(!t[zo]){t[zo]=!0,kg.forEach(function(n){n!=="selectionchange"&&(Qw.has(n)||_u(n,!1,t),_u(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[zo]||(e[zo]=!0,_u("selectionchange",!1,e))}}function _y(t,e,n,r){switch(ny(e)){case 1:var s=lw;break;case 4:s=uw;break;default:s=_h}n=s.bind(null,e,n,t),s=void 0,!nc||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function wu(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;o=o.return}for(;l!==null;){if(o=xr(l),o===null)return;if(u=o.tag,u===5||u===6){r=i=o;continue e}l=l.parentNode}}r=r.return}Bg(function(){var h=i,p=ph(n),m=[];e:{var g=yy.get(t);if(g!==void 0){var S=xh,C=t;switch(t){case"keypress":if(ra(n)===0)break e;case"keydown":case"keyup":S=Sw;break;case"focusin":C="focus",S=fu;break;case"focusout":C="blur",S=fu;break;case"beforeblur":case"afterblur":S=fu;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":S=rm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":S=dw;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":S=Aw;break;case fy:case my:case py:S=pw;break;case gy:S=Cw;break;case"scroll":S=cw;break;case"wheel":S=Rw;break;case"copy":case"cut":case"paste":S=yw;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":S=im}var N=(e&4)!==0,D=!N&&t==="scroll",_=N?g!==null?g+"Capture":null:g;N=[];for(var x=h,b;x!==null;){b=x;var V=b.stateNode;if(b.tag===5&&V!==null&&(b=V,_!==null&&(V=ji(x,_),V!=null&&N.push(Bi(x,V,b)))),D)break;x=x.return}0<N.length&&(g=new S(g,C,null,n,p),m.push({event:g,listeners:N}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",S=t==="mouseout"||t==="pointerout",g&&n!==ec&&(C=n.relatedTarget||n.fromElement)&&(xr(C)||C[vn]))break e;if((S||g)&&(g=p.window===p?p:(g=p.ownerDocument)?g.defaultView||g.parentWindow:window,S?(C=n.relatedTarget||n.toElement,S=h,C=C?xr(C):null,C!==null&&(D=zr(C),C!==D||C.tag!==5&&C.tag!==6)&&(C=null)):(S=null,C=h),S!==C)){if(N=rm,V="onMouseLeave",_="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(N=im,V="onPointerLeave",_="onPointerEnter",x="pointer"),D=S==null?g:rs(S),b=C==null?g:rs(C),g=new N(V,x+"leave",S,n,p),g.target=D,g.relatedTarget=b,V=null,xr(p)===h&&(N=new N(_,x+"enter",C,n,p),N.target=b,N.relatedTarget=D,V=N),D=V,S&&C)t:{for(N=S,_=C,x=0,b=N;b;b=Gr(b))x++;for(b=0,V=_;V;V=Gr(V))b++;for(;0<x-b;)N=Gr(N),x--;for(;0<b-x;)_=Gr(_),b--;for(;x--;){if(N===_||_!==null&&N===_.alternate)break t;N=Gr(N),_=Gr(_)}N=null}else N=null;S!==null&&gm(m,g,S,N,!1),C!==null&&D!==null&&gm(m,D,C,N,!0)}}e:{if(g=h?rs(h):window,S=g.nodeName&&g.nodeName.toLowerCase(),S==="select"||S==="input"&&g.type==="file")var M=Ow;else if(lm(g))if(ly)M=Bw;else{M=zw;var F=Fw}else(S=g.nodeName)&&S.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(M=Uw);if(M&&(M=M(t,h))){ay(m,M,n,p);break e}F&&F(t,g,h),t==="focusout"&&(F=g._wrapperState)&&F.controlled&&g.type==="number"&&Ku(g,"number",g.value)}switch(F=h?rs(h):window,t){case"focusin":(lm(F)||F.contentEditable==="true")&&(ts=F,ac=h,Ti=null);break;case"focusout":Ti=ac=ts=null;break;case"mousedown":lc=!0;break;case"contextmenu":case"mouseup":case"dragend":lc=!1,fm(m,n,p);break;case"selectionchange":if(Hw)break;case"keydown":case"keyup":fm(m,n,p)}var E;if(Th)e:{switch(t){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else es?iy(t,n)&&(v="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(v="onCompositionStart");v&&(sy&&n.locale!=="ko"&&(es||v!=="onCompositionStart"?v==="onCompositionEnd"&&es&&(E=ry()):(Ln=p,wh="value"in Ln?Ln.value:Ln.textContent,es=!0)),F=Sa(h,v),0<F.length&&(v=new sm(v,t,null,n,p),m.push({event:v,listeners:F}),E?v.data=E:(E=oy(n),E!==null&&(v.data=E)))),(E=Vw?Dw(t,n):jw(t,n))&&(h=Sa(h,"onBeforeInput"),0<h.length&&(p=new sm("onBeforeInput","beforeinput",null,n,p),m.push({event:p,listeners:h}),p.data=E))}vy(m,e)})}function Bi(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Sa(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=ji(t,n),i!=null&&r.unshift(Bi(t,i,s)),i=ji(t,e),i!=null&&r.push(Bi(t,i,s))),t=t.return}return r}function Gr(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function gm(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var l=n,u=l.alternate,h=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&h!==null&&(l=h,s?(u=ji(n,i),u!=null&&o.unshift(Bi(n,u,l))):s||(u=ji(n,i),u!=null&&o.push(Bi(n,u,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var Kw=/\r\n?/g,Yw=/\u0000|\uFFFD/g;function ym(t){return(typeof t=="string"?t:""+t).replace(Kw,`
`).replace(Yw,"")}function Uo(t,e,n){if(e=ym(e),ym(t)!==e&&n)throw Error(O(425))}function Ia(){}var uc=null,cc=null;function hc(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var dc=typeof setTimeout=="function"?setTimeout:void 0,Xw=typeof clearTimeout=="function"?clearTimeout:void 0,vm=typeof Promise=="function"?Promise:void 0,Jw=typeof queueMicrotask=="function"?queueMicrotask:typeof vm<"u"?function(t){return vm.resolve(null).then(t).catch(Zw)}:dc;function Zw(t){setTimeout(function(){throw t})}function xu(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Oi(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Oi(e)}function Bn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function _m(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ds=Math.random().toString(36).slice(2),tn="__reactFiber$"+Ds,$i="__reactProps$"+Ds,vn="__reactContainer$"+Ds,fc="__reactEvents$"+Ds,ex="__reactListeners$"+Ds,tx="__reactHandles$"+Ds;function xr(t){var e=t[tn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[vn]||n[tn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=_m(t);t!==null;){if(n=t[tn])return n;t=_m(t)}return e}t=n,n=t.parentNode}return null}function co(t){return t=t[tn]||t[vn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function rs(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(O(33))}function ul(t){return t[$i]||null}var mc=[],ss=-1;function lr(t){return{current:t}}function we(t){0>ss||(t.current=mc[ss],mc[ss]=null,ss--)}function ge(t,e){ss++,mc[ss]=t.current,t.current=e}var Zn={},lt=lr(Zn),wt=lr(!1),Rr=Zn;function _s(t,e){var n=t.type.contextTypes;if(!n)return Zn;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function xt(t){return t=t.childContextTypes,t!=null}function ka(){we(wt),we(lt)}function wm(t,e,n){if(lt.current!==Zn)throw Error(O(168));ge(lt,e),ge(wt,n)}function wy(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(O(108,F1(t)||"Unknown",s));return ke({},n,r)}function Aa(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Zn,Rr=lt.current,ge(lt,t),ge(wt,wt.current),!0}function xm(t,e,n){var r=t.stateNode;if(!r)throw Error(O(169));n?(t=wy(t,e,Rr),r.__reactInternalMemoizedMergedChildContext=t,we(wt),we(lt),ge(lt,t)):we(wt),ge(wt,n)}var fn=null,cl=!1,Eu=!1;function xy(t){fn===null?fn=[t]:fn.push(t)}function nx(t){cl=!0,xy(t)}function ur(){if(!Eu&&fn!==null){Eu=!0;var t=0,e=he;try{var n=fn;for(he=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}fn=null,cl=!1}catch(s){throw fn!==null&&(fn=fn.slice(t+1)),Wg(gh,ur),s}finally{he=e,Eu=!1}}return null}var is=[],os=0,ba=null,Ca=0,Rt=[],Pt=0,Pr=null,mn=1,pn="";function vr(t,e){is[os++]=Ca,is[os++]=ba,ba=t,Ca=e}function Ey(t,e,n){Rt[Pt++]=mn,Rt[Pt++]=pn,Rt[Pt++]=Pr,Pr=t;var r=mn;t=pn;var s=32-Ht(r)-1;r&=~(1<<s),n+=1;var i=32-Ht(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,mn=1<<32-Ht(e)+s|n<<s|r,pn=i+t}else mn=1<<i|n<<s|r,pn=t}function Ih(t){t.return!==null&&(vr(t,1),Ey(t,1,0))}function kh(t){for(;t===ba;)ba=is[--os],is[os]=null,Ca=is[--os],is[os]=null;for(;t===Pr;)Pr=Rt[--Pt],Rt[Pt]=null,pn=Rt[--Pt],Rt[Pt]=null,mn=Rt[--Pt],Rt[Pt]=null}var At=null,It=null,xe=!1,$t=null;function Ty(t,e){var n=Dt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Em(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,At=t,It=Bn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,At=t,It=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Pr!==null?{id:mn,overflow:pn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Dt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,At=t,It=null,!0):!1;default:return!1}}function pc(t){return(t.mode&1)!==0&&(t.flags&128)===0}function gc(t){if(xe){var e=It;if(e){var n=e;if(!Em(t,e)){if(pc(t))throw Error(O(418));e=Bn(n.nextSibling);var r=At;e&&Em(t,e)?Ty(r,n):(t.flags=t.flags&-4097|2,xe=!1,At=t)}}else{if(pc(t))throw Error(O(418));t.flags=t.flags&-4097|2,xe=!1,At=t}}}function Tm(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;At=t}function Bo(t){if(t!==At)return!1;if(!xe)return Tm(t),xe=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!hc(t.type,t.memoizedProps)),e&&(e=It)){if(pc(t))throw Sy(),Error(O(418));for(;e;)Ty(t,e),e=Bn(e.nextSibling)}if(Tm(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(O(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){It=Bn(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}It=null}}else It=At?Bn(t.stateNode.nextSibling):null;return!0}function Sy(){for(var t=It;t;)t=Bn(t.nextSibling)}function ws(){It=At=null,xe=!1}function Ah(t){$t===null?$t=[t]:$t.push(t)}var rx=Sn.ReactCurrentBatchConfig;function li(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(O(309));var r=n.stateNode}if(!r)throw Error(O(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(O(284));if(!n._owner)throw Error(O(290,t))}return t}function $o(t,e){throw t=Object.prototype.toString.call(e),Error(O(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Sm(t){var e=t._init;return e(t._payload)}function Iy(t){function e(_,x){if(t){var b=_.deletions;b===null?(_.deletions=[x],_.flags|=16):b.push(x)}}function n(_,x){if(!t)return null;for(;x!==null;)e(_,x),x=x.sibling;return null}function r(_,x){for(_=new Map;x!==null;)x.key!==null?_.set(x.key,x):_.set(x.index,x),x=x.sibling;return _}function s(_,x){return _=Wn(_,x),_.index=0,_.sibling=null,_}function i(_,x,b){return _.index=b,t?(b=_.alternate,b!==null?(b=b.index,b<x?(_.flags|=2,x):b):(_.flags|=2,x)):(_.flags|=1048576,x)}function o(_){return t&&_.alternate===null&&(_.flags|=2),_}function l(_,x,b,V){return x===null||x.tag!==6?(x=Cu(b,_.mode,V),x.return=_,x):(x=s(x,b),x.return=_,x)}function u(_,x,b,V){var M=b.type;return M===Zr?p(_,x,b.props.children,V,b.key):x!==null&&(x.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===Pn&&Sm(M)===x.type)?(V=s(x,b.props),V.ref=li(_,x,b),V.return=_,V):(V=ca(b.type,b.key,b.props,null,_.mode,V),V.ref=li(_,x,b),V.return=_,V)}function h(_,x,b,V){return x===null||x.tag!==4||x.stateNode.containerInfo!==b.containerInfo||x.stateNode.implementation!==b.implementation?(x=Nu(b,_.mode,V),x.return=_,x):(x=s(x,b.children||[]),x.return=_,x)}function p(_,x,b,V,M){return x===null||x.tag!==7?(x=Ar(b,_.mode,V,M),x.return=_,x):(x=s(x,b),x.return=_,x)}function m(_,x,b){if(typeof x=="string"&&x!==""||typeof x=="number")return x=Cu(""+x,_.mode,b),x.return=_,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Po:return b=ca(x.type,x.key,x.props,null,_.mode,b),b.ref=li(_,null,x),b.return=_,b;case Jr:return x=Nu(x,_.mode,b),x.return=_,x;case Pn:var V=x._init;return m(_,V(x._payload),b)}if(di(x)||ri(x))return x=Ar(x,_.mode,b,null),x.return=_,x;$o(_,x)}return null}function g(_,x,b,V){var M=x!==null?x.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return M!==null?null:l(_,x,""+b,V);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Po:return b.key===M?u(_,x,b,V):null;case Jr:return b.key===M?h(_,x,b,V):null;case Pn:return M=b._init,g(_,x,M(b._payload),V)}if(di(b)||ri(b))return M!==null?null:p(_,x,b,V,null);$o(_,b)}return null}function S(_,x,b,V,M){if(typeof V=="string"&&V!==""||typeof V=="number")return _=_.get(b)||null,l(x,_,""+V,M);if(typeof V=="object"&&V!==null){switch(V.$$typeof){case Po:return _=_.get(V.key===null?b:V.key)||null,u(x,_,V,M);case Jr:return _=_.get(V.key===null?b:V.key)||null,h(x,_,V,M);case Pn:var F=V._init;return S(_,x,b,F(V._payload),M)}if(di(V)||ri(V))return _=_.get(b)||null,p(x,_,V,M,null);$o(x,V)}return null}function C(_,x,b,V){for(var M=null,F=null,E=x,v=x=0,T=null;E!==null&&v<b.length;v++){E.index>v?(T=E,E=null):T=E.sibling;var k=g(_,E,b[v],V);if(k===null){E===null&&(E=T);break}t&&E&&k.alternate===null&&e(_,E),x=i(k,x,v),F===null?M=k:F.sibling=k,F=k,E=T}if(v===b.length)return n(_,E),xe&&vr(_,v),M;if(E===null){for(;v<b.length;v++)E=m(_,b[v],V),E!==null&&(x=i(E,x,v),F===null?M=E:F.sibling=E,F=E);return xe&&vr(_,v),M}for(E=r(_,E);v<b.length;v++)T=S(E,_,v,b[v],V),T!==null&&(t&&T.alternate!==null&&E.delete(T.key===null?v:T.key),x=i(T,x,v),F===null?M=T:F.sibling=T,F=T);return t&&E.forEach(function(I){return e(_,I)}),xe&&vr(_,v),M}function N(_,x,b,V){var M=ri(b);if(typeof M!="function")throw Error(O(150));if(b=M.call(b),b==null)throw Error(O(151));for(var F=M=null,E=x,v=x=0,T=null,k=b.next();E!==null&&!k.done;v++,k=b.next()){E.index>v?(T=E,E=null):T=E.sibling;var I=g(_,E,k.value,V);if(I===null){E===null&&(E=T);break}t&&E&&I.alternate===null&&e(_,E),x=i(I,x,v),F===null?M=I:F.sibling=I,F=I,E=T}if(k.done)return n(_,E),xe&&vr(_,v),M;if(E===null){for(;!k.done;v++,k=b.next())k=m(_,k.value,V),k!==null&&(x=i(k,x,v),F===null?M=k:F.sibling=k,F=k);return xe&&vr(_,v),M}for(E=r(_,E);!k.done;v++,k=b.next())k=S(E,_,v,k.value,V),k!==null&&(t&&k.alternate!==null&&E.delete(k.key===null?v:k.key),x=i(k,x,v),F===null?M=k:F.sibling=k,F=k);return t&&E.forEach(function(A){return e(_,A)}),xe&&vr(_,v),M}function D(_,x,b,V){if(typeof b=="object"&&b!==null&&b.type===Zr&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case Po:e:{for(var M=b.key,F=x;F!==null;){if(F.key===M){if(M=b.type,M===Zr){if(F.tag===7){n(_,F.sibling),x=s(F,b.props.children),x.return=_,_=x;break e}}else if(F.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===Pn&&Sm(M)===F.type){n(_,F.sibling),x=s(F,b.props),x.ref=li(_,F,b),x.return=_,_=x;break e}n(_,F);break}else e(_,F);F=F.sibling}b.type===Zr?(x=Ar(b.props.children,_.mode,V,b.key),x.return=_,_=x):(V=ca(b.type,b.key,b.props,null,_.mode,V),V.ref=li(_,x,b),V.return=_,_=V)}return o(_);case Jr:e:{for(F=b.key;x!==null;){if(x.key===F)if(x.tag===4&&x.stateNode.containerInfo===b.containerInfo&&x.stateNode.implementation===b.implementation){n(_,x.sibling),x=s(x,b.children||[]),x.return=_,_=x;break e}else{n(_,x);break}else e(_,x);x=x.sibling}x=Nu(b,_.mode,V),x.return=_,_=x}return o(_);case Pn:return F=b._init,D(_,x,F(b._payload),V)}if(di(b))return C(_,x,b,V);if(ri(b))return N(_,x,b,V);$o(_,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,x!==null&&x.tag===6?(n(_,x.sibling),x=s(x,b),x.return=_,_=x):(n(_,x),x=Cu(b,_.mode,V),x.return=_,_=x),o(_)):n(_,x)}return D}var xs=Iy(!0),ky=Iy(!1),Na=lr(null),Ra=null,as=null,bh=null;function Ch(){bh=as=Ra=null}function Nh(t){var e=Na.current;we(Na),t._currentValue=e}function yc(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function ms(t,e){Ra=t,bh=as=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(_t=!0),t.firstContext=null)}function Ot(t){var e=t._currentValue;if(bh!==t)if(t={context:t,memoizedValue:e,next:null},as===null){if(Ra===null)throw Error(O(308));as=t,Ra.dependencies={lanes:0,firstContext:t}}else as=as.next=t;return e}var Er=null;function Rh(t){Er===null?Er=[t]:Er.push(t)}function Ay(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Rh(e)):(n.next=s.next,s.next=n),e.interleaved=n,_n(t,r)}function _n(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Vn=!1;function Ph(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function by(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function gn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function $n(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ae&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,_n(t,n)}return s=r.interleaved,s===null?(e.next=e,Rh(r)):(e.next=s.next,s.next=e),r.interleaved=e,_n(t,n)}function sa(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,yh(t,n)}}function Im(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Pa(t,e,n,r){var s=t.updateQueue;Vn=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var u=l,h=u.next;u.next=null,o===null?i=h:o.next=h,o=u;var p=t.alternate;p!==null&&(p=p.updateQueue,l=p.lastBaseUpdate,l!==o&&(l===null?p.firstBaseUpdate=h:l.next=h,p.lastBaseUpdate=u))}if(i!==null){var m=s.baseState;o=0,p=h=u=null,l=i;do{var g=l.lane,S=l.eventTime;if((r&g)===g){p!==null&&(p=p.next={eventTime:S,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var C=t,N=l;switch(g=e,S=n,N.tag){case 1:if(C=N.payload,typeof C=="function"){m=C.call(S,m,g);break e}m=C;break e;case 3:C.flags=C.flags&-65537|128;case 0:if(C=N.payload,g=typeof C=="function"?C.call(S,m,g):C,g==null)break e;m=ke({},m,g);break e;case 2:Vn=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,g=s.effects,g===null?s.effects=[l]:g.push(l))}else S={eventTime:S,lane:g,tag:l.tag,payload:l.payload,callback:l.callback,next:null},p===null?(h=p=S,u=m):p=p.next=S,o|=g;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;g=l,l=g.next,g.next=null,s.lastBaseUpdate=g,s.shared.pending=null}}while(!0);if(p===null&&(u=m),s.baseState=u,s.firstBaseUpdate=h,s.lastBaseUpdate=p,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Dr|=o,t.lanes=o,t.memoizedState=m}}function km(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(O(191,s));s.call(r)}}}var ho={},rn=lr(ho),qi=lr(ho),Hi=lr(ho);function Tr(t){if(t===ho)throw Error(O(174));return t}function Vh(t,e){switch(ge(Hi,e),ge(qi,t),ge(rn,ho),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Xu(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Xu(e,t)}we(rn),ge(rn,e)}function Es(){we(rn),we(qi),we(Hi)}function Cy(t){Tr(Hi.current);var e=Tr(rn.current),n=Xu(e,t.type);e!==n&&(ge(qi,t),ge(rn,n))}function Dh(t){qi.current===t&&(we(rn),we(qi))}var Se=lr(0);function Va(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Tu=[];function jh(){for(var t=0;t<Tu.length;t++)Tu[t]._workInProgressVersionPrimary=null;Tu.length=0}var ia=Sn.ReactCurrentDispatcher,Su=Sn.ReactCurrentBatchConfig,Vr=0,Ie=null,ze=null,He=null,Da=!1,Si=!1,Wi=0,sx=0;function nt(){throw Error(O(321))}function Lh(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Gt(t[n],e[n]))return!1;return!0}function Mh(t,e,n,r,s,i){if(Vr=i,Ie=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ia.current=t===null||t.memoizedState===null?lx:ux,t=n(r,s),Si){i=0;do{if(Si=!1,Wi=0,25<=i)throw Error(O(301));i+=1,He=ze=null,e.updateQueue=null,ia.current=cx,t=n(r,s)}while(Si)}if(ia.current=ja,e=ze!==null&&ze.next!==null,Vr=0,He=ze=Ie=null,Da=!1,e)throw Error(O(300));return t}function Oh(){var t=Wi!==0;return Wi=0,t}function Zt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return He===null?Ie.memoizedState=He=t:He=He.next=t,He}function Ft(){if(ze===null){var t=Ie.alternate;t=t!==null?t.memoizedState:null}else t=ze.next;var e=He===null?Ie.memoizedState:He.next;if(e!==null)He=e,ze=t;else{if(t===null)throw Error(O(310));ze=t,t={memoizedState:ze.memoizedState,baseState:ze.baseState,baseQueue:ze.baseQueue,queue:ze.queue,next:null},He===null?Ie.memoizedState=He=t:He=He.next=t}return He}function Gi(t,e){return typeof e=="function"?e(t):e}function Iu(t){var e=Ft(),n=e.queue;if(n===null)throw Error(O(311));n.lastRenderedReducer=t;var r=ze,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=o=null,u=null,h=i;do{var p=h.lane;if((Vr&p)===p)u!==null&&(u=u.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),r=h.hasEagerState?h.eagerState:t(r,h.action);else{var m={lane:p,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};u===null?(l=u=m,o=r):u=u.next=m,Ie.lanes|=p,Dr|=p}h=h.next}while(h!==null&&h!==i);u===null?o=r:u.next=l,Gt(r,e.memoizedState)||(_t=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Ie.lanes|=i,Dr|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function ku(t){var e=Ft(),n=e.queue;if(n===null)throw Error(O(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);Gt(i,e.memoizedState)||(_t=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function Ny(){}function Ry(t,e){var n=Ie,r=Ft(),s=e(),i=!Gt(r.memoizedState,s);if(i&&(r.memoizedState=s,_t=!0),r=r.queue,Fh(Dy.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||He!==null&&He.memoizedState.tag&1){if(n.flags|=2048,Qi(9,Vy.bind(null,n,r,s,e),void 0,null),We===null)throw Error(O(349));Vr&30||Py(n,e,s)}return s}function Py(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ie.updateQueue,e===null?(e={lastEffect:null,stores:null},Ie.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Vy(t,e,n,r){e.value=n,e.getSnapshot=r,jy(e)&&Ly(t)}function Dy(t,e,n){return n(function(){jy(e)&&Ly(t)})}function jy(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Gt(t,n)}catch{return!0}}function Ly(t){var e=_n(t,1);e!==null&&Wt(e,t,1,-1)}function Am(t){var e=Zt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Gi,lastRenderedState:t},e.queue=t,t=t.dispatch=ax.bind(null,Ie,t),[e.memoizedState,t]}function Qi(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ie.updateQueue,e===null?(e={lastEffect:null,stores:null},Ie.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function My(){return Ft().memoizedState}function oa(t,e,n,r){var s=Zt();Ie.flags|=t,s.memoizedState=Qi(1|e,n,void 0,r===void 0?null:r)}function hl(t,e,n,r){var s=Ft();r=r===void 0?null:r;var i=void 0;if(ze!==null){var o=ze.memoizedState;if(i=o.destroy,r!==null&&Lh(r,o.deps)){s.memoizedState=Qi(e,n,i,r);return}}Ie.flags|=t,s.memoizedState=Qi(1|e,n,i,r)}function bm(t,e){return oa(8390656,8,t,e)}function Fh(t,e){return hl(2048,8,t,e)}function Oy(t,e){return hl(4,2,t,e)}function Fy(t,e){return hl(4,4,t,e)}function zy(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Uy(t,e,n){return n=n!=null?n.concat([t]):null,hl(4,4,zy.bind(null,e,t),n)}function zh(){}function By(t,e){var n=Ft();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Lh(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function $y(t,e){var n=Ft();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Lh(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function qy(t,e,n){return Vr&21?(Gt(n,e)||(n=Kg(),Ie.lanes|=n,Dr|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,_t=!0),t.memoizedState=n)}function ix(t,e){var n=he;he=n!==0&&4>n?n:4,t(!0);var r=Su.transition;Su.transition={};try{t(!1),e()}finally{he=n,Su.transition=r}}function Hy(){return Ft().memoizedState}function ox(t,e,n){var r=Hn(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Wy(t))Gy(e,n);else if(n=Ay(t,e,n,r),n!==null){var s=dt();Wt(n,t,r,s),Qy(n,e,r)}}function ax(t,e,n){var r=Hn(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Wy(t))Gy(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,l=i(o,n);if(s.hasEagerState=!0,s.eagerState=l,Gt(l,o)){var u=e.interleaved;u===null?(s.next=s,Rh(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}n=Ay(t,e,s,r),n!==null&&(s=dt(),Wt(n,t,r,s),Qy(n,e,r))}}function Wy(t){var e=t.alternate;return t===Ie||e!==null&&e===Ie}function Gy(t,e){Si=Da=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Qy(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,yh(t,n)}}var ja={readContext:Ot,useCallback:nt,useContext:nt,useEffect:nt,useImperativeHandle:nt,useInsertionEffect:nt,useLayoutEffect:nt,useMemo:nt,useReducer:nt,useRef:nt,useState:nt,useDebugValue:nt,useDeferredValue:nt,useTransition:nt,useMutableSource:nt,useSyncExternalStore:nt,useId:nt,unstable_isNewReconciler:!1},lx={readContext:Ot,useCallback:function(t,e){return Zt().memoizedState=[t,e===void 0?null:e],t},useContext:Ot,useEffect:bm,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,oa(4194308,4,zy.bind(null,e,t),n)},useLayoutEffect:function(t,e){return oa(4194308,4,t,e)},useInsertionEffect:function(t,e){return oa(4,2,t,e)},useMemo:function(t,e){var n=Zt();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Zt();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=ox.bind(null,Ie,t),[r.memoizedState,t]},useRef:function(t){var e=Zt();return t={current:t},e.memoizedState=t},useState:Am,useDebugValue:zh,useDeferredValue:function(t){return Zt().memoizedState=t},useTransition:function(){var t=Am(!1),e=t[0];return t=ix.bind(null,t[1]),Zt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ie,s=Zt();if(xe){if(n===void 0)throw Error(O(407));n=n()}else{if(n=e(),We===null)throw Error(O(349));Vr&30||Py(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,bm(Dy.bind(null,r,i,t),[t]),r.flags|=2048,Qi(9,Vy.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Zt(),e=We.identifierPrefix;if(xe){var n=pn,r=mn;n=(r&~(1<<32-Ht(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Wi++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=sx++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},ux={readContext:Ot,useCallback:By,useContext:Ot,useEffect:Fh,useImperativeHandle:Uy,useInsertionEffect:Oy,useLayoutEffect:Fy,useMemo:$y,useReducer:Iu,useRef:My,useState:function(){return Iu(Gi)},useDebugValue:zh,useDeferredValue:function(t){var e=Ft();return qy(e,ze.memoizedState,t)},useTransition:function(){var t=Iu(Gi)[0],e=Ft().memoizedState;return[t,e]},useMutableSource:Ny,useSyncExternalStore:Ry,useId:Hy,unstable_isNewReconciler:!1},cx={readContext:Ot,useCallback:By,useContext:Ot,useEffect:Fh,useImperativeHandle:Uy,useInsertionEffect:Oy,useLayoutEffect:Fy,useMemo:$y,useReducer:ku,useRef:My,useState:function(){return ku(Gi)},useDebugValue:zh,useDeferredValue:function(t){var e=Ft();return ze===null?e.memoizedState=t:qy(e,ze.memoizedState,t)},useTransition:function(){var t=ku(Gi)[0],e=Ft().memoizedState;return[t,e]},useMutableSource:Ny,useSyncExternalStore:Ry,useId:Hy,unstable_isNewReconciler:!1};function Ut(t,e){if(t&&t.defaultProps){e=ke({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function vc(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:ke({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var dl={isMounted:function(t){return(t=t._reactInternals)?zr(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=dt(),s=Hn(t),i=gn(r,s);i.payload=e,n!=null&&(i.callback=n),e=$n(t,i,s),e!==null&&(Wt(e,t,s,r),sa(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=dt(),s=Hn(t),i=gn(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=$n(t,i,s),e!==null&&(Wt(e,t,s,r),sa(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=dt(),r=Hn(t),s=gn(n,r);s.tag=2,e!=null&&(s.callback=e),e=$n(t,s,r),e!==null&&(Wt(e,t,r,n),sa(e,t,r))}};function Cm(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!zi(n,r)||!zi(s,i):!0}function Ky(t,e,n){var r=!1,s=Zn,i=e.contextType;return typeof i=="object"&&i!==null?i=Ot(i):(s=xt(e)?Rr:lt.current,r=e.contextTypes,i=(r=r!=null)?_s(t,s):Zn),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=dl,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Nm(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&dl.enqueueReplaceState(e,e.state,null)}function _c(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Ph(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Ot(i):(i=xt(e)?Rr:lt.current,s.context=_s(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(vc(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&dl.enqueueReplaceState(s,s.state,null),Pa(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Ts(t,e){try{var n="",r=e;do n+=O1(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Au(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function wc(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var hx=typeof WeakMap=="function"?WeakMap:Map;function Yy(t,e,n){n=gn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Ma||(Ma=!0,Nc=r),wc(t,e)},n}function Xy(t,e,n){n=gn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){wc(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){wc(t,e),typeof r!="function"&&(qn===null?qn=new Set([this]):qn.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Rm(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new hx;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=Ix.bind(null,t,e,n),e.then(t,t))}function Pm(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Vm(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=gn(-1,1),e.tag=2,$n(n,e,1))),n.lanes|=1),t)}var dx=Sn.ReactCurrentOwner,_t=!1;function ht(t,e,n,r){e.child=t===null?ky(e,null,n,r):xs(e,t.child,n,r)}function Dm(t,e,n,r,s){n=n.render;var i=e.ref;return ms(e,s),r=Mh(t,e,n,r,i,s),n=Oh(),t!==null&&!_t?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,wn(t,e,s)):(xe&&n&&Ih(e),e.flags|=1,ht(t,e,r,s),e.child)}function jm(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Qh(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,Jy(t,e,i,r,s)):(t=ca(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:zi,n(o,r)&&t.ref===e.ref)return wn(t,e,s)}return e.flags|=1,t=Wn(i,r),t.ref=e.ref,t.return=e,e.child=t}function Jy(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(zi(i,r)&&t.ref===e.ref)if(_t=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(_t=!0);else return e.lanes=t.lanes,wn(t,e,s)}return xc(t,e,n,r,s)}function Zy(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ge(us,St),St|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ge(us,St),St|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,ge(us,St),St|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,ge(us,St),St|=r;return ht(t,e,s,n),e.child}function e0(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function xc(t,e,n,r,s){var i=xt(n)?Rr:lt.current;return i=_s(e,i),ms(e,s),n=Mh(t,e,n,r,i,s),r=Oh(),t!==null&&!_t?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,wn(t,e,s)):(xe&&r&&Ih(e),e.flags|=1,ht(t,e,n,s),e.child)}function Lm(t,e,n,r,s){if(xt(n)){var i=!0;Aa(e)}else i=!1;if(ms(e,s),e.stateNode===null)aa(t,e),Ky(e,n,r),_c(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var u=o.context,h=n.contextType;typeof h=="object"&&h!==null?h=Ot(h):(h=xt(n)?Rr:lt.current,h=_s(e,h));var p=n.getDerivedStateFromProps,m=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||u!==h)&&Nm(e,o,r,h),Vn=!1;var g=e.memoizedState;o.state=g,Pa(e,r,o,s),u=e.memoizedState,l!==r||g!==u||wt.current||Vn?(typeof p=="function"&&(vc(e,n,p,r),u=e.memoizedState),(l=Vn||Cm(e,n,l,r,g,u,h))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=h,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,by(t,e),l=e.memoizedProps,h=e.type===e.elementType?l:Ut(e.type,l),o.props=h,m=e.pendingProps,g=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=Ot(u):(u=xt(n)?Rr:lt.current,u=_s(e,u));var S=n.getDerivedStateFromProps;(p=typeof S=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==m||g!==u)&&Nm(e,o,r,u),Vn=!1,g=e.memoizedState,o.state=g,Pa(e,r,o,s);var C=e.memoizedState;l!==m||g!==C||wt.current||Vn?(typeof S=="function"&&(vc(e,n,S,r),C=e.memoizedState),(h=Vn||Cm(e,n,h,r,g,C,u)||!1)?(p||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,C,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,C,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=C),o.props=r,o.state=C,o.context=u,r=h):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),r=!1)}return Ec(t,e,n,r,i,s)}function Ec(t,e,n,r,s,i){e0(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&xm(e,n,!1),wn(t,e,i);r=e.stateNode,dx.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=xs(e,t.child,null,i),e.child=xs(e,null,l,i)):ht(t,e,l,i),e.memoizedState=r.state,s&&xm(e,n,!0),e.child}function t0(t){var e=t.stateNode;e.pendingContext?wm(t,e.pendingContext,e.pendingContext!==e.context):e.context&&wm(t,e.context,!1),Vh(t,e.containerInfo)}function Mm(t,e,n,r,s){return ws(),Ah(s),e.flags|=256,ht(t,e,n,r),e.child}var Tc={dehydrated:null,treeContext:null,retryLane:0};function Sc(t){return{baseLanes:t,cachePool:null,transitions:null}}function n0(t,e,n){var r=e.pendingProps,s=Se.current,i=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),ge(Se,s&1),t===null)return gc(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=pl(o,r,0,null),t=Ar(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Sc(n),e.memoizedState=Tc,t):Uh(e,o));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return fx(t,e,o,r,l,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,l=s.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=Wn(s,u),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=Wn(l,i):(i=Ar(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?Sc(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Tc,r}return i=t.child,t=i.sibling,r=Wn(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Uh(t,e){return e=pl({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function qo(t,e,n,r){return r!==null&&Ah(r),xs(e,t.child,null,n),t=Uh(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function fx(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=Au(Error(O(422))),qo(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=pl({mode:"visible",children:r.children},s,0,null),i=Ar(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&xs(e,t.child,null,o),e.child.memoizedState=Sc(o),e.memoizedState=Tc,i);if(!(e.mode&1))return qo(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(O(419)),r=Au(i,r,void 0),qo(t,e,o,r)}if(l=(o&t.childLanes)!==0,_t||l){if(r=We,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,_n(t,s),Wt(r,t,s,-1))}return Gh(),r=Au(Error(O(421))),qo(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=kx.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,It=Bn(s.nextSibling),At=e,xe=!0,$t=null,t!==null&&(Rt[Pt++]=mn,Rt[Pt++]=pn,Rt[Pt++]=Pr,mn=t.id,pn=t.overflow,Pr=e),e=Uh(e,r.children),e.flags|=4096,e)}function Om(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),yc(t.return,e,n)}function bu(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function r0(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(ht(t,e,r.children,n),r=Se.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Om(t,n,e);else if(t.tag===19)Om(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ge(Se,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Va(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),bu(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Va(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}bu(e,!0,n,null,i);break;case"together":bu(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function aa(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function wn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Dr|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(O(153));if(e.child!==null){for(t=e.child,n=Wn(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Wn(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function mx(t,e,n){switch(e.tag){case 3:t0(e),ws();break;case 5:Cy(e);break;case 1:xt(e.type)&&Aa(e);break;case 4:Vh(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;ge(Na,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ge(Se,Se.current&1),e.flags|=128,null):n&e.child.childLanes?n0(t,e,n):(ge(Se,Se.current&1),t=wn(t,e,n),t!==null?t.sibling:null);ge(Se,Se.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return r0(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),ge(Se,Se.current),r)break;return null;case 22:case 23:return e.lanes=0,Zy(t,e,n)}return wn(t,e,n)}var s0,Ic,i0,o0;s0=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Ic=function(){};i0=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Tr(rn.current);var i=null;switch(n){case"input":s=Gu(t,s),r=Gu(t,r),i=[];break;case"select":s=ke({},s,{value:void 0}),r=ke({},r,{value:void 0}),i=[];break;case"textarea":s=Yu(t,s),r=Yu(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Ia)}Ju(n,r);var o;n=null;for(h in s)if(!r.hasOwnProperty(h)&&s.hasOwnProperty(h)&&s[h]!=null)if(h==="style"){var l=s[h];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(Vi.hasOwnProperty(h)?i||(i=[]):(i=i||[]).push(h,null));for(h in r){var u=r[h];if(l=s!=null?s[h]:void 0,r.hasOwnProperty(h)&&u!==l&&(u!=null||l!=null))if(h==="style")if(l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(i||(i=[]),i.push(h,n)),n=u;else h==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(i=i||[]).push(h,u)):h==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(h,""+u):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(Vi.hasOwnProperty(h)?(u!=null&&h==="onScroll"&&ve("scroll",t),i||l===u||(i=[])):(i=i||[]).push(h,u))}n&&(i=i||[]).push("style",n);var h=i;(e.updateQueue=h)&&(e.flags|=4)}};o0=function(t,e,n,r){n!==r&&(e.flags|=4)};function ui(t,e){if(!xe)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function rt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function px(t,e,n){var r=e.pendingProps;switch(kh(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return rt(e),null;case 1:return xt(e.type)&&ka(),rt(e),null;case 3:return r=e.stateNode,Es(),we(wt),we(lt),jh(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Bo(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,$t!==null&&(Vc($t),$t=null))),Ic(t,e),rt(e),null;case 5:Dh(e);var s=Tr(Hi.current);if(n=e.type,t!==null&&e.stateNode!=null)i0(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(O(166));return rt(e),null}if(t=Tr(rn.current),Bo(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[tn]=e,r[$i]=i,t=(e.mode&1)!==0,n){case"dialog":ve("cancel",r),ve("close",r);break;case"iframe":case"object":case"embed":ve("load",r);break;case"video":case"audio":for(s=0;s<mi.length;s++)ve(mi[s],r);break;case"source":ve("error",r);break;case"img":case"image":case"link":ve("error",r),ve("load",r);break;case"details":ve("toggle",r);break;case"input":Gf(r,i),ve("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},ve("invalid",r);break;case"textarea":Kf(r,i),ve("invalid",r)}Ju(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&Uo(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Uo(r.textContent,l,t),s=["children",""+l]):Vi.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&ve("scroll",r)}switch(n){case"input":Vo(r),Qf(r,i,!0);break;case"textarea":Vo(r),Yf(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Ia)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Dg(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[tn]=e,t[$i]=r,s0(t,e,!1,!1),e.stateNode=t;e:{switch(o=Zu(n,r),n){case"dialog":ve("cancel",t),ve("close",t),s=r;break;case"iframe":case"object":case"embed":ve("load",t),s=r;break;case"video":case"audio":for(s=0;s<mi.length;s++)ve(mi[s],t);s=r;break;case"source":ve("error",t),s=r;break;case"img":case"image":case"link":ve("error",t),ve("load",t),s=r;break;case"details":ve("toggle",t),s=r;break;case"input":Gf(t,r),s=Gu(t,r),ve("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=ke({},r,{value:void 0}),ve("invalid",t);break;case"textarea":Kf(t,r),s=Yu(t,r),ve("invalid",t);break;default:s=r}Ju(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var u=l[i];i==="style"?Mg(t,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&jg(t,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Di(t,u):typeof u=="number"&&Di(t,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Vi.hasOwnProperty(i)?u!=null&&i==="onScroll"&&ve("scroll",t):u!=null&&hh(t,i,u,o))}switch(n){case"input":Vo(t),Qf(t,r,!1);break;case"textarea":Vo(t),Yf(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Jn(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?cs(t,!!r.multiple,i,!1):r.defaultValue!=null&&cs(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Ia)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return rt(e),null;case 6:if(t&&e.stateNode!=null)o0(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(O(166));if(n=Tr(Hi.current),Tr(rn.current),Bo(e)){if(r=e.stateNode,n=e.memoizedProps,r[tn]=e,(i=r.nodeValue!==n)&&(t=At,t!==null))switch(t.tag){case 3:Uo(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Uo(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[tn]=e,e.stateNode=r}return rt(e),null;case 13:if(we(Se),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(xe&&It!==null&&e.mode&1&&!(e.flags&128))Sy(),ws(),e.flags|=98560,i=!1;else if(i=Bo(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(O(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(O(317));i[tn]=e}else ws(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;rt(e),i=!1}else $t!==null&&(Vc($t),$t=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Se.current&1?Ue===0&&(Ue=3):Gh())),e.updateQueue!==null&&(e.flags|=4),rt(e),null);case 4:return Es(),Ic(t,e),t===null&&Ui(e.stateNode.containerInfo),rt(e),null;case 10:return Nh(e.type._context),rt(e),null;case 17:return xt(e.type)&&ka(),rt(e),null;case 19:if(we(Se),i=e.memoizedState,i===null)return rt(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)ui(i,!1);else{if(Ue!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Va(t),o!==null){for(e.flags|=128,ui(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ge(Se,Se.current&1|2),e.child}t=t.sibling}i.tail!==null&&Re()>Ss&&(e.flags|=128,r=!0,ui(i,!1),e.lanes=4194304)}else{if(!r)if(t=Va(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ui(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!xe)return rt(e),null}else 2*Re()-i.renderingStartTime>Ss&&n!==1073741824&&(e.flags|=128,r=!0,ui(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Re(),e.sibling=null,n=Se.current,ge(Se,r?n&1|2:n&1),e):(rt(e),null);case 22:case 23:return Wh(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?St&1073741824&&(rt(e),e.subtreeFlags&6&&(e.flags|=8192)):rt(e),null;case 24:return null;case 25:return null}throw Error(O(156,e.tag))}function gx(t,e){switch(kh(e),e.tag){case 1:return xt(e.type)&&ka(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Es(),we(wt),we(lt),jh(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Dh(e),null;case 13:if(we(Se),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(O(340));ws()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return we(Se),null;case 4:return Es(),null;case 10:return Nh(e.type._context),null;case 22:case 23:return Wh(),null;case 24:return null;default:return null}}var Ho=!1,ot=!1,yx=typeof WeakSet=="function"?WeakSet:Set,q=null;function ls(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ce(t,e,r)}else n.current=null}function kc(t,e,n){try{n()}catch(r){Ce(t,e,r)}}var Fm=!1;function vx(t,e){if(uc=Ea,t=hy(),Sh(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,u=-1,h=0,p=0,m=t,g=null;t:for(;;){for(var S;m!==n||s!==0&&m.nodeType!==3||(l=o+s),m!==i||r!==0&&m.nodeType!==3||(u=o+r),m.nodeType===3&&(o+=m.nodeValue.length),(S=m.firstChild)!==null;)g=m,m=S;for(;;){if(m===t)break t;if(g===n&&++h===s&&(l=o),g===i&&++p===r&&(u=o),(S=m.nextSibling)!==null)break;m=g,g=m.parentNode}m=S}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(cc={focusedElem:t,selectionRange:n},Ea=!1,q=e;q!==null;)if(e=q,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,q=t;else for(;q!==null;){e=q;try{var C=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(C!==null){var N=C.memoizedProps,D=C.memoizedState,_=e.stateNode,x=_.getSnapshotBeforeUpdate(e.elementType===e.type?N:Ut(e.type,N),D);_.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(O(163))}}catch(V){Ce(e,e.return,V)}if(t=e.sibling,t!==null){t.return=e.return,q=t;break}q=e.return}return C=Fm,Fm=!1,C}function Ii(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&kc(e,n,i)}s=s.next}while(s!==r)}}function fl(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Ac(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function a0(t){var e=t.alternate;e!==null&&(t.alternate=null,a0(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[tn],delete e[$i],delete e[fc],delete e[ex],delete e[tx])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function l0(t){return t.tag===5||t.tag===3||t.tag===4}function zm(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||l0(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function bc(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Ia));else if(r!==4&&(t=t.child,t!==null))for(bc(t,e,n),t=t.sibling;t!==null;)bc(t,e,n),t=t.sibling}function Cc(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Cc(t,e,n),t=t.sibling;t!==null;)Cc(t,e,n),t=t.sibling}var Qe=null,Bt=!1;function Rn(t,e,n){for(n=n.child;n!==null;)u0(t,e,n),n=n.sibling}function u0(t,e,n){if(nn&&typeof nn.onCommitFiberUnmount=="function")try{nn.onCommitFiberUnmount(il,n)}catch{}switch(n.tag){case 5:ot||ls(n,e);case 6:var r=Qe,s=Bt;Qe=null,Rn(t,e,n),Qe=r,Bt=s,Qe!==null&&(Bt?(t=Qe,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Qe.removeChild(n.stateNode));break;case 18:Qe!==null&&(Bt?(t=Qe,n=n.stateNode,t.nodeType===8?xu(t.parentNode,n):t.nodeType===1&&xu(t,n),Oi(t)):xu(Qe,n.stateNode));break;case 4:r=Qe,s=Bt,Qe=n.stateNode.containerInfo,Bt=!0,Rn(t,e,n),Qe=r,Bt=s;break;case 0:case 11:case 14:case 15:if(!ot&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&kc(n,e,o),s=s.next}while(s!==r)}Rn(t,e,n);break;case 1:if(!ot&&(ls(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Ce(n,e,l)}Rn(t,e,n);break;case 21:Rn(t,e,n);break;case 22:n.mode&1?(ot=(r=ot)||n.memoizedState!==null,Rn(t,e,n),ot=r):Rn(t,e,n);break;default:Rn(t,e,n)}}function Um(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new yx),e.forEach(function(r){var s=Ax.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function zt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:Qe=l.stateNode,Bt=!1;break e;case 3:Qe=l.stateNode.containerInfo,Bt=!0;break e;case 4:Qe=l.stateNode.containerInfo,Bt=!0;break e}l=l.return}if(Qe===null)throw Error(O(160));u0(i,o,s),Qe=null,Bt=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(h){Ce(s,e,h)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)c0(e,t),e=e.sibling}function c0(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(zt(e,t),Jt(t),r&4){try{Ii(3,t,t.return),fl(3,t)}catch(N){Ce(t,t.return,N)}try{Ii(5,t,t.return)}catch(N){Ce(t,t.return,N)}}break;case 1:zt(e,t),Jt(t),r&512&&n!==null&&ls(n,n.return);break;case 5:if(zt(e,t),Jt(t),r&512&&n!==null&&ls(n,n.return),t.flags&32){var s=t.stateNode;try{Di(s,"")}catch(N){Ce(t,t.return,N)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&Pg(s,i),Zu(l,o);var h=Zu(l,i);for(o=0;o<u.length;o+=2){var p=u[o],m=u[o+1];p==="style"?Mg(s,m):p==="dangerouslySetInnerHTML"?jg(s,m):p==="children"?Di(s,m):hh(s,p,m,h)}switch(l){case"input":Qu(s,i);break;case"textarea":Vg(s,i);break;case"select":var g=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var S=i.value;S!=null?cs(s,!!i.multiple,S,!1):g!==!!i.multiple&&(i.defaultValue!=null?cs(s,!!i.multiple,i.defaultValue,!0):cs(s,!!i.multiple,i.multiple?[]:"",!1))}s[$i]=i}catch(N){Ce(t,t.return,N)}}break;case 6:if(zt(e,t),Jt(t),r&4){if(t.stateNode===null)throw Error(O(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(N){Ce(t,t.return,N)}}break;case 3:if(zt(e,t),Jt(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Oi(e.containerInfo)}catch(N){Ce(t,t.return,N)}break;case 4:zt(e,t),Jt(t);break;case 13:zt(e,t),Jt(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(qh=Re())),r&4&&Um(t);break;case 22:if(p=n!==null&&n.memoizedState!==null,t.mode&1?(ot=(h=ot)||p,zt(e,t),ot=h):zt(e,t),Jt(t),r&8192){if(h=t.memoizedState!==null,(t.stateNode.isHidden=h)&&!p&&t.mode&1)for(q=t,p=t.child;p!==null;){for(m=q=p;q!==null;){switch(g=q,S=g.child,g.tag){case 0:case 11:case 14:case 15:Ii(4,g,g.return);break;case 1:ls(g,g.return);var C=g.stateNode;if(typeof C.componentWillUnmount=="function"){r=g,n=g.return;try{e=r,C.props=e.memoizedProps,C.state=e.memoizedState,C.componentWillUnmount()}catch(N){Ce(r,n,N)}}break;case 5:ls(g,g.return);break;case 22:if(g.memoizedState!==null){$m(m);continue}}S!==null?(S.return=g,q=S):$m(m)}p=p.sibling}e:for(p=null,m=t;;){if(m.tag===5){if(p===null){p=m;try{s=m.stateNode,h?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=m.stateNode,u=m.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=Lg("display",o))}catch(N){Ce(t,t.return,N)}}}else if(m.tag===6){if(p===null)try{m.stateNode.nodeValue=h?"":m.memoizedProps}catch(N){Ce(t,t.return,N)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;p===m&&(p=null),m=m.return}p===m&&(p=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:zt(e,t),Jt(t),r&4&&Um(t);break;case 21:break;default:zt(e,t),Jt(t)}}function Jt(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(l0(n)){var r=n;break e}n=n.return}throw Error(O(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Di(s,""),r.flags&=-33);var i=zm(t);Cc(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,l=zm(t);bc(t,l,o);break;default:throw Error(O(161))}}catch(u){Ce(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function _x(t,e,n){q=t,h0(t)}function h0(t,e,n){for(var r=(t.mode&1)!==0;q!==null;){var s=q,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Ho;if(!o){var l=s.alternate,u=l!==null&&l.memoizedState!==null||ot;l=Ho;var h=ot;if(Ho=o,(ot=u)&&!h)for(q=s;q!==null;)o=q,u=o.child,o.tag===22&&o.memoizedState!==null?qm(s):u!==null?(u.return=o,q=u):qm(s);for(;i!==null;)q=i,h0(i),i=i.sibling;q=s,Ho=l,ot=h}Bm(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,q=i):Bm(t)}}function Bm(t){for(;q!==null;){var e=q;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ot||fl(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!ot)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Ut(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&km(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}km(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var h=e.alternate;if(h!==null){var p=h.memoizedState;if(p!==null){var m=p.dehydrated;m!==null&&Oi(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(O(163))}ot||e.flags&512&&Ac(e)}catch(g){Ce(e,e.return,g)}}if(e===t){q=null;break}if(n=e.sibling,n!==null){n.return=e.return,q=n;break}q=e.return}}function $m(t){for(;q!==null;){var e=q;if(e===t){q=null;break}var n=e.sibling;if(n!==null){n.return=e.return,q=n;break}q=e.return}}function qm(t){for(;q!==null;){var e=q;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{fl(4,e)}catch(u){Ce(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(u){Ce(e,s,u)}}var i=e.return;try{Ac(e)}catch(u){Ce(e,i,u)}break;case 5:var o=e.return;try{Ac(e)}catch(u){Ce(e,o,u)}}}catch(u){Ce(e,e.return,u)}if(e===t){q=null;break}var l=e.sibling;if(l!==null){l.return=e.return,q=l;break}q=e.return}}var wx=Math.ceil,La=Sn.ReactCurrentDispatcher,Bh=Sn.ReactCurrentOwner,jt=Sn.ReactCurrentBatchConfig,ae=0,We=null,je=null,Je=0,St=0,us=lr(0),Ue=0,Ki=null,Dr=0,ml=0,$h=0,ki=null,yt=null,qh=0,Ss=1/0,dn=null,Ma=!1,Nc=null,qn=null,Wo=!1,Mn=null,Oa=0,Ai=0,Rc=null,la=-1,ua=0;function dt(){return ae&6?Re():la!==-1?la:la=Re()}function Hn(t){return t.mode&1?ae&2&&Je!==0?Je&-Je:rx.transition!==null?(ua===0&&(ua=Kg()),ua):(t=he,t!==0||(t=window.event,t=t===void 0?16:ny(t.type)),t):1}function Wt(t,e,n,r){if(50<Ai)throw Ai=0,Rc=null,Error(O(185));lo(t,n,r),(!(ae&2)||t!==We)&&(t===We&&(!(ae&2)&&(ml|=n),Ue===4&&jn(t,Je)),Et(t,r),n===1&&ae===0&&!(e.mode&1)&&(Ss=Re()+500,cl&&ur()))}function Et(t,e){var n=t.callbackNode;rw(t,e);var r=xa(t,t===We?Je:0);if(r===0)n!==null&&Zf(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Zf(n),e===1)t.tag===0?nx(Hm.bind(null,t)):xy(Hm.bind(null,t)),Jw(function(){!(ae&6)&&ur()}),n=null;else{switch(Yg(r)){case 1:n=gh;break;case 4:n=Gg;break;case 16:n=wa;break;case 536870912:n=Qg;break;default:n=wa}n=_0(n,d0.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function d0(t,e){if(la=-1,ua=0,ae&6)throw Error(O(327));var n=t.callbackNode;if(ps()&&t.callbackNode!==n)return null;var r=xa(t,t===We?Je:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Fa(t,r);else{e=r;var s=ae;ae|=2;var i=m0();(We!==t||Je!==e)&&(dn=null,Ss=Re()+500,kr(t,e));do try{Tx();break}catch(l){f0(t,l)}while(!0);Ch(),La.current=i,ae=s,je!==null?e=0:(We=null,Je=0,e=Ue)}if(e!==0){if(e===2&&(s=sc(t),s!==0&&(r=s,e=Pc(t,s))),e===1)throw n=Ki,kr(t,0),jn(t,r),Et(t,Re()),n;if(e===6)jn(t,r);else{if(s=t.current.alternate,!(r&30)&&!xx(s)&&(e=Fa(t,r),e===2&&(i=sc(t),i!==0&&(r=i,e=Pc(t,i))),e===1))throw n=Ki,kr(t,0),jn(t,r),Et(t,Re()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(O(345));case 2:_r(t,yt,dn);break;case 3:if(jn(t,r),(r&130023424)===r&&(e=qh+500-Re(),10<e)){if(xa(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){dt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=dc(_r.bind(null,t,yt,dn),e);break}_r(t,yt,dn);break;case 4:if(jn(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-Ht(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Re()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*wx(r/1960))-r,10<r){t.timeoutHandle=dc(_r.bind(null,t,yt,dn),r);break}_r(t,yt,dn);break;case 5:_r(t,yt,dn);break;default:throw Error(O(329))}}}return Et(t,Re()),t.callbackNode===n?d0.bind(null,t):null}function Pc(t,e){var n=ki;return t.current.memoizedState.isDehydrated&&(kr(t,e).flags|=256),t=Fa(t,e),t!==2&&(e=yt,yt=n,e!==null&&Vc(e)),t}function Vc(t){yt===null?yt=t:yt.push.apply(yt,t)}function xx(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Gt(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function jn(t,e){for(e&=~$h,e&=~ml,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Ht(e),r=1<<n;t[n]=-1,e&=~r}}function Hm(t){if(ae&6)throw Error(O(327));ps();var e=xa(t,0);if(!(e&1))return Et(t,Re()),null;var n=Fa(t,e);if(t.tag!==0&&n===2){var r=sc(t);r!==0&&(e=r,n=Pc(t,r))}if(n===1)throw n=Ki,kr(t,0),jn(t,e),Et(t,Re()),n;if(n===6)throw Error(O(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,_r(t,yt,dn),Et(t,Re()),null}function Hh(t,e){var n=ae;ae|=1;try{return t(e)}finally{ae=n,ae===0&&(Ss=Re()+500,cl&&ur())}}function jr(t){Mn!==null&&Mn.tag===0&&!(ae&6)&&ps();var e=ae;ae|=1;var n=jt.transition,r=he;try{if(jt.transition=null,he=1,t)return t()}finally{he=r,jt.transition=n,ae=e,!(ae&6)&&ur()}}function Wh(){St=us.current,we(us)}function kr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Xw(n)),je!==null)for(n=je.return;n!==null;){var r=n;switch(kh(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&ka();break;case 3:Es(),we(wt),we(lt),jh();break;case 5:Dh(r);break;case 4:Es();break;case 13:we(Se);break;case 19:we(Se);break;case 10:Nh(r.type._context);break;case 22:case 23:Wh()}n=n.return}if(We=t,je=t=Wn(t.current,null),Je=St=e,Ue=0,Ki=null,$h=ml=Dr=0,yt=ki=null,Er!==null){for(e=0;e<Er.length;e++)if(n=Er[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Er=null}return t}function f0(t,e){do{var n=je;try{if(Ch(),ia.current=ja,Da){for(var r=Ie.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Da=!1}if(Vr=0,He=ze=Ie=null,Si=!1,Wi=0,Bh.current=null,n===null||n.return===null){Ue=1,Ki=e,je=null;break}e:{var i=t,o=n.return,l=n,u=e;if(e=Je,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var h=u,p=l,m=p.tag;if(!(p.mode&1)&&(m===0||m===11||m===15)){var g=p.alternate;g?(p.updateQueue=g.updateQueue,p.memoizedState=g.memoizedState,p.lanes=g.lanes):(p.updateQueue=null,p.memoizedState=null)}var S=Pm(o);if(S!==null){S.flags&=-257,Vm(S,o,l,i,e),S.mode&1&&Rm(i,h,e),e=S,u=h;var C=e.updateQueue;if(C===null){var N=new Set;N.add(u),e.updateQueue=N}else C.add(u);break e}else{if(!(e&1)){Rm(i,h,e),Gh();break e}u=Error(O(426))}}else if(xe&&l.mode&1){var D=Pm(o);if(D!==null){!(D.flags&65536)&&(D.flags|=256),Vm(D,o,l,i,e),Ah(Ts(u,l));break e}}i=u=Ts(u,l),Ue!==4&&(Ue=2),ki===null?ki=[i]:ki.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var _=Yy(i,u,e);Im(i,_);break e;case 1:l=u;var x=i.type,b=i.stateNode;if(!(i.flags&128)&&(typeof x.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(qn===null||!qn.has(b)))){i.flags|=65536,e&=-e,i.lanes|=e;var V=Xy(i,l,e);Im(i,V);break e}}i=i.return}while(i!==null)}g0(n)}catch(M){e=M,je===n&&n!==null&&(je=n=n.return);continue}break}while(!0)}function m0(){var t=La.current;return La.current=ja,t===null?ja:t}function Gh(){(Ue===0||Ue===3||Ue===2)&&(Ue=4),We===null||!(Dr&268435455)&&!(ml&268435455)||jn(We,Je)}function Fa(t,e){var n=ae;ae|=2;var r=m0();(We!==t||Je!==e)&&(dn=null,kr(t,e));do try{Ex();break}catch(s){f0(t,s)}while(!0);if(Ch(),ae=n,La.current=r,je!==null)throw Error(O(261));return We=null,Je=0,Ue}function Ex(){for(;je!==null;)p0(je)}function Tx(){for(;je!==null&&!Q1();)p0(je)}function p0(t){var e=v0(t.alternate,t,St);t.memoizedProps=t.pendingProps,e===null?g0(t):je=e,Bh.current=null}function g0(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=gx(n,e),n!==null){n.flags&=32767,je=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ue=6,je=null;return}}else if(n=px(n,e,St),n!==null){je=n;return}if(e=e.sibling,e!==null){je=e;return}je=e=t}while(e!==null);Ue===0&&(Ue=5)}function _r(t,e,n){var r=he,s=jt.transition;try{jt.transition=null,he=1,Sx(t,e,n,r)}finally{jt.transition=s,he=r}return null}function Sx(t,e,n,r){do ps();while(Mn!==null);if(ae&6)throw Error(O(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(O(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(sw(t,i),t===We&&(je=We=null,Je=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Wo||(Wo=!0,_0(wa,function(){return ps(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=jt.transition,jt.transition=null;var o=he;he=1;var l=ae;ae|=4,Bh.current=null,vx(t,n),c0(n,t),qw(cc),Ea=!!uc,cc=uc=null,t.current=n,_x(n),K1(),ae=l,he=o,jt.transition=i}else t.current=n;if(Wo&&(Wo=!1,Mn=t,Oa=s),i=t.pendingLanes,i===0&&(qn=null),J1(n.stateNode),Et(t,Re()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Ma)throw Ma=!1,t=Nc,Nc=null,t;return Oa&1&&t.tag!==0&&ps(),i=t.pendingLanes,i&1?t===Rc?Ai++:(Ai=0,Rc=t):Ai=0,ur(),null}function ps(){if(Mn!==null){var t=Yg(Oa),e=jt.transition,n=he;try{if(jt.transition=null,he=16>t?16:t,Mn===null)var r=!1;else{if(t=Mn,Mn=null,Oa=0,ae&6)throw Error(O(331));var s=ae;for(ae|=4,q=t.current;q!==null;){var i=q,o=i.child;if(q.flags&16){var l=i.deletions;if(l!==null){for(var u=0;u<l.length;u++){var h=l[u];for(q=h;q!==null;){var p=q;switch(p.tag){case 0:case 11:case 15:Ii(8,p,i)}var m=p.child;if(m!==null)m.return=p,q=m;else for(;q!==null;){p=q;var g=p.sibling,S=p.return;if(a0(p),p===h){q=null;break}if(g!==null){g.return=S,q=g;break}q=S}}}var C=i.alternate;if(C!==null){var N=C.child;if(N!==null){C.child=null;do{var D=N.sibling;N.sibling=null,N=D}while(N!==null)}}q=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,q=o;else e:for(;q!==null;){if(i=q,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Ii(9,i,i.return)}var _=i.sibling;if(_!==null){_.return=i.return,q=_;break e}q=i.return}}var x=t.current;for(q=x;q!==null;){o=q;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,q=b;else e:for(o=x;q!==null;){if(l=q,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:fl(9,l)}}catch(M){Ce(l,l.return,M)}if(l===o){q=null;break e}var V=l.sibling;if(V!==null){V.return=l.return,q=V;break e}q=l.return}}if(ae=s,ur(),nn&&typeof nn.onPostCommitFiberRoot=="function")try{nn.onPostCommitFiberRoot(il,t)}catch{}r=!0}return r}finally{he=n,jt.transition=e}}return!1}function Wm(t,e,n){e=Ts(n,e),e=Yy(t,e,1),t=$n(t,e,1),e=dt(),t!==null&&(lo(t,1,e),Et(t,e))}function Ce(t,e,n){if(t.tag===3)Wm(t,t,n);else for(;e!==null;){if(e.tag===3){Wm(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(qn===null||!qn.has(r))){t=Ts(n,t),t=Xy(e,t,1),e=$n(e,t,1),t=dt(),e!==null&&(lo(e,1,t),Et(e,t));break}}e=e.return}}function Ix(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=dt(),t.pingedLanes|=t.suspendedLanes&n,We===t&&(Je&n)===n&&(Ue===4||Ue===3&&(Je&130023424)===Je&&500>Re()-qh?kr(t,0):$h|=n),Et(t,e)}function y0(t,e){e===0&&(t.mode&1?(e=Lo,Lo<<=1,!(Lo&130023424)&&(Lo=4194304)):e=1);var n=dt();t=_n(t,e),t!==null&&(lo(t,e,n),Et(t,n))}function kx(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),y0(t,n)}function Ax(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(O(314))}r!==null&&r.delete(e),y0(t,n)}var v0;v0=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||wt.current)_t=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return _t=!1,mx(t,e,n);_t=!!(t.flags&131072)}else _t=!1,xe&&e.flags&1048576&&Ey(e,Ca,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;aa(t,e),t=e.pendingProps;var s=_s(e,lt.current);ms(e,n),s=Mh(null,e,r,t,s,n);var i=Oh();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,xt(r)?(i=!0,Aa(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Ph(e),s.updater=dl,e.stateNode=s,s._reactInternals=e,_c(e,r,t,n),e=Ec(null,e,r,!0,i,n)):(e.tag=0,xe&&i&&Ih(e),ht(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(aa(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=Cx(r),t=Ut(r,t),s){case 0:e=xc(null,e,r,t,n);break e;case 1:e=Lm(null,e,r,t,n);break e;case 11:e=Dm(null,e,r,t,n);break e;case 14:e=jm(null,e,r,Ut(r.type,t),n);break e}throw Error(O(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ut(r,s),xc(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ut(r,s),Lm(t,e,r,s,n);case 3:e:{if(t0(e),t===null)throw Error(O(387));r=e.pendingProps,i=e.memoizedState,s=i.element,by(t,e),Pa(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Ts(Error(O(423)),e),e=Mm(t,e,r,n,s);break e}else if(r!==s){s=Ts(Error(O(424)),e),e=Mm(t,e,r,n,s);break e}else for(It=Bn(e.stateNode.containerInfo.firstChild),At=e,xe=!0,$t=null,n=ky(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ws(),r===s){e=wn(t,e,n);break e}ht(t,e,r,n)}e=e.child}return e;case 5:return Cy(e),t===null&&gc(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,hc(r,s)?o=null:i!==null&&hc(r,i)&&(e.flags|=32),e0(t,e),ht(t,e,o,n),e.child;case 6:return t===null&&gc(e),null;case 13:return n0(t,e,n);case 4:return Vh(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=xs(e,null,r,n):ht(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ut(r,s),Dm(t,e,r,s,n);case 7:return ht(t,e,e.pendingProps,n),e.child;case 8:return ht(t,e,e.pendingProps.children,n),e.child;case 12:return ht(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,ge(Na,r._currentValue),r._currentValue=o,i!==null)if(Gt(i.value,o)){if(i.children===s.children&&!wt.current){e=wn(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=gn(-1,n&-n),u.tag=2;var h=i.updateQueue;if(h!==null){h=h.shared;var p=h.pending;p===null?u.next=u:(u.next=p.next,p.next=u),h.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),yc(i.return,n,e),l.lanes|=n;break}u=u.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(O(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),yc(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}ht(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,ms(e,n),s=Ot(s),r=r(s),e.flags|=1,ht(t,e,r,n),e.child;case 14:return r=e.type,s=Ut(r,e.pendingProps),s=Ut(r.type,s),jm(t,e,r,s,n);case 15:return Jy(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ut(r,s),aa(t,e),e.tag=1,xt(r)?(t=!0,Aa(e)):t=!1,ms(e,n),Ky(e,r,s),_c(e,r,s,n),Ec(null,e,r,!0,t,n);case 19:return r0(t,e,n);case 22:return Zy(t,e,n)}throw Error(O(156,e.tag))};function _0(t,e){return Wg(t,e)}function bx(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Dt(t,e,n,r){return new bx(t,e,n,r)}function Qh(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Cx(t){if(typeof t=="function")return Qh(t)?1:0;if(t!=null){if(t=t.$$typeof,t===fh)return 11;if(t===mh)return 14}return 2}function Wn(t,e){var n=t.alternate;return n===null?(n=Dt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function ca(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")Qh(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Zr:return Ar(n.children,s,i,e);case dh:o=8,s|=8;break;case $u:return t=Dt(12,n,e,s|2),t.elementType=$u,t.lanes=i,t;case qu:return t=Dt(13,n,e,s),t.elementType=qu,t.lanes=i,t;case Hu:return t=Dt(19,n,e,s),t.elementType=Hu,t.lanes=i,t;case Cg:return pl(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Ag:o=10;break e;case bg:o=9;break e;case fh:o=11;break e;case mh:o=14;break e;case Pn:o=16,r=null;break e}throw Error(O(130,t==null?t:typeof t,""))}return e=Dt(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Ar(t,e,n,r){return t=Dt(7,t,r,e),t.lanes=n,t}function pl(t,e,n,r){return t=Dt(22,t,r,e),t.elementType=Cg,t.lanes=n,t.stateNode={isHidden:!1},t}function Cu(t,e,n){return t=Dt(6,t,null,e),t.lanes=n,t}function Nu(t,e,n){return e=Dt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Nx(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=cu(0),this.expirationTimes=cu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=cu(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Kh(t,e,n,r,s,i,o,l,u){return t=new Nx(t,e,n,l,u),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Dt(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ph(i),t}function Rx(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Jr,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function w0(t){if(!t)return Zn;t=t._reactInternals;e:{if(zr(t)!==t||t.tag!==1)throw Error(O(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(xt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(O(171))}if(t.tag===1){var n=t.type;if(xt(n))return wy(t,n,e)}return e}function x0(t,e,n,r,s,i,o,l,u){return t=Kh(n,r,!0,t,s,i,o,l,u),t.context=w0(null),n=t.current,r=dt(),s=Hn(n),i=gn(r,s),i.callback=e??null,$n(n,i,s),t.current.lanes=s,lo(t,s,r),Et(t,r),t}function gl(t,e,n,r){var s=e.current,i=dt(),o=Hn(s);return n=w0(n),e.context===null?e.context=n:e.pendingContext=n,e=gn(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=$n(s,e,o),t!==null&&(Wt(t,s,o,i),sa(t,s,o)),o}function za(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Gm(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Yh(t,e){Gm(t,e),(t=t.alternate)&&Gm(t,e)}function Px(){return null}var E0=typeof reportError=="function"?reportError:function(t){console.error(t)};function Xh(t){this._internalRoot=t}yl.prototype.render=Xh.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(O(409));gl(t,e,null,null)};yl.prototype.unmount=Xh.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;jr(function(){gl(null,t,null,null)}),e[vn]=null}};function yl(t){this._internalRoot=t}yl.prototype.unstable_scheduleHydration=function(t){if(t){var e=Zg();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Dn.length&&e!==0&&e<Dn[n].priority;n++);Dn.splice(n,0,t),n===0&&ty(t)}};function Jh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function vl(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Qm(){}function Vx(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var h=za(o);i.call(h)}}var o=x0(e,r,t,0,null,!1,!1,"",Qm);return t._reactRootContainer=o,t[vn]=o.current,Ui(t.nodeType===8?t.parentNode:t),jr(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var h=za(u);l.call(h)}}var u=Kh(t,0,!1,null,null,!1,!1,"",Qm);return t._reactRootContainer=u,t[vn]=u.current,Ui(t.nodeType===8?t.parentNode:t),jr(function(){gl(e,u,n,r)}),u}function _l(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var u=za(o);l.call(u)}}gl(e,o,t,s)}else o=Vx(n,e,t,s,r);return za(o)}Xg=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=fi(e.pendingLanes);n!==0&&(yh(e,n|1),Et(e,Re()),!(ae&6)&&(Ss=Re()+500,ur()))}break;case 13:jr(function(){var r=_n(t,1);if(r!==null){var s=dt();Wt(r,t,1,s)}}),Yh(t,1)}};vh=function(t){if(t.tag===13){var e=_n(t,134217728);if(e!==null){var n=dt();Wt(e,t,134217728,n)}Yh(t,134217728)}};Jg=function(t){if(t.tag===13){var e=Hn(t),n=_n(t,e);if(n!==null){var r=dt();Wt(n,t,e,r)}Yh(t,e)}};Zg=function(){return he};ey=function(t,e){var n=he;try{return he=t,e()}finally{he=n}};tc=function(t,e,n){switch(e){case"input":if(Qu(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=ul(r);if(!s)throw Error(O(90));Rg(r),Qu(r,s)}}}break;case"textarea":Vg(t,n);break;case"select":e=n.value,e!=null&&cs(t,!!n.multiple,e,!1)}};zg=Hh;Ug=jr;var Dx={usingClientEntryPoint:!1,Events:[co,rs,ul,Og,Fg,Hh]},ci={findFiberByHostInstance:xr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},jx={bundleType:ci.bundleType,version:ci.version,rendererPackageName:ci.rendererPackageName,rendererConfig:ci.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Sn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=qg(t),t===null?null:t.stateNode},findFiberByHostInstance:ci.findFiberByHostInstance||Px,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Go=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Go.isDisabled&&Go.supportsFiber)try{il=Go.inject(jx),nn=Go}catch{}}Ct.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Dx;Ct.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Jh(e))throw Error(O(200));return Rx(t,e,null,n)};Ct.createRoot=function(t,e){if(!Jh(t))throw Error(O(299));var n=!1,r="",s=E0;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Kh(t,1,!1,null,null,n,!1,r,s),t[vn]=e.current,Ui(t.nodeType===8?t.parentNode:t),new Xh(e)};Ct.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(O(188)):(t=Object.keys(t).join(","),Error(O(268,t)));return t=qg(e),t=t===null?null:t.stateNode,t};Ct.flushSync=function(t){return jr(t)};Ct.hydrate=function(t,e,n){if(!vl(e))throw Error(O(200));return _l(null,t,e,!0,n)};Ct.hydrateRoot=function(t,e,n){if(!Jh(t))throw Error(O(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=E0;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=x0(e,null,t,1,n??null,s,!1,i,o),t[vn]=e.current,Ui(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new yl(e)};Ct.render=function(t,e,n){if(!vl(e))throw Error(O(200));return _l(null,t,e,!1,n)};Ct.unmountComponentAtNode=function(t){if(!vl(t))throw Error(O(40));return t._reactRootContainer?(jr(function(){_l(null,null,t,!1,function(){t._reactRootContainer=null,t[vn]=null})}),!0):!1};Ct.unstable_batchedUpdates=Hh;Ct.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!vl(n))throw Error(O(200));if(t==null||t._reactInternals===void 0)throw Error(O(38));return _l(t,e,n,!1,r)};Ct.version="18.3.1-next-f1338f8080-20240426";function T0(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(T0)}catch(t){console.error(t)}}T0(),Tg.exports=Ct;var Lx=Tg.exports,Km=Lx;Uu.createRoot=Km.createRoot,Uu.hydrateRoot=Km.hydrateRoot;var Mx={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Ox=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Fx=(t,e)=>{const n=H.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,children:l,...u},h)=>H.createElement("svg",{ref:h,...Mx,width:s,height:s,stroke:r,strokeWidth:o?Number(i)*24/Number(s):i,className:`lucide lucide-${Ox(t)}`,...u},[...e.map(([p,m])=>H.createElement(p,m)),...(Array.isArray(l)?l:[l])||[]]));return n.displayName=`${t}`,n};var oe=Fx;const S0=oe("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]),I0=oe("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),zx=oe("CheckCircle2",[["path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",key:"14v8dr"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),Ux=oe("ChefHat",[["path",{d:"M6 13.87A4 4 0 0 1 7.41 6a5.11 5.11 0 0 1 1.05-1.54 5 5 0 0 1 7.08 0A5.11 5.11 0 0 1 16.59 6 4 4 0 0 1 18 13.87V21H6Z",key:"z3ra2g"}],["line",{x1:"6",x2:"18",y1:"17",y2:"17",key:"12q60k"}]]),Bx=oe("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),Dc=oe("Cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]),$x=oe("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),qx=oe("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),Hx=oe("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]),k0=oe("Facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]),Wx=oe("FileJson",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1",key:"1oajmo"}],["path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1",key:"mpwhp6"}]]),Gx=oe("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}],["path",{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z",key:"nb9nel"}]]),A0=oe("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),Qx=oe("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]),b0=oe("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]),Kx=oe("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]]),Yx=oe("MessageCircle",[["path",{d:"m3 21 1.9-5.7a8.5 8.5 0 1 1 3.8 3.8z",key:"v2veuj"}]]),C0=oe("Music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]),Xx=oe("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]),Yi=oe("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),Jx=oe("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),N0=oe("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),R0=oe("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),Zx=oe("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]),eE=oe("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]),Zh=oe("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]),ed=oe("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]),tE=oe("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]),P0=oe("StickyNote",[["path",{d:"M15.5 3H5a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h14a2 2 0 0 0 2-2V8.5L15.5 3Z",key:"1wis1t"}],["path",{d:"M15 3v6h6",key:"edgan2"}]]),Ua=oe("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),nE=oe("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),sn=oe("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Sr=oe("Youtube",[["path",{d:"M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17",key:"1q2vi4"}],["path",{d:"m10 15 5-3-5-3z",key:"1jp15x"}]]),rE=oe("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);function V0(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=V0(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Ee(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=V0(t))&&(r&&(r+=" "),r+=e);return r}const sE=({activeTab:t,setActiveTab:e})=>d.jsx("header",{className:"bg-slate-800/95 backdrop-blur-sm shadow-2xl border-b-2 border-primary-600/50 autumn-glow",children:d.jsx("div",{className:"container mx-auto px-4 py-4",children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsxs("div",{className:"relative",children:[d.jsx(rE,{className:"h-10 w-10 text-primary-400 fill-primary-400",strokeWidth:2}),d.jsx("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-accent-400 rounded-full animate-pulse autumn-glow-gold"})]}),d.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-primary-400 via-secondary-400 to-accent-400 bg-clip-text text-transparent",children:" Food Flash"})]}),d.jsxs("nav",{className:"flex gap-2",children:[d.jsxs("button",{onClick:()=>e("home"),"data-test-id":"nav-home","aria-label":"Zur Startseite navigieren",className:Ee("flex items-center gap-2 px-4 py-2 rounded-full font-medium transition-all duration-200",t==="home"?"bg-primary-600 text-white shadow-lg scale-105 autumn-glow":"bg-slate-700/50 text-gray-300 hover:bg-primary-600/20 hover:text-primary-300 border border-slate-600/50"),children:[d.jsx(Qx,{className:"h-5 w-5"}),d.jsx("span",{className:"hidden sm:inline",children:" Start"})]}),d.jsxs("button",{onClick:()=>e("recipes"),"data-test-id":"nav-recipes","aria-label":"Zu meinen Rezepten navigieren",className:Ee("flex items-center gap-2 px-4 py-2 rounded-full font-medium transition-all duration-200",t==="recipes"?"bg-secondary-600 text-white shadow-lg scale-105 autumn-glow-green":"bg-slate-700/50 text-gray-300 hover:bg-secondary-600/20 hover:text-secondary-300 border border-dark-600/50"),children:[d.jsx(S0,{className:"h-5 w-5"}),d.jsx("span",{className:"hidden sm:inline",children:" Rezepte"})]}),d.jsxs("button",{onClick:()=>e("planner"),"data-test-id":"nav-planner","aria-label":"Zum Wochenplaner navigieren",className:Ee("flex items-center gap-2 px-4 py-2 rounded-full font-medium transition-all duration-200",t==="planner"?"bg-accent-600 text-white shadow-lg scale-105 autumn-glow-gold":"bg-slate-700/50 text-gray-300 hover:bg-accent-600/20 hover:text-accent-300 border border-dark-600/50"),children:[d.jsx(I0,{className:"h-5 w-5"}),d.jsx("span",{className:"hidden sm:inline",children:" Planer"})]}),d.jsxs("button",{onClick:()=>e("shopping"),"data-test-id":"nav-shopping","aria-label":"Zur Einkaufsliste navigieren",className:Ee("flex items-center gap-2 px-4 py-2 rounded-full font-medium transition-all duration-200",t==="shopping"?"bg-primary-600 text-white shadow-lg scale-105 autumn-glow":"bg-slate-700/50 text-gray-300 hover:bg-primary-600/20 hover:text-primary-300 border border-slate-600/50"),children:[d.jsx(Zh,{className:"h-5 w-5"}),d.jsx("span",{className:"hidden sm:inline",children:" Einkauf"})]})]})]})})}),iE=({onPlatformClick:t})=>d.jsxs("div",{className:"text-center py-12",children:[d.jsxs("div",{className:"mb-12",children:[d.jsx("h2",{className:"text-5xl font-bold text-gray-100 mb-4 bg-gradient-to-r from-primary-400 via-accent-400 to-secondary-400 bg-clip-text text-transparent",children:" Willkommen bei Food Flash! "}),d.jsx("p",{className:"text-xl text-gray-300 max-w-2xl mx-auto",children:"Speichere deine Lieblingsrezepte von berall und habe sie immer griffbereit!"})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 max-w-6xl mx-auto mb-12",children:[d.jsxs("button",{onClick:()=>t("youtube"),"data-test-id":"platform-youtube","aria-label":"YouTube Rezepte anzeigen",className:"bg-slate-800/80 backdrop-blur-sm rounded-2xl p-6 shadow-xl border-2 border-red-500/30 hover:scale-105 transition-all duration-300 hover:border-red-400 hover:shadow-2xl hover:autumn-glow cursor-pointer",children:[d.jsx("div",{className:"w-16 h-16 bg-red-600/20 rounded-full flex items-center justify-center mx-auto mb-4 border border-red-500/30",children:d.jsx(Sr,{className:"h-8 w-8 text-red-400"})}),d.jsx("h3",{className:"font-bold text-gray-100 mb-2",children:"YouTube"}),d.jsx("p",{className:"text-sm text-gray-400",children:"Video-Rezepte speichern"})]}),d.jsxs("button",{onClick:()=>t("instagram"),"data-test-id":"platform-instagram","aria-label":"Instagram Rezepte anzeigen",className:"bg-slate-800/80 backdrop-blur-sm rounded-2xl p-6 shadow-xl border-2 border-pink-500/30 hover:scale-105 transition-all duration-300 hover:border-pink-400 hover:shadow-2xl cursor-pointer",children:[d.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-pink-600/20 to-purple-600/20 rounded-full flex items-center justify-center mx-auto mb-4 border border-pink-500/30",children:d.jsx(b0,{className:"h-8 w-8 text-pink-400"})}),d.jsx("h3",{className:"font-bold text-gray-100 mb-2",children:"Instagram"}),d.jsx("p",{className:"text-sm text-gray-400",children:"Reel-Rezepte sichern"})]}),d.jsxs("button",{onClick:()=>t("facebook"),"data-test-id":"platform-facebook","aria-label":"Facebook Rezepte anzeigen",className:"bg-slate-800/80 backdrop-blur-sm rounded-2xl p-6 shadow-xl border-2 border-blue-500/30 hover:scale-105 transition-all duration-300 hover:border-blue-400 hover:shadow-2xl cursor-pointer",children:[d.jsx("div",{className:"w-16 h-16 bg-blue-600/20 rounded-full flex items-center justify-center mx-auto mb-4 border border-blue-500/30",children:d.jsx(k0,{className:"h-8 w-8 text-blue-400"})}),d.jsx("h3",{className:"font-bold text-gray-100 mb-2",children:"Facebook"}),d.jsx("p",{className:"text-sm text-gray-400",children:"Posts & Videos merken"})]}),d.jsxs("button",{onClick:()=>t("tiktok"),"data-test-id":"platform-tiktok","aria-label":"TikTok Rezepte anzeigen",className:"bg-slate-800/80 backdrop-blur-sm rounded-2xl p-6 shadow-xl border-2 border-gray-500/30 hover:scale-105 transition-all duration-300 hover:border-gray-400 hover:shadow-2xl cursor-pointer",children:[d.jsx("div",{className:"w-16 h-16 bg-gray-600/20 rounded-full flex items-center justify-center mx-auto mb-4 border border-gray-500/30",children:d.jsx(C0,{className:"h-8 w-8 text-gray-400"})}),d.jsx("h3",{className:"font-bold text-gray-100 mb-2",children:"TikTok"}),d.jsx("p",{className:"text-sm text-gray-400",children:"Kurze Rezept-Videos"})]})]}),d.jsxs("div",{className:"bg-gradient-to-r from-primary-600/80 to-secondary-600/80 backdrop-blur-sm rounded-3xl p-8 max-w-4xl mx-auto text-white shadow-2xl border border-primary-500/30 autumn-glow",children:[d.jsx(ed,{className:"h-12 w-12 mx-auto mb-4 text-accent-400"}),d.jsx("h3",{className:"text-3xl font-bold mb-4",children:" Starte jetzt mit deiner Rezeptsammlung!"}),d.jsx("p",{className:"text-lg mb-6 opacity-90",children:'Klicke auf " Rezepte" in der Navigation oben, um dein erstes Rezept hinzuzufgen.'})]})]}),oE=()=>{};var Ym={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D0=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},aE=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],l=t[n++],u=((s&7)<<18|(i&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},j0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,l=o?t[s+1]:0,u=s+2<t.length,h=u?t[s+2]:0,p=i>>2,m=(i&3)<<4|l>>4;let g=(l&15)<<2|h>>6,S=h&63;u||(S=64,o||(g=64)),r.push(n[p],n[m],n[g],n[S])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(D0(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):aE(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const h=s<t.length?n[t.charAt(s)]:64;++s;const m=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||l==null||h==null||m==null)throw new lE;const g=i<<2|l>>4;if(r.push(g),h!==64){const S=l<<4&240|h>>2;if(r.push(S),m!==64){const C=h<<6&192|m;r.push(C)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class lE extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const uE=function(t){const e=D0(t);return j0.encodeByteArray(e,!0)},Ba=function(t){return uE(t).replace(/\./g,"")},cE=function(t){try{return j0.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hE(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dE=()=>hE().__FIREBASE_DEFAULTS__,fE=()=>{if(typeof process>"u"||typeof Ym>"u")return;const t=Ym.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},mE=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&cE(t[1]);return e&&JSON.parse(e)},td=()=>{try{return oE()||dE()||fE()||mE()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},pE=t=>{var e,n;return(n=(e=td())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},gE=t=>{const e=pE(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},L0=()=>{var t;return(t=td())==null?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yE{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nd(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function vE(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _E(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Ba(JSON.stringify(n)),Ba(JSON.stringify(o)),""].join(".")}const bi={};function wE(){const t={prod:[],emulator:[]};for(const e of Object.keys(bi))bi[e]?t.emulator.push(e):t.prod.push(e);return t}function xE(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Xm=!1;function EE(t,e){if(typeof window>"u"||typeof document>"u"||!nd(window.location.host)||bi[t]===e||bi[t]||Xm)return;bi[t]=e;function n(g){return`__firebase__banner__${g}`}const r="__firebase__banner",i=wE().prod.length>0;function o(){const g=document.getElementById(r);g&&g.remove()}function l(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function u(g,S){g.setAttribute("width","24"),g.setAttribute("id",S),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function h(){const g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{Xm=!0,o()},g}function p(g,S){g.setAttribute("id",S),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function m(){const g=xE(r),S=n("text"),C=document.getElementById(S)||document.createElement("span"),N=n("learnmore"),D=document.getElementById(N)||document.createElement("a"),_=n("preprendIcon"),x=document.getElementById(_)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){const b=g.element;l(b),p(D,N);const V=h();u(x,_),b.append(x,C,D,V),document.body.appendChild(b)}i?(C.innerText="Preview backend disconnected.",x.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(x.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,C.innerText="Preview backend running in this workspace."),C.setAttribute("id",S)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",m):m()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TE(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function SE(){var e;const t=(e=td())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function IE(){return!SE()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function kE(){try{return typeof indexedDB=="object"}catch{return!1}}function AE(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)==null?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bE="FirebaseError";class js extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=bE,Object.setPrototypeOf(this,js.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,M0.prototype.create)}}class M0{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?CE(i,r):"Error",l=`${this.serviceName}: ${o} (${s}).`;return new js(s,l,r)}}function CE(t,e){return t.replace(NE,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const NE=/\{\$([^}]+)}/g;function $a(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(Jm(i)&&Jm(o)){if(!$a(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Jm(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cn(t){return t&&t._delegate?t._delegate:t}class Xi{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RE{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new yE;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(VE(e))try{this.getOrInitializeService({instanceIdentifier:wr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=wr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=wr){return this.instances.has(e)}getOptions(e=wr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&o.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:PE(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=wr){return this.component?this.component.multipleInstances?e:wr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function PE(t){return t===wr?void 0:t}function VE(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DE{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new RE(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ie;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ie||(ie={}));const jE={debug:ie.DEBUG,verbose:ie.VERBOSE,info:ie.INFO,warn:ie.WARN,error:ie.ERROR,silent:ie.SILENT},LE=ie.INFO,ME={[ie.DEBUG]:"log",[ie.VERBOSE]:"log",[ie.INFO]:"info",[ie.WARN]:"warn",[ie.ERROR]:"error"},OE=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=ME[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class O0{constructor(e){this.name=e,this._logLevel=LE,this._logHandler=OE,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ie))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?jE[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ie.DEBUG,...e),this._logHandler(this,ie.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ie.VERBOSE,...e),this._logHandler(this,ie.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ie.INFO,...e),this._logHandler(this,ie.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ie.WARN,...e),this._logHandler(this,ie.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ie.ERROR,...e),this._logHandler(this,ie.ERROR,...e)}}const FE=(t,e)=>e.some(n=>t instanceof n);let Zm,ep;function zE(){return Zm||(Zm=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function UE(){return ep||(ep=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const F0=new WeakMap,jc=new WeakMap,z0=new WeakMap,Ru=new WeakMap,rd=new WeakMap;function BE(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Gn(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&F0.set(n,t)}).catch(()=>{}),rd.set(e,t),e}function $E(t){if(jc.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});jc.set(t,e)}let Lc={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return jc.get(t);if(e==="objectStoreNames")return t.objectStoreNames||z0.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Gn(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function qE(t){Lc=t(Lc)}function HE(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Pu(this),e,...n);return z0.set(r,e.sort?e.sort():[e]),Gn(r)}:UE().includes(t)?function(...e){return t.apply(Pu(this),e),Gn(F0.get(this))}:function(...e){return Gn(t.apply(Pu(this),e))}}function WE(t){return typeof t=="function"?HE(t):(t instanceof IDBTransaction&&$E(t),FE(t,zE())?new Proxy(t,Lc):t)}function Gn(t){if(t instanceof IDBRequest)return BE(t);if(Ru.has(t))return Ru.get(t);const e=WE(t);return e!==t&&(Ru.set(t,e),rd.set(e,t)),e}const Pu=t=>rd.get(t);function GE(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),l=Gn(o);return r&&o.addEventListener("upgradeneeded",u=>{r(Gn(o.result),u.oldVersion,u.newVersion,Gn(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{i&&u.addEventListener("close",()=>i()),s&&u.addEventListener("versionchange",h=>s(h.oldVersion,h.newVersion,h))}).catch(()=>{}),l}const QE=["get","getKey","getAll","getAllKeys","count"],KE=["put","add","delete","clear"],Vu=new Map;function tp(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Vu.get(e))return Vu.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=KE.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||QE.includes(n)))return;const i=async function(o,...l){const u=this.transaction(o,s?"readwrite":"readonly");let h=u.store;return r&&(h=h.index(l.shift())),(await Promise.all([h[n](...l),s&&u.done]))[0]};return Vu.set(e,i),i}qE(t=>({...t,get:(e,n,r)=>tp(e,n)||t.get(e,n,r),has:(e,n)=>!!tp(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YE{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(XE(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function XE(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Mc="@firebase/app",np="0.14.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xn=new O0("@firebase/app"),JE="@firebase/app-compat",ZE="@firebase/analytics-compat",e2="@firebase/analytics",t2="@firebase/app-check-compat",n2="@firebase/app-check",r2="@firebase/auth",s2="@firebase/auth-compat",i2="@firebase/database",o2="@firebase/data-connect",a2="@firebase/database-compat",l2="@firebase/functions",u2="@firebase/functions-compat",c2="@firebase/installations",h2="@firebase/installations-compat",d2="@firebase/messaging",f2="@firebase/messaging-compat",m2="@firebase/performance",p2="@firebase/performance-compat",g2="@firebase/remote-config",y2="@firebase/remote-config-compat",v2="@firebase/storage",_2="@firebase/storage-compat",w2="@firebase/firestore",x2="@firebase/ai",E2="@firebase/firestore-compat",T2="firebase",S2="12.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oc="[DEFAULT]",I2={[Mc]:"fire-core",[JE]:"fire-core-compat",[e2]:"fire-analytics",[ZE]:"fire-analytics-compat",[n2]:"fire-app-check",[t2]:"fire-app-check-compat",[r2]:"fire-auth",[s2]:"fire-auth-compat",[i2]:"fire-rtdb",[o2]:"fire-data-connect",[a2]:"fire-rtdb-compat",[l2]:"fire-fn",[u2]:"fire-fn-compat",[c2]:"fire-iid",[h2]:"fire-iid-compat",[d2]:"fire-fcm",[f2]:"fire-fcm-compat",[m2]:"fire-perf",[p2]:"fire-perf-compat",[g2]:"fire-rc",[y2]:"fire-rc-compat",[v2]:"fire-gcs",[_2]:"fire-gcs-compat",[w2]:"fire-fst",[E2]:"fire-fst-compat",[x2]:"fire-vertex","fire-js":"fire-js",[T2]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qa=new Map,k2=new Map,Fc=new Map;function rp(t,e){try{t.container.addComponent(e)}catch(n){xn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ha(t){const e=t.name;if(Fc.has(e))return xn.debug(`There were multiple attempts to register component ${e}.`),!1;Fc.set(e,t);for(const n of qa.values())rp(n,t);for(const n of k2.values())rp(n,t);return!0}function A2(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function b2(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Qn=new M0("app","Firebase",C2);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N2{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Xi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Qn.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R2=S2;function U0(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:Oc,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw Qn.create("bad-app-name",{appName:String(s)});if(n||(n=L0()),!n)throw Qn.create("no-options");const i=qa.get(s);if(i){if($a(n,i.options)&&$a(r,i.config))return i;throw Qn.create("duplicate-app",{appName:s})}const o=new DE(s);for(const u of Fc.values())o.addComponent(u);const l=new N2(n,r,o);return qa.set(s,l),l}function P2(t=Oc){const e=qa.get(t);if(!e&&t===Oc&&L0())return U0();if(!e)throw Qn.create("no-app",{appName:t});return e}function gs(t,e,n){let r=I2[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const o=[`Unable to register library "${r}" with version "${e}":`];s&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),xn.warn(o.join(" "));return}Ha(new Xi(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V2="firebase-heartbeat-database",D2=1,Ji="firebase-heartbeat-store";let Du=null;function B0(){return Du||(Du=GE(V2,D2,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ji)}catch(n){console.warn(n)}}}}).catch(t=>{throw Qn.create("idb-open",{originalErrorMessage:t.message})})),Du}async function j2(t){try{const n=(await B0()).transaction(Ji),r=await n.objectStore(Ji).get($0(t));return await n.done,r}catch(e){if(e instanceof js)xn.warn(e.message);else{const n=Qn.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});xn.warn(n.message)}}}async function sp(t,e){try{const r=(await B0()).transaction(Ji,"readwrite");await r.objectStore(Ji).put(e,$0(t)),await r.done}catch(n){if(n instanceof js)xn.warn(n.message);else{const r=Qn.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});xn.warn(r.message)}}}function $0(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L2=1024,M2=30;class O2{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new z2(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=ip();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>M2){const o=U2(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){xn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=ip(),{heartbeatsToSend:r,unsentEntries:s}=F2(this._heartbeatsCache.heartbeats),i=Ba(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return xn.warn(n),""}}}function ip(){return new Date().toISOString().substring(0,10)}function F2(t,e=L2){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),op(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),op(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class z2{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return kE()?AE().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await j2(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return sp(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return sp(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function op(t){return Ba(JSON.stringify({version:2,heartbeats:t})).length}function U2(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B2(t){Ha(new Xi("platform-logger",e=>new YE(e),"PRIVATE")),Ha(new Xi("heartbeat",e=>new O2(e),"PRIVATE")),gs(Mc,np,t),gs(Mc,np,"esm2020"),gs("fire-js","")}B2("");var ap=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Kn,q0;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(E,v){function T(){}T.prototype=v.prototype,E.F=v.prototype,E.prototype=new T,E.prototype.constructor=E,E.D=function(k,I,A){for(var w=Array(arguments.length-2),ee=2;ee<arguments.length;ee++)w[ee-2]=arguments[ee];return v.prototype[I].apply(k,w)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(E,v,T){T||(T=0);const k=Array(16);if(typeof v=="string")for(var I=0;I<16;++I)k[I]=v.charCodeAt(T++)|v.charCodeAt(T++)<<8|v.charCodeAt(T++)<<16|v.charCodeAt(T++)<<24;else for(I=0;I<16;++I)k[I]=v[T++]|v[T++]<<8|v[T++]<<16|v[T++]<<24;v=E.g[0],T=E.g[1],I=E.g[2];let A=E.g[3],w;w=v+(A^T&(I^A))+k[0]+3614090360&4294967295,v=T+(w<<7&4294967295|w>>>25),w=A+(I^v&(T^I))+k[1]+3905402710&4294967295,A=v+(w<<12&4294967295|w>>>20),w=I+(T^A&(v^T))+k[2]+606105819&4294967295,I=A+(w<<17&4294967295|w>>>15),w=T+(v^I&(A^v))+k[3]+3250441966&4294967295,T=I+(w<<22&4294967295|w>>>10),w=v+(A^T&(I^A))+k[4]+4118548399&4294967295,v=T+(w<<7&4294967295|w>>>25),w=A+(I^v&(T^I))+k[5]+1200080426&4294967295,A=v+(w<<12&4294967295|w>>>20),w=I+(T^A&(v^T))+k[6]+2821735955&4294967295,I=A+(w<<17&4294967295|w>>>15),w=T+(v^I&(A^v))+k[7]+4249261313&4294967295,T=I+(w<<22&4294967295|w>>>10),w=v+(A^T&(I^A))+k[8]+1770035416&4294967295,v=T+(w<<7&4294967295|w>>>25),w=A+(I^v&(T^I))+k[9]+2336552879&4294967295,A=v+(w<<12&4294967295|w>>>20),w=I+(T^A&(v^T))+k[10]+4294925233&4294967295,I=A+(w<<17&4294967295|w>>>15),w=T+(v^I&(A^v))+k[11]+2304563134&4294967295,T=I+(w<<22&4294967295|w>>>10),w=v+(A^T&(I^A))+k[12]+1804603682&4294967295,v=T+(w<<7&4294967295|w>>>25),w=A+(I^v&(T^I))+k[13]+4254626195&4294967295,A=v+(w<<12&4294967295|w>>>20),w=I+(T^A&(v^T))+k[14]+2792965006&4294967295,I=A+(w<<17&4294967295|w>>>15),w=T+(v^I&(A^v))+k[15]+1236535329&4294967295,T=I+(w<<22&4294967295|w>>>10),w=v+(I^A&(T^I))+k[1]+4129170786&4294967295,v=T+(w<<5&4294967295|w>>>27),w=A+(T^I&(v^T))+k[6]+3225465664&4294967295,A=v+(w<<9&4294967295|w>>>23),w=I+(v^T&(A^v))+k[11]+643717713&4294967295,I=A+(w<<14&4294967295|w>>>18),w=T+(A^v&(I^A))+k[0]+3921069994&4294967295,T=I+(w<<20&4294967295|w>>>12),w=v+(I^A&(T^I))+k[5]+3593408605&4294967295,v=T+(w<<5&4294967295|w>>>27),w=A+(T^I&(v^T))+k[10]+38016083&4294967295,A=v+(w<<9&4294967295|w>>>23),w=I+(v^T&(A^v))+k[15]+3634488961&4294967295,I=A+(w<<14&4294967295|w>>>18),w=T+(A^v&(I^A))+k[4]+3889429448&4294967295,T=I+(w<<20&4294967295|w>>>12),w=v+(I^A&(T^I))+k[9]+568446438&4294967295,v=T+(w<<5&4294967295|w>>>27),w=A+(T^I&(v^T))+k[14]+3275163606&4294967295,A=v+(w<<9&4294967295|w>>>23),w=I+(v^T&(A^v))+k[3]+4107603335&4294967295,I=A+(w<<14&4294967295|w>>>18),w=T+(A^v&(I^A))+k[8]+1163531501&4294967295,T=I+(w<<20&4294967295|w>>>12),w=v+(I^A&(T^I))+k[13]+2850285829&4294967295,v=T+(w<<5&4294967295|w>>>27),w=A+(T^I&(v^T))+k[2]+4243563512&4294967295,A=v+(w<<9&4294967295|w>>>23),w=I+(v^T&(A^v))+k[7]+1735328473&4294967295,I=A+(w<<14&4294967295|w>>>18),w=T+(A^v&(I^A))+k[12]+2368359562&4294967295,T=I+(w<<20&4294967295|w>>>12),w=v+(T^I^A)+k[5]+4294588738&4294967295,v=T+(w<<4&4294967295|w>>>28),w=A+(v^T^I)+k[8]+2272392833&4294967295,A=v+(w<<11&4294967295|w>>>21),w=I+(A^v^T)+k[11]+1839030562&4294967295,I=A+(w<<16&4294967295|w>>>16),w=T+(I^A^v)+k[14]+4259657740&4294967295,T=I+(w<<23&4294967295|w>>>9),w=v+(T^I^A)+k[1]+2763975236&4294967295,v=T+(w<<4&4294967295|w>>>28),w=A+(v^T^I)+k[4]+1272893353&4294967295,A=v+(w<<11&4294967295|w>>>21),w=I+(A^v^T)+k[7]+4139469664&4294967295,I=A+(w<<16&4294967295|w>>>16),w=T+(I^A^v)+k[10]+3200236656&4294967295,T=I+(w<<23&4294967295|w>>>9),w=v+(T^I^A)+k[13]+681279174&4294967295,v=T+(w<<4&4294967295|w>>>28),w=A+(v^T^I)+k[0]+3936430074&4294967295,A=v+(w<<11&4294967295|w>>>21),w=I+(A^v^T)+k[3]+3572445317&4294967295,I=A+(w<<16&4294967295|w>>>16),w=T+(I^A^v)+k[6]+76029189&4294967295,T=I+(w<<23&4294967295|w>>>9),w=v+(T^I^A)+k[9]+3654602809&4294967295,v=T+(w<<4&4294967295|w>>>28),w=A+(v^T^I)+k[12]+3873151461&4294967295,A=v+(w<<11&4294967295|w>>>21),w=I+(A^v^T)+k[15]+530742520&4294967295,I=A+(w<<16&4294967295|w>>>16),w=T+(I^A^v)+k[2]+3299628645&4294967295,T=I+(w<<23&4294967295|w>>>9),w=v+(I^(T|~A))+k[0]+4096336452&4294967295,v=T+(w<<6&4294967295|w>>>26),w=A+(T^(v|~I))+k[7]+1126891415&4294967295,A=v+(w<<10&4294967295|w>>>22),w=I+(v^(A|~T))+k[14]+2878612391&4294967295,I=A+(w<<15&4294967295|w>>>17),w=T+(A^(I|~v))+k[5]+4237533241&4294967295,T=I+(w<<21&4294967295|w>>>11),w=v+(I^(T|~A))+k[12]+1700485571&4294967295,v=T+(w<<6&4294967295|w>>>26),w=A+(T^(v|~I))+k[3]+2399980690&4294967295,A=v+(w<<10&4294967295|w>>>22),w=I+(v^(A|~T))+k[10]+4293915773&4294967295,I=A+(w<<15&4294967295|w>>>17),w=T+(A^(I|~v))+k[1]+2240044497&4294967295,T=I+(w<<21&4294967295|w>>>11),w=v+(I^(T|~A))+k[8]+1873313359&4294967295,v=T+(w<<6&4294967295|w>>>26),w=A+(T^(v|~I))+k[15]+4264355552&4294967295,A=v+(w<<10&4294967295|w>>>22),w=I+(v^(A|~T))+k[6]+2734768916&4294967295,I=A+(w<<15&4294967295|w>>>17),w=T+(A^(I|~v))+k[13]+1309151649&4294967295,T=I+(w<<21&4294967295|w>>>11),w=v+(I^(T|~A))+k[4]+4149444226&4294967295,v=T+(w<<6&4294967295|w>>>26),w=A+(T^(v|~I))+k[11]+3174756917&4294967295,A=v+(w<<10&4294967295|w>>>22),w=I+(v^(A|~T))+k[2]+718787259&4294967295,I=A+(w<<15&4294967295|w>>>17),w=T+(A^(I|~v))+k[9]+3951481745&4294967295,E.g[0]=E.g[0]+v&4294967295,E.g[1]=E.g[1]+(I+(w<<21&4294967295|w>>>11))&4294967295,E.g[2]=E.g[2]+I&4294967295,E.g[3]=E.g[3]+A&4294967295}r.prototype.v=function(E,v){v===void 0&&(v=E.length);const T=v-this.blockSize,k=this.C;let I=this.h,A=0;for(;A<v;){if(I==0)for(;A<=T;)s(this,E,A),A+=this.blockSize;if(typeof E=="string"){for(;A<v;)if(k[I++]=E.charCodeAt(A++),I==this.blockSize){s(this,k),I=0;break}}else for(;A<v;)if(k[I++]=E[A++],I==this.blockSize){s(this,k),I=0;break}}this.h=I,this.o+=v},r.prototype.A=function(){var E=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);E[0]=128;for(var v=1;v<E.length-8;++v)E[v]=0;v=this.o*8;for(var T=E.length-8;T<E.length;++T)E[T]=v&255,v/=256;for(this.v(E),E=Array(16),v=0,T=0;T<4;++T)for(let k=0;k<32;k+=8)E[v++]=this.g[T]>>>k&255;return E};function i(E,v){var T=l;return Object.prototype.hasOwnProperty.call(T,E)?T[E]:T[E]=v(E)}function o(E,v){this.h=v;const T=[];let k=!0;for(let I=E.length-1;I>=0;I--){const A=E[I]|0;k&&A==v||(T[I]=A,k=!1)}this.g=T}var l={};function u(E){return-128<=E&&E<128?i(E,function(v){return new o([v|0],v<0?-1:0)}):new o([E|0],E<0?-1:0)}function h(E){if(isNaN(E)||!isFinite(E))return m;if(E<0)return D(h(-E));const v=[];let T=1;for(let k=0;E>=T;k++)v[k]=E/T|0,T*=4294967296;return new o(v,0)}function p(E,v){if(E.length==0)throw Error("number format error: empty string");if(v=v||10,v<2||36<v)throw Error("radix out of range: "+v);if(E.charAt(0)=="-")return D(p(E.substring(1),v));if(E.indexOf("-")>=0)throw Error('number format error: interior "-" character');const T=h(Math.pow(v,8));let k=m;for(let A=0;A<E.length;A+=8){var I=Math.min(8,E.length-A);const w=parseInt(E.substring(A,A+I),v);I<8?(I=h(Math.pow(v,I)),k=k.j(I).add(h(w))):(k=k.j(T),k=k.add(h(w)))}return k}var m=u(0),g=u(1),S=u(16777216);t=o.prototype,t.m=function(){if(N(this))return-D(this).m();let E=0,v=1;for(let T=0;T<this.g.length;T++){const k=this.i(T);E+=(k>=0?k:4294967296+k)*v,v*=4294967296}return E},t.toString=function(E){if(E=E||10,E<2||36<E)throw Error("radix out of range: "+E);if(C(this))return"0";if(N(this))return"-"+D(this).toString(E);const v=h(Math.pow(E,6));var T=this;let k="";for(;;){const I=V(T,v).g;T=_(T,I.j(v));let A=((T.g.length>0?T.g[0]:T.h)>>>0).toString(E);if(T=I,C(T))return A+k;for(;A.length<6;)A="0"+A;k=A+k}},t.i=function(E){return E<0?0:E<this.g.length?this.g[E]:this.h};function C(E){if(E.h!=0)return!1;for(let v=0;v<E.g.length;v++)if(E.g[v]!=0)return!1;return!0}function N(E){return E.h==-1}t.l=function(E){return E=_(this,E),N(E)?-1:C(E)?0:1};function D(E){const v=E.g.length,T=[];for(let k=0;k<v;k++)T[k]=~E.g[k];return new o(T,~E.h).add(g)}t.abs=function(){return N(this)?D(this):this},t.add=function(E){const v=Math.max(this.g.length,E.g.length),T=[];let k=0;for(let I=0;I<=v;I++){let A=k+(this.i(I)&65535)+(E.i(I)&65535),w=(A>>>16)+(this.i(I)>>>16)+(E.i(I)>>>16);k=w>>>16,A&=65535,w&=65535,T[I]=w<<16|A}return new o(T,T[T.length-1]&-2147483648?-1:0)};function _(E,v){return E.add(D(v))}t.j=function(E){if(C(this)||C(E))return m;if(N(this))return N(E)?D(this).j(D(E)):D(D(this).j(E));if(N(E))return D(this.j(D(E)));if(this.l(S)<0&&E.l(S)<0)return h(this.m()*E.m());const v=this.g.length+E.g.length,T=[];for(var k=0;k<2*v;k++)T[k]=0;for(k=0;k<this.g.length;k++)for(let I=0;I<E.g.length;I++){const A=this.i(k)>>>16,w=this.i(k)&65535,ee=E.i(I)>>>16,Ve=E.i(I)&65535;T[2*k+2*I]+=w*Ve,x(T,2*k+2*I),T[2*k+2*I+1]+=A*Ve,x(T,2*k+2*I+1),T[2*k+2*I+1]+=w*ee,x(T,2*k+2*I+1),T[2*k+2*I+2]+=A*ee,x(T,2*k+2*I+2)}for(E=0;E<v;E++)T[E]=T[2*E+1]<<16|T[2*E];for(E=v;E<2*v;E++)T[E]=0;return new o(T,0)};function x(E,v){for(;(E[v]&65535)!=E[v];)E[v+1]+=E[v]>>>16,E[v]&=65535,v++}function b(E,v){this.g=E,this.h=v}function V(E,v){if(C(v))throw Error("division by zero");if(C(E))return new b(m,m);if(N(E))return v=V(D(E),v),new b(D(v.g),D(v.h));if(N(v))return v=V(E,D(v)),new b(D(v.g),v.h);if(E.g.length>30){if(N(E)||N(v))throw Error("slowDivide_ only works with positive integers.");for(var T=g,k=v;k.l(E)<=0;)T=M(T),k=M(k);var I=F(T,1),A=F(k,1);for(k=F(k,2),T=F(T,2);!C(k);){var w=A.add(k);w.l(E)<=0&&(I=I.add(T),A=w),k=F(k,1),T=F(T,1)}return v=_(E,I.j(v)),new b(I,v)}for(I=m;E.l(v)>=0;){for(T=Math.max(1,Math.floor(E.m()/v.m())),k=Math.ceil(Math.log(T)/Math.LN2),k=k<=48?1:Math.pow(2,k-48),A=h(T),w=A.j(v);N(w)||w.l(E)>0;)T-=k,A=h(T),w=A.j(v);C(A)&&(A=g),I=I.add(A),E=_(E,w)}return new b(I,E)}t.B=function(E){return V(this,E).h},t.and=function(E){const v=Math.max(this.g.length,E.g.length),T=[];for(let k=0;k<v;k++)T[k]=this.i(k)&E.i(k);return new o(T,this.h&E.h)},t.or=function(E){const v=Math.max(this.g.length,E.g.length),T=[];for(let k=0;k<v;k++)T[k]=this.i(k)|E.i(k);return new o(T,this.h|E.h)},t.xor=function(E){const v=Math.max(this.g.length,E.g.length),T=[];for(let k=0;k<v;k++)T[k]=this.i(k)^E.i(k);return new o(T,this.h^E.h)};function M(E){const v=E.g.length+1,T=[];for(let k=0;k<v;k++)T[k]=E.i(k)<<1|E.i(k-1)>>>31;return new o(T,E.h)}function F(E,v){const T=v>>5;v%=32;const k=E.g.length-T,I=[];for(let A=0;A<k;A++)I[A]=v>0?E.i(A+T)>>>v|E.i(A+T+1)<<32-v:E.i(A+T);return new o(I,E.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,q0=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=h,o.fromString=p,Kn=o}).apply(typeof ap<"u"?ap:typeof self<"u"?self:typeof window<"u"?window:{});var Qo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var H0,pi,W0,ha,zc,G0,Q0,K0;(function(){var t,e=Object.defineProperty;function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof Qo=="object"&&Qo];for(var c=0;c<a.length;++c){var f=a[c];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function s(a,c){if(c)e:{var f=r;a=a.split(".");for(var y=0;y<a.length-1;y++){var R=a[y];if(!(R in f))break e;f=f[R]}a=a[a.length-1],y=f[a],c=c(y),c!=y&&c!=null&&e(f,a,{configurable:!0,writable:!0,value:c})}}s("Symbol.dispose",function(a){return a||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(a){return a||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(a){return a||function(c){var f=[],y;for(y in c)Object.prototype.hasOwnProperty.call(c,y)&&f.push([y,c[y]]);return f}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},o=this||self;function l(a){var c=typeof a;return c=="object"&&a!=null||c=="function"}function u(a,c,f){return a.call.apply(a.bind,arguments)}function h(a,c,f){return h=u,h.apply(null,arguments)}function p(a,c){var f=Array.prototype.slice.call(arguments,1);return function(){var y=f.slice();return y.push.apply(y,arguments),a.apply(this,y)}}function m(a,c){function f(){}f.prototype=c.prototype,a.Z=c.prototype,a.prototype=new f,a.prototype.constructor=a,a.Ob=function(y,R,P){for(var z=Array(arguments.length-2),Z=2;Z<arguments.length;Z++)z[Z-2]=arguments[Z];return c.prototype[R].apply(y,z)}}var g=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?a=>a&&AsyncContext.Snapshot.wrap(a):a=>a;function S(a){const c=a.length;if(c>0){const f=Array(c);for(let y=0;y<c;y++)f[y]=a[y];return f}return[]}function C(a,c){for(let y=1;y<arguments.length;y++){const R=arguments[y];var f=typeof R;if(f=f!="object"?f:R?Array.isArray(R)?"array":f:"null",f=="array"||f=="object"&&typeof R.length=="number"){f=a.length||0;const P=R.length||0;a.length=f+P;for(let z=0;z<P;z++)a[f+z]=R[z]}else a.push(R)}}class N{constructor(c,f){this.i=c,this.j=f,this.h=0,this.g=null}get(){let c;return this.h>0?(this.h--,c=this.g,this.g=c.next,c.next=null):c=this.i(),c}}function D(a){o.setTimeout(()=>{throw a},0)}function _(){var a=E;let c=null;return a.g&&(c=a.g,a.g=a.g.next,a.g||(a.h=null),c.next=null),c}class x{constructor(){this.h=this.g=null}add(c,f){const y=b.get();y.set(c,f),this.h?this.h.next=y:this.g=y,this.h=y}}var b=new N(()=>new V,a=>a.reset());class V{constructor(){this.next=this.g=this.h=null}set(c,f){this.h=c,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let M,F=!1,E=new x,v=()=>{const a=Promise.resolve(void 0);M=()=>{a.then(T)}};function T(){for(var a;a=_();){try{a.h.call(a.g)}catch(f){D(f)}var c=b;c.j(a),c.h<100&&(c.h++,a.next=c.g,c.g=a)}F=!1}function k(){this.u=this.u,this.C=this.C}k.prototype.u=!1,k.prototype.dispose=function(){this.u||(this.u=!0,this.N())},k.prototype[Symbol.dispose]=function(){this.dispose()},k.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function I(a,c){this.type=a,this.g=this.target=c,this.defaultPrevented=!1}I.prototype.h=function(){this.defaultPrevented=!0};var A=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var a=!1,c=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const f=()=>{};o.addEventListener("test",f,c),o.removeEventListener("test",f,c)}catch{}return a}();function w(a){return/^[\s\xa0]*$/.test(a)}function ee(a,c){I.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a&&this.init(a,c)}m(ee,I),ee.prototype.init=function(a,c){const f=this.type=a.type,y=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;this.target=a.target||a.srcElement,this.g=c,c=a.relatedTarget,c||(f=="mouseover"?c=a.fromElement:f=="mouseout"&&(c=a.toElement)),this.relatedTarget=c,y?(this.clientX=y.clientX!==void 0?y.clientX:y.pageX,this.clientY=y.clientY!==void 0?y.clientY:y.pageY,this.screenX=y.screenX||0,this.screenY=y.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=a.pointerType,this.state=a.state,this.i=a,a.defaultPrevented&&ee.Z.h.call(this)},ee.prototype.h=function(){ee.Z.h.call(this);const a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var Ve="closure_listenable_"+(Math.random()*1e6|0),le=0;function Oe(a,c,f,y,R){this.listener=a,this.proxy=null,this.src=c,this.type=f,this.capture=!!y,this.ha=R,this.key=++le,this.da=this.fa=!1}function U(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function Q(a,c,f){for(const y in a)c.call(f,a[y],y,a)}function J(a,c){for(const f in a)c.call(void 0,a[f],f,a)}function me(a){const c={};for(const f in a)c[f]=a[f];return c}const Te="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function X(a,c){let f,y;for(let R=1;R<arguments.length;R++){y=arguments[R];for(f in y)a[f]=y[f];for(let P=0;P<Te.length;P++)f=Te[P],Object.prototype.hasOwnProperty.call(y,f)&&(a[f]=y[f])}}function de(a){this.src=a,this.g={},this.h=0}de.prototype.add=function(a,c,f,y,R){const P=a.toString();a=this.g[P],a||(a=this.g[P]=[],this.h++);const z=ue(a,c,y,R);return z>-1?(c=a[z],f||(c.fa=!1)):(c=new Oe(c,this.src,P,!!y,R),c.fa=f,a.push(c)),c};function Ge(a,c){const f=c.type;if(f in a.g){var y=a.g[f],R=Array.prototype.indexOf.call(y,c,void 0),P;(P=R>=0)&&Array.prototype.splice.call(y,R,1),P&&(U(c),a.g[f].length==0&&(delete a.g[f],a.h--))}}function ue(a,c,f,y){for(let R=0;R<a.length;++R){const P=a[R];if(!P.da&&P.listener==c&&P.capture==!!f&&P.ha==y)return R}return-1}var pt="closure_lm_"+(Math.random()*1e6|0),$r={};function Kt(a,c,f,y,R){if(Array.isArray(c)){for(let P=0;P<c.length;P++)Kt(a,c[P],f,y,R);return null}return f=Hd(f),a&&a[Ve]?a.J(c,f,l(y)?!!y.capture:!1,R):D_(a,c,f,!1,y,R)}function D_(a,c,f,y,R,P){if(!c)throw Error("Invalid event type");const z=l(R)?!!R.capture:!!R;let Z=zl(a);if(Z||(a[pt]=Z=new de(a)),f=Z.add(c,f,y,z,P),f.proxy)return f;if(y=j_(),f.proxy=y,y.src=a,y.listener=f,a.addEventListener)A||(R=z),R===void 0&&(R=!1),a.addEventListener(c.toString(),y,R);else if(a.attachEvent)a.attachEvent(qd(c.toString()),y);else if(a.addListener&&a.removeListener)a.addListener(y);else throw Error("addEventListener and attachEvent are unavailable.");return f}function j_(){function a(f){return c.call(a.src,a.listener,f)}const c=L_;return a}function $d(a,c,f,y,R){if(Array.isArray(c))for(var P=0;P<c.length;P++)$d(a,c[P],f,y,R);else y=l(y)?!!y.capture:!!y,f=Hd(f),a&&a[Ve]?(a=a.i,P=String(c).toString(),P in a.g&&(c=a.g[P],f=ue(c,f,y,R),f>-1&&(U(c[f]),Array.prototype.splice.call(c,f,1),c.length==0&&(delete a.g[P],a.h--)))):a&&(a=zl(a))&&(c=a.g[c.toString()],a=-1,c&&(a=ue(c,f,y,R)),(f=a>-1?c[a]:null)&&Fl(f))}function Fl(a){if(typeof a!="number"&&a&&!a.da){var c=a.src;if(c&&c[Ve])Ge(c.i,a);else{var f=a.type,y=a.proxy;c.removeEventListener?c.removeEventListener(f,y,a.capture):c.detachEvent?c.detachEvent(qd(f),y):c.addListener&&c.removeListener&&c.removeListener(y),(f=zl(c))?(Ge(f,a),f.h==0&&(f.src=null,c[pt]=null)):U(a)}}}function qd(a){return a in $r?$r[a]:$r[a]="on"+a}function L_(a,c){if(a.da)a=!0;else{c=new ee(c,this);const f=a.listener,y=a.ha||a.src;a.fa&&Fl(a),a=f.call(y,c)}return a}function zl(a){return a=a[pt],a instanceof de?a:null}var Ul="__closure_events_fn_"+(Math.random()*1e9>>>0);function Hd(a){return typeof a=="function"?a:(a[Ul]||(a[Ul]=function(c){return a.handleEvent(c)}),a[Ul])}function tt(){k.call(this),this.i=new de(this),this.M=this,this.G=null}m(tt,k),tt.prototype[Ve]=!0,tt.prototype.removeEventListener=function(a,c,f,y){$d(this,a,c,f,y)};function ut(a,c){var f,y=a.G;if(y)for(f=[];y;y=y.G)f.push(y);if(a=a.M,y=c.type||c,typeof c=="string")c=new I(c,a);else if(c instanceof I)c.target=c.target||a;else{var R=c;c=new I(y,a),X(c,R)}R=!0;let P,z;if(f)for(z=f.length-1;z>=0;z--)P=c.g=f[z],R=_o(P,y,!0,c)&&R;if(P=c.g=a,R=_o(P,y,!0,c)&&R,R=_o(P,y,!1,c)&&R,f)for(z=0;z<f.length;z++)P=c.g=f[z],R=_o(P,y,!1,c)&&R}tt.prototype.N=function(){if(tt.Z.N.call(this),this.i){var a=this.i;for(const c in a.g){const f=a.g[c];for(let y=0;y<f.length;y++)U(f[y]);delete a.g[c],a.h--}}this.G=null},tt.prototype.J=function(a,c,f,y){return this.i.add(String(a),c,!1,f,y)},tt.prototype.K=function(a,c,f,y){return this.i.add(String(a),c,!0,f,y)};function _o(a,c,f,y){if(c=a.i.g[String(c)],!c)return!0;c=c.concat();let R=!0;for(let P=0;P<c.length;++P){const z=c[P];if(z&&!z.da&&z.capture==f){const Z=z.listener,Fe=z.ha||z.src;z.fa&&Ge(a.i,z),R=Z.call(Fe,y)!==!1&&R}}return R&&!y.defaultPrevented}function M_(a,c){if(typeof a!="function")if(a&&typeof a.handleEvent=="function")a=h(a.handleEvent,a);else throw Error("Invalid listener argument");return Number(c)>2147483647?-1:o.setTimeout(a,c||0)}function Wd(a){a.g=M_(()=>{a.g=null,a.i&&(a.i=!1,Wd(a))},a.l);const c=a.h;a.h=null,a.m.apply(null,c)}class O_ extends k{constructor(c,f){super(),this.m=c,this.l=f,this.h=null,this.i=!1,this.g=null}j(c){this.h=arguments,this.g?this.i=!0:Wd(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Us(a){k.call(this),this.h=a,this.g={}}m(Us,k);var Gd=[];function Qd(a){Q(a.g,function(c,f){this.g.hasOwnProperty(f)&&Fl(c)},a),a.g={}}Us.prototype.N=function(){Us.Z.N.call(this),Qd(this)},Us.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Bl=o.JSON.stringify,F_=o.JSON.parse,z_=class{stringify(a){return o.JSON.stringify(a,void 0)}parse(a){return o.JSON.parse(a,void 0)}};function Kd(){}function Yd(){}var Bs={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function $l(){I.call(this,"d")}m($l,I);function ql(){I.call(this,"c")}m(ql,I);var fr={},Xd=null;function wo(){return Xd=Xd||new tt}fr.Ia="serverreachability";function Jd(a){I.call(this,fr.Ia,a)}m(Jd,I);function $s(a){const c=wo();ut(c,new Jd(c))}fr.STAT_EVENT="statevent";function Zd(a,c){I.call(this,fr.STAT_EVENT,a),this.stat=c}m(Zd,I);function ct(a){const c=wo();ut(c,new Zd(c,a))}fr.Ja="timingevent";function ef(a,c){I.call(this,fr.Ja,a),this.size=c}m(ef,I);function qs(a,c){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){a()},c)}function Hs(){this.g=!0}Hs.prototype.ua=function(){this.g=!1};function U_(a,c,f,y,R,P){a.info(function(){if(a.g)if(P){var z="",Z=P.split("&");for(let fe=0;fe<Z.length;fe++){var Fe=Z[fe].split("=");if(Fe.length>1){const $e=Fe[0];Fe=Fe[1];const Xt=$e.split("_");z=Xt.length>=2&&Xt[1]=="type"?z+($e+"="+Fe+"&"):z+($e+"=redacted&")}}}else z=null;else z=P;return"XMLHTTP REQ ("+y+") [attempt "+R+"]: "+c+`
`+f+`
`+z})}function B_(a,c,f,y,R,P,z){a.info(function(){return"XMLHTTP RESP ("+y+") [ attempt "+R+"]: "+c+`
`+f+`
`+P+" "+z})}function qr(a,c,f,y){a.info(function(){return"XMLHTTP TEXT ("+c+"): "+q_(a,f)+(y?" "+y:"")})}function $_(a,c){a.info(function(){return"TIMEOUT: "+c})}Hs.prototype.info=function(){};function q_(a,c){if(!a.g)return c;if(!c)return null;try{const P=JSON.parse(c);if(P){for(a=0;a<P.length;a++)if(Array.isArray(P[a])){var f=P[a];if(!(f.length<2)){var y=f[1];if(Array.isArray(y)&&!(y.length<1)){var R=y[0];if(R!="noop"&&R!="stop"&&R!="close")for(let z=1;z<y.length;z++)y[z]=""}}}}return Bl(P)}catch{return c}}var xo={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},tf={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},nf;function Hl(){}m(Hl,Kd),Hl.prototype.g=function(){return new XMLHttpRequest},nf=new Hl;function Ws(a){return encodeURIComponent(String(a))}function H_(a){var c=1;a=a.split(":");const f=[];for(;c>0&&a.length;)f.push(a.shift()),c--;return a.length&&f.push(a.join(":")),f}function In(a,c,f,y){this.j=a,this.i=c,this.l=f,this.S=y||1,this.V=new Us(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new rf}function rf(){this.i=null,this.g="",this.h=!1}var sf={},Wl={};function Gl(a,c,f){a.M=1,a.A=To(Yt(c)),a.u=f,a.R=!0,of(a,null)}function of(a,c){a.F=Date.now(),Eo(a),a.B=Yt(a.A);var f=a.B,y=a.S;Array.isArray(y)||(y=[String(y)]),_f(f.i,"t",y),a.C=0,f=a.j.L,a.h=new rf,a.g=Mf(a.j,f?c:null,!a.u),a.P>0&&(a.O=new O_(h(a.Y,a,a.g),a.P)),c=a.V,f=a.g,y=a.ba;var R="readystatechange";Array.isArray(R)||(R&&(Gd[0]=R.toString()),R=Gd);for(let P=0;P<R.length;P++){const z=Kt(f,R[P],y||c.handleEvent,!1,c.h||c);if(!z)break;c.g[z.key]=z}c=a.J?me(a.J):{},a.u?(a.v||(a.v="POST"),c["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.B,a.v,a.u,c)):(a.v="GET",a.g.ea(a.B,a.v,null,c)),$s(),U_(a.i,a.v,a.B,a.l,a.S,a.u)}In.prototype.ba=function(a){a=a.target;const c=this.O;c&&bn(a)==3?c.j():this.Y(a)},In.prototype.Y=function(a){try{if(a==this.g)e:{const Z=bn(this.g),Fe=this.g.ya(),fe=this.g.ca();if(!(Z<3)&&(Z!=3||this.g&&(this.h.h||this.g.la()||kf(this.g)))){this.K||Z!=4||Fe==7||(Fe==8||fe<=0?$s(3):$s(2)),Ql(this);var c=this.g.ca();this.X=c;var f=W_(this);if(this.o=c==200,B_(this.i,this.v,this.B,this.l,this.S,Z,c),this.o){if(this.U&&!this.L){t:{if(this.g){var y,R=this.g;if((y=R.g?R.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(y)){var P=y;break t}}P=null}if(a=P)qr(this.i,this.l,a,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Kl(this,a);else{this.o=!1,this.m=3,ct(12),mr(this),Gs(this);break e}}if(this.R){a=!0;let $e;for(;!this.K&&this.C<f.length;)if($e=G_(this,f),$e==Wl){Z==4&&(this.m=4,ct(14),a=!1),qr(this.i,this.l,null,"[Incomplete Response]");break}else if($e==sf){this.m=4,ct(15),qr(this.i,this.l,f,"[Invalid Chunk]"),a=!1;break}else qr(this.i,this.l,$e,null),Kl(this,$e);if(af(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Z!=4||f.length!=0||this.h.h||(this.m=1,ct(16),a=!1),this.o=this.o&&a,!a)qr(this.i,this.l,f,"[Invalid Chunked Response]"),mr(this),Gs(this);else if(f.length>0&&!this.W){this.W=!0;var z=this.j;z.g==this&&z.aa&&!z.P&&(z.j.info("Great, no buffering proxy detected. Bytes received: "+f.length),ru(z),z.P=!0,ct(11))}}else qr(this.i,this.l,f,null),Kl(this,f);Z==4&&mr(this),this.o&&!this.K&&(Z==4?Vf(this.j,this):(this.o=!1,Eo(this)))}else a1(this.g),c==400&&f.indexOf("Unknown SID")>0?(this.m=3,ct(12)):(this.m=0,ct(13)),mr(this),Gs(this)}}}catch{}finally{}};function W_(a){if(!af(a))return a.g.la();const c=kf(a.g);if(c==="")return"";let f="";const y=c.length,R=bn(a.g)==4;if(!a.h.i){if(typeof TextDecoder>"u")return mr(a),Gs(a),"";a.h.i=new o.TextDecoder}for(let P=0;P<y;P++)a.h.h=!0,f+=a.h.i.decode(c[P],{stream:!(R&&P==y-1)});return c.length=0,a.h.g+=f,a.C=0,a.h.g}function af(a){return a.g?a.v=="GET"&&a.M!=2&&a.j.Aa:!1}function G_(a,c){var f=a.C,y=c.indexOf(`
`,f);return y==-1?Wl:(f=Number(c.substring(f,y)),isNaN(f)?sf:(y+=1,y+f>c.length?Wl:(c=c.slice(y,y+f),a.C=y+f,c)))}In.prototype.cancel=function(){this.K=!0,mr(this)};function Eo(a){a.T=Date.now()+a.H,lf(a,a.H)}function lf(a,c){if(a.D!=null)throw Error("WatchDog timer not null");a.D=qs(h(a.aa,a),c)}function Ql(a){a.D&&(o.clearTimeout(a.D),a.D=null)}In.prototype.aa=function(){this.D=null;const a=Date.now();a-this.T>=0?($_(this.i,this.B),this.M!=2&&($s(),ct(17)),mr(this),this.m=2,Gs(this)):lf(this,this.T-a)};function Gs(a){a.j.I==0||a.K||Vf(a.j,a)}function mr(a){Ql(a);var c=a.O;c&&typeof c.dispose=="function"&&c.dispose(),a.O=null,Qd(a.V),a.g&&(c=a.g,a.g=null,c.abort(),c.dispose())}function Kl(a,c){try{var f=a.j;if(f.I!=0&&(f.g==a||Yl(f.h,a))){if(!a.L&&Yl(f.h,a)&&f.I==3){try{var y=f.Ba.g.parse(c)}catch{y=null}if(Array.isArray(y)&&y.length==3){var R=y;if(R[0]==0){e:if(!f.v){if(f.g)if(f.g.F+3e3<a.F)bo(f),ko(f);else break e;nu(f),ct(18)}}else f.xa=R[1],0<f.xa-f.K&&R[2]<37500&&f.F&&f.A==0&&!f.C&&(f.C=qs(h(f.Va,f),6e3));hf(f.h)<=1&&f.ta&&(f.ta=void 0)}else gr(f,11)}else if((a.L||f.g==a)&&bo(f),!w(c))for(R=f.Ba.g.parse(c),c=0;c<R.length;c++){let fe=R[c];const $e=fe[0];if(!($e<=f.K))if(f.K=$e,fe=fe[1],f.I==2)if(fe[0]=="c"){f.M=fe[1],f.ba=fe[2];const Xt=fe[3];Xt!=null&&(f.ka=Xt,f.j.info("VER="+f.ka));const yr=fe[4];yr!=null&&(f.za=yr,f.j.info("SVER="+f.za));const Cn=fe[5];Cn!=null&&typeof Cn=="number"&&Cn>0&&(y=1.5*Cn,f.O=y,f.j.info("backChannelRequestTimeoutMs_="+y)),y=f;const Nn=a.g;if(Nn){const No=Nn.g?Nn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(No){var P=y.h;P.g||No.indexOf("spdy")==-1&&No.indexOf("quic")==-1&&No.indexOf("h2")==-1||(P.j=P.l,P.g=new Set,P.h&&(Xl(P,P.h),P.h=null))}if(y.G){const su=Nn.g?Nn.g.getResponseHeader("X-HTTP-Session-Id"):null;su&&(y.wa=su,ye(y.J,y.G,su))}}f.I=3,f.l&&f.l.ra(),f.aa&&(f.T=Date.now()-a.F,f.j.info("Handshake RTT: "+f.T+"ms")),y=f;var z=a;if(y.na=Lf(y,y.L?y.ba:null,y.W),z.L){df(y.h,z);var Z=z,Fe=y.O;Fe&&(Z.H=Fe),Z.D&&(Ql(Z),Eo(Z)),y.g=z}else Rf(y);f.i.length>0&&Ao(f)}else fe[0]!="stop"&&fe[0]!="close"||gr(f,7);else f.I==3&&(fe[0]=="stop"||fe[0]=="close"?fe[0]=="stop"?gr(f,7):tu(f):fe[0]!="noop"&&f.l&&f.l.qa(fe),f.A=0)}}$s(4)}catch{}}var Q_=class{constructor(a,c){this.g=a,this.map=c}};function uf(a){this.l=a||10,o.PerformanceNavigationTiming?(a=o.performance.getEntriesByType("navigation"),a=a.length>0&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function cf(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function hf(a){return a.h?1:a.g?a.g.size:0}function Yl(a,c){return a.h?a.h==c:a.g?a.g.has(c):!1}function Xl(a,c){a.g?a.g.add(c):a.h=c}function df(a,c){a.h&&a.h==c?a.h=null:a.g&&a.g.has(c)&&a.g.delete(c)}uf.prototype.cancel=function(){if(this.i=ff(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function ff(a){if(a.h!=null)return a.i.concat(a.h.G);if(a.g!=null&&a.g.size!==0){let c=a.i;for(const f of a.g.values())c=c.concat(f.G);return c}return S(a.i)}var mf=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function K_(a,c){if(a){a=a.split("&");for(let f=0;f<a.length;f++){const y=a[f].indexOf("=");let R,P=null;y>=0?(R=a[f].substring(0,y),P=a[f].substring(y+1)):R=a[f],c(R,P?decodeURIComponent(P.replace(/\+/g," ")):"")}}}function kn(a){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let c;a instanceof kn?(this.l=a.l,Qs(this,a.j),this.o=a.o,this.g=a.g,Ks(this,a.u),this.h=a.h,Jl(this,wf(a.i)),this.m=a.m):a&&(c=String(a).match(mf))?(this.l=!1,Qs(this,c[1]||"",!0),this.o=Ys(c[2]||""),this.g=Ys(c[3]||"",!0),Ks(this,c[4]),this.h=Ys(c[5]||"",!0),Jl(this,c[6]||"",!0),this.m=Ys(c[7]||"")):(this.l=!1,this.i=new Js(null,this.l))}kn.prototype.toString=function(){const a=[];var c=this.j;c&&a.push(Xs(c,pf,!0),":");var f=this.g;return(f||c=="file")&&(a.push("//"),(c=this.o)&&a.push(Xs(c,pf,!0),"@"),a.push(Ws(f).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.u,f!=null&&a.push(":",String(f))),(f=this.h)&&(this.g&&f.charAt(0)!="/"&&a.push("/"),a.push(Xs(f,f.charAt(0)=="/"?J_:X_,!0))),(f=this.i.toString())&&a.push("?",f),(f=this.m)&&a.push("#",Xs(f,e1)),a.join("")},kn.prototype.resolve=function(a){const c=Yt(this);let f=!!a.j;f?Qs(c,a.j):f=!!a.o,f?c.o=a.o:f=!!a.g,f?c.g=a.g:f=a.u!=null;var y=a.h;if(f)Ks(c,a.u);else if(f=!!a.h){if(y.charAt(0)!="/")if(this.g&&!this.h)y="/"+y;else{var R=c.h.lastIndexOf("/");R!=-1&&(y=c.h.slice(0,R+1)+y)}if(R=y,R==".."||R==".")y="";else if(R.indexOf("./")!=-1||R.indexOf("/.")!=-1){y=R.lastIndexOf("/",0)==0,R=R.split("/");const P=[];for(let z=0;z<R.length;){const Z=R[z++];Z=="."?y&&z==R.length&&P.push(""):Z==".."?((P.length>1||P.length==1&&P[0]!="")&&P.pop(),y&&z==R.length&&P.push("")):(P.push(Z),y=!0)}y=P.join("/")}else y=R}return f?c.h=y:f=a.i.toString()!=="",f?Jl(c,wf(a.i)):f=!!a.m,f&&(c.m=a.m),c};function Yt(a){return new kn(a)}function Qs(a,c,f){a.j=f?Ys(c,!0):c,a.j&&(a.j=a.j.replace(/:$/,""))}function Ks(a,c){if(c){if(c=Number(c),isNaN(c)||c<0)throw Error("Bad port number "+c);a.u=c}else a.u=null}function Jl(a,c,f){c instanceof Js?(a.i=c,t1(a.i,a.l)):(f||(c=Xs(c,Z_)),a.i=new Js(c,a.l))}function ye(a,c,f){a.i.set(c,f)}function To(a){return ye(a,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),a}function Ys(a,c){return a?c?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function Xs(a,c,f){return typeof a=="string"?(a=encodeURI(a).replace(c,Y_),f&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function Y_(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var pf=/[#\/\?@]/g,X_=/[#\?:]/g,J_=/[#\?]/g,Z_=/[#\?@]/g,e1=/#/g;function Js(a,c){this.h=this.g=null,this.i=a||null,this.j=!!c}function pr(a){a.g||(a.g=new Map,a.h=0,a.i&&K_(a.i,function(c,f){a.add(decodeURIComponent(c.replace(/\+/g," ")),f)}))}t=Js.prototype,t.add=function(a,c){pr(this),this.i=null,a=Hr(this,a);let f=this.g.get(a);return f||this.g.set(a,f=[]),f.push(c),this.h+=1,this};function gf(a,c){pr(a),c=Hr(a,c),a.g.has(c)&&(a.i=null,a.h-=a.g.get(c).length,a.g.delete(c))}function yf(a,c){return pr(a),c=Hr(a,c),a.g.has(c)}t.forEach=function(a,c){pr(this),this.g.forEach(function(f,y){f.forEach(function(R){a.call(c,R,y,this)},this)},this)};function vf(a,c){pr(a);let f=[];if(typeof c=="string")yf(a,c)&&(f=f.concat(a.g.get(Hr(a,c))));else for(a=Array.from(a.g.values()),c=0;c<a.length;c++)f=f.concat(a[c]);return f}t.set=function(a,c){return pr(this),this.i=null,a=Hr(this,a),yf(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[c]),this.h+=1,this},t.get=function(a,c){return a?(a=vf(this,a),a.length>0?String(a[0]):c):c};function _f(a,c,f){gf(a,c),f.length>0&&(a.i=null,a.g.set(Hr(a,c),S(f)),a.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],c=Array.from(this.g.keys());for(let y=0;y<c.length;y++){var f=c[y];const R=Ws(f);f=vf(this,f);for(let P=0;P<f.length;P++){let z=R;f[P]!==""&&(z+="="+Ws(f[P])),a.push(z)}}return this.i=a.join("&")};function wf(a){const c=new Js;return c.i=a.i,a.g&&(c.g=new Map(a.g),c.h=a.h),c}function Hr(a,c){return c=String(c),a.j&&(c=c.toLowerCase()),c}function t1(a,c){c&&!a.j&&(pr(a),a.i=null,a.g.forEach(function(f,y){const R=y.toLowerCase();y!=R&&(gf(this,y),_f(this,R,f))},a)),a.j=c}function n1(a,c){const f=new Hs;if(o.Image){const y=new Image;y.onload=p(An,f,"TestLoadImage: loaded",!0,c,y),y.onerror=p(An,f,"TestLoadImage: error",!1,c,y),y.onabort=p(An,f,"TestLoadImage: abort",!1,c,y),y.ontimeout=p(An,f,"TestLoadImage: timeout",!1,c,y),o.setTimeout(function(){y.ontimeout&&y.ontimeout()},1e4),y.src=a}else c(!1)}function r1(a,c){const f=new Hs,y=new AbortController,R=setTimeout(()=>{y.abort(),An(f,"TestPingServer: timeout",!1,c)},1e4);fetch(a,{signal:y.signal}).then(P=>{clearTimeout(R),P.ok?An(f,"TestPingServer: ok",!0,c):An(f,"TestPingServer: server error",!1,c)}).catch(()=>{clearTimeout(R),An(f,"TestPingServer: error",!1,c)})}function An(a,c,f,y,R){try{R&&(R.onload=null,R.onerror=null,R.onabort=null,R.ontimeout=null),y(f)}catch{}}function s1(){this.g=new z_}function Zl(a){this.i=a.Sb||null,this.h=a.ab||!1}m(Zl,Kd),Zl.prototype.g=function(){return new So(this.i,this.h)};function So(a,c){tt.call(this),this.H=a,this.o=c,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}m(So,tt),t=So.prototype,t.open=function(a,c){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=a,this.D=c,this.readyState=1,ei(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const c={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};a&&(c.body=a),(this.H||o).fetch(new Request(this.D,c)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Zs(this)),this.readyState=0},t.Pa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,ei(this)),this.g&&(this.readyState=3,ei(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;xf(this)}else a.text().then(this.Oa.bind(this),this.ga.bind(this))};function xf(a){a.j.read().then(a.Ma.bind(a)).catch(a.ga.bind(a))}t.Ma=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var c=a.value?a.value:new Uint8Array(0);(c=this.B.decode(c,{stream:!a.done}))&&(this.response=this.responseText+=c)}a.done?Zs(this):ei(this),this.readyState==3&&xf(this)}},t.Oa=function(a){this.g&&(this.response=this.responseText=a,Zs(this))},t.Na=function(a){this.g&&(this.response=a,Zs(this))},t.ga=function(){this.g&&Zs(this)};function Zs(a){a.readyState=4,a.l=null,a.j=null,a.B=null,ei(a)}t.setRequestHeader=function(a,c){this.A.append(a,c)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],c=this.h.entries();for(var f=c.next();!f.done;)f=f.value,a.push(f[0]+": "+f[1]),f=c.next();return a.join(`\r
`)};function ei(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(So.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function Ef(a){let c="";return Q(a,function(f,y){c+=y,c+=":",c+=f,c+=`\r
`}),c}function eu(a,c,f){e:{for(y in f){var y=!1;break e}y=!0}y||(f=Ef(f),typeof a=="string"?f!=null&&Ws(f):ye(a,c,f))}function be(a){tt.call(this),this.headers=new Map,this.L=a||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}m(be,tt);var i1=/^https?$/i,o1=["POST","PUT"];t=be.prototype,t.Fa=function(a){this.H=a},t.ea=function(a,c,f,y){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);c=c?c.toUpperCase():"GET",this.D=a,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():nf.g(),this.g.onreadystatechange=g(h(this.Ca,this));try{this.B=!0,this.g.open(c,String(a),!0),this.B=!1}catch(P){Tf(this,P);return}if(a=f||"",f=new Map(this.headers),y)if(Object.getPrototypeOf(y)===Object.prototype)for(var R in y)f.set(R,y[R]);else if(typeof y.keys=="function"&&typeof y.get=="function")for(const P of y.keys())f.set(P,y.get(P));else throw Error("Unknown input type for opt_headers: "+String(y));y=Array.from(f.keys()).find(P=>P.toLowerCase()=="content-type"),R=o.FormData&&a instanceof o.FormData,!(Array.prototype.indexOf.call(o1,c,void 0)>=0)||y||R||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[P,z]of f)this.g.setRequestHeader(P,z);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(a),this.v=!1}catch(P){Tf(this,P)}};function Tf(a,c){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=c,a.o=5,Sf(a),Io(a)}function Sf(a){a.A||(a.A=!0,ut(a,"complete"),ut(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=a||7,ut(this,"complete"),ut(this,"abort"),Io(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Io(this,!0)),be.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?If(this):this.Xa())},t.Xa=function(){If(this)};function If(a){if(a.h&&typeof i<"u"){if(a.v&&bn(a)==4)setTimeout(a.Ca.bind(a),0);else if(ut(a,"readystatechange"),bn(a)==4){a.h=!1;try{const P=a.ca();e:switch(P){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var c=!0;break e;default:c=!1}var f;if(!(f=c)){var y;if(y=P===0){let z=String(a.D).match(mf)[1]||null;!z&&o.self&&o.self.location&&(z=o.self.location.protocol.slice(0,-1)),y=!i1.test(z?z.toLowerCase():"")}f=y}if(f)ut(a,"complete"),ut(a,"success");else{a.o=6;try{var R=bn(a)>2?a.g.statusText:""}catch{R=""}a.l=R+" ["+a.ca()+"]",Sf(a)}}finally{Io(a)}}}}function Io(a,c){if(a.g){a.m&&(clearTimeout(a.m),a.m=null);const f=a.g;a.g=null,c||ut(a,"ready");try{f.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function bn(a){return a.g?a.g.readyState:0}t.ca=function(){try{return bn(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(a){if(this.g){var c=this.g.responseText;return a&&c.indexOf(a)==0&&(c=c.substring(a.length)),F_(c)}};function kf(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.F){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function a1(a){const c={};a=(a.g&&bn(a)>=2&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let y=0;y<a.length;y++){if(w(a[y]))continue;var f=H_(a[y]);const R=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();const P=c[R]||[];c[R]=P,P.push(f)}J(c,function(y){return y.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function ti(a,c,f){return f&&f.internalChannelParams&&f.internalChannelParams[a]||c}function Af(a){this.za=0,this.i=[],this.j=new Hs,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=ti("failFast",!1,a),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=ti("baseRetryDelayMs",5e3,a),this.Za=ti("retryDelaySeedMs",1e4,a),this.Ta=ti("forwardChannelMaxRetries",2,a),this.va=ti("forwardChannelRequestTimeoutMs",2e4,a),this.ma=a&&a.xmlHttpFactory||void 0,this.Ua=a&&a.Rb||void 0,this.Aa=a&&a.useFetchStreams||!1,this.O=void 0,this.L=a&&a.supportsCrossDomainXhr||!1,this.M="",this.h=new uf(a&&a.concurrentRequestLimit),this.Ba=new s1,this.S=a&&a.fastHandshake||!1,this.R=a&&a.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=a&&a.Pb||!1,a&&a.ua&&this.j.ua(),a&&a.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&a&&a.detectBufferingProxy||!1,this.ia=void 0,a&&a.longPollingTimeout&&a.longPollingTimeout>0&&(this.ia=a.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Af.prototype,t.ka=8,t.I=1,t.connect=function(a,c,f,y){ct(0),this.W=a,this.H=c||{},f&&y!==void 0&&(this.H.OSID=f,this.H.OAID=y),this.F=this.X,this.J=Lf(this,null,this.W),Ao(this)};function tu(a){if(bf(a),a.I==3){var c=a.V++,f=Yt(a.J);if(ye(f,"SID",a.M),ye(f,"RID",c),ye(f,"TYPE","terminate"),ni(a,f),c=new In(a,a.j,c),c.M=2,c.A=To(Yt(f)),f=!1,o.navigator&&o.navigator.sendBeacon)try{f=o.navigator.sendBeacon(c.A.toString(),"")}catch{}!f&&o.Image&&(new Image().src=c.A,f=!0),f||(c.g=Mf(c.j,null),c.g.ea(c.A)),c.F=Date.now(),Eo(c)}jf(a)}function ko(a){a.g&&(ru(a),a.g.cancel(),a.g=null)}function bf(a){ko(a),a.v&&(o.clearTimeout(a.v),a.v=null),bo(a),a.h.cancel(),a.m&&(typeof a.m=="number"&&o.clearTimeout(a.m),a.m=null)}function Ao(a){if(!cf(a.h)&&!a.m){a.m=!0;var c=a.Ea;M||v(),F||(M(),F=!0),E.add(c,a),a.D=0}}function l1(a,c){return hf(a.h)>=a.h.j-(a.m?1:0)?!1:a.m?(a.i=c.G.concat(a.i),!0):a.I==1||a.I==2||a.D>=(a.Sa?0:a.Ta)?!1:(a.m=qs(h(a.Ea,a,c),Df(a,a.D)),a.D++,!0)}t.Ea=function(a){if(this.m)if(this.m=null,this.I==1){if(!a){this.V=Math.floor(Math.random()*1e5),a=this.V++;const R=new In(this,this.j,a);let P=this.o;if(this.U&&(P?(P=me(P),X(P,this.U)):P=this.U),this.u!==null||this.R||(R.J=P,P=null),this.S)e:{for(var c=0,f=0;f<this.i.length;f++){t:{var y=this.i[f];if("__data__"in y.map&&(y=y.map.__data__,typeof y=="string")){y=y.length;break t}y=void 0}if(y===void 0)break;if(c+=y,c>4096){c=f;break e}if(c===4096||f===this.i.length-1){c=f+1;break e}}c=1e3}else c=1e3;c=Nf(this,R,c),f=Yt(this.J),ye(f,"RID",a),ye(f,"CVER",22),this.G&&ye(f,"X-HTTP-Session-Id",this.G),ni(this,f),P&&(this.R?c="headers="+Ws(Ef(P))+"&"+c:this.u&&eu(f,this.u,P)),Xl(this.h,R),this.Ra&&ye(f,"TYPE","init"),this.S?(ye(f,"$req",c),ye(f,"SID","null"),R.U=!0,Gl(R,f,null)):Gl(R,f,c),this.I=2}}else this.I==3&&(a?Cf(this,a):this.i.length==0||cf(this.h)||Cf(this))};function Cf(a,c){var f;c?f=c.l:f=a.V++;const y=Yt(a.J);ye(y,"SID",a.M),ye(y,"RID",f),ye(y,"AID",a.K),ni(a,y),a.u&&a.o&&eu(y,a.u,a.o),f=new In(a,a.j,f,a.D+1),a.u===null&&(f.J=a.o),c&&(a.i=c.G.concat(a.i)),c=Nf(a,f,1e3),f.H=Math.round(a.va*.5)+Math.round(a.va*.5*Math.random()),Xl(a.h,f),Gl(f,y,c)}function ni(a,c){a.H&&Q(a.H,function(f,y){ye(c,y,f)}),a.l&&Q({},function(f,y){ye(c,y,f)})}function Nf(a,c,f){f=Math.min(a.i.length,f);const y=a.l?h(a.l.Ka,a.l,a):null;e:{var R=a.i;let Z=-1;for(;;){const Fe=["count="+f];Z==-1?f>0?(Z=R[0].g,Fe.push("ofs="+Z)):Z=0:Fe.push("ofs="+Z);let fe=!0;for(let $e=0;$e<f;$e++){var P=R[$e].g;const Xt=R[$e].map;if(P-=Z,P<0)Z=Math.max(0,R[$e].g-100),fe=!1;else try{P="req"+P+"_"||"";try{var z=Xt instanceof Map?Xt:Object.entries(Xt);for(const[yr,Cn]of z){let Nn=Cn;l(Cn)&&(Nn=Bl(Cn)),Fe.push(P+yr+"="+encodeURIComponent(Nn))}}catch(yr){throw Fe.push(P+"type="+encodeURIComponent("_badmap")),yr}}catch{y&&y(Xt)}}if(fe){z=Fe.join("&");break e}}z=void 0}return a=a.i.splice(0,f),c.G=a,z}function Rf(a){if(!a.g&&!a.v){a.Y=1;var c=a.Da;M||v(),F||(M(),F=!0),E.add(c,a),a.A=0}}function nu(a){return a.g||a.v||a.A>=3?!1:(a.Y++,a.v=qs(h(a.Da,a),Df(a,a.A)),a.A++,!0)}t.Da=function(){if(this.v=null,Pf(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var a=4*this.T;this.j.info("BP detection timer enabled: "+a),this.B=qs(h(this.Wa,this),a)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,ct(10),ko(this),Pf(this))};function ru(a){a.B!=null&&(o.clearTimeout(a.B),a.B=null)}function Pf(a){a.g=new In(a,a.j,"rpc",a.Y),a.u===null&&(a.g.J=a.o),a.g.P=0;var c=Yt(a.na);ye(c,"RID","rpc"),ye(c,"SID",a.M),ye(c,"AID",a.K),ye(c,"CI",a.F?"0":"1"),!a.F&&a.ia&&ye(c,"TO",a.ia),ye(c,"TYPE","xmlhttp"),ni(a,c),a.u&&a.o&&eu(c,a.u,a.o),a.O&&(a.g.H=a.O);var f=a.g;a=a.ba,f.M=1,f.A=To(Yt(c)),f.u=null,f.R=!0,of(f,a)}t.Va=function(){this.C!=null&&(this.C=null,ko(this),nu(this),ct(19))};function bo(a){a.C!=null&&(o.clearTimeout(a.C),a.C=null)}function Vf(a,c){var f=null;if(a.g==c){bo(a),ru(a),a.g=null;var y=2}else if(Yl(a.h,c))f=c.G,df(a.h,c),y=1;else return;if(a.I!=0){if(c.o)if(y==1){f=c.u?c.u.length:0,c=Date.now()-c.F;var R=a.D;y=wo(),ut(y,new ef(y,f)),Ao(a)}else Rf(a);else if(R=c.m,R==3||R==0&&c.X>0||!(y==1&&l1(a,c)||y==2&&nu(a)))switch(f&&f.length>0&&(c=a.h,c.i=c.i.concat(f)),R){case 1:gr(a,5);break;case 4:gr(a,10);break;case 3:gr(a,6);break;default:gr(a,2)}}}function Df(a,c){let f=a.Qa+Math.floor(Math.random()*a.Za);return a.isActive()||(f*=2),f*c}function gr(a,c){if(a.j.info("Error code "+c),c==2){var f=h(a.bb,a),y=a.Ua;const R=!y;y=new kn(y||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||Qs(y,"https"),To(y),R?n1(y.toString(),f):r1(y.toString(),f)}else ct(2);a.I=0,a.l&&a.l.pa(c),jf(a),bf(a)}t.bb=function(a){a?(this.j.info("Successfully pinged google.com"),ct(2)):(this.j.info("Failed to ping google.com"),ct(1))};function jf(a){if(a.I=0,a.ja=[],a.l){const c=ff(a.h);(c.length!=0||a.i.length!=0)&&(C(a.ja,c),C(a.ja,a.i),a.h.i.length=0,S(a.i),a.i.length=0),a.l.oa()}}function Lf(a,c,f){var y=f instanceof kn?Yt(f):new kn(f);if(y.g!="")c&&(y.g=c+"."+y.g),Ks(y,y.u);else{var R=o.location;y=R.protocol,c=c?c+"."+R.hostname:R.hostname,R=+R.port;const P=new kn(null);y&&Qs(P,y),c&&(P.g=c),R&&Ks(P,R),f&&(P.h=f),y=P}return f=a.G,c=a.wa,f&&c&&ye(y,f,c),ye(y,"VER",a.ka),ni(a,y),y}function Mf(a,c,f){if(c&&!a.L)throw Error("Can't create secondary domain capable XhrIo object.");return c=a.Aa&&!a.ma?new be(new Zl({ab:f})):new be(a.ma),c.Fa(a.L),c}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Of(){}t=Of.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Co(){}Co.prototype.g=function(a,c){return new Tt(a,c)};function Tt(a,c){tt.call(this),this.g=new Af(c),this.l=a,this.h=c&&c.messageUrlParams||null,a=c&&c.messageHeaders||null,c&&c.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=c&&c.initMessageHeaders||null,c&&c.messageContentType&&(a?a["X-WebChannel-Content-Type"]=c.messageContentType:a={"X-WebChannel-Content-Type":c.messageContentType}),c&&c.sa&&(a?a["X-WebChannel-Client-Profile"]=c.sa:a={"X-WebChannel-Client-Profile":c.sa}),this.g.U=a,(a=c&&c.Qb)&&!w(a)&&(this.g.u=a),this.A=c&&c.supportsCrossDomainXhr||!1,this.v=c&&c.sendRawJson||!1,(c=c&&c.httpSessionIdParam)&&!w(c)&&(this.g.G=c,a=this.h,a!==null&&c in a&&(a=this.h,c in a&&delete a[c])),this.j=new Wr(this)}m(Tt,tt),Tt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Tt.prototype.close=function(){tu(this.g)},Tt.prototype.o=function(a){var c=this.g;if(typeof a=="string"){var f={};f.__data__=a,a=f}else this.v&&(f={},f.__data__=Bl(a),a=f);c.i.push(new Q_(c.Ya++,a)),c.I==3&&Ao(c)},Tt.prototype.N=function(){this.g.l=null,delete this.j,tu(this.g),delete this.g,Tt.Z.N.call(this)};function Ff(a){$l.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var c=a.__sm__;if(c){e:{for(const f in c){a=f;break e}a=void 0}(this.i=a)&&(a=this.i,c=c!==null&&a in c?c[a]:void 0),this.data=c}else this.data=a}m(Ff,$l);function zf(){ql.call(this),this.status=1}m(zf,ql);function Wr(a){this.g=a}m(Wr,Of),Wr.prototype.ra=function(){ut(this.g,"a")},Wr.prototype.qa=function(a){ut(this.g,new Ff(a))},Wr.prototype.pa=function(a){ut(this.g,new zf)},Wr.prototype.oa=function(){ut(this.g,"b")},Co.prototype.createWebChannel=Co.prototype.g,Tt.prototype.send=Tt.prototype.o,Tt.prototype.open=Tt.prototype.m,Tt.prototype.close=Tt.prototype.close,K0=function(){return new Co},Q0=function(){return wo()},G0=fr,zc={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},xo.NO_ERROR=0,xo.TIMEOUT=8,xo.HTTP_ERROR=6,ha=xo,tf.COMPLETE="complete",W0=tf,Yd.EventType=Bs,Bs.OPEN="a",Bs.CLOSE="b",Bs.ERROR="c",Bs.MESSAGE="d",tt.prototype.listen=tt.prototype.J,pi=Yd,be.prototype.listenOnce=be.prototype.K,be.prototype.getLastError=be.prototype.Ha,be.prototype.getLastErrorCode=be.prototype.ya,be.prototype.getStatus=be.prototype.ca,be.prototype.getResponseJson=be.prototype.La,be.prototype.getResponseText=be.prototype.la,be.prototype.send=be.prototype.ea,be.prototype.setWithCredentials=be.prototype.Fa,H0=be}).apply(typeof Qo<"u"?Qo:typeof self<"u"?self:typeof window<"u"?window:{});const lp="@firebase/firestore",up="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class it{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}it.UNAUTHENTICATED=new it(null),it.GOOGLE_CREDENTIALS=new it("google-credentials-uid"),it.FIRST_PARTY=new it("first-party-uid"),it.MOCK_USER=new it("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ls="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lr=new O0("@firebase/firestore");function Qr(){return Lr.logLevel}function $(t,...e){if(Lr.logLevel<=ie.DEBUG){const n=e.map(sd);Lr.debug(`Firestore (${Ls}): ${t}`,...n)}}function En(t,...e){if(Lr.logLevel<=ie.ERROR){const n=e.map(sd);Lr.error(`Firestore (${Ls}): ${t}`,...n)}}function Is(t,...e){if(Lr.logLevel<=ie.WARN){const n=e.map(sd);Lr.warn(`Firestore (${Ls}): ${t}`,...n)}}function sd(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,Y0(t,r,n)}function Y0(t,e,n){let r=`FIRESTORE (${Ls}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw En(r),new Error(r)}function ce(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||Y0(e,s,r)}function Y(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class B extends js{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X0{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class $2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(it.UNAUTHENTICATED))}shutdown(){}}class q2{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class H2{constructor(e){this.t=e,this.currentUser=it.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ce(this.o===void 0,42304);let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let i=new Yn;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Yn,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},l=u=>{$("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):($("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Yn)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?($("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ce(typeof r.accessToken=="string",31837,{l:r}),new X0(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ce(e===null||typeof e=="string",2055,{h:e}),new it(e)}}class W2{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=it.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class G2{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new W2(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(it.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class cp{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Q2{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,b2(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){ce(this.o===void 0,3512);const r=i=>{i.error!=null&&$("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,$("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{$("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):$("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new cp(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ce(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new cp(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K2(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class id{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=K2(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function ne(t,e){return t<e?-1:t>e?1:0}function Uc(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),i=e.charAt(r);if(s!==i)return ju(s)===ju(i)?ne(s,i):ju(s)?1:-1}return ne(t.length,e.length)}const Y2=55296,X2=57343;function ju(t){const e=t.charCodeAt(0);return e>=Y2&&e<=X2}function ks(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hp="__name__";class en{constructor(e,n,r){n===void 0?n=0:n>e.length&&G(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&G(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return en.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof en?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=en.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return ne(e.length,n.length)}static compareSegments(e,n){const r=en.isNumericId(e),s=en.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?en.extractNumericId(e).compare(en.extractNumericId(n)):Uc(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Kn.fromString(e.substring(4,e.length-2))}}class pe extends en{construct(e,n,r){return new pe(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new B(j.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new pe(n)}static emptyPath(){return new pe([])}}const J2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Xe extends en{construct(e,n,r){return new Xe(e,n,r)}static isValidIdentifier(e){return J2.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Xe.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===hp}static keyField(){return new Xe([hp])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new B(j.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new B(j.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new B(j.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,s+=2}else l==="`"?(o=!o,s++):l!=="."||o?(r+=l,s++):(i(),s++)}if(i(),o)throw new B(j.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Xe(n)}static emptyPath(){return new Xe([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W{constructor(e){this.path=e}static fromPath(e){return new W(pe.fromString(e))}static fromName(e){return new W(pe.fromString(e).popFirst(5))}static empty(){return new W(pe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&pe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return pe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new W(new pe(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J0(t,e,n){if(!n)throw new B(j.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Z2(t,e,n,r){if(e===!0&&r===!0)throw new B(j.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function dp(t){if(!W.isDocumentKey(t))throw new B(j.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function fp(t){if(W.isDocumentKey(t))throw new B(j.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Z0(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function wl(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":G(12329,{type:typeof t})}function Lt(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new B(j.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=wl(t);throw new B(j.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Me(t,e){const n={typeString:t};return e&&(n.value=e),n}function fo(t,e){if(!Z0(t))throw new B(j.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(s&&typeof o!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new B(j.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mp=-62135596800,pp=1e6;class _e{static now(){return _e.fromMillis(Date.now())}static fromDate(e){return _e.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*pp);return new _e(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new B(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new B(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<mp)throw new B(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new B(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/pp}_compareTo(e){return this.seconds===e.seconds?ne(this.nanoseconds,e.nanoseconds):ne(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:_e._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(fo(e,_e._jsonSchema))return new _e(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-mp;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}_e._jsonSchemaVersion="firestore/timestamp/1.0",_e._jsonSchema={type:Me("string",_e._jsonSchemaVersion),seconds:Me("number"),nanoseconds:Me("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K{static fromTimestamp(e){return new K(e)}static min(){return new K(new _e(0,0))}static max(){return new K(new _e(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zi=-1;function eT(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=K.fromTimestamp(r===1e9?new _e(n+1,0):new _e(n,r));return new er(s,W.empty(),e)}function tT(t){return new er(t.readTime,t.key,Zi)}class er{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new er(K.min(),W.empty(),Zi)}static max(){return new er(K.max(),W.empty(),Zi)}}function nT(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=W.comparator(t.documentKey,e.documentKey),n!==0?n:ne(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rT="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class sT{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ms(t){if(t.code!==j.FAILED_PRECONDITION||t.message!==rT)throw t;$("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&G(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new L((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof L?n:L.resolve(n)}catch(n){return L.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):L.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):L.reject(n)}static resolve(e){return new L((n,r)=>{n(e)})}static reject(e){return new L((n,r)=>{r(e)})}static waitFor(e){return new L((n,r)=>{let s=0,i=0,o=!1;e.forEach(l=>{++s,l.next(()=>{++i,o&&i===s&&n()},u=>r(u))}),o=!0,i===s&&n()})}static or(e){let n=L.resolve(!1);for(const r of e)n=n.next(s=>s?L.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new L((r,s)=>{const i=e.length,o=new Array(i);let l=0;for(let u=0;u<i;u++){const h=u;n(e[h]).next(p=>{o[h]=p,++l,l===i&&r(o)},p=>s(p))}})}static doWhile(e,n){return new L((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function iT(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Os(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xl{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}xl.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const od=-1;function El(t){return t==null}function Wa(t){return t===0&&1/t==-1/0}function oT(t){return typeof t=="number"&&Number.isInteger(t)&&!Wa(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ev="";function aT(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=gp(e)),e=lT(t.get(n),e);return gp(e)}function lT(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case ev:n+="";break;default:n+=i}}return n}function gp(t){return t+ev+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yp(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function cr(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function tv(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{constructor(e,n){this.comparator=e,this.root=n||Ke.EMPTY}insert(e,n){return new Ae(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ke.BLACK,null,null))}remove(e){return new Ae(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ke.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ko(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ko(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ko(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ko(this.root,e,this.comparator,!0)}}class Ko{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ke{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Ke.RED,this.left=s??Ke.EMPTY,this.right=i??Ke.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new Ke(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Ke.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Ke.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ke.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ke.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw G(43730,{key:this.key,value:this.value});if(this.right.isRed())throw G(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw G(27949);return e+(this.isRed()?0:1)}}Ke.EMPTY=null,Ke.RED=!0,Ke.BLACK=!1;Ke.EMPTY=new class{constructor(){this.size=0}get key(){throw G(57766)}get value(){throw G(16141)}get color(){throw G(16727)}get left(){throw G(29726)}get right(){throw G(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new Ke(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Be{constructor(e){this.comparator=e,this.data=new Ae(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new vp(this.data.getIterator())}getIteratorFrom(e){return new vp(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Be)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Be(this.comparator);return n.data=e,n}}class vp{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kt{constructor(e){this.fields=e,e.sort(Xe.comparator)}static empty(){return new kt([])}unionWith(e){let n=new Be(Xe.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new kt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ks(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nv extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class et{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new nv("Invalid base64 string: "+i):i}}(e);return new et(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new et(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ne(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}et.EMPTY_BYTE_STRING=new et("");const uT=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function tr(t){if(ce(!!t,39018),typeof t=="string"){let e=0;const n=uT.exec(t);if(ce(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ne(t.seconds),nanos:Ne(t.nanos)}}function Ne(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function nr(t){return typeof t=="string"?et.fromBase64String(t):et.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rv="server_timestamp",sv="__type__",iv="__previous_value__",ov="__local_write_time__";function ad(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[sv])==null?void 0:r.stringValue)===rv}function Tl(t){const e=t.mapValue.fields[iv];return ad(e)?Tl(e):e}function eo(t){const e=tr(t.mapValue.fields[ov].timestampValue);return new _e(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cT{constructor(e,n,r,s,i,o,l,u,h,p){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=h,this.isUsingEmulator=p}}const Ga="(default)";class to{constructor(e,n){this.projectId=e,this.database=n||Ga}static empty(){return new to("","")}get isDefaultDatabase(){return this.database===Ga}isEqual(e){return e instanceof to&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const av="__type__",hT="__max__",Yo={mapValue:{}},lv="__vector__",Qa="value";function rr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?ad(t)?4:fT(t)?9007199254740991:dT(t)?10:11:G(28295,{value:t})}function hn(t,e){if(t===e)return!0;const n=rr(t);if(n!==rr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return eo(t).isEqual(eo(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=tr(s.timestampValue),l=tr(i.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return nr(s.bytesValue).isEqual(nr(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Ne(s.geoPointValue.latitude)===Ne(i.geoPointValue.latitude)&&Ne(s.geoPointValue.longitude)===Ne(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Ne(s.integerValue)===Ne(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Ne(s.doubleValue),l=Ne(i.doubleValue);return o===l?Wa(o)===Wa(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return ks(t.arrayValue.values||[],e.arrayValue.values||[],hn);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},l=i.mapValue.fields||{};if(yp(o)!==yp(l))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(l[u]===void 0||!hn(o[u],l[u])))return!1;return!0}(t,e);default:return G(52216,{left:t})}}function no(t,e){return(t.values||[]).find(n=>hn(n,e))!==void 0}function As(t,e){if(t===e)return 0;const n=rr(t),r=rr(e);if(n!==r)return ne(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ne(t.booleanValue,e.booleanValue);case 2:return function(i,o){const l=Ne(i.integerValue||i.doubleValue),u=Ne(o.integerValue||o.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return _p(t.timestampValue,e.timestampValue);case 4:return _p(eo(t),eo(e));case 5:return Uc(t.stringValue,e.stringValue);case 6:return function(i,o){const l=nr(i),u=nr(o);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const l=i.split("/"),u=o.split("/");for(let h=0;h<l.length&&h<u.length;h++){const p=ne(l[h],u[h]);if(p!==0)return p}return ne(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const l=ne(Ne(i.latitude),Ne(o.latitude));return l!==0?l:ne(Ne(i.longitude),Ne(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return wp(t.arrayValue,e.arrayValue);case 10:return function(i,o){var g,S,C,N;const l=i.fields||{},u=o.fields||{},h=(g=l[Qa])==null?void 0:g.arrayValue,p=(S=u[Qa])==null?void 0:S.arrayValue,m=ne(((C=h==null?void 0:h.values)==null?void 0:C.length)||0,((N=p==null?void 0:p.values)==null?void 0:N.length)||0);return m!==0?m:wp(h,p)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===Yo.mapValue&&o===Yo.mapValue)return 0;if(i===Yo.mapValue)return 1;if(o===Yo.mapValue)return-1;const l=i.fields||{},u=Object.keys(l),h=o.fields||{},p=Object.keys(h);u.sort(),p.sort();for(let m=0;m<u.length&&m<p.length;++m){const g=Uc(u[m],p[m]);if(g!==0)return g;const S=As(l[u[m]],h[p[m]]);if(S!==0)return S}return ne(u.length,p.length)}(t.mapValue,e.mapValue);default:throw G(23264,{he:n})}}function _p(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ne(t,e);const n=tr(t),r=tr(e),s=ne(n.seconds,r.seconds);return s!==0?s:ne(n.nanos,r.nanos)}function wp(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=As(n[s],r[s]);if(i)return i}return ne(n.length,r.length)}function bs(t){return Bc(t)}function Bc(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=tr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return nr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return W.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Bc(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${Bc(n.fields[o])}`;return s+"}"}(t.mapValue):G(61005,{value:t})}function da(t){switch(rr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Tl(t);return e?16+da(e):16;case 5:return 2*t.stringValue.length;case 6:return nr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+da(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return cr(r.fields,(i,o)=>{s+=i.length+da(o)}),s}(t.mapValue);default:throw G(13486,{value:t})}}function xp(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function $c(t){return!!t&&"integerValue"in t}function ld(t){return!!t&&"arrayValue"in t}function Ep(t){return!!t&&"nullValue"in t}function Tp(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function fa(t){return!!t&&"mapValue"in t}function dT(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[av])==null?void 0:r.stringValue)===lv}function Ci(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return cr(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Ci(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ci(t.arrayValue.values[n]);return e}return{...t}}function fT(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===hT}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vt{constructor(e){this.value=e}static empty(){return new vt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!fa(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ci(n)}setAll(e){let n=Xe.emptyPath(),r={},s=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,r,s),r={},s=[],n=l.popLast()}o?r[l.lastSegment()]=Ci(o):s.push(l.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());fa(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return hn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];fa(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){cr(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new vt(Ci(this.value))}}function uv(t){const e=[];return cr(t.fields,(n,r)=>{const s=new Xe([n]);if(fa(r)){const i=uv(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new kt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at{constructor(e,n,r,s,i,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=l}static newInvalidDocument(e){return new at(e,0,K.min(),K.min(),K.min(),vt.empty(),0)}static newFoundDocument(e,n,r,s){return new at(e,1,n,K.min(),r,s,0)}static newNoDocument(e,n){return new at(e,2,n,K.min(),K.min(),vt.empty(),0)}static newUnknownDocument(e,n){return new at(e,3,n,K.min(),K.min(),vt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(K.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=vt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=vt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=K.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof at&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new at(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ka{constructor(e,n){this.position=e,this.inclusive=n}}function Sp(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=W.comparator(W.fromName(o.referenceValue),n.key):r=As(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function Ip(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!hn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ro{constructor(e,n="asc"){this.field=e,this.dir=n}}function mT(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cv{}class Le extends cv{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new gT(e,n,r):n==="array-contains"?new _T(e,r):n==="in"?new wT(e,r):n==="not-in"?new xT(e,r):n==="array-contains-any"?new ET(e,r):new Le(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new yT(e,r):new vT(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(As(n,this.value)):n!==null&&rr(this.value)===rr(n)&&this.matchesComparison(As(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return G(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Qt extends cv{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Qt(e,n)}matches(e){return hv(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function hv(t){return t.op==="and"}function dv(t){return pT(t)&&hv(t)}function pT(t){for(const e of t.filters)if(e instanceof Qt)return!1;return!0}function qc(t){if(t instanceof Le)return t.field.canonicalString()+t.op.toString()+bs(t.value);if(dv(t))return t.filters.map(e=>qc(e)).join(",");{const e=t.filters.map(n=>qc(n)).join(",");return`${t.op}(${e})`}}function fv(t,e){return t instanceof Le?function(r,s){return s instanceof Le&&r.op===s.op&&r.field.isEqual(s.field)&&hn(r.value,s.value)}(t,e):t instanceof Qt?function(r,s){return s instanceof Qt&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,l)=>i&&fv(o,s.filters[l]),!0):!1}(t,e):void G(19439)}function mv(t){return t instanceof Le?function(n){return`${n.field.canonicalString()} ${n.op} ${bs(n.value)}`}(t):t instanceof Qt?function(n){return n.op.toString()+" {"+n.getFilters().map(mv).join(" ,")+"}"}(t):"Filter"}class gT extends Le{constructor(e,n,r){super(e,n,r),this.key=W.fromName(r.referenceValue)}matches(e){const n=W.comparator(e.key,this.key);return this.matchesComparison(n)}}class yT extends Le{constructor(e,n){super(e,"in",n),this.keys=pv("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class vT extends Le{constructor(e,n){super(e,"not-in",n),this.keys=pv("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function pv(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>W.fromName(r.referenceValue))}class _T extends Le{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return ld(n)&&no(n.arrayValue,this.value)}}class wT extends Le{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&no(this.value.arrayValue,n)}}class xT extends Le{constructor(e,n){super(e,"not-in",n)}matches(e){if(no(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!no(this.value.arrayValue,n)}}class ET extends Le{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!ld(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>no(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TT{constructor(e,n=null,r=[],s=[],i=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=l,this.Te=null}}function kp(t,e=null,n=[],r=[],s=null,i=null,o=null){return new TT(t,e,n,r,s,i,o)}function ud(t){const e=Y(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>qc(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),El(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>bs(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>bs(r)).join(",")),e.Te=n}return e.Te}function cd(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!mT(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!fv(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Ip(t.startAt,e.startAt)&&Ip(t.endAt,e.endAt)}function Hc(t){return W.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fs{constructor(e,n=null,r=[],s=[],i=null,o="F",l=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=l,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function ST(t,e,n,r,s,i,o,l){return new Fs(t,e,n,r,s,i,o,l)}function hd(t){return new Fs(t)}function Ap(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function gv(t){return t.collectionGroup!==null}function Ni(t){const e=Y(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new Be(Xe.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(h=>{h.isInequality()&&(l=l.add(h.field))})}),l})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new ro(i,r))}),n.has(Xe.keyField().canonicalString())||e.Ie.push(new ro(Xe.keyField(),r))}return e.Ie}function on(t){const e=Y(t);return e.Ee||(e.Ee=IT(e,Ni(t))),e.Ee}function IT(t,e){if(t.limitType==="F")return kp(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new ro(s.field,i)});const n=t.endAt?new Ka(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Ka(t.startAt.position,t.startAt.inclusive):null;return kp(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Wc(t,e){const n=t.filters.concat([e]);return new Fs(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Gc(t,e,n){return new Fs(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Sl(t,e){return cd(on(t),on(e))&&t.limitType===e.limitType}function yv(t){return`${ud(on(t))}|lt:${t.limitType}`}function Kr(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>mv(s)).join(", ")}]`),El(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>bs(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>bs(s)).join(",")),`Target(${r})`}(on(t))}; limitType=${t.limitType})`}function Il(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):W.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of Ni(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,l,u){const h=Sp(o,l,u);return o.inclusive?h<=0:h<0}(r.startAt,Ni(r),s)||r.endAt&&!function(o,l,u){const h=Sp(o,l,u);return o.inclusive?h>=0:h>0}(r.endAt,Ni(r),s))}(t,e)}function kT(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function vv(t){return(e,n)=>{let r=!1;for(const s of Ni(t)){const i=AT(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function AT(t,e,n){const r=t.field.isKeyField()?W.comparator(e.key,n.key):function(i,o,l){const u=o.data.field(i),h=l.data.field(i);return u!==null&&h!==null?As(u,h):G(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return G(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){cr(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return tv(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bT=new Ae(W.comparator);function Tn(){return bT}const _v=new Ae(W.comparator);function gi(...t){let e=_v;for(const n of t)e=e.insert(n.key,n);return e}function wv(t){let e=_v;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Ir(){return Ri()}function xv(){return Ri()}function Ri(){return new Ur(t=>t.toString(),(t,e)=>t.isEqual(e))}const CT=new Ae(W.comparator),NT=new Be(W.comparator);function re(...t){let e=NT;for(const n of t)e=e.add(n);return e}const RT=new Be(ne);function PT(){return RT}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dd(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Wa(e)?"-0":e}}function Ev(t){return{integerValue:""+t}}function VT(t,e){return oT(e)?Ev(e):dd(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kl{constructor(){this._=void 0}}function DT(t,e,n){return t instanceof so?function(s,i){const o={fields:{[sv]:{stringValue:rv},[ov]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&ad(i)&&(i=Tl(i)),i&&(o.fields[iv]=i),{mapValue:o}}(n,e):t instanceof io?Sv(t,e):t instanceof oo?Iv(t,e):function(s,i){const o=Tv(s,i),l=bp(o)+bp(s.Ae);return $c(o)&&$c(s.Ae)?Ev(l):dd(s.serializer,l)}(t,e)}function jT(t,e,n){return t instanceof io?Sv(t,e):t instanceof oo?Iv(t,e):n}function Tv(t,e){return t instanceof Ya?function(r){return $c(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class so extends kl{}class io extends kl{constructor(e){super(),this.elements=e}}function Sv(t,e){const n=kv(e);for(const r of t.elements)n.some(s=>hn(s,r))||n.push(r);return{arrayValue:{values:n}}}class oo extends kl{constructor(e){super(),this.elements=e}}function Iv(t,e){let n=kv(e);for(const r of t.elements)n=n.filter(s=>!hn(s,r));return{arrayValue:{values:n}}}class Ya extends kl{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function bp(t){return Ne(t.integerValue||t.doubleValue)}function kv(t){return ld(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LT{constructor(e,n){this.field=e,this.transform=n}}function MT(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof io&&s instanceof io||r instanceof oo&&s instanceof oo?ks(r.elements,s.elements,hn):r instanceof Ya&&s instanceof Ya?hn(r.Ae,s.Ae):r instanceof so&&s instanceof so}(t.transform,e.transform)}class OT{constructor(e,n){this.version=e,this.transformResults=n}}class Mt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Mt}static exists(e){return new Mt(void 0,e)}static updateTime(e){return new Mt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ma(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Al{}function Av(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new fd(t.key,Mt.none()):new mo(t.key,t.data,Mt.none());{const n=t.data,r=vt.empty();let s=new Be(Xe.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new hr(t.key,r,new kt(s.toArray()),Mt.none())}}function FT(t,e,n){t instanceof mo?function(s,i,o){const l=s.value.clone(),u=Np(s.fieldTransforms,i,o.transformResults);l.setAll(u),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof hr?function(s,i,o){if(!ma(s.precondition,i))return void i.convertToUnknownDocument(o.version);const l=Np(s.fieldTransforms,i,o.transformResults),u=i.data;u.setAll(bv(s)),u.setAll(l),i.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Pi(t,e,n,r){return t instanceof mo?function(i,o,l,u){if(!ma(i.precondition,o))return l;const h=i.value.clone(),p=Rp(i.fieldTransforms,u,o);return h.setAll(p),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null}(t,e,n,r):t instanceof hr?function(i,o,l,u){if(!ma(i.precondition,o))return l;const h=Rp(i.fieldTransforms,u,o),p=o.data;return p.setAll(bv(i)),p.setAll(h),o.convertToFoundDocument(o.version,p).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(m=>m.field))}(t,e,n,r):function(i,o,l){return ma(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function zT(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=Tv(r.transform,s||null);i!=null&&(n===null&&(n=vt.empty()),n.set(r.field,i))}return n||null}function Cp(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&ks(r,s,(i,o)=>MT(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class mo extends Al{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class hr extends Al{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function bv(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Np(t,e,n){const r=new Map;ce(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,l=e.data.field(i.field);r.set(i.field,jT(o,l,n[s]))}return r}function Rp(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,DT(i,o,e))}return r}class fd extends Al{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class UT extends Al{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BT{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&FT(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Pi(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Pi(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=xv();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let l=this.applyToLocalView(o,i.mutatedFields);l=n.has(s.key)?null:l;const u=Av(o,l);u!==null&&r.set(s.key,u),o.isValidDocument()||o.convertToNoDocument(K.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),re())}isEqual(e){return this.batchId===e.batchId&&ks(this.mutations,e.mutations,(n,r)=>Cp(n,r))&&ks(this.baseMutations,e.baseMutations,(n,r)=>Cp(n,r))}}class md{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){ce(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=function(){return CT}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new md(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $T{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qT{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var De,se;function HT(t){switch(t){case j.OK:return G(64938);case j.CANCELLED:case j.UNKNOWN:case j.DEADLINE_EXCEEDED:case j.RESOURCE_EXHAUSTED:case j.INTERNAL:case j.UNAVAILABLE:case j.UNAUTHENTICATED:return!1;case j.INVALID_ARGUMENT:case j.NOT_FOUND:case j.ALREADY_EXISTS:case j.PERMISSION_DENIED:case j.FAILED_PRECONDITION:case j.ABORTED:case j.OUT_OF_RANGE:case j.UNIMPLEMENTED:case j.DATA_LOSS:return!0;default:return G(15467,{code:t})}}function Cv(t){if(t===void 0)return En("GRPC error has no .code"),j.UNKNOWN;switch(t){case De.OK:return j.OK;case De.CANCELLED:return j.CANCELLED;case De.UNKNOWN:return j.UNKNOWN;case De.DEADLINE_EXCEEDED:return j.DEADLINE_EXCEEDED;case De.RESOURCE_EXHAUSTED:return j.RESOURCE_EXHAUSTED;case De.INTERNAL:return j.INTERNAL;case De.UNAVAILABLE:return j.UNAVAILABLE;case De.UNAUTHENTICATED:return j.UNAUTHENTICATED;case De.INVALID_ARGUMENT:return j.INVALID_ARGUMENT;case De.NOT_FOUND:return j.NOT_FOUND;case De.ALREADY_EXISTS:return j.ALREADY_EXISTS;case De.PERMISSION_DENIED:return j.PERMISSION_DENIED;case De.FAILED_PRECONDITION:return j.FAILED_PRECONDITION;case De.ABORTED:return j.ABORTED;case De.OUT_OF_RANGE:return j.OUT_OF_RANGE;case De.UNIMPLEMENTED:return j.UNIMPLEMENTED;case De.DATA_LOSS:return j.DATA_LOSS;default:return G(39323,{code:t})}}(se=De||(De={}))[se.OK=0]="OK",se[se.CANCELLED=1]="CANCELLED",se[se.UNKNOWN=2]="UNKNOWN",se[se.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",se[se.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",se[se.NOT_FOUND=5]="NOT_FOUND",se[se.ALREADY_EXISTS=6]="ALREADY_EXISTS",se[se.PERMISSION_DENIED=7]="PERMISSION_DENIED",se[se.UNAUTHENTICATED=16]="UNAUTHENTICATED",se[se.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",se[se.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",se[se.ABORTED=10]="ABORTED",se[se.OUT_OF_RANGE=11]="OUT_OF_RANGE",se[se.UNIMPLEMENTED=12]="UNIMPLEMENTED",se[se.INTERNAL=13]="INTERNAL",se[se.UNAVAILABLE=14]="UNAVAILABLE",se[se.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WT(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GT=new Kn([4294967295,4294967295],0);function Pp(t){const e=WT().encode(t),n=new q0;return n.update(e),new Uint8Array(n.digest())}function Vp(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Kn([n,r],0),new Kn([s,i],0)]}class pd{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new yi(`Invalid padding: ${n}`);if(r<0)throw new yi(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new yi(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new yi(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Kn.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(Kn.fromNumber(r)));return s.compare(GT)===1&&(s=new Kn([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Pp(e),[r,s]=Vp(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);if(!this.we(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new pd(i,s,n);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.ge===0)return;const n=Pp(e),[r,s]=Vp(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class yi extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bl{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,po.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new bl(K.min(),s,new Ae(ne),Tn(),re())}}class po{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new po(r,n,re(),re(),re())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pa{constructor(e,n,r,s){this.be=e,this.removedTargetIds=n,this.key=r,this.De=s}}class Nv{constructor(e,n){this.targetId=e,this.Ce=n}}class Rv{constructor(e,n,r=et.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Dp{constructor(){this.ve=0,this.Fe=jp(),this.Me=et.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=re(),n=re(),r=re();return this.Fe.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:G(38017,{changeType:i})}}),new po(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=jp()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,ce(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class QT{constructor(e){this.Ge=e,this.ze=new Map,this.je=Tn(),this.Je=Xo(),this.He=Xo(),this.Ye=new Ae(ne)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:G(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,s)=>{this.rt(s)&&n(s)})}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const i=s.target;if(Hc(i))if(r===0){const o=new W(i.path);this.et(n,o,at.newNoDocument(o,K.min()))}else ce(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const l=this.ut(e),u=l?this.ct(l,e,o):1;if(u!==0){this.it(n);const h=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,h)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,l;try{o=nr(r).toUint8Array()}catch(u){if(u instanceof nv)return Is("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new pd(o,s,i)}catch(u){return Is(u instanceof yi?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.ge===0?null:l}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Ge.ht(),l=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.et(n,i,null),s++)}),s}Tt(e){const n=new Map;this.ze.forEach((i,o)=>{const l=this.ot(o);if(l){if(i.current&&Hc(l.target)){const u=new W(l.target.path);this.It(u).has(o)||this.Et(o,u)||this.et(o,u,at.newNoDocument(u,e))}i.Be&&(n.set(o,i.ke()),i.qe())}});let r=re();this.He.forEach((i,o)=>{let l=!0;o.forEachWhile(u=>{const h=this.ot(u);return!h||h.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(i))}),this.je.forEach((i,o)=>o.setReadTime(e));const s=new bl(e,n,this.Ye,this.je,r);return this.je=Tn(),this.Je=Xo(),this.He=Xo(),this.Ye=new Ae(ne),s}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new Dp,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Be(ne),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Be(ne),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||$("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Dp),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Xo(){return new Ae(W.comparator)}function jp(){return new Ae(W.comparator)}const KT={asc:"ASCENDING",desc:"DESCENDING"},YT={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},XT={and:"AND",or:"OR"};class JT{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Qc(t,e){return t.useProto3Json||El(e)?e:{value:e}}function Xa(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Pv(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function ZT(t,e){return Xa(t,e.toTimestamp())}function an(t){return ce(!!t,49232),K.fromTimestamp(function(n){const r=tr(n);return new _e(r.seconds,r.nanos)}(t))}function gd(t,e){return Kc(t,e).canonicalString()}function Kc(t,e){const n=function(s){return new pe(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function Vv(t){const e=pe.fromString(t);return ce(Ov(e),10190,{key:e.toString()}),e}function Yc(t,e){return gd(t.databaseId,e.path)}function Lu(t,e){const n=Vv(e);if(n.get(1)!==t.databaseId.projectId)throw new B(j.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new B(j.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new W(jv(n))}function Dv(t,e){return gd(t.databaseId,e)}function eS(t){const e=Vv(t);return e.length===4?pe.emptyPath():jv(e)}function Xc(t){return new pe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function jv(t){return ce(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Lp(t,e,n){return{name:Yc(t,e),fields:n.value.mapValue.fields}}function tS(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:G(39313,{state:h})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(h,p){return h.useProto3Json?(ce(p===void 0||typeof p=="string",58123),et.fromBase64String(p||"")):(ce(p===void 0||p instanceof Buffer||p instanceof Uint8Array,16193),et.fromUint8Array(p||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(h){const p=h.code===void 0?j.UNKNOWN:Cv(h.code);return new B(p,h.message||"")}(o);n=new Rv(r,s,i,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Lu(t,r.document.name),i=an(r.document.updateTime),o=r.document.createTime?an(r.document.createTime):K.min(),l=new vt({mapValue:{fields:r.document.fields}}),u=at.newFoundDocument(s,i,o,l),h=r.targetIds||[],p=r.removedTargetIds||[];n=new pa(h,p,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Lu(t,r.document),i=r.readTime?an(r.readTime):K.min(),o=at.newNoDocument(s,i),l=r.removedTargetIds||[];n=new pa([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Lu(t,r.document),i=r.removedTargetIds||[];n=new pa([],i,s,null)}else{if(!("filter"in e))return G(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new qT(s,i),l=r.targetId;n=new Nv(l,o)}}return n}function nS(t,e){let n;if(e instanceof mo)n={update:Lp(t,e.key,e.value)};else if(e instanceof fd)n={delete:Yc(t,e.key)};else if(e instanceof hr)n={update:Lp(t,e.key,e.data),updateMask:hS(e.fieldMask)};else{if(!(e instanceof UT))return G(16599,{Vt:e.type});n={verify:Yc(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const l=o.transform;if(l instanceof so)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof io)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof oo)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Ya)return{fieldPath:o.field.canonicalString(),increment:l.Ae};throw G(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:ZT(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:G(27497)}(t,e.precondition)),n}function rS(t,e){return t&&t.length>0?(ce(e!==void 0,14353),t.map(n=>function(s,i){let o=s.updateTime?an(s.updateTime):an(i);return o.isEqual(K.min())&&(o=an(i)),new OT(o,s.transformResults||[])}(n,e))):[]}function sS(t,e){return{documents:[Dv(t,e.path)]}}function iS(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Dv(t,s);const i=function(h){if(h.length!==0)return Mv(Qt.create(h,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(h){if(h.length!==0)return h.map(p=>function(g){return{field:Yr(g.field),direction:lS(g.dir)}}(p))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=Qc(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{ft:n,parent:s}}function oS(t){let e=eS(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){ce(r===1,65062);const p=n.from[0];p.allDescendants?s=p.collectionId:e=e.child(p.collectionId)}let i=[];n.where&&(i=function(m){const g=Lv(m);return g instanceof Qt&&dv(g)?g.getFilters():[g]}(n.where));let o=[];n.orderBy&&(o=function(m){return m.map(g=>function(C){return new ro(Xr(C.field),function(D){switch(D){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(C.direction))}(g))}(n.orderBy));let l=null;n.limit&&(l=function(m){let g;return g=typeof m=="object"?m.value:m,El(g)?null:g}(n.limit));let u=null;n.startAt&&(u=function(m){const g=!!m.before,S=m.values||[];return new Ka(S,g)}(n.startAt));let h=null;return n.endAt&&(h=function(m){const g=!m.before,S=m.values||[];return new Ka(S,g)}(n.endAt)),ST(e,s,o,i,l,"F",u,h)}function aS(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return G(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Lv(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Xr(n.unaryFilter.field);return Le.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Xr(n.unaryFilter.field);return Le.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Xr(n.unaryFilter.field);return Le.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Xr(n.unaryFilter.field);return Le.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return G(61313);default:return G(60726)}}(t):t.fieldFilter!==void 0?function(n){return Le.create(Xr(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return G(58110);default:return G(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Qt.create(n.compositeFilter.filters.map(r=>Lv(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return G(1026)}}(n.compositeFilter.op))}(t):G(30097,{filter:t})}function lS(t){return KT[t]}function uS(t){return YT[t]}function cS(t){return XT[t]}function Yr(t){return{fieldPath:t.canonicalString()}}function Xr(t){return Xe.fromServerFormat(t.fieldPath)}function Mv(t){return t instanceof Le?function(n){if(n.op==="=="){if(Tp(n.value))return{unaryFilter:{field:Yr(n.field),op:"IS_NAN"}};if(Ep(n.value))return{unaryFilter:{field:Yr(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Tp(n.value))return{unaryFilter:{field:Yr(n.field),op:"IS_NOT_NAN"}};if(Ep(n.value))return{unaryFilter:{field:Yr(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Yr(n.field),op:uS(n.op),value:n.value}}}(t):t instanceof Qt?function(n){const r=n.getFilters().map(s=>Mv(s));return r.length===1?r[0]:{compositeFilter:{op:cS(n.op),filters:r}}}(t):G(54877,{filter:t})}function hS(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Ov(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class On{constructor(e,n,r,s,i=K.min(),o=K.min(),l=et.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new On(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new On(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new On(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new On(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dS{constructor(e){this.yt=e}}function fS(t){const e=oS({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Gc(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mS{constructor(){this.Cn=new pS}addToCollectionParentIndex(e,n){return this.Cn.add(n),L.resolve()}getCollectionParents(e,n){return L.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return L.resolve()}deleteFieldIndex(e,n){return L.resolve()}deleteAllFieldIndexes(e){return L.resolve()}createTargetIndexes(e,n){return L.resolve()}getDocumentsMatchingTarget(e,n){return L.resolve(null)}getIndexType(e,n){return L.resolve(0)}getFieldIndexes(e,n){return L.resolve([])}getNextCollectionGroupToUpdate(e){return L.resolve(null)}getMinOffset(e,n){return L.resolve(er.min())}getMinOffsetFromCollectionGroup(e,n){return L.resolve(er.min())}updateCollectionGroup(e,n,r){return L.resolve()}updateIndexEntries(e,n){return L.resolve()}}class pS{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Be(pe.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Be(pe.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mp={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Fv=41943040;class gt{static withCacheSize(e){return new gt(e,gt.DEFAULT_COLLECTION_PERCENTILE,gt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */gt.DEFAULT_COLLECTION_PERCENTILE=10,gt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,gt.DEFAULT=new gt(Fv,gt.DEFAULT_COLLECTION_PERCENTILE,gt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),gt.DISABLED=new gt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cs{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Cs(0)}static cr(){return new Cs(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Op="LruGarbageCollector",gS=1048576;function Fp([t,e],[n,r]){const s=ne(t,n);return s===0?ne(e,r):s}class yS{constructor(e){this.Ir=e,this.buffer=new Be(Fp),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Fp(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class vS{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){$(Op,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Os(n)?$(Op,"Ignoring IndexedDB error during garbage collection: ",n):await Ms(n)}await this.Vr(3e5)})}}class _S{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return L.resolve(xl.ce);const r=new yS(n);return this.mr.forEachTarget(e,s=>r.Ar(s.sequenceNumber)).next(()=>this.mr.pr(e,s=>r.Ar(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?($("LruGarbageCollector","Garbage collection skipped; disabled"),L.resolve(Mp)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?($("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Mp):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,s,i,o,l,u,h;const p=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?($("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),s=this.params.maximumSequenceNumbersToCollect):s=m,o=Date.now(),this.nthSequenceNumber(e,s))).next(m=>(r=m,l=Date.now(),this.removeTargets(e,r,n))).next(m=>(i=m,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(m=>(h=Date.now(),Qr()<=ie.DEBUG&&$("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-p}ms
	Determined least recently used ${s} in `+(l-o)+`ms
	Removed ${i} targets in `+(u-l)+`ms
	Removed ${m} documents in `+(h-u)+`ms
Total Duration: ${h-p}ms`),L.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:m})))}}function wS(t,e){return new _S(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xS{constructor(){this.changes=new Ur(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,at.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?L.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ES{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TS{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&Pi(r.mutation,s,kt.empty(),_e.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,re()).next(()=>r))}getLocalViewOfDocuments(e,n,r=re()){const s=Ir();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=gi();return i.forEach((l,u)=>{o=o.insert(l,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Ir();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,re()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,s){let i=Tn();const o=Ri(),l=function(){return Ri()}();return n.forEach((u,h)=>{const p=r.get(h.key);s.has(h.key)&&(p===void 0||p.mutation instanceof hr)?i=i.insert(h.key,h):p!==void 0?(o.set(h.key,p.mutation.getFieldMask()),Pi(p.mutation,h,p.mutation.getFieldMask(),_e.now())):o.set(h.key,kt.empty())}),this.recalculateAndSaveOverlays(e,i).next(u=>(u.forEach((h,p)=>o.set(h,p)),n.forEach((h,p)=>l.set(h,new ES(p,o.get(h)??null))),l))}recalculateAndSaveOverlays(e,n){const r=Ri();let s=new Ae((o,l)=>o-l),i=re();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(u=>{const h=n.get(u);if(h===null)return;let p=r.get(u)||kt.empty();p=l.applyToLocalView(h,p),r.set(u,p);const m=(s.get(l.batchId)||re()).add(u);s=s.insert(l.batchId,m)})}).next(()=>{const o=[],l=s.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),h=u.key,p=u.value,m=xv();p.forEach(g=>{if(!i.has(g)){const S=Av(n.get(g),r.get(g));S!==null&&m.set(g,S),i=i.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,h,m))}return L.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return W.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):gv(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):L.resolve(Ir());let l=Zi,u=i;return o.next(h=>L.forEach(h,(p,m)=>(l<m.largestBatchId&&(l=m.largestBatchId),i.get(p)?L.resolve():this.remoteDocumentCache.getEntry(e,p).next(g=>{u=u.insert(p,g)}))).next(()=>this.populateOverlays(e,h,i)).next(()=>this.computeViews(e,u,h,re())).next(p=>({batchId:l,changes:wv(p)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new W(n)).next(r=>{let s=gi();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=gi();return this.indexManager.getCollectionParents(e,i).next(l=>L.forEach(l,u=>{const h=function(m,g){return new Fs(g,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,u.child(i));return this.getDocumentsMatchingCollectionQuery(e,h,r,s).next(p=>{p.forEach((m,g)=>{o=o.insert(m,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((u,h)=>{const p=h.getKey();o.get(p)===null&&(o=o.insert(p,at.newInvalidDocument(p)))});let l=gi();return o.forEach((u,h)=>{const p=i.get(u);p!==void 0&&Pi(p.mutation,h,kt.empty(),_e.now()),Il(n,h)&&(l=l.insert(u,h))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SS{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return L.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:an(s.createTime)}}(n)),L.resolve()}getNamedQuery(e,n){return L.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(s){return{name:s.name,query:fS(s.bundledQuery),readTime:an(s.readTime)}}(n)),L.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IS{constructor(){this.overlays=new Ae(W.comparator),this.qr=new Map}getOverlay(e,n){return L.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Ir();return L.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.St(e,n,i)}),L.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.qr.delete(r)),L.resolve()}getOverlaysForCollection(e,n,r){const s=Ir(),i=n.length+1,o=new W(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const u=l.getNext().value,h=u.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===i&&u.largestBatchId>r&&s.set(u.getKey(),u)}return L.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Ae((h,p)=>h-p);const o=this.overlays.getIterator();for(;o.hasNext();){const h=o.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>r){let p=i.get(h.largestBatchId);p===null&&(p=Ir(),i=i.insert(h.largestBatchId,p)),p.set(h.getKey(),h)}}const l=Ir(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((h,p)=>l.set(h,p)),!(l.size()>=s)););return L.resolve(l)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new $T(n,r));let i=this.qr.get(n);i===void 0&&(i=re(),this.qr.set(n,i)),this.qr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kS{constructor(){this.sessionToken=et.EMPTY_BYTE_STRING}getSessionToken(e){return L.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,L.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yd{constructor(){this.Qr=new Be(qe.$r),this.Ur=new Be(qe.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new qe(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new qe(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new W(new pe([])),r=new qe(n,e),s=new qe(n,e+1),i=[];return this.Ur.forEachInRange([r,s],o=>{this.Gr(o),i.push(o.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new W(new pe([])),r=new qe(n,e),s=new qe(n,e+1);let i=re();return this.Ur.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new qe(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class qe{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return W.comparator(e.key,n.key)||ne(e.Yr,n.Yr)}static Kr(e,n){return ne(e.Yr,n.Yr)||W.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AS{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Be(qe.$r)}checkEmpty(e){return L.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new BT(i,n,r,s);this.mutationQueue.push(o);for(const l of s)this.Zr=this.Zr.add(new qe(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return L.resolve(o)}lookupMutationBatch(e,n){return L.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ei(r),i=s<0?0:s;return L.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return L.resolve(this.mutationQueue.length===0?od:this.tr-1)}getAllMutationBatches(e){return L.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new qe(n,0),s=new qe(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([r,s],o=>{const l=this.Xr(o.Yr);i.push(l)}),L.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Be(ne);return n.forEach(s=>{const i=new qe(s,0),o=new qe(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,o],l=>{r=r.add(l.Yr)})}),L.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;W.isDocumentKey(i)||(i=i.child(""));const o=new qe(new W(i),0);let l=new Be(ne);return this.Zr.forEachWhile(u=>{const h=u.key.path;return!!r.isPrefixOf(h)&&(h.length===s&&(l=l.add(u.Yr)),!0)},o),L.resolve(this.ti(l))}ti(e){const n=[];return e.forEach(r=>{const s=this.Xr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){ce(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return L.forEach(n.mutations,s=>{const i=new qe(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new qe(n,0),s=this.Zr.firstAfterOrEqual(r);return L.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,L.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bS{constructor(e){this.ri=e,this.docs=function(){return new Ae(W.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return L.resolve(r?r.document.mutableCopy():at.newInvalidDocument(n))}getEntries(e,n){let r=Tn();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():at.newInvalidDocument(s))}),L.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Tn();const o=n.path,l=new W(o.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:h,value:{document:p}}=u.getNext();if(!o.isPrefixOf(h.path))break;h.path.length>o.length+1||nT(tT(p),r)<=0||(s.has(p.key)||Il(n,p))&&(i=i.insert(p.key,p.mutableCopy()))}return L.resolve(i)}getAllFromCollectionGroup(e,n,r,s){G(9500)}ii(e,n){return L.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new CS(this)}getSize(e){return L.resolve(this.size)}}class CS extends xS{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)}),L.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NS{constructor(e){this.persistence=e,this.si=new Ur(n=>ud(n),cd),this.lastRemoteSnapshotVersion=K.min(),this.highestTargetId=0,this.oi=0,this._i=new yd,this.targetCount=0,this.ai=Cs.ur()}forEachTarget(e,n){return this.si.forEach((r,s)=>n(s)),L.resolve()}getLastRemoteSnapshotVersion(e){return L.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return L.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),L.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),L.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Cs(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,L.resolve()}updateTargetData(e,n){return this.Pr(n),L.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,L.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.si.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.si.delete(o),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),L.waitFor(i).next(()=>s)}getTargetCount(e){return L.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return L.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),L.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),L.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),L.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return L.resolve(r)}containsKey(e,n){return L.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zv{constructor(e,n){this.ui={},this.overlays={},this.ci=new xl(0),this.li=!1,this.li=!0,this.hi=new kS,this.referenceDelegate=e(this),this.Pi=new NS(this),this.indexManager=new mS,this.remoteDocumentCache=function(s){return new bS(s)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new dS(n),this.Ii=new SS(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new IS,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new AS(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){$("MemoryPersistence","Starting transaction:",e);const s=new RS(this.ci.next());return this.referenceDelegate.Ei(),r(s).next(i=>this.referenceDelegate.di(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ai(e,n){return L.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class RS extends sT{constructor(e){super(),this.currentSequenceNumber=e}}class vd{constructor(e){this.persistence=e,this.Ri=new yd,this.Vi=null}static mi(e){return new vd(e)}get fi(){if(this.Vi)return this.Vi;throw G(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),L.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),L.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),L.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(s=>this.fi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.fi.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return L.forEach(this.fi,r=>{const s=W.fromPath(r);return this.gi(e,s).next(i=>{i||n.removeEntry(s,K.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return L.or([()=>L.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Ja{constructor(e,n){this.persistence=e,this.pi=new Ur(r=>aT(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=wS(this,n)}static mi(e,n){return new Ja(e,n)}Ei(){}di(e){return L.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return L.forEach(this.pi,(r,s)=>this.br(e,r,s).next(i=>i?L.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ii(e,o=>this.br(e,o,n).next(l=>{l||(r++,i.removeEntry(o,K.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),L.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),L.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),L.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),L.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=da(e.data.value)),n}br(e,n,r){return L.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.pi.get(n);return L.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _d{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=s}static As(e,n){let r=re(),s=re();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new _d(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PS{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VS{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return IE()?8:iT(TE())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ys(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ws(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new PS;return this.Ss(e,n,o).next(l=>{if(i.result=l,this.Vs)return this.bs(e,n,o,l.size)})}).next(()=>i.result)}bs(e,n,r,s){return r.documentReadCount<this.fs?(Qr()<=ie.DEBUG&&$("QueryEngine","SDK will not create cache indexes for query:",Kr(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),L.resolve()):(Qr()<=ie.DEBUG&&$("QueryEngine","Query:",Kr(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(Qr()<=ie.DEBUG&&$("QueryEngine","The SDK decides to create cache indexes for query:",Kr(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,on(n))):L.resolve())}ys(e,n){if(Ap(n))return L.resolve(null);let r=on(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Gc(n,null,"F"),r=on(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=re(...i);return this.ps.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(u=>{const h=this.Ds(n,l);return this.Cs(n,h,o,u.readTime)?this.ys(e,Gc(n,null,"F")):this.vs(e,h,n,u)}))})))}ws(e,n,r,s){return Ap(n)||s.isEqual(K.min())?L.resolve(null):this.ps.getDocuments(e,r).next(i=>{const o=this.Ds(n,i);return this.Cs(n,o,r,s)?L.resolve(null):(Qr()<=ie.DEBUG&&$("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Kr(n)),this.vs(e,o,n,eT(s,Zi)).next(l=>l))})}Ds(e,n){let r=new Be(vv(e));return n.forEach((s,i)=>{Il(e,i)&&(r=r.add(i))}),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ss(e,n,r){return Qr()<=ie.DEBUG&&$("QueryEngine","Using full collection scan to execute query:",Kr(n)),this.ps.getDocumentsMatchingQuery(e,n,er.min(),r)}vs(e,n,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wd="LocalStore",DS=3e8;class jS{constructor(e,n,r,s){this.persistence=e,this.Fs=n,this.serializer=s,this.Ms=new Ae(ne),this.xs=new Ur(i=>ud(i),cd),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new TS(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function LS(t,e,n,r){return new jS(t,e,n,r)}async function Uv(t,e){const n=Y(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],l=[];let u=re();for(const h of s){o.push(h.batchId);for(const p of h.mutations)u=u.add(p.key)}for(const h of i){l.push(h.batchId);for(const p of h.mutations)u=u.add(p.key)}return n.localDocuments.getDocuments(r,u).next(h=>({Ls:h,removedBatchIds:o,addedBatchIds:l}))})})}function MS(t,e){const n=Y(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(l,u,h,p){const m=h.batch,g=m.keys();let S=L.resolve();return g.forEach(C=>{S=S.next(()=>p.getEntry(u,C)).next(N=>{const D=h.docVersions.get(C);ce(D!==null,48541),N.version.compareTo(D)<0&&(m.applyToRemoteDocument(N,h),N.isValidDocument()&&(N.setReadTime(h.commitVersion),p.addEntry(N)))})}),S.next(()=>l.mutationQueue.removeMutationBatch(u,m))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let u=re();for(let h=0;h<l.mutationResults.length;++h)l.mutationResults[h].transformResults.length>0&&(u=u.add(l.batch.mutations[h].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function Bv(t){const e=Y(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function OS(t,e){const n=Y(t),r=e.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const l=[];e.targetChanges.forEach((p,m)=>{const g=s.get(m);if(!g)return;l.push(n.Pi.removeMatchingKeys(i,p.removedDocuments,m).next(()=>n.Pi.addMatchingKeys(i,p.addedDocuments,m)));let S=g.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(m)!==null?S=S.withResumeToken(et.EMPTY_BYTE_STRING,K.min()).withLastLimboFreeSnapshotVersion(K.min()):p.resumeToken.approximateByteSize()>0&&(S=S.withResumeToken(p.resumeToken,r)),s=s.insert(m,S),function(N,D,_){return N.resumeToken.approximateByteSize()===0||D.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=DS?!0:_.addedDocuments.size+_.modifiedDocuments.size+_.removedDocuments.size>0}(g,S,p)&&l.push(n.Pi.updateTargetData(i,S))});let u=Tn(),h=re();if(e.documentUpdates.forEach(p=>{e.resolvedLimboDocuments.has(p)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,p))}),l.push(FS(i,o,e.documentUpdates).next(p=>{u=p.ks,h=p.qs})),!r.isEqual(K.min())){const p=n.Pi.getLastRemoteSnapshotVersion(i).next(m=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,r));l.push(p)}return L.waitFor(l).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,u,h)).next(()=>u)}).then(i=>(n.Ms=s,i))}function FS(t,e,n){let r=re(),s=re();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=Tn();return n.forEach((l,u)=>{const h=i.get(l);u.isFoundDocument()!==h.isFoundDocument()&&(s=s.add(l)),u.isNoDocument()&&u.version.isEqual(K.min())?(e.removeEntry(l,u.readTime),o=o.insert(l,u)):!h.isValidDocument()||u.version.compareTo(h.version)>0||u.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(u),o=o.insert(l,u)):$(wd,"Ignoring outdated watch update for ",l,". Current version:",h.version," Watch version:",u.version)}),{ks:o,qs:s}})}function zS(t,e){const n=Y(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=od),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function US(t,e){const n=Y(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Pi.getTargetData(r,e).next(i=>i?(s=i,L.resolve(s)):n.Pi.allocateTargetId(r).next(o=>(s=new On(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function Jc(t,e,n){const r=Y(t),s=r.Ms.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Os(o))throw o;$(wd,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(s.target)}function zp(t,e,n){const r=Y(t);let s=K.min(),i=re();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,h,p){const m=Y(u),g=m.xs.get(p);return g!==void 0?L.resolve(m.Ms.get(g)):m.Pi.getTargetData(h,p)}(r,o,on(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,l.targetId).next(u=>{i=u})}).next(()=>r.Fs.getDocumentsMatchingQuery(o,e,n?s:K.min(),n?i:re())).next(l=>(BS(r,kT(e),l),{documents:l,Qs:i})))}function BS(t,e,n){let r=t.Os.get(e)||K.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.Os.set(e,r)}class Up{constructor(){this.activeTargetIds=PT()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class $S{constructor(){this.Mo=new Up,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Up,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qS{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bp="ConnectivityMonitor";class $p{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){$(Bp,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){$(Bp,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Jo=null;function Zc(){return Jo===null?Jo=function(){return 268435456+Math.round(2147483648*Math.random())}():Jo++,"0x"+Jo.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mu="RestConnection",HS={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class WS{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===Ga?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,n,r,s,i){const o=Zc(),l=this.zo(e,n.toUriEncodedString());$(Mu,`Sending RPC '${e}' ${o}:`,l,r);const u={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(u,s,i);const{host:h}=new URL(l),p=nd(h);return this.Jo(e,l,u,r,p).then(m=>($(Mu,`Received RPC '${e}' ${o}: `,m),m),m=>{throw Is(Mu,`RPC '${e}' ${o} failed with error: `,m,"url: ",l,"request:",r),m})}Ho(e,n,r,s,i,o){return this.Go(e,n,r,s,i)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ls}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}zo(e,n){const r=HS[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GS{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const st="WebChannelConnection";class QS extends WS{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,i){const o=Zc();return new Promise((l,u)=>{const h=new H0;h.setWithCredentials(!0),h.listenOnce(W0.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case ha.NO_ERROR:const m=h.getResponseJson();$(st,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(m)),l(m);break;case ha.TIMEOUT:$(st,`RPC '${e}' ${o} timed out`),u(new B(j.DEADLINE_EXCEEDED,"Request time out"));break;case ha.HTTP_ERROR:const g=h.getStatus();if($(st,`RPC '${e}' ${o} failed with status:`,g,"response text:",h.getResponseText()),g>0){let S=h.getResponseJson();Array.isArray(S)&&(S=S[0]);const C=S==null?void 0:S.error;if(C&&C.status&&C.message){const N=function(_){const x=_.toLowerCase().replace(/_/g,"-");return Object.values(j).indexOf(x)>=0?x:j.UNKNOWN}(C.status);u(new B(N,C.message))}else u(new B(j.UNKNOWN,"Server responded with status "+h.getStatus()))}else u(new B(j.UNAVAILABLE,"Connection failed."));break;default:G(9055,{l_:e,streamId:o,h_:h.getLastErrorCode(),P_:h.getLastError()})}}finally{$(st,`RPC '${e}' ${o} completed.`)}});const p=JSON.stringify(s);$(st,`RPC '${e}' ${o} sending request:`,s),h.send(n,"POST",p,r,15)})}T_(e,n,r){const s=Zc(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=K0(),l=Q0(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(u.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(u.useFetchStreams=!0),this.jo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const p=i.join("");$(st,`Creating RPC '${e}' stream ${s}: ${p}`,u);const m=o.createWebChannel(p,u);this.I_(m);let g=!1,S=!1;const C=new GS({Yo:D=>{S?$(st,`Not sending because RPC '${e}' stream ${s} is closed:`,D):(g||($(st,`Opening RPC '${e}' stream ${s} transport.`),m.open(),g=!0),$(st,`RPC '${e}' stream ${s} sending:`,D),m.send(D))},Zo:()=>m.close()}),N=(D,_,x)=>{D.listen(_,b=>{try{x(b)}catch(V){setTimeout(()=>{throw V},0)}})};return N(m,pi.EventType.OPEN,()=>{S||($(st,`RPC '${e}' stream ${s} transport opened.`),C.o_())}),N(m,pi.EventType.CLOSE,()=>{S||(S=!0,$(st,`RPC '${e}' stream ${s} transport closed`),C.a_(),this.E_(m))}),N(m,pi.EventType.ERROR,D=>{S||(S=!0,Is(st,`RPC '${e}' stream ${s} transport errored. Name:`,D.name,"Message:",D.message),C.a_(new B(j.UNAVAILABLE,"The operation could not be completed")))}),N(m,pi.EventType.MESSAGE,D=>{var _;if(!S){const x=D.data[0];ce(!!x,16349);const b=x,V=(b==null?void 0:b.error)||((_=b[0])==null?void 0:_.error);if(V){$(st,`RPC '${e}' stream ${s} received error:`,V);const M=V.status;let F=function(T){const k=De[T];if(k!==void 0)return Cv(k)}(M),E=V.message;F===void 0&&(F=j.INTERNAL,E="Unknown error status: "+M+" with message "+V.message),S=!0,C.a_(new B(F,E)),m.close()}else $(st,`RPC '${e}' stream ${s} received:`,x),C.u_(x)}}),N(l,G0.STAT_EVENT,D=>{D.stat===zc.PROXY?$(st,`RPC '${e}' stream ${s} detected buffering proxy`):D.stat===zc.NOPROXY&&$(st,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{C.__()},0),C}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function Ou(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cl(t){return new JT(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $v{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=s,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&$("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qp="PersistentStream";class qv{constructor(e,n,r,s,i,o,l,u){this.Mi=e,this.S_=r,this.b_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new $v(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===j.RESOURCE_EXHAUSTED?(En(n.toString()),En("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===j.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.D_===n&&this.G_(r,s)},r=>{e(()=>{const s=new B(j.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(s=>{r(()=>this.z_(s))}),this.stream.onMessage(s=>{r(()=>++this.F_==1?this.J_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return $(qp,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():($(qp,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class KS extends qv{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=tS(this.serializer,e),r=function(i){if(!("targetChange"in i))return K.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?K.min():o.readTime?an(o.readTime):K.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=Xc(this.serializer),n.addTarget=function(i,o){let l;const u=o.target;if(l=Hc(u)?{documents:sS(i,u)}:{query:iS(i,u).ft},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=Pv(i,o.resumeToken);const h=Qc(i,o.expectedCount);h!==null&&(l.expectedCount=h)}else if(o.snapshotVersion.compareTo(K.min())>0){l.readTime=Xa(i,o.snapshotVersion.toTimestamp());const h=Qc(i,o.expectedCount);h!==null&&(l.expectedCount=h)}return l}(this.serializer,e);const r=aS(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=Xc(this.serializer),n.removeTarget=e,this.q_(n)}}class YS extends qv{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return ce(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ce(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ce(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=rS(e.writeResults,e.commitTime),r=an(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=Xc(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>nS(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XS{}class JS extends XS{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new B(j.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Go(e,Kc(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new B(j.UNKNOWN,i.toString())})}Ho(e,n,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Ho(e,Kc(n,r),s,o,l,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new B(j.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class ZS{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(En(n),this.aa=!1):$("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mr="RemoteStore";class eI{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(o=>{r.enqueueAndForget(async()=>{Br(this)&&($(Mr,"Restarting streams for network reachability change."),await async function(u){const h=Y(u);h.Ea.add(4),await go(h),h.Ra.set("Unknown"),h.Ea.delete(4),await Nl(h)}(this))})}),this.Ra=new ZS(r,s)}}async function Nl(t){if(Br(t))for(const e of t.da)await e(!0)}async function go(t){for(const e of t.da)await e(!1)}function Hv(t,e){const n=Y(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Sd(n)?Td(n):zs(n).O_()&&Ed(n,e))}function xd(t,e){const n=Y(t),r=zs(n);n.Ia.delete(e),r.O_()&&Wv(n,e),n.Ia.size===0&&(r.O_()?r.L_():Br(n)&&n.Ra.set("Unknown"))}function Ed(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(K.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}zs(t).Y_(e)}function Wv(t,e){t.Va.Ue(e),zs(t).Z_(e)}function Td(t){t.Va=new QT({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),zs(t).start(),t.Ra.ua()}function Sd(t){return Br(t)&&!zs(t).x_()&&t.Ia.size>0}function Br(t){return Y(t).Ea.size===0}function Gv(t){t.Va=void 0}async function tI(t){t.Ra.set("Online")}async function nI(t){t.Ia.forEach((e,n)=>{Ed(t,e)})}async function rI(t,e){Gv(t),Sd(t)?(t.Ra.ha(e),Td(t)):t.Ra.set("Unknown")}async function sI(t,e,n){if(t.Ra.set("Online"),e instanceof Rv&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const l of i.targetIds)s.Ia.has(l)&&(await s.remoteSyncer.rejectListen(l,o),s.Ia.delete(l),s.Va.removeTarget(l))}(t,e)}catch(r){$(Mr,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Za(t,r)}else if(e instanceof pa?t.Va.Ze(e):e instanceof Nv?t.Va.st(e):t.Va.tt(e),!n.isEqual(K.min()))try{const r=await Bv(t.localStore);n.compareTo(r)>=0&&await function(i,o){const l=i.Va.Tt(o);return l.targetChanges.forEach((u,h)=>{if(u.resumeToken.approximateByteSize()>0){const p=i.Ia.get(h);p&&i.Ia.set(h,p.withResumeToken(u.resumeToken,o))}}),l.targetMismatches.forEach((u,h)=>{const p=i.Ia.get(u);if(!p)return;i.Ia.set(u,p.withResumeToken(et.EMPTY_BYTE_STRING,p.snapshotVersion)),Wv(i,u);const m=new On(p.target,u,h,p.sequenceNumber);Ed(i,m)}),i.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){$(Mr,"Failed to raise snapshot:",r),await Za(t,r)}}async function Za(t,e,n){if(!Os(e))throw e;t.Ea.add(1),await go(t),t.Ra.set("Offline"),n||(n=()=>Bv(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{$(Mr,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Nl(t)})}function Qv(t,e){return e().catch(n=>Za(t,n,e))}async function Rl(t){const e=Y(t),n=sr(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:od;for(;iI(e);)try{const s=await zS(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,oI(e,s)}catch(s){await Za(e,s)}Kv(e)&&Yv(e)}function iI(t){return Br(t)&&t.Ta.length<10}function oI(t,e){t.Ta.push(e);const n=sr(t);n.O_()&&n.X_&&n.ea(e.mutations)}function Kv(t){return Br(t)&&!sr(t).x_()&&t.Ta.length>0}function Yv(t){sr(t).start()}async function aI(t){sr(t).ra()}async function lI(t){const e=sr(t);for(const n of t.Ta)e.ea(n.mutations)}async function uI(t,e,n){const r=t.Ta.shift(),s=md.from(r,e,n);await Qv(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Rl(t)}async function cI(t,e){e&&sr(t).X_&&await async function(r,s){if(function(o){return HT(o)&&o!==j.ABORTED}(s.code)){const i=r.Ta.shift();sr(r).B_(),await Qv(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Rl(r)}}(t,e),Kv(t)&&Yv(t)}async function Hp(t,e){const n=Y(t);n.asyncQueue.verifyOperationInProgress(),$(Mr,"RemoteStore received new credentials");const r=Br(n);n.Ea.add(3),await go(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Nl(n)}async function hI(t,e){const n=Y(t);e?(n.Ea.delete(2),await Nl(n)):e||(n.Ea.add(2),await go(n),n.Ra.set("Unknown"))}function zs(t){return t.ma||(t.ma=function(n,r,s){const i=Y(n);return i.sa(),new KS(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:tI.bind(null,t),t_:nI.bind(null,t),r_:rI.bind(null,t),H_:sI.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),Sd(t)?Td(t):t.Ra.set("Unknown")):(await t.ma.stop(),Gv(t))})),t.ma}function sr(t){return t.fa||(t.fa=function(n,r,s){const i=Y(n);return i.sa(),new YS(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:aI.bind(null,t),r_:cI.bind(null,t),ta:lI.bind(null,t),na:uI.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await Rl(t)):(await t.fa.stop(),t.Ta.length>0&&($(Mr,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Id{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Yn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,l=new Id(e,n,o,s,i);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new B(j.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function kd(t,e){if(En("AsyncQueue",`${e}: ${t}`),Os(t))return new B(j.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ys{static emptySet(e){return new ys(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||W.comparator(n.key,r.key):(n,r)=>W.comparator(n.key,r.key),this.keyedMap=gi(),this.sortedSet=new Ae(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ys)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new ys;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wp{constructor(){this.ga=new Ae(W.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):G(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class Ns{constructor(e,n,r,s,i,o,l,u,h){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=h}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new Ns(e,n,ys.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Sl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dI{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class fI{constructor(){this.queries=Gp(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=Y(n),i=s.queries;s.queries=Gp(),i.forEach((o,l)=>{for(const u of l.Sa)u.onError(r)})})(this,new B(j.ABORTED,"Firestore shutting down"))}}function Gp(){return new Ur(t=>yv(t),Sl)}async function Xv(t,e){const n=Y(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.ba()&&e.Da()&&(r=2):(i=new dI,r=e.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(s,!0);break;case 1:i.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const l=kd(o,`Initialization of query '${Kr(e.query)}' failed`);return void e.onError(l)}n.queries.set(s,i),i.Sa.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&Ad(n)}async function Jv(t,e){const n=Y(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.Sa.indexOf(e);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?s=e.Da()?0:1:!i.ba()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function mI(t,e){const n=Y(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const l of o.Sa)l.Fa(s)&&(r=!0);o.wa=s}}r&&Ad(n)}function pI(t,e,n){const r=Y(t),s=r.queries.get(e);if(s)for(const i of s.Sa)i.onError(n);r.queries.delete(e)}function Ad(t){t.Ca.forEach(e=>{e.next()})}var eh,Qp;(Qp=eh||(eh={})).Ma="default",Qp.Cache="cache";class Zv{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Ns(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Ns.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==eh.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e_{constructor(e){this.key=e}}class t_{constructor(e){this.key=e}}class gI{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=re(),this.mutatedKeys=re(),this.eu=vv(e),this.tu=new ys(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new Wp,s=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,l=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,h=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((p,m)=>{const g=s.get(p),S=Il(this.query,m)?m:null,C=!!g&&this.mutatedKeys.has(g.key),N=!!S&&(S.hasLocalMutations||this.mutatedKeys.has(S.key)&&S.hasCommittedMutations);let D=!1;g&&S?g.data.isEqual(S.data)?C!==N&&(r.track({type:3,doc:S}),D=!0):this.su(g,S)||(r.track({type:2,doc:S}),D=!0,(u&&this.eu(S,u)>0||h&&this.eu(S,h)<0)&&(l=!0)):!g&&S?(r.track({type:0,doc:S}),D=!0):g&&!S&&(r.track({type:1,doc:g}),D=!0,(u||h)&&(l=!0)),D&&(S?(o=o.add(S),i=N?i.add(p):i.delete(p)):(o=o.delete(p),i=i.delete(p)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const p=this.query.limitType==="F"?o.last():o.first();o=o.delete(p.key),i=i.delete(p.key),r.track({type:1,doc:p})}return{tu:o,iu:r,Cs:l,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((p,m)=>function(S,C){const N=D=>{switch(D){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return G(20277,{Rt:D})}};return N(S)-N(C)}(p.type,m.type)||this.eu(p.doc,m.doc)),this.ou(r),s=s??!1;const l=n&&!s?this._u():[],u=this.Xa.size===0&&this.current&&!s?1:0,h=u!==this.Za;return this.Za=u,o.length!==0||h?{snapshot:new Ns(this.query,e.tu,i,o,e.mutatedKeys,u===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Wp,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=re(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new t_(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new e_(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=re();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Ns.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const bd="SyncEngine";class yI{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class vI{constructor(e){this.key=e,this.hu=!1}}class _I{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Ur(l=>yv(l),Sl),this.Iu=new Map,this.Eu=new Set,this.du=new Ae(W.comparator),this.Au=new Map,this.Ru=new yd,this.Vu={},this.mu=new Map,this.fu=Cs.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function wI(t,e,n=!0){const r=a_(t);let s;const i=r.Tu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await n_(r,e,n,!0),s}async function xI(t,e){const n=a_(t);await n_(n,e,!0,!1)}async function n_(t,e,n,r){const s=await US(t.localStore,on(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let l;return r&&(l=await EI(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&Hv(t.remoteStore,s),l}async function EI(t,e,n,r,s){t.pu=(m,g,S)=>async function(N,D,_,x){let b=D.view.ru(_);b.Cs&&(b=await zp(N.localStore,D.query,!1).then(({documents:E})=>D.view.ru(E,b)));const V=x&&x.targetChanges.get(D.targetId),M=x&&x.targetMismatches.get(D.targetId)!=null,F=D.view.applyChanges(b,N.isPrimaryClient,V,M);return Yp(N,D.targetId,F.au),F.snapshot}(t,m,g,S);const i=await zp(t.localStore,e,!0),o=new gI(e,i.Qs),l=o.ru(i.documents),u=po.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),h=o.applyChanges(l,t.isPrimaryClient,u);Yp(t,n,h.au);const p=new yI(e,n,o);return t.Tu.set(e,p),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),h.snapshot}async function TI(t,e,n){const r=Y(t),s=r.Tu.get(e),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter(o=>!Sl(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Jc(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&xd(r.remoteStore,s.targetId),th(r,s.targetId)}).catch(Ms)):(th(r,s.targetId),await Jc(r.localStore,s.targetId,!0))}async function SI(t,e){const n=Y(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),xd(n.remoteStore,r.targetId))}async function II(t,e,n){const r=PI(t);try{const s=await function(o,l){const u=Y(o),h=_e.now(),p=l.reduce((S,C)=>S.add(C.key),re());let m,g;return u.persistence.runTransaction("Locally write mutations","readwrite",S=>{let C=Tn(),N=re();return u.Ns.getEntries(S,p).next(D=>{C=D,C.forEach((_,x)=>{x.isValidDocument()||(N=N.add(_))})}).next(()=>u.localDocuments.getOverlayedDocuments(S,C)).next(D=>{m=D;const _=[];for(const x of l){const b=zT(x,m.get(x.key).overlayedDocument);b!=null&&_.push(new hr(x.key,b,uv(b.value.mapValue),Mt.exists(!0)))}return u.mutationQueue.addMutationBatch(S,h,_,l)}).next(D=>{g=D;const _=D.applyToLocalDocumentSet(m,N);return u.documentOverlayCache.saveOverlays(S,D.batchId,_)})}).then(()=>({batchId:g.batchId,changes:wv(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,l,u){let h=o.Vu[o.currentUser.toKey()];h||(h=new Ae(ne)),h=h.insert(l,u),o.Vu[o.currentUser.toKey()]=h}(r,s.batchId,n),await yo(r,s.changes),await Rl(r.remoteStore)}catch(s){const i=kd(s,"Failed to persist write");n.reject(i)}}async function r_(t,e){const n=Y(t);try{const r=await OS(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Au.get(i);o&&(ce(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.hu=!0:s.modifiedDocuments.size>0?ce(o.hu,14607):s.removedDocuments.size>0&&(ce(o.hu,42227),o.hu=!1))}),await yo(n,r,e)}catch(r){await Ms(r)}}function Kp(t,e,n){const r=Y(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach((i,o)=>{const l=o.view.va(e);l.snapshot&&s.push(l.snapshot)}),function(o,l){const u=Y(o);u.onlineState=l;let h=!1;u.queries.forEach((p,m)=>{for(const g of m.Sa)g.va(l)&&(h=!0)}),h&&Ad(u)}(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function kI(t,e,n){const r=Y(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),i=s&&s.key;if(i){let o=new Ae(W.comparator);o=o.insert(i,at.newNoDocument(i,K.min()));const l=re().add(i),u=new bl(K.min(),new Map,new Ae(ne),o,l);await r_(r,u),r.du=r.du.remove(i),r.Au.delete(e),Cd(r)}else await Jc(r.localStore,e,!1).then(()=>th(r,e,n)).catch(Ms)}async function AI(t,e){const n=Y(t),r=e.batch.batchId;try{const s=await MS(n.localStore,e);i_(n,r,null),s_(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await yo(n,s)}catch(s){await Ms(s)}}async function bI(t,e,n){const r=Y(t);try{const s=await function(o,l){const u=Y(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let p;return u.mutationQueue.lookupMutationBatch(h,l).next(m=>(ce(m!==null,37113),p=m.keys(),u.mutationQueue.removeMutationBatch(h,m))).next(()=>u.mutationQueue.performConsistencyCheck(h)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(h,p,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,p)).next(()=>u.localDocuments.getDocuments(h,p))})}(r.localStore,e);i_(r,e,n),s_(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await yo(r,s)}catch(s){await Ms(s)}}function s_(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function i_(t,e,n){const r=Y(t);let s=r.Vu[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Vu[r.currentUser.toKey()]=s}}function th(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||o_(t,r)})}function o_(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(xd(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),Cd(t))}function Yp(t,e,n){for(const r of n)r instanceof e_?(t.Ru.addReference(r.key,e),CI(t,r)):r instanceof t_?($(bd,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||o_(t,r.key)):G(19791,{wu:r})}function CI(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||($(bd,"New document in limbo: "+n),t.Eu.add(r),Cd(t))}function Cd(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new W(pe.fromString(e)),r=t.fu.next();t.Au.set(r,new vI(n)),t.du=t.du.insert(n,r),Hv(t.remoteStore,new On(on(hd(n.path)),r,"TargetPurposeLimboResolution",xl.ce))}}async function yo(t,e,n){const r=Y(t),s=[],i=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((l,u)=>{o.push(r.pu(u,e,n).then(h=>{var p;if((h||n)&&r.isPrimaryClient){const m=h?!h.fromCache:(p=n==null?void 0:n.targetChanges.get(u.targetId))==null?void 0:p.current;r.sharedClientState.updateQueryState(u.targetId,m?"current":"not-current")}if(h){s.push(h);const m=_d.As(u.targetId,h);i.push(m)}}))}),await Promise.all(o),r.Pu.H_(s),await async function(u,h){const p=Y(u);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>L.forEach(h,g=>L.forEach(g.Es,S=>p.persistence.referenceDelegate.addReference(m,g.targetId,S)).next(()=>L.forEach(g.ds,S=>p.persistence.referenceDelegate.removeReference(m,g.targetId,S)))))}catch(m){if(!Os(m))throw m;$(wd,"Failed to update sequence numbers: "+m)}for(const m of h){const g=m.targetId;if(!m.fromCache){const S=p.Ms.get(g),C=S.snapshotVersion,N=S.withLastLimboFreeSnapshotVersion(C);p.Ms=p.Ms.insert(g,N)}}}(r.localStore,i))}async function NI(t,e){const n=Y(t);if(!n.currentUser.isEqual(e)){$(bd,"User change. New user:",e.toKey());const r=await Uv(n.localStore,e);n.currentUser=e,function(i,o){i.mu.forEach(l=>{l.forEach(u=>{u.reject(new B(j.CANCELLED,o))})}),i.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await yo(n,r.Ls)}}function RI(t,e){const n=Y(t),r=n.Au.get(e);if(r&&r.hu)return re().add(r.key);{let s=re();const i=n.Iu.get(e);if(!i)return s;for(const o of i){const l=n.Tu.get(o);s=s.unionWith(l.view.nu)}return s}}function a_(t){const e=Y(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=r_.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=RI.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=kI.bind(null,e),e.Pu.H_=mI.bind(null,e.eventManager),e.Pu.yu=pI.bind(null,e.eventManager),e}function PI(t){const e=Y(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=AI.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=bI.bind(null,e),e}class el{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Cl(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return LS(this.persistence,new VS,e.initialUser,this.serializer)}Cu(e){return new zv(vd.mi,this.serializer)}Du(e){return new $S}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}el.provider={build:()=>new el};class VI extends el{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){ce(this.persistence.referenceDelegate instanceof Ja,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new vS(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?gt.withCacheSize(this.cacheSizeBytes):gt.DEFAULT;return new zv(r=>Ja.mi(r,n),this.serializer)}}class nh{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Kp(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=NI.bind(null,this.syncEngine),await hI(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new fI}()}createDatastore(e){const n=Cl(e.databaseInfo.databaseId),r=function(i){return new QS(i)}(e.databaseInfo);return function(i,o,l,u){return new JS(i,o,l,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,l){return new eI(r,s,i,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>Kp(this.syncEngine,n,0),function(){return $p.v()?new $p:new qS}())}createSyncEngine(e,n){return function(s,i,o,l,u,h,p){const m=new _I(s,i,o,l,u,h);return p&&(m.gu=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=Y(s);$(Mr,"RemoteStore shutting down."),i.Ea.add(5),await go(i),i.Aa.shutdown(),i.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}nh.provider={build:()=>new nh};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l_{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):En("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ir="FirestoreClient";class DI{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=it.UNAUTHENTICATED,this.clientId=id.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{$(ir,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>($(ir,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Yn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=kd(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Fu(t,e){t.asyncQueue.verifyOperationInProgress(),$(ir,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await Uv(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Xp(t,e){t.asyncQueue.verifyOperationInProgress();const n=await jI(t);$(ir,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Hp(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>Hp(e.remoteStore,s)),t._onlineComponents=e}async function jI(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){$(ir,"Using user provided OfflineComponentProvider");try{await Fu(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===j.FAILED_PRECONDITION||s.code===j.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Is("Error using user provided cache. Falling back to memory cache: "+n),await Fu(t,new el)}}else $(ir,"Using default OfflineComponentProvider"),await Fu(t,new VI(void 0));return t._offlineComponents}async function u_(t){return t._onlineComponents||(t._uninitializedComponentsProvider?($(ir,"Using user provided OnlineComponentProvider"),await Xp(t,t._uninitializedComponentsProvider._online)):($(ir,"Using default OnlineComponentProvider"),await Xp(t,new nh))),t._onlineComponents}function LI(t){return u_(t).then(e=>e.syncEngine)}async function rh(t){const e=await u_(t),n=e.eventManager;return n.onListen=wI.bind(null,e.syncEngine),n.onUnlisten=TI.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=xI.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=SI.bind(null,e.syncEngine),n}function MI(t,e,n={}){const r=new Yn;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,u,h){const p=new l_({next:g=>{p.Nu(),o.enqueueAndForget(()=>Jv(i,m)),g.fromCache&&u.source==="server"?h.reject(new B(j.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(g)},error:g=>h.reject(g)}),m=new Zv(l,p,{includeMetadataChanges:!0,qa:!0});return Xv(i,m)}(await rh(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c_(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jp=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h_="firestore.googleapis.com",Zp=!0;class eg{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new B(j.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=h_,this.ssl=Zp}else this.host=e.host,this.ssl=e.ssl??Zp;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Fv;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<gS)throw new B(j.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Z2("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=c_(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new B(j.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new B(j.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new B(j.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Pl{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new eg({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new B(j.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new B(j.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new eg(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new $2;switch(r.type){case"firstParty":return new G2(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new B(j.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Jp.get(n);r&&($("ComponentProvider","Removing Datastore"),Jp.delete(n),r.terminate())}(this),Promise.resolve()}}function OI(t,e,n,r={}){var h;t=Lt(t,Pl);const s=nd(e),i=t._getSettings(),o={...i,emulatorOptions:t._getEmulatorOptions()},l=`${e}:${n}`;s&&(vE(`https://${l}`),EE("Firestore",!0)),i.host!==h_&&i.host!==l&&Is("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...i,host:l,ssl:s,emulatorOptions:r};if(!$a(u,o)&&(t._setSettings(u),r.mockUserToken)){let p,m;if(typeof r.mockUserToken=="string")p=r.mockUserToken,m=it.MOCK_USER;else{p=_E(r.mockUserToken,(h=t._app)==null?void 0:h.options.projectId);const g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new B(j.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new it(g)}t._authCredentials=new q2(new X0(p,m))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dr{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new dr(this.firestore,e,this._query)}}class Pe{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Xn(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Pe(this.firestore,e,this._key)}toJSON(){return{type:Pe._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(fo(n,Pe._jsonSchema))return new Pe(e,r||null,new W(pe.fromString(n.referencePath)))}}Pe._jsonSchemaVersion="firestore/documentReference/1.0",Pe._jsonSchema={type:Me("string",Pe._jsonSchemaVersion),referencePath:Me("string")};class Xn extends dr{constructor(e,n,r){super(e,n,hd(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Pe(this.firestore,null,new W(e))}withConverter(e){return new Xn(this.firestore,e,this._path)}}function Or(t,e,...n){if(t=cn(t),J0("collection","path",e),t instanceof Pl){const r=pe.fromString(e,...n);return fp(r),new Xn(t,null,r)}{if(!(t instanceof Pe||t instanceof Xn))throw new B(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(pe.fromString(e,...n));return fp(r),new Xn(t.firestore,null,r)}}function qt(t,e,...n){if(t=cn(t),arguments.length===1&&(e=id.newId()),J0("doc","path",e),t instanceof Pl){const r=pe.fromString(e,...n);return dp(r),new Pe(t,null,new W(r))}{if(!(t instanceof Pe||t instanceof Xn))throw new B(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(pe.fromString(e,...n));return dp(r),new Pe(t.firestore,t instanceof Xn?t.converter:null,new W(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tg="AsyncQueue";class ng{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new $v(this,"async_queue_retry"),this._c=()=>{const r=Ou();r&&$(tg,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=Ou();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Ou();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new Yn;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Os(e))throw e;$(tg,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,En("INTERNAL UNHANDLED ERROR: ",rg(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=Id.createAndSchedule(this,e,n,r,i=>this.hc(i));return this.tc.push(s),s}uc(){this.nc&&G(47125,{Pc:rg(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function rg(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sg(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class or extends Pl{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new ng,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new ng(e),this._firestoreClient=void 0,await e}}}function FI(t,e){const n=typeof t=="object"?t:P2(),r=typeof t=="string"?t:Ga,s=A2(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=gE("firestore");i&&OI(s,...i)}return s}function Nd(t){if(t._terminated)throw new B(j.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||zI(t),t._firestoreClient}function zI(t){var r,s,i;const e=t._freezeSettings(),n=function(l,u,h,p){return new cT(l,u,h,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,c_(p.experimentalLongPollingOptions),p.useFetchStreams,p.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(s=e.localCache)!=null&&s._offlineComponentProvider&&((i=e.localCache)!=null&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new DI(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Vt(et.fromBase64String(e))}catch(n){throw new B(j.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Vt(et.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Vt._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(fo(e,Vt._jsonSchema))return Vt.fromBase64String(e.bytes)}}Vt._jsonSchemaVersion="firestore/bytes/1.0",Vt._jsonSchema={type:Me("string",Vt._jsonSchemaVersion),bytes:Me("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vl{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new B(j.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Xe(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dl{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new B(j.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new B(j.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ne(this._lat,e._lat)||ne(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ln._jsonSchemaVersion}}static fromJSON(e){if(fo(e,ln._jsonSchema))return new ln(e.latitude,e.longitude)}}ln._jsonSchemaVersion="firestore/geoPoint/1.0",ln._jsonSchema={type:Me("string",ln._jsonSchemaVersion),latitude:Me("number"),longitude:Me("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:un._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(fo(e,un._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new un(e.vectorValues);throw new B(j.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}un._jsonSchemaVersion="firestore/vectorValue/1.0",un._jsonSchema={type:Me("string",un._jsonSchemaVersion),vectorValues:Me("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UI=/^__.*__$/;class BI{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new hr(e,this.data,this.fieldMask,n,this.fieldTransforms):new mo(e,this.data,n,this.fieldTransforms)}}class d_{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new hr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function f_(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw G(40011,{Ac:t})}}class Rd{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Rd({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return tl(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(f_(this.Ac)&&UI.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class $I{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Cl(e)}Cc(e,n,r,s=!1){return new Rd({Ac:e,methodName:n,Dc:r,path:Xe.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function jl(t){const e=t._freezeSettings(),n=Cl(t._databaseId);return new $I(t._databaseId,!!e.ignoreUndefinedProperties,n)}function m_(t,e,n,r,s,i={}){const o=t.Cc(i.merge||i.mergeFields?2:0,e,n,s);Vd("Data must be an object, but it was:",o,r);const l=p_(r,o);let u,h;if(i.merge)u=new kt(o.fieldMask),h=o.fieldTransforms;else if(i.mergeFields){const p=[];for(const m of i.mergeFields){const g=sh(e,m,n);if(!o.contains(g))throw new B(j.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);y_(p,g)||p.push(g)}u=new kt(p),h=o.fieldTransforms.filter(m=>u.covers(m.field))}else u=null,h=o.fieldTransforms;return new BI(new vt(l),u,h)}class Ll extends Dl{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Ll}}class Pd extends Dl{_toFieldTransform(e){return new LT(e.path,new so)}isEqual(e){return e instanceof Pd}}function qI(t,e,n,r){const s=t.Cc(1,e,n);Vd("Data must be an object, but it was:",s,r);const i=[],o=vt.empty();cr(r,(u,h)=>{const p=Dd(e,u,n);h=cn(h);const m=s.yc(p);if(h instanceof Ll)i.push(p);else{const g=vo(h,m);g!=null&&(i.push(p),o.set(p,g))}});const l=new kt(i);return new d_(o,l,s.fieldTransforms)}function HI(t,e,n,r,s,i){const o=t.Cc(1,e,n),l=[sh(e,r,n)],u=[s];if(i.length%2!=0)throw new B(j.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<i.length;g+=2)l.push(sh(e,i[g])),u.push(i[g+1]);const h=[],p=vt.empty();for(let g=l.length-1;g>=0;--g)if(!y_(h,l[g])){const S=l[g];let C=u[g];C=cn(C);const N=o.yc(S);if(C instanceof Ll)h.push(S);else{const D=vo(C,N);D!=null&&(h.push(S),p.set(S,D))}}const m=new kt(h);return new d_(p,m,o.fieldTransforms)}function WI(t,e,n,r=!1){return vo(n,t.Cc(r?4:3,e))}function vo(t,e){if(g_(t=cn(t)))return Vd("Unsupported field value:",e,t),p_(t,e);if(t instanceof Dl)return function(r,s){if(!f_(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const l of r){let u=vo(l,s.wc(o));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=cn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return VT(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=_e.fromDate(r);return{timestampValue:Xa(s.serializer,i)}}if(r instanceof _e){const i=new _e(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Xa(s.serializer,i)}}if(r instanceof ln)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Vt)return{bytesValue:Pv(s.serializer,r._byteString)};if(r instanceof Pe){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:gd(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof un)return function(o,l){return{mapValue:{fields:{[av]:{stringValue:lv},[Qa]:{arrayValue:{values:o.toArray().map(h=>{if(typeof h!="number")throw l.Sc("VectorValues must only contain numeric values.");return dd(l.serializer,h)})}}}}}}(r,s);throw s.Sc(`Unsupported field value: ${wl(r)}`)}(t,e)}function p_(t,e){const n={};return tv(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):cr(t,(r,s)=>{const i=vo(s,e.mc(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function g_(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof _e||t instanceof ln||t instanceof Vt||t instanceof Pe||t instanceof Dl||t instanceof un)}function Vd(t,e,n){if(!g_(n)||!Z0(n)){const r=wl(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function sh(t,e,n){if((e=cn(e))instanceof Vl)return e._internalPath;if(typeof e=="string")return Dd(t,e);throw tl("Field path arguments must be of type string or ",t,!1,void 0,n)}const GI=new RegExp("[~\\*/\\[\\]]");function Dd(t,e,n){if(e.search(GI)>=0)throw tl(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Vl(...e.split("."))._internalPath}catch{throw tl(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function tl(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(i||o)&&(u+=" (found",i&&(u+=` in field ${r}`),o&&(u+=` in document ${s}`),u+=")"),new B(j.INVALID_ARGUMENT,l+t+u)}function y_(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v_{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Pe(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new QI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(jd("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class QI extends v_{data(){return super.data()}}function jd(t,e){return typeof e=="string"?Dd(t,e):e instanceof Vl?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new B(j.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ld{}class w_ extends Ld{}function x_(t,e,...n){let r=[];e instanceof Ld&&r.push(e),r=r.concat(n),function(i){const o=i.filter(u=>u instanceof Od).length,l=i.filter(u=>u instanceof Md).length;if(o>1||o>0&&l>0)throw new B(j.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Md extends w_{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Md(e,n,r)}_apply(e){const n=this._parse(e);return T_(e._query,n),new dr(e.firestore,e.converter,Wc(e._query,n))}_parse(e){const n=jl(e.firestore);return function(i,o,l,u,h,p,m){let g;if(h.isKeyField()){if(p==="array-contains"||p==="array-contains-any")throw new B(j.INVALID_ARGUMENT,`Invalid Query. You can't perform '${p}' queries on documentId().`);if(p==="in"||p==="not-in"){og(m,p);const C=[];for(const N of m)C.push(ig(u,i,N));g={arrayValue:{values:C}}}else g=ig(u,i,m)}else p!=="in"&&p!=="not-in"&&p!=="array-contains-any"||og(m,p),g=WI(l,o,m,p==="in"||p==="not-in");return Le.create(h,p,g)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class Od extends Ld{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Od(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Qt.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const l=i.getFlattenedFilters();for(const u of l)T_(o,u),o=Wc(o,u)}(e._query,n),new dr(e.firestore,e.converter,Wc(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Fd extends w_{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Fd(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new B(j.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new B(j.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ro(i,o)}(e._query,this._field,this._direction);return new dr(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new Fs(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function E_(t,e="asc"){const n=e,r=jd("orderBy",t);return Fd._create(r,n)}function ig(t,e,n){if(typeof(n=cn(n))=="string"){if(n==="")throw new B(j.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!gv(e)&&n.indexOf("/")!==-1)throw new B(j.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(pe.fromString(n));if(!W.isDocumentKey(r))throw new B(j.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return xp(t,new W(r))}if(n instanceof Pe)return xp(t,n._key);throw new B(j.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${wl(n)}.`)}function og(t,e){if(!Array.isArray(t)||t.length===0)throw new B(j.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function T_(t,e){const n=function(s,i){for(const o of s)for(const l of o.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new B(j.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new B(j.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class KI{convertValue(e,n="none"){switch(rr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ne(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(nr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw G(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return cr(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var r,s,i;const n=(i=(s=(r=e.fields)==null?void 0:r[Qa].arrayValue)==null?void 0:s.values)==null?void 0:i.map(o=>Ne(o.doubleValue));return new un(n)}convertGeoPoint(e){return new ln(Ne(e.latitude),Ne(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Tl(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(eo(e));default:return null}}convertTimestamp(e){const n=tr(e);return new _e(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=pe.fromString(e);ce(Ov(r),9688,{name:e});const s=new to(r.get(1),r.get(3)),i=new W(r.popFirst(5));return s.isEqual(n)||En(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S_(t,e,n){let r;return r=t?t.toFirestore(e):e,r}class vi{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class br extends v_{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new ga(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(jd("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new B(j.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=br._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}br._jsonSchemaVersion="firestore/documentSnapshot/1.0",br._jsonSchema={type:Me("string",br._jsonSchemaVersion),bundleSource:Me("string","DocumentSnapshot"),bundleName:Me("string"),bundle:Me("string")};class ga extends br{data(e={}){return super.data(e)}}class Cr{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new vi(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new ga(this._firestore,this._userDataWriter,r.key,r,new vi(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new B(j.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(l=>{const u=new ga(s._firestore,s._userDataWriter,l.doc.key,l.doc,new vi(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const u=new ga(s._firestore,s._userDataWriter,l.doc.key,l.doc,new vi(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let h=-1,p=-1;return l.type!==0&&(h=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),p=o.indexOf(l.doc.key)),{type:YI(l.type),doc:u,oldIndex:h,newIndex:p}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new B(j.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Cr._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=id.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function YI(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return G(61501,{type:t})}}Cr._jsonSchemaVersion="firestore/querySnapshot/1.0",Cr._jsonSchema={type:Me("string",Cr._jsonSchemaVersion),bundleSource:Me("string","QuerySnapshot"),bundleName:Me("string"),bundle:Me("string")};class zd extends KI{constructor(e){super(),this.firestore=e}convertBytes(e){return new Vt(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Pe(this.firestore,null,n)}}function I_(t){t=Lt(t,dr);const e=Lt(t.firestore,or),n=Nd(e),r=new zd(e);return __(t._query),MI(n,t._query).then(s=>new Cr(e,r,t,s))}function ag(t,e,n){t=Lt(t,Pe);const r=Lt(t.firestore,or),s=S_(t.converter,e);return Ol(r,[m_(jl(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Mt.none())])}function k_(t,e,n,...r){t=Lt(t,Pe);const s=Lt(t.firestore,or),i=jl(s);let o;return o=typeof(e=cn(e))=="string"||e instanceof Vl?HI(i,"updateDoc",t._key,e,n,r):qI(i,"updateDoc",t._key,e),Ol(s,[o.toMutation(t._key,Mt.exists(!0))])}function Nr(t){return Ol(Lt(t.firestore,or),[new fd(t._key,Mt.none())])}function Ml(t,e){const n=Lt(t.firestore,or),r=qt(t),s=S_(t.converter,e);return Ol(n,[m_(jl(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,Mt.exists(!1))]).then(()=>r)}function Ud(t,...e){var u,h,p;t=cn(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||sg(e[r])||(n=e[r++]);const s={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(sg(e[r])){const m=e[r];e[r]=(u=m.next)==null?void 0:u.bind(m),e[r+1]=(h=m.error)==null?void 0:h.bind(m),e[r+2]=(p=m.complete)==null?void 0:p.bind(m)}let i,o,l;if(t instanceof Pe)o=Lt(t.firestore,or),l=hd(t._key.path),i={next:m=>{e[r]&&e[r](XI(o,t,m))},error:e[r+1],complete:e[r+2]};else{const m=Lt(t,dr);o=Lt(m.firestore,or),l=m._query;const g=new zd(o);i={next:S=>{e[r]&&e[r](new Cr(o,g,m,S))},error:e[r+1],complete:e[r+2]},__(t._query)}return function(g,S,C,N){const D=new l_(N),_=new Zv(S,D,C);return g.asyncQueue.enqueueAndForget(async()=>Xv(await rh(g),_)),()=>{D.Nu(),g.asyncQueue.enqueueAndForget(async()=>Jv(await rh(g),_))}}(Nd(o),l,s,i)}function Ol(t,e){return function(r,s){const i=new Yn;return r.asyncQueue.enqueueAndForget(async()=>II(await LI(r),s,i)),i.promise}(Nd(t),e)}function XI(t,e,n){const r=n.docs.get(e._key),s=new zd(t);return new br(t,s,e._key,r,new vi(n.hasPendingWrites,n.fromCache),e.converter)}function Rs(){return new Pd("serverTimestamp")}(function(e,n=!0){(function(s){Ls=s})(R2),Ha(new Xi("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),l=new or(new H2(r.getProvider("auth-internal")),new Q2(o,r.getProvider("app-check-internal")),function(h,p){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new B(j.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new to(h.options.projectId,p)}(o,s),o);return i={useFetchStreams:n,...i},l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),gs(lp,up,e),gs(lp,up,"esm2020")})();var JI="firebase",ZI="12.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */gs(JI,ZI,"app");const ek={apiKey:"AIzaSyBQwo6qEZWlOyXRv3iPycYiLIqRt3PalkE",authDomain:"foodflash-46a42.firebaseapp.com",projectId:"foodflash-46a42",storageBucket:"foodflash-46a42.firebasestorage.app",messagingSenderId:"497618057237",appId:"1:497618057237:web:3025f9c950cdf76b67361c"},tk=U0(ek),Ye=FI(tk),Bd=()=>{const[t,e]=H.useState([]),[n,r]=H.useState(!0),[s,i]=H.useState(null);return H.useEffect(()=>{const h=Or(Ye,"recipes"),p=x_(h,E_("createdAt","desc")),m=Ud(p,g=>{const S=[];g.forEach(C=>{var D,_,x;const N=C.data();S.push({id:C.id,...N,ingredients:N.ingredients||[],comments:N.comments||[],createdAt:((x=(_=(D=N.createdAt)==null?void 0:D.toDate)==null?void 0:_.call(D))==null?void 0:x.toISOString())||new Date().toISOString()})}),e(S),r(!1),i(null)},g=>{console.error("Error fetching recipes:",g),i("Fehler beim Laden der Rezepte"),r(!1)});return()=>m()},[]),{recipes:t,isLoading:n,error:s,addRecipe:async h=>{try{const p=Or(Ye,"recipes");await Ml(p,{...h,createdAt:Rs(),ingredients:h.ingredients||[],comments:h.comments||[]})}catch(p){throw console.error("Error adding recipe:",p),i("Fehler beim Hinzufgen des Rezepts"),p}},updateRecipe:async(h,p)=>{try{const m=qt(Ye,"recipes",h);await k_(m,p)}catch(m){throw console.error("Error updating recipe:",m),i("Fehler beim Aktualisieren des Rezepts"),m}},deleteRecipe:async h=>{try{const p=qt(Ye,"recipes",h);await Nr(p)}catch(p){throw console.error("Error deleting recipe:",p),i("Fehler beim Lschen des Rezepts"),p}}}},A_=t=>{if(!t||t.trim()==="")return"own";const e=t.toLowerCase();return e.includes("youtube.com")||e.includes("youtu.be")?"youtube":e.includes("instagram.com")?"instagram":e.includes("facebook.com")||e.includes("fb.com")?"facebook":e.includes("tiktok.com")?"tiktok":"other"},b_=t=>{if(!t)return null;try{const e=t.toLowerCase();let n=null;if(e.includes("youtube.com/watch"))n=new URL(t).searchParams.get("v");else if(e.includes("youtu.be/")){const r=t.match(/youtu\.be\/([^?&]+)/);n=r?r[1]:null}else if(e.includes("youtube.com/embed/")){const r=t.match(/youtube\.com\/embed\/([^?&]+)/);n=r?r[1]:null}return n?`https://img.youtube.com/vi/${n}/maxresdefault.jpg`:null}catch(e){return console.error("Error extracting YouTube thumbnail:",e),null}},C_=t=>{if(!t)return!1;const e=t.toLowerCase();return e.includes("youtube.com")||e.includes("youtu.be")},nl=t=>{if(!t||!t.includes("drive.google.com"))return t;try{let e=null;const r=t.split("?")[0].match(/\/file\/d\/([^/]+)/);if(r&&(e=r[1]),!e){const s=t.match(/[?&]id=([^&]+)/);s&&(e=s[1])}if(!e){const s=t.match(/[?&]id=([^&]+)/);s&&(e=s[1])}return e?`https://drive.google.com/thumbnail?id=${e}&sz=w1000`:(t.includes("uc?export=view")||t.includes("thumbnail?id="),t)}catch(e){return console.error("Error converting Google Drive URL:",e),t}},rl=t=>!!(t&&t.includes("drive.google.com")),N_=({ingredients:t,onChange:e})=>{const[n,r]=H.useState(""),[s,i]=H.useState(""),o=m=>{r(m.target.value)},l=m=>{i(m.target.value)},u=()=>{if(!n.trim())return;const m={name:n.trim(),quantity:s.trim()||void 0};e([...t,m]),r(""),i("")},h=m=>{e(t.filter((g,S)=>S!==m))},p=m=>{m.key==="Enter"&&(m.preventDefault(),u())};return d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-200 mb-2",children:"Zutaten (optional)"}),t.length>0&&d.jsx("div",{className:"space-y-1 mb-3 max-h-32 overflow-y-auto",children:t.map((m,g)=>d.jsxs("div",{className:"flex items-center gap-2 bg-slate-700 rounded-lg px-3 py-2 group",children:[d.jsxs("span",{className:"flex-1 text-sm text-gray-100",children:[m.name,m.quantity&&d.jsxs("span",{className:"text-gray-400 ml-2",children:["(",m.quantity,")"]})]}),d.jsx("button",{type:"button",onClick:()=>h(g),"data-test-id":`remove-ingredient-${g}`,"aria-label":"Zutat entfernen",className:"opacity-0 group-hover:opacity-100 transition-opacity text-red-500 hover:text-red-600",children:d.jsx(sn,{className:"h-4 w-4"})})]},g))}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx("input",{type:"text",value:n,onChange:o,onKeyPress:p,placeholder:"Zutat, z.B. Tomaten",className:"flex-1 px-3 py-2 text-sm border-2 border-gray-600 rounded-lg focus:border-primary-500 focus:outline-none transition-colors bg-slate-700 text-gray-100 placeholder-gray-400"}),d.jsx("input",{type:"text",value:s,onChange:l,onKeyPress:p,placeholder:"Menge",className:"w-24 px-3 py-2 text-sm border-2 border-gray-600 rounded-lg focus:border-primary-500 focus:outline-none transition-colors bg-slate-700 text-gray-100 placeholder-gray-400"}),d.jsx("button",{type:"button",onClick:u,"data-test-id":"add-ingredient","aria-label":"Zutat hinzufgen",disabled:!n.trim(),className:Ee("px-3 py-2 rounded-lg transition-all duration-200",n.trim()?"bg-accent-500 text-white hover:bg-accent-600":"bg-slate-600 text-gray-500 cursor-not-allowed"),children:d.jsx(Yi,{className:"h-4 w-4"})})]}),d.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Enter drcken oder Plus-Button zum Hinzufgen"})]})},nk=({onAdd:t})=>{const[e,n]=H.useState(!1),[r,s]=H.useState(""),[i,o]=H.useState(""),[l,u]=H.useState(""),[h,p]=H.useState(""),[m,g]=H.useState([]),[S,C]=H.useState(!1),N=A=>{if(A.preventDefault(),!r.trim()){alert("Bitte Titel eingeben!");return}const w=A_(i);t({title:r.trim(),url:i.trim()||"",description:l.trim(),imageUrl:h.trim()||void 0,ingredients:m,platform:w}),s(""),o(""),u(""),p(""),g([]),n(!1)},D=A=>{s(A.target.value)},_=A=>{o(A.target.value)},x=A=>{u(A.target.value)},b=A=>{const w=A.target.value;p(w)};H.useEffect(()=>{if(h&&rl(h)){const A=nl(h);A!==h&&p(A)}},[h]);const V=()=>{const A=b_(i);A&&p(A)},M=()=>{n(!e)},F=()=>{C(!S)},E=C_(i),v=i.toLowerCase(),T=v.includes("instagram.com"),k=v.includes("facebook.com")||v.includes("fb.com"),I=v.includes("tiktok.com");return e?d.jsxs("div",{className:"bg-slate-800/80 backdrop-blur-sm rounded-2xl p-6 shadow-xl border-2 border-primary-500/30 autumn-glow",children:[d.jsxs("div",{className:"flex items-center justify-between mb-6",children:[d.jsxs("h3",{className:"text-2xl font-bold text-gray-100 flex items-center gap-2",children:[d.jsx(Yi,{className:"h-6 w-6 text-primary-500"}),"Neues Rezept"]}),d.jsx("button",{onClick:M,"data-test-id":"close-add-recipe","aria-label":"Formular schlieen",className:"p-2 hover:bg-slate-700 rounded-full transition-colors",children:d.jsx(sn,{className:"h-6 w-6 text-gray-300"})})]}),d.jsxs("form",{onSubmit:N,className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{htmlFor:"recipe-title",className:"block text-sm font-medium text-gray-200 mb-1",children:"Rezept-Titel *"}),d.jsx("input",{id:"recipe-title",type:"text",value:r,onChange:D,"data-test-id":"recipe-title-input","aria-label":"Rezept-Titel eingeben",placeholder:"z.B. Spaghetti Carbonara",className:"w-full px-4 py-2 border-2 border-gray-600 rounded-lg focus:border-primary-500 focus:outline-none transition-colors bg-slate-700 text-gray-100 placeholder-gray-400",required:!0})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"recipe-url",className:"block text-sm font-medium text-gray-200 mb-1",children:"Link zum Rezept (optional)"}),d.jsx("input",{id:"recipe-url",type:"url",value:i,onChange:_,"data-test-id":"recipe-url-input","aria-label":"Rezept-URL eingeben",placeholder:"https://www.youtube.com/watch?v=... (oder leer fr eigenes Rezept)",className:"w-full px-4 py-2 border-2 border-gray-600 rounded-lg focus:border-primary-500 focus:outline-none transition-colors bg-slate-700 text-gray-100 placeholder-gray-400"}),d.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"YouTube, Instagram, Facebook, TikTok Link - oder leer lassen fr eigene Rezepte"})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"recipe-description",className:"block text-sm font-medium text-gray-200 mb-1",children:"Beschreibung (optional)"}),d.jsx("textarea",{id:"recipe-description",value:l,onChange:x,"data-test-id":"recipe-description-input","aria-label":"Rezept-Beschreibung eingeben",placeholder:"Was macht dieses Rezept besonders?",rows:3,className:"w-full px-4 py-2 border-2 border-gray-600 rounded-lg focus:border-primary-500 focus:outline-none transition-colors resize-none bg-slate-700 text-gray-100 placeholder-gray-400"})]}),d.jsx(N_,{ingredients:m,onChange:g}),d.jsxs("div",{children:[d.jsxs("div",{className:"flex items-center justify-between mb-1",children:[d.jsx("label",{htmlFor:"recipe-image",className:"block text-sm font-medium text-gray-200",children:"Bild-URL (optional)"}),d.jsxs("div",{className:"flex items-center gap-2",children:[E&&d.jsxs("button",{type:"button",onClick:V,"data-test-id":"auto-fill-image","aria-label":"Bild automatisch aus YouTube laden",className:"flex items-center gap-1 text-xs font-medium text-primary-500 hover:text-primary-600 transition-colors",children:[d.jsx(ed,{className:"h-3 w-3"}),"Auto-Fill"]}),(T||k||I)&&d.jsxs("button",{type:"button",onClick:F,"data-test-id":"thumbnail-help","aria-label":"Hilfe zum Thumbnail finden",className:"flex items-center gap-1 text-xs font-medium text-secondary-500 hover:text-secondary-600 transition-colors",children:[d.jsx(A0,{className:"h-3 w-3"}),"Hilfe"]})]})]}),d.jsx("input",{id:"recipe-image",type:"url",value:h,onChange:b,"data-test-id":"recipe-image-input","aria-label":"Bild-URL eingeben",placeholder:E?"Klicke 'Auto-Fill' fr YouTube-Thumbnail":"Google Drive oder imgbb.com Link",className:"w-full px-4 py-2 border-2 border-gray-600 rounded-lg focus:border-primary-500 focus:outline-none transition-colors bg-slate-700 text-gray-100 placeholder-gray-400"}),E&&d.jsx("p",{className:"text-xs text-primary-600 mt-1",children:' YouTube-Thumbnail verfgbar - klicke "Auto-Fill"'}),h&&rl(h)&&d.jsx("p",{className:"text-xs text-green-600 mt-1",children:" Google Drive Link erkannt - wird automatisch konvertiert"}),h&&d.jsxs("div",{className:"mt-3",children:[d.jsx("p",{className:"text-xs font-medium text-gray-200 mb-1",children:"Vorschau:"}),d.jsx("div",{className:"relative w-full h-40 bg-slate-700 rounded-lg overflow-hidden border-2 border-gray-600",children:d.jsx("img",{src:nl(h),alt:"Vorschau",className:"w-full h-full object-cover",onError:A=>{const w=A.target;w.style.display="none";const ee=w.parentElement;ee&&(ee.innerHTML='<div class="flex items-center justify-center h-full text-red-500 text-sm p-4 text-center"><div><p class="font-bold"> Bild kann nicht geladen werden</p><p class="text-xs mt-1">Prfe Google Drive Freigabe:<br/>"Jeder mit dem Link"</p></div></div>')},onLoad:A=>{const ee=A.target.parentElement;if(ee){const Ve=document.createElement("div");Ve.className="absolute top-2 right-2 bg-green-500 text-white text-xs px-2 py-1 rounded-full font-medium",Ve.textContent=" OK",ee.appendChild(Ve)}}})})]}),S&&(T||k||I)&&d.jsxs("div",{className:"mt-3 p-4 bg-blue-50 border-2 border-blue-200 rounded-lg",children:[d.jsxs("div",{className:"flex items-start justify-between mb-2",children:[d.jsxs("h4",{className:"font-bold text-blue-800 text-sm",children:[T&&" Instagram Thumbnail finden",k&&" Facebook Thumbnail finden",I&&" TikTok Thumbnail finden"]}),d.jsx("button",{type:"button",onClick:F,className:"text-blue-600 hover:text-blue-800",children:d.jsx(sn,{className:"h-4 w-4"})})]}),T&&d.jsxs("ol",{className:"text-xs text-blue-700 space-y-1 list-decimal list-inside",children:[d.jsx("li",{children:"ffne den Instagram-Post im Browser"}),d.jsx("li",{children:'Rechtsklick auf das Bild/Video  "Bild-URL kopieren" oder "Grafik-Adresse kopieren"'}),d.jsx("li",{children:"Fge die URL hier ein"}),d.jsxs("li",{children:[d.jsx("strong",{children:"Alternative:"})," Screenshot vom Post machen"]})]}),k&&d.jsxs("ol",{className:"text-xs text-blue-700 space-y-1 list-decimal list-inside",children:[d.jsx("li",{children:"ffne das Facebook-Video im Browser"}),d.jsx("li",{children:'Rechtsklick auf das Video-Thumbnail  "Grafikadresse kopieren"'}),d.jsx("li",{children:"Fge die URL hier ein"}),d.jsxs("li",{children:[d.jsx("strong",{children:"Alternative:"})," Screenshot machen"]})]}),I&&d.jsxs("ol",{className:"text-xs text-blue-700 space-y-1 list-decimal list-inside",children:[d.jsx("li",{children:"ffne das TikTok-Video im Browser"}),d.jsx("li",{children:"Pause das Video bei einem guten Frame"}),d.jsx("li",{children:"Screenshot vom Video machen"})]}),d.jsxs("div",{className:"mt-3 pt-3 border-t border-blue-300",children:[d.jsx("p",{className:"text-xs font-bold text-blue-800 mb-2",children:" Mit Google Drive (empfohlen):"}),d.jsxs("ol",{className:"text-xs text-blue-700 space-y-1 list-decimal list-inside",children:[d.jsx("li",{children:"Screenshot/Bild in Google Drive hochladen"}),d.jsx("li",{children:'Rechtsklick auf Datei  "Link teilen"'}),d.jsx("li",{children:'Auf "Eingeschrnkt" klicken  "Jeder mit dem Link" whlen'}),d.jsxs("li",{children:["Link kopieren (sieht aus wie: ",d.jsx("code",{className:"bg-blue-100 px-1",children:"drive.google.com/file/d/XXXX/view"}),")"]}),d.jsxs("li",{children:["ndere das Format zu: ",d.jsx("code",{className:"bg-blue-100 px-1 block mt-1",children:"drive.google.com/uc?export=view&id=XXXX"})]}),d.jsx("li",{children:"Fge diesen Link hier ein"})]})]}),d.jsxs("div",{className:"mt-2 pt-2 border-t border-blue-300",children:[d.jsx("p",{className:"text-xs font-bold text-blue-800 mb-1",children:" Alternative: imgbb.com"}),d.jsx("p",{className:"text-xs text-blue-700",children:"Kostenlos, kein Account ntig - einfach hochladen & Link kopieren"})]})]})]}),d.jsx("button",{type:"submit","data-test-id":"submit-recipe","aria-label":"Rezept speichern",className:Ee("w-full py-3 rounded-lg font-bold text-white transition-all duration-200","bg-gradient-to-r from-primary-500 to-secondary-500","hover:shadow-lg hover:scale-105"),children:"Rezept speichern "})]})]}):d.jsxs("button",{onClick:M,"data-test-id":"open-add-recipe","aria-label":"Neues Rezept hinzufgen",className:"w-full bg-gradient-to-r from-primary-500 to-secondary-500 text-white rounded-2xl p-6 shadow-lg hover:shadow-xl transition-all duration-200 hover:scale-105 flex items-center justify-center gap-3 font-bold text-lg",children:[d.jsx(Yi,{className:"h-6 w-6"}),"Neues Rezept hinzufgen"]})},rk=({rating:t,onRatingChange:e,readonly:n=!1,size:r="md"})=>{const s={sm:"h-4 w-4",md:"h-5 w-5",lg:"h-6 w-6"},i=o=>{!n&&e&&e(o)};return d.jsx("div",{className:"flex items-center gap-1",children:[1,2,3,4,5].map(o=>{const l=o<=t;return d.jsx("button",{onClick:()=>i(o),"data-test-id":`star-${o}`,"aria-label":`${o} ${o===1?"Stern":"Sterne"} bewerten`,disabled:n,className:Ee("transition-all duration-200",!n&&"hover:scale-110 cursor-pointer",n&&"cursor-default"),children:d.jsx(tE,{className:Ee(s[r],l?"fill-yellow-400 text-yellow-400":"text-gray-300")})},o)})})},sk=({recipe:t,onSave:e,onClose:n})=>{const[r,s]=H.useState(t.title),[i,o]=H.useState(t.url),[l,u]=H.useState(t.description),[h,p]=H.useState(t.imageUrl||""),[m,g]=H.useState(t.ingredients||[]),[S,C]=H.useState(!1),N=I=>{if(I.preventDefault(),!r.trim()){alert("Bitte Titel eingeben!");return}const A=A_(i);e(t.id,{title:r.trim(),url:i.trim()||"",description:l.trim(),imageUrl:h.trim()||void 0,ingredients:m,platform:A}),n()},D=I=>{s(I.target.value)},_=I=>{o(I.target.value)},x=I=>{u(I.target.value)},b=I=>{p(I.target.value)},V=()=>{const I=b_(i);I&&p(I)},M=()=>{C(!S)};H.useEffect(()=>{if(h&&rl(h)){const I=nl(h);I!==h&&p(I)}},[h]);const F=C_(i),E=i.toLowerCase(),v=E.includes("instagram.com"),T=E.includes("facebook.com")||E.includes("fb.com"),k=E.includes("tiktok.com");return d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:d.jsxs("div",{className:"bg-slate-800/80 rounded-2xl p-6 max-w-2xl w-full shadow-2xl max-h-[90vh] overflow-y-auto",children:[d.jsxs("div",{className:"flex items-center justify-between mb-6",children:[d.jsx("h3",{className:"text-2xl font-bold text-gray-100",children:"Rezept bearbeiten"}),d.jsx("button",{onClick:n,"data-test-id":"close-edit-modal","aria-label":"Bearbeiten abbrechen",className:"p-2 hover:bg-slate-700 rounded-full transition-colors",children:d.jsx(sn,{className:"h-6 w-6 text-gray-300"})})]}),d.jsxs("form",{onSubmit:N,className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{htmlFor:"edit-title",className:"block text-sm font-medium text-gray-200 mb-1",children:"Rezept-Titel *"}),d.jsx("input",{id:"edit-title",type:"text",value:r,onChange:D,placeholder:"z.B. Spaghetti Carbonara",className:"w-full px-4 py-2 border-2 border-gray-600 rounded-lg focus:border-primary-500 focus:outline-none transition-colors bg-slate-700 text-gray-100 placeholder-gray-400",required:!0})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"edit-url",className:"block text-sm font-medium text-gray-200 mb-1",children:"Link zum Rezept (optional)"}),d.jsx("input",{id:"edit-url",type:"url",value:i,onChange:_,placeholder:"https://www.youtube.com/watch?v=... (oder leer fr eigenes Rezept)",className:"w-full px-4 py-2 border-2 border-gray-600 rounded-lg focus:border-primary-500 focus:outline-none transition-colors bg-slate-700 text-gray-100 placeholder-gray-400"})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"edit-description",className:"block text-sm font-medium text-gray-200 mb-1",children:"Beschreibung (optional)"}),d.jsx("textarea",{id:"edit-description",value:l,onChange:x,placeholder:"Was macht dieses Rezept besonders?",rows:3,className:"w-full px-4 py-2 border-2 border-gray-600 rounded-lg focus:border-primary-500 focus:outline-none transition-colors resize-none bg-slate-700 text-gray-100 placeholder-gray-400"})]}),d.jsx(N_,{ingredients:m,onChange:g}),d.jsxs("div",{children:[d.jsxs("div",{className:"flex items-center justify-between mb-1",children:[d.jsx("label",{htmlFor:"edit-image",className:"block text-sm font-medium text-gray-200",children:"Bild-URL (optional)"}),d.jsxs("div",{className:"flex items-center gap-2",children:[F&&d.jsxs("button",{type:"button",onClick:V,className:"flex items-center gap-1 text-xs font-medium text-primary-500 hover:text-primary-600 transition-colors",children:[d.jsx(ed,{className:"h-3 w-3"}),"Auto-Fill"]}),(v||T||k)&&d.jsxs("button",{type:"button",onClick:M,className:"flex items-center gap-1 text-xs font-medium text-secondary-500 hover:text-secondary-600 transition-colors",children:[d.jsx(A0,{className:"h-3 w-3"}),"Hilfe"]})]})]}),d.jsx("input",{id:"edit-image",type:"url",value:h,onChange:b,placeholder:"Google Drive oder imgbb.com Link",className:"w-full px-4 py-2 border-2 border-gray-600 rounded-lg focus:border-primary-500 focus:outline-none transition-colors bg-slate-700 text-gray-100 placeholder-gray-400"}),h&&rl(h)&&d.jsx("p",{className:"text-xs text-green-400 mt-1",children:" Google Drive Link erkannt - wird automatisch konvertiert"}),h&&d.jsxs("div",{className:"mt-3",children:[d.jsx("p",{className:"text-xs font-medium text-gray-200 mb-1",children:"Vorschau:"}),d.jsx("div",{className:"relative w-full h-40 bg-slate-700 rounded-lg overflow-hidden border-2 border-gray-600",children:d.jsx("img",{src:nl(h),alt:"Vorschau",className:"w-full h-full object-cover",onError:I=>{const A=I.target;A.style.display="none";const w=A.parentElement;w&&(w.innerHTML='<div class="flex items-center justify-center h-full text-red-500 text-sm p-4 text-center"><div><p class="font-bold"> Bild kann nicht geladen werden</p><p class="text-xs mt-1">Prfe Google Drive Freigabe:<br/>"Jeder mit dem Link"</p></div></div>')},onLoad:I=>{const w=I.target.parentElement;if(w){const ee=document.createElement("div");ee.className="absolute top-2 right-2 bg-green-500 text-white text-xs px-2 py-1 rounded-full font-medium",ee.textContent=" OK",w.appendChild(ee)}}})})]}),S&&(v||T||k)&&d.jsxs("div",{className:"mt-3 p-3 bg-slate-700 border border-primary-500/30 rounded-lg text-xs text-gray-200",children:[d.jsx("p",{className:"font-bold mb-1",children:" Tipp:"}),d.jsxs("p",{children:["Screenshot machen und auf ",d.jsx("a",{href:"https://imgbb.com",target:"_blank",rel:"noopener noreferrer",className:"underline",children:"imgbb.com"})," oder Google Drive hochladen"]})]})]}),d.jsxs("div",{className:"flex gap-3 pt-2",children:[d.jsx("button",{type:"button",onClick:n,className:"flex-1 py-3 rounded-lg font-medium bg-slate-700 text-gray-100 hover:bg-slate-600 transition-colors",children:"Abbrechen"}),d.jsxs("button",{type:"submit",className:"flex-1 py-3 rounded-lg font-bold text-white transition-all duration-200 bg-gradient-to-r from-primary-500 to-secondary-500 hover:shadow-lg hover:scale-105 flex items-center justify-center gap-2",children:[d.jsx(N0,{className:"h-5 w-5"}),"Speichern"]})]})]})]})})},R_=()=>{const[t,e]=H.useState([]),[n,r]=H.useState(!0),[s,i]=H.useState(null);return H.useEffect(()=>{const m=Or(Ye,"shoppingList"),g=x_(m,E_("addedAt","desc")),S=Ud(g,C=>{const N=[];C.forEach(D=>{var x,b,V;const _=D.data();N.push({id:D.id,..._,addedAt:((V=(b=(x=_.addedAt)==null?void 0:x.toDate)==null?void 0:b.call(x))==null?void 0:V.toISOString())||new Date().toISOString()})}),e(N),r(!1),i(null)},C=>{console.error("Error fetching shopping list:",C),i("Fehler beim Laden der Einkaufsliste"),r(!1)});return()=>S()},[]),{items:t,isLoading:n,error:s,addItem:async(m,g,S)=>{try{const C=Or(Ye,"shoppingList");await Ml(C,{name:m,quantity:S||"",category:g,checked:!1,addedAt:Rs()})}catch(C){throw console.error("Error adding item:",C),i("Fehler beim Hinzufgen des Artikels"),C}},toggleItem:async m=>{try{const g=t.find(C=>C.id===m);if(!g)return;const S=qt(Ye,"shoppingList",m);await k_(S,{checked:!g.checked})}catch(g){throw console.error("Error toggling item:",g),i("Fehler beim Aktualisieren des Artikels"),g}},removeItem:async m=>{try{const g=qt(Ye,"shoppingList",m);await Nr(g)}catch(g){throw console.error("Error removing item:",g),i("Fehler beim Lschen des Artikels"),g}},clearAllItems:async()=>{try{const m=t.map(g=>Nr(qt(Ye,"shoppingList",g.id)));await Promise.all(m)}catch(m){throw console.error("Error clearing shopping list:",m),i("Fehler beim Leeren der Einkaufsliste"),m}},clearCheckedItems:async()=>{try{const g=t.filter(S=>S.checked).map(S=>Nr(qt(Ye,"shoppingList",S.id)));await Promise.all(g)}catch(m){throw console.error("Error clearing checked items:",m),i("Fehler beim Lschen der erledigten Artikel"),m}}}},ik={produce:["tomate","gurke","salat","paprika","zwiebel","knoblauch","karotte","kartoffel","apfel","banane","zitrone","orange","beere","spinat","brokkoli","pilz","champignon"],bakery:["brot","brtchen","baguette","toast","croissant","mehl","hefe"],meat:["hhnchen","huhn","rind","schwein","hack","steak","filet","schnitzel","bratwurst"],deli:["schinken","salami","mortadella","aufschnitt","wurst"],dairy:["milch","butter","kse","joghurt","sahne","schmand","quark","frischkse","mozzarella","parmesan","ei","eier"],beverages:["wasser","saft","cola","limo","bier","wein","kaffee","tee","milch"],pantry:["reis","nudel","pasta","dose","konserve","l","essig","gewrz","salz","pfeffer","zucker","honig","marmelade","ketchup","senf","mayonnaise","soe"],snacks:["schokolade","keks","chips","sigkeit","gummibr","bonbon"],frozen:["tiefkhl","tk-","eis","eiscreme","gefrier"],household:["splmittel","schwamm","putzmittel","klopapier","kchenpapier","mllbeutel","alufolie","frischhaltefolie"]},ok=t=>{const e=t.toLowerCase();for(const[n,r]of Object.entries(ik))if(r.some(s=>e.includes(s)))return n;return"produce"},ak={youtube:{icon:Sr,color:"bg-red-600/20 text-red-400 border-red-500/30",label:"YouTube"},instagram:{icon:b0,color:"bg-pink-600/20 text-pink-400 border-pink-500/30",label:"Instagram"},facebook:{icon:k0,color:"bg-blue-600/20 text-blue-400 border-blue-500/30",label:"Facebook"},tiktok:{icon:C0,color:"bg-gray-600/20 text-gray-400 border-gray-500/30",label:"TikTok"},own:{icon:P0,color:"bg-secondary-600/20 text-secondary-400 border-secondary-500/30",label:"Eigenes Rezept"},other:{icon:Gx,color:"bg-accent-600/20 text-accent-400 border-accent-500/30",label:"Andere"}},lk=({recipe:t,onDelete:e,onUpdate:n})=>{const r=ak[t.platform],s=r.icon,[i,o]=H.useState(!1),[l,u]=H.useState(t.notes||""),[h,p]=H.useState(!1),[m,g]=H.useState(""),[S,C]=H.useState(!1),[N,D]=H.useState(!1),{addItem:_}=R_(),x=()=>{confirm(`Mchtest du "${t.title}" wirklich lschen?`)&&e(t.id)},b=()=>{t.url&&t.url.trim()!==""&&window.open(t.url,"_blank","noopener,noreferrer")},V=le=>{u(le.target.value)},M=()=>{n(t.id,{notes:l}),o(!1)},F=()=>{i&&u(t.notes||""),o(!i)},E=le=>{n(t.id,{rating:le})},v=le=>{g(le.target.value)},T=le=>{if(le.preventDefault(),!m.trim())return;const Oe={id:crypto.randomUUID(),text:m.trim(),createdAt:new Date().toISOString()},U=[...t.comments,Oe];n(t.id,{comments:U}),g("")},k=()=>{p(!h)},I=()=>{C(!0)},A=()=>{C(!1)},w=(le,Oe)=>{n(le,Oe),C(!1)},ee=()=>{if(t.ingredients.length===0){alert("Dieses Rezept hat keine Zutaten!");return}let le=0;t.ingredients.forEach(Oe=>{const U=ok(Oe.name);_(Oe.name,U,Oe.quantity),le++}),alert(` ${le} ${le===1?"Zutat":"Zutaten"} zur Einkaufsliste hinzugefgt!`)},Ve=()=>{D(!N)};return d.jsxs(d.Fragment,{children:[S&&d.jsx(sk,{recipe:t,onSave:w,onClose:A}),d.jsxs("div",{className:"bg-slate-800/80 backdrop-blur-sm rounded-2xl overflow-hidden shadow-xl hover:shadow-2xl transition-all duration-300 border-2 border-dark-600/50 hover:border-primary-500/30 hover:autumn-glow",children:[d.jsx("button",{onClick:Ve,className:"w-full",children:t.imageUrl?d.jsxs("div",{className:"h-48 overflow-hidden bg-gradient-to-br from-primary-100 to-secondary-100 relative",children:[d.jsx("img",{src:t.imageUrl,alt:t.title,className:"w-full h-full object-cover",onError:le=>{const Oe=le.target;Oe.style.display="none"}}),d.jsx("div",{className:"absolute bottom-2 right-2 bg-black bg-opacity-50 text-white text-xs px-2 py-1 rounded-full",children:N?" Weniger":" Mehr"})]}):d.jsxs("div",{className:"h-48 bg-gradient-to-br from-primary-100 via-secondary-100 to-accent-100 flex items-center justify-center relative",children:[d.jsx(s,{className:"h-16 w-16 text-white opacity-50"}),d.jsx("div",{className:"absolute bottom-2 right-2 bg-black bg-opacity-50 text-white text-xs px-2 py-1 rounded-full",children:N?" Weniger":" Mehr"})]})}),d.jsxs("div",{className:"p-5",children:[d.jsxs("div",{className:"flex items-center justify-between mb-3",children:[d.jsxs("div",{className:Ee("inline-flex items-center gap-2 px-3 py-1 rounded-full text-sm font-medium border-2",r.color),children:[d.jsx(s,{className:"h-4 w-4"}),r.label]}),d.jsx("button",{onClick:I,"data-test-id":`edit-recipe-${t.id}`,"aria-label":`Rezept ${t.title} bearbeiten`,className:"p-2 hover:bg-slate-700/50 rounded-lg transition-colors text-gray-400 hover:text-primary-400",children:d.jsx(Xx,{className:"h-4 w-4"})})]}),d.jsx("button",{onClick:Ve,className:"w-full text-left mb-3",children:d.jsx("h3",{className:"text-xl font-bold text-gray-100 line-clamp-2 hover:text-primary-400 transition-colors",children:t.title})}),N&&d.jsxs("div",{className:"space-y-4 animate-in fade-in slide-in-from-top-2 duration-200",children:[t.description&&d.jsx("p",{className:"text-gray-300 text-sm",children:t.description}),d.jsxs("p",{className:"text-xs text-gray-500",children:["Hinzugefgt: ",new Date(t.createdAt).toLocaleDateString("de-DE")]}),d.jsxs("div",{className:"mb-4 pb-4 border-b border-dark-600/50",children:[d.jsxs("div",{className:"flex items-center justify-between mb-2",children:[d.jsx("span",{className:"text-sm font-medium text-gray-200",children:"Bewertung"}),t.rating&&d.jsxs("span",{className:"text-xs text-gray-400",children:[t.rating,"/5"]})]}),d.jsx(rk,{rating:t.rating||0,onRatingChange:E,size:"lg"})]}),t.ingredients&&t.ingredients.length>0&&d.jsxs("div",{className:"pb-4 border-b border-dark-600/50",children:[d.jsxs("div",{className:"flex items-center justify-between mb-2",children:[d.jsxs("span",{className:"text-sm font-medium text-gray-200",children:["Zutaten (",t.ingredients.length,")"]}),d.jsxs("button",{onClick:ee,"data-test-id":`add-ingredients-to-list-${t.id}`,"aria-label":"Zutaten zur Einkaufsliste hinzufgen",className:"flex items-center gap-1 text-xs font-medium text-primary-500 hover:text-primary-600 transition-colors",children:[d.jsx(Zh,{className:"h-3 w-3"}),"Zur Einkaufsliste"]})]}),d.jsx("div",{className:"space-y-1 max-h-32 overflow-y-auto",children:t.ingredients.map((le,Oe)=>d.jsxs("div",{className:"text-sm text-gray-200 bg-slate-700/50 rounded px-2 py-1 flex justify-between",children:[d.jsx("span",{children:le.name}),le.quantity&&d.jsx("span",{className:"text-gray-400 text-xs",children:le.quantity})]},Oe))})]}),d.jsxs("div",{children:[d.jsxs("div",{className:"flex items-center justify-between mb-2",children:[d.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium text-gray-200",children:[d.jsx(P0,{className:"h-4 w-4 text-accent-500"}),"Notizen"]}),d.jsx("button",{onClick:F,"data-test-id":`toggle-notes-${t.id}`,"aria-label":i?"Notizen-Bearbeitung abbrechen":"Notizen bearbeiten",className:"text-xs text-primary-500 hover:text-primary-600 font-medium transition-colors",children:i?"Abbrechen":"Bearbeiten"})]}),i?d.jsxs("div",{className:"space-y-2",children:[d.jsx("textarea",{value:l,onChange:V,"data-test-id":`notes-input-${t.id}`,"aria-label":"Notizen bearbeiten",placeholder:"Fge deine Notizen hinzu...",rows:3,className:"w-full px-3 py-2 text-sm border-2 border-gray-600 rounded-lg focus:border-accent-500 focus:outline-none transition-colors resize-none bg-slate-700 text-gray-100 placeholder-gray-400"}),d.jsxs("button",{onClick:M,"data-test-id":`save-notes-${t.id}`,"aria-label":"Notizen speichern",className:Ee("w-full flex items-center justify-center gap-2 px-3 py-2 rounded-lg text-sm font-medium transition-all duration-200","bg-accent-500 text-white hover:bg-accent-600"),children:[d.jsx(N0,{className:"h-4 w-4"}),"Speichern"]})]}):d.jsx("div",{className:"text-sm text-gray-300 bg-slate-700/50 rounded-lg p-3 min-h-[60px]",children:t.notes||d.jsx("span",{className:"text-gray-500 italic",children:"Keine Notizen vorhanden"})})]}),d.jsxs("div",{className:"pb-4 border-b border-slate-600",children:[d.jsxs("button",{onClick:k,"data-test-id":`toggle-comments-${t.id}`,"aria-label":h?"Kommentare ausblenden":"Kommentare anzeigen",className:"flex items-center justify-between w-full text-sm font-medium text-gray-200 hover:text-gray-100 transition-colors",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(Yx,{className:"h-4 w-4 text-secondary-500"}),"Kommentare",t.comments.length>0&&d.jsx("span",{className:"bg-secondary-100 text-secondary-700 text-xs px-2 py-0.5 rounded-full",children:t.comments.length})]}),d.jsx("span",{className:"text-xs text-primary-500",children:h?"Ausblenden":"Anzeigen"})]}),h&&d.jsxs("div",{className:"mt-3 space-y-3",children:[t.comments.length>0&&d.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:t.comments.map(le=>d.jsxs("div",{className:"bg-slate-700/50 rounded-lg p-3 text-sm",children:[d.jsx("p",{className:"text-gray-200",children:le.text}),d.jsx("p",{className:"text-xs text-gray-500 mt-1",children:new Date(le.createdAt).toLocaleDateString("de-DE",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})})]},le.id))}),d.jsxs("form",{onSubmit:T,className:"flex gap-2",children:[d.jsx("input",{type:"text",value:m,onChange:v,"data-test-id":`comment-input-${t.id}`,"aria-label":"Kommentar hinzufgen",placeholder:"Kommentar hinzufgen...",className:"flex-1 px-3 py-2 text-sm border-2 border-gray-600 rounded-lg focus:border-secondary-500 focus:outline-none transition-colors bg-slate-700 text-gray-100 placeholder-gray-400"}),d.jsx("button",{type:"submit","data-test-id":`add-comment-${t.id}`,"aria-label":"Kommentar senden",disabled:!m.trim(),className:Ee("px-3 py-2 rounded-lg transition-all duration-200",m.trim()?"bg-secondary-500 text-white hover:bg-secondary-600":"bg-slate-600/50 text-gray-500 cursor-not-allowed"),children:d.jsx(Zx,{className:"h-4 w-4"})})]})]})]}),d.jsxs("div",{className:"flex gap-2",children:[t.url&&t.url.trim()!==""&&d.jsxs("button",{onClick:b,"data-test-id":`open-recipe-${t.id}`,"aria-label":`Rezept ${t.title} ffnen`,className:Ee("flex-1 flex items-center justify-center gap-2 px-4 py-2 rounded-lg font-medium transition-all duration-200","bg-primary-500 text-white hover:bg-primary-600 hover:shadow-md"),children:[d.jsx(Hx,{className:"h-4 w-4"}),"ffnen"]}),d.jsx("button",{onClick:x,"data-test-id":`delete-recipe-${t.id}`,"aria-label":`Rezept ${t.title} lschen`,className:Ee("px-4 py-2 rounded-lg font-medium transition-all duration-200","bg-red-100 text-red-600 hover:bg-red-200",!t.url||t.url.trim()===""?"flex-1":""),children:d.jsx(Ua,{className:"h-4 w-4"})})]}),d.jsx("button",{onClick:Ve,"data-test-id":`collapse-recipe-${t.id}`,"aria-label":"Details ausblenden",className:"w-full mt-4 py-2 text-sm font-medium text-gray-400 hover:text-primary-400 transition-colors border-t border-dark-600/50 pt-4",children:" Weniger anzeigen"})]}),!N&&d.jsxs("div",{className:"flex items-center justify-between pt-3 border-t border-dark-600/50",children:[d.jsxs("div",{className:"flex items-center gap-3 text-xs text-gray-400",children:[t.rating&&d.jsxs("span",{className:"flex items-center gap-1",children:[" ",t.rating,"/5"]}),t.ingredients.length>0&&d.jsxs("span",{children:[" ",t.ingredients.length]}),t.comments.length>0&&d.jsxs("span",{children:[" ",t.comments.length]})]}),d.jsx("button",{onClick:Ve,className:"text-xs text-primary-500 hover:text-primary-600 font-medium",children:"Mehr anzeigen "})]})]})]})]})},uk=({searchTerm:t,onSearchChange:e})=>{const n=s=>{e(s.target.value)},r=()=>{e("")};return d.jsxs("div",{className:"relative",children:[d.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:d.jsx(R0,{className:"h-5 w-5 text-gray-400"})}),d.jsx("input",{type:"text",value:t,onChange:n,"data-test-id":"search-recipes","aria-label":"Rezepte suchen",placeholder:"Suche nach Rezepten, Beschreibung oder Plattform...",className:Ee("w-full pl-12 pr-12 py-3 rounded-full border-2 border-gray-600","focus:border-primary-500 focus:outline-none transition-colors","bg-slate-800/80 shadow-sm text-gray-100 placeholder-gray-400")}),t&&d.jsx("button",{onClick:r,"data-test-id":"clear-search","aria-label":"Suche lschen",className:"absolute inset-y-0 right-0 pr-4 flex items-center hover:text-gray-200 text-gray-400 transition-colors",children:d.jsx(sn,{className:"h-5 w-5"})})]})},P_=async t=>{try{const e=V_(t);if(!e)throw new Error("Ungltige Gist-URL");const n=`https://api.github.com/gists/${e}`,r=await fetch(n);if(!r.ok)throw new Error("Gist konnte nicht geladen werden");const s=await r.json(),i=Object.values(s.files);if(!i.length)throw new Error("Gist enthlt keine Dateien");const o=i[0].content,l=JSON.parse(o);if(!l.recipes||!Array.isArray(l.recipes))throw new Error("Ungltiges Datenformat");return l}catch(e){throw new Error("Fehler beim Laden vom Gist: "+e.message)}},V_=t=>{const e=[/gist\.github\.com\/[^\/]+\/([a-f0-9]+)/i,/gist\.github\.com\/([a-f0-9]+)/i,/^([a-f0-9]{32})$/i];for(const n of e){const r=t.match(n);if(r)return r[1]}return null},ck=t=>V_(t)!==null,hk="https://gist.github.com/tubackit/ab2aa98a3c0fd463e82701a616f0dbf6",dk=({onSync:t,mode:e="merge"})=>{const[n,r]=H.useState(!1),[s,i]=H.useState(localStorage.getItem("foodflash_last_sync")),o=async()=>{r(!0);try{const u=await P_(hk);e==="replace"&&localStorage.removeItem("foodflash_recipes"),t(u.recipes);const h=new Date().toISOString();i(h),localStorage.setItem("foodflash_last_sync",h),alert(` ${u.recipes.length} Familien-Rezepte geladen!`)}catch(u){alert(" Fehler beim Laden: "+u.message)}finally{r(!1)}},l=()=>s?new Date(s).toLocaleDateString("de-DE",{day:"2-digit",month:"2-digit",hour:"2-digit",minute:"2-digit"}):"Nie";return d.jsxs("div",{className:"bg-gradient-to-r from-blue-500 to-purple-500 rounded-2xl p-4 shadow-lg text-white",children:[d.jsxs("div",{className:"flex items-center justify-between mb-2",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(Dc,{className:"h-5 w-5"}),d.jsx("h3",{className:"font-bold",children:"Familien-Rezepte"})]}),d.jsxs("p",{className:"text-xs opacity-90",children:["Letzter Sync: ",l()]})]}),d.jsxs("button",{onClick:o,disabled:n,"data-test-id":"family-sync","aria-label":"Familien-Rezepte synchronisieren",className:Ee("w-full py-2 px-4 rounded-lg font-medium transition-all duration-200 flex items-center justify-center gap-2",n?"bg-slate-800/80/30 cursor-not-allowed":"bg-slate-800/80 text-blue-600 hover:bg-blue-50 hover:shadow-md"),children:[d.jsx(Jx,{className:Ee("h-4 w-4",n&&"animate-spin")}),n?"Lade...":"Familien-Rezepte aktualisieren"]}),d.jsx("p",{className:"text-xs opacity-75 mt-2 text-center",children:"Ldt die neuesten Rezepte von der Familien-Cloud"})]})},fk="AIzaSyCEonhSF4OlyLDSx0yG5nz0iWUAZQMcpcU",mk=async t=>{const e=`${t} rezept`,n=`https://www.googleapis.com/youtube/v3/search?part=snippet&q=${encodeURIComponent(e)}&type=video&maxResults=12&key=${fk}`;try{const r=await fetch(n);if(!r.ok)throw r.status===403?new Error("API-Key ungltig oder Quota berschritten"):new Error("YouTube API Fehler: "+r.statusText);return(await r.json()).items.map(i=>({id:i.id.videoId,title:i.snippet.title,thumbnail:i.snippet.thumbnails.medium.url,channelTitle:i.snippet.channelTitle,description:i.snippet.description,url:`https://www.youtube.com/watch?v=${i.id.videoId}`}))}catch(r){throw console.error("YouTube API Error:",r),r}},pk=({onSelect:t,onClose:e})=>{const[n,r]=H.useState(""),[s,i]=H.useState([]),[o,l]=H.useState(!1),[u,h]=H.useState(""),p=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1"||window.location.hostname.startsWith("192.168.")||window.location.hostname.startsWith("10.")||window.location.hostname.endsWith(".local"),m=C=>{r(C.target.value)},g=async C=>{if(C.preventDefault(),!!n.trim()){l(!0),h(""),i([]);try{const N=await mk(n);i(N)}catch(N){h(N.message)}finally{l(!1)}}},S=C=>{t(C),e()};return p?d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:d.jsxs("div",{className:"bg-slate-800/80 rounded-2xl p-6 max-w-4xl w-full max-h-[90vh] overflow-hidden flex flex-col shadow-2xl",children:[d.jsxs("div",{className:"flex items-center justify-between mb-4",children:[d.jsxs("h3",{className:"text-2xl font-bold text-gray-100 flex items-center gap-2",children:[d.jsx(Sr,{className:"h-7 w-7 text-red-600"}),"Auf YouTube suchen"]}),d.jsx("button",{onClick:e,"data-test-id":"close-youtube-search","aria-label":"Suche schlieen",className:"p-2 hover:bg-slate-700 rounded-full transition-colors",children:d.jsx(sn,{className:"h-6 w-6 text-gray-300"})})]}),d.jsx("form",{onSubmit:g,className:"mb-4",children:d.jsxs("div",{className:"relative",children:[d.jsx("input",{type:"text",value:n,onChange:m,placeholder:"Suche nach Rezepten... z.B. 'Carbonara'",className:"w-full pl-12 pr-4 py-3 border-2 border-gray-600 rounded-lg focus:border-red-500 focus:outline-none transition-colors bg-slate-700 text-gray-100 placeholder-gray-400",autoFocus:!0}),d.jsx(R0,{className:"absolute left-4 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),d.jsx("button",{type:"submit",disabled:o||!n.trim(),className:Ee("absolute right-2 top-1/2 -translate-y-1/2 px-4 py-1.5 rounded-lg font-medium transition-all",o||!n.trim()?"bg-gray-200 text-gray-400":"bg-red-600 text-white hover:bg-red-700"),children:o?"Suche...":"Suchen"})]})}),u&&d.jsxs("div",{className:"mb-4 p-4 bg-red-50 border-2 border-red-200 rounded-lg text-red-700",children:[" ",u]}),o&&d.jsx("div",{className:"flex-1 flex items-center justify-center",children:d.jsx(Kx,{className:"h-8 w-8 text-red-600 animate-spin"})}),!o&&s.length>0&&d.jsxs("div",{className:"flex-1 overflow-y-auto",children:[d.jsxs("p",{className:"text-sm text-gray-600 mb-3",children:[s.length," Ergebnisse gefunden"]}),d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.map(C=>d.jsxs("button",{onClick:()=>S(C),"data-test-id":`youtube-video-${C.id}`,"aria-label":`${C.title} auswhlen`,className:"bg-slate-800/80 border-2 border-gray-600 rounded-xl overflow-hidden hover:border-red-400 hover:shadow-lg transition-all duration-200 text-left group",children:[d.jsxs("div",{className:"relative aspect-video bg-slate-700",children:[d.jsx("img",{src:C.thumbnail,alt:C.title,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-200"}),d.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-10 transition-all flex items-center justify-center",children:d.jsx(Sr,{className:"h-12 w-12 text-white opacity-0 group-hover:opacity-100 transition-opacity"})})]}),d.jsxs("div",{className:"p-3",children:[d.jsx("h4",{className:"font-bold text-gray-100 text-sm line-clamp-2 mb-1",children:C.title}),d.jsx("p",{className:"text-xs text-gray-500 line-clamp-1",children:C.channelTitle})]})]},C.id))})]}),!o&&!u&&s.length===0&&n===""&&d.jsx("div",{className:"flex-1 flex items-center justify-center text-center p-8",children:d.jsxs("div",{children:[d.jsx(Sr,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),d.jsx("p",{className:"text-gray-500",children:"Suche nach Rezepten auf YouTube"}),d.jsx("p",{className:"text-sm text-gray-400 mt-2",children:'z.B. "Spaghetti Carbonara"'})]})})]})}):d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:d.jsxs("div",{className:"bg-slate-800/80 rounded-2xl p-6 max-w-md w-full shadow-2xl text-center",children:[d.jsxs("div",{className:"mb-4",children:[d.jsx(Sr,{className:"h-16 w-16 text-red-600 mx-auto mb-4"}),d.jsx("h3",{className:"text-2xl font-bold text-gray-100 mb-2",children:"YouTube-Suche nur lokal verfgbar"}),d.jsx("p",{className:"text-gray-300 mb-6",children:"Die YouTube-Suche funktioniert nur auf dem lokalen Development-Server aus Sicherheitsgrnden. Verwende die App lokal unter:"}),d.jsx("code",{className:"bg-slate-700 px-3 py-2 rounded text-primary-400 font-mono text-sm",children:"http://localhost:5174/FoodFlash/"})]}),d.jsx("button",{onClick:e,className:"w-full bg-primary-600 text-white py-3 px-6 rounded-lg font-medium hover:bg-primary-700 transition-colors",children:"Schlieen"})]})})},gk=(t,e,n)=>{const r={version:"1.0",exportDate:new Date().toISOString(),recipes:t,weekPlan:e,shoppingList:n},s=JSON.stringify(r,null,2),i=new Blob([s],{type:"application/json"}),o=URL.createObjectURL(i),l=document.createElement("a");l.href=o,l.download=`foodflash-export-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(o)},yk=t=>new Promise((e,n)=>{const r=new FileReader;r.onload=s=>{var i;try{const o=(i=s.target)==null?void 0:i.result,l=JSON.parse(o);if(!l.recipes||!Array.isArray(l.recipes))throw new Error("Ungltiges Datenformat");e(l)}catch(o){n(new Error("Fehler beim Lesen der Datei: "+o.message))}},r.onerror=()=>{n(new Error("Fehler beim Lesen der Datei"))},r.readAsText(t)}),vk=({platformFilter:t,onClearFilter:e})=>{const{recipes:n,addRecipe:r,deleteRecipe:s,updateRecipe:i,isLoading:o}=Bd(),[l,u]=H.useState(""),[h,p]=H.useState(!1),[m,g]=H.useState("merge"),S=H.useRef(null),[C,N]=H.useState(!1),[D,_]=H.useState(""),[x,b]=H.useState(!1),[V,M]=H.useState(!0),[F,E]=H.useState(!1),v=H.useMemo(()=>{let X=n;if(t&&(X=X.filter(de=>de.platform===t)),l.trim()){const de=l.toLowerCase();X=X.filter(Ge=>{const ue=Ge.title.toLowerCase(),pt=Ge.description.toLowerCase(),$r=Ge.platform.toLowerCase(),Kt=(Ge.notes||"").toLowerCase();return ue.includes(de)||pt.includes(de)||$r.includes(de)||Kt.includes(de)})}return X},[n,l,t]),T=()=>{gk(n)},k=()=>{p(!0)},I=async X=>{var Ge;const de=(Ge=X.target.files)==null?void 0:Ge[0];if(de)try{const ue=await yk(de);if(m==="replace")localStorage.removeItem("foodflash_recipes"),ue.recipes.forEach(pt=>r(pt));else{const pt=new Set(n.map(Kt=>Kt.url));ue.recipes.filter(Kt=>!pt.has(Kt.url)).forEach(Kt=>r(Kt))}p(!1),S.current&&(S.current.value=""),alert(` ${m==="replace"?"Ersetzt":"Hinzugefgt"}: ${ue.recipes.length} Rezepte`)}catch(ue){alert(" Fehler beim Importieren: "+ue.message)}},A=X=>{g(X)},w=()=>{p(!1),S.current&&(S.current.value="")},ee=()=>{const X=localStorage.getItem("foodflash_gist_url");X&&_(X),N(!0)},Ve=()=>{N(!1),_("")},le=X=>{_(X.target.value)},Oe=async()=>{if(!D.trim()){alert("Bitte Gist-URL eingeben!");return}if(!ck(D)){alert("Ungltige Gist-URL! Bitte berprfe die URL.");return}b(!0);try{const X=await P_(D);if(m==="replace")localStorage.removeItem("foodflash_recipes"),X.recipes.forEach(de=>r(de));else{const de=new Set(n.map(ue=>ue.url));X.recipes.filter(ue=>!de.has(ue.url)).forEach(ue=>r(ue))}V&&localStorage.setItem("foodflash_gist_url",D),N(!1),_(""),alert(` ${X.recipes.length} Rezepte von Gist geladen!`)}catch(X){alert(" "+X.message)}finally{b(!1)}},U=()=>{localStorage.removeItem("foodflash_gist_url"),_(""),alert(" Gespeicherte Gist-URL wurde gelscht")},Q=X=>{const de=new Set(n.map(ue=>ue.url));X.filter(ue=>!de.has(ue.url)).forEach(ue=>r(ue))},J=()=>{E(!0)},me=()=>{E(!1)},Te=X=>{r({title:X.title,url:X.url,description:X.description.slice(0,200),imageUrl:X.thumbnail,platform:"youtube",ingredients:[],comments:[],rating:void 0,notes:""}),E(!1)};return d.jsxs("div",{className:"max-w-6xl mx-auto",children:[d.jsxs("div",{className:"text-center mb-8",children:[d.jsxs("h2",{className:"text-4xl font-bold text-gray-100 mb-2 flex items-center justify-center gap-3",children:[d.jsx(S0,{className:"h-10 w-10 text-primary-500"}),"Deine Rezepte"]}),d.jsx("p",{className:"text-gray-600",children:n.length===0?"Fge dein erstes Rezept hinzu!":`${n.length} ${n.length===1?"Rezept":"Rezepte"} gespeichert`})]}),t&&e&&d.jsx("div",{className:"flex justify-center mb-6",children:d.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-primary-100 text-primary-700 rounded-full font-medium",children:[d.jsxs("span",{children:["Filter: ",t==="youtube"?"YouTube":t==="instagram"?"Instagram":t==="facebook"?"Facebook":t==="tiktok"?"TikTok":t==="own"?"Eigene Rezepte":t]}),d.jsx("button",{onClick:e,"data-test-id":"clear-platform-filter","aria-label":"Filter entfernen",className:"p-1 hover:bg-primary-200 rounded-full transition-colors",children:d.jsx(sn,{className:"h-4 w-4"})})]})}),d.jsx("div",{className:"mb-8",children:d.jsx(nk,{onAdd:X=>r({...X,ingredients:X.ingredients||[],comments:[],rating:void 0})})}),d.jsx("div",{className:"mb-6",children:d.jsx(dk,{onSync:Q,mode:"merge"})}),d.jsx("div",{className:"mb-6",children:d.jsxs("button",{onClick:J,"data-test-id":"youtube-search","aria-label":"Auf YouTube nach Rezepten suchen",className:"w-full bg-gradient-to-r from-red-500 to-red-600 text-white rounded-2xl p-4 shadow-lg hover:shadow-xl transition-all duration-200 hover:scale-105 flex items-center justify-center gap-3 font-bold text-lg",children:[d.jsx(Sr,{className:"h-6 w-6"}),"Rezept auf YouTube suchen"]})}),F&&d.jsx(pk,{onSelect:Te,onClose:me}),d.jsxs("div",{className:"flex flex-wrap gap-3 mb-6 justify-center",children:[n.length>0&&d.jsxs("button",{onClick:T,"data-test-id":"export-recipes","aria-label":"Rezepte exportieren",className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-accent-500 to-accent-600 text-white rounded-lg font-medium hover:shadow-lg transition-all duration-200 hover:scale-105",children:[d.jsx(qx,{className:"h-5 w-5"}),"Exportieren"]}),d.jsxs("button",{onClick:k,"data-test-id":"import-recipes","aria-label":"Rezepte importieren",className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-secondary-500 to-secondary-600 text-white rounded-lg font-medium hover:shadow-lg transition-all duration-200 hover:scale-105",children:[d.jsx(nE,{className:"h-5 w-5"}),"Datei"]}),d.jsxs("button",{onClick:ee,"data-test-id":"load-from-gist","aria-label":"Von GitHub Gist laden",className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-lg font-medium hover:shadow-lg transition-all duration-200 hover:scale-105",children:[d.jsx(Dc,{className:"h-5 w-5"}),"Gist-Cloud"]})]}),h&&d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:d.jsxs("div",{className:"bg-slate-800/80 rounded-2xl p-6 max-w-md w-full shadow-2xl",children:[d.jsxs("div",{className:"flex items-center justify-between mb-4",children:[d.jsxs("h3",{className:"text-xl font-bold text-gray-100 flex items-center gap-2",children:[d.jsx(Wx,{className:"h-6 w-6 text-secondary-500"}),"Rezepte importieren"]}),d.jsx("button",{onClick:w,"data-test-id":"close-import-dialog","aria-label":"Dialog schlieen",className:"p-2 hover:bg-slate-700 rounded-full transition-colors",children:d.jsx(sn,{className:"h-6 w-6 text-gray-500"})})]}),d.jsxs("div",{className:"mb-4",children:[d.jsx("p",{className:"text-sm font-medium text-gray-200 mb-2",children:"Import-Modus:"}),d.jsxs("div",{className:"space-y-2",children:[d.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[d.jsx("input",{type:"radio",name:"import-mode",checked:m==="merge",onChange:()=>A("merge"),className:"w-4 h-4 text-secondary-500"}),d.jsxs("div",{children:[d.jsx("span",{className:"font-medium text-gray-100",children:"Hinzufgen"}),d.jsx("p",{className:"text-xs text-gray-600",children:"Neue Rezepte zu bestehenden hinzufgen"})]})]}),d.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[d.jsx("input",{type:"radio",name:"import-mode",checked:m==="replace",onChange:()=>A("replace"),className:"w-4 h-4 text-secondary-500"}),d.jsxs("div",{children:[d.jsx("span",{className:"font-medium text-gray-100",children:"Ersetzen"}),d.jsx("p",{className:"text-xs text-gray-600",children:"Alle bestehenden Rezepte lschen und ersetzen"})]})]})]})]}),d.jsx("input",{ref:S,type:"file",accept:".json,application/json",onChange:I,className:"hidden",id:"recipe-file-input"}),d.jsx("label",{htmlFor:"recipe-file-input",className:Ee("block w-full py-3 text-center rounded-lg font-bold cursor-pointer transition-all duration-200","bg-gradient-to-r from-secondary-500 to-secondary-600 text-white hover:shadow-lg hover:scale-105"),children:"Datei auswhlen"}),d.jsx("p",{className:"text-xs text-gray-500 mt-3 text-center",children:"Whle eine FoodFlash JSON-Datei aus"})]})}),C&&d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:d.jsxs("div",{className:"bg-slate-800/80 rounded-2xl p-6 max-w-lg w-full shadow-2xl",children:[d.jsxs("div",{className:"flex items-center justify-between mb-4",children:[d.jsxs("h3",{className:"text-xl font-bold text-gray-100 flex items-center gap-2",children:[d.jsx(Dc,{className:"h-6 w-6 text-blue-500"}),"Von GitHub Gist laden"]}),d.jsx("button",{onClick:Ve,"data-test-id":"close-gist-dialog","aria-label":"Dialog schlieen",className:"p-2 hover:bg-slate-700 rounded-full transition-colors",children:d.jsx(sn,{className:"h-6 w-6 text-gray-500"})})]}),d.jsxs("div",{className:"mb-4 p-4 bg-blue-50 border-2 border-blue-200 rounded-lg",children:[d.jsx("p",{className:"text-sm text-blue-800 font-medium mb-2",children:" So funktioniert's:"}),d.jsxs("ol",{className:"text-xs text-blue-700 space-y-1 list-decimal list-inside",children:[d.jsxs("li",{children:["Ein Familienmitglied erstellt einen ",d.jsx("strong",{children:"ffentlichen Gist"})," mit der Export-Datei"]}),d.jsx("li",{children:"Gist-URL wird mit der Familie geteilt"}),d.jsx("li",{children:"Alle laden die Rezepte von dieser URL"})]}),d.jsxs("p",{className:"text-xs text-blue-600 mt-2",children:[" ",d.jsx("a",{href:"https://gist.github.com",target:"_blank",rel:"noopener noreferrer",className:"underline",children:"gist.github.com"})," - kostenlos & einfach!"]})]}),d.jsxs("div",{className:"mb-4",children:[d.jsx("p",{className:"text-sm font-medium text-gray-200 mb-2",children:"Import-Modus:"}),d.jsxs("div",{className:"space-y-2",children:[d.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[d.jsx("input",{type:"radio",name:"gist-import-mode",checked:m==="merge",onChange:()=>A("merge"),className:"w-4 h-4 text-blue-500"}),d.jsxs("div",{children:[d.jsx("span",{className:"font-medium text-gray-100",children:"Hinzufgen"}),d.jsx("p",{className:"text-xs text-gray-600",children:"Neue Rezepte zu bestehenden hinzufgen"})]})]}),d.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[d.jsx("input",{type:"radio",name:"gist-import-mode",checked:m==="replace",onChange:()=>A("replace"),className:"w-4 h-4 text-blue-500"}),d.jsxs("div",{children:[d.jsx("span",{className:"font-medium text-gray-100",children:"Ersetzen"}),d.jsx("p",{className:"text-xs text-gray-600",children:"Alle bestehenden Rezepte lschen und ersetzen"})]})]})]})]}),d.jsxs("div",{className:"mb-4",children:[d.jsxs("div",{className:"flex items-center justify-between mb-1",children:[d.jsx("label",{htmlFor:"gist-url",className:"block text-sm font-medium text-gray-200",children:"GitHub Gist URL"}),localStorage.getItem("foodflash_gist_url")&&d.jsx("button",{onClick:U,className:"text-xs text-red-500 hover:text-red-600 font-medium",children:"URL lschen"})]}),d.jsx("input",{id:"gist-url",type:"url",value:D,onChange:le,placeholder:"https://gist.github.com/username/...",className:"w-full px-4 py-2 border-2 border-gray-600 rounded-lg focus:border-blue-500 focus:outline-none transition-colors bg-slate-700 text-gray-100 placeholder-gray-400"}),d.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Z.B.: https://gist.github.com/username/abc123..."}),d.jsxs("label",{className:"flex items-center gap-2 mt-2 cursor-pointer",children:[d.jsx("input",{type:"checkbox",checked:V,onChange:X=>M(X.target.checked),className:"w-4 h-4 text-blue-500"}),d.jsx("span",{className:"text-sm text-gray-200",children:"URL fr nchstes Mal speichern"})]})]}),d.jsx("button",{onClick:Oe,disabled:x,className:Ee("w-full py-3 rounded-lg font-bold text-white transition-all duration-200",x?"bg-gray-400 cursor-not-allowed":"bg-gradient-to-r from-blue-500 to-blue-600 hover:shadow-lg hover:scale-105"),children:x?"Lade...":"Von Gist laden"})]})}),n.length>0&&d.jsxs("div",{className:"mb-8",children:[d.jsx(uk,{searchTerm:l,onSearchChange:u}),l&&d.jsxs("p",{className:"text-sm text-gray-500 mt-2 text-center",children:[v.length," ",v.length===1?"Ergebnis":"Ergebnisse"," gefunden"]})]}),o?d.jsxs("div",{className:"bg-slate-800/80 rounded-2xl p-12 text-center shadow-lg",children:[d.jsx("div",{className:"text-6xl mb-4 animate-pulse",children:""}),d.jsx("h3",{className:"text-2xl font-bold text-gray-200 mb-2",children:"Lade Rezepte..."}),d.jsx("p",{className:"text-gray-400",children:"Synchronisiere mit der Cloud "})]}):n.length>0?v.length>0?d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:v.map(X=>d.jsx(lk,{recipe:X,onDelete:s,onUpdate:i},X.id))}):d.jsxs("div",{className:"bg-slate-800/80 rounded-2xl p-12 text-center shadow-lg",children:[d.jsx("div",{className:"text-6xl mb-4",children:""}),d.jsx("h3",{className:"text-2xl font-bold text-gray-200 mb-2",children:"Keine Ergebnisse"}),d.jsxs("p",{className:"text-gray-500",children:['Keine Rezepte fr "',l,'" gefunden.']})]}):d.jsxs("div",{className:"bg-slate-800/80 rounded-2xl p-12 text-center shadow-lg",children:[d.jsx("div",{className:"text-6xl mb-4",children:""}),d.jsx("h3",{className:"text-2xl font-bold text-gray-200 mb-2",children:"Noch keine Rezepte"}),d.jsx("p",{className:"text-gray-500",children:"Klicke auf den Button oben, um dein erstes Rezept zu speichern!"})]})]})},_k=()=>{const[t,e]=H.useState([]),[n,r]=H.useState(!0),[s,i]=H.useState(null);return H.useEffect(()=>{const m=Or(Ye,"weekPlanner"),g=Ud(m,S=>{const C=[];S.forEach(N=>{C.push({date:N.id,meals:N.data().meals||[]})}),C.sort((N,D)=>N.date.localeCompare(D.date)),e(C),r(!1),i(null)},S=>{console.error("Error fetching week planner:",S),i("Fehler beim Laden des Wochenplaners"),r(!1)});return()=>g()},[]),{weekPlan:t,isLoading:n,error:s,addMealToDay:async(m,g,S,C)=>{try{const N=qt(Ye,"weekPlanner",m),D=t.find(x=>x.date===m),_=D?[...D.meals]:[];_.push({recipeId:g,recipeTitle:S,mealType:C}),await ag(N,{meals:_,updatedAt:Rs()})}catch(N){throw console.error("Error adding meal:",N),i("Fehler beim Hinzufgen der Mahlzeit"),N}},removeMealFromDay:async(m,g)=>{try{const S=t.find(D=>D.date===m);if(!S)return;const C=S.meals.filter((D,_)=>_!==g),N=qt(Ye,"weekPlanner",m);C.length===0?await Nr(N):await ag(N,{meals:C,updatedAt:Rs()})}catch(S){throw console.error("Error removing meal:",S),i("Fehler beim Entfernen der Mahlzeit"),S}},clearDay:async m=>{try{const g=qt(Ye,"weekPlanner",m);await Nr(g)}catch(g){throw console.error("Error clearing day:",g),i("Fehler beim Leeren des Tages"),g}},clearWeekPlan:async()=>{try{const m=t.map(g=>Nr(qt(Ye,"weekPlanner",g.date)));await Promise.all(m)}catch(m){throw console.error("Error clearing week plan:",m),i("Fehler beim Leeren des Wochenplaners"),m}},getMealsForDate:m=>{const g=t.find(S=>S.date===m);return(g==null?void 0:g.meals)||[]}}},wk=()=>{const t=_k(),{recipes:e}=Bd(),n={monday:{meals:[]},tuesday:{meals:[]},wednesday:{meals:[]},thursday:{meals:[]},friday:{meals:[]},saturday:{meals:[]},sunday:{meals:[]}},r=h=>{const p=new Date,m=p.getDay(),C={sunday:0,monday:1,tuesday:2,wednesday:3,thursday:4,friday:5,saturday:6}[h]-m,N=new Date(p);return N.setDate(p.getDate()+C),N.toISOString().split("T")[0]};t.weekPlan.forEach(h=>{const m=new Date(h.date).getDay(),S=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"][m];n[S].meals=h.meals.map(C=>({recipeId:C.recipeId,mealType:C.mealType}))});const s={weekStart:new Date().toISOString(),days:n},i=async(h,p)=>{const m=r(h),g=e.find(S=>S.id===p.recipeId);if(!g){console.error("Recipe not found:",p.recipeId);return}await t.addMealToDay(m,p.recipeId,g.title,p.mealType)},o=async(h,p,m)=>{const g=r(h),C=t.getMealsForDate(g).findIndex(N=>N.recipeId===p&&N.mealType===m);C!==-1&&await t.removeMealFromDay(g,C)},l=async h=>{const p=r(h);await t.clearDay(p)},u=async()=>{await t.clearWeekPlan()};return{weekPlan:s,isLoading:t.isLoading,error:t.error,addMealToDay:i,removeMealFromDay:o,clearDay:l,clearWeek:u}},zu=[{key:"monday",label:"Montag",short:"Mo"},{key:"tuesday",label:"Dienstag",short:"Di"},{key:"wednesday",label:"Mittwoch",short:"Mi"},{key:"thursday",label:"Donnerstag",short:"Do"},{key:"friday",label:"Freitag",short:"Fr"},{key:"saturday",label:"Samstag",short:"Sa"},{key:"sunday",label:"Sonntag",short:"So"}],lg=[{key:"breakfast",label:"Frhstck",emoji:""},{key:"lunch",label:"Mittagessen",emoji:""},{key:"dinner",label:"Abendessen",emoji:""},{key:"snack",label:"Snack",emoji:""}],xk=()=>{var D;const{weekPlan:t,addMealToDay:e,removeMealFromDay:n,clearDay:r,clearWeek:s,isLoading:i}=wk(),{recipes:o}=Bd(),[l,u]=H.useState(null),[h,p]=H.useState("lunch"),m=_=>{l&&(e(l,{recipeId:_,mealType:h}),u(null))},g=(_,x,b)=>{n(_,x,b)},S=_=>{var x;confirm(`Mchtest du alle Mahlzeiten fr ${(x=zu.find(b=>b.key===_))==null?void 0:x.label} lschen?`)&&r(_)},C=()=>{confirm("Mchtest du den gesamten Wochenplan lschen?")&&s()},N=_=>o.find(x=>x.id===_);return d.jsxs("div",{className:"max-w-7xl mx-auto",children:[d.jsxs("div",{className:"text-center mb-8",children:[d.jsxs("h2",{className:"text-4xl font-bold text-gray-100 mb-2 flex items-center justify-center gap-3",children:[d.jsx(I0,{className:"h-10 w-10 text-accent-500"}),"Wochenplaner"]}),d.jsx("p",{className:"text-gray-400 mb-4",children:i?" Synchronisiere mit der Cloud...":"Plane deine Mahlzeiten fr die Woche"}),d.jsx("button",{onClick:C,"data-test-id":"clear-week","aria-label":"Wochenplan lschen",className:"text-sm text-red-500 hover:text-red-600 font-medium transition-colors",children:"Wochenplan zurcksetzen"})]}),d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-7 gap-4 mb-8",children:zu.map(_=>{const x=t.days[_.key].meals,b=lg.map(V=>({...V,meals:x.filter(M=>M.mealType===V.key)}));return d.jsxs("div",{className:"bg-slate-700/50 backdrop-blur-sm rounded-2xl p-4 shadow-lg border-2 border-dark-600/50",children:[d.jsxs("div",{className:"flex items-center justify-between mb-3 pb-2 border-b-2 border-slate-600",children:[d.jsxs("div",{children:[d.jsx("h3",{className:"font-bold text-gray-100 hidden lg:block",children:_.label}),d.jsx("h3",{className:"font-bold text-gray-100 lg:hidden",children:_.short})]}),d.jsx("button",{onClick:()=>S(_.key),"data-test-id":`clear-day-${_.key}`,"aria-label":`${_.label} lschen`,className:"p-1 hover:bg-red-600/20 rounded-lg transition-colors text-red-400",children:d.jsx(Ua,{className:"h-4 w-4"})})]}),d.jsx("div",{className:"space-y-3",children:b.map(V=>d.jsxs("div",{children:[d.jsxs("div",{className:"text-xs font-medium text-gray-400 mb-1 flex items-center gap-1",children:[d.jsx("span",{children:V.emoji}),d.jsx("span",{className:"hidden lg:inline",children:V.label})]}),d.jsx("div",{className:"space-y-1",children:V.meals.map((M,F)=>{const E=N(M.recipeId);return E?d.jsxs("div",{className:"bg-gradient-to-r from-primary-600/30 to-secondary-600/30 rounded-lg p-2 text-xs group relative border border-primary-500/20",children:[d.jsx("p",{className:"font-medium text-gray-100 pr-6 line-clamp-2",children:E.title}),d.jsx("button",{onClick:()=>g(_.key,M.recipeId,M.mealType),"data-test-id":`remove-meal-${_.key}-${M.recipeId}`,"aria-label":`${E.title} entfernen`,className:"absolute top-1 right-1 p-1 bg-slate-800 rounded opacity-0 group-hover:opacity-100 transition-opacity hover:bg-red-600/20 text-red-400",children:d.jsx(Ua,{className:"h-3 w-3"})})]},`${M.recipeId}-${F}`):null})})]},V.key))}),d.jsxs("button",{onClick:()=>u(_.key),"data-test-id":`add-meal-${_.key}`,"aria-label":`Mahlzeit zu ${_.label} hinzufgen`,className:Ee("w-full mt-3 py-2 rounded-lg font-medium text-sm transition-all duration-200 flex items-center justify-center gap-2",l===_.key?"bg-accent-500 text-white shadow-lg":"bg-slate-700 text-gray-300 hover:bg-accent-600/20 hover:text-accent-400"),children:[d.jsx(Yi,{className:"h-4 w-4"}),d.jsx("span",{className:"hidden lg:inline",children:"Hinzufgen"})]})]},_.key)})}),l&&d.jsxs("div",{className:"bg-slate-800/80 backdrop-blur-sm rounded-2xl p-6 shadow-2xl border-2 border-accent-500/30 autumn-glow-gold",children:[d.jsxs("div",{className:"flex items-center justify-between mb-4",children:[d.jsxs("h3",{className:"text-xl font-bold text-gray-100 flex items-center gap-2",children:[d.jsx(Ux,{className:"h-6 w-6 text-accent-500"}),"Rezept fr ",(D=zu.find(_=>_.key===l))==null?void 0:D.label," auswhlen"]}),d.jsx("button",{onClick:()=>u(null),"data-test-id":"close-recipe-selection","aria-label":"Rezeptauswahl schlieen",className:"text-gray-400 hover:text-gray-200",children:""})]}),d.jsxs("div",{className:"mb-4",children:[d.jsx("label",{className:"block text-sm font-medium text-gray-200 mb-2",children:"Mahlzeit"}),d.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:lg.map(_=>d.jsxs("button",{onClick:()=>p(_.key),"data-test-id":`select-meal-type-${_.key}`,"aria-label":`${_.label} auswhlen`,className:Ee("py-2 px-3 rounded-lg font-medium text-sm transition-all duration-200",h===_.key?"bg-accent-500 text-white shadow-md":"bg-slate-700 text-gray-300 hover:bg-accent-600/20 hover:text-accent-400"),children:[d.jsx("span",{className:"mr-1",children:_.emoji}),_.label]},_.key))})]}),o.length>0?d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3 max-h-96 overflow-y-auto",children:o.map(_=>d.jsxs("button",{onClick:()=>m(_.id),"data-test-id":`select-recipe-${_.id}`,"aria-label":`${_.title} hinzufgen`,className:"bg-slate-700/80 hover:bg-slate-600/80 rounded-xl p-4 text-left transition-all duration-200 hover:shadow-lg hover:scale-105 border-2 border-slate-600/50 hover:border-accent-500/50",children:[d.jsx("p",{className:"font-bold text-gray-100 mb-1 line-clamp-2",children:_.title}),_.rating&&d.jsxs("p",{className:"text-xs text-gray-400",children:[" ",_.rating,"/5"]})]},_.id))}):d.jsx("div",{className:"text-center py-8 text-gray-400",children:d.jsx("p",{children:"Keine Rezepte vorhanden. Fge zuerst Rezepte hinzu!"})})]})]})},Ek={produce:{label:"Obst & Gemse",emoji:""},bakery:{label:"Brot & Backwaren",emoji:""},meat:{label:"Fleisch & Wurst",emoji:""},deli:{label:"Aufschnitt",emoji:""},dairy:{label:"Kse & Milchprodukte",emoji:""},beverages:{label:"Getrnke",emoji:""},pantry:{label:"Konserven & Vorrte",emoji:""},snacks:{label:"Sigkeiten & Snacks",emoji:""},frozen:{label:"Tiefkhlware",emoji:""},household:{label:"Haushalt & Sonstiges",emoji:""}},Tk=["produce","bakery","meat","deli","dairy","beverages","pantry","snacks","frozen","household"],ug=t=>{if(t.length===0)return" Einkaufsliste ist leer";const e=t.filter(r=>!r.checked);if(e.length===0)return" Alle Artikel wurden bereits gekauft!";let n=` *Einkaufsliste*

`;return Tk.forEach(r=>{const s=e.filter(i=>i.category===r);if(s.length>0){const i=Ek[r];n+=`${i.emoji} *${i.label}*
`,s.forEach(o=>{const l=o.quantity?` (${o.quantity})`:"";n+=`   ${o.name}${l}
`}),n+=`
`}}),n+=` Insgesamt: ${e.length} ${e.length===1,"Artikel"}`,n},cg=[{key:"produce",label:"Obst & Gemse",emoji:""},{key:"bakery",label:"Brot & Backwaren",emoji:""},{key:"meat",label:"Fleisch & Wurst",emoji:""},{key:"deli",label:"Aufschnitt",emoji:""},{key:"dairy",label:"Kse & Milchprodukte",emoji:""},{key:"beverages",label:"Getrnke",emoji:""},{key:"pantry",label:"Konserven & Vorrte",emoji:""},{key:"snacks",label:"Sigkeiten & Snacks",emoji:""},{key:"frozen",label:"Tiefkhlware",emoji:""},{key:"household",label:"Haushalt & Sonstiges",emoji:""}],Sk=()=>{const{items:t,addItem:e,toggleItem:n,removeItem:r,clearCheckedItems:s,clearAllItems:i,isLoading:o}=R_(),[l,u]=H.useState(!1),[h,p]=H.useState(""),[m,g]=H.useState(""),[S,C]=H.useState("produce"),N=A=>{A.preventDefault(),h.trim()&&(e(h,S,m),p(""),g(""),u(!1))},D=A=>{p(A.target.value)},_=A=>{g(A.target.value)},x=A=>{C(A.target.value)},b=A=>{n(A)},V=A=>{r(A)},M=()=>{confirm("Mchtest du alle abgehakten Artikel lschen?")&&s()},F=()=>{confirm("Mchtest du die gesamte Einkaufsliste lschen?")&&i()},E=async()=>{const A=ug(t);try{await navigator.clipboard.writeText(A),alert(" Einkaufsliste in Zwischenablage kopiert!")}catch{const ee=document.createElement("textarea");ee.value=A,document.body.appendChild(ee),ee.select(),document.execCommand("copy"),document.body.removeChild(ee),alert(" Einkaufsliste kopiert!")}},v=()=>{const A=ug(t),ee=`https://wa.me/?text=${encodeURIComponent(A)}`;window.open(ee,"_blank")},T=cg.map(A=>({...A,items:t.filter(w=>w.category===A.key)})),k=t.filter(A=>A.checked).length,I=t.length;return d.jsxs("div",{className:"max-w-4xl mx-auto",children:[d.jsxs("div",{className:"text-center mb-8",children:[d.jsxs("h2",{className:"text-4xl font-bold text-gray-100 mb-2 flex items-center justify-center gap-3",children:[d.jsx(Zh,{className:"h-10 w-10 text-primary-500"}),"Einkaufsliste"]}),d.jsx("p",{className:"text-gray-300",children:o?" Synchronisiere mit der Cloud...":I===0?"Fge Artikel zu deiner Einkaufsliste hinzu":d.jsxs(d.Fragment,{children:[k," von ",I," ",I===1?"Artikel":"Artikeln"," gekauft"]})})]}),l?d.jsxs("div",{className:"bg-slate-800/80 backdrop-blur-sm rounded-2xl p-6 shadow-xl border-2 border-primary-500/30 autumn-glow mb-6",children:[d.jsxs("div",{className:"flex items-center justify-between mb-4",children:[d.jsx("h3",{className:"text-xl font-bold text-gray-100",children:"Neuer Artikel"}),d.jsx("button",{onClick:()=>u(!1),"data-test-id":"close-add-item","aria-label":"Formular schlieen",className:"p-2 hover:bg-slate-700 rounded-full transition-colors",children:d.jsx(sn,{className:"h-6 w-6 text-gray-300"})})]}),d.jsxs("form",{onSubmit:N,className:"space-y-4",children:[d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{htmlFor:"item-name",className:"block text-sm font-medium text-gray-200 mb-1",children:"Artikel *"}),d.jsx("input",{id:"item-name",type:"text",value:h,onChange:D,"data-test-id":"item-name-input","aria-label":"Artikel-Name eingeben",placeholder:"z.B. Tomaten",className:"w-full px-4 py-2 border-2 border-gray-600 rounded-lg focus:border-primary-500 focus:outline-none transition-colors bg-slate-700 text-gray-100 placeholder-gray-400",required:!0,autoFocus:!0})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"item-quantity",className:"block text-sm font-medium text-gray-200 mb-1",children:"Menge (optional)"}),d.jsx("input",{id:"item-quantity",type:"text",value:m,onChange:_,"data-test-id":"item-quantity-input","aria-label":"Menge eingeben",placeholder:"z.B. 500g, 3 Stck",className:"w-full px-4 py-2 border-2 border-gray-600 rounded-lg focus:border-primary-500 focus:outline-none transition-colors bg-slate-700 text-gray-100 placeholder-gray-400"})]})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"item-category",className:"block text-sm font-medium text-gray-200 mb-1",children:"Kategorie *"}),d.jsx("select",{id:"item-category",value:S,onChange:x,"data-test-id":"item-category-select","aria-label":"Kategorie auswhlen",className:"w-full px-4 py-2 border-2 border-gray-600 rounded-lg focus:border-primary-500 focus:outline-none transition-colors bg-slate-700 text-gray-100",children:cg.map(A=>d.jsxs("option",{value:A.key,children:[A.emoji," ",A.label]},A.key))})]}),d.jsx("button",{type:"submit","data-test-id":"submit-item","aria-label":"Artikel zur Liste hinzufgen",className:"w-full py-3 rounded-lg font-bold text-white transition-all duration-200 bg-gradient-to-r from-primary-500 to-secondary-500 hover:shadow-lg hover:scale-105",children:"Zur Liste hinzufgen"})]})]}):d.jsxs("button",{onClick:()=>u(!0),"data-test-id":"open-add-item","aria-label":"Artikel hinzufgen",className:"w-full bg-gradient-to-r from-primary-500 to-secondary-500 text-white rounded-2xl p-4 shadow-lg hover:shadow-xl transition-all duration-200 hover:scale-105 flex items-center justify-center gap-3 font-bold text-lg mb-6",children:[d.jsx(Yi,{className:"h-6 w-6"}),"Artikel hinzufgen"]}),t.length>0&&d.jsxs("div",{className:"space-y-3 mb-6",children:[d.jsxs("div",{className:"flex gap-3",children:[d.jsxs("button",{onClick:E,"data-test-id":"copy-shopping-list","aria-label":"Einkaufsliste kopieren",className:"flex-1 py-3 px-4 bg-gradient-to-r from-primary-500 to-secondary-500 text-white rounded-lg font-medium hover:shadow-lg transition-all duration-200 hover:scale-105 flex items-center justify-center gap-2",children:[d.jsx($x,{className:"h-5 w-5"}),"Kopieren"]}),d.jsxs("button",{onClick:v,"data-test-id":"share-whatsapp","aria-label":"Per WhatsApp teilen",className:"flex-1 py-3 px-4 bg-gradient-to-r from-green-500 to-green-600 text-white rounded-lg font-medium hover:shadow-lg transition-all duration-200 hover:scale-105 flex items-center justify-center gap-2",children:[d.jsx(eE,{className:"h-5 w-5"}),"WhatsApp"]})]}),d.jsxs("div",{className:"flex gap-3",children:[k>0&&d.jsxs("button",{onClick:M,"data-test-id":"clear-checked","aria-label":"Abgehakte Artikel lschen",className:"flex-1 py-2 px-4 bg-accent-100 text-accent-700 rounded-lg font-medium hover:bg-accent-200 transition-colors text-sm",children:["Abgehakte lschen (",k,")"]}),d.jsx("button",{onClick:F,"data-test-id":"clear-all","aria-label":"Alle Artikel lschen",className:"py-2 px-4 bg-red-100 text-red-600 rounded-lg font-medium hover:bg-red-200 transition-colors text-sm",children:"Alle lschen"})]})]}),t.length>0?d.jsx("div",{className:"space-y-4",children:T.map(A=>A.items.length===0?null:d.jsxs("div",{className:"bg-slate-700/50 backdrop-blur-sm rounded-2xl p-5 shadow-lg border-2 border-dark-600/50",children:[d.jsxs("h3",{className:"font-bold text-gray-100 mb-3 flex items-center gap-2 text-lg",children:[d.jsx("span",{className:"text-2xl",children:A.emoji}),A.label,d.jsxs("span",{className:"text-sm text-gray-300 font-normal ml-auto",children:[A.items.filter(w=>w.checked).length,"/",A.items.length]})]}),d.jsx("div",{className:"space-y-2",children:A.items.map(w=>d.jsxs("div",{className:Ee("flex items-center gap-3 p-3 rounded-lg transition-all duration-200 group",w.checked?"bg-slate-600/30":"bg-slate-600/50 hover:bg-slate-500/50"),children:[d.jsx("button",{onClick:()=>b(w.id),"data-test-id":`toggle-item-${w.id}`,"aria-label":w.checked?"Als nicht gekauft markieren":"Als gekauft markieren",className:"flex-shrink-0 transition-transform hover:scale-110",children:w.checked?d.jsx(zx,{className:"h-6 w-6 text-accent-500"}):d.jsx(Bx,{className:"h-6 w-6 text-gray-300"})}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("p",{className:Ee("font-medium",w.checked?"line-through text-gray-400":"text-white"),children:w.name}),w.quantity&&d.jsx("p",{className:Ee("text-sm",w.checked?"text-gray-400":"text-gray-200"),children:w.quantity})]}),d.jsx("button",{onClick:()=>V(w.id),"data-test-id":`delete-item-${w.id}`,"aria-label":`${w.name} lschen`,className:"flex-shrink-0 p-2 rounded-lg opacity-0 group-hover:opacity-100 transition-opacity hover:bg-red-100 text-red-500",children:d.jsx(Ua,{className:"h-4 w-4"})})]},w.id))})]},A.key))}):d.jsxs("div",{className:"bg-slate-800/80 backdrop-blur-sm rounded-2xl p-12 text-center shadow-lg border border-dark-600/50",children:[d.jsx("div",{className:"text-6xl mb-4",children:""}),d.jsx("h3",{className:"text-2xl font-bold text-gray-200 mb-2",children:"Deine Einkaufsliste ist leer"}),d.jsx("p",{className:"text-gray-300",children:"Fge Artikel hinzu und sie werden nach Supermarkt-Kategorien sortiert!"})]})]})},hg="foodflash_migrated_to_firebase",Ik=async()=>{if(localStorage.getItem(hg)){console.log(" Daten bereits zu Firebase migriert");return}console.log(" Starte Migration von localStorage zu Firebase...");try{await kk(),await Ak(),localStorage.setItem(hg,"true"),console.log(" Migration erfolgreich abgeschlossen!")}catch(t){throw console.error(" Fehler bei Migration:",t),t}};async function kk(){const t=localStorage.getItem("foodflash_recipes");if(!t){console.log(" Keine Rezepte in localStorage gefunden");return}const e=JSON.parse(t);if(e.length===0){console.log(" Keine Rezepte zum Migrieren");return}const n=Or(Ye,"recipes");if((await I_(n)).size>0){console.log(" Firebase hat bereits Rezepte, berspringe Migration");return}console.log(` Migriere ${e.length} Rezepte...`);for(const s of e){const{id:i,createdAt:o,...l}=s;await Ml(n,{...l,ingredients:s.ingredients||[],comments:s.comments||[],createdAt:Rs()})}console.log(` ${e.length} Rezepte migriert`)}async function Ak(){const t=localStorage.getItem("foodflash_shopping");if(!t){console.log(" Keine Einkaufsliste in localStorage gefunden");return}const e=JSON.parse(t);if(e.length===0){console.log(" Keine Einkaufsartikel zum Migrieren");return}const n=Or(Ye,"shoppingList");if((await I_(n)).size>0){console.log(" Firebase hat bereits Einkaufsliste, berspringe Migration");return}console.log(` Migriere ${e.length} Einkaufsartikel...`);for(const s of e){const{id:i,...o}=s;await Ml(n,{...o,addedAt:Rs()})}console.log(` ${e.length} Artikel migriert`)}function bk(){const[t,e]=H.useState("home"),[n,r]=H.useState(null);H.useEffect(()=>{(async()=>{try{await Ik()}catch(l){console.error("Migration fehlgeschlagen:",l)}})()},[]);const s=o=>{r(o),e("recipes")},i=()=>{r(null)};return d.jsxs("div",{className:"min-h-screen",children:[d.jsx(sE,{activeTab:t,setActiveTab:e}),d.jsxs("main",{className:"container mx-auto px-4 py-8",children:[t==="home"&&d.jsx(iE,{onPlatformClick:s}),t==="recipes"&&d.jsx(vk,{platformFilter:n,onClearFilter:i}),t==="planner"&&d.jsx(xk,{}),t==="shopping"&&d.jsx(Sk,{})]})]})}Uu.createRoot(document.getElementById("root")).render(d.jsx(I1.StrictMode,{children:d.jsx(bk,{})}));
