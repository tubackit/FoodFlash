(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function n1(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var lg={exports:{}},sl={},ug={exports:{}},te={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oo=Symbol.for("react.element"),r1=Symbol.for("react.portal"),s1=Symbol.for("react.fragment"),i1=Symbol.for("react.strict_mode"),o1=Symbol.for("react.profiler"),a1=Symbol.for("react.provider"),l1=Symbol.for("react.context"),u1=Symbol.for("react.forward_ref"),c1=Symbol.for("react.suspense"),h1=Symbol.for("react.memo"),d1=Symbol.for("react.lazy"),Mf=Symbol.iterator;function f1(t){return t===null||typeof t!="object"?null:(t=Mf&&t[Mf]||t["@@iterator"],typeof t=="function"?t:null)}var cg={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},hg=Object.assign,dg={};function Ns(t,e,n){this.props=t,this.context=e,this.refs=dg,this.updater=n||cg}Ns.prototype.isReactComponent={};Ns.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ns.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function fg(){}fg.prototype=Ns.prototype;function rh(t,e,n){this.props=t,this.context=e,this.refs=dg,this.updater=n||cg}var sh=rh.prototype=new fg;sh.constructor=rh;hg(sh,Ns.prototype);sh.isPureReactComponent=!0;var Of=Array.isArray,mg=Object.prototype.hasOwnProperty,ih={current:null},pg={key:!0,ref:!0,__self:!0,__source:!0};function gg(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)mg.call(e,r)&&!pg.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var u=Array(l),h=0;h<l;h++)u[h]=arguments[h+2];s.children=u}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:oo,type:t,key:i,ref:o,props:s,_owner:ih.current}}function m1(t,e){return{$$typeof:oo,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function oh(t){return typeof t=="object"&&t!==null&&t.$$typeof===oo}function p1(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Ff=/\/+/g;function su(t,e){return typeof t=="object"&&t!==null&&t.key!=null?p1(""+t.key):e.toString(36)}function Jo(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case oo:case r1:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+su(o,0):r,Of(s)?(n="",t!=null&&(n=t.replace(Ff,"$&/")+"/"),Jo(s,e,n,"",function(h){return h})):s!=null&&(oh(s)&&(s=m1(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Ff,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",Of(t))for(var l=0;l<t.length;l++){i=t[l];var u=r+su(i,l);o+=Jo(i,e,n,u,s)}else if(u=f1(t),typeof u=="function")for(t=u.call(t),l=0;!(i=t.next()).done;)i=i.value,u=r+su(i,l++),o+=Jo(i,e,n,u,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function No(t,e,n){if(t==null)return t;var r=[],s=0;return Jo(t,r,"","",function(i){return e.call(n,i,s++)}),r}function g1(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var ft={current:null},Zo={transition:null},y1={ReactCurrentDispatcher:ft,ReactCurrentBatchConfig:Zo,ReactCurrentOwner:ih};function yg(){throw Error("act(...) is not supported in production builds of React.")}te.Children={map:No,forEach:function(t,e,n){No(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return No(t,function(){e++}),e},toArray:function(t){return No(t,function(e){return e})||[]},only:function(t){if(!oh(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};te.Component=Ns;te.Fragment=s1;te.Profiler=o1;te.PureComponent=rh;te.StrictMode=i1;te.Suspense=c1;te.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=y1;te.act=yg;te.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=hg({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=ih.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)mg.call(e,u)&&!pg.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var h=0;h<u;h++)l[h]=arguments[h+2];r.children=l}return{$$typeof:oo,type:t.type,key:s,ref:i,props:r,_owner:o}};te.createContext=function(t){return t={$$typeof:l1,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:a1,_context:t},t.Consumer=t};te.createElement=gg;te.createFactory=function(t){var e=gg.bind(null,t);return e.type=t,e};te.createRef=function(){return{current:null}};te.forwardRef=function(t){return{$$typeof:u1,render:t}};te.isValidElement=oh;te.lazy=function(t){return{$$typeof:d1,_payload:{_status:-1,_result:t},_init:g1}};te.memo=function(t,e){return{$$typeof:h1,type:t,compare:e===void 0?null:e}};te.startTransition=function(t){var e=Zo.transition;Zo.transition={};try{t()}finally{Zo.transition=e}};te.unstable_act=yg;te.useCallback=function(t,e){return ft.current.useCallback(t,e)};te.useContext=function(t){return ft.current.useContext(t)};te.useDebugValue=function(){};te.useDeferredValue=function(t){return ft.current.useDeferredValue(t)};te.useEffect=function(t,e){return ft.current.useEffect(t,e)};te.useId=function(){return ft.current.useId()};te.useImperativeHandle=function(t,e,n){return ft.current.useImperativeHandle(t,e,n)};te.useInsertionEffect=function(t,e){return ft.current.useInsertionEffect(t,e)};te.useLayoutEffect=function(t,e){return ft.current.useLayoutEffect(t,e)};te.useMemo=function(t,e){return ft.current.useMemo(t,e)};te.useReducer=function(t,e,n){return ft.current.useReducer(t,e,n)};te.useRef=function(t){return ft.current.useRef(t)};te.useState=function(t){return ft.current.useState(t)};te.useSyncExternalStore=function(t,e,n){return ft.current.useSyncExternalStore(t,e,n)};te.useTransition=function(){return ft.current.useTransition()};te.version="18.3.1";ug.exports=te;var H=ug.exports;const v1=n1(H);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _1=H,w1=Symbol.for("react.element"),x1=Symbol.for("react.fragment"),E1=Object.prototype.hasOwnProperty,T1=_1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,S1={key:!0,ref:!0,__self:!0,__source:!0};function vg(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)E1.call(e,r)&&!S1.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:w1,type:t,key:i,ref:o,props:s,_owner:T1.current}}sl.Fragment=x1;sl.jsx=vg;sl.jsxs=vg;lg.exports=sl;var d=lg.exports,zu={},_g={exports:{}},bt={},wg={exports:{}},xg={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(U,Q){var J=U.length;U.push(Q);e:for(;0<J;){var me=J-1>>>1,Te=U[me];if(0<s(Te,Q))U[me]=Q,U[J]=Te,J=me;else break e}}function n(U){return U.length===0?null:U[0]}function r(U){if(U.length===0)return null;var Q=U[0],J=U.pop();if(J!==Q){U[0]=J;e:for(var me=0,Te=U.length,X=Te>>>1;me<X;){var de=2*(me+1)-1,Ge=U[de],ue=de+1,pt=U[ue];if(0>s(Ge,J))ue<Te&&0>s(pt,Ge)?(U[me]=pt,U[ue]=J,me=ue):(U[me]=Ge,U[de]=J,me=de);else if(ue<Te&&0>s(pt,J))U[me]=pt,U[ue]=J,me=ue;else break e}}return Q}function s(U,Q){var J=U.sortIndex-Q.sortIndex;return J!==0?J:U.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var u=[],h=[],p=1,m=null,g=3,S=!1,b=!1,N=!1,D=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(U){for(var Q=n(h);Q!==null;){if(Q.callback===null)r(h);else if(Q.startTime<=U)r(h),Q.sortIndex=Q.expirationTime,e(u,Q);else break;Q=n(h)}}function V(U){if(N=!1,C(U),!b)if(n(u)!==null)b=!0,le(M);else{var Q=n(h);Q!==null&&Oe(V,Q.startTime-U)}}function M(U,Q){b=!1,N&&(N=!1,_(v),v=-1),S=!0;var J=g;try{for(C(Q),m=n(u);m!==null&&(!(m.expirationTime>Q)||U&&!I());){var me=m.callback;if(typeof me=="function"){m.callback=null,g=m.priorityLevel;var Te=me(m.expirationTime<=Q);Q=t.unstable_now(),typeof Te=="function"?m.callback=Te:m===n(u)&&r(u),C(Q)}else r(u);m=n(u)}if(m!==null)var X=!0;else{var de=n(h);de!==null&&Oe(V,de.startTime-Q),X=!1}return X}finally{m=null,g=J,S=!1}}var F=!1,E=null,v=-1,T=5,k=-1;function I(){return!(t.unstable_now()-k<T)}function A(){if(E!==null){var U=t.unstable_now();k=U;var Q=!0;try{Q=E(!0,U)}finally{Q?w():(F=!1,E=null)}}else F=!1}var w;if(typeof x=="function")w=function(){x(A)};else if(typeof MessageChannel<"u"){var ee=new MessageChannel,Ve=ee.port2;ee.port1.onmessage=A,w=function(){Ve.postMessage(null)}}else w=function(){D(A,0)};function le(U){E=U,F||(F=!0,w())}function Oe(U,Q){v=D(function(){U(t.unstable_now())},Q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(U){U.callback=null},t.unstable_continueExecution=function(){b||S||(b=!0,le(M))},t.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<U?Math.floor(1e3/U):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(U){switch(g){case 1:case 2:case 3:var Q=3;break;default:Q=g}var J=g;g=Q;try{return U()}finally{g=J}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(U,Q){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var J=g;g=U;try{return Q()}finally{g=J}},t.unstable_scheduleCallback=function(U,Q,J){var me=t.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?me+J:me):J=me,U){case 1:var Te=-1;break;case 2:Te=250;break;case 5:Te=1073741823;break;case 4:Te=1e4;break;default:Te=5e3}return Te=J+Te,U={id:p++,callback:Q,priorityLevel:U,startTime:J,expirationTime:Te,sortIndex:-1},J>me?(U.sortIndex=J,e(h,U),n(u)===null&&U===n(h)&&(N?(_(v),v=-1):N=!0,Oe(V,J-me))):(U.sortIndex=Te,e(u,U),b||S||(b=!0,le(M))),U},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(U){var Q=g;return function(){var J=g;g=Q;try{return U.apply(this,arguments)}finally{g=J}}}})(xg);wg.exports=xg;var I1=wg.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var k1=H,Ct=I1;function O(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Eg=new Set,Ri={};function Lr(t,e){ys(t,e),ys(t+"Capture",e)}function ys(t,e){for(Ri[t]=e,t=0;t<e.length;t++)Eg.add(e[t])}var yn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Uu=Object.prototype.hasOwnProperty,A1=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,zf={},Uf={};function C1(t){return Uu.call(Uf,t)?!0:Uu.call(zf,t)?!1:A1.test(t)?Uf[t]=!0:(zf[t]=!0,!1)}function b1(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function N1(t,e,n,r){if(e===null||typeof e>"u"||b1(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function mt(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Je={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Je[t]=new mt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Je[e]=new mt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Je[t]=new mt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Je[t]=new mt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Je[t]=new mt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Je[t]=new mt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Je[t]=new mt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Je[t]=new mt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Je[t]=new mt(t,5,!1,t.toLowerCase(),null,!1,!1)});var ah=/[\-:]([a-z])/g;function lh(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(ah,lh);Je[e]=new mt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(ah,lh);Je[e]=new mt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(ah,lh);Je[e]=new mt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Je[t]=new mt(t,1,!1,t.toLowerCase(),null,!1,!1)});Je.xlinkHref=new mt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Je[t]=new mt(t,1,!1,t.toLowerCase(),null,!0,!0)});function uh(t,e,n,r){var s=Je.hasOwnProperty(e)?Je[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(N1(e,n,s,r)&&(n=null),r||s===null?C1(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Sn=k1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ro=Symbol.for("react.element"),Yr=Symbol.for("react.portal"),Xr=Symbol.for("react.fragment"),ch=Symbol.for("react.strict_mode"),Bu=Symbol.for("react.profiler"),Tg=Symbol.for("react.provider"),Sg=Symbol.for("react.context"),hh=Symbol.for("react.forward_ref"),$u=Symbol.for("react.suspense"),qu=Symbol.for("react.suspense_list"),dh=Symbol.for("react.memo"),Pn=Symbol.for("react.lazy"),Ig=Symbol.for("react.offscreen"),Bf=Symbol.iterator;function ti(t){return t===null||typeof t!="object"?null:(t=Bf&&t[Bf]||t["@@iterator"],typeof t=="function"?t:null)}var ke=Object.assign,iu;function ui(t){if(iu===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);iu=e&&e[1]||""}return`
`+iu+t}var ou=!1;function au(t,e){if(!t||ou)return"";ou=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(h){var r=h}Reflect.construct(t,[],e)}else{try{e.call()}catch(h){r=h}t.call(e.prototype)}else{try{throw Error()}catch(h){r=h}t()}}catch(h){if(h&&r&&typeof h.stack=="string"){for(var s=h.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var u=`
`+s[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=l);break}}}finally{ou=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?ui(t):""}function R1(t){switch(t.tag){case 5:return ui(t.type);case 16:return ui("Lazy");case 13:return ui("Suspense");case 19:return ui("SuspenseList");case 0:case 2:case 15:return t=au(t.type,!1),t;case 11:return t=au(t.type.render,!1),t;case 1:return t=au(t.type,!0),t;default:return""}}function Hu(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Xr:return"Fragment";case Yr:return"Portal";case Bu:return"Profiler";case ch:return"StrictMode";case $u:return"Suspense";case qu:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Sg:return(t.displayName||"Context")+".Consumer";case Tg:return(t._context.displayName||"Context")+".Provider";case hh:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case dh:return e=t.displayName||null,e!==null?e:Hu(t.type)||"Memo";case Pn:e=t._payload,t=t._init;try{return Hu(t(e))}catch{}}return null}function P1(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Hu(e);case 8:return e===ch?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Xn(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function kg(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function V1(t){var e=kg(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Po(t){t._valueTracker||(t._valueTracker=V1(t))}function Ag(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=kg(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function ga(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Wu(t,e){var n=e.checked;return ke({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function $f(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Xn(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Cg(t,e){e=e.checked,e!=null&&uh(t,"checked",e,!1)}function Gu(t,e){Cg(t,e);var n=Xn(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Qu(t,e.type,n):e.hasOwnProperty("defaultValue")&&Qu(t,e.type,Xn(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function qf(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Qu(t,e,n){(e!=="number"||ga(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var ci=Array.isArray;function ls(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Xn(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Ku(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(O(91));return ke({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Hf(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(O(92));if(ci(n)){if(1<n.length)throw Error(O(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Xn(n)}}function bg(t,e){var n=Xn(e.value),r=Xn(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Wf(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Ng(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Yu(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Ng(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Vo,Rg=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Vo=Vo||document.createElement("div"),Vo.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Vo.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Pi(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var yi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},D1=["Webkit","ms","Moz","O"];Object.keys(yi).forEach(function(t){D1.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),yi[e]=yi[t]})});function Pg(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||yi.hasOwnProperty(t)&&yi[t]?(""+e).trim():e+"px"}function Vg(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Pg(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var j1=ke({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Xu(t,e){if(e){if(j1[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(O(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(O(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(O(61))}if(e.style!=null&&typeof e.style!="object")throw Error(O(62))}}function Ju(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Zu=null;function fh(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ec=null,us=null,cs=null;function Gf(t){if(t=uo(t)){if(typeof ec!="function")throw Error(O(280));var e=t.stateNode;e&&(e=ul(e),ec(t.stateNode,t.type,e))}}function Dg(t){us?cs?cs.push(t):cs=[t]:us=t}function jg(){if(us){var t=us,e=cs;if(cs=us=null,Gf(t),e)for(t=0;t<e.length;t++)Gf(e[t])}}function Lg(t,e){return t(e)}function Mg(){}var lu=!1;function Og(t,e,n){if(lu)return t(e,n);lu=!0;try{return Lg(t,e,n)}finally{lu=!1,(us!==null||cs!==null)&&(Mg(),jg())}}function Vi(t,e){var n=t.stateNode;if(n===null)return null;var r=ul(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(O(231,e,typeof n));return n}var tc=!1;if(yn)try{var ni={};Object.defineProperty(ni,"passive",{get:function(){tc=!0}}),window.addEventListener("test",ni,ni),window.removeEventListener("test",ni,ni)}catch{tc=!1}function L1(t,e,n,r,s,i,o,l,u){var h=Array.prototype.slice.call(arguments,3);try{e.apply(n,h)}catch(p){this.onError(p)}}var vi=!1,ya=null,va=!1,nc=null,M1={onError:function(t){vi=!0,ya=t}};function O1(t,e,n,r,s,i,o,l,u){vi=!1,ya=null,L1.apply(M1,arguments)}function F1(t,e,n,r,s,i,o,l,u){if(O1.apply(this,arguments),vi){if(vi){var h=ya;vi=!1,ya=null}else throw Error(O(198));va||(va=!0,nc=h)}}function Mr(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Fg(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Qf(t){if(Mr(t)!==t)throw Error(O(188))}function z1(t){var e=t.alternate;if(!e){if(e=Mr(t),e===null)throw Error(O(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Qf(s),t;if(i===r)return Qf(s),e;i=i.sibling}throw Error(O(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o)throw Error(O(189))}}if(n.alternate!==r)throw Error(O(190))}if(n.tag!==3)throw Error(O(188));return n.stateNode.current===n?t:e}function zg(t){return t=z1(t),t!==null?Ug(t):null}function Ug(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Ug(t);if(e!==null)return e;t=t.sibling}return null}var Bg=Ct.unstable_scheduleCallback,Kf=Ct.unstable_cancelCallback,U1=Ct.unstable_shouldYield,B1=Ct.unstable_requestPaint,Re=Ct.unstable_now,$1=Ct.unstable_getCurrentPriorityLevel,mh=Ct.unstable_ImmediatePriority,$g=Ct.unstable_UserBlockingPriority,_a=Ct.unstable_NormalPriority,q1=Ct.unstable_LowPriority,qg=Ct.unstable_IdlePriority,il=null,tn=null;function H1(t){if(tn&&typeof tn.onCommitFiberRoot=="function")try{tn.onCommitFiberRoot(il,t,void 0,(t.current.flags&128)===128)}catch{}}var qt=Math.clz32?Math.clz32:Q1,W1=Math.log,G1=Math.LN2;function Q1(t){return t>>>=0,t===0?32:31-(W1(t)/G1|0)|0}var Do=64,jo=4194304;function hi(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function wa(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~s;l!==0?r=hi(l):(i&=o,i!==0&&(r=hi(i)))}else o=n&~s,o!==0?r=hi(o):i!==0&&(r=hi(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-qt(e),s=1<<n,r|=t[n],e&=~s;return r}function K1(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Y1(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-qt(i),l=1<<o,u=s[o];u===-1?(!(l&n)||l&r)&&(s[o]=K1(l,e)):u<=e&&(t.expiredLanes|=l),i&=~l}}function rc(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Hg(){var t=Do;return Do<<=1,!(Do&4194240)&&(Do=64),t}function uu(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ao(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-qt(e),t[e]=n}function X1(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-qt(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function ph(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-qt(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var he=0;function Wg(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Gg,gh,Qg,Kg,Yg,sc=!1,Lo=[],Fn=null,zn=null,Un=null,Di=new Map,ji=new Map,Dn=[],J1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Yf(t,e){switch(t){case"focusin":case"focusout":Fn=null;break;case"dragenter":case"dragleave":zn=null;break;case"mouseover":case"mouseout":Un=null;break;case"pointerover":case"pointerout":Di.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ji.delete(e.pointerId)}}function ri(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=uo(e),e!==null&&gh(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function Z1(t,e,n,r,s){switch(e){case"focusin":return Fn=ri(Fn,t,e,n,r,s),!0;case"dragenter":return zn=ri(zn,t,e,n,r,s),!0;case"mouseover":return Un=ri(Un,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Di.set(i,ri(Di.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,ji.set(i,ri(ji.get(i)||null,t,e,n,r,s)),!0}return!1}function Xg(t){var e=vr(t.target);if(e!==null){var n=Mr(e);if(n!==null){if(e=n.tag,e===13){if(e=Fg(n),e!==null){t.blockedOn=e,Yg(t.priority,function(){Qg(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ea(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=ic(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Zu=r,n.target.dispatchEvent(r),Zu=null}else return e=uo(n),e!==null&&gh(e),t.blockedOn=n,!1;e.shift()}return!0}function Xf(t,e,n){ea(t)&&n.delete(e)}function ew(){sc=!1,Fn!==null&&ea(Fn)&&(Fn=null),zn!==null&&ea(zn)&&(zn=null),Un!==null&&ea(Un)&&(Un=null),Di.forEach(Xf),ji.forEach(Xf)}function si(t,e){t.blockedOn===e&&(t.blockedOn=null,sc||(sc=!0,Ct.unstable_scheduleCallback(Ct.unstable_NormalPriority,ew)))}function Li(t){function e(s){return si(s,t)}if(0<Lo.length){si(Lo[0],t);for(var n=1;n<Lo.length;n++){var r=Lo[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Fn!==null&&si(Fn,t),zn!==null&&si(zn,t),Un!==null&&si(Un,t),Di.forEach(e),ji.forEach(e),n=0;n<Dn.length;n++)r=Dn[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Dn.length&&(n=Dn[0],n.blockedOn===null);)Xg(n),n.blockedOn===null&&Dn.shift()}var hs=Sn.ReactCurrentBatchConfig,xa=!0;function tw(t,e,n,r){var s=he,i=hs.transition;hs.transition=null;try{he=1,yh(t,e,n,r)}finally{he=s,hs.transition=i}}function nw(t,e,n,r){var s=he,i=hs.transition;hs.transition=null;try{he=4,yh(t,e,n,r)}finally{he=s,hs.transition=i}}function yh(t,e,n,r){if(xa){var s=ic(t,e,n,r);if(s===null)_u(t,e,r,Ea,n),Yf(t,r);else if(Z1(s,t,e,n,r))r.stopPropagation();else if(Yf(t,r),e&4&&-1<J1.indexOf(t)){for(;s!==null;){var i=uo(s);if(i!==null&&Gg(i),i=ic(t,e,n,r),i===null&&_u(t,e,r,Ea,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else _u(t,e,r,null,n)}}var Ea=null;function ic(t,e,n,r){if(Ea=null,t=fh(r),t=vr(t),t!==null)if(e=Mr(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Fg(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ea=t,null}function Jg(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($1()){case mh:return 1;case $g:return 4;case _a:case q1:return 16;case qg:return 536870912;default:return 16}default:return 16}}var Ln=null,vh=null,ta=null;function Zg(){if(ta)return ta;var t,e=vh,n=e.length,r,s="value"in Ln?Ln.value:Ln.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return ta=s.slice(t,1<r?1-r:void 0)}function na(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Mo(){return!0}function Jf(){return!1}function Nt(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Mo:Jf,this.isPropagationStopped=Jf,this}return ke(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Mo)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Mo)},persist:function(){},isPersistent:Mo}),e}var Rs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},_h=Nt(Rs),lo=ke({},Rs,{view:0,detail:0}),rw=Nt(lo),cu,hu,ii,ol=ke({},lo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:wh,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ii&&(ii&&t.type==="mousemove"?(cu=t.screenX-ii.screenX,hu=t.screenY-ii.screenY):hu=cu=0,ii=t),cu)},movementY:function(t){return"movementY"in t?t.movementY:hu}}),Zf=Nt(ol),sw=ke({},ol,{dataTransfer:0}),iw=Nt(sw),ow=ke({},lo,{relatedTarget:0}),du=Nt(ow),aw=ke({},Rs,{animationName:0,elapsedTime:0,pseudoElement:0}),lw=Nt(aw),uw=ke({},Rs,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),cw=Nt(uw),hw=ke({},Rs,{data:0}),em=Nt(hw),dw={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},fw={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},mw={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function pw(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=mw[t])?!!e[t]:!1}function wh(){return pw}var gw=ke({},lo,{key:function(t){if(t.key){var e=dw[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=na(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?fw[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:wh,charCode:function(t){return t.type==="keypress"?na(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?na(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),yw=Nt(gw),vw=ke({},ol,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),tm=Nt(vw),_w=ke({},lo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:wh}),ww=Nt(_w),xw=ke({},Rs,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ew=Nt(xw),Tw=ke({},ol,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Sw=Nt(Tw),Iw=[9,13,27,32],xh=yn&&"CompositionEvent"in window,_i=null;yn&&"documentMode"in document&&(_i=document.documentMode);var kw=yn&&"TextEvent"in window&&!_i,ey=yn&&(!xh||_i&&8<_i&&11>=_i),nm=" ",rm=!1;function ty(t,e){switch(t){case"keyup":return Iw.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ny(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Jr=!1;function Aw(t,e){switch(t){case"compositionend":return ny(e);case"keypress":return e.which!==32?null:(rm=!0,nm);case"textInput":return t=e.data,t===nm&&rm?null:t;default:return null}}function Cw(t,e){if(Jr)return t==="compositionend"||!xh&&ty(t,e)?(t=Zg(),ta=vh=Ln=null,Jr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return ey&&e.locale!=="ko"?null:e.data;default:return null}}var bw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function sm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!bw[t.type]:e==="textarea"}function ry(t,e,n,r){Dg(r),e=Ta(e,"onChange"),0<e.length&&(n=new _h("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var wi=null,Mi=null;function Nw(t){my(t,0)}function al(t){var e=ts(t);if(Ag(e))return t}function Rw(t,e){if(t==="change")return e}var sy=!1;if(yn){var fu;if(yn){var mu="oninput"in document;if(!mu){var im=document.createElement("div");im.setAttribute("oninput","return;"),mu=typeof im.oninput=="function"}fu=mu}else fu=!1;sy=fu&&(!document.documentMode||9<document.documentMode)}function om(){wi&&(wi.detachEvent("onpropertychange",iy),Mi=wi=null)}function iy(t){if(t.propertyName==="value"&&al(Mi)){var e=[];ry(e,Mi,t,fh(t)),Og(Nw,e)}}function Pw(t,e,n){t==="focusin"?(om(),wi=e,Mi=n,wi.attachEvent("onpropertychange",iy)):t==="focusout"&&om()}function Vw(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return al(Mi)}function Dw(t,e){if(t==="click")return al(e)}function jw(t,e){if(t==="input"||t==="change")return al(e)}function Lw(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Wt=typeof Object.is=="function"?Object.is:Lw;function Oi(t,e){if(Wt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Uu.call(e,s)||!Wt(t[s],e[s]))return!1}return!0}function am(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function lm(t,e){var n=am(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=am(n)}}function oy(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?oy(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function ay(){for(var t=window,e=ga();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=ga(t.document)}return e}function Eh(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Mw(t){var e=ay(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&oy(n.ownerDocument.documentElement,n)){if(r!==null&&Eh(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=lm(n,i);var o=lm(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Ow=yn&&"documentMode"in document&&11>=document.documentMode,Zr=null,oc=null,xi=null,ac=!1;function um(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;ac||Zr==null||Zr!==ga(r)||(r=Zr,"selectionStart"in r&&Eh(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),xi&&Oi(xi,r)||(xi=r,r=Ta(oc,"onSelect"),0<r.length&&(e=new _h("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Zr)))}function Oo(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var es={animationend:Oo("Animation","AnimationEnd"),animationiteration:Oo("Animation","AnimationIteration"),animationstart:Oo("Animation","AnimationStart"),transitionend:Oo("Transition","TransitionEnd")},pu={},ly={};yn&&(ly=document.createElement("div").style,"AnimationEvent"in window||(delete es.animationend.animation,delete es.animationiteration.animation,delete es.animationstart.animation),"TransitionEvent"in window||delete es.transitionend.transition);function ll(t){if(pu[t])return pu[t];if(!es[t])return t;var e=es[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in ly)return pu[t]=e[n];return t}var uy=ll("animationend"),cy=ll("animationiteration"),hy=ll("animationstart"),dy=ll("transitionend"),fy=new Map,cm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ir(t,e){fy.set(t,e),Lr(e,[t])}for(var gu=0;gu<cm.length;gu++){var yu=cm[gu],Fw=yu.toLowerCase(),zw=yu[0].toUpperCase()+yu.slice(1);ir(Fw,"on"+zw)}ir(uy,"onAnimationEnd");ir(cy,"onAnimationIteration");ir(hy,"onAnimationStart");ir("dblclick","onDoubleClick");ir("focusin","onFocus");ir("focusout","onBlur");ir(dy,"onTransitionEnd");ys("onMouseEnter",["mouseout","mouseover"]);ys("onMouseLeave",["mouseout","mouseover"]);ys("onPointerEnter",["pointerout","pointerover"]);ys("onPointerLeave",["pointerout","pointerover"]);Lr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Lr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Lr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Lr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Lr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Lr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var di="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Uw=new Set("cancel close invalid load scroll toggle".split(" ").concat(di));function hm(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,F1(r,e,void 0,t),t.currentTarget=null}function my(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],u=l.instance,h=l.currentTarget;if(l=l.listener,u!==i&&s.isPropagationStopped())break e;hm(s,l,h),i=u}else for(o=0;o<r.length;o++){if(l=r[o],u=l.instance,h=l.currentTarget,l=l.listener,u!==i&&s.isPropagationStopped())break e;hm(s,l,h),i=u}}}if(va)throw t=nc,va=!1,nc=null,t}function ve(t,e){var n=e[dc];n===void 0&&(n=e[dc]=new Set);var r=t+"__bubble";n.has(r)||(py(e,t,2,!1),n.add(r))}function vu(t,e,n){var r=0;e&&(r|=4),py(n,t,r,e)}var Fo="_reactListening"+Math.random().toString(36).slice(2);function Fi(t){if(!t[Fo]){t[Fo]=!0,Eg.forEach(function(n){n!=="selectionchange"&&(Uw.has(n)||vu(n,!1,t),vu(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Fo]||(e[Fo]=!0,vu("selectionchange",!1,e))}}function py(t,e,n,r){switch(Jg(e)){case 1:var s=tw;break;case 4:s=nw;break;default:s=yh}n=s.bind(null,e,n,t),s=void 0,!tc||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function _u(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;o=o.return}for(;l!==null;){if(o=vr(l),o===null)return;if(u=o.tag,u===5||u===6){r=i=o;continue e}l=l.parentNode}}r=r.return}Og(function(){var h=i,p=fh(n),m=[];e:{var g=fy.get(t);if(g!==void 0){var S=_h,b=t;switch(t){case"keypress":if(na(n)===0)break e;case"keydown":case"keyup":S=yw;break;case"focusin":b="focus",S=du;break;case"focusout":b="blur",S=du;break;case"beforeblur":case"afterblur":S=du;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":S=Zf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":S=iw;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":S=ww;break;case uy:case cy:case hy:S=lw;break;case dy:S=Ew;break;case"scroll":S=rw;break;case"wheel":S=Sw;break;case"copy":case"cut":case"paste":S=cw;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":S=tm}var N=(e&4)!==0,D=!N&&t==="scroll",_=N?g!==null?g+"Capture":null:g;N=[];for(var x=h,C;x!==null;){C=x;var V=C.stateNode;if(C.tag===5&&V!==null&&(C=V,_!==null&&(V=Vi(x,_),V!=null&&N.push(zi(x,V,C)))),D)break;x=x.return}0<N.length&&(g=new S(g,b,null,n,p),m.push({event:g,listeners:N}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",S=t==="mouseout"||t==="pointerout",g&&n!==Zu&&(b=n.relatedTarget||n.fromElement)&&(vr(b)||b[vn]))break e;if((S||g)&&(g=p.window===p?p:(g=p.ownerDocument)?g.defaultView||g.parentWindow:window,S?(b=n.relatedTarget||n.toElement,S=h,b=b?vr(b):null,b!==null&&(D=Mr(b),b!==D||b.tag!==5&&b.tag!==6)&&(b=null)):(S=null,b=h),S!==b)){if(N=Zf,V="onMouseLeave",_="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(N=tm,V="onPointerLeave",_="onPointerEnter",x="pointer"),D=S==null?g:ts(S),C=b==null?g:ts(b),g=new N(V,x+"leave",S,n,p),g.target=D,g.relatedTarget=C,V=null,vr(p)===h&&(N=new N(_,x+"enter",b,n,p),N.target=C,N.relatedTarget=D,V=N),D=V,S&&b)t:{for(N=S,_=b,x=0,C=N;C;C=Hr(C))x++;for(C=0,V=_;V;V=Hr(V))C++;for(;0<x-C;)N=Hr(N),x--;for(;0<C-x;)_=Hr(_),C--;for(;x--;){if(N===_||_!==null&&N===_.alternate)break t;N=Hr(N),_=Hr(_)}N=null}else N=null;S!==null&&dm(m,g,S,N,!1),b!==null&&D!==null&&dm(m,D,b,N,!0)}}e:{if(g=h?ts(h):window,S=g.nodeName&&g.nodeName.toLowerCase(),S==="select"||S==="input"&&g.type==="file")var M=Rw;else if(sm(g))if(sy)M=jw;else{M=Vw;var F=Pw}else(S=g.nodeName)&&S.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(M=Dw);if(M&&(M=M(t,h))){ry(m,M,n,p);break e}F&&F(t,g,h),t==="focusout"&&(F=g._wrapperState)&&F.controlled&&g.type==="number"&&Qu(g,"number",g.value)}switch(F=h?ts(h):window,t){case"focusin":(sm(F)||F.contentEditable==="true")&&(Zr=F,oc=h,xi=null);break;case"focusout":xi=oc=Zr=null;break;case"mousedown":ac=!0;break;case"contextmenu":case"mouseup":case"dragend":ac=!1,um(m,n,p);break;case"selectionchange":if(Ow)break;case"keydown":case"keyup":um(m,n,p)}var E;if(xh)e:{switch(t){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else Jr?ty(t,n)&&(v="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(v="onCompositionStart");v&&(ey&&n.locale!=="ko"&&(Jr||v!=="onCompositionStart"?v==="onCompositionEnd"&&Jr&&(E=Zg()):(Ln=p,vh="value"in Ln?Ln.value:Ln.textContent,Jr=!0)),F=Ta(h,v),0<F.length&&(v=new em(v,t,null,n,p),m.push({event:v,listeners:F}),E?v.data=E:(E=ny(n),E!==null&&(v.data=E)))),(E=kw?Aw(t,n):Cw(t,n))&&(h=Ta(h,"onBeforeInput"),0<h.length&&(p=new em("onBeforeInput","beforeinput",null,n,p),m.push({event:p,listeners:h}),p.data=E))}my(m,e)})}function zi(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Ta(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Vi(t,n),i!=null&&r.unshift(zi(t,i,s)),i=Vi(t,e),i!=null&&r.push(zi(t,i,s))),t=t.return}return r}function Hr(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function dm(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var l=n,u=l.alternate,h=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&h!==null&&(l=h,s?(u=Vi(n,i),u!=null&&o.unshift(zi(n,u,l))):s||(u=Vi(n,i),u!=null&&o.push(zi(n,u,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var Bw=/\r\n?/g,$w=/\u0000|\uFFFD/g;function fm(t){return(typeof t=="string"?t:""+t).replace(Bw,`
`).replace($w,"")}function zo(t,e,n){if(e=fm(e),fm(t)!==e&&n)throw Error(O(425))}function Sa(){}var lc=null,uc=null;function cc(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var hc=typeof setTimeout=="function"?setTimeout:void 0,qw=typeof clearTimeout=="function"?clearTimeout:void 0,mm=typeof Promise=="function"?Promise:void 0,Hw=typeof queueMicrotask=="function"?queueMicrotask:typeof mm<"u"?function(t){return mm.resolve(null).then(t).catch(Ww)}:hc;function Ww(t){setTimeout(function(){throw t})}function wu(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Li(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Li(e)}function Bn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function pm(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ps=Math.random().toString(36).slice(2),en="__reactFiber$"+Ps,Ui="__reactProps$"+Ps,vn="__reactContainer$"+Ps,dc="__reactEvents$"+Ps,Gw="__reactListeners$"+Ps,Qw="__reactHandles$"+Ps;function vr(t){var e=t[en];if(e)return e;for(var n=t.parentNode;n;){if(e=n[vn]||n[en]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=pm(t);t!==null;){if(n=t[en])return n;t=pm(t)}return e}t=n,n=t.parentNode}return null}function uo(t){return t=t[en]||t[vn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ts(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(O(33))}function ul(t){return t[Ui]||null}var fc=[],ns=-1;function or(t){return{current:t}}function we(t){0>ns||(t.current=fc[ns],fc[ns]=null,ns--)}function ge(t,e){ns++,fc[ns]=t.current,t.current=e}var Jn={},at=or(Jn),wt=or(!1),Cr=Jn;function vs(t,e){var n=t.type.contextTypes;if(!n)return Jn;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function xt(t){return t=t.childContextTypes,t!=null}function Ia(){we(wt),we(at)}function gm(t,e,n){if(at.current!==Jn)throw Error(O(168));ge(at,e),ge(wt,n)}function gy(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(O(108,P1(t)||"Unknown",s));return ke({},n,r)}function ka(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Jn,Cr=at.current,ge(at,t),ge(wt,wt.current),!0}function ym(t,e,n){var r=t.stateNode;if(!r)throw Error(O(169));n?(t=gy(t,e,Cr),r.__reactInternalMemoizedMergedChildContext=t,we(wt),we(at),ge(at,t)):we(wt),ge(wt,n)}var fn=null,cl=!1,xu=!1;function yy(t){fn===null?fn=[t]:fn.push(t)}function Kw(t){cl=!0,yy(t)}function ar(){if(!xu&&fn!==null){xu=!0;var t=0,e=he;try{var n=fn;for(he=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}fn=null,cl=!1}catch(s){throw fn!==null&&(fn=fn.slice(t+1)),Bg(mh,ar),s}finally{he=e,xu=!1}}return null}var rs=[],ss=0,Aa=null,Ca=0,Rt=[],Pt=0,br=null,mn=1,pn="";function pr(t,e){rs[ss++]=Ca,rs[ss++]=Aa,Aa=t,Ca=e}function vy(t,e,n){Rt[Pt++]=mn,Rt[Pt++]=pn,Rt[Pt++]=br,br=t;var r=mn;t=pn;var s=32-qt(r)-1;r&=~(1<<s),n+=1;var i=32-qt(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,mn=1<<32-qt(e)+s|n<<s|r,pn=i+t}else mn=1<<i|n<<s|r,pn=t}function Th(t){t.return!==null&&(pr(t,1),vy(t,1,0))}function Sh(t){for(;t===Aa;)Aa=rs[--ss],rs[ss]=null,Ca=rs[--ss],rs[ss]=null;for(;t===br;)br=Rt[--Pt],Rt[Pt]=null,pn=Rt[--Pt],Rt[Pt]=null,mn=Rt[--Pt],Rt[Pt]=null}var At=null,It=null,xe=!1,Bt=null;function _y(t,e){var n=Dt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function vm(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,At=t,It=Bn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,At=t,It=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=br!==null?{id:mn,overflow:pn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Dt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,At=t,It=null,!0):!1;default:return!1}}function mc(t){return(t.mode&1)!==0&&(t.flags&128)===0}function pc(t){if(xe){var e=It;if(e){var n=e;if(!vm(t,e)){if(mc(t))throw Error(O(418));e=Bn(n.nextSibling);var r=At;e&&vm(t,e)?_y(r,n):(t.flags=t.flags&-4097|2,xe=!1,At=t)}}else{if(mc(t))throw Error(O(418));t.flags=t.flags&-4097|2,xe=!1,At=t}}}function _m(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;At=t}function Uo(t){if(t!==At)return!1;if(!xe)return _m(t),xe=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!cc(t.type,t.memoizedProps)),e&&(e=It)){if(mc(t))throw wy(),Error(O(418));for(;e;)_y(t,e),e=Bn(e.nextSibling)}if(_m(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(O(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){It=Bn(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}It=null}}else It=At?Bn(t.stateNode.nextSibling):null;return!0}function wy(){for(var t=It;t;)t=Bn(t.nextSibling)}function _s(){It=At=null,xe=!1}function Ih(t){Bt===null?Bt=[t]:Bt.push(t)}var Yw=Sn.ReactCurrentBatchConfig;function oi(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(O(309));var r=n.stateNode}if(!r)throw Error(O(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(O(284));if(!n._owner)throw Error(O(290,t))}return t}function Bo(t,e){throw t=Object.prototype.toString.call(e),Error(O(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function wm(t){var e=t._init;return e(t._payload)}function xy(t){function e(_,x){if(t){var C=_.deletions;C===null?(_.deletions=[x],_.flags|=16):C.push(x)}}function n(_,x){if(!t)return null;for(;x!==null;)e(_,x),x=x.sibling;return null}function r(_,x){for(_=new Map;x!==null;)x.key!==null?_.set(x.key,x):_.set(x.index,x),x=x.sibling;return _}function s(_,x){return _=Wn(_,x),_.index=0,_.sibling=null,_}function i(_,x,C){return _.index=C,t?(C=_.alternate,C!==null?(C=C.index,C<x?(_.flags|=2,x):C):(_.flags|=2,x)):(_.flags|=1048576,x)}function o(_){return t&&_.alternate===null&&(_.flags|=2),_}function l(_,x,C,V){return x===null||x.tag!==6?(x=Cu(C,_.mode,V),x.return=_,x):(x=s(x,C),x.return=_,x)}function u(_,x,C,V){var M=C.type;return M===Xr?p(_,x,C.props.children,V,C.key):x!==null&&(x.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===Pn&&wm(M)===x.type)?(V=s(x,C.props),V.ref=oi(_,x,C),V.return=_,V):(V=ua(C.type,C.key,C.props,null,_.mode,V),V.ref=oi(_,x,C),V.return=_,V)}function h(_,x,C,V){return x===null||x.tag!==4||x.stateNode.containerInfo!==C.containerInfo||x.stateNode.implementation!==C.implementation?(x=bu(C,_.mode,V),x.return=_,x):(x=s(x,C.children||[]),x.return=_,x)}function p(_,x,C,V,M){return x===null||x.tag!==7?(x=Sr(C,_.mode,V,M),x.return=_,x):(x=s(x,C),x.return=_,x)}function m(_,x,C){if(typeof x=="string"&&x!==""||typeof x=="number")return x=Cu(""+x,_.mode,C),x.return=_,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Ro:return C=ua(x.type,x.key,x.props,null,_.mode,C),C.ref=oi(_,null,x),C.return=_,C;case Yr:return x=bu(x,_.mode,C),x.return=_,x;case Pn:var V=x._init;return m(_,V(x._payload),C)}if(ci(x)||ti(x))return x=Sr(x,_.mode,C,null),x.return=_,x;Bo(_,x)}return null}function g(_,x,C,V){var M=x!==null?x.key:null;if(typeof C=="string"&&C!==""||typeof C=="number")return M!==null?null:l(_,x,""+C,V);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Ro:return C.key===M?u(_,x,C,V):null;case Yr:return C.key===M?h(_,x,C,V):null;case Pn:return M=C._init,g(_,x,M(C._payload),V)}if(ci(C)||ti(C))return M!==null?null:p(_,x,C,V,null);Bo(_,C)}return null}function S(_,x,C,V,M){if(typeof V=="string"&&V!==""||typeof V=="number")return _=_.get(C)||null,l(x,_,""+V,M);if(typeof V=="object"&&V!==null){switch(V.$$typeof){case Ro:return _=_.get(V.key===null?C:V.key)||null,u(x,_,V,M);case Yr:return _=_.get(V.key===null?C:V.key)||null,h(x,_,V,M);case Pn:var F=V._init;return S(_,x,C,F(V._payload),M)}if(ci(V)||ti(V))return _=_.get(C)||null,p(x,_,V,M,null);Bo(x,V)}return null}function b(_,x,C,V){for(var M=null,F=null,E=x,v=x=0,T=null;E!==null&&v<C.length;v++){E.index>v?(T=E,E=null):T=E.sibling;var k=g(_,E,C[v],V);if(k===null){E===null&&(E=T);break}t&&E&&k.alternate===null&&e(_,E),x=i(k,x,v),F===null?M=k:F.sibling=k,F=k,E=T}if(v===C.length)return n(_,E),xe&&pr(_,v),M;if(E===null){for(;v<C.length;v++)E=m(_,C[v],V),E!==null&&(x=i(E,x,v),F===null?M=E:F.sibling=E,F=E);return xe&&pr(_,v),M}for(E=r(_,E);v<C.length;v++)T=S(E,_,v,C[v],V),T!==null&&(t&&T.alternate!==null&&E.delete(T.key===null?v:T.key),x=i(T,x,v),F===null?M=T:F.sibling=T,F=T);return t&&E.forEach(function(I){return e(_,I)}),xe&&pr(_,v),M}function N(_,x,C,V){var M=ti(C);if(typeof M!="function")throw Error(O(150));if(C=M.call(C),C==null)throw Error(O(151));for(var F=M=null,E=x,v=x=0,T=null,k=C.next();E!==null&&!k.done;v++,k=C.next()){E.index>v?(T=E,E=null):T=E.sibling;var I=g(_,E,k.value,V);if(I===null){E===null&&(E=T);break}t&&E&&I.alternate===null&&e(_,E),x=i(I,x,v),F===null?M=I:F.sibling=I,F=I,E=T}if(k.done)return n(_,E),xe&&pr(_,v),M;if(E===null){for(;!k.done;v++,k=C.next())k=m(_,k.value,V),k!==null&&(x=i(k,x,v),F===null?M=k:F.sibling=k,F=k);return xe&&pr(_,v),M}for(E=r(_,E);!k.done;v++,k=C.next())k=S(E,_,v,k.value,V),k!==null&&(t&&k.alternate!==null&&E.delete(k.key===null?v:k.key),x=i(k,x,v),F===null?M=k:F.sibling=k,F=k);return t&&E.forEach(function(A){return e(_,A)}),xe&&pr(_,v),M}function D(_,x,C,V){if(typeof C=="object"&&C!==null&&C.type===Xr&&C.key===null&&(C=C.props.children),typeof C=="object"&&C!==null){switch(C.$$typeof){case Ro:e:{for(var M=C.key,F=x;F!==null;){if(F.key===M){if(M=C.type,M===Xr){if(F.tag===7){n(_,F.sibling),x=s(F,C.props.children),x.return=_,_=x;break e}}else if(F.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===Pn&&wm(M)===F.type){n(_,F.sibling),x=s(F,C.props),x.ref=oi(_,F,C),x.return=_,_=x;break e}n(_,F);break}else e(_,F);F=F.sibling}C.type===Xr?(x=Sr(C.props.children,_.mode,V,C.key),x.return=_,_=x):(V=ua(C.type,C.key,C.props,null,_.mode,V),V.ref=oi(_,x,C),V.return=_,_=V)}return o(_);case Yr:e:{for(F=C.key;x!==null;){if(x.key===F)if(x.tag===4&&x.stateNode.containerInfo===C.containerInfo&&x.stateNode.implementation===C.implementation){n(_,x.sibling),x=s(x,C.children||[]),x.return=_,_=x;break e}else{n(_,x);break}else e(_,x);x=x.sibling}x=bu(C,_.mode,V),x.return=_,_=x}return o(_);case Pn:return F=C._init,D(_,x,F(C._payload),V)}if(ci(C))return b(_,x,C,V);if(ti(C))return N(_,x,C,V);Bo(_,C)}return typeof C=="string"&&C!==""||typeof C=="number"?(C=""+C,x!==null&&x.tag===6?(n(_,x.sibling),x=s(x,C),x.return=_,_=x):(n(_,x),x=Cu(C,_.mode,V),x.return=_,_=x),o(_)):n(_,x)}return D}var ws=xy(!0),Ey=xy(!1),ba=or(null),Na=null,is=null,kh=null;function Ah(){kh=is=Na=null}function Ch(t){var e=ba.current;we(ba),t._currentValue=e}function gc(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function ds(t,e){Na=t,kh=is=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(_t=!0),t.firstContext=null)}function Mt(t){var e=t._currentValue;if(kh!==t)if(t={context:t,memoizedValue:e,next:null},is===null){if(Na===null)throw Error(O(308));is=t,Na.dependencies={lanes:0,firstContext:t}}else is=is.next=t;return e}var _r=null;function bh(t){_r===null?_r=[t]:_r.push(t)}function Ty(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,bh(e)):(n.next=s.next,s.next=n),e.interleaved=n,_n(t,r)}function _n(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Vn=!1;function Nh(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Sy(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function gn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function $n(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ae&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,_n(t,n)}return s=r.interleaved,s===null?(e.next=e,bh(r)):(e.next=s.next,s.next=e),r.interleaved=e,_n(t,n)}function ra(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,ph(t,n)}}function xm(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Ra(t,e,n,r){var s=t.updateQueue;Vn=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var u=l,h=u.next;u.next=null,o===null?i=h:o.next=h,o=u;var p=t.alternate;p!==null&&(p=p.updateQueue,l=p.lastBaseUpdate,l!==o&&(l===null?p.firstBaseUpdate=h:l.next=h,p.lastBaseUpdate=u))}if(i!==null){var m=s.baseState;o=0,p=h=u=null,l=i;do{var g=l.lane,S=l.eventTime;if((r&g)===g){p!==null&&(p=p.next={eventTime:S,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var b=t,N=l;switch(g=e,S=n,N.tag){case 1:if(b=N.payload,typeof b=="function"){m=b.call(S,m,g);break e}m=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=N.payload,g=typeof b=="function"?b.call(S,m,g):b,g==null)break e;m=ke({},m,g);break e;case 2:Vn=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,g=s.effects,g===null?s.effects=[l]:g.push(l))}else S={eventTime:S,lane:g,tag:l.tag,payload:l.payload,callback:l.callback,next:null},p===null?(h=p=S,u=m):p=p.next=S,o|=g;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;g=l,l=g.next,g.next=null,s.lastBaseUpdate=g,s.shared.pending=null}}while(!0);if(p===null&&(u=m),s.baseState=u,s.firstBaseUpdate=h,s.lastBaseUpdate=p,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Rr|=o,t.lanes=o,t.memoizedState=m}}function Em(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(O(191,s));s.call(r)}}}var co={},nn=or(co),Bi=or(co),$i=or(co);function wr(t){if(t===co)throw Error(O(174));return t}function Rh(t,e){switch(ge($i,e),ge(Bi,t),ge(nn,co),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Yu(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Yu(e,t)}we(nn),ge(nn,e)}function xs(){we(nn),we(Bi),we($i)}function Iy(t){wr($i.current);var e=wr(nn.current),n=Yu(e,t.type);e!==n&&(ge(Bi,t),ge(nn,n))}function Ph(t){Bi.current===t&&(we(nn),we(Bi))}var Se=or(0);function Pa(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Eu=[];function Vh(){for(var t=0;t<Eu.length;t++)Eu[t]._workInProgressVersionPrimary=null;Eu.length=0}var sa=Sn.ReactCurrentDispatcher,Tu=Sn.ReactCurrentBatchConfig,Nr=0,Ie=null,ze=null,He=null,Va=!1,Ei=!1,qi=0,Xw=0;function tt(){throw Error(O(321))}function Dh(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Wt(t[n],e[n]))return!1;return!0}function jh(t,e,n,r,s,i){if(Nr=i,Ie=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,sa.current=t===null||t.memoizedState===null?tx:nx,t=n(r,s),Ei){i=0;do{if(Ei=!1,qi=0,25<=i)throw Error(O(301));i+=1,He=ze=null,e.updateQueue=null,sa.current=rx,t=n(r,s)}while(Ei)}if(sa.current=Da,e=ze!==null&&ze.next!==null,Nr=0,He=ze=Ie=null,Va=!1,e)throw Error(O(300));return t}function Lh(){var t=qi!==0;return qi=0,t}function Jt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return He===null?Ie.memoizedState=He=t:He=He.next=t,He}function Ot(){if(ze===null){var t=Ie.alternate;t=t!==null?t.memoizedState:null}else t=ze.next;var e=He===null?Ie.memoizedState:He.next;if(e!==null)He=e,ze=t;else{if(t===null)throw Error(O(310));ze=t,t={memoizedState:ze.memoizedState,baseState:ze.baseState,baseQueue:ze.baseQueue,queue:ze.queue,next:null},He===null?Ie.memoizedState=He=t:He=He.next=t}return He}function Hi(t,e){return typeof e=="function"?e(t):e}function Su(t){var e=Ot(),n=e.queue;if(n===null)throw Error(O(311));n.lastRenderedReducer=t;var r=ze,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=o=null,u=null,h=i;do{var p=h.lane;if((Nr&p)===p)u!==null&&(u=u.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),r=h.hasEagerState?h.eagerState:t(r,h.action);else{var m={lane:p,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};u===null?(l=u=m,o=r):u=u.next=m,Ie.lanes|=p,Rr|=p}h=h.next}while(h!==null&&h!==i);u===null?o=r:u.next=l,Wt(r,e.memoizedState)||(_t=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Ie.lanes|=i,Rr|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Iu(t){var e=Ot(),n=e.queue;if(n===null)throw Error(O(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);Wt(i,e.memoizedState)||(_t=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function ky(){}function Ay(t,e){var n=Ie,r=Ot(),s=e(),i=!Wt(r.memoizedState,s);if(i&&(r.memoizedState=s,_t=!0),r=r.queue,Mh(Ny.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||He!==null&&He.memoizedState.tag&1){if(n.flags|=2048,Wi(9,by.bind(null,n,r,s,e),void 0,null),We===null)throw Error(O(349));Nr&30||Cy(n,e,s)}return s}function Cy(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ie.updateQueue,e===null?(e={lastEffect:null,stores:null},Ie.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function by(t,e,n,r){e.value=n,e.getSnapshot=r,Ry(e)&&Py(t)}function Ny(t,e,n){return n(function(){Ry(e)&&Py(t)})}function Ry(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Wt(t,n)}catch{return!0}}function Py(t){var e=_n(t,1);e!==null&&Ht(e,t,1,-1)}function Tm(t){var e=Jt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Hi,lastRenderedState:t},e.queue=t,t=t.dispatch=ex.bind(null,Ie,t),[e.memoizedState,t]}function Wi(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ie.updateQueue,e===null?(e={lastEffect:null,stores:null},Ie.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Vy(){return Ot().memoizedState}function ia(t,e,n,r){var s=Jt();Ie.flags|=t,s.memoizedState=Wi(1|e,n,void 0,r===void 0?null:r)}function hl(t,e,n,r){var s=Ot();r=r===void 0?null:r;var i=void 0;if(ze!==null){var o=ze.memoizedState;if(i=o.destroy,r!==null&&Dh(r,o.deps)){s.memoizedState=Wi(e,n,i,r);return}}Ie.flags|=t,s.memoizedState=Wi(1|e,n,i,r)}function Sm(t,e){return ia(8390656,8,t,e)}function Mh(t,e){return hl(2048,8,t,e)}function Dy(t,e){return hl(4,2,t,e)}function jy(t,e){return hl(4,4,t,e)}function Ly(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function My(t,e,n){return n=n!=null?n.concat([t]):null,hl(4,4,Ly.bind(null,e,t),n)}function Oh(){}function Oy(t,e){var n=Ot();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Dh(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Fy(t,e){var n=Ot();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Dh(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function zy(t,e,n){return Nr&21?(Wt(n,e)||(n=Hg(),Ie.lanes|=n,Rr|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,_t=!0),t.memoizedState=n)}function Jw(t,e){var n=he;he=n!==0&&4>n?n:4,t(!0);var r=Tu.transition;Tu.transition={};try{t(!1),e()}finally{he=n,Tu.transition=r}}function Uy(){return Ot().memoizedState}function Zw(t,e,n){var r=Hn(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},By(t))$y(e,n);else if(n=Ty(t,e,n,r),n!==null){var s=dt();Ht(n,t,r,s),qy(n,e,r)}}function ex(t,e,n){var r=Hn(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(By(t))$y(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,l=i(o,n);if(s.hasEagerState=!0,s.eagerState=l,Wt(l,o)){var u=e.interleaved;u===null?(s.next=s,bh(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}n=Ty(t,e,s,r),n!==null&&(s=dt(),Ht(n,t,r,s),qy(n,e,r))}}function By(t){var e=t.alternate;return t===Ie||e!==null&&e===Ie}function $y(t,e){Ei=Va=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function qy(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,ph(t,n)}}var Da={readContext:Mt,useCallback:tt,useContext:tt,useEffect:tt,useImperativeHandle:tt,useInsertionEffect:tt,useLayoutEffect:tt,useMemo:tt,useReducer:tt,useRef:tt,useState:tt,useDebugValue:tt,useDeferredValue:tt,useTransition:tt,useMutableSource:tt,useSyncExternalStore:tt,useId:tt,unstable_isNewReconciler:!1},tx={readContext:Mt,useCallback:function(t,e){return Jt().memoizedState=[t,e===void 0?null:e],t},useContext:Mt,useEffect:Sm,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,ia(4194308,4,Ly.bind(null,e,t),n)},useLayoutEffect:function(t,e){return ia(4194308,4,t,e)},useInsertionEffect:function(t,e){return ia(4,2,t,e)},useMemo:function(t,e){var n=Jt();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Jt();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=Zw.bind(null,Ie,t),[r.memoizedState,t]},useRef:function(t){var e=Jt();return t={current:t},e.memoizedState=t},useState:Tm,useDebugValue:Oh,useDeferredValue:function(t){return Jt().memoizedState=t},useTransition:function(){var t=Tm(!1),e=t[0];return t=Jw.bind(null,t[1]),Jt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ie,s=Jt();if(xe){if(n===void 0)throw Error(O(407));n=n()}else{if(n=e(),We===null)throw Error(O(349));Nr&30||Cy(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,Sm(Ny.bind(null,r,i,t),[t]),r.flags|=2048,Wi(9,by.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Jt(),e=We.identifierPrefix;if(xe){var n=pn,r=mn;n=(r&~(1<<32-qt(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=qi++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Xw++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},nx={readContext:Mt,useCallback:Oy,useContext:Mt,useEffect:Mh,useImperativeHandle:My,useInsertionEffect:Dy,useLayoutEffect:jy,useMemo:Fy,useReducer:Su,useRef:Vy,useState:function(){return Su(Hi)},useDebugValue:Oh,useDeferredValue:function(t){var e=Ot();return zy(e,ze.memoizedState,t)},useTransition:function(){var t=Su(Hi)[0],e=Ot().memoizedState;return[t,e]},useMutableSource:ky,useSyncExternalStore:Ay,useId:Uy,unstable_isNewReconciler:!1},rx={readContext:Mt,useCallback:Oy,useContext:Mt,useEffect:Mh,useImperativeHandle:My,useInsertionEffect:Dy,useLayoutEffect:jy,useMemo:Fy,useReducer:Iu,useRef:Vy,useState:function(){return Iu(Hi)},useDebugValue:Oh,useDeferredValue:function(t){var e=Ot();return ze===null?e.memoizedState=t:zy(e,ze.memoizedState,t)},useTransition:function(){var t=Iu(Hi)[0],e=Ot().memoizedState;return[t,e]},useMutableSource:ky,useSyncExternalStore:Ay,useId:Uy,unstable_isNewReconciler:!1};function zt(t,e){if(t&&t.defaultProps){e=ke({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function yc(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:ke({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var dl={isMounted:function(t){return(t=t._reactInternals)?Mr(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=dt(),s=Hn(t),i=gn(r,s);i.payload=e,n!=null&&(i.callback=n),e=$n(t,i,s),e!==null&&(Ht(e,t,s,r),ra(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=dt(),s=Hn(t),i=gn(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=$n(t,i,s),e!==null&&(Ht(e,t,s,r),ra(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=dt(),r=Hn(t),s=gn(n,r);s.tag=2,e!=null&&(s.callback=e),e=$n(t,s,r),e!==null&&(Ht(e,t,r,n),ra(e,t,r))}};function Im(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Oi(n,r)||!Oi(s,i):!0}function Hy(t,e,n){var r=!1,s=Jn,i=e.contextType;return typeof i=="object"&&i!==null?i=Mt(i):(s=xt(e)?Cr:at.current,r=e.contextTypes,i=(r=r!=null)?vs(t,s):Jn),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=dl,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function km(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&dl.enqueueReplaceState(e,e.state,null)}function vc(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Nh(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Mt(i):(i=xt(e)?Cr:at.current,s.context=vs(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(yc(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&dl.enqueueReplaceState(s,s.state,null),Ra(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Es(t,e){try{var n="",r=e;do n+=R1(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function ku(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function _c(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var sx=typeof WeakMap=="function"?WeakMap:Map;function Wy(t,e,n){n=gn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){La||(La=!0,bc=r),_c(t,e)},n}function Gy(t,e,n){n=gn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){_c(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){_c(t,e),typeof r!="function"&&(qn===null?qn=new Set([this]):qn.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Am(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new sx;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=vx.bind(null,t,e,n),e.then(t,t))}function Cm(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function bm(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=gn(-1,1),e.tag=2,$n(n,e,1))),n.lanes|=1),t)}var ix=Sn.ReactCurrentOwner,_t=!1;function ct(t,e,n,r){e.child=t===null?Ey(e,null,n,r):ws(e,t.child,n,r)}function Nm(t,e,n,r,s){n=n.render;var i=e.ref;return ds(e,s),r=jh(t,e,n,r,i,s),n=Lh(),t!==null&&!_t?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,wn(t,e,s)):(xe&&n&&Th(e),e.flags|=1,ct(t,e,r,s),e.child)}function Rm(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Wh(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,Qy(t,e,i,r,s)):(t=ua(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Oi,n(o,r)&&t.ref===e.ref)return wn(t,e,s)}return e.flags|=1,t=Wn(i,r),t.ref=e.ref,t.return=e,e.child=t}function Qy(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Oi(i,r)&&t.ref===e.ref)if(_t=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(_t=!0);else return e.lanes=t.lanes,wn(t,e,s)}return wc(t,e,n,r,s)}function Ky(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ge(as,St),St|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ge(as,St),St|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,ge(as,St),St|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,ge(as,St),St|=r;return ct(t,e,s,n),e.child}function Yy(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function wc(t,e,n,r,s){var i=xt(n)?Cr:at.current;return i=vs(e,i),ds(e,s),n=jh(t,e,n,r,i,s),r=Lh(),t!==null&&!_t?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,wn(t,e,s)):(xe&&r&&Th(e),e.flags|=1,ct(t,e,n,s),e.child)}function Pm(t,e,n,r,s){if(xt(n)){var i=!0;ka(e)}else i=!1;if(ds(e,s),e.stateNode===null)oa(t,e),Hy(e,n,r),vc(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var u=o.context,h=n.contextType;typeof h=="object"&&h!==null?h=Mt(h):(h=xt(n)?Cr:at.current,h=vs(e,h));var p=n.getDerivedStateFromProps,m=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||u!==h)&&km(e,o,r,h),Vn=!1;var g=e.memoizedState;o.state=g,Ra(e,r,o,s),u=e.memoizedState,l!==r||g!==u||wt.current||Vn?(typeof p=="function"&&(yc(e,n,p,r),u=e.memoizedState),(l=Vn||Im(e,n,l,r,g,u,h))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=h,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Sy(t,e),l=e.memoizedProps,h=e.type===e.elementType?l:zt(e.type,l),o.props=h,m=e.pendingProps,g=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=Mt(u):(u=xt(n)?Cr:at.current,u=vs(e,u));var S=n.getDerivedStateFromProps;(p=typeof S=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==m||g!==u)&&km(e,o,r,u),Vn=!1,g=e.memoizedState,o.state=g,Ra(e,r,o,s);var b=e.memoizedState;l!==m||g!==b||wt.current||Vn?(typeof S=="function"&&(yc(e,n,S,r),b=e.memoizedState),(h=Vn||Im(e,n,h,r,g,b,u)||!1)?(p||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,b,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,b,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=b),o.props=r,o.state=b,o.context=u,r=h):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),r=!1)}return xc(t,e,n,r,i,s)}function xc(t,e,n,r,s,i){Yy(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&ym(e,n,!1),wn(t,e,i);r=e.stateNode,ix.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=ws(e,t.child,null,i),e.child=ws(e,null,l,i)):ct(t,e,l,i),e.memoizedState=r.state,s&&ym(e,n,!0),e.child}function Xy(t){var e=t.stateNode;e.pendingContext?gm(t,e.pendingContext,e.pendingContext!==e.context):e.context&&gm(t,e.context,!1),Rh(t,e.containerInfo)}function Vm(t,e,n,r,s){return _s(),Ih(s),e.flags|=256,ct(t,e,n,r),e.child}var Ec={dehydrated:null,treeContext:null,retryLane:0};function Tc(t){return{baseLanes:t,cachePool:null,transitions:null}}function Jy(t,e,n){var r=e.pendingProps,s=Se.current,i=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),ge(Se,s&1),t===null)return pc(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=pl(o,r,0,null),t=Sr(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Tc(n),e.memoizedState=Ec,t):Fh(e,o));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return ox(t,e,o,r,l,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,l=s.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=Wn(s,u),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=Wn(l,i):(i=Sr(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?Tc(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Ec,r}return i=t.child,t=i.sibling,r=Wn(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Fh(t,e){return e=pl({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function $o(t,e,n,r){return r!==null&&Ih(r),ws(e,t.child,null,n),t=Fh(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function ox(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=ku(Error(O(422))),$o(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=pl({mode:"visible",children:r.children},s,0,null),i=Sr(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&ws(e,t.child,null,o),e.child.memoizedState=Tc(o),e.memoizedState=Ec,i);if(!(e.mode&1))return $o(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(O(419)),r=ku(i,r,void 0),$o(t,e,o,r)}if(l=(o&t.childLanes)!==0,_t||l){if(r=We,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,_n(t,s),Ht(r,t,s,-1))}return Hh(),r=ku(Error(O(421))),$o(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=_x.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,It=Bn(s.nextSibling),At=e,xe=!0,Bt=null,t!==null&&(Rt[Pt++]=mn,Rt[Pt++]=pn,Rt[Pt++]=br,mn=t.id,pn=t.overflow,br=e),e=Fh(e,r.children),e.flags|=4096,e)}function Dm(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),gc(t.return,e,n)}function Au(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function Zy(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(ct(t,e,r.children,n),r=Se.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Dm(t,n,e);else if(t.tag===19)Dm(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ge(Se,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Pa(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Au(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Pa(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Au(e,!0,n,null,i);break;case"together":Au(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function oa(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function wn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Rr|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(O(153));if(e.child!==null){for(t=e.child,n=Wn(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Wn(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function ax(t,e,n){switch(e.tag){case 3:Xy(e),_s();break;case 5:Iy(e);break;case 1:xt(e.type)&&ka(e);break;case 4:Rh(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;ge(ba,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ge(Se,Se.current&1),e.flags|=128,null):n&e.child.childLanes?Jy(t,e,n):(ge(Se,Se.current&1),t=wn(t,e,n),t!==null?t.sibling:null);ge(Se,Se.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Zy(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),ge(Se,Se.current),r)break;return null;case 22:case 23:return e.lanes=0,Ky(t,e,n)}return wn(t,e,n)}var e0,Sc,t0,n0;e0=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Sc=function(){};t0=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,wr(nn.current);var i=null;switch(n){case"input":s=Wu(t,s),r=Wu(t,r),i=[];break;case"select":s=ke({},s,{value:void 0}),r=ke({},r,{value:void 0}),i=[];break;case"textarea":s=Ku(t,s),r=Ku(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Sa)}Xu(n,r);var o;n=null;for(h in s)if(!r.hasOwnProperty(h)&&s.hasOwnProperty(h)&&s[h]!=null)if(h==="style"){var l=s[h];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(Ri.hasOwnProperty(h)?i||(i=[]):(i=i||[]).push(h,null));for(h in r){var u=r[h];if(l=s!=null?s[h]:void 0,r.hasOwnProperty(h)&&u!==l&&(u!=null||l!=null))if(h==="style")if(l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(i||(i=[]),i.push(h,n)),n=u;else h==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(i=i||[]).push(h,u)):h==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(h,""+u):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(Ri.hasOwnProperty(h)?(u!=null&&h==="onScroll"&&ve("scroll",t),i||l===u||(i=[])):(i=i||[]).push(h,u))}n&&(i=i||[]).push("style",n);var h=i;(e.updateQueue=h)&&(e.flags|=4)}};n0=function(t,e,n,r){n!==r&&(e.flags|=4)};function ai(t,e){if(!xe)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function nt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function lx(t,e,n){var r=e.pendingProps;switch(Sh(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return nt(e),null;case 1:return xt(e.type)&&Ia(),nt(e),null;case 3:return r=e.stateNode,xs(),we(wt),we(at),Vh(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Uo(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Bt!==null&&(Pc(Bt),Bt=null))),Sc(t,e),nt(e),null;case 5:Ph(e);var s=wr($i.current);if(n=e.type,t!==null&&e.stateNode!=null)t0(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(O(166));return nt(e),null}if(t=wr(nn.current),Uo(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[en]=e,r[Ui]=i,t=(e.mode&1)!==0,n){case"dialog":ve("cancel",r),ve("close",r);break;case"iframe":case"object":case"embed":ve("load",r);break;case"video":case"audio":for(s=0;s<di.length;s++)ve(di[s],r);break;case"source":ve("error",r);break;case"img":case"image":case"link":ve("error",r),ve("load",r);break;case"details":ve("toggle",r);break;case"input":$f(r,i),ve("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},ve("invalid",r);break;case"textarea":Hf(r,i),ve("invalid",r)}Xu(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&zo(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&zo(r.textContent,l,t),s=["children",""+l]):Ri.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&ve("scroll",r)}switch(n){case"input":Po(r),qf(r,i,!0);break;case"textarea":Po(r),Wf(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Sa)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Ng(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[en]=e,t[Ui]=r,e0(t,e,!1,!1),e.stateNode=t;e:{switch(o=Ju(n,r),n){case"dialog":ve("cancel",t),ve("close",t),s=r;break;case"iframe":case"object":case"embed":ve("load",t),s=r;break;case"video":case"audio":for(s=0;s<di.length;s++)ve(di[s],t);s=r;break;case"source":ve("error",t),s=r;break;case"img":case"image":case"link":ve("error",t),ve("load",t),s=r;break;case"details":ve("toggle",t),s=r;break;case"input":$f(t,r),s=Wu(t,r),ve("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=ke({},r,{value:void 0}),ve("invalid",t);break;case"textarea":Hf(t,r),s=Ku(t,r),ve("invalid",t);break;default:s=r}Xu(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var u=l[i];i==="style"?Vg(t,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&Rg(t,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Pi(t,u):typeof u=="number"&&Pi(t,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Ri.hasOwnProperty(i)?u!=null&&i==="onScroll"&&ve("scroll",t):u!=null&&uh(t,i,u,o))}switch(n){case"input":Po(t),qf(t,r,!1);break;case"textarea":Po(t),Wf(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Xn(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?ls(t,!!r.multiple,i,!1):r.defaultValue!=null&&ls(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Sa)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return nt(e),null;case 6:if(t&&e.stateNode!=null)n0(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(O(166));if(n=wr($i.current),wr(nn.current),Uo(e)){if(r=e.stateNode,n=e.memoizedProps,r[en]=e,(i=r.nodeValue!==n)&&(t=At,t!==null))switch(t.tag){case 3:zo(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&zo(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[en]=e,e.stateNode=r}return nt(e),null;case 13:if(we(Se),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(xe&&It!==null&&e.mode&1&&!(e.flags&128))wy(),_s(),e.flags|=98560,i=!1;else if(i=Uo(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(O(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(O(317));i[en]=e}else _s(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;nt(e),i=!1}else Bt!==null&&(Pc(Bt),Bt=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Se.current&1?Ue===0&&(Ue=3):Hh())),e.updateQueue!==null&&(e.flags|=4),nt(e),null);case 4:return xs(),Sc(t,e),t===null&&Fi(e.stateNode.containerInfo),nt(e),null;case 10:return Ch(e.type._context),nt(e),null;case 17:return xt(e.type)&&Ia(),nt(e),null;case 19:if(we(Se),i=e.memoizedState,i===null)return nt(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)ai(i,!1);else{if(Ue!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Pa(t),o!==null){for(e.flags|=128,ai(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ge(Se,Se.current&1|2),e.child}t=t.sibling}i.tail!==null&&Re()>Ts&&(e.flags|=128,r=!0,ai(i,!1),e.lanes=4194304)}else{if(!r)if(t=Pa(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ai(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!xe)return nt(e),null}else 2*Re()-i.renderingStartTime>Ts&&n!==1073741824&&(e.flags|=128,r=!0,ai(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Re(),e.sibling=null,n=Se.current,ge(Se,r?n&1|2:n&1),e):(nt(e),null);case 22:case 23:return qh(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?St&1073741824&&(nt(e),e.subtreeFlags&6&&(e.flags|=8192)):nt(e),null;case 24:return null;case 25:return null}throw Error(O(156,e.tag))}function ux(t,e){switch(Sh(e),e.tag){case 1:return xt(e.type)&&Ia(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return xs(),we(wt),we(at),Vh(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Ph(e),null;case 13:if(we(Se),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(O(340));_s()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return we(Se),null;case 4:return xs(),null;case 10:return Ch(e.type._context),null;case 22:case 23:return qh(),null;case 24:return null;default:return null}}var qo=!1,it=!1,cx=typeof WeakSet=="function"?WeakSet:Set,q=null;function os(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){be(t,e,r)}else n.current=null}function Ic(t,e,n){try{n()}catch(r){be(t,e,r)}}var jm=!1;function hx(t,e){if(lc=xa,t=ay(),Eh(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,u=-1,h=0,p=0,m=t,g=null;t:for(;;){for(var S;m!==n||s!==0&&m.nodeType!==3||(l=o+s),m!==i||r!==0&&m.nodeType!==3||(u=o+r),m.nodeType===3&&(o+=m.nodeValue.length),(S=m.firstChild)!==null;)g=m,m=S;for(;;){if(m===t)break t;if(g===n&&++h===s&&(l=o),g===i&&++p===r&&(u=o),(S=m.nextSibling)!==null)break;m=g,g=m.parentNode}m=S}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(uc={focusedElem:t,selectionRange:n},xa=!1,q=e;q!==null;)if(e=q,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,q=t;else for(;q!==null;){e=q;try{var b=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var N=b.memoizedProps,D=b.memoizedState,_=e.stateNode,x=_.getSnapshotBeforeUpdate(e.elementType===e.type?N:zt(e.type,N),D);_.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var C=e.stateNode.containerInfo;C.nodeType===1?C.textContent="":C.nodeType===9&&C.documentElement&&C.removeChild(C.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(O(163))}}catch(V){be(e,e.return,V)}if(t=e.sibling,t!==null){t.return=e.return,q=t;break}q=e.return}return b=jm,jm=!1,b}function Ti(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Ic(e,n,i)}s=s.next}while(s!==r)}}function fl(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function kc(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function r0(t){var e=t.alternate;e!==null&&(t.alternate=null,r0(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[en],delete e[Ui],delete e[dc],delete e[Gw],delete e[Qw])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function s0(t){return t.tag===5||t.tag===3||t.tag===4}function Lm(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||s0(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Ac(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Sa));else if(r!==4&&(t=t.child,t!==null))for(Ac(t,e,n),t=t.sibling;t!==null;)Ac(t,e,n),t=t.sibling}function Cc(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Cc(t,e,n),t=t.sibling;t!==null;)Cc(t,e,n),t=t.sibling}var Qe=null,Ut=!1;function Rn(t,e,n){for(n=n.child;n!==null;)i0(t,e,n),n=n.sibling}function i0(t,e,n){if(tn&&typeof tn.onCommitFiberUnmount=="function")try{tn.onCommitFiberUnmount(il,n)}catch{}switch(n.tag){case 5:it||os(n,e);case 6:var r=Qe,s=Ut;Qe=null,Rn(t,e,n),Qe=r,Ut=s,Qe!==null&&(Ut?(t=Qe,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Qe.removeChild(n.stateNode));break;case 18:Qe!==null&&(Ut?(t=Qe,n=n.stateNode,t.nodeType===8?wu(t.parentNode,n):t.nodeType===1&&wu(t,n),Li(t)):wu(Qe,n.stateNode));break;case 4:r=Qe,s=Ut,Qe=n.stateNode.containerInfo,Ut=!0,Rn(t,e,n),Qe=r,Ut=s;break;case 0:case 11:case 14:case 15:if(!it&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Ic(n,e,o),s=s.next}while(s!==r)}Rn(t,e,n);break;case 1:if(!it&&(os(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){be(n,e,l)}Rn(t,e,n);break;case 21:Rn(t,e,n);break;case 22:n.mode&1?(it=(r=it)||n.memoizedState!==null,Rn(t,e,n),it=r):Rn(t,e,n);break;default:Rn(t,e,n)}}function Mm(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new cx),e.forEach(function(r){var s=wx.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Ft(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:Qe=l.stateNode,Ut=!1;break e;case 3:Qe=l.stateNode.containerInfo,Ut=!0;break e;case 4:Qe=l.stateNode.containerInfo,Ut=!0;break e}l=l.return}if(Qe===null)throw Error(O(160));i0(i,o,s),Qe=null,Ut=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(h){be(s,e,h)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)o0(e,t),e=e.sibling}function o0(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Ft(e,t),Xt(t),r&4){try{Ti(3,t,t.return),fl(3,t)}catch(N){be(t,t.return,N)}try{Ti(5,t,t.return)}catch(N){be(t,t.return,N)}}break;case 1:Ft(e,t),Xt(t),r&512&&n!==null&&os(n,n.return);break;case 5:if(Ft(e,t),Xt(t),r&512&&n!==null&&os(n,n.return),t.flags&32){var s=t.stateNode;try{Pi(s,"")}catch(N){be(t,t.return,N)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&Cg(s,i),Ju(l,o);var h=Ju(l,i);for(o=0;o<u.length;o+=2){var p=u[o],m=u[o+1];p==="style"?Vg(s,m):p==="dangerouslySetInnerHTML"?Rg(s,m):p==="children"?Pi(s,m):uh(s,p,m,h)}switch(l){case"input":Gu(s,i);break;case"textarea":bg(s,i);break;case"select":var g=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var S=i.value;S!=null?ls(s,!!i.multiple,S,!1):g!==!!i.multiple&&(i.defaultValue!=null?ls(s,!!i.multiple,i.defaultValue,!0):ls(s,!!i.multiple,i.multiple?[]:"",!1))}s[Ui]=i}catch(N){be(t,t.return,N)}}break;case 6:if(Ft(e,t),Xt(t),r&4){if(t.stateNode===null)throw Error(O(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(N){be(t,t.return,N)}}break;case 3:if(Ft(e,t),Xt(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Li(e.containerInfo)}catch(N){be(t,t.return,N)}break;case 4:Ft(e,t),Xt(t);break;case 13:Ft(e,t),Xt(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Bh=Re())),r&4&&Mm(t);break;case 22:if(p=n!==null&&n.memoizedState!==null,t.mode&1?(it=(h=it)||p,Ft(e,t),it=h):Ft(e,t),Xt(t),r&8192){if(h=t.memoizedState!==null,(t.stateNode.isHidden=h)&&!p&&t.mode&1)for(q=t,p=t.child;p!==null;){for(m=q=p;q!==null;){switch(g=q,S=g.child,g.tag){case 0:case 11:case 14:case 15:Ti(4,g,g.return);break;case 1:os(g,g.return);var b=g.stateNode;if(typeof b.componentWillUnmount=="function"){r=g,n=g.return;try{e=r,b.props=e.memoizedProps,b.state=e.memoizedState,b.componentWillUnmount()}catch(N){be(r,n,N)}}break;case 5:os(g,g.return);break;case 22:if(g.memoizedState!==null){Fm(m);continue}}S!==null?(S.return=g,q=S):Fm(m)}p=p.sibling}e:for(p=null,m=t;;){if(m.tag===5){if(p===null){p=m;try{s=m.stateNode,h?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=m.stateNode,u=m.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=Pg("display",o))}catch(N){be(t,t.return,N)}}}else if(m.tag===6){if(p===null)try{m.stateNode.nodeValue=h?"":m.memoizedProps}catch(N){be(t,t.return,N)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;p===m&&(p=null),m=m.return}p===m&&(p=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:Ft(e,t),Xt(t),r&4&&Mm(t);break;case 21:break;default:Ft(e,t),Xt(t)}}function Xt(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(s0(n)){var r=n;break e}n=n.return}throw Error(O(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Pi(s,""),r.flags&=-33);var i=Lm(t);Cc(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,l=Lm(t);Ac(t,l,o);break;default:throw Error(O(161))}}catch(u){be(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function dx(t,e,n){q=t,a0(t)}function a0(t,e,n){for(var r=(t.mode&1)!==0;q!==null;){var s=q,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||qo;if(!o){var l=s.alternate,u=l!==null&&l.memoizedState!==null||it;l=qo;var h=it;if(qo=o,(it=u)&&!h)for(q=s;q!==null;)o=q,u=o.child,o.tag===22&&o.memoizedState!==null?zm(s):u!==null?(u.return=o,q=u):zm(s);for(;i!==null;)q=i,a0(i),i=i.sibling;q=s,qo=l,it=h}Om(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,q=i):Om(t)}}function Om(t){for(;q!==null;){var e=q;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:it||fl(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!it)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:zt(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Em(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Em(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var h=e.alternate;if(h!==null){var p=h.memoizedState;if(p!==null){var m=p.dehydrated;m!==null&&Li(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(O(163))}it||e.flags&512&&kc(e)}catch(g){be(e,e.return,g)}}if(e===t){q=null;break}if(n=e.sibling,n!==null){n.return=e.return,q=n;break}q=e.return}}function Fm(t){for(;q!==null;){var e=q;if(e===t){q=null;break}var n=e.sibling;if(n!==null){n.return=e.return,q=n;break}q=e.return}}function zm(t){for(;q!==null;){var e=q;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{fl(4,e)}catch(u){be(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(u){be(e,s,u)}}var i=e.return;try{kc(e)}catch(u){be(e,i,u)}break;case 5:var o=e.return;try{kc(e)}catch(u){be(e,o,u)}}}catch(u){be(e,e.return,u)}if(e===t){q=null;break}var l=e.sibling;if(l!==null){l.return=e.return,q=l;break}q=e.return}}var fx=Math.ceil,ja=Sn.ReactCurrentDispatcher,zh=Sn.ReactCurrentOwner,jt=Sn.ReactCurrentBatchConfig,ae=0,We=null,je=null,Xe=0,St=0,as=or(0),Ue=0,Gi=null,Rr=0,ml=0,Uh=0,Si=null,yt=null,Bh=0,Ts=1/0,dn=null,La=!1,bc=null,qn=null,Ho=!1,Mn=null,Ma=0,Ii=0,Nc=null,aa=-1,la=0;function dt(){return ae&6?Re():aa!==-1?aa:aa=Re()}function Hn(t){return t.mode&1?ae&2&&Xe!==0?Xe&-Xe:Yw.transition!==null?(la===0&&(la=Hg()),la):(t=he,t!==0||(t=window.event,t=t===void 0?16:Jg(t.type)),t):1}function Ht(t,e,n,r){if(50<Ii)throw Ii=0,Nc=null,Error(O(185));ao(t,n,r),(!(ae&2)||t!==We)&&(t===We&&(!(ae&2)&&(ml|=n),Ue===4&&jn(t,Xe)),Et(t,r),n===1&&ae===0&&!(e.mode&1)&&(Ts=Re()+500,cl&&ar()))}function Et(t,e){var n=t.callbackNode;Y1(t,e);var r=wa(t,t===We?Xe:0);if(r===0)n!==null&&Kf(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Kf(n),e===1)t.tag===0?Kw(Um.bind(null,t)):yy(Um.bind(null,t)),Hw(function(){!(ae&6)&&ar()}),n=null;else{switch(Wg(r)){case 1:n=mh;break;case 4:n=$g;break;case 16:n=_a;break;case 536870912:n=qg;break;default:n=_a}n=p0(n,l0.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function l0(t,e){if(aa=-1,la=0,ae&6)throw Error(O(327));var n=t.callbackNode;if(fs()&&t.callbackNode!==n)return null;var r=wa(t,t===We?Xe:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Oa(t,r);else{e=r;var s=ae;ae|=2;var i=c0();(We!==t||Xe!==e)&&(dn=null,Ts=Re()+500,Tr(t,e));do try{gx();break}catch(l){u0(t,l)}while(!0);Ah(),ja.current=i,ae=s,je!==null?e=0:(We=null,Xe=0,e=Ue)}if(e!==0){if(e===2&&(s=rc(t),s!==0&&(r=s,e=Rc(t,s))),e===1)throw n=Gi,Tr(t,0),jn(t,r),Et(t,Re()),n;if(e===6)jn(t,r);else{if(s=t.current.alternate,!(r&30)&&!mx(s)&&(e=Oa(t,r),e===2&&(i=rc(t),i!==0&&(r=i,e=Rc(t,i))),e===1))throw n=Gi,Tr(t,0),jn(t,r),Et(t,Re()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(O(345));case 2:gr(t,yt,dn);break;case 3:if(jn(t,r),(r&130023424)===r&&(e=Bh+500-Re(),10<e)){if(wa(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){dt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=hc(gr.bind(null,t,yt,dn),e);break}gr(t,yt,dn);break;case 4:if(jn(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-qt(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Re()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*fx(r/1960))-r,10<r){t.timeoutHandle=hc(gr.bind(null,t,yt,dn),r);break}gr(t,yt,dn);break;case 5:gr(t,yt,dn);break;default:throw Error(O(329))}}}return Et(t,Re()),t.callbackNode===n?l0.bind(null,t):null}function Rc(t,e){var n=Si;return t.current.memoizedState.isDehydrated&&(Tr(t,e).flags|=256),t=Oa(t,e),t!==2&&(e=yt,yt=n,e!==null&&Pc(e)),t}function Pc(t){yt===null?yt=t:yt.push.apply(yt,t)}function mx(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Wt(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function jn(t,e){for(e&=~Uh,e&=~ml,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-qt(e),r=1<<n;t[n]=-1,e&=~r}}function Um(t){if(ae&6)throw Error(O(327));fs();var e=wa(t,0);if(!(e&1))return Et(t,Re()),null;var n=Oa(t,e);if(t.tag!==0&&n===2){var r=rc(t);r!==0&&(e=r,n=Rc(t,r))}if(n===1)throw n=Gi,Tr(t,0),jn(t,e),Et(t,Re()),n;if(n===6)throw Error(O(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,gr(t,yt,dn),Et(t,Re()),null}function $h(t,e){var n=ae;ae|=1;try{return t(e)}finally{ae=n,ae===0&&(Ts=Re()+500,cl&&ar())}}function Pr(t){Mn!==null&&Mn.tag===0&&!(ae&6)&&fs();var e=ae;ae|=1;var n=jt.transition,r=he;try{if(jt.transition=null,he=1,t)return t()}finally{he=r,jt.transition=n,ae=e,!(ae&6)&&ar()}}function qh(){St=as.current,we(as)}function Tr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,qw(n)),je!==null)for(n=je.return;n!==null;){var r=n;switch(Sh(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ia();break;case 3:xs(),we(wt),we(at),Vh();break;case 5:Ph(r);break;case 4:xs();break;case 13:we(Se);break;case 19:we(Se);break;case 10:Ch(r.type._context);break;case 22:case 23:qh()}n=n.return}if(We=t,je=t=Wn(t.current,null),Xe=St=e,Ue=0,Gi=null,Uh=ml=Rr=0,yt=Si=null,_r!==null){for(e=0;e<_r.length;e++)if(n=_r[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}_r=null}return t}function u0(t,e){do{var n=je;try{if(Ah(),sa.current=Da,Va){for(var r=Ie.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Va=!1}if(Nr=0,He=ze=Ie=null,Ei=!1,qi=0,zh.current=null,n===null||n.return===null){Ue=1,Gi=e,je=null;break}e:{var i=t,o=n.return,l=n,u=e;if(e=Xe,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var h=u,p=l,m=p.tag;if(!(p.mode&1)&&(m===0||m===11||m===15)){var g=p.alternate;g?(p.updateQueue=g.updateQueue,p.memoizedState=g.memoizedState,p.lanes=g.lanes):(p.updateQueue=null,p.memoizedState=null)}var S=Cm(o);if(S!==null){S.flags&=-257,bm(S,o,l,i,e),S.mode&1&&Am(i,h,e),e=S,u=h;var b=e.updateQueue;if(b===null){var N=new Set;N.add(u),e.updateQueue=N}else b.add(u);break e}else{if(!(e&1)){Am(i,h,e),Hh();break e}u=Error(O(426))}}else if(xe&&l.mode&1){var D=Cm(o);if(D!==null){!(D.flags&65536)&&(D.flags|=256),bm(D,o,l,i,e),Ih(Es(u,l));break e}}i=u=Es(u,l),Ue!==4&&(Ue=2),Si===null?Si=[i]:Si.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var _=Wy(i,u,e);xm(i,_);break e;case 1:l=u;var x=i.type,C=i.stateNode;if(!(i.flags&128)&&(typeof x.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(qn===null||!qn.has(C)))){i.flags|=65536,e&=-e,i.lanes|=e;var V=Gy(i,l,e);xm(i,V);break e}}i=i.return}while(i!==null)}d0(n)}catch(M){e=M,je===n&&n!==null&&(je=n=n.return);continue}break}while(!0)}function c0(){var t=ja.current;return ja.current=Da,t===null?Da:t}function Hh(){(Ue===0||Ue===3||Ue===2)&&(Ue=4),We===null||!(Rr&268435455)&&!(ml&268435455)||jn(We,Xe)}function Oa(t,e){var n=ae;ae|=2;var r=c0();(We!==t||Xe!==e)&&(dn=null,Tr(t,e));do try{px();break}catch(s){u0(t,s)}while(!0);if(Ah(),ae=n,ja.current=r,je!==null)throw Error(O(261));return We=null,Xe=0,Ue}function px(){for(;je!==null;)h0(je)}function gx(){for(;je!==null&&!U1();)h0(je)}function h0(t){var e=m0(t.alternate,t,St);t.memoizedProps=t.pendingProps,e===null?d0(t):je=e,zh.current=null}function d0(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=ux(n,e),n!==null){n.flags&=32767,je=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ue=6,je=null;return}}else if(n=lx(n,e,St),n!==null){je=n;return}if(e=e.sibling,e!==null){je=e;return}je=e=t}while(e!==null);Ue===0&&(Ue=5)}function gr(t,e,n){var r=he,s=jt.transition;try{jt.transition=null,he=1,yx(t,e,n,r)}finally{jt.transition=s,he=r}return null}function yx(t,e,n,r){do fs();while(Mn!==null);if(ae&6)throw Error(O(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(O(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(X1(t,i),t===We&&(je=We=null,Xe=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ho||(Ho=!0,p0(_a,function(){return fs(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=jt.transition,jt.transition=null;var o=he;he=1;var l=ae;ae|=4,zh.current=null,hx(t,n),o0(n,t),Mw(uc),xa=!!lc,uc=lc=null,t.current=n,dx(n),B1(),ae=l,he=o,jt.transition=i}else t.current=n;if(Ho&&(Ho=!1,Mn=t,Ma=s),i=t.pendingLanes,i===0&&(qn=null),H1(n.stateNode),Et(t,Re()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(La)throw La=!1,t=bc,bc=null,t;return Ma&1&&t.tag!==0&&fs(),i=t.pendingLanes,i&1?t===Nc?Ii++:(Ii=0,Nc=t):Ii=0,ar(),null}function fs(){if(Mn!==null){var t=Wg(Ma),e=jt.transition,n=he;try{if(jt.transition=null,he=16>t?16:t,Mn===null)var r=!1;else{if(t=Mn,Mn=null,Ma=0,ae&6)throw Error(O(331));var s=ae;for(ae|=4,q=t.current;q!==null;){var i=q,o=i.child;if(q.flags&16){var l=i.deletions;if(l!==null){for(var u=0;u<l.length;u++){var h=l[u];for(q=h;q!==null;){var p=q;switch(p.tag){case 0:case 11:case 15:Ti(8,p,i)}var m=p.child;if(m!==null)m.return=p,q=m;else for(;q!==null;){p=q;var g=p.sibling,S=p.return;if(r0(p),p===h){q=null;break}if(g!==null){g.return=S,q=g;break}q=S}}}var b=i.alternate;if(b!==null){var N=b.child;if(N!==null){b.child=null;do{var D=N.sibling;N.sibling=null,N=D}while(N!==null)}}q=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,q=o;else e:for(;q!==null;){if(i=q,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Ti(9,i,i.return)}var _=i.sibling;if(_!==null){_.return=i.return,q=_;break e}q=i.return}}var x=t.current;for(q=x;q!==null;){o=q;var C=o.child;if(o.subtreeFlags&2064&&C!==null)C.return=o,q=C;else e:for(o=x;q!==null;){if(l=q,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:fl(9,l)}}catch(M){be(l,l.return,M)}if(l===o){q=null;break e}var V=l.sibling;if(V!==null){V.return=l.return,q=V;break e}q=l.return}}if(ae=s,ar(),tn&&typeof tn.onPostCommitFiberRoot=="function")try{tn.onPostCommitFiberRoot(il,t)}catch{}r=!0}return r}finally{he=n,jt.transition=e}}return!1}function Bm(t,e,n){e=Es(n,e),e=Wy(t,e,1),t=$n(t,e,1),e=dt(),t!==null&&(ao(t,1,e),Et(t,e))}function be(t,e,n){if(t.tag===3)Bm(t,t,n);else for(;e!==null;){if(e.tag===3){Bm(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(qn===null||!qn.has(r))){t=Es(n,t),t=Gy(e,t,1),e=$n(e,t,1),t=dt(),e!==null&&(ao(e,1,t),Et(e,t));break}}e=e.return}}function vx(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=dt(),t.pingedLanes|=t.suspendedLanes&n,We===t&&(Xe&n)===n&&(Ue===4||Ue===3&&(Xe&130023424)===Xe&&500>Re()-Bh?Tr(t,0):Uh|=n),Et(t,e)}function f0(t,e){e===0&&(t.mode&1?(e=jo,jo<<=1,!(jo&130023424)&&(jo=4194304)):e=1);var n=dt();t=_n(t,e),t!==null&&(ao(t,e,n),Et(t,n))}function _x(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),f0(t,n)}function wx(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(O(314))}r!==null&&r.delete(e),f0(t,n)}var m0;m0=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||wt.current)_t=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return _t=!1,ax(t,e,n);_t=!!(t.flags&131072)}else _t=!1,xe&&e.flags&1048576&&vy(e,Ca,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;oa(t,e),t=e.pendingProps;var s=vs(e,at.current);ds(e,n),s=jh(null,e,r,t,s,n);var i=Lh();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,xt(r)?(i=!0,ka(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Nh(e),s.updater=dl,e.stateNode=s,s._reactInternals=e,vc(e,r,t,n),e=xc(null,e,r,!0,i,n)):(e.tag=0,xe&&i&&Th(e),ct(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(oa(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=Ex(r),t=zt(r,t),s){case 0:e=wc(null,e,r,t,n);break e;case 1:e=Pm(null,e,r,t,n);break e;case 11:e=Nm(null,e,r,t,n);break e;case 14:e=Rm(null,e,r,zt(r.type,t),n);break e}throw Error(O(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:zt(r,s),wc(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:zt(r,s),Pm(t,e,r,s,n);case 3:e:{if(Xy(e),t===null)throw Error(O(387));r=e.pendingProps,i=e.memoizedState,s=i.element,Sy(t,e),Ra(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Es(Error(O(423)),e),e=Vm(t,e,r,n,s);break e}else if(r!==s){s=Es(Error(O(424)),e),e=Vm(t,e,r,n,s);break e}else for(It=Bn(e.stateNode.containerInfo.firstChild),At=e,xe=!0,Bt=null,n=Ey(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(_s(),r===s){e=wn(t,e,n);break e}ct(t,e,r,n)}e=e.child}return e;case 5:return Iy(e),t===null&&pc(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,cc(r,s)?o=null:i!==null&&cc(r,i)&&(e.flags|=32),Yy(t,e),ct(t,e,o,n),e.child;case 6:return t===null&&pc(e),null;case 13:return Jy(t,e,n);case 4:return Rh(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=ws(e,null,r,n):ct(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:zt(r,s),Nm(t,e,r,s,n);case 7:return ct(t,e,e.pendingProps,n),e.child;case 8:return ct(t,e,e.pendingProps.children,n),e.child;case 12:return ct(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,ge(ba,r._currentValue),r._currentValue=o,i!==null)if(Wt(i.value,o)){if(i.children===s.children&&!wt.current){e=wn(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=gn(-1,n&-n),u.tag=2;var h=i.updateQueue;if(h!==null){h=h.shared;var p=h.pending;p===null?u.next=u:(u.next=p.next,p.next=u),h.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),gc(i.return,n,e),l.lanes|=n;break}u=u.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(O(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),gc(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}ct(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,ds(e,n),s=Mt(s),r=r(s),e.flags|=1,ct(t,e,r,n),e.child;case 14:return r=e.type,s=zt(r,e.pendingProps),s=zt(r.type,s),Rm(t,e,r,s,n);case 15:return Qy(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:zt(r,s),oa(t,e),e.tag=1,xt(r)?(t=!0,ka(e)):t=!1,ds(e,n),Hy(e,r,s),vc(e,r,s,n),xc(null,e,r,!0,t,n);case 19:return Zy(t,e,n);case 22:return Ky(t,e,n)}throw Error(O(156,e.tag))};function p0(t,e){return Bg(t,e)}function xx(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Dt(t,e,n,r){return new xx(t,e,n,r)}function Wh(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Ex(t){if(typeof t=="function")return Wh(t)?1:0;if(t!=null){if(t=t.$$typeof,t===hh)return 11;if(t===dh)return 14}return 2}function Wn(t,e){var n=t.alternate;return n===null?(n=Dt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function ua(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")Wh(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Xr:return Sr(n.children,s,i,e);case ch:o=8,s|=8;break;case Bu:return t=Dt(12,n,e,s|2),t.elementType=Bu,t.lanes=i,t;case $u:return t=Dt(13,n,e,s),t.elementType=$u,t.lanes=i,t;case qu:return t=Dt(19,n,e,s),t.elementType=qu,t.lanes=i,t;case Ig:return pl(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Tg:o=10;break e;case Sg:o=9;break e;case hh:o=11;break e;case dh:o=14;break e;case Pn:o=16,r=null;break e}throw Error(O(130,t==null?t:typeof t,""))}return e=Dt(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Sr(t,e,n,r){return t=Dt(7,t,r,e),t.lanes=n,t}function pl(t,e,n,r){return t=Dt(22,t,r,e),t.elementType=Ig,t.lanes=n,t.stateNode={isHidden:!1},t}function Cu(t,e,n){return t=Dt(6,t,null,e),t.lanes=n,t}function bu(t,e,n){return e=Dt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Tx(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=uu(0),this.expirationTimes=uu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=uu(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Gh(t,e,n,r,s,i,o,l,u){return t=new Tx(t,e,n,l,u),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Dt(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Nh(i),t}function Sx(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Yr,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function g0(t){if(!t)return Jn;t=t._reactInternals;e:{if(Mr(t)!==t||t.tag!==1)throw Error(O(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(xt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(O(171))}if(t.tag===1){var n=t.type;if(xt(n))return gy(t,n,e)}return e}function y0(t,e,n,r,s,i,o,l,u){return t=Gh(n,r,!0,t,s,i,o,l,u),t.context=g0(null),n=t.current,r=dt(),s=Hn(n),i=gn(r,s),i.callback=e??null,$n(n,i,s),t.current.lanes=s,ao(t,s,r),Et(t,r),t}function gl(t,e,n,r){var s=e.current,i=dt(),o=Hn(s);return n=g0(n),e.context===null?e.context=n:e.pendingContext=n,e=gn(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=$n(s,e,o),t!==null&&(Ht(t,s,o,i),ra(t,s,o)),o}function Fa(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function $m(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Qh(t,e){$m(t,e),(t=t.alternate)&&$m(t,e)}function Ix(){return null}var v0=typeof reportError=="function"?reportError:function(t){console.error(t)};function Kh(t){this._internalRoot=t}yl.prototype.render=Kh.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(O(409));gl(t,e,null,null)};yl.prototype.unmount=Kh.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Pr(function(){gl(null,t,null,null)}),e[vn]=null}};function yl(t){this._internalRoot=t}yl.prototype.unstable_scheduleHydration=function(t){if(t){var e=Kg();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Dn.length&&e!==0&&e<Dn[n].priority;n++);Dn.splice(n,0,t),n===0&&Xg(t)}};function Yh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function vl(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function qm(){}function kx(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var h=Fa(o);i.call(h)}}var o=y0(e,r,t,0,null,!1,!1,"",qm);return t._reactRootContainer=o,t[vn]=o.current,Fi(t.nodeType===8?t.parentNode:t),Pr(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var h=Fa(u);l.call(h)}}var u=Gh(t,0,!1,null,null,!1,!1,"",qm);return t._reactRootContainer=u,t[vn]=u.current,Fi(t.nodeType===8?t.parentNode:t),Pr(function(){gl(e,u,n,r)}),u}function _l(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var u=Fa(o);l.call(u)}}gl(e,o,t,s)}else o=kx(n,e,t,s,r);return Fa(o)}Gg=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=hi(e.pendingLanes);n!==0&&(ph(e,n|1),Et(e,Re()),!(ae&6)&&(Ts=Re()+500,ar()))}break;case 13:Pr(function(){var r=_n(t,1);if(r!==null){var s=dt();Ht(r,t,1,s)}}),Qh(t,1)}};gh=function(t){if(t.tag===13){var e=_n(t,134217728);if(e!==null){var n=dt();Ht(e,t,134217728,n)}Qh(t,134217728)}};Qg=function(t){if(t.tag===13){var e=Hn(t),n=_n(t,e);if(n!==null){var r=dt();Ht(n,t,e,r)}Qh(t,e)}};Kg=function(){return he};Yg=function(t,e){var n=he;try{return he=t,e()}finally{he=n}};ec=function(t,e,n){switch(e){case"input":if(Gu(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=ul(r);if(!s)throw Error(O(90));Ag(r),Gu(r,s)}}}break;case"textarea":bg(t,n);break;case"select":e=n.value,e!=null&&ls(t,!!n.multiple,e,!1)}};Lg=$h;Mg=Pr;var Ax={usingClientEntryPoint:!1,Events:[uo,ts,ul,Dg,jg,$h]},li={findFiberByHostInstance:vr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Cx={bundleType:li.bundleType,version:li.version,rendererPackageName:li.rendererPackageName,rendererConfig:li.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Sn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=zg(t),t===null?null:t.stateNode},findFiberByHostInstance:li.findFiberByHostInstance||Ix,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Wo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Wo.isDisabled&&Wo.supportsFiber)try{il=Wo.inject(Cx),tn=Wo}catch{}}bt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ax;bt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Yh(e))throw Error(O(200));return Sx(t,e,null,n)};bt.createRoot=function(t,e){if(!Yh(t))throw Error(O(299));var n=!1,r="",s=v0;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Gh(t,1,!1,null,null,n,!1,r,s),t[vn]=e.current,Fi(t.nodeType===8?t.parentNode:t),new Kh(e)};bt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(O(188)):(t=Object.keys(t).join(","),Error(O(268,t)));return t=zg(e),t=t===null?null:t.stateNode,t};bt.flushSync=function(t){return Pr(t)};bt.hydrate=function(t,e,n){if(!vl(e))throw Error(O(200));return _l(null,t,e,!0,n)};bt.hydrateRoot=function(t,e,n){if(!Yh(t))throw Error(O(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=v0;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=y0(e,null,t,1,n??null,s,!1,i,o),t[vn]=e.current,Fi(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new yl(e)};bt.render=function(t,e,n){if(!vl(e))throw Error(O(200));return _l(null,t,e,!1,n)};bt.unmountComponentAtNode=function(t){if(!vl(t))throw Error(O(40));return t._reactRootContainer?(Pr(function(){_l(null,null,t,!1,function(){t._reactRootContainer=null,t[vn]=null})}),!0):!1};bt.unstable_batchedUpdates=$h;bt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!vl(n))throw Error(O(200));if(t==null||t._reactInternals===void 0)throw Error(O(38));return _l(t,e,n,!1,r)};bt.version="18.3.1-next-f1338f8080-20240426";function _0(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(_0)}catch(t){console.error(t)}}_0(),_g.exports=bt;var bx=_g.exports,Hm=bx;zu.createRoot=Hm.createRoot,zu.hydrateRoot=Hm.hydrateRoot;var Nx={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Rx=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Px=(t,e)=>{const n=H.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,children:l,...u},h)=>H.createElement("svg",{ref:h,...Nx,width:s,height:s,stroke:r,strokeWidth:o?Number(i)*24/Number(s):i,className:`lucide lucide-${Rx(t)}`,...u},[...e.map(([p,m])=>H.createElement(p,m)),...(Array.isArray(l)?l:[l])||[]]));return n.displayName=`${t}`,n};var oe=Px;const w0=oe("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]),x0=oe("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),Vx=oe("CheckCircle2",[["path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",key:"14v8dr"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),Dx=oe("ChefHat",[["path",{d:"M6 13.87A4 4 0 0 1 7.41 6a5.11 5.11 0 0 1 1.05-1.54 5 5 0 0 1 7.08 0A5.11 5.11 0 0 1 16.59 6 4 4 0 0 1 18 13.87V21H6Z",key:"z3ra2g"}],["line",{x1:"6",x2:"18",y1:"17",y2:"17",key:"12q60k"}]]),jx=oe("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),Vc=oe("Cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]),Lx=oe("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),Mx=oe("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),Ox=oe("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]),E0=oe("Facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]),Fx=oe("FileJson",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1",key:"1oajmo"}],["path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1",key:"mpwhp6"}]]),zx=oe("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}],["path",{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z",key:"nb9nel"}]]),T0=oe("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),Ux=oe("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]),S0=oe("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]),Bx=oe("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]]),$x=oe("MessageCircle",[["path",{d:"m3 21 1.9-5.7a8.5 8.5 0 1 1 3.8 3.8z",key:"v2veuj"}]]),I0=oe("Music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]),qx=oe("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]),Qi=oe("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),Hx=oe("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),k0=oe("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),A0=oe("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),Wx=oe("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]),Gx=oe("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]),Xh=oe("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]),Jh=oe("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]),Qx=oe("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]),C0=oe("StickyNote",[["path",{d:"M15.5 3H5a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h14a2 2 0 0 0 2-2V8.5L15.5 3Z",key:"1wis1t"}],["path",{d:"M15 3v6h6",key:"edgan2"}]]),za=oe("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),Kx=oe("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),rn=oe("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),xr=oe("Youtube",[["path",{d:"M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17",key:"1q2vi4"}],["path",{d:"m10 15 5-3-5-3z",key:"1jp15x"}]]),Yx=oe("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);function b0(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=b0(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Ee(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=b0(t))&&(r&&(r+=" "),r+=e);return r}const Xx=({activeTab:t,setActiveTab:e})=>d.jsx("header",{className:"bg-slate-800/95 backdrop-blur-sm shadow-2xl border-b-2 border-primary-600/50 autumn-glow",children:d.jsx("div",{className:"container mx-auto px-4 py-4",children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsxs("div",{className:"relative",children:[d.jsx(Yx,{className:"h-10 w-10 text-primary-400 fill-primary-400",strokeWidth:2}),d.jsx("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-accent-400 rounded-full animate-pulse autumn-glow-gold"})]}),d.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-primary-400 via-secondary-400 to-accent-400 bg-clip-text text-transparent",children:"🍂 Food Flash"})]}),d.jsxs("nav",{className:"flex gap-2",children:[d.jsxs("button",{onClick:()=>e("home"),"data-test-id":"nav-home","aria-label":"Zur Startseite navigieren",className:Ee("flex items-center gap-2 px-4 py-2 rounded-full font-medium transition-all duration-200",t==="home"?"bg-primary-600 text-white shadow-lg scale-105 autumn-glow":"bg-slate-700/50 text-gray-300 hover:bg-primary-600/20 hover:text-primary-300 border border-slate-600/50"),children:[d.jsx(Ux,{className:"h-5 w-5"}),d.jsx("span",{className:"hidden sm:inline",children:"🏠 Start"})]}),d.jsxs("button",{onClick:()=>e("recipes"),"data-test-id":"nav-recipes","aria-label":"Zu meinen Rezepten navigieren",className:Ee("flex items-center gap-2 px-4 py-2 rounded-full font-medium transition-all duration-200",t==="recipes"?"bg-secondary-600 text-white shadow-lg scale-105 autumn-glow-green":"bg-slate-700/50 text-gray-300 hover:bg-secondary-600/20 hover:text-secondary-300 border border-dark-600/50"),children:[d.jsx(w0,{className:"h-5 w-5"}),d.jsx("span",{className:"hidden sm:inline",children:"📖 Rezepte"})]}),d.jsxs("button",{onClick:()=>e("planner"),"data-test-id":"nav-planner","aria-label":"Zum Wochenplaner navigieren",className:Ee("flex items-center gap-2 px-4 py-2 rounded-full font-medium transition-all duration-200",t==="planner"?"bg-accent-600 text-white shadow-lg scale-105 autumn-glow-gold":"bg-slate-700/50 text-gray-300 hover:bg-accent-600/20 hover:text-accent-300 border border-dark-600/50"),children:[d.jsx(x0,{className:"h-5 w-5"}),d.jsx("span",{className:"hidden sm:inline",children:"📅 Planer"})]}),d.jsxs("button",{onClick:()=>e("shopping"),"data-test-id":"nav-shopping","aria-label":"Zur Einkaufsliste navigieren",className:Ee("flex items-center gap-2 px-4 py-2 rounded-full font-medium transition-all duration-200",t==="shopping"?"bg-primary-600 text-white shadow-lg scale-105 autumn-glow":"bg-slate-700/50 text-gray-300 hover:bg-primary-600/20 hover:text-primary-300 border border-slate-600/50"),children:[d.jsx(Xh,{className:"h-5 w-5"}),d.jsx("span",{className:"hidden sm:inline",children:"🛒 Einkauf"})]})]})]})})}),Jx=({onPlatformClick:t})=>d.jsxs("div",{className:"text-center py-12",children:[d.jsxs("div",{className:"mb-12",children:[d.jsx("h2",{className:"text-5xl font-bold text-gray-100 mb-4 bg-gradient-to-r from-primary-400 via-accent-400 to-secondary-400 bg-clip-text text-transparent",children:"🍂 Willkommen bei Food Flash! ⚡"}),d.jsx("p",{className:"text-xl text-gray-300 max-w-2xl mx-auto",children:"Speichere deine Lieblingsrezepte von überall und habe sie immer griffbereit!"})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 max-w-6xl mx-auto mb-12",children:[d.jsxs("button",{onClick:()=>t("youtube"),"data-test-id":"platform-youtube","aria-label":"YouTube Rezepte anzeigen",className:"bg-slate-800/80 backdrop-blur-sm rounded-2xl p-6 shadow-xl border-2 border-red-500/30 hover:scale-105 transition-all duration-300 hover:border-red-400 hover:shadow-2xl hover:autumn-glow cursor-pointer",children:[d.jsx("div",{className:"w-16 h-16 bg-red-600/20 rounded-full flex items-center justify-center mx-auto mb-4 border border-red-500/30",children:d.jsx(xr,{className:"h-8 w-8 text-red-400"})}),d.jsx("h3",{className:"font-bold text-gray-100 mb-2",children:"YouTube"}),d.jsx("p",{className:"text-sm text-gray-400",children:"Video-Rezepte speichern"})]}),d.jsxs("button",{onClick:()=>t("instagram"),"data-test-id":"platform-instagram","aria-label":"Instagram Rezepte anzeigen",className:"bg-slate-800/80 backdrop-blur-sm rounded-2xl p-6 shadow-xl border-2 border-pink-500/30 hover:scale-105 transition-all duration-300 hover:border-pink-400 hover:shadow-2xl cursor-pointer",children:[d.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-pink-600/20 to-purple-600/20 rounded-full flex items-center justify-center mx-auto mb-4 border border-pink-500/30",children:d.jsx(S0,{className:"h-8 w-8 text-pink-400"})}),d.jsx("h3",{className:"font-bold text-gray-100 mb-2",children:"Instagram"}),d.jsx("p",{className:"text-sm text-gray-400",children:"Reel-Rezepte sichern"})]}),d.jsxs("button",{onClick:()=>t("facebook"),"data-test-id":"platform-facebook","aria-label":"Facebook Rezepte anzeigen",className:"bg-slate-800/80 backdrop-blur-sm rounded-2xl p-6 shadow-xl border-2 border-blue-500/30 hover:scale-105 transition-all duration-300 hover:border-blue-400 hover:shadow-2xl cursor-pointer",children:[d.jsx("div",{className:"w-16 h-16 bg-blue-600/20 rounded-full flex items-center justify-center mx-auto mb-4 border border-blue-500/30",children:d.jsx(E0,{className:"h-8 w-8 text-blue-400"})}),d.jsx("h3",{className:"font-bold text-gray-100 mb-2",children:"Facebook"}),d.jsx("p",{className:"text-sm text-gray-400",children:"Posts & Videos merken"})]}),d.jsxs("button",{onClick:()=>t("tiktok"),"data-test-id":"platform-tiktok","aria-label":"TikTok Rezepte anzeigen",className:"bg-slate-800/80 backdrop-blur-sm rounded-2xl p-6 shadow-xl border-2 border-gray-500/30 hover:scale-105 transition-all duration-300 hover:border-gray-400 hover:shadow-2xl cursor-pointer",children:[d.jsx("div",{className:"w-16 h-16 bg-gray-600/20 rounded-full flex items-center justify-center mx-auto mb-4 border border-gray-500/30",children:d.jsx(I0,{className:"h-8 w-8 text-gray-400"})}),d.jsx("h3",{className:"font-bold text-gray-100 mb-2",children:"TikTok"}),d.jsx("p",{className:"text-sm text-gray-400",children:"Kurze Rezept-Videos"})]})]}),d.jsxs("div",{className:"bg-gradient-to-r from-primary-600/80 to-secondary-600/80 backdrop-blur-sm rounded-3xl p-8 max-w-4xl mx-auto text-white shadow-2xl border border-primary-500/30 autumn-glow",children:[d.jsx(Jh,{className:"h-12 w-12 mx-auto mb-4 text-accent-400"}),d.jsx("h3",{className:"text-3xl font-bold mb-4",children:"🍂 Starte jetzt mit deiner Rezeptsammlung!"}),d.jsx("p",{className:"text-lg mb-6 opacity-90",children:'Klicke auf "📖 Rezepte" in der Navigation oben, um dein erstes Rezept hinzuzufügen.'})]})]}),Zx=()=>{};var Wm={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N0=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},eE=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],l=t[n++],u=((s&7)<<18|(i&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},R0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,l=o?t[s+1]:0,u=s+2<t.length,h=u?t[s+2]:0,p=i>>2,m=(i&3)<<4|l>>4;let g=(l&15)<<2|h>>6,S=h&63;u||(S=64,o||(g=64)),r.push(n[p],n[m],n[g],n[S])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(N0(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):eE(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const h=s<t.length?n[t.charAt(s)]:64;++s;const m=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||l==null||h==null||m==null)throw new tE;const g=i<<2|l>>4;if(r.push(g),h!==64){const S=l<<4&240|h>>2;if(r.push(S),m!==64){const b=h<<6&192|m;r.push(b)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class tE extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const nE=function(t){const e=N0(t);return R0.encodeByteArray(e,!0)},Ua=function(t){return nE(t).replace(/\./g,"")},rE=function(t){try{return R0.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sE(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iE=()=>sE().__FIREBASE_DEFAULTS__,oE=()=>{if(typeof process>"u"||typeof Wm>"u")return;const t=Wm.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},aE=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&rE(t[1]);return e&&JSON.parse(e)},Zh=()=>{try{return Zx()||iE()||oE()||aE()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},lE=t=>{var e,n;return(n=(e=Zh())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},uE=t=>{const e=lE(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},P0=()=>{var t;return(t=Zh())==null?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cE{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ed(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function hE(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dE(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Ua(JSON.stringify(n)),Ua(JSON.stringify(o)),""].join(".")}const ki={};function fE(){const t={prod:[],emulator:[]};for(const e of Object.keys(ki))ki[e]?t.emulator.push(e):t.prod.push(e);return t}function mE(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Gm=!1;function pE(t,e){if(typeof window>"u"||typeof document>"u"||!ed(window.location.host)||ki[t]===e||ki[t]||Gm)return;ki[t]=e;function n(g){return`__firebase__banner__${g}`}const r="__firebase__banner",i=fE().prod.length>0;function o(){const g=document.getElementById(r);g&&g.remove()}function l(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function u(g,S){g.setAttribute("width","24"),g.setAttribute("id",S),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function h(){const g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{Gm=!0,o()},g}function p(g,S){g.setAttribute("id",S),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function m(){const g=mE(r),S=n("text"),b=document.getElementById(S)||document.createElement("span"),N=n("learnmore"),D=document.getElementById(N)||document.createElement("a"),_=n("preprendIcon"),x=document.getElementById(_)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){const C=g.element;l(C),p(D,N);const V=h();u(x,_),C.append(x,b,D,V),document.body.appendChild(C)}i?(b.innerText="Preview backend disconnected.",x.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(x.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,b.innerText="Preview backend running in this workspace."),b.setAttribute("id",S)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",m):m()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gE(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function yE(){var e;const t=(e=Zh())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function vE(){return!yE()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function _E(){try{return typeof indexedDB=="object"}catch{return!1}}function wE(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)==null?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xE="FirebaseError";class Vs extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=xE,Object.setPrototypeOf(this,Vs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,V0.prototype.create)}}class V0{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?EE(i,r):"Error",l=`${this.serviceName}: ${o} (${s}).`;return new Vs(s,l,r)}}function EE(t,e){return t.replace(TE,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const TE=/\{\$([^}]+)}/g;function Ba(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(Qm(i)&&Qm(o)){if(!Ba(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Qm(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cn(t){return t&&t._delegate?t._delegate:t}class Ki{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SE{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new cE;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(kE(e))try{this.getOrInitializeService({instanceIdentifier:yr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=yr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=yr){return this.instances.has(e)}getOptions(e=yr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&o.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:IE(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=yr){return this.component?this.component.multipleInstances?e:yr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function IE(t){return t===yr?void 0:t}function kE(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AE{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new SE(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ie;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ie||(ie={}));const CE={debug:ie.DEBUG,verbose:ie.VERBOSE,info:ie.INFO,warn:ie.WARN,error:ie.ERROR,silent:ie.SILENT},bE=ie.INFO,NE={[ie.DEBUG]:"log",[ie.VERBOSE]:"log",[ie.INFO]:"info",[ie.WARN]:"warn",[ie.ERROR]:"error"},RE=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=NE[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class D0{constructor(e){this.name=e,this._logLevel=bE,this._logHandler=RE,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ie))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?CE[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ie.DEBUG,...e),this._logHandler(this,ie.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ie.VERBOSE,...e),this._logHandler(this,ie.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ie.INFO,...e),this._logHandler(this,ie.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ie.WARN,...e),this._logHandler(this,ie.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ie.ERROR,...e),this._logHandler(this,ie.ERROR,...e)}}const PE=(t,e)=>e.some(n=>t instanceof n);let Km,Ym;function VE(){return Km||(Km=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function DE(){return Ym||(Ym=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const j0=new WeakMap,Dc=new WeakMap,L0=new WeakMap,Nu=new WeakMap,td=new WeakMap;function jE(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Gn(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&j0.set(n,t)}).catch(()=>{}),td.set(e,t),e}function LE(t){if(Dc.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Dc.set(t,e)}let jc={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Dc.get(t);if(e==="objectStoreNames")return t.objectStoreNames||L0.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Gn(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function ME(t){jc=t(jc)}function OE(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Ru(this),e,...n);return L0.set(r,e.sort?e.sort():[e]),Gn(r)}:DE().includes(t)?function(...e){return t.apply(Ru(this),e),Gn(j0.get(this))}:function(...e){return Gn(t.apply(Ru(this),e))}}function FE(t){return typeof t=="function"?OE(t):(t instanceof IDBTransaction&&LE(t),PE(t,VE())?new Proxy(t,jc):t)}function Gn(t){if(t instanceof IDBRequest)return jE(t);if(Nu.has(t))return Nu.get(t);const e=FE(t);return e!==t&&(Nu.set(t,e),td.set(e,t)),e}const Ru=t=>td.get(t);function zE(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),l=Gn(o);return r&&o.addEventListener("upgradeneeded",u=>{r(Gn(o.result),u.oldVersion,u.newVersion,Gn(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{i&&u.addEventListener("close",()=>i()),s&&u.addEventListener("versionchange",h=>s(h.oldVersion,h.newVersion,h))}).catch(()=>{}),l}const UE=["get","getKey","getAll","getAllKeys","count"],BE=["put","add","delete","clear"],Pu=new Map;function Xm(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Pu.get(e))return Pu.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=BE.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||UE.includes(n)))return;const i=async function(o,...l){const u=this.transaction(o,s?"readwrite":"readonly");let h=u.store;return r&&(h=h.index(l.shift())),(await Promise.all([h[n](...l),s&&u.done]))[0]};return Pu.set(e,i),i}ME(t=>({...t,get:(e,n,r)=>Xm(e,n)||t.get(e,n,r),has:(e,n)=>!!Xm(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $E{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(qE(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function qE(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Lc="@firebase/app",Jm="0.14.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xn=new D0("@firebase/app"),HE="@firebase/app-compat",WE="@firebase/analytics-compat",GE="@firebase/analytics",QE="@firebase/app-check-compat",KE="@firebase/app-check",YE="@firebase/auth",XE="@firebase/auth-compat",JE="@firebase/database",ZE="@firebase/data-connect",e2="@firebase/database-compat",t2="@firebase/functions",n2="@firebase/functions-compat",r2="@firebase/installations",s2="@firebase/installations-compat",i2="@firebase/messaging",o2="@firebase/messaging-compat",a2="@firebase/performance",l2="@firebase/performance-compat",u2="@firebase/remote-config",c2="@firebase/remote-config-compat",h2="@firebase/storage",d2="@firebase/storage-compat",f2="@firebase/firestore",m2="@firebase/ai",p2="@firebase/firestore-compat",g2="firebase",y2="12.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mc="[DEFAULT]",v2={[Lc]:"fire-core",[HE]:"fire-core-compat",[GE]:"fire-analytics",[WE]:"fire-analytics-compat",[KE]:"fire-app-check",[QE]:"fire-app-check-compat",[YE]:"fire-auth",[XE]:"fire-auth-compat",[JE]:"fire-rtdb",[ZE]:"fire-data-connect",[e2]:"fire-rtdb-compat",[t2]:"fire-fn",[n2]:"fire-fn-compat",[r2]:"fire-iid",[s2]:"fire-iid-compat",[i2]:"fire-fcm",[o2]:"fire-fcm-compat",[a2]:"fire-perf",[l2]:"fire-perf-compat",[u2]:"fire-rc",[c2]:"fire-rc-compat",[h2]:"fire-gcs",[d2]:"fire-gcs-compat",[f2]:"fire-fst",[p2]:"fire-fst-compat",[m2]:"fire-vertex","fire-js":"fire-js",[g2]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $a=new Map,_2=new Map,Oc=new Map;function Zm(t,e){try{t.container.addComponent(e)}catch(n){xn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function qa(t){const e=t.name;if(Oc.has(e))return xn.debug(`There were multiple attempts to register component ${e}.`),!1;Oc.set(e,t);for(const n of $a.values())Zm(n,t);for(const n of _2.values())Zm(n,t);return!0}function w2(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function x2(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Qn=new V0("app","Firebase",E2);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T2{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ki("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Qn.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S2=y2;function M0(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:Mc,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw Qn.create("bad-app-name",{appName:String(s)});if(n||(n=P0()),!n)throw Qn.create("no-options");const i=$a.get(s);if(i){if(Ba(n,i.options)&&Ba(r,i.config))return i;throw Qn.create("duplicate-app",{appName:s})}const o=new AE(s);for(const u of Oc.values())o.addComponent(u);const l=new T2(n,r,o);return $a.set(s,l),l}function I2(t=Mc){const e=$a.get(t);if(!e&&t===Mc&&P0())return M0();if(!e)throw Qn.create("no-app",{appName:t});return e}function ms(t,e,n){let r=v2[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const o=[`Unable to register library "${r}" with version "${e}":`];s&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),xn.warn(o.join(" "));return}qa(new Ki(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k2="firebase-heartbeat-database",A2=1,Yi="firebase-heartbeat-store";let Vu=null;function O0(){return Vu||(Vu=zE(k2,A2,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Yi)}catch(n){console.warn(n)}}}}).catch(t=>{throw Qn.create("idb-open",{originalErrorMessage:t.message})})),Vu}async function C2(t){try{const n=(await O0()).transaction(Yi),r=await n.objectStore(Yi).get(F0(t));return await n.done,r}catch(e){if(e instanceof Vs)xn.warn(e.message);else{const n=Qn.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});xn.warn(n.message)}}}async function ep(t,e){try{const r=(await O0()).transaction(Yi,"readwrite");await r.objectStore(Yi).put(e,F0(t)),await r.done}catch(n){if(n instanceof Vs)xn.warn(n.message);else{const r=Qn.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});xn.warn(r.message)}}}function F0(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b2=1024,N2=30;class R2{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new V2(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=tp();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>N2){const o=D2(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){xn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=tp(),{heartbeatsToSend:r,unsentEntries:s}=P2(this._heartbeatsCache.heartbeats),i=Ua(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return xn.warn(n),""}}}function tp(){return new Date().toISOString().substring(0,10)}function P2(t,e=b2){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),np(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),np(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class V2{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return _E()?wE().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await C2(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return ep(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return ep(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function np(t){return Ua(JSON.stringify({version:2,heartbeats:t})).length}function D2(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j2(t){qa(new Ki("platform-logger",e=>new $E(e),"PRIVATE")),qa(new Ki("heartbeat",e=>new R2(e),"PRIVATE")),ms(Lc,Jm,t),ms(Lc,Jm,"esm2020"),ms("fire-js","")}j2("");var rp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Kn,z0;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(E,v){function T(){}T.prototype=v.prototype,E.F=v.prototype,E.prototype=new T,E.prototype.constructor=E,E.D=function(k,I,A){for(var w=Array(arguments.length-2),ee=2;ee<arguments.length;ee++)w[ee-2]=arguments[ee];return v.prototype[I].apply(k,w)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(E,v,T){T||(T=0);const k=Array(16);if(typeof v=="string")for(var I=0;I<16;++I)k[I]=v.charCodeAt(T++)|v.charCodeAt(T++)<<8|v.charCodeAt(T++)<<16|v.charCodeAt(T++)<<24;else for(I=0;I<16;++I)k[I]=v[T++]|v[T++]<<8|v[T++]<<16|v[T++]<<24;v=E.g[0],T=E.g[1],I=E.g[2];let A=E.g[3],w;w=v+(A^T&(I^A))+k[0]+3614090360&4294967295,v=T+(w<<7&4294967295|w>>>25),w=A+(I^v&(T^I))+k[1]+3905402710&4294967295,A=v+(w<<12&4294967295|w>>>20),w=I+(T^A&(v^T))+k[2]+606105819&4294967295,I=A+(w<<17&4294967295|w>>>15),w=T+(v^I&(A^v))+k[3]+3250441966&4294967295,T=I+(w<<22&4294967295|w>>>10),w=v+(A^T&(I^A))+k[4]+4118548399&4294967295,v=T+(w<<7&4294967295|w>>>25),w=A+(I^v&(T^I))+k[5]+1200080426&4294967295,A=v+(w<<12&4294967295|w>>>20),w=I+(T^A&(v^T))+k[6]+2821735955&4294967295,I=A+(w<<17&4294967295|w>>>15),w=T+(v^I&(A^v))+k[7]+4249261313&4294967295,T=I+(w<<22&4294967295|w>>>10),w=v+(A^T&(I^A))+k[8]+1770035416&4294967295,v=T+(w<<7&4294967295|w>>>25),w=A+(I^v&(T^I))+k[9]+2336552879&4294967295,A=v+(w<<12&4294967295|w>>>20),w=I+(T^A&(v^T))+k[10]+4294925233&4294967295,I=A+(w<<17&4294967295|w>>>15),w=T+(v^I&(A^v))+k[11]+2304563134&4294967295,T=I+(w<<22&4294967295|w>>>10),w=v+(A^T&(I^A))+k[12]+1804603682&4294967295,v=T+(w<<7&4294967295|w>>>25),w=A+(I^v&(T^I))+k[13]+4254626195&4294967295,A=v+(w<<12&4294967295|w>>>20),w=I+(T^A&(v^T))+k[14]+2792965006&4294967295,I=A+(w<<17&4294967295|w>>>15),w=T+(v^I&(A^v))+k[15]+1236535329&4294967295,T=I+(w<<22&4294967295|w>>>10),w=v+(I^A&(T^I))+k[1]+4129170786&4294967295,v=T+(w<<5&4294967295|w>>>27),w=A+(T^I&(v^T))+k[6]+3225465664&4294967295,A=v+(w<<9&4294967295|w>>>23),w=I+(v^T&(A^v))+k[11]+643717713&4294967295,I=A+(w<<14&4294967295|w>>>18),w=T+(A^v&(I^A))+k[0]+3921069994&4294967295,T=I+(w<<20&4294967295|w>>>12),w=v+(I^A&(T^I))+k[5]+3593408605&4294967295,v=T+(w<<5&4294967295|w>>>27),w=A+(T^I&(v^T))+k[10]+38016083&4294967295,A=v+(w<<9&4294967295|w>>>23),w=I+(v^T&(A^v))+k[15]+3634488961&4294967295,I=A+(w<<14&4294967295|w>>>18),w=T+(A^v&(I^A))+k[4]+3889429448&4294967295,T=I+(w<<20&4294967295|w>>>12),w=v+(I^A&(T^I))+k[9]+568446438&4294967295,v=T+(w<<5&4294967295|w>>>27),w=A+(T^I&(v^T))+k[14]+3275163606&4294967295,A=v+(w<<9&4294967295|w>>>23),w=I+(v^T&(A^v))+k[3]+4107603335&4294967295,I=A+(w<<14&4294967295|w>>>18),w=T+(A^v&(I^A))+k[8]+1163531501&4294967295,T=I+(w<<20&4294967295|w>>>12),w=v+(I^A&(T^I))+k[13]+2850285829&4294967295,v=T+(w<<5&4294967295|w>>>27),w=A+(T^I&(v^T))+k[2]+4243563512&4294967295,A=v+(w<<9&4294967295|w>>>23),w=I+(v^T&(A^v))+k[7]+1735328473&4294967295,I=A+(w<<14&4294967295|w>>>18),w=T+(A^v&(I^A))+k[12]+2368359562&4294967295,T=I+(w<<20&4294967295|w>>>12),w=v+(T^I^A)+k[5]+4294588738&4294967295,v=T+(w<<4&4294967295|w>>>28),w=A+(v^T^I)+k[8]+2272392833&4294967295,A=v+(w<<11&4294967295|w>>>21),w=I+(A^v^T)+k[11]+1839030562&4294967295,I=A+(w<<16&4294967295|w>>>16),w=T+(I^A^v)+k[14]+4259657740&4294967295,T=I+(w<<23&4294967295|w>>>9),w=v+(T^I^A)+k[1]+2763975236&4294967295,v=T+(w<<4&4294967295|w>>>28),w=A+(v^T^I)+k[4]+1272893353&4294967295,A=v+(w<<11&4294967295|w>>>21),w=I+(A^v^T)+k[7]+4139469664&4294967295,I=A+(w<<16&4294967295|w>>>16),w=T+(I^A^v)+k[10]+3200236656&4294967295,T=I+(w<<23&4294967295|w>>>9),w=v+(T^I^A)+k[13]+681279174&4294967295,v=T+(w<<4&4294967295|w>>>28),w=A+(v^T^I)+k[0]+3936430074&4294967295,A=v+(w<<11&4294967295|w>>>21),w=I+(A^v^T)+k[3]+3572445317&4294967295,I=A+(w<<16&4294967295|w>>>16),w=T+(I^A^v)+k[6]+76029189&4294967295,T=I+(w<<23&4294967295|w>>>9),w=v+(T^I^A)+k[9]+3654602809&4294967295,v=T+(w<<4&4294967295|w>>>28),w=A+(v^T^I)+k[12]+3873151461&4294967295,A=v+(w<<11&4294967295|w>>>21),w=I+(A^v^T)+k[15]+530742520&4294967295,I=A+(w<<16&4294967295|w>>>16),w=T+(I^A^v)+k[2]+3299628645&4294967295,T=I+(w<<23&4294967295|w>>>9),w=v+(I^(T|~A))+k[0]+4096336452&4294967295,v=T+(w<<6&4294967295|w>>>26),w=A+(T^(v|~I))+k[7]+1126891415&4294967295,A=v+(w<<10&4294967295|w>>>22),w=I+(v^(A|~T))+k[14]+2878612391&4294967295,I=A+(w<<15&4294967295|w>>>17),w=T+(A^(I|~v))+k[5]+4237533241&4294967295,T=I+(w<<21&4294967295|w>>>11),w=v+(I^(T|~A))+k[12]+1700485571&4294967295,v=T+(w<<6&4294967295|w>>>26),w=A+(T^(v|~I))+k[3]+2399980690&4294967295,A=v+(w<<10&4294967295|w>>>22),w=I+(v^(A|~T))+k[10]+4293915773&4294967295,I=A+(w<<15&4294967295|w>>>17),w=T+(A^(I|~v))+k[1]+2240044497&4294967295,T=I+(w<<21&4294967295|w>>>11),w=v+(I^(T|~A))+k[8]+1873313359&4294967295,v=T+(w<<6&4294967295|w>>>26),w=A+(T^(v|~I))+k[15]+4264355552&4294967295,A=v+(w<<10&4294967295|w>>>22),w=I+(v^(A|~T))+k[6]+2734768916&4294967295,I=A+(w<<15&4294967295|w>>>17),w=T+(A^(I|~v))+k[13]+1309151649&4294967295,T=I+(w<<21&4294967295|w>>>11),w=v+(I^(T|~A))+k[4]+4149444226&4294967295,v=T+(w<<6&4294967295|w>>>26),w=A+(T^(v|~I))+k[11]+3174756917&4294967295,A=v+(w<<10&4294967295|w>>>22),w=I+(v^(A|~T))+k[2]+718787259&4294967295,I=A+(w<<15&4294967295|w>>>17),w=T+(A^(I|~v))+k[9]+3951481745&4294967295,E.g[0]=E.g[0]+v&4294967295,E.g[1]=E.g[1]+(I+(w<<21&4294967295|w>>>11))&4294967295,E.g[2]=E.g[2]+I&4294967295,E.g[3]=E.g[3]+A&4294967295}r.prototype.v=function(E,v){v===void 0&&(v=E.length);const T=v-this.blockSize,k=this.C;let I=this.h,A=0;for(;A<v;){if(I==0)for(;A<=T;)s(this,E,A),A+=this.blockSize;if(typeof E=="string"){for(;A<v;)if(k[I++]=E.charCodeAt(A++),I==this.blockSize){s(this,k),I=0;break}}else for(;A<v;)if(k[I++]=E[A++],I==this.blockSize){s(this,k),I=0;break}}this.h=I,this.o+=v},r.prototype.A=function(){var E=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);E[0]=128;for(var v=1;v<E.length-8;++v)E[v]=0;v=this.o*8;for(var T=E.length-8;T<E.length;++T)E[T]=v&255,v/=256;for(this.v(E),E=Array(16),v=0,T=0;T<4;++T)for(let k=0;k<32;k+=8)E[v++]=this.g[T]>>>k&255;return E};function i(E,v){var T=l;return Object.prototype.hasOwnProperty.call(T,E)?T[E]:T[E]=v(E)}function o(E,v){this.h=v;const T=[];let k=!0;for(let I=E.length-1;I>=0;I--){const A=E[I]|0;k&&A==v||(T[I]=A,k=!1)}this.g=T}var l={};function u(E){return-128<=E&&E<128?i(E,function(v){return new o([v|0],v<0?-1:0)}):new o([E|0],E<0?-1:0)}function h(E){if(isNaN(E)||!isFinite(E))return m;if(E<0)return D(h(-E));const v=[];let T=1;for(let k=0;E>=T;k++)v[k]=E/T|0,T*=4294967296;return new o(v,0)}function p(E,v){if(E.length==0)throw Error("number format error: empty string");if(v=v||10,v<2||36<v)throw Error("radix out of range: "+v);if(E.charAt(0)=="-")return D(p(E.substring(1),v));if(E.indexOf("-")>=0)throw Error('number format error: interior "-" character');const T=h(Math.pow(v,8));let k=m;for(let A=0;A<E.length;A+=8){var I=Math.min(8,E.length-A);const w=parseInt(E.substring(A,A+I),v);I<8?(I=h(Math.pow(v,I)),k=k.j(I).add(h(w))):(k=k.j(T),k=k.add(h(w)))}return k}var m=u(0),g=u(1),S=u(16777216);t=o.prototype,t.m=function(){if(N(this))return-D(this).m();let E=0,v=1;for(let T=0;T<this.g.length;T++){const k=this.i(T);E+=(k>=0?k:4294967296+k)*v,v*=4294967296}return E},t.toString=function(E){if(E=E||10,E<2||36<E)throw Error("radix out of range: "+E);if(b(this))return"0";if(N(this))return"-"+D(this).toString(E);const v=h(Math.pow(E,6));var T=this;let k="";for(;;){const I=V(T,v).g;T=_(T,I.j(v));let A=((T.g.length>0?T.g[0]:T.h)>>>0).toString(E);if(T=I,b(T))return A+k;for(;A.length<6;)A="0"+A;k=A+k}},t.i=function(E){return E<0?0:E<this.g.length?this.g[E]:this.h};function b(E){if(E.h!=0)return!1;for(let v=0;v<E.g.length;v++)if(E.g[v]!=0)return!1;return!0}function N(E){return E.h==-1}t.l=function(E){return E=_(this,E),N(E)?-1:b(E)?0:1};function D(E){const v=E.g.length,T=[];for(let k=0;k<v;k++)T[k]=~E.g[k];return new o(T,~E.h).add(g)}t.abs=function(){return N(this)?D(this):this},t.add=function(E){const v=Math.max(this.g.length,E.g.length),T=[];let k=0;for(let I=0;I<=v;I++){let A=k+(this.i(I)&65535)+(E.i(I)&65535),w=(A>>>16)+(this.i(I)>>>16)+(E.i(I)>>>16);k=w>>>16,A&=65535,w&=65535,T[I]=w<<16|A}return new o(T,T[T.length-1]&-2147483648?-1:0)};function _(E,v){return E.add(D(v))}t.j=function(E){if(b(this)||b(E))return m;if(N(this))return N(E)?D(this).j(D(E)):D(D(this).j(E));if(N(E))return D(this.j(D(E)));if(this.l(S)<0&&E.l(S)<0)return h(this.m()*E.m());const v=this.g.length+E.g.length,T=[];for(var k=0;k<2*v;k++)T[k]=0;for(k=0;k<this.g.length;k++)for(let I=0;I<E.g.length;I++){const A=this.i(k)>>>16,w=this.i(k)&65535,ee=E.i(I)>>>16,Ve=E.i(I)&65535;T[2*k+2*I]+=w*Ve,x(T,2*k+2*I),T[2*k+2*I+1]+=A*Ve,x(T,2*k+2*I+1),T[2*k+2*I+1]+=w*ee,x(T,2*k+2*I+1),T[2*k+2*I+2]+=A*ee,x(T,2*k+2*I+2)}for(E=0;E<v;E++)T[E]=T[2*E+1]<<16|T[2*E];for(E=v;E<2*v;E++)T[E]=0;return new o(T,0)};function x(E,v){for(;(E[v]&65535)!=E[v];)E[v+1]+=E[v]>>>16,E[v]&=65535,v++}function C(E,v){this.g=E,this.h=v}function V(E,v){if(b(v))throw Error("division by zero");if(b(E))return new C(m,m);if(N(E))return v=V(D(E),v),new C(D(v.g),D(v.h));if(N(v))return v=V(E,D(v)),new C(D(v.g),v.h);if(E.g.length>30){if(N(E)||N(v))throw Error("slowDivide_ only works with positive integers.");for(var T=g,k=v;k.l(E)<=0;)T=M(T),k=M(k);var I=F(T,1),A=F(k,1);for(k=F(k,2),T=F(T,2);!b(k);){var w=A.add(k);w.l(E)<=0&&(I=I.add(T),A=w),k=F(k,1),T=F(T,1)}return v=_(E,I.j(v)),new C(I,v)}for(I=m;E.l(v)>=0;){for(T=Math.max(1,Math.floor(E.m()/v.m())),k=Math.ceil(Math.log(T)/Math.LN2),k=k<=48?1:Math.pow(2,k-48),A=h(T),w=A.j(v);N(w)||w.l(E)>0;)T-=k,A=h(T),w=A.j(v);b(A)&&(A=g),I=I.add(A),E=_(E,w)}return new C(I,E)}t.B=function(E){return V(this,E).h},t.and=function(E){const v=Math.max(this.g.length,E.g.length),T=[];for(let k=0;k<v;k++)T[k]=this.i(k)&E.i(k);return new o(T,this.h&E.h)},t.or=function(E){const v=Math.max(this.g.length,E.g.length),T=[];for(let k=0;k<v;k++)T[k]=this.i(k)|E.i(k);return new o(T,this.h|E.h)},t.xor=function(E){const v=Math.max(this.g.length,E.g.length),T=[];for(let k=0;k<v;k++)T[k]=this.i(k)^E.i(k);return new o(T,this.h^E.h)};function M(E){const v=E.g.length+1,T=[];for(let k=0;k<v;k++)T[k]=E.i(k)<<1|E.i(k-1)>>>31;return new o(T,E.h)}function F(E,v){const T=v>>5;v%=32;const k=E.g.length-T,I=[];for(let A=0;A<k;A++)I[A]=v>0?E.i(A+T)>>>v|E.i(A+T+1)<<32-v:E.i(A+T);return new o(I,E.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,z0=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=h,o.fromString=p,Kn=o}).apply(typeof rp<"u"?rp:typeof self<"u"?self:typeof window<"u"?window:{});var Go=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var U0,fi,B0,ca,Fc,$0,q0,H0;(function(){var t,e=Object.defineProperty;function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof Go=="object"&&Go];for(var c=0;c<a.length;++c){var f=a[c];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function s(a,c){if(c)e:{var f=r;a=a.split(".");for(var y=0;y<a.length-1;y++){var R=a[y];if(!(R in f))break e;f=f[R]}a=a[a.length-1],y=f[a],c=c(y),c!=y&&c!=null&&e(f,a,{configurable:!0,writable:!0,value:c})}}s("Symbol.dispose",function(a){return a||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(a){return a||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(a){return a||function(c){var f=[],y;for(y in c)Object.prototype.hasOwnProperty.call(c,y)&&f.push([y,c[y]]);return f}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},o=this||self;function l(a){var c=typeof a;return c=="object"&&a!=null||c=="function"}function u(a,c,f){return a.call.apply(a.bind,arguments)}function h(a,c,f){return h=u,h.apply(null,arguments)}function p(a,c){var f=Array.prototype.slice.call(arguments,1);return function(){var y=f.slice();return y.push.apply(y,arguments),a.apply(this,y)}}function m(a,c){function f(){}f.prototype=c.prototype,a.Z=c.prototype,a.prototype=new f,a.prototype.constructor=a,a.Ob=function(y,R,P){for(var z=Array(arguments.length-2),Z=2;Z<arguments.length;Z++)z[Z-2]=arguments[Z];return c.prototype[R].apply(y,z)}}var g=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?a=>a&&AsyncContext.Snapshot.wrap(a):a=>a;function S(a){const c=a.length;if(c>0){const f=Array(c);for(let y=0;y<c;y++)f[y]=a[y];return f}return[]}function b(a,c){for(let y=1;y<arguments.length;y++){const R=arguments[y];var f=typeof R;if(f=f!="object"?f:R?Array.isArray(R)?"array":f:"null",f=="array"||f=="object"&&typeof R.length=="number"){f=a.length||0;const P=R.length||0;a.length=f+P;for(let z=0;z<P;z++)a[f+z]=R[z]}else a.push(R)}}class N{constructor(c,f){this.i=c,this.j=f,this.h=0,this.g=null}get(){let c;return this.h>0?(this.h--,c=this.g,this.g=c.next,c.next=null):c=this.i(),c}}function D(a){o.setTimeout(()=>{throw a},0)}function _(){var a=E;let c=null;return a.g&&(c=a.g,a.g=a.g.next,a.g||(a.h=null),c.next=null),c}class x{constructor(){this.h=this.g=null}add(c,f){const y=C.get();y.set(c,f),this.h?this.h.next=y:this.g=y,this.h=y}}var C=new N(()=>new V,a=>a.reset());class V{constructor(){this.next=this.g=this.h=null}set(c,f){this.h=c,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let M,F=!1,E=new x,v=()=>{const a=Promise.resolve(void 0);M=()=>{a.then(T)}};function T(){for(var a;a=_();){try{a.h.call(a.g)}catch(f){D(f)}var c=C;c.j(a),c.h<100&&(c.h++,a.next=c.g,c.g=a)}F=!1}function k(){this.u=this.u,this.C=this.C}k.prototype.u=!1,k.prototype.dispose=function(){this.u||(this.u=!0,this.N())},k.prototype[Symbol.dispose]=function(){this.dispose()},k.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function I(a,c){this.type=a,this.g=this.target=c,this.defaultPrevented=!1}I.prototype.h=function(){this.defaultPrevented=!0};var A=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var a=!1,c=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const f=()=>{};o.addEventListener("test",f,c),o.removeEventListener("test",f,c)}catch{}return a}();function w(a){return/^[\s\xa0]*$/.test(a)}function ee(a,c){I.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a&&this.init(a,c)}m(ee,I),ee.prototype.init=function(a,c){const f=this.type=a.type,y=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;this.target=a.target||a.srcElement,this.g=c,c=a.relatedTarget,c||(f=="mouseover"?c=a.fromElement:f=="mouseout"&&(c=a.toElement)),this.relatedTarget=c,y?(this.clientX=y.clientX!==void 0?y.clientX:y.pageX,this.clientY=y.clientY!==void 0?y.clientY:y.pageY,this.screenX=y.screenX||0,this.screenY=y.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=a.pointerType,this.state=a.state,this.i=a,a.defaultPrevented&&ee.Z.h.call(this)},ee.prototype.h=function(){ee.Z.h.call(this);const a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var Ve="closure_listenable_"+(Math.random()*1e6|0),le=0;function Oe(a,c,f,y,R){this.listener=a,this.proxy=null,this.src=c,this.type=f,this.capture=!!y,this.ha=R,this.key=++le,this.da=this.fa=!1}function U(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function Q(a,c,f){for(const y in a)c.call(f,a[y],y,a)}function J(a,c){for(const f in a)c.call(void 0,a[f],f,a)}function me(a){const c={};for(const f in a)c[f]=a[f];return c}const Te="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function X(a,c){let f,y;for(let R=1;R<arguments.length;R++){y=arguments[R];for(f in y)a[f]=y[f];for(let P=0;P<Te.length;P++)f=Te[P],Object.prototype.hasOwnProperty.call(y,f)&&(a[f]=y[f])}}function de(a){this.src=a,this.g={},this.h=0}de.prototype.add=function(a,c,f,y,R){const P=a.toString();a=this.g[P],a||(a=this.g[P]=[],this.h++);const z=ue(a,c,y,R);return z>-1?(c=a[z],f||(c.fa=!1)):(c=new Oe(c,this.src,P,!!y,R),c.fa=f,a.push(c)),c};function Ge(a,c){const f=c.type;if(f in a.g){var y=a.g[f],R=Array.prototype.indexOf.call(y,c,void 0),P;(P=R>=0)&&Array.prototype.splice.call(y,R,1),P&&(U(c),a.g[f].length==0&&(delete a.g[f],a.h--))}}function ue(a,c,f,y){for(let R=0;R<a.length;++R){const P=a[R];if(!P.da&&P.listener==c&&P.capture==!!f&&P.ha==y)return R}return-1}var pt="closure_lm_"+(Math.random()*1e6|0),Ur={};function Qt(a,c,f,y,R){if(Array.isArray(c)){for(let P=0;P<c.length;P++)Qt(a,c[P],f,y,R);return null}return f=Ud(f),a&&a[Ve]?a.J(c,f,l(y)?!!y.capture:!1,R):A_(a,c,f,!1,y,R)}function A_(a,c,f,y,R,P){if(!c)throw Error("Invalid event type");const z=l(R)?!!R.capture:!!R;let Z=Fl(a);if(Z||(a[pt]=Z=new de(a)),f=Z.add(c,f,y,z,P),f.proxy)return f;if(y=C_(),f.proxy=y,y.src=a,y.listener=f,a.addEventListener)A||(R=z),R===void 0&&(R=!1),a.addEventListener(c.toString(),y,R);else if(a.attachEvent)a.attachEvent(zd(c.toString()),y);else if(a.addListener&&a.removeListener)a.addListener(y);else throw Error("addEventListener and attachEvent are unavailable.");return f}function C_(){function a(f){return c.call(a.src,a.listener,f)}const c=b_;return a}function Fd(a,c,f,y,R){if(Array.isArray(c))for(var P=0;P<c.length;P++)Fd(a,c[P],f,y,R);else y=l(y)?!!y.capture:!!y,f=Ud(f),a&&a[Ve]?(a=a.i,P=String(c).toString(),P in a.g&&(c=a.g[P],f=ue(c,f,y,R),f>-1&&(U(c[f]),Array.prototype.splice.call(c,f,1),c.length==0&&(delete a.g[P],a.h--)))):a&&(a=Fl(a))&&(c=a.g[c.toString()],a=-1,c&&(a=ue(c,f,y,R)),(f=a>-1?c[a]:null)&&Ol(f))}function Ol(a){if(typeof a!="number"&&a&&!a.da){var c=a.src;if(c&&c[Ve])Ge(c.i,a);else{var f=a.type,y=a.proxy;c.removeEventListener?c.removeEventListener(f,y,a.capture):c.detachEvent?c.detachEvent(zd(f),y):c.addListener&&c.removeListener&&c.removeListener(y),(f=Fl(c))?(Ge(f,a),f.h==0&&(f.src=null,c[pt]=null)):U(a)}}}function zd(a){return a in Ur?Ur[a]:Ur[a]="on"+a}function b_(a,c){if(a.da)a=!0;else{c=new ee(c,this);const f=a.listener,y=a.ha||a.src;a.fa&&Ol(a),a=f.call(y,c)}return a}function Fl(a){return a=a[pt],a instanceof de?a:null}var zl="__closure_events_fn_"+(Math.random()*1e9>>>0);function Ud(a){return typeof a=="function"?a:(a[zl]||(a[zl]=function(c){return a.handleEvent(c)}),a[zl])}function et(){k.call(this),this.i=new de(this),this.M=this,this.G=null}m(et,k),et.prototype[Ve]=!0,et.prototype.removeEventListener=function(a,c,f,y){Fd(this,a,c,f,y)};function lt(a,c){var f,y=a.G;if(y)for(f=[];y;y=y.G)f.push(y);if(a=a.M,y=c.type||c,typeof c=="string")c=new I(c,a);else if(c instanceof I)c.target=c.target||a;else{var R=c;c=new I(y,a),X(c,R)}R=!0;let P,z;if(f)for(z=f.length-1;z>=0;z--)P=c.g=f[z],R=vo(P,y,!0,c)&&R;if(P=c.g=a,R=vo(P,y,!0,c)&&R,R=vo(P,y,!1,c)&&R,f)for(z=0;z<f.length;z++)P=c.g=f[z],R=vo(P,y,!1,c)&&R}et.prototype.N=function(){if(et.Z.N.call(this),this.i){var a=this.i;for(const c in a.g){const f=a.g[c];for(let y=0;y<f.length;y++)U(f[y]);delete a.g[c],a.h--}}this.G=null},et.prototype.J=function(a,c,f,y){return this.i.add(String(a),c,!1,f,y)},et.prototype.K=function(a,c,f,y){return this.i.add(String(a),c,!0,f,y)};function vo(a,c,f,y){if(c=a.i.g[String(c)],!c)return!0;c=c.concat();let R=!0;for(let P=0;P<c.length;++P){const z=c[P];if(z&&!z.da&&z.capture==f){const Z=z.listener,Fe=z.ha||z.src;z.fa&&Ge(a.i,z),R=Z.call(Fe,y)!==!1&&R}}return R&&!y.defaultPrevented}function N_(a,c){if(typeof a!="function")if(a&&typeof a.handleEvent=="function")a=h(a.handleEvent,a);else throw Error("Invalid listener argument");return Number(c)>2147483647?-1:o.setTimeout(a,c||0)}function Bd(a){a.g=N_(()=>{a.g=null,a.i&&(a.i=!1,Bd(a))},a.l);const c=a.h;a.h=null,a.m.apply(null,c)}class R_ extends k{constructor(c,f){super(),this.m=c,this.l=f,this.h=null,this.i=!1,this.g=null}j(c){this.h=arguments,this.g?this.i=!0:Bd(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Fs(a){k.call(this),this.h=a,this.g={}}m(Fs,k);var $d=[];function qd(a){Q(a.g,function(c,f){this.g.hasOwnProperty(f)&&Ol(c)},a),a.g={}}Fs.prototype.N=function(){Fs.Z.N.call(this),qd(this)},Fs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ul=o.JSON.stringify,P_=o.JSON.parse,V_=class{stringify(a){return o.JSON.stringify(a,void 0)}parse(a){return o.JSON.parse(a,void 0)}};function Hd(){}function Wd(){}var zs={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Bl(){I.call(this,"d")}m(Bl,I);function $l(){I.call(this,"c")}m($l,I);var cr={},Gd=null;function _o(){return Gd=Gd||new et}cr.Ia="serverreachability";function Qd(a){I.call(this,cr.Ia,a)}m(Qd,I);function Us(a){const c=_o();lt(c,new Qd(c))}cr.STAT_EVENT="statevent";function Kd(a,c){I.call(this,cr.STAT_EVENT,a),this.stat=c}m(Kd,I);function ut(a){const c=_o();lt(c,new Kd(c,a))}cr.Ja="timingevent";function Yd(a,c){I.call(this,cr.Ja,a),this.size=c}m(Yd,I);function Bs(a,c){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){a()},c)}function $s(){this.g=!0}$s.prototype.ua=function(){this.g=!1};function D_(a,c,f,y,R,P){a.info(function(){if(a.g)if(P){var z="",Z=P.split("&");for(let fe=0;fe<Z.length;fe++){var Fe=Z[fe].split("=");if(Fe.length>1){const $e=Fe[0];Fe=Fe[1];const Yt=$e.split("_");z=Yt.length>=2&&Yt[1]=="type"?z+($e+"="+Fe+"&"):z+($e+"=redacted&")}}}else z=null;else z=P;return"XMLHTTP REQ ("+y+") [attempt "+R+"]: "+c+`
`+f+`
`+z})}function j_(a,c,f,y,R,P,z){a.info(function(){return"XMLHTTP RESP ("+y+") [ attempt "+R+"]: "+c+`
`+f+`
`+P+" "+z})}function Br(a,c,f,y){a.info(function(){return"XMLHTTP TEXT ("+c+"): "+M_(a,f)+(y?" "+y:"")})}function L_(a,c){a.info(function(){return"TIMEOUT: "+c})}$s.prototype.info=function(){};function M_(a,c){if(!a.g)return c;if(!c)return null;try{const P=JSON.parse(c);if(P){for(a=0;a<P.length;a++)if(Array.isArray(P[a])){var f=P[a];if(!(f.length<2)){var y=f[1];if(Array.isArray(y)&&!(y.length<1)){var R=y[0];if(R!="noop"&&R!="stop"&&R!="close")for(let z=1;z<y.length;z++)y[z]=""}}}}return Ul(P)}catch{return c}}var wo={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Xd={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Jd;function ql(){}m(ql,Hd),ql.prototype.g=function(){return new XMLHttpRequest},Jd=new ql;function qs(a){return encodeURIComponent(String(a))}function O_(a){var c=1;a=a.split(":");const f=[];for(;c>0&&a.length;)f.push(a.shift()),c--;return a.length&&f.push(a.join(":")),f}function In(a,c,f,y){this.j=a,this.i=c,this.l=f,this.S=y||1,this.V=new Fs(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Zd}function Zd(){this.i=null,this.g="",this.h=!1}var ef={},Hl={};function Wl(a,c,f){a.M=1,a.A=Eo(Kt(c)),a.u=f,a.R=!0,tf(a,null)}function tf(a,c){a.F=Date.now(),xo(a),a.B=Kt(a.A);var f=a.B,y=a.S;Array.isArray(y)||(y=[String(y)]),pf(f.i,"t",y),a.C=0,f=a.j.L,a.h=new Zd,a.g=Vf(a.j,f?c:null,!a.u),a.P>0&&(a.O=new R_(h(a.Y,a,a.g),a.P)),c=a.V,f=a.g,y=a.ba;var R="readystatechange";Array.isArray(R)||(R&&($d[0]=R.toString()),R=$d);for(let P=0;P<R.length;P++){const z=Qt(f,R[P],y||c.handleEvent,!1,c.h||c);if(!z)break;c.g[z.key]=z}c=a.J?me(a.J):{},a.u?(a.v||(a.v="POST"),c["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.B,a.v,a.u,c)):(a.v="GET",a.g.ea(a.B,a.v,null,c)),Us(),D_(a.i,a.v,a.B,a.l,a.S,a.u)}In.prototype.ba=function(a){a=a.target;const c=this.O;c&&Cn(a)==3?c.j():this.Y(a)},In.prototype.Y=function(a){try{if(a==this.g)e:{const Z=Cn(this.g),Fe=this.g.ya(),fe=this.g.ca();if(!(Z<3)&&(Z!=3||this.g&&(this.h.h||this.g.la()||Ef(this.g)))){this.K||Z!=4||Fe==7||(Fe==8||fe<=0?Us(3):Us(2)),Gl(this);var c=this.g.ca();this.X=c;var f=F_(this);if(this.o=c==200,j_(this.i,this.v,this.B,this.l,this.S,Z,c),this.o){if(this.U&&!this.L){t:{if(this.g){var y,R=this.g;if((y=R.g?R.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(y)){var P=y;break t}}P=null}if(a=P)Br(this.i,this.l,a,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ql(this,a);else{this.o=!1,this.m=3,ut(12),hr(this),Hs(this);break e}}if(this.R){a=!0;let $e;for(;!this.K&&this.C<f.length;)if($e=z_(this,f),$e==Hl){Z==4&&(this.m=4,ut(14),a=!1),Br(this.i,this.l,null,"[Incomplete Response]");break}else if($e==ef){this.m=4,ut(15),Br(this.i,this.l,f,"[Invalid Chunk]"),a=!1;break}else Br(this.i,this.l,$e,null),Ql(this,$e);if(nf(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Z!=4||f.length!=0||this.h.h||(this.m=1,ut(16),a=!1),this.o=this.o&&a,!a)Br(this.i,this.l,f,"[Invalid Chunked Response]"),hr(this),Hs(this);else if(f.length>0&&!this.W){this.W=!0;var z=this.j;z.g==this&&z.aa&&!z.P&&(z.j.info("Great, no buffering proxy detected. Bytes received: "+f.length),nu(z),z.P=!0,ut(11))}}else Br(this.i,this.l,f,null),Ql(this,f);Z==4&&hr(this),this.o&&!this.K&&(Z==4?bf(this.j,this):(this.o=!1,xo(this)))}else e1(this.g),c==400&&f.indexOf("Unknown SID")>0?(this.m=3,ut(12)):(this.m=0,ut(13)),hr(this),Hs(this)}}}catch{}finally{}};function F_(a){if(!nf(a))return a.g.la();const c=Ef(a.g);if(c==="")return"";let f="";const y=c.length,R=Cn(a.g)==4;if(!a.h.i){if(typeof TextDecoder>"u")return hr(a),Hs(a),"";a.h.i=new o.TextDecoder}for(let P=0;P<y;P++)a.h.h=!0,f+=a.h.i.decode(c[P],{stream:!(R&&P==y-1)});return c.length=0,a.h.g+=f,a.C=0,a.h.g}function nf(a){return a.g?a.v=="GET"&&a.M!=2&&a.j.Aa:!1}function z_(a,c){var f=a.C,y=c.indexOf(`
`,f);return y==-1?Hl:(f=Number(c.substring(f,y)),isNaN(f)?ef:(y+=1,y+f>c.length?Hl:(c=c.slice(y,y+f),a.C=y+f,c)))}In.prototype.cancel=function(){this.K=!0,hr(this)};function xo(a){a.T=Date.now()+a.H,rf(a,a.H)}function rf(a,c){if(a.D!=null)throw Error("WatchDog timer not null");a.D=Bs(h(a.aa,a),c)}function Gl(a){a.D&&(o.clearTimeout(a.D),a.D=null)}In.prototype.aa=function(){this.D=null;const a=Date.now();a-this.T>=0?(L_(this.i,this.B),this.M!=2&&(Us(),ut(17)),hr(this),this.m=2,Hs(this)):rf(this,this.T-a)};function Hs(a){a.j.I==0||a.K||bf(a.j,a)}function hr(a){Gl(a);var c=a.O;c&&typeof c.dispose=="function"&&c.dispose(),a.O=null,qd(a.V),a.g&&(c=a.g,a.g=null,c.abort(),c.dispose())}function Ql(a,c){try{var f=a.j;if(f.I!=0&&(f.g==a||Kl(f.h,a))){if(!a.L&&Kl(f.h,a)&&f.I==3){try{var y=f.Ba.g.parse(c)}catch{y=null}if(Array.isArray(y)&&y.length==3){var R=y;if(R[0]==0){e:if(!f.v){if(f.g)if(f.g.F+3e3<a.F)Ao(f),Io(f);else break e;tu(f),ut(18)}}else f.xa=R[1],0<f.xa-f.K&&R[2]<37500&&f.F&&f.A==0&&!f.C&&(f.C=Bs(h(f.Va,f),6e3));af(f.h)<=1&&f.ta&&(f.ta=void 0)}else fr(f,11)}else if((a.L||f.g==a)&&Ao(f),!w(c))for(R=f.Ba.g.parse(c),c=0;c<R.length;c++){let fe=R[c];const $e=fe[0];if(!($e<=f.K))if(f.K=$e,fe=fe[1],f.I==2)if(fe[0]=="c"){f.M=fe[1],f.ba=fe[2];const Yt=fe[3];Yt!=null&&(f.ka=Yt,f.j.info("VER="+f.ka));const mr=fe[4];mr!=null&&(f.za=mr,f.j.info("SVER="+f.za));const bn=fe[5];bn!=null&&typeof bn=="number"&&bn>0&&(y=1.5*bn,f.O=y,f.j.info("backChannelRequestTimeoutMs_="+y)),y=f;const Nn=a.g;if(Nn){const bo=Nn.g?Nn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(bo){var P=y.h;P.g||bo.indexOf("spdy")==-1&&bo.indexOf("quic")==-1&&bo.indexOf("h2")==-1||(P.j=P.l,P.g=new Set,P.h&&(Yl(P,P.h),P.h=null))}if(y.G){const ru=Nn.g?Nn.g.getResponseHeader("X-HTTP-Session-Id"):null;ru&&(y.wa=ru,ye(y.J,y.G,ru))}}f.I=3,f.l&&f.l.ra(),f.aa&&(f.T=Date.now()-a.F,f.j.info("Handshake RTT: "+f.T+"ms")),y=f;var z=a;if(y.na=Pf(y,y.L?y.ba:null,y.W),z.L){lf(y.h,z);var Z=z,Fe=y.O;Fe&&(Z.H=Fe),Z.D&&(Gl(Z),xo(Z)),y.g=z}else Af(y);f.i.length>0&&ko(f)}else fe[0]!="stop"&&fe[0]!="close"||fr(f,7);else f.I==3&&(fe[0]=="stop"||fe[0]=="close"?fe[0]=="stop"?fr(f,7):eu(f):fe[0]!="noop"&&f.l&&f.l.qa(fe),f.A=0)}}Us(4)}catch{}}var U_=class{constructor(a,c){this.g=a,this.map=c}};function sf(a){this.l=a||10,o.PerformanceNavigationTiming?(a=o.performance.getEntriesByType("navigation"),a=a.length>0&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function of(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function af(a){return a.h?1:a.g?a.g.size:0}function Kl(a,c){return a.h?a.h==c:a.g?a.g.has(c):!1}function Yl(a,c){a.g?a.g.add(c):a.h=c}function lf(a,c){a.h&&a.h==c?a.h=null:a.g&&a.g.has(c)&&a.g.delete(c)}sf.prototype.cancel=function(){if(this.i=uf(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function uf(a){if(a.h!=null)return a.i.concat(a.h.G);if(a.g!=null&&a.g.size!==0){let c=a.i;for(const f of a.g.values())c=c.concat(f.G);return c}return S(a.i)}var cf=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function B_(a,c){if(a){a=a.split("&");for(let f=0;f<a.length;f++){const y=a[f].indexOf("=");let R,P=null;y>=0?(R=a[f].substring(0,y),P=a[f].substring(y+1)):R=a[f],c(R,P?decodeURIComponent(P.replace(/\+/g," ")):"")}}}function kn(a){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let c;a instanceof kn?(this.l=a.l,Ws(this,a.j),this.o=a.o,this.g=a.g,Gs(this,a.u),this.h=a.h,Xl(this,gf(a.i)),this.m=a.m):a&&(c=String(a).match(cf))?(this.l=!1,Ws(this,c[1]||"",!0),this.o=Qs(c[2]||""),this.g=Qs(c[3]||"",!0),Gs(this,c[4]),this.h=Qs(c[5]||"",!0),Xl(this,c[6]||"",!0),this.m=Qs(c[7]||"")):(this.l=!1,this.i=new Ys(null,this.l))}kn.prototype.toString=function(){const a=[];var c=this.j;c&&a.push(Ks(c,hf,!0),":");var f=this.g;return(f||c=="file")&&(a.push("//"),(c=this.o)&&a.push(Ks(c,hf,!0),"@"),a.push(qs(f).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.u,f!=null&&a.push(":",String(f))),(f=this.h)&&(this.g&&f.charAt(0)!="/"&&a.push("/"),a.push(Ks(f,f.charAt(0)=="/"?H_:q_,!0))),(f=this.i.toString())&&a.push("?",f),(f=this.m)&&a.push("#",Ks(f,G_)),a.join("")},kn.prototype.resolve=function(a){const c=Kt(this);let f=!!a.j;f?Ws(c,a.j):f=!!a.o,f?c.o=a.o:f=!!a.g,f?c.g=a.g:f=a.u!=null;var y=a.h;if(f)Gs(c,a.u);else if(f=!!a.h){if(y.charAt(0)!="/")if(this.g&&!this.h)y="/"+y;else{var R=c.h.lastIndexOf("/");R!=-1&&(y=c.h.slice(0,R+1)+y)}if(R=y,R==".."||R==".")y="";else if(R.indexOf("./")!=-1||R.indexOf("/.")!=-1){y=R.lastIndexOf("/",0)==0,R=R.split("/");const P=[];for(let z=0;z<R.length;){const Z=R[z++];Z=="."?y&&z==R.length&&P.push(""):Z==".."?((P.length>1||P.length==1&&P[0]!="")&&P.pop(),y&&z==R.length&&P.push("")):(P.push(Z),y=!0)}y=P.join("/")}else y=R}return f?c.h=y:f=a.i.toString()!=="",f?Xl(c,gf(a.i)):f=!!a.m,f&&(c.m=a.m),c};function Kt(a){return new kn(a)}function Ws(a,c,f){a.j=f?Qs(c,!0):c,a.j&&(a.j=a.j.replace(/:$/,""))}function Gs(a,c){if(c){if(c=Number(c),isNaN(c)||c<0)throw Error("Bad port number "+c);a.u=c}else a.u=null}function Xl(a,c,f){c instanceof Ys?(a.i=c,Q_(a.i,a.l)):(f||(c=Ks(c,W_)),a.i=new Ys(c,a.l))}function ye(a,c,f){a.i.set(c,f)}function Eo(a){return ye(a,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),a}function Qs(a,c){return a?c?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function Ks(a,c,f){return typeof a=="string"?(a=encodeURI(a).replace(c,$_),f&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function $_(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var hf=/[#\/\?@]/g,q_=/[#\?:]/g,H_=/[#\?]/g,W_=/[#\?@]/g,G_=/#/g;function Ys(a,c){this.h=this.g=null,this.i=a||null,this.j=!!c}function dr(a){a.g||(a.g=new Map,a.h=0,a.i&&B_(a.i,function(c,f){a.add(decodeURIComponent(c.replace(/\+/g," ")),f)}))}t=Ys.prototype,t.add=function(a,c){dr(this),this.i=null,a=$r(this,a);let f=this.g.get(a);return f||this.g.set(a,f=[]),f.push(c),this.h+=1,this};function df(a,c){dr(a),c=$r(a,c),a.g.has(c)&&(a.i=null,a.h-=a.g.get(c).length,a.g.delete(c))}function ff(a,c){return dr(a),c=$r(a,c),a.g.has(c)}t.forEach=function(a,c){dr(this),this.g.forEach(function(f,y){f.forEach(function(R){a.call(c,R,y,this)},this)},this)};function mf(a,c){dr(a);let f=[];if(typeof c=="string")ff(a,c)&&(f=f.concat(a.g.get($r(a,c))));else for(a=Array.from(a.g.values()),c=0;c<a.length;c++)f=f.concat(a[c]);return f}t.set=function(a,c){return dr(this),this.i=null,a=$r(this,a),ff(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[c]),this.h+=1,this},t.get=function(a,c){return a?(a=mf(this,a),a.length>0?String(a[0]):c):c};function pf(a,c,f){df(a,c),f.length>0&&(a.i=null,a.g.set($r(a,c),S(f)),a.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],c=Array.from(this.g.keys());for(let y=0;y<c.length;y++){var f=c[y];const R=qs(f);f=mf(this,f);for(let P=0;P<f.length;P++){let z=R;f[P]!==""&&(z+="="+qs(f[P])),a.push(z)}}return this.i=a.join("&")};function gf(a){const c=new Ys;return c.i=a.i,a.g&&(c.g=new Map(a.g),c.h=a.h),c}function $r(a,c){return c=String(c),a.j&&(c=c.toLowerCase()),c}function Q_(a,c){c&&!a.j&&(dr(a),a.i=null,a.g.forEach(function(f,y){const R=y.toLowerCase();y!=R&&(df(this,y),pf(this,R,f))},a)),a.j=c}function K_(a,c){const f=new $s;if(o.Image){const y=new Image;y.onload=p(An,f,"TestLoadImage: loaded",!0,c,y),y.onerror=p(An,f,"TestLoadImage: error",!1,c,y),y.onabort=p(An,f,"TestLoadImage: abort",!1,c,y),y.ontimeout=p(An,f,"TestLoadImage: timeout",!1,c,y),o.setTimeout(function(){y.ontimeout&&y.ontimeout()},1e4),y.src=a}else c(!1)}function Y_(a,c){const f=new $s,y=new AbortController,R=setTimeout(()=>{y.abort(),An(f,"TestPingServer: timeout",!1,c)},1e4);fetch(a,{signal:y.signal}).then(P=>{clearTimeout(R),P.ok?An(f,"TestPingServer: ok",!0,c):An(f,"TestPingServer: server error",!1,c)}).catch(()=>{clearTimeout(R),An(f,"TestPingServer: error",!1,c)})}function An(a,c,f,y,R){try{R&&(R.onload=null,R.onerror=null,R.onabort=null,R.ontimeout=null),y(f)}catch{}}function X_(){this.g=new V_}function Jl(a){this.i=a.Sb||null,this.h=a.ab||!1}m(Jl,Hd),Jl.prototype.g=function(){return new To(this.i,this.h)};function To(a,c){et.call(this),this.H=a,this.o=c,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}m(To,et),t=To.prototype,t.open=function(a,c){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=a,this.D=c,this.readyState=1,Js(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const c={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};a&&(c.body=a),(this.H||o).fetch(new Request(this.D,c)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Xs(this)),this.readyState=0},t.Pa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,Js(this)),this.g&&(this.readyState=3,Js(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;yf(this)}else a.text().then(this.Oa.bind(this),this.ga.bind(this))};function yf(a){a.j.read().then(a.Ma.bind(a)).catch(a.ga.bind(a))}t.Ma=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var c=a.value?a.value:new Uint8Array(0);(c=this.B.decode(c,{stream:!a.done}))&&(this.response=this.responseText+=c)}a.done?Xs(this):Js(this),this.readyState==3&&yf(this)}},t.Oa=function(a){this.g&&(this.response=this.responseText=a,Xs(this))},t.Na=function(a){this.g&&(this.response=a,Xs(this))},t.ga=function(){this.g&&Xs(this)};function Xs(a){a.readyState=4,a.l=null,a.j=null,a.B=null,Js(a)}t.setRequestHeader=function(a,c){this.A.append(a,c)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],c=this.h.entries();for(var f=c.next();!f.done;)f=f.value,a.push(f[0]+": "+f[1]),f=c.next();return a.join(`\r
`)};function Js(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(To.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function vf(a){let c="";return Q(a,function(f,y){c+=y,c+=":",c+=f,c+=`\r
`}),c}function Zl(a,c,f){e:{for(y in f){var y=!1;break e}y=!0}y||(f=vf(f),typeof a=="string"?f!=null&&qs(f):ye(a,c,f))}function Ce(a){et.call(this),this.headers=new Map,this.L=a||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}m(Ce,et);var J_=/^https?$/i,Z_=["POST","PUT"];t=Ce.prototype,t.Fa=function(a){this.H=a},t.ea=function(a,c,f,y){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);c=c?c.toUpperCase():"GET",this.D=a,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Jd.g(),this.g.onreadystatechange=g(h(this.Ca,this));try{this.B=!0,this.g.open(c,String(a),!0),this.B=!1}catch(P){_f(this,P);return}if(a=f||"",f=new Map(this.headers),y)if(Object.getPrototypeOf(y)===Object.prototype)for(var R in y)f.set(R,y[R]);else if(typeof y.keys=="function"&&typeof y.get=="function")for(const P of y.keys())f.set(P,y.get(P));else throw Error("Unknown input type for opt_headers: "+String(y));y=Array.from(f.keys()).find(P=>P.toLowerCase()=="content-type"),R=o.FormData&&a instanceof o.FormData,!(Array.prototype.indexOf.call(Z_,c,void 0)>=0)||y||R||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[P,z]of f)this.g.setRequestHeader(P,z);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(a),this.v=!1}catch(P){_f(this,P)}};function _f(a,c){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=c,a.o=5,wf(a),So(a)}function wf(a){a.A||(a.A=!0,lt(a,"complete"),lt(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=a||7,lt(this,"complete"),lt(this,"abort"),So(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),So(this,!0)),Ce.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?xf(this):this.Xa())},t.Xa=function(){xf(this)};function xf(a){if(a.h&&typeof i<"u"){if(a.v&&Cn(a)==4)setTimeout(a.Ca.bind(a),0);else if(lt(a,"readystatechange"),Cn(a)==4){a.h=!1;try{const P=a.ca();e:switch(P){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var c=!0;break e;default:c=!1}var f;if(!(f=c)){var y;if(y=P===0){let z=String(a.D).match(cf)[1]||null;!z&&o.self&&o.self.location&&(z=o.self.location.protocol.slice(0,-1)),y=!J_.test(z?z.toLowerCase():"")}f=y}if(f)lt(a,"complete"),lt(a,"success");else{a.o=6;try{var R=Cn(a)>2?a.g.statusText:""}catch{R=""}a.l=R+" ["+a.ca()+"]",wf(a)}}finally{So(a)}}}}function So(a,c){if(a.g){a.m&&(clearTimeout(a.m),a.m=null);const f=a.g;a.g=null,c||lt(a,"ready");try{f.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Cn(a){return a.g?a.g.readyState:0}t.ca=function(){try{return Cn(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(a){if(this.g){var c=this.g.responseText;return a&&c.indexOf(a)==0&&(c=c.substring(a.length)),P_(c)}};function Ef(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.F){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function e1(a){const c={};a=(a.g&&Cn(a)>=2&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let y=0;y<a.length;y++){if(w(a[y]))continue;var f=O_(a[y]);const R=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();const P=c[R]||[];c[R]=P,P.push(f)}J(c,function(y){return y.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Zs(a,c,f){return f&&f.internalChannelParams&&f.internalChannelParams[a]||c}function Tf(a){this.za=0,this.i=[],this.j=new $s,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Zs("failFast",!1,a),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Zs("baseRetryDelayMs",5e3,a),this.Za=Zs("retryDelaySeedMs",1e4,a),this.Ta=Zs("forwardChannelMaxRetries",2,a),this.va=Zs("forwardChannelRequestTimeoutMs",2e4,a),this.ma=a&&a.xmlHttpFactory||void 0,this.Ua=a&&a.Rb||void 0,this.Aa=a&&a.useFetchStreams||!1,this.O=void 0,this.L=a&&a.supportsCrossDomainXhr||!1,this.M="",this.h=new sf(a&&a.concurrentRequestLimit),this.Ba=new X_,this.S=a&&a.fastHandshake||!1,this.R=a&&a.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=a&&a.Pb||!1,a&&a.ua&&this.j.ua(),a&&a.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&a&&a.detectBufferingProxy||!1,this.ia=void 0,a&&a.longPollingTimeout&&a.longPollingTimeout>0&&(this.ia=a.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Tf.prototype,t.ka=8,t.I=1,t.connect=function(a,c,f,y){ut(0),this.W=a,this.H=c||{},f&&y!==void 0&&(this.H.OSID=f,this.H.OAID=y),this.F=this.X,this.J=Pf(this,null,this.W),ko(this)};function eu(a){if(Sf(a),a.I==3){var c=a.V++,f=Kt(a.J);if(ye(f,"SID",a.M),ye(f,"RID",c),ye(f,"TYPE","terminate"),ei(a,f),c=new In(a,a.j,c),c.M=2,c.A=Eo(Kt(f)),f=!1,o.navigator&&o.navigator.sendBeacon)try{f=o.navigator.sendBeacon(c.A.toString(),"")}catch{}!f&&o.Image&&(new Image().src=c.A,f=!0),f||(c.g=Vf(c.j,null),c.g.ea(c.A)),c.F=Date.now(),xo(c)}Rf(a)}function Io(a){a.g&&(nu(a),a.g.cancel(),a.g=null)}function Sf(a){Io(a),a.v&&(o.clearTimeout(a.v),a.v=null),Ao(a),a.h.cancel(),a.m&&(typeof a.m=="number"&&o.clearTimeout(a.m),a.m=null)}function ko(a){if(!of(a.h)&&!a.m){a.m=!0;var c=a.Ea;M||v(),F||(M(),F=!0),E.add(c,a),a.D=0}}function t1(a,c){return af(a.h)>=a.h.j-(a.m?1:0)?!1:a.m?(a.i=c.G.concat(a.i),!0):a.I==1||a.I==2||a.D>=(a.Sa?0:a.Ta)?!1:(a.m=Bs(h(a.Ea,a,c),Nf(a,a.D)),a.D++,!0)}t.Ea=function(a){if(this.m)if(this.m=null,this.I==1){if(!a){this.V=Math.floor(Math.random()*1e5),a=this.V++;const R=new In(this,this.j,a);let P=this.o;if(this.U&&(P?(P=me(P),X(P,this.U)):P=this.U),this.u!==null||this.R||(R.J=P,P=null),this.S)e:{for(var c=0,f=0;f<this.i.length;f++){t:{var y=this.i[f];if("__data__"in y.map&&(y=y.map.__data__,typeof y=="string")){y=y.length;break t}y=void 0}if(y===void 0)break;if(c+=y,c>4096){c=f;break e}if(c===4096||f===this.i.length-1){c=f+1;break e}}c=1e3}else c=1e3;c=kf(this,R,c),f=Kt(this.J),ye(f,"RID",a),ye(f,"CVER",22),this.G&&ye(f,"X-HTTP-Session-Id",this.G),ei(this,f),P&&(this.R?c="headers="+qs(vf(P))+"&"+c:this.u&&Zl(f,this.u,P)),Yl(this.h,R),this.Ra&&ye(f,"TYPE","init"),this.S?(ye(f,"$req",c),ye(f,"SID","null"),R.U=!0,Wl(R,f,null)):Wl(R,f,c),this.I=2}}else this.I==3&&(a?If(this,a):this.i.length==0||of(this.h)||If(this))};function If(a,c){var f;c?f=c.l:f=a.V++;const y=Kt(a.J);ye(y,"SID",a.M),ye(y,"RID",f),ye(y,"AID",a.K),ei(a,y),a.u&&a.o&&Zl(y,a.u,a.o),f=new In(a,a.j,f,a.D+1),a.u===null&&(f.J=a.o),c&&(a.i=c.G.concat(a.i)),c=kf(a,f,1e3),f.H=Math.round(a.va*.5)+Math.round(a.va*.5*Math.random()),Yl(a.h,f),Wl(f,y,c)}function ei(a,c){a.H&&Q(a.H,function(f,y){ye(c,y,f)}),a.l&&Q({},function(f,y){ye(c,y,f)})}function kf(a,c,f){f=Math.min(a.i.length,f);const y=a.l?h(a.l.Ka,a.l,a):null;e:{var R=a.i;let Z=-1;for(;;){const Fe=["count="+f];Z==-1?f>0?(Z=R[0].g,Fe.push("ofs="+Z)):Z=0:Fe.push("ofs="+Z);let fe=!0;for(let $e=0;$e<f;$e++){var P=R[$e].g;const Yt=R[$e].map;if(P-=Z,P<0)Z=Math.max(0,R[$e].g-100),fe=!1;else try{P="req"+P+"_"||"";try{var z=Yt instanceof Map?Yt:Object.entries(Yt);for(const[mr,bn]of z){let Nn=bn;l(bn)&&(Nn=Ul(bn)),Fe.push(P+mr+"="+encodeURIComponent(Nn))}}catch(mr){throw Fe.push(P+"type="+encodeURIComponent("_badmap")),mr}}catch{y&&y(Yt)}}if(fe){z=Fe.join("&");break e}}z=void 0}return a=a.i.splice(0,f),c.G=a,z}function Af(a){if(!a.g&&!a.v){a.Y=1;var c=a.Da;M||v(),F||(M(),F=!0),E.add(c,a),a.A=0}}function tu(a){return a.g||a.v||a.A>=3?!1:(a.Y++,a.v=Bs(h(a.Da,a),Nf(a,a.A)),a.A++,!0)}t.Da=function(){if(this.v=null,Cf(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var a=4*this.T;this.j.info("BP detection timer enabled: "+a),this.B=Bs(h(this.Wa,this),a)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,ut(10),Io(this),Cf(this))};function nu(a){a.B!=null&&(o.clearTimeout(a.B),a.B=null)}function Cf(a){a.g=new In(a,a.j,"rpc",a.Y),a.u===null&&(a.g.J=a.o),a.g.P=0;var c=Kt(a.na);ye(c,"RID","rpc"),ye(c,"SID",a.M),ye(c,"AID",a.K),ye(c,"CI",a.F?"0":"1"),!a.F&&a.ia&&ye(c,"TO",a.ia),ye(c,"TYPE","xmlhttp"),ei(a,c),a.u&&a.o&&Zl(c,a.u,a.o),a.O&&(a.g.H=a.O);var f=a.g;a=a.ba,f.M=1,f.A=Eo(Kt(c)),f.u=null,f.R=!0,tf(f,a)}t.Va=function(){this.C!=null&&(this.C=null,Io(this),tu(this),ut(19))};function Ao(a){a.C!=null&&(o.clearTimeout(a.C),a.C=null)}function bf(a,c){var f=null;if(a.g==c){Ao(a),nu(a),a.g=null;var y=2}else if(Kl(a.h,c))f=c.G,lf(a.h,c),y=1;else return;if(a.I!=0){if(c.o)if(y==1){f=c.u?c.u.length:0,c=Date.now()-c.F;var R=a.D;y=_o(),lt(y,new Yd(y,f)),ko(a)}else Af(a);else if(R=c.m,R==3||R==0&&c.X>0||!(y==1&&t1(a,c)||y==2&&tu(a)))switch(f&&f.length>0&&(c=a.h,c.i=c.i.concat(f)),R){case 1:fr(a,5);break;case 4:fr(a,10);break;case 3:fr(a,6);break;default:fr(a,2)}}}function Nf(a,c){let f=a.Qa+Math.floor(Math.random()*a.Za);return a.isActive()||(f*=2),f*c}function fr(a,c){if(a.j.info("Error code "+c),c==2){var f=h(a.bb,a),y=a.Ua;const R=!y;y=new kn(y||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||Ws(y,"https"),Eo(y),R?K_(y.toString(),f):Y_(y.toString(),f)}else ut(2);a.I=0,a.l&&a.l.pa(c),Rf(a),Sf(a)}t.bb=function(a){a?(this.j.info("Successfully pinged google.com"),ut(2)):(this.j.info("Failed to ping google.com"),ut(1))};function Rf(a){if(a.I=0,a.ja=[],a.l){const c=uf(a.h);(c.length!=0||a.i.length!=0)&&(b(a.ja,c),b(a.ja,a.i),a.h.i.length=0,S(a.i),a.i.length=0),a.l.oa()}}function Pf(a,c,f){var y=f instanceof kn?Kt(f):new kn(f);if(y.g!="")c&&(y.g=c+"."+y.g),Gs(y,y.u);else{var R=o.location;y=R.protocol,c=c?c+"."+R.hostname:R.hostname,R=+R.port;const P=new kn(null);y&&Ws(P,y),c&&(P.g=c),R&&Gs(P,R),f&&(P.h=f),y=P}return f=a.G,c=a.wa,f&&c&&ye(y,f,c),ye(y,"VER",a.ka),ei(a,y),y}function Vf(a,c,f){if(c&&!a.L)throw Error("Can't create secondary domain capable XhrIo object.");return c=a.Aa&&!a.ma?new Ce(new Jl({ab:f})):new Ce(a.ma),c.Fa(a.L),c}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Df(){}t=Df.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Co(){}Co.prototype.g=function(a,c){return new Tt(a,c)};function Tt(a,c){et.call(this),this.g=new Tf(c),this.l=a,this.h=c&&c.messageUrlParams||null,a=c&&c.messageHeaders||null,c&&c.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=c&&c.initMessageHeaders||null,c&&c.messageContentType&&(a?a["X-WebChannel-Content-Type"]=c.messageContentType:a={"X-WebChannel-Content-Type":c.messageContentType}),c&&c.sa&&(a?a["X-WebChannel-Client-Profile"]=c.sa:a={"X-WebChannel-Client-Profile":c.sa}),this.g.U=a,(a=c&&c.Qb)&&!w(a)&&(this.g.u=a),this.A=c&&c.supportsCrossDomainXhr||!1,this.v=c&&c.sendRawJson||!1,(c=c&&c.httpSessionIdParam)&&!w(c)&&(this.g.G=c,a=this.h,a!==null&&c in a&&(a=this.h,c in a&&delete a[c])),this.j=new qr(this)}m(Tt,et),Tt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Tt.prototype.close=function(){eu(this.g)},Tt.prototype.o=function(a){var c=this.g;if(typeof a=="string"){var f={};f.__data__=a,a=f}else this.v&&(f={},f.__data__=Ul(a),a=f);c.i.push(new U_(c.Ya++,a)),c.I==3&&ko(c)},Tt.prototype.N=function(){this.g.l=null,delete this.j,eu(this.g),delete this.g,Tt.Z.N.call(this)};function jf(a){Bl.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var c=a.__sm__;if(c){e:{for(const f in c){a=f;break e}a=void 0}(this.i=a)&&(a=this.i,c=c!==null&&a in c?c[a]:void 0),this.data=c}else this.data=a}m(jf,Bl);function Lf(){$l.call(this),this.status=1}m(Lf,$l);function qr(a){this.g=a}m(qr,Df),qr.prototype.ra=function(){lt(this.g,"a")},qr.prototype.qa=function(a){lt(this.g,new jf(a))},qr.prototype.pa=function(a){lt(this.g,new Lf)},qr.prototype.oa=function(){lt(this.g,"b")},Co.prototype.createWebChannel=Co.prototype.g,Tt.prototype.send=Tt.prototype.o,Tt.prototype.open=Tt.prototype.m,Tt.prototype.close=Tt.prototype.close,H0=function(){return new Co},q0=function(){return _o()},$0=cr,Fc={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},wo.NO_ERROR=0,wo.TIMEOUT=8,wo.HTTP_ERROR=6,ca=wo,Xd.COMPLETE="complete",B0=Xd,Wd.EventType=zs,zs.OPEN="a",zs.CLOSE="b",zs.ERROR="c",zs.MESSAGE="d",et.prototype.listen=et.prototype.J,fi=Wd,Ce.prototype.listenOnce=Ce.prototype.K,Ce.prototype.getLastError=Ce.prototype.Ha,Ce.prototype.getLastErrorCode=Ce.prototype.ya,Ce.prototype.getStatus=Ce.prototype.ca,Ce.prototype.getResponseJson=Ce.prototype.La,Ce.prototype.getResponseText=Ce.prototype.la,Ce.prototype.send=Ce.prototype.ea,Ce.prototype.setWithCredentials=Ce.prototype.Fa,U0=Ce}).apply(typeof Go<"u"?Go:typeof self<"u"?self:typeof window<"u"?window:{});const sp="@firebase/firestore",ip="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class st{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}st.UNAUTHENTICATED=new st(null),st.GOOGLE_CREDENTIALS=new st("google-credentials-uid"),st.FIRST_PARTY=new st("first-party-uid"),st.MOCK_USER=new st("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ds="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vr=new D0("@firebase/firestore");function Wr(){return Vr.logLevel}function $(t,...e){if(Vr.logLevel<=ie.DEBUG){const n=e.map(nd);Vr.debug(`Firestore (${Ds}): ${t}`,...n)}}function En(t,...e){if(Vr.logLevel<=ie.ERROR){const n=e.map(nd);Vr.error(`Firestore (${Ds}): ${t}`,...n)}}function Ss(t,...e){if(Vr.logLevel<=ie.WARN){const n=e.map(nd);Vr.warn(`Firestore (${Ds}): ${t}`,...n)}}function nd(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,W0(t,r,n)}function W0(t,e,n){let r=`FIRESTORE (${Ds}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw En(r),new Error(r)}function ce(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||W0(e,s,r)}function Y(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class B extends Vs{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ir{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G0{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class L2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(st.UNAUTHENTICATED))}shutdown(){}}class M2{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class O2{constructor(e){this.t=e,this.currentUser=st.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ce(this.o===void 0,42304);let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let i=new Ir;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Ir,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},l=u=>{$("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):($("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Ir)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?($("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ce(typeof r.accessToken=="string",31837,{l:r}),new G0(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ce(e===null||typeof e=="string",2055,{h:e}),new st(e)}}class F2{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=st.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class z2{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new F2(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(st.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class op{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class U2{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,x2(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){ce(this.o===void 0,3512);const r=i=>{i.error!=null&&$("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,$("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{$("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):$("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new op(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ce(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new op(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B2(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rd{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=B2(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function ne(t,e){return t<e?-1:t>e?1:0}function zc(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),i=e.charAt(r);if(s!==i)return Du(s)===Du(i)?ne(s,i):Du(s)?1:-1}return ne(t.length,e.length)}const $2=55296,q2=57343;function Du(t){const e=t.charCodeAt(0);return e>=$2&&e<=q2}function Is(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ap="__name__";class Zt{constructor(e,n,r){n===void 0?n=0:n>e.length&&G(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&G(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Zt.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Zt?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=Zt.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return ne(e.length,n.length)}static compareSegments(e,n){const r=Zt.isNumericId(e),s=Zt.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?Zt.extractNumericId(e).compare(Zt.extractNumericId(n)):zc(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Kn.fromString(e.substring(4,e.length-2))}}class pe extends Zt{construct(e,n,r){return new pe(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new B(j.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new pe(n)}static emptyPath(){return new pe([])}}const H2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ye extends Zt{construct(e,n,r){return new Ye(e,n,r)}static isValidIdentifier(e){return H2.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ye.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===ap}static keyField(){return new Ye([ap])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new B(j.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new B(j.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new B(j.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,s+=2}else l==="`"?(o=!o,s++):l!=="."||o?(r+=l,s++):(i(),s++)}if(i(),o)throw new B(j.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ye(n)}static emptyPath(){return new Ye([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W{constructor(e){this.path=e}static fromPath(e){return new W(pe.fromString(e))}static fromName(e){return new W(pe.fromString(e).popFirst(5))}static empty(){return new W(pe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&pe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return pe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new W(new pe(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q0(t,e,n){if(!n)throw new B(j.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function W2(t,e,n,r){if(e===!0&&r===!0)throw new B(j.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function lp(t){if(!W.isDocumentKey(t))throw new B(j.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function up(t){if(W.isDocumentKey(t))throw new B(j.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function K0(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function wl(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":G(12329,{type:typeof t})}function sn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new B(j.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=wl(t);throw new B(j.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Me(t,e){const n={typeString:t};return e&&(n.value=e),n}function ho(t,e){if(!K0(t))throw new B(j.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(s&&typeof o!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new B(j.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cp=-62135596800,hp=1e6;class _e{static now(){return _e.fromMillis(Date.now())}static fromDate(e){return _e.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*hp);return new _e(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new B(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new B(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<cp)throw new B(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new B(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/hp}_compareTo(e){return this.seconds===e.seconds?ne(this.nanoseconds,e.nanoseconds):ne(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:_e._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(ho(e,_e._jsonSchema))return new _e(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-cp;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}_e._jsonSchemaVersion="firestore/timestamp/1.0",_e._jsonSchema={type:Me("string",_e._jsonSchemaVersion),seconds:Me("number"),nanoseconds:Me("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K{static fromTimestamp(e){return new K(e)}static min(){return new K(new _e(0,0))}static max(){return new K(new _e(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xi=-1;function G2(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=K.fromTimestamp(r===1e9?new _e(n+1,0):new _e(n,r));return new Zn(s,W.empty(),e)}function Q2(t){return new Zn(t.readTime,t.key,Xi)}class Zn{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Zn(K.min(),W.empty(),Xi)}static max(){return new Zn(K.max(),W.empty(),Xi)}}function K2(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=W.comparator(t.documentKey,e.documentKey),n!==0?n:ne(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class X2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function js(t){if(t.code!==j.FAILED_PRECONDITION||t.message!==Y2)throw t;$("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&G(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new L((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof L?n:L.resolve(n)}catch(n){return L.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):L.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):L.reject(n)}static resolve(e){return new L((n,r)=>{n(e)})}static reject(e){return new L((n,r)=>{r(e)})}static waitFor(e){return new L((n,r)=>{let s=0,i=0,o=!1;e.forEach(l=>{++s,l.next(()=>{++i,o&&i===s&&n()},u=>r(u))}),o=!0,i===s&&n()})}static or(e){let n=L.resolve(!1);for(const r of e)n=n.next(s=>s?L.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new L((r,s)=>{const i=e.length,o=new Array(i);let l=0;for(let u=0;u<i;u++){const h=u;n(e[h]).next(p=>{o[h]=p,++l,l===i&&r(o)},p=>s(p))}})}static doWhile(e,n){return new L((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function J2(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ls(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xl{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}xl.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sd=-1;function El(t){return t==null}function Ha(t){return t===0&&1/t==-1/0}function Z2(t){return typeof t=="number"&&Number.isInteger(t)&&!Ha(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y0="";function eT(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=dp(e)),e=tT(t.get(n),e);return dp(e)}function tT(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case Y0:n+="";break;default:n+=i}}return n}function dp(t){return t+Y0+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fp(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function lr(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function X0(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{constructor(e,n){this.comparator=e,this.root=n||Ke.EMPTY}insert(e,n){return new Ae(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ke.BLACK,null,null))}remove(e){return new Ae(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ke.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Qo(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Qo(this.root,e,this.comparator,!1)}getReverseIterator(){return new Qo(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Qo(this.root,e,this.comparator,!0)}}class Qo{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ke{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Ke.RED,this.left=s??Ke.EMPTY,this.right=i??Ke.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new Ke(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Ke.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Ke.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ke.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ke.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw G(43730,{key:this.key,value:this.value});if(this.right.isRed())throw G(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw G(27949);return e+(this.isRed()?0:1)}}Ke.EMPTY=null,Ke.RED=!0,Ke.BLACK=!1;Ke.EMPTY=new class{constructor(){this.size=0}get key(){throw G(57766)}get value(){throw G(16141)}get color(){throw G(16727)}get left(){throw G(29726)}get right(){throw G(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new Ke(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Be{constructor(e){this.comparator=e,this.data=new Ae(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new mp(this.data.getIterator())}getIteratorFrom(e){return new mp(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Be)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Be(this.comparator);return n.data=e,n}}class mp{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kt{constructor(e){this.fields=e,e.sort(Ye.comparator)}static empty(){return new kt([])}unionWith(e){let n=new Be(Ye.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new kt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Is(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J0 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ze{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new J0("Invalid base64 string: "+i):i}}(e);return new Ze(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new Ze(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ne(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ze.EMPTY_BYTE_STRING=new Ze("");const nT=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function er(t){if(ce(!!t,39018),typeof t=="string"){let e=0;const n=nT.exec(t);if(ce(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ne(t.seconds),nanos:Ne(t.nanos)}}function Ne(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function tr(t){return typeof t=="string"?Ze.fromBase64String(t):Ze.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z0="server_timestamp",ev="__type__",tv="__previous_value__",nv="__local_write_time__";function id(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[ev])==null?void 0:r.stringValue)===Z0}function Tl(t){const e=t.mapValue.fields[tv];return id(e)?Tl(e):e}function Ji(t){const e=er(t.mapValue.fields[nv].timestampValue);return new _e(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rT{constructor(e,n,r,s,i,o,l,u,h,p){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=h,this.isUsingEmulator=p}}const Wa="(default)";class Zi{constructor(e,n){this.projectId=e,this.database=n||Wa}static empty(){return new Zi("","")}get isDefaultDatabase(){return this.database===Wa}isEqual(e){return e instanceof Zi&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rv="__type__",sT="__max__",Ko={mapValue:{}},sv="__vector__",Ga="value";function nr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?id(t)?4:oT(t)?9007199254740991:iT(t)?10:11:G(28295,{value:t})}function hn(t,e){if(t===e)return!0;const n=nr(t);if(n!==nr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ji(t).isEqual(Ji(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=er(s.timestampValue),l=er(i.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return tr(s.bytesValue).isEqual(tr(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Ne(s.geoPointValue.latitude)===Ne(i.geoPointValue.latitude)&&Ne(s.geoPointValue.longitude)===Ne(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Ne(s.integerValue)===Ne(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Ne(s.doubleValue),l=Ne(i.doubleValue);return o===l?Ha(o)===Ha(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return Is(t.arrayValue.values||[],e.arrayValue.values||[],hn);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},l=i.mapValue.fields||{};if(fp(o)!==fp(l))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(l[u]===void 0||!hn(o[u],l[u])))return!1;return!0}(t,e);default:return G(52216,{left:t})}}function eo(t,e){return(t.values||[]).find(n=>hn(n,e))!==void 0}function ks(t,e){if(t===e)return 0;const n=nr(t),r=nr(e);if(n!==r)return ne(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ne(t.booleanValue,e.booleanValue);case 2:return function(i,o){const l=Ne(i.integerValue||i.doubleValue),u=Ne(o.integerValue||o.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return pp(t.timestampValue,e.timestampValue);case 4:return pp(Ji(t),Ji(e));case 5:return zc(t.stringValue,e.stringValue);case 6:return function(i,o){const l=tr(i),u=tr(o);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const l=i.split("/"),u=o.split("/");for(let h=0;h<l.length&&h<u.length;h++){const p=ne(l[h],u[h]);if(p!==0)return p}return ne(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const l=ne(Ne(i.latitude),Ne(o.latitude));return l!==0?l:ne(Ne(i.longitude),Ne(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return gp(t.arrayValue,e.arrayValue);case 10:return function(i,o){var g,S,b,N;const l=i.fields||{},u=o.fields||{},h=(g=l[Ga])==null?void 0:g.arrayValue,p=(S=u[Ga])==null?void 0:S.arrayValue,m=ne(((b=h==null?void 0:h.values)==null?void 0:b.length)||0,((N=p==null?void 0:p.values)==null?void 0:N.length)||0);return m!==0?m:gp(h,p)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===Ko.mapValue&&o===Ko.mapValue)return 0;if(i===Ko.mapValue)return 1;if(o===Ko.mapValue)return-1;const l=i.fields||{},u=Object.keys(l),h=o.fields||{},p=Object.keys(h);u.sort(),p.sort();for(let m=0;m<u.length&&m<p.length;++m){const g=zc(u[m],p[m]);if(g!==0)return g;const S=ks(l[u[m]],h[p[m]]);if(S!==0)return S}return ne(u.length,p.length)}(t.mapValue,e.mapValue);default:throw G(23264,{he:n})}}function pp(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ne(t,e);const n=er(t),r=er(e),s=ne(n.seconds,r.seconds);return s!==0?s:ne(n.nanos,r.nanos)}function gp(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=ks(n[s],r[s]);if(i)return i}return ne(n.length,r.length)}function As(t){return Uc(t)}function Uc(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=er(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return tr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return W.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Uc(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${Uc(n.fields[o])}`;return s+"}"}(t.mapValue):G(61005,{value:t})}function ha(t){switch(nr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Tl(t);return e?16+ha(e):16;case 5:return 2*t.stringValue.length;case 6:return tr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+ha(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return lr(r.fields,(i,o)=>{s+=i.length+ha(o)}),s}(t.mapValue);default:throw G(13486,{value:t})}}function yp(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Bc(t){return!!t&&"integerValue"in t}function od(t){return!!t&&"arrayValue"in t}function vp(t){return!!t&&"nullValue"in t}function _p(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function da(t){return!!t&&"mapValue"in t}function iT(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[rv])==null?void 0:r.stringValue)===sv}function Ai(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return lr(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Ai(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ai(t.arrayValue.values[n]);return e}return{...t}}function oT(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===sT}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vt{constructor(e){this.value=e}static empty(){return new vt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!da(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ai(n)}setAll(e){let n=Ye.emptyPath(),r={},s=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,r,s),r={},s=[],n=l.popLast()}o?r[l.lastSegment()]=Ai(o):s.push(l.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());da(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return hn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];da(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){lr(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new vt(Ai(this.value))}}function iv(t){const e=[];return lr(t.fields,(n,r)=>{const s=new Ye([n]);if(da(r)){const i=iv(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new kt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ot{constructor(e,n,r,s,i,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=l}static newInvalidDocument(e){return new ot(e,0,K.min(),K.min(),K.min(),vt.empty(),0)}static newFoundDocument(e,n,r,s){return new ot(e,1,n,K.min(),r,s,0)}static newNoDocument(e,n){return new ot(e,2,n,K.min(),K.min(),vt.empty(),0)}static newUnknownDocument(e,n){return new ot(e,3,n,K.min(),K.min(),vt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(K.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=vt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=vt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=K.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ot&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ot(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qa{constructor(e,n){this.position=e,this.inclusive=n}}function wp(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=W.comparator(W.fromName(o.referenceValue),n.key):r=ks(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function xp(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!hn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class to{constructor(e,n="asc"){this.field=e,this.dir=n}}function aT(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ov{}class Le extends ov{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new uT(e,n,r):n==="array-contains"?new dT(e,r):n==="in"?new fT(e,r):n==="not-in"?new mT(e,r):n==="array-contains-any"?new pT(e,r):new Le(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new cT(e,r):new hT(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(ks(n,this.value)):n!==null&&nr(this.value)===nr(n)&&this.matchesComparison(ks(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return G(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Gt extends ov{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Gt(e,n)}matches(e){return av(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function av(t){return t.op==="and"}function lv(t){return lT(t)&&av(t)}function lT(t){for(const e of t.filters)if(e instanceof Gt)return!1;return!0}function $c(t){if(t instanceof Le)return t.field.canonicalString()+t.op.toString()+As(t.value);if(lv(t))return t.filters.map(e=>$c(e)).join(",");{const e=t.filters.map(n=>$c(n)).join(",");return`${t.op}(${e})`}}function uv(t,e){return t instanceof Le?function(r,s){return s instanceof Le&&r.op===s.op&&r.field.isEqual(s.field)&&hn(r.value,s.value)}(t,e):t instanceof Gt?function(r,s){return s instanceof Gt&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,l)=>i&&uv(o,s.filters[l]),!0):!1}(t,e):void G(19439)}function cv(t){return t instanceof Le?function(n){return`${n.field.canonicalString()} ${n.op} ${As(n.value)}`}(t):t instanceof Gt?function(n){return n.op.toString()+" {"+n.getFilters().map(cv).join(" ,")+"}"}(t):"Filter"}class uT extends Le{constructor(e,n,r){super(e,n,r),this.key=W.fromName(r.referenceValue)}matches(e){const n=W.comparator(e.key,this.key);return this.matchesComparison(n)}}class cT extends Le{constructor(e,n){super(e,"in",n),this.keys=hv("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class hT extends Le{constructor(e,n){super(e,"not-in",n),this.keys=hv("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function hv(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>W.fromName(r.referenceValue))}class dT extends Le{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return od(n)&&eo(n.arrayValue,this.value)}}class fT extends Le{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&eo(this.value.arrayValue,n)}}class mT extends Le{constructor(e,n){super(e,"not-in",n)}matches(e){if(eo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!eo(this.value.arrayValue,n)}}class pT extends Le{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!od(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>eo(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gT{constructor(e,n=null,r=[],s=[],i=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=l,this.Te=null}}function Ep(t,e=null,n=[],r=[],s=null,i=null,o=null){return new gT(t,e,n,r,s,i,o)}function ad(t){const e=Y(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>$c(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),El(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>As(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>As(r)).join(",")),e.Te=n}return e.Te}function ld(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!aT(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!uv(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!xp(t.startAt,e.startAt)&&xp(t.endAt,e.endAt)}function qc(t){return W.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ms{constructor(e,n=null,r=[],s=[],i=null,o="F",l=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=l,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function yT(t,e,n,r,s,i,o,l){return new Ms(t,e,n,r,s,i,o,l)}function ud(t){return new Ms(t)}function Tp(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function dv(t){return t.collectionGroup!==null}function Ci(t){const e=Y(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new Be(Ye.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(h=>{h.isInequality()&&(l=l.add(h.field))})}),l})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new to(i,r))}),n.has(Ye.keyField().canonicalString())||e.Ie.push(new to(Ye.keyField(),r))}return e.Ie}function on(t){const e=Y(t);return e.Ee||(e.Ee=vT(e,Ci(t))),e.Ee}function vT(t,e){if(t.limitType==="F")return Ep(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new to(s.field,i)});const n=t.endAt?new Qa(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Qa(t.startAt.position,t.startAt.inclusive):null;return Ep(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Hc(t,e){const n=t.filters.concat([e]);return new Ms(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Wc(t,e,n){return new Ms(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Sl(t,e){return ld(on(t),on(e))&&t.limitType===e.limitType}function fv(t){return`${ad(on(t))}|lt:${t.limitType}`}function Gr(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>cv(s)).join(", ")}]`),El(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>As(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>As(s)).join(",")),`Target(${r})`}(on(t))}; limitType=${t.limitType})`}function Il(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):W.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of Ci(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,l,u){const h=wp(o,l,u);return o.inclusive?h<=0:h<0}(r.startAt,Ci(r),s)||r.endAt&&!function(o,l,u){const h=wp(o,l,u);return o.inclusive?h>=0:h>0}(r.endAt,Ci(r),s))}(t,e)}function _T(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function mv(t){return(e,n)=>{let r=!1;for(const s of Ci(t)){const i=wT(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function wT(t,e,n){const r=t.field.isKeyField()?W.comparator(e.key,n.key):function(i,o,l){const u=o.data.field(i),h=l.data.field(i);return u!==null&&h!==null?ks(u,h):G(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return G(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Or{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){lr(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return X0(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xT=new Ae(W.comparator);function Tn(){return xT}const pv=new Ae(W.comparator);function mi(...t){let e=pv;for(const n of t)e=e.insert(n.key,n);return e}function gv(t){let e=pv;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Er(){return bi()}function yv(){return bi()}function bi(){return new Or(t=>t.toString(),(t,e)=>t.isEqual(e))}const ET=new Ae(W.comparator),TT=new Be(W.comparator);function re(...t){let e=TT;for(const n of t)e=e.add(n);return e}const ST=new Be(ne);function IT(){return ST}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cd(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ha(e)?"-0":e}}function vv(t){return{integerValue:""+t}}function kT(t,e){return Z2(e)?vv(e):cd(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kl{constructor(){this._=void 0}}function AT(t,e,n){return t instanceof no?function(s,i){const o={fields:{[ev]:{stringValue:Z0},[nv]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&id(i)&&(i=Tl(i)),i&&(o.fields[tv]=i),{mapValue:o}}(n,e):t instanceof ro?wv(t,e):t instanceof so?xv(t,e):function(s,i){const o=_v(s,i),l=Sp(o)+Sp(s.Ae);return Bc(o)&&Bc(s.Ae)?vv(l):cd(s.serializer,l)}(t,e)}function CT(t,e,n){return t instanceof ro?wv(t,e):t instanceof so?xv(t,e):n}function _v(t,e){return t instanceof Ka?function(r){return Bc(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class no extends kl{}class ro extends kl{constructor(e){super(),this.elements=e}}function wv(t,e){const n=Ev(e);for(const r of t.elements)n.some(s=>hn(s,r))||n.push(r);return{arrayValue:{values:n}}}class so extends kl{constructor(e){super(),this.elements=e}}function xv(t,e){let n=Ev(e);for(const r of t.elements)n=n.filter(s=>!hn(s,r));return{arrayValue:{values:n}}}class Ka extends kl{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Sp(t){return Ne(t.integerValue||t.doubleValue)}function Ev(t){return od(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bT{constructor(e,n){this.field=e,this.transform=n}}function NT(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof ro&&s instanceof ro||r instanceof so&&s instanceof so?Is(r.elements,s.elements,hn):r instanceof Ka&&s instanceof Ka?hn(r.Ae,s.Ae):r instanceof no&&s instanceof no}(t.transform,e.transform)}class RT{constructor(e,n){this.version=e,this.transformResults=n}}class Lt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Lt}static exists(e){return new Lt(void 0,e)}static updateTime(e){return new Lt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function fa(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Al{}function Tv(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new hd(t.key,Lt.none()):new fo(t.key,t.data,Lt.none());{const n=t.data,r=vt.empty();let s=new Be(Ye.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new ur(t.key,r,new kt(s.toArray()),Lt.none())}}function PT(t,e,n){t instanceof fo?function(s,i,o){const l=s.value.clone(),u=kp(s.fieldTransforms,i,o.transformResults);l.setAll(u),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof ur?function(s,i,o){if(!fa(s.precondition,i))return void i.convertToUnknownDocument(o.version);const l=kp(s.fieldTransforms,i,o.transformResults),u=i.data;u.setAll(Sv(s)),u.setAll(l),i.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Ni(t,e,n,r){return t instanceof fo?function(i,o,l,u){if(!fa(i.precondition,o))return l;const h=i.value.clone(),p=Ap(i.fieldTransforms,u,o);return h.setAll(p),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null}(t,e,n,r):t instanceof ur?function(i,o,l,u){if(!fa(i.precondition,o))return l;const h=Ap(i.fieldTransforms,u,o),p=o.data;return p.setAll(Sv(i)),p.setAll(h),o.convertToFoundDocument(o.version,p).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(m=>m.field))}(t,e,n,r):function(i,o,l){return fa(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function VT(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=_v(r.transform,s||null);i!=null&&(n===null&&(n=vt.empty()),n.set(r.field,i))}return n||null}function Ip(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Is(r,s,(i,o)=>NT(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class fo extends Al{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class ur extends Al{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Sv(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function kp(t,e,n){const r=new Map;ce(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,l=e.data.field(i.field);r.set(i.field,CT(o,l,n[s]))}return r}function Ap(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,AT(i,o,e))}return r}class hd extends Al{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class DT extends Al{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jT{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&PT(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Ni(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Ni(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=yv();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let l=this.applyToLocalView(o,i.mutatedFields);l=n.has(s.key)?null:l;const u=Tv(o,l);u!==null&&r.set(s.key,u),o.isValidDocument()||o.convertToNoDocument(K.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),re())}isEqual(e){return this.batchId===e.batchId&&Is(this.mutations,e.mutations,(n,r)=>Ip(n,r))&&Is(this.baseMutations,e.baseMutations,(n,r)=>Ip(n,r))}}class dd{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){ce(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=function(){return ET}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new dd(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LT{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MT{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var De,se;function OT(t){switch(t){case j.OK:return G(64938);case j.CANCELLED:case j.UNKNOWN:case j.DEADLINE_EXCEEDED:case j.RESOURCE_EXHAUSTED:case j.INTERNAL:case j.UNAVAILABLE:case j.UNAUTHENTICATED:return!1;case j.INVALID_ARGUMENT:case j.NOT_FOUND:case j.ALREADY_EXISTS:case j.PERMISSION_DENIED:case j.FAILED_PRECONDITION:case j.ABORTED:case j.OUT_OF_RANGE:case j.UNIMPLEMENTED:case j.DATA_LOSS:return!0;default:return G(15467,{code:t})}}function Iv(t){if(t===void 0)return En("GRPC error has no .code"),j.UNKNOWN;switch(t){case De.OK:return j.OK;case De.CANCELLED:return j.CANCELLED;case De.UNKNOWN:return j.UNKNOWN;case De.DEADLINE_EXCEEDED:return j.DEADLINE_EXCEEDED;case De.RESOURCE_EXHAUSTED:return j.RESOURCE_EXHAUSTED;case De.INTERNAL:return j.INTERNAL;case De.UNAVAILABLE:return j.UNAVAILABLE;case De.UNAUTHENTICATED:return j.UNAUTHENTICATED;case De.INVALID_ARGUMENT:return j.INVALID_ARGUMENT;case De.NOT_FOUND:return j.NOT_FOUND;case De.ALREADY_EXISTS:return j.ALREADY_EXISTS;case De.PERMISSION_DENIED:return j.PERMISSION_DENIED;case De.FAILED_PRECONDITION:return j.FAILED_PRECONDITION;case De.ABORTED:return j.ABORTED;case De.OUT_OF_RANGE:return j.OUT_OF_RANGE;case De.UNIMPLEMENTED:return j.UNIMPLEMENTED;case De.DATA_LOSS:return j.DATA_LOSS;default:return G(39323,{code:t})}}(se=De||(De={}))[se.OK=0]="OK",se[se.CANCELLED=1]="CANCELLED",se[se.UNKNOWN=2]="UNKNOWN",se[se.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",se[se.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",se[se.NOT_FOUND=5]="NOT_FOUND",se[se.ALREADY_EXISTS=6]="ALREADY_EXISTS",se[se.PERMISSION_DENIED=7]="PERMISSION_DENIED",se[se.UNAUTHENTICATED=16]="UNAUTHENTICATED",se[se.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",se[se.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",se[se.ABORTED=10]="ABORTED",se[se.OUT_OF_RANGE=11]="OUT_OF_RANGE",se[se.UNIMPLEMENTED=12]="UNIMPLEMENTED",se[se.INTERNAL=13]="INTERNAL",se[se.UNAVAILABLE=14]="UNAVAILABLE",se[se.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FT(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zT=new Kn([4294967295,4294967295],0);function Cp(t){const e=FT().encode(t),n=new z0;return n.update(e),new Uint8Array(n.digest())}function bp(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Kn([n,r],0),new Kn([s,i],0)]}class fd{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new pi(`Invalid padding: ${n}`);if(r<0)throw new pi(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new pi(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new pi(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Kn.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(Kn.fromNumber(r)));return s.compare(zT)===1&&(s=new Kn([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Cp(e),[r,s]=bp(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);if(!this.we(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new fd(i,s,n);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.ge===0)return;const n=Cp(e),[r,s]=bp(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class pi extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cl{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,mo.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Cl(K.min(),s,new Ae(ne),Tn(),re())}}class mo{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new mo(r,n,re(),re(),re())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ma{constructor(e,n,r,s){this.be=e,this.removedTargetIds=n,this.key=r,this.De=s}}class kv{constructor(e,n){this.targetId=e,this.Ce=n}}class Av{constructor(e,n,r=Ze.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Np{constructor(){this.ve=0,this.Fe=Rp(),this.Me=Ze.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=re(),n=re(),r=re();return this.Fe.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:G(38017,{changeType:i})}}),new mo(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=Rp()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,ce(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class UT{constructor(e){this.Ge=e,this.ze=new Map,this.je=Tn(),this.Je=Yo(),this.He=Yo(),this.Ye=new Ae(ne)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:G(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,s)=>{this.rt(s)&&n(s)})}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const i=s.target;if(qc(i))if(r===0){const o=new W(i.path);this.et(n,o,ot.newNoDocument(o,K.min()))}else ce(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const l=this.ut(e),u=l?this.ct(l,e,o):1;if(u!==0){this.it(n);const h=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,h)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,l;try{o=tr(r).toUint8Array()}catch(u){if(u instanceof J0)return Ss("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new fd(o,s,i)}catch(u){return Ss(u instanceof pi?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.ge===0?null:l}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Ge.ht(),l=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.et(n,i,null),s++)}),s}Tt(e){const n=new Map;this.ze.forEach((i,o)=>{const l=this.ot(o);if(l){if(i.current&&qc(l.target)){const u=new W(l.target.path);this.It(u).has(o)||this.Et(o,u)||this.et(o,u,ot.newNoDocument(u,e))}i.Be&&(n.set(o,i.ke()),i.qe())}});let r=re();this.He.forEach((i,o)=>{let l=!0;o.forEachWhile(u=>{const h=this.ot(u);return!h||h.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(i))}),this.je.forEach((i,o)=>o.setReadTime(e));const s=new Cl(e,n,this.Ye,this.je,r);return this.je=Tn(),this.Je=Yo(),this.He=Yo(),this.Ye=new Ae(ne),s}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new Np,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Be(ne),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Be(ne),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||$("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Np),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Yo(){return new Ae(W.comparator)}function Rp(){return new Ae(W.comparator)}const BT={asc:"ASCENDING",desc:"DESCENDING"},$T={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},qT={and:"AND",or:"OR"};class HT{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Gc(t,e){return t.useProto3Json||El(e)?e:{value:e}}function Ya(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Cv(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function WT(t,e){return Ya(t,e.toTimestamp())}function an(t){return ce(!!t,49232),K.fromTimestamp(function(n){const r=er(n);return new _e(r.seconds,r.nanos)}(t))}function md(t,e){return Qc(t,e).canonicalString()}function Qc(t,e){const n=function(s){return new pe(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function bv(t){const e=pe.fromString(t);return ce(Dv(e),10190,{key:e.toString()}),e}function Kc(t,e){return md(t.databaseId,e.path)}function ju(t,e){const n=bv(e);if(n.get(1)!==t.databaseId.projectId)throw new B(j.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new B(j.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new W(Rv(n))}function Nv(t,e){return md(t.databaseId,e)}function GT(t){const e=bv(t);return e.length===4?pe.emptyPath():Rv(e)}function Yc(t){return new pe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Rv(t){return ce(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Pp(t,e,n){return{name:Kc(t,e),fields:n.value.mapValue.fields}}function QT(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:G(39313,{state:h})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(h,p){return h.useProto3Json?(ce(p===void 0||typeof p=="string",58123),Ze.fromBase64String(p||"")):(ce(p===void 0||p instanceof Buffer||p instanceof Uint8Array,16193),Ze.fromUint8Array(p||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(h){const p=h.code===void 0?j.UNKNOWN:Iv(h.code);return new B(p,h.message||"")}(o);n=new Av(r,s,i,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=ju(t,r.document.name),i=an(r.document.updateTime),o=r.document.createTime?an(r.document.createTime):K.min(),l=new vt({mapValue:{fields:r.document.fields}}),u=ot.newFoundDocument(s,i,o,l),h=r.targetIds||[],p=r.removedTargetIds||[];n=new ma(h,p,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=ju(t,r.document),i=r.readTime?an(r.readTime):K.min(),o=ot.newNoDocument(s,i),l=r.removedTargetIds||[];n=new ma([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=ju(t,r.document),i=r.removedTargetIds||[];n=new ma([],i,s,null)}else{if(!("filter"in e))return G(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new MT(s,i),l=r.targetId;n=new kv(l,o)}}return n}function KT(t,e){let n;if(e instanceof fo)n={update:Pp(t,e.key,e.value)};else if(e instanceof hd)n={delete:Kc(t,e.key)};else if(e instanceof ur)n={update:Pp(t,e.key,e.data),updateMask:sS(e.fieldMask)};else{if(!(e instanceof DT))return G(16599,{Vt:e.type});n={verify:Kc(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const l=o.transform;if(l instanceof no)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof ro)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof so)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Ka)return{fieldPath:o.field.canonicalString(),increment:l.Ae};throw G(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:WT(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:G(27497)}(t,e.precondition)),n}function YT(t,e){return t&&t.length>0?(ce(e!==void 0,14353),t.map(n=>function(s,i){let o=s.updateTime?an(s.updateTime):an(i);return o.isEqual(K.min())&&(o=an(i)),new RT(o,s.transformResults||[])}(n,e))):[]}function XT(t,e){return{documents:[Nv(t,e.path)]}}function JT(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Nv(t,s);const i=function(h){if(h.length!==0)return Vv(Gt.create(h,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(h){if(h.length!==0)return h.map(p=>function(g){return{field:Qr(g.field),direction:tS(g.dir)}}(p))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=Gc(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{ft:n,parent:s}}function ZT(t){let e=GT(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){ce(r===1,65062);const p=n.from[0];p.allDescendants?s=p.collectionId:e=e.child(p.collectionId)}let i=[];n.where&&(i=function(m){const g=Pv(m);return g instanceof Gt&&lv(g)?g.getFilters():[g]}(n.where));let o=[];n.orderBy&&(o=function(m){return m.map(g=>function(b){return new to(Kr(b.field),function(D){switch(D){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction))}(g))}(n.orderBy));let l=null;n.limit&&(l=function(m){let g;return g=typeof m=="object"?m.value:m,El(g)?null:g}(n.limit));let u=null;n.startAt&&(u=function(m){const g=!!m.before,S=m.values||[];return new Qa(S,g)}(n.startAt));let h=null;return n.endAt&&(h=function(m){const g=!m.before,S=m.values||[];return new Qa(S,g)}(n.endAt)),yT(e,s,o,i,l,"F",u,h)}function eS(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return G(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Pv(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Kr(n.unaryFilter.field);return Le.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Kr(n.unaryFilter.field);return Le.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Kr(n.unaryFilter.field);return Le.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Kr(n.unaryFilter.field);return Le.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return G(61313);default:return G(60726)}}(t):t.fieldFilter!==void 0?function(n){return Le.create(Kr(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return G(58110);default:return G(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Gt.create(n.compositeFilter.filters.map(r=>Pv(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return G(1026)}}(n.compositeFilter.op))}(t):G(30097,{filter:t})}function tS(t){return BT[t]}function nS(t){return $T[t]}function rS(t){return qT[t]}function Qr(t){return{fieldPath:t.canonicalString()}}function Kr(t){return Ye.fromServerFormat(t.fieldPath)}function Vv(t){return t instanceof Le?function(n){if(n.op==="=="){if(_p(n.value))return{unaryFilter:{field:Qr(n.field),op:"IS_NAN"}};if(vp(n.value))return{unaryFilter:{field:Qr(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(_p(n.value))return{unaryFilter:{field:Qr(n.field),op:"IS_NOT_NAN"}};if(vp(n.value))return{unaryFilter:{field:Qr(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Qr(n.field),op:nS(n.op),value:n.value}}}(t):t instanceof Gt?function(n){const r=n.getFilters().map(s=>Vv(s));return r.length===1?r[0]:{compositeFilter:{op:rS(n.op),filters:r}}}(t):G(54877,{filter:t})}function sS(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Dv(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class On{constructor(e,n,r,s,i=K.min(),o=K.min(),l=Ze.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new On(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new On(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new On(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new On(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iS{constructor(e){this.yt=e}}function oS(t){const e=ZT({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Wc(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aS{constructor(){this.Cn=new lS}addToCollectionParentIndex(e,n){return this.Cn.add(n),L.resolve()}getCollectionParents(e,n){return L.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return L.resolve()}deleteFieldIndex(e,n){return L.resolve()}deleteAllFieldIndexes(e){return L.resolve()}createTargetIndexes(e,n){return L.resolve()}getDocumentsMatchingTarget(e,n){return L.resolve(null)}getIndexType(e,n){return L.resolve(0)}getFieldIndexes(e,n){return L.resolve([])}getNextCollectionGroupToUpdate(e){return L.resolve(null)}getMinOffset(e,n){return L.resolve(Zn.min())}getMinOffsetFromCollectionGroup(e,n){return L.resolve(Zn.min())}updateCollectionGroup(e,n,r){return L.resolve()}updateIndexEntries(e,n){return L.resolve()}}class lS{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Be(pe.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Be(pe.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vp={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},jv=41943040;class gt{static withCacheSize(e){return new gt(e,gt.DEFAULT_COLLECTION_PERCENTILE,gt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */gt.DEFAULT_COLLECTION_PERCENTILE=10,gt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,gt.DEFAULT=new gt(jv,gt.DEFAULT_COLLECTION_PERCENTILE,gt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),gt.DISABLED=new gt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cs{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Cs(0)}static cr(){return new Cs(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dp="LruGarbageCollector",uS=1048576;function jp([t,e],[n,r]){const s=ne(t,n);return s===0?ne(e,r):s}class cS{constructor(e){this.Ir=e,this.buffer=new Be(jp),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();jp(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class hS{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){$(Dp,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Ls(n)?$(Dp,"Ignoring IndexedDB error during garbage collection: ",n):await js(n)}await this.Vr(3e5)})}}class dS{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return L.resolve(xl.ce);const r=new cS(n);return this.mr.forEachTarget(e,s=>r.Ar(s.sequenceNumber)).next(()=>this.mr.pr(e,s=>r.Ar(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?($("LruGarbageCollector","Garbage collection skipped; disabled"),L.resolve(Vp)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?($("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Vp):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,s,i,o,l,u,h;const p=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?($("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),s=this.params.maximumSequenceNumbersToCollect):s=m,o=Date.now(),this.nthSequenceNumber(e,s))).next(m=>(r=m,l=Date.now(),this.removeTargets(e,r,n))).next(m=>(i=m,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(m=>(h=Date.now(),Wr()<=ie.DEBUG&&$("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-p}ms
	Determined least recently used ${s} in `+(l-o)+`ms
	Removed ${i} targets in `+(u-l)+`ms
	Removed ${m} documents in `+(h-u)+`ms
Total Duration: ${h-p}ms`),L.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:m})))}}function fS(t,e){return new dS(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mS{constructor(){this.changes=new Or(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,ot.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?L.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pS{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gS{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&Ni(r.mutation,s,kt.empty(),_e.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,re()).next(()=>r))}getLocalViewOfDocuments(e,n,r=re()){const s=Er();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=mi();return i.forEach((l,u)=>{o=o.insert(l,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Er();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,re()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,s){let i=Tn();const o=bi(),l=function(){return bi()}();return n.forEach((u,h)=>{const p=r.get(h.key);s.has(h.key)&&(p===void 0||p.mutation instanceof ur)?i=i.insert(h.key,h):p!==void 0?(o.set(h.key,p.mutation.getFieldMask()),Ni(p.mutation,h,p.mutation.getFieldMask(),_e.now())):o.set(h.key,kt.empty())}),this.recalculateAndSaveOverlays(e,i).next(u=>(u.forEach((h,p)=>o.set(h,p)),n.forEach((h,p)=>l.set(h,new pS(p,o.get(h)??null))),l))}recalculateAndSaveOverlays(e,n){const r=bi();let s=new Ae((o,l)=>o-l),i=re();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(u=>{const h=n.get(u);if(h===null)return;let p=r.get(u)||kt.empty();p=l.applyToLocalView(h,p),r.set(u,p);const m=(s.get(l.batchId)||re()).add(u);s=s.insert(l.batchId,m)})}).next(()=>{const o=[],l=s.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),h=u.key,p=u.value,m=yv();p.forEach(g=>{if(!i.has(g)){const S=Tv(n.get(g),r.get(g));S!==null&&m.set(g,S),i=i.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,h,m))}return L.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return W.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):dv(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):L.resolve(Er());let l=Xi,u=i;return o.next(h=>L.forEach(h,(p,m)=>(l<m.largestBatchId&&(l=m.largestBatchId),i.get(p)?L.resolve():this.remoteDocumentCache.getEntry(e,p).next(g=>{u=u.insert(p,g)}))).next(()=>this.populateOverlays(e,h,i)).next(()=>this.computeViews(e,u,h,re())).next(p=>({batchId:l,changes:gv(p)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new W(n)).next(r=>{let s=mi();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=mi();return this.indexManager.getCollectionParents(e,i).next(l=>L.forEach(l,u=>{const h=function(m,g){return new Ms(g,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,u.child(i));return this.getDocumentsMatchingCollectionQuery(e,h,r,s).next(p=>{p.forEach((m,g)=>{o=o.insert(m,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((u,h)=>{const p=h.getKey();o.get(p)===null&&(o=o.insert(p,ot.newInvalidDocument(p)))});let l=mi();return o.forEach((u,h)=>{const p=i.get(u);p!==void 0&&Ni(p.mutation,h,kt.empty(),_e.now()),Il(n,h)&&(l=l.insert(u,h))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yS{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return L.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:an(s.createTime)}}(n)),L.resolve()}getNamedQuery(e,n){return L.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(s){return{name:s.name,query:oS(s.bundledQuery),readTime:an(s.readTime)}}(n)),L.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vS{constructor(){this.overlays=new Ae(W.comparator),this.qr=new Map}getOverlay(e,n){return L.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Er();return L.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.St(e,n,i)}),L.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.qr.delete(r)),L.resolve()}getOverlaysForCollection(e,n,r){const s=Er(),i=n.length+1,o=new W(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const u=l.getNext().value,h=u.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===i&&u.largestBatchId>r&&s.set(u.getKey(),u)}return L.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Ae((h,p)=>h-p);const o=this.overlays.getIterator();for(;o.hasNext();){const h=o.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>r){let p=i.get(h.largestBatchId);p===null&&(p=Er(),i=i.insert(h.largestBatchId,p)),p.set(h.getKey(),h)}}const l=Er(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((h,p)=>l.set(h,p)),!(l.size()>=s)););return L.resolve(l)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new LT(n,r));let i=this.qr.get(n);i===void 0&&(i=re(),this.qr.set(n,i)),this.qr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _S{constructor(){this.sessionToken=Ze.EMPTY_BYTE_STRING}getSessionToken(e){return L.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,L.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pd{constructor(){this.Qr=new Be(qe.$r),this.Ur=new Be(qe.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new qe(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new qe(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new W(new pe([])),r=new qe(n,e),s=new qe(n,e+1),i=[];return this.Ur.forEachInRange([r,s],o=>{this.Gr(o),i.push(o.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new W(new pe([])),r=new qe(n,e),s=new qe(n,e+1);let i=re();return this.Ur.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new qe(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class qe{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return W.comparator(e.key,n.key)||ne(e.Yr,n.Yr)}static Kr(e,n){return ne(e.Yr,n.Yr)||W.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wS{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Be(qe.$r)}checkEmpty(e){return L.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new jT(i,n,r,s);this.mutationQueue.push(o);for(const l of s)this.Zr=this.Zr.add(new qe(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return L.resolve(o)}lookupMutationBatch(e,n){return L.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ei(r),i=s<0?0:s;return L.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return L.resolve(this.mutationQueue.length===0?sd:this.tr-1)}getAllMutationBatches(e){return L.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new qe(n,0),s=new qe(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([r,s],o=>{const l=this.Xr(o.Yr);i.push(l)}),L.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Be(ne);return n.forEach(s=>{const i=new qe(s,0),o=new qe(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,o],l=>{r=r.add(l.Yr)})}),L.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;W.isDocumentKey(i)||(i=i.child(""));const o=new qe(new W(i),0);let l=new Be(ne);return this.Zr.forEachWhile(u=>{const h=u.key.path;return!!r.isPrefixOf(h)&&(h.length===s&&(l=l.add(u.Yr)),!0)},o),L.resolve(this.ti(l))}ti(e){const n=[];return e.forEach(r=>{const s=this.Xr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){ce(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return L.forEach(n.mutations,s=>{const i=new qe(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new qe(n,0),s=this.Zr.firstAfterOrEqual(r);return L.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,L.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xS{constructor(e){this.ri=e,this.docs=function(){return new Ae(W.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return L.resolve(r?r.document.mutableCopy():ot.newInvalidDocument(n))}getEntries(e,n){let r=Tn();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():ot.newInvalidDocument(s))}),L.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Tn();const o=n.path,l=new W(o.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:h,value:{document:p}}=u.getNext();if(!o.isPrefixOf(h.path))break;h.path.length>o.length+1||K2(Q2(p),r)<=0||(s.has(p.key)||Il(n,p))&&(i=i.insert(p.key,p.mutableCopy()))}return L.resolve(i)}getAllFromCollectionGroup(e,n,r,s){G(9500)}ii(e,n){return L.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new ES(this)}getSize(e){return L.resolve(this.size)}}class ES extends mS{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)}),L.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TS{constructor(e){this.persistence=e,this.si=new Or(n=>ad(n),ld),this.lastRemoteSnapshotVersion=K.min(),this.highestTargetId=0,this.oi=0,this._i=new pd,this.targetCount=0,this.ai=Cs.ur()}forEachTarget(e,n){return this.si.forEach((r,s)=>n(s)),L.resolve()}getLastRemoteSnapshotVersion(e){return L.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return L.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),L.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),L.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Cs(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,L.resolve()}updateTargetData(e,n){return this.Pr(n),L.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,L.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.si.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.si.delete(o),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),L.waitFor(i).next(()=>s)}getTargetCount(e){return L.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return L.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),L.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),L.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),L.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return L.resolve(r)}containsKey(e,n){return L.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lv{constructor(e,n){this.ui={},this.overlays={},this.ci=new xl(0),this.li=!1,this.li=!0,this.hi=new _S,this.referenceDelegate=e(this),this.Pi=new TS(this),this.indexManager=new aS,this.remoteDocumentCache=function(s){return new xS(s)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new iS(n),this.Ii=new yS(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new vS,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new wS(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){$("MemoryPersistence","Starting transaction:",e);const s=new SS(this.ci.next());return this.referenceDelegate.Ei(),r(s).next(i=>this.referenceDelegate.di(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ai(e,n){return L.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class SS extends X2{constructor(e){super(),this.currentSequenceNumber=e}}class gd{constructor(e){this.persistence=e,this.Ri=new pd,this.Vi=null}static mi(e){return new gd(e)}get fi(){if(this.Vi)return this.Vi;throw G(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),L.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),L.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),L.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(s=>this.fi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.fi.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return L.forEach(this.fi,r=>{const s=W.fromPath(r);return this.gi(e,s).next(i=>{i||n.removeEntry(s,K.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return L.or([()=>L.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Xa{constructor(e,n){this.persistence=e,this.pi=new Or(r=>eT(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=fS(this,n)}static mi(e,n){return new Xa(e,n)}Ei(){}di(e){return L.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return L.forEach(this.pi,(r,s)=>this.br(e,r,s).next(i=>i?L.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ii(e,o=>this.br(e,o,n).next(l=>{l||(r++,i.removeEntry(o,K.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),L.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),L.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),L.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),L.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=ha(e.data.value)),n}br(e,n,r){return L.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.pi.get(n);return L.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yd{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=s}static As(e,n){let r=re(),s=re();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new yd(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IS{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kS{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return vE()?8:J2(gE())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ys(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ws(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new IS;return this.Ss(e,n,o).next(l=>{if(i.result=l,this.Vs)return this.bs(e,n,o,l.size)})}).next(()=>i.result)}bs(e,n,r,s){return r.documentReadCount<this.fs?(Wr()<=ie.DEBUG&&$("QueryEngine","SDK will not create cache indexes for query:",Gr(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),L.resolve()):(Wr()<=ie.DEBUG&&$("QueryEngine","Query:",Gr(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(Wr()<=ie.DEBUG&&$("QueryEngine","The SDK decides to create cache indexes for query:",Gr(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,on(n))):L.resolve())}ys(e,n){if(Tp(n))return L.resolve(null);let r=on(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Wc(n,null,"F"),r=on(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=re(...i);return this.ps.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(u=>{const h=this.Ds(n,l);return this.Cs(n,h,o,u.readTime)?this.ys(e,Wc(n,null,"F")):this.vs(e,h,n,u)}))})))}ws(e,n,r,s){return Tp(n)||s.isEqual(K.min())?L.resolve(null):this.ps.getDocuments(e,r).next(i=>{const o=this.Ds(n,i);return this.Cs(n,o,r,s)?L.resolve(null):(Wr()<=ie.DEBUG&&$("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Gr(n)),this.vs(e,o,n,G2(s,Xi)).next(l=>l))})}Ds(e,n){let r=new Be(mv(e));return n.forEach((s,i)=>{Il(e,i)&&(r=r.add(i))}),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ss(e,n,r){return Wr()<=ie.DEBUG&&$("QueryEngine","Using full collection scan to execute query:",Gr(n)),this.ps.getDocumentsMatchingQuery(e,n,Zn.min(),r)}vs(e,n,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vd="LocalStore",AS=3e8;class CS{constructor(e,n,r,s){this.persistence=e,this.Fs=n,this.serializer=s,this.Ms=new Ae(ne),this.xs=new Or(i=>ad(i),ld),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new gS(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function bS(t,e,n,r){return new CS(t,e,n,r)}async function Mv(t,e){const n=Y(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],l=[];let u=re();for(const h of s){o.push(h.batchId);for(const p of h.mutations)u=u.add(p.key)}for(const h of i){l.push(h.batchId);for(const p of h.mutations)u=u.add(p.key)}return n.localDocuments.getDocuments(r,u).next(h=>({Ls:h,removedBatchIds:o,addedBatchIds:l}))})})}function NS(t,e){const n=Y(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(l,u,h,p){const m=h.batch,g=m.keys();let S=L.resolve();return g.forEach(b=>{S=S.next(()=>p.getEntry(u,b)).next(N=>{const D=h.docVersions.get(b);ce(D!==null,48541),N.version.compareTo(D)<0&&(m.applyToRemoteDocument(N,h),N.isValidDocument()&&(N.setReadTime(h.commitVersion),p.addEntry(N)))})}),S.next(()=>l.mutationQueue.removeMutationBatch(u,m))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let u=re();for(let h=0;h<l.mutationResults.length;++h)l.mutationResults[h].transformResults.length>0&&(u=u.add(l.batch.mutations[h].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function Ov(t){const e=Y(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function RS(t,e){const n=Y(t),r=e.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const l=[];e.targetChanges.forEach((p,m)=>{const g=s.get(m);if(!g)return;l.push(n.Pi.removeMatchingKeys(i,p.removedDocuments,m).next(()=>n.Pi.addMatchingKeys(i,p.addedDocuments,m)));let S=g.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(m)!==null?S=S.withResumeToken(Ze.EMPTY_BYTE_STRING,K.min()).withLastLimboFreeSnapshotVersion(K.min()):p.resumeToken.approximateByteSize()>0&&(S=S.withResumeToken(p.resumeToken,r)),s=s.insert(m,S),function(N,D,_){return N.resumeToken.approximateByteSize()===0||D.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=AS?!0:_.addedDocuments.size+_.modifiedDocuments.size+_.removedDocuments.size>0}(g,S,p)&&l.push(n.Pi.updateTargetData(i,S))});let u=Tn(),h=re();if(e.documentUpdates.forEach(p=>{e.resolvedLimboDocuments.has(p)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,p))}),l.push(PS(i,o,e.documentUpdates).next(p=>{u=p.ks,h=p.qs})),!r.isEqual(K.min())){const p=n.Pi.getLastRemoteSnapshotVersion(i).next(m=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,r));l.push(p)}return L.waitFor(l).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,u,h)).next(()=>u)}).then(i=>(n.Ms=s,i))}function PS(t,e,n){let r=re(),s=re();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=Tn();return n.forEach((l,u)=>{const h=i.get(l);u.isFoundDocument()!==h.isFoundDocument()&&(s=s.add(l)),u.isNoDocument()&&u.version.isEqual(K.min())?(e.removeEntry(l,u.readTime),o=o.insert(l,u)):!h.isValidDocument()||u.version.compareTo(h.version)>0||u.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(u),o=o.insert(l,u)):$(vd,"Ignoring outdated watch update for ",l,". Current version:",h.version," Watch version:",u.version)}),{ks:o,qs:s}})}function VS(t,e){const n=Y(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=sd),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function DS(t,e){const n=Y(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Pi.getTargetData(r,e).next(i=>i?(s=i,L.resolve(s)):n.Pi.allocateTargetId(r).next(o=>(s=new On(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function Xc(t,e,n){const r=Y(t),s=r.Ms.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Ls(o))throw o;$(vd,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(s.target)}function Lp(t,e,n){const r=Y(t);let s=K.min(),i=re();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,h,p){const m=Y(u),g=m.xs.get(p);return g!==void 0?L.resolve(m.Ms.get(g)):m.Pi.getTargetData(h,p)}(r,o,on(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,l.targetId).next(u=>{i=u})}).next(()=>r.Fs.getDocumentsMatchingQuery(o,e,n?s:K.min(),n?i:re())).next(l=>(jS(r,_T(e),l),{documents:l,Qs:i})))}function jS(t,e,n){let r=t.Os.get(e)||K.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.Os.set(e,r)}class Mp{constructor(){this.activeTargetIds=IT()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class LS{constructor(){this.Mo=new Mp,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Mp,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MS{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Op="ConnectivityMonitor";class Fp{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){$(Op,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){$(Op,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xo=null;function Jc(){return Xo===null?Xo=function(){return 268435456+Math.round(2147483648*Math.random())}():Xo++,"0x"+Xo.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lu="RestConnection",OS={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class FS{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===Wa?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,n,r,s,i){const o=Jc(),l=this.zo(e,n.toUriEncodedString());$(Lu,`Sending RPC '${e}' ${o}:`,l,r);const u={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(u,s,i);const{host:h}=new URL(l),p=ed(h);return this.Jo(e,l,u,r,p).then(m=>($(Lu,`Received RPC '${e}' ${o}: `,m),m),m=>{throw Ss(Lu,`RPC '${e}' ${o} failed with error: `,m,"url: ",l,"request:",r),m})}Ho(e,n,r,s,i,o){return this.Go(e,n,r,s,i)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ds}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}zo(e,n){const r=OS[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zS{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rt="WebChannelConnection";class US extends FS{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,i){const o=Jc();return new Promise((l,u)=>{const h=new U0;h.setWithCredentials(!0),h.listenOnce(B0.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case ca.NO_ERROR:const m=h.getResponseJson();$(rt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(m)),l(m);break;case ca.TIMEOUT:$(rt,`RPC '${e}' ${o} timed out`),u(new B(j.DEADLINE_EXCEEDED,"Request time out"));break;case ca.HTTP_ERROR:const g=h.getStatus();if($(rt,`RPC '${e}' ${o} failed with status:`,g,"response text:",h.getResponseText()),g>0){let S=h.getResponseJson();Array.isArray(S)&&(S=S[0]);const b=S==null?void 0:S.error;if(b&&b.status&&b.message){const N=function(_){const x=_.toLowerCase().replace(/_/g,"-");return Object.values(j).indexOf(x)>=0?x:j.UNKNOWN}(b.status);u(new B(N,b.message))}else u(new B(j.UNKNOWN,"Server responded with status "+h.getStatus()))}else u(new B(j.UNAVAILABLE,"Connection failed."));break;default:G(9055,{l_:e,streamId:o,h_:h.getLastErrorCode(),P_:h.getLastError()})}}finally{$(rt,`RPC '${e}' ${o} completed.`)}});const p=JSON.stringify(s);$(rt,`RPC '${e}' ${o} sending request:`,s),h.send(n,"POST",p,r,15)})}T_(e,n,r){const s=Jc(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=H0(),l=q0(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(u.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(u.useFetchStreams=!0),this.jo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const p=i.join("");$(rt,`Creating RPC '${e}' stream ${s}: ${p}`,u);const m=o.createWebChannel(p,u);this.I_(m);let g=!1,S=!1;const b=new zS({Yo:D=>{S?$(rt,`Not sending because RPC '${e}' stream ${s} is closed:`,D):(g||($(rt,`Opening RPC '${e}' stream ${s} transport.`),m.open(),g=!0),$(rt,`RPC '${e}' stream ${s} sending:`,D),m.send(D))},Zo:()=>m.close()}),N=(D,_,x)=>{D.listen(_,C=>{try{x(C)}catch(V){setTimeout(()=>{throw V},0)}})};return N(m,fi.EventType.OPEN,()=>{S||($(rt,`RPC '${e}' stream ${s} transport opened.`),b.o_())}),N(m,fi.EventType.CLOSE,()=>{S||(S=!0,$(rt,`RPC '${e}' stream ${s} transport closed`),b.a_(),this.E_(m))}),N(m,fi.EventType.ERROR,D=>{S||(S=!0,Ss(rt,`RPC '${e}' stream ${s} transport errored. Name:`,D.name,"Message:",D.message),b.a_(new B(j.UNAVAILABLE,"The operation could not be completed")))}),N(m,fi.EventType.MESSAGE,D=>{var _;if(!S){const x=D.data[0];ce(!!x,16349);const C=x,V=(C==null?void 0:C.error)||((_=C[0])==null?void 0:_.error);if(V){$(rt,`RPC '${e}' stream ${s} received error:`,V);const M=V.status;let F=function(T){const k=De[T];if(k!==void 0)return Iv(k)}(M),E=V.message;F===void 0&&(F=j.INTERNAL,E="Unknown error status: "+M+" with message "+V.message),S=!0,b.a_(new B(F,E)),m.close()}else $(rt,`RPC '${e}' stream ${s} received:`,x),b.u_(x)}}),N(l,$0.STAT_EVENT,D=>{D.stat===Fc.PROXY?$(rt,`RPC '${e}' stream ${s} detected buffering proxy`):D.stat===Fc.NOPROXY&&$(rt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{b.__()},0),b}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function Mu(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bl(t){return new HT(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fv{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=s,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&$("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zp="PersistentStream";class zv{constructor(e,n,r,s,i,o,l,u){this.Mi=e,this.S_=r,this.b_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Fv(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===j.RESOURCE_EXHAUSTED?(En(n.toString()),En("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===j.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.D_===n&&this.G_(r,s)},r=>{e(()=>{const s=new B(j.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(s=>{r(()=>this.z_(s))}),this.stream.onMessage(s=>{r(()=>++this.F_==1?this.J_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return $(zp,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():($(zp,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class BS extends zv{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=QT(this.serializer,e),r=function(i){if(!("targetChange"in i))return K.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?K.min():o.readTime?an(o.readTime):K.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=Yc(this.serializer),n.addTarget=function(i,o){let l;const u=o.target;if(l=qc(u)?{documents:XT(i,u)}:{query:JT(i,u).ft},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=Cv(i,o.resumeToken);const h=Gc(i,o.expectedCount);h!==null&&(l.expectedCount=h)}else if(o.snapshotVersion.compareTo(K.min())>0){l.readTime=Ya(i,o.snapshotVersion.toTimestamp());const h=Gc(i,o.expectedCount);h!==null&&(l.expectedCount=h)}return l}(this.serializer,e);const r=eS(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=Yc(this.serializer),n.removeTarget=e,this.q_(n)}}class $S extends zv{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return ce(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ce(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ce(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=YT(e.writeResults,e.commitTime),r=an(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=Yc(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>KT(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qS{}class HS extends qS{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new B(j.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Go(e,Qc(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new B(j.UNKNOWN,i.toString())})}Ho(e,n,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Ho(e,Qc(n,r),s,o,l,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new B(j.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class WS{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(En(n),this.aa=!1):$("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dr="RemoteStore";class GS{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(o=>{r.enqueueAndForget(async()=>{Fr(this)&&($(Dr,"Restarting streams for network reachability change."),await async function(u){const h=Y(u);h.Ea.add(4),await po(h),h.Ra.set("Unknown"),h.Ea.delete(4),await Nl(h)}(this))})}),this.Ra=new WS(r,s)}}async function Nl(t){if(Fr(t))for(const e of t.da)await e(!0)}async function po(t){for(const e of t.da)await e(!1)}function Uv(t,e){const n=Y(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Ed(n)?xd(n):Os(n).O_()&&wd(n,e))}function _d(t,e){const n=Y(t),r=Os(n);n.Ia.delete(e),r.O_()&&Bv(n,e),n.Ia.size===0&&(r.O_()?r.L_():Fr(n)&&n.Ra.set("Unknown"))}function wd(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(K.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Os(t).Y_(e)}function Bv(t,e){t.Va.Ue(e),Os(t).Z_(e)}function xd(t){t.Va=new UT({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Os(t).start(),t.Ra.ua()}function Ed(t){return Fr(t)&&!Os(t).x_()&&t.Ia.size>0}function Fr(t){return Y(t).Ea.size===0}function $v(t){t.Va=void 0}async function QS(t){t.Ra.set("Online")}async function KS(t){t.Ia.forEach((e,n)=>{wd(t,e)})}async function YS(t,e){$v(t),Ed(t)?(t.Ra.ha(e),xd(t)):t.Ra.set("Unknown")}async function XS(t,e,n){if(t.Ra.set("Online"),e instanceof Av&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const l of i.targetIds)s.Ia.has(l)&&(await s.remoteSyncer.rejectListen(l,o),s.Ia.delete(l),s.Va.removeTarget(l))}(t,e)}catch(r){$(Dr,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Ja(t,r)}else if(e instanceof ma?t.Va.Ze(e):e instanceof kv?t.Va.st(e):t.Va.tt(e),!n.isEqual(K.min()))try{const r=await Ov(t.localStore);n.compareTo(r)>=0&&await function(i,o){const l=i.Va.Tt(o);return l.targetChanges.forEach((u,h)=>{if(u.resumeToken.approximateByteSize()>0){const p=i.Ia.get(h);p&&i.Ia.set(h,p.withResumeToken(u.resumeToken,o))}}),l.targetMismatches.forEach((u,h)=>{const p=i.Ia.get(u);if(!p)return;i.Ia.set(u,p.withResumeToken(Ze.EMPTY_BYTE_STRING,p.snapshotVersion)),Bv(i,u);const m=new On(p.target,u,h,p.sequenceNumber);wd(i,m)}),i.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){$(Dr,"Failed to raise snapshot:",r),await Ja(t,r)}}async function Ja(t,e,n){if(!Ls(e))throw e;t.Ea.add(1),await po(t),t.Ra.set("Offline"),n||(n=()=>Ov(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{$(Dr,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Nl(t)})}function qv(t,e){return e().catch(n=>Ja(t,n,e))}async function Rl(t){const e=Y(t),n=rr(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:sd;for(;JS(e);)try{const s=await VS(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,ZS(e,s)}catch(s){await Ja(e,s)}Hv(e)&&Wv(e)}function JS(t){return Fr(t)&&t.Ta.length<10}function ZS(t,e){t.Ta.push(e);const n=rr(t);n.O_()&&n.X_&&n.ea(e.mutations)}function Hv(t){return Fr(t)&&!rr(t).x_()&&t.Ta.length>0}function Wv(t){rr(t).start()}async function eI(t){rr(t).ra()}async function tI(t){const e=rr(t);for(const n of t.Ta)e.ea(n.mutations)}async function nI(t,e,n){const r=t.Ta.shift(),s=dd.from(r,e,n);await qv(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Rl(t)}async function rI(t,e){e&&rr(t).X_&&await async function(r,s){if(function(o){return OT(o)&&o!==j.ABORTED}(s.code)){const i=r.Ta.shift();rr(r).B_(),await qv(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Rl(r)}}(t,e),Hv(t)&&Wv(t)}async function Up(t,e){const n=Y(t);n.asyncQueue.verifyOperationInProgress(),$(Dr,"RemoteStore received new credentials");const r=Fr(n);n.Ea.add(3),await po(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Nl(n)}async function sI(t,e){const n=Y(t);e?(n.Ea.delete(2),await Nl(n)):e||(n.Ea.add(2),await po(n),n.Ra.set("Unknown"))}function Os(t){return t.ma||(t.ma=function(n,r,s){const i=Y(n);return i.sa(),new BS(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:QS.bind(null,t),t_:KS.bind(null,t),r_:YS.bind(null,t),H_:XS.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),Ed(t)?xd(t):t.Ra.set("Unknown")):(await t.ma.stop(),$v(t))})),t.ma}function rr(t){return t.fa||(t.fa=function(n,r,s){const i=Y(n);return i.sa(),new $S(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:eI.bind(null,t),r_:rI.bind(null,t),ta:tI.bind(null,t),na:nI.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await Rl(t)):(await t.fa.stop(),t.Ta.length>0&&($(Dr,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Td{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Ir,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,l=new Td(e,n,o,s,i);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new B(j.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Sd(t,e){if(En("AsyncQueue",`${e}: ${t}`),Ls(t))return new B(j.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ps{static emptySet(e){return new ps(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||W.comparator(n.key,r.key):(n,r)=>W.comparator(n.key,r.key),this.keyedMap=mi(),this.sortedSet=new Ae(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ps)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new ps;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bp{constructor(){this.ga=new Ae(W.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):G(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class bs{constructor(e,n,r,s,i,o,l,u,h){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=h}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new bs(e,n,ps.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Sl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iI{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class oI{constructor(){this.queries=$p(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=Y(n),i=s.queries;s.queries=$p(),i.forEach((o,l)=>{for(const u of l.Sa)u.onError(r)})})(this,new B(j.ABORTED,"Firestore shutting down"))}}function $p(){return new Or(t=>fv(t),Sl)}async function aI(t,e){const n=Y(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.ba()&&e.Da()&&(r=2):(i=new iI,r=e.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(s,!0);break;case 1:i.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const l=Sd(o,`Initialization of query '${Gr(e.query)}' failed`);return void e.onError(l)}n.queries.set(s,i),i.Sa.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&Id(n)}async function lI(t,e){const n=Y(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.Sa.indexOf(e);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?s=e.Da()?0:1:!i.ba()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function uI(t,e){const n=Y(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const l of o.Sa)l.Fa(s)&&(r=!0);o.wa=s}}r&&Id(n)}function cI(t,e,n){const r=Y(t),s=r.queries.get(e);if(s)for(const i of s.Sa)i.onError(n);r.queries.delete(e)}function Id(t){t.Ca.forEach(e=>{e.next()})}var Zc,qp;(qp=Zc||(Zc={})).Ma="default",qp.Cache="cache";class hI{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new bs(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=bs.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Zc.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gv{constructor(e){this.key=e}}class Qv{constructor(e){this.key=e}}class dI{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=re(),this.mutatedKeys=re(),this.eu=mv(e),this.tu=new ps(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new Bp,s=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,l=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,h=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((p,m)=>{const g=s.get(p),S=Il(this.query,m)?m:null,b=!!g&&this.mutatedKeys.has(g.key),N=!!S&&(S.hasLocalMutations||this.mutatedKeys.has(S.key)&&S.hasCommittedMutations);let D=!1;g&&S?g.data.isEqual(S.data)?b!==N&&(r.track({type:3,doc:S}),D=!0):this.su(g,S)||(r.track({type:2,doc:S}),D=!0,(u&&this.eu(S,u)>0||h&&this.eu(S,h)<0)&&(l=!0)):!g&&S?(r.track({type:0,doc:S}),D=!0):g&&!S&&(r.track({type:1,doc:g}),D=!0,(u||h)&&(l=!0)),D&&(S?(o=o.add(S),i=N?i.add(p):i.delete(p)):(o=o.delete(p),i=i.delete(p)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const p=this.query.limitType==="F"?o.last():o.first();o=o.delete(p.key),i=i.delete(p.key),r.track({type:1,doc:p})}return{tu:o,iu:r,Cs:l,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((p,m)=>function(S,b){const N=D=>{switch(D){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return G(20277,{Rt:D})}};return N(S)-N(b)}(p.type,m.type)||this.eu(p.doc,m.doc)),this.ou(r),s=s??!1;const l=n&&!s?this._u():[],u=this.Xa.size===0&&this.current&&!s?1:0,h=u!==this.Za;return this.Za=u,o.length!==0||h?{snapshot:new bs(this.query,e.tu,i,o,e.mutatedKeys,u===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Bp,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=re(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new Qv(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new Gv(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=re();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return bs.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const kd="SyncEngine";class fI{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class mI{constructor(e){this.key=e,this.hu=!1}}class pI{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Or(l=>fv(l),Sl),this.Iu=new Map,this.Eu=new Set,this.du=new Ae(W.comparator),this.Au=new Map,this.Ru=new pd,this.Vu={},this.mu=new Map,this.fu=Cs.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function gI(t,e,n=!0){const r=e_(t);let s;const i=r.Tu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await Kv(r,e,n,!0),s}async function yI(t,e){const n=e_(t);await Kv(n,e,!0,!1)}async function Kv(t,e,n,r){const s=await DS(t.localStore,on(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let l;return r&&(l=await vI(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&Uv(t.remoteStore,s),l}async function vI(t,e,n,r,s){t.pu=(m,g,S)=>async function(N,D,_,x){let C=D.view.ru(_);C.Cs&&(C=await Lp(N.localStore,D.query,!1).then(({documents:E})=>D.view.ru(E,C)));const V=x&&x.targetChanges.get(D.targetId),M=x&&x.targetMismatches.get(D.targetId)!=null,F=D.view.applyChanges(C,N.isPrimaryClient,V,M);return Wp(N,D.targetId,F.au),F.snapshot}(t,m,g,S);const i=await Lp(t.localStore,e,!0),o=new dI(e,i.Qs),l=o.ru(i.documents),u=mo.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),h=o.applyChanges(l,t.isPrimaryClient,u);Wp(t,n,h.au);const p=new fI(e,n,o);return t.Tu.set(e,p),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),h.snapshot}async function _I(t,e,n){const r=Y(t),s=r.Tu.get(e),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter(o=>!Sl(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Xc(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&_d(r.remoteStore,s.targetId),eh(r,s.targetId)}).catch(js)):(eh(r,s.targetId),await Xc(r.localStore,s.targetId,!0))}async function wI(t,e){const n=Y(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),_d(n.remoteStore,r.targetId))}async function xI(t,e,n){const r=CI(t);try{const s=await function(o,l){const u=Y(o),h=_e.now(),p=l.reduce((S,b)=>S.add(b.key),re());let m,g;return u.persistence.runTransaction("Locally write mutations","readwrite",S=>{let b=Tn(),N=re();return u.Ns.getEntries(S,p).next(D=>{b=D,b.forEach((_,x)=>{x.isValidDocument()||(N=N.add(_))})}).next(()=>u.localDocuments.getOverlayedDocuments(S,b)).next(D=>{m=D;const _=[];for(const x of l){const C=VT(x,m.get(x.key).overlayedDocument);C!=null&&_.push(new ur(x.key,C,iv(C.value.mapValue),Lt.exists(!0)))}return u.mutationQueue.addMutationBatch(S,h,_,l)}).next(D=>{g=D;const _=D.applyToLocalDocumentSet(m,N);return u.documentOverlayCache.saveOverlays(S,D.batchId,_)})}).then(()=>({batchId:g.batchId,changes:gv(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,l,u){let h=o.Vu[o.currentUser.toKey()];h||(h=new Ae(ne)),h=h.insert(l,u),o.Vu[o.currentUser.toKey()]=h}(r,s.batchId,n),await go(r,s.changes),await Rl(r.remoteStore)}catch(s){const i=Sd(s,"Failed to persist write");n.reject(i)}}async function Yv(t,e){const n=Y(t);try{const r=await RS(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Au.get(i);o&&(ce(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.hu=!0:s.modifiedDocuments.size>0?ce(o.hu,14607):s.removedDocuments.size>0&&(ce(o.hu,42227),o.hu=!1))}),await go(n,r,e)}catch(r){await js(r)}}function Hp(t,e,n){const r=Y(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach((i,o)=>{const l=o.view.va(e);l.snapshot&&s.push(l.snapshot)}),function(o,l){const u=Y(o);u.onlineState=l;let h=!1;u.queries.forEach((p,m)=>{for(const g of m.Sa)g.va(l)&&(h=!0)}),h&&Id(u)}(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function EI(t,e,n){const r=Y(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),i=s&&s.key;if(i){let o=new Ae(W.comparator);o=o.insert(i,ot.newNoDocument(i,K.min()));const l=re().add(i),u=new Cl(K.min(),new Map,new Ae(ne),o,l);await Yv(r,u),r.du=r.du.remove(i),r.Au.delete(e),Ad(r)}else await Xc(r.localStore,e,!1).then(()=>eh(r,e,n)).catch(js)}async function TI(t,e){const n=Y(t),r=e.batch.batchId;try{const s=await NS(n.localStore,e);Jv(n,r,null),Xv(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await go(n,s)}catch(s){await js(s)}}async function SI(t,e,n){const r=Y(t);try{const s=await function(o,l){const u=Y(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let p;return u.mutationQueue.lookupMutationBatch(h,l).next(m=>(ce(m!==null,37113),p=m.keys(),u.mutationQueue.removeMutationBatch(h,m))).next(()=>u.mutationQueue.performConsistencyCheck(h)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(h,p,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,p)).next(()=>u.localDocuments.getDocuments(h,p))})}(r.localStore,e);Jv(r,e,n),Xv(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await go(r,s)}catch(s){await js(s)}}function Xv(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function Jv(t,e,n){const r=Y(t);let s=r.Vu[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Vu[r.currentUser.toKey()]=s}}function eh(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||Zv(t,r)})}function Zv(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(_d(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),Ad(t))}function Wp(t,e,n){for(const r of n)r instanceof Gv?(t.Ru.addReference(r.key,e),II(t,r)):r instanceof Qv?($(kd,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||Zv(t,r.key)):G(19791,{wu:r})}function II(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||($(kd,"New document in limbo: "+n),t.Eu.add(r),Ad(t))}function Ad(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new W(pe.fromString(e)),r=t.fu.next();t.Au.set(r,new mI(n)),t.du=t.du.insert(n,r),Uv(t.remoteStore,new On(on(ud(n.path)),r,"TargetPurposeLimboResolution",xl.ce))}}async function go(t,e,n){const r=Y(t),s=[],i=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((l,u)=>{o.push(r.pu(u,e,n).then(h=>{var p;if((h||n)&&r.isPrimaryClient){const m=h?!h.fromCache:(p=n==null?void 0:n.targetChanges.get(u.targetId))==null?void 0:p.current;r.sharedClientState.updateQueryState(u.targetId,m?"current":"not-current")}if(h){s.push(h);const m=yd.As(u.targetId,h);i.push(m)}}))}),await Promise.all(o),r.Pu.H_(s),await async function(u,h){const p=Y(u);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>L.forEach(h,g=>L.forEach(g.Es,S=>p.persistence.referenceDelegate.addReference(m,g.targetId,S)).next(()=>L.forEach(g.ds,S=>p.persistence.referenceDelegate.removeReference(m,g.targetId,S)))))}catch(m){if(!Ls(m))throw m;$(vd,"Failed to update sequence numbers: "+m)}for(const m of h){const g=m.targetId;if(!m.fromCache){const S=p.Ms.get(g),b=S.snapshotVersion,N=S.withLastLimboFreeSnapshotVersion(b);p.Ms=p.Ms.insert(g,N)}}}(r.localStore,i))}async function kI(t,e){const n=Y(t);if(!n.currentUser.isEqual(e)){$(kd,"User change. New user:",e.toKey());const r=await Mv(n.localStore,e);n.currentUser=e,function(i,o){i.mu.forEach(l=>{l.forEach(u=>{u.reject(new B(j.CANCELLED,o))})}),i.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await go(n,r.Ls)}}function AI(t,e){const n=Y(t),r=n.Au.get(e);if(r&&r.hu)return re().add(r.key);{let s=re();const i=n.Iu.get(e);if(!i)return s;for(const o of i){const l=n.Tu.get(o);s=s.unionWith(l.view.nu)}return s}}function e_(t){const e=Y(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Yv.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=AI.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=EI.bind(null,e),e.Pu.H_=uI.bind(null,e.eventManager),e.Pu.yu=cI.bind(null,e.eventManager),e}function CI(t){const e=Y(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=TI.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=SI.bind(null,e),e}class Za{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=bl(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return bS(this.persistence,new kS,e.initialUser,this.serializer)}Cu(e){return new Lv(gd.mi,this.serializer)}Du(e){return new LS}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Za.provider={build:()=>new Za};class bI extends Za{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){ce(this.persistence.referenceDelegate instanceof Xa,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new hS(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?gt.withCacheSize(this.cacheSizeBytes):gt.DEFAULT;return new Lv(r=>Xa.mi(r,n),this.serializer)}}class th{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Hp(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=kI.bind(null,this.syncEngine),await sI(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new oI}()}createDatastore(e){const n=bl(e.databaseInfo.databaseId),r=function(i){return new US(i)}(e.databaseInfo);return function(i,o,l,u){return new HS(i,o,l,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,l){return new GS(r,s,i,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>Hp(this.syncEngine,n,0),function(){return Fp.v()?new Fp:new MS}())}createSyncEngine(e,n){return function(s,i,o,l,u,h,p){const m=new pI(s,i,o,l,u,h);return p&&(m.gu=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=Y(s);$(Dr,"RemoteStore shutting down."),i.Ea.add(5),await po(i),i.Aa.shutdown(),i.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}th.provider={build:()=>new th};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NI{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):En("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sr="FirestoreClient";class RI{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=st.UNAUTHENTICATED,this.clientId=rd.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{$(sr,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>($(sr,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ir;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Sd(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Ou(t,e){t.asyncQueue.verifyOperationInProgress(),$(sr,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await Mv(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Gp(t,e){t.asyncQueue.verifyOperationInProgress();const n=await PI(t);$(sr,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Up(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>Up(e.remoteStore,s)),t._onlineComponents=e}async function PI(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){$(sr,"Using user provided OfflineComponentProvider");try{await Ou(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===j.FAILED_PRECONDITION||s.code===j.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Ss("Error using user provided cache. Falling back to memory cache: "+n),await Ou(t,new Za)}}else $(sr,"Using default OfflineComponentProvider"),await Ou(t,new bI(void 0));return t._offlineComponents}async function t_(t){return t._onlineComponents||(t._uninitializedComponentsProvider?($(sr,"Using user provided OnlineComponentProvider"),await Gp(t,t._uninitializedComponentsProvider._online)):($(sr,"Using default OnlineComponentProvider"),await Gp(t,new th))),t._onlineComponents}function VI(t){return t_(t).then(e=>e.syncEngine)}async function Qp(t){const e=await t_(t),n=e.eventManager;return n.onListen=gI.bind(null,e.syncEngine),n.onUnlisten=_I.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=yI.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=wI.bind(null,e.syncEngine),n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n_(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kp=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r_="firestore.googleapis.com",Yp=!0;class Xp{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new B(j.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=r_,this.ssl=Yp}else this.host=e.host,this.ssl=e.ssl??Yp;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=jv;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<uS)throw new B(j.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}W2("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=n_(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new B(j.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new B(j.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new B(j.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Pl{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Xp({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new B(j.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new B(j.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Xp(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new L2;switch(r.type){case"firstParty":return new z2(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new B(j.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Kp.get(n);r&&($("ComponentProvider","Removing Datastore"),Kp.delete(n),r.terminate())}(this),Promise.resolve()}}function DI(t,e,n,r={}){var h;t=sn(t,Pl);const s=ed(e),i=t._getSettings(),o={...i,emulatorOptions:t._getEmulatorOptions()},l=`${e}:${n}`;s&&(hE(`https://${l}`),pE("Firestore",!0)),i.host!==r_&&i.host!==l&&Ss("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...i,host:l,ssl:s,emulatorOptions:r};if(!Ba(u,o)&&(t._setSettings(u),r.mockUserToken)){let p,m;if(typeof r.mockUserToken=="string")p=r.mockUserToken,m=st.MOCK_USER;else{p=dE(r.mockUserToken,(h=t._app)==null?void 0:h.options.projectId);const g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new B(j.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new st(g)}t._authCredentials=new M2(new G0(p,m))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zr{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new zr(this.firestore,e,this._query)}}class Pe{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Yn(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Pe(this.firestore,e,this._key)}toJSON(){return{type:Pe._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(ho(n,Pe._jsonSchema))return new Pe(e,r||null,new W(pe.fromString(n.referencePath)))}}Pe._jsonSchemaVersion="firestore/documentReference/1.0",Pe._jsonSchema={type:Me("string",Pe._jsonSchemaVersion),referencePath:Me("string")};class Yn extends zr{constructor(e,n,r){super(e,n,ud(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Pe(this.firestore,null,new W(e))}withConverter(e){return new Yn(this.firestore,e,this._path)}}function io(t,e,...n){if(t=cn(t),Q0("collection","path",e),t instanceof Pl){const r=pe.fromString(e,...n);return up(r),new Yn(t,null,r)}{if(!(t instanceof Pe||t instanceof Yn))throw new B(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(pe.fromString(e,...n));return up(r),new Yn(t.firestore,null,r)}}function $t(t,e,...n){if(t=cn(t),arguments.length===1&&(e=rd.newId()),Q0("doc","path",e),t instanceof Pl){const r=pe.fromString(e,...n);return lp(r),new Pe(t,null,new W(r))}{if(!(t instanceof Pe||t instanceof Yn))throw new B(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(pe.fromString(e,...n));return lp(r),new Pe(t.firestore,t instanceof Yn?t.converter:null,new W(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jp="AsyncQueue";class Zp{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Fv(this,"async_queue_retry"),this._c=()=>{const r=Mu();r&&$(Jp,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=Mu();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Mu();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new Ir;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Ls(e))throw e;$(Jp,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,En("INTERNAL UNHANDLED ERROR: ",eg(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=Td.createAndSchedule(this,e,n,r,i=>this.hc(i));return this.tc.push(s),s}uc(){this.nc&&G(47125,{Pc:eg(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function eg(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tg(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class jr extends Pl{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new Zp,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Zp(e),this._firestoreClient=void 0,await e}}}function jI(t,e){const n=typeof t=="object"?t:I2(),r=typeof t=="string"?t:Wa,s=w2(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=uE("firestore");i&&DI(s,...i)}return s}function s_(t){if(t._terminated)throw new B(j.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||LI(t),t._firestoreClient}function LI(t){var r,s,i;const e=t._freezeSettings(),n=function(l,u,h,p){return new rT(l,u,h,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,n_(p.experimentalLongPollingOptions),p.useFetchStreams,p.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(s=e.localCache)!=null&&s._offlineComponentProvider&&((i=e.localCache)!=null&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new RI(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Vt(Ze.fromBase64String(e))}catch(n){throw new B(j.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Vt(Ze.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Vt._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(ho(e,Vt._jsonSchema))return Vt.fromBase64String(e.bytes)}}Vt._jsonSchemaVersion="firestore/bytes/1.0",Vt._jsonSchema={type:Me("string",Vt._jsonSchemaVersion),bytes:Me("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vl{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new B(j.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ye(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dl{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new B(j.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new B(j.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ne(this._lat,e._lat)||ne(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ln._jsonSchemaVersion}}static fromJSON(e){if(ho(e,ln._jsonSchema))return new ln(e.latitude,e.longitude)}}ln._jsonSchemaVersion="firestore/geoPoint/1.0",ln._jsonSchema={type:Me("string",ln._jsonSchemaVersion),latitude:Me("number"),longitude:Me("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:un._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(ho(e,un._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new un(e.vectorValues);throw new B(j.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}un._jsonSchemaVersion="firestore/vectorValue/1.0",un._jsonSchema={type:Me("string",un._jsonSchemaVersion),vectorValues:Me("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MI=/^__.*__$/;class OI{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new ur(e,this.data,this.fieldMask,n,this.fieldTransforms):new fo(e,this.data,n,this.fieldTransforms)}}class i_{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new ur(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function o_(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw G(40011,{Ac:t})}}class Cd{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Cd({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return el(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(o_(this.Ac)&&MI.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class FI{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||bl(e)}Cc(e,n,r,s=!1){return new Cd({Ac:e,methodName:n,Dc:r,path:Ye.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function jl(t){const e=t._freezeSettings(),n=bl(t._databaseId);return new FI(t._databaseId,!!e.ignoreUndefinedProperties,n)}function a_(t,e,n,r,s,i={}){const o=t.Cc(i.merge||i.mergeFields?2:0,e,n,s);Nd("Data must be an object, but it was:",o,r);const l=l_(r,o);let u,h;if(i.merge)u=new kt(o.fieldMask),h=o.fieldTransforms;else if(i.mergeFields){const p=[];for(const m of i.mergeFields){const g=nh(e,m,n);if(!o.contains(g))throw new B(j.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);c_(p,g)||p.push(g)}u=new kt(p),h=o.fieldTransforms.filter(m=>u.covers(m.field))}else u=null,h=o.fieldTransforms;return new OI(new vt(l),u,h)}class Ll extends Dl{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Ll}}class bd extends Dl{_toFieldTransform(e){return new bT(e.path,new no)}isEqual(e){return e instanceof bd}}function zI(t,e,n,r){const s=t.Cc(1,e,n);Nd("Data must be an object, but it was:",s,r);const i=[],o=vt.empty();lr(r,(u,h)=>{const p=Rd(e,u,n);h=cn(h);const m=s.yc(p);if(h instanceof Ll)i.push(p);else{const g=yo(h,m);g!=null&&(i.push(p),o.set(p,g))}});const l=new kt(i);return new i_(o,l,s.fieldTransforms)}function UI(t,e,n,r,s,i){const o=t.Cc(1,e,n),l=[nh(e,r,n)],u=[s];if(i.length%2!=0)throw new B(j.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<i.length;g+=2)l.push(nh(e,i[g])),u.push(i[g+1]);const h=[],p=vt.empty();for(let g=l.length-1;g>=0;--g)if(!c_(h,l[g])){const S=l[g];let b=u[g];b=cn(b);const N=o.yc(S);if(b instanceof Ll)h.push(S);else{const D=yo(b,N);D!=null&&(h.push(S),p.set(S,D))}}const m=new kt(h);return new i_(p,m,o.fieldTransforms)}function BI(t,e,n,r=!1){return yo(n,t.Cc(r?4:3,e))}function yo(t,e){if(u_(t=cn(t)))return Nd("Unsupported field value:",e,t),l_(t,e);if(t instanceof Dl)return function(r,s){if(!o_(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const l of r){let u=yo(l,s.wc(o));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=cn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return kT(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=_e.fromDate(r);return{timestampValue:Ya(s.serializer,i)}}if(r instanceof _e){const i=new _e(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ya(s.serializer,i)}}if(r instanceof ln)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Vt)return{bytesValue:Cv(s.serializer,r._byteString)};if(r instanceof Pe){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:md(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof un)return function(o,l){return{mapValue:{fields:{[rv]:{stringValue:sv},[Ga]:{arrayValue:{values:o.toArray().map(h=>{if(typeof h!="number")throw l.Sc("VectorValues must only contain numeric values.");return cd(l.serializer,h)})}}}}}}(r,s);throw s.Sc(`Unsupported field value: ${wl(r)}`)}(t,e)}function l_(t,e){const n={};return X0(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):lr(t,(r,s)=>{const i=yo(s,e.mc(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function u_(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof _e||t instanceof ln||t instanceof Vt||t instanceof Pe||t instanceof Dl||t instanceof un)}function Nd(t,e,n){if(!u_(n)||!K0(n)){const r=wl(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function nh(t,e,n){if((e=cn(e))instanceof Vl)return e._internalPath;if(typeof e=="string")return Rd(t,e);throw el("Field path arguments must be of type string or ",t,!1,void 0,n)}const $I=new RegExp("[~\\*/\\[\\]]");function Rd(t,e,n){if(e.search($I)>=0)throw el(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Vl(...e.split("."))._internalPath}catch{throw el(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function el(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(i||o)&&(u+=" (found",i&&(u+=` in field ${r}`),o&&(u+=` in document ${s}`),u+=")"),new B(j.INVALID_ARGUMENT,l+t+u)}function c_(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h_{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Pe(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new qI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Pd("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class qI extends h_{data(){return super.data()}}function Pd(t,e){return typeof e=="string"?Rd(t,e):e instanceof Vl?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HI(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new B(j.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Vd{}class d_ extends Vd{}function f_(t,e,...n){let r=[];e instanceof Vd&&r.push(e),r=r.concat(n),function(i){const o=i.filter(u=>u instanceof jd).length,l=i.filter(u=>u instanceof Dd).length;if(o>1||o>0&&l>0)throw new B(j.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Dd extends d_{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Dd(e,n,r)}_apply(e){const n=this._parse(e);return p_(e._query,n),new zr(e.firestore,e.converter,Hc(e._query,n))}_parse(e){const n=jl(e.firestore);return function(i,o,l,u,h,p,m){let g;if(h.isKeyField()){if(p==="array-contains"||p==="array-contains-any")throw new B(j.INVALID_ARGUMENT,`Invalid Query. You can't perform '${p}' queries on documentId().`);if(p==="in"||p==="not-in"){rg(m,p);const b=[];for(const N of m)b.push(ng(u,i,N));g={arrayValue:{values:b}}}else g=ng(u,i,m)}else p!=="in"&&p!=="not-in"&&p!=="array-contains-any"||rg(m,p),g=BI(l,o,m,p==="in"||p==="not-in");return Le.create(h,p,g)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class jd extends Vd{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new jd(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Gt.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const l=i.getFlattenedFilters();for(const u of l)p_(o,u),o=Hc(o,u)}(e._query,n),new zr(e.firestore,e.converter,Hc(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Ld extends d_{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Ld(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new B(j.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new B(j.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new to(i,o)}(e._query,this._field,this._direction);return new zr(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new Ms(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function m_(t,e="asc"){const n=e,r=Pd("orderBy",t);return Ld._create(r,n)}function ng(t,e,n){if(typeof(n=cn(n))=="string"){if(n==="")throw new B(j.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!dv(e)&&n.indexOf("/")!==-1)throw new B(j.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(pe.fromString(n));if(!W.isDocumentKey(r))throw new B(j.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return yp(t,new W(r))}if(n instanceof Pe)return yp(t,n._key);throw new B(j.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${wl(n)}.`)}function rg(t,e){if(!Array.isArray(t)||t.length===0)throw new B(j.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function p_(t,e){const n=function(s,i){for(const o of s)for(const l of o.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new B(j.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new B(j.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class WI{convertValue(e,n="none"){switch(nr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ne(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(tr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw G(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return lr(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var r,s,i;const n=(i=(s=(r=e.fields)==null?void 0:r[Ga].arrayValue)==null?void 0:s.values)==null?void 0:i.map(o=>Ne(o.doubleValue));return new un(n)}convertGeoPoint(e){return new ln(Ne(e.latitude),Ne(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Tl(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Ji(e));default:return null}}convertTimestamp(e){const n=er(e);return new _e(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=pe.fromString(e);ce(Dv(r),9688,{name:e});const s=new Zi(r.get(1),r.get(3)),i=new W(r.popFirst(5));return s.isEqual(n)||En(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g_(t,e,n){let r;return r=t?t.toFirestore(e):e,r}class gi{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class kr extends h_{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new pa(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Pd("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new B(j.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=kr._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}kr._jsonSchemaVersion="firestore/documentSnapshot/1.0",kr._jsonSchema={type:Me("string",kr._jsonSchemaVersion),bundleSource:Me("string","DocumentSnapshot"),bundleName:Me("string"),bundle:Me("string")};class pa extends kr{data(e={}){return super.data(e)}}class gs{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new gi(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new pa(this._firestore,this._userDataWriter,r.key,r,new gi(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new B(j.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(l=>{const u=new pa(s._firestore,s._userDataWriter,l.doc.key,l.doc,new gi(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const u=new pa(s._firestore,s._userDataWriter,l.doc.key,l.doc,new gi(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let h=-1,p=-1;return l.type!==0&&(h=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),p=o.indexOf(l.doc.key)),{type:GI(l.type),doc:u,oldIndex:h,newIndex:p}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new B(j.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=gs._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=rd.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function GI(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return G(61501,{type:t})}}gs._jsonSchemaVersion="firestore/querySnapshot/1.0",gs._jsonSchema={type:Me("string",gs._jsonSchemaVersion),bundleSource:Me("string","QuerySnapshot"),bundleName:Me("string"),bundle:Me("string")};class y_ extends WI{constructor(e){super(),this.firestore=e}convertBytes(e){return new Vt(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Pe(this.firestore,null,n)}}function sg(t,e,n){t=sn(t,Pe);const r=sn(t.firestore,jr),s=g_(t.converter,e);return Ml(r,[a_(jl(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Lt.none())])}function v_(t,e,n,...r){t=sn(t,Pe);const s=sn(t.firestore,jr),i=jl(s);let o;return o=typeof(e=cn(e))=="string"||e instanceof Vl?UI(i,"updateDoc",t._key,e,n,r):zI(i,"updateDoc",t._key,e),Ml(s,[o.toMutation(t._key,Lt.exists(!0))])}function Ar(t){return Ml(sn(t.firestore,jr),[new hd(t._key,Lt.none())])}function __(t,e){const n=sn(t.firestore,jr),r=$t(t),s=g_(t.converter,e);return Ml(n,[a_(jl(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,Lt.exists(!1))]).then(()=>r)}function Md(t,...e){var u,h,p;t=cn(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||tg(e[r])||(n=e[r++]);const s={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(tg(e[r])){const m=e[r];e[r]=(u=m.next)==null?void 0:u.bind(m),e[r+1]=(h=m.error)==null?void 0:h.bind(m),e[r+2]=(p=m.complete)==null?void 0:p.bind(m)}let i,o,l;if(t instanceof Pe)o=sn(t.firestore,jr),l=ud(t._key.path),i={next:m=>{e[r]&&e[r](QI(o,t,m))},error:e[r+1],complete:e[r+2]};else{const m=sn(t,zr);o=sn(m.firestore,jr),l=m._query;const g=new y_(o);i={next:S=>{e[r]&&e[r](new gs(o,g,m,S))},error:e[r+1],complete:e[r+2]},HI(t._query)}return function(g,S,b,N){const D=new NI(N),_=new hI(S,D,b);return g.asyncQueue.enqueueAndForget(async()=>aI(await Qp(g),_)),()=>{D.Nu(),g.asyncQueue.enqueueAndForget(async()=>lI(await Qp(g),_))}}(s_(o),l,s,i)}function Ml(t,e){return function(r,s){const i=new Ir;return r.asyncQueue.enqueueAndForget(async()=>xI(await VI(r),s,i)),i.promise}(s_(t),e)}function QI(t,e,n){const r=n.docs.get(e._key),s=new y_(t);return new kr(t,s,e._key,r,new gi(n.hasPendingWrites,n.fromCache),e.converter)}function tl(){return new bd("serverTimestamp")}(function(e,n=!0){(function(s){Ds=s})(S2),qa(new Ki("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),l=new jr(new O2(r.getProvider("auth-internal")),new U2(o,r.getProvider("app-check-internal")),function(h,p){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new B(j.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Zi(h.options.projectId,p)}(o,s),o);return i={useFetchStreams:n,...i},l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),ms(sp,ip,e),ms(sp,ip,"esm2020")})();var KI="firebase",YI="12.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ms(KI,YI,"app");const XI={apiKey:"AIzaSyBQwo6qEZWlOyXRv3iPycYiLIqRt3PalkE",authDomain:"foodflash-46a42.firebaseapp.com",projectId:"foodflash-46a42",storageBucket:"foodflash-46a42.firebasestorage.app",messagingSenderId:"497618057237",appId:"1:497618057237:web:3025f9c950cdf76b67361c"},JI=M0(XI),ht=jI(JI),Od=()=>{const[t,e]=H.useState([]),[n,r]=H.useState(!0),[s,i]=H.useState(null);return H.useEffect(()=>{const h=io(ht,"recipes"),p=f_(h,m_("createdAt","desc")),m=Md(p,g=>{const S=[];g.forEach(b=>{var D,_,x;const N=b.data();S.push({id:b.id,...N,ingredients:N.ingredients||[],comments:N.comments||[],createdAt:((x=(_=(D=N.createdAt)==null?void 0:D.toDate)==null?void 0:_.call(D))==null?void 0:x.toISOString())||new Date().toISOString()})}),e(S),r(!1),i(null)},g=>{console.error("Error fetching recipes:",g),i("Fehler beim Laden der Rezepte"),r(!1)});return()=>m()},[]),{recipes:t,isLoading:n,error:s,addRecipe:async h=>{try{const p=io(ht,"recipes");await __(p,{...h,createdAt:tl(),ingredients:h.ingredients||[],comments:h.comments||[]})}catch(p){throw console.error("Error adding recipe:",p),i("Fehler beim Hinzufügen des Rezepts"),p}},updateRecipe:async(h,p)=>{try{const m=$t(ht,"recipes",h);await v_(m,p)}catch(m){throw console.error("Error updating recipe:",m),i("Fehler beim Aktualisieren des Rezepts"),m}},deleteRecipe:async h=>{try{const p=$t(ht,"recipes",h);await Ar(p)}catch(p){throw console.error("Error deleting recipe:",p),i("Fehler beim Löschen des Rezepts"),p}}}},w_=t=>{if(!t||t.trim()==="")return"own";const e=t.toLowerCase();return e.includes("youtube.com")||e.includes("youtu.be")?"youtube":e.includes("instagram.com")?"instagram":e.includes("facebook.com")||e.includes("fb.com")?"facebook":e.includes("tiktok.com")?"tiktok":"other"},x_=t=>{if(!t)return null;try{const e=t.toLowerCase();let n=null;if(e.includes("youtube.com/watch"))n=new URL(t).searchParams.get("v");else if(e.includes("youtu.be/")){const r=t.match(/youtu\.be\/([^?&]+)/);n=r?r[1]:null}else if(e.includes("youtube.com/embed/")){const r=t.match(/youtube\.com\/embed\/([^?&]+)/);n=r?r[1]:null}return n?`https://img.youtube.com/vi/${n}/maxresdefault.jpg`:null}catch(e){return console.error("Error extracting YouTube thumbnail:",e),null}},E_=t=>{if(!t)return!1;const e=t.toLowerCase();return e.includes("youtube.com")||e.includes("youtu.be")},nl=t=>{if(!t||!t.includes("drive.google.com"))return t;try{let e=null;const r=t.split("?")[0].match(/\/file\/d\/([^/]+)/);if(r&&(e=r[1]),!e){const s=t.match(/[?&]id=([^&]+)/);s&&(e=s[1])}if(!e){const s=t.match(/[?&]id=([^&]+)/);s&&(e=s[1])}return e?`https://drive.google.com/thumbnail?id=${e}&sz=w1000`:(t.includes("uc?export=view")||t.includes("thumbnail?id="),t)}catch(e){return console.error("Error converting Google Drive URL:",e),t}},rl=t=>!!(t&&t.includes("drive.google.com")),T_=({ingredients:t,onChange:e})=>{const[n,r]=H.useState(""),[s,i]=H.useState(""),o=m=>{r(m.target.value)},l=m=>{i(m.target.value)},u=()=>{if(!n.trim())return;const m={name:n.trim(),quantity:s.trim()||void 0};e([...t,m]),r(""),i("")},h=m=>{e(t.filter((g,S)=>S!==m))},p=m=>{m.key==="Enter"&&(m.preventDefault(),u())};return d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-200 mb-2",children:"Zutaten (optional)"}),t.length>0&&d.jsx("div",{className:"space-y-1 mb-3 max-h-32 overflow-y-auto",children:t.map((m,g)=>d.jsxs("div",{className:"flex items-center gap-2 bg-slate-700 rounded-lg px-3 py-2 group",children:[d.jsxs("span",{className:"flex-1 text-sm text-gray-100",children:[m.name,m.quantity&&d.jsxs("span",{className:"text-gray-400 ml-2",children:["(",m.quantity,")"]})]}),d.jsx("button",{type:"button",onClick:()=>h(g),"data-test-id":`remove-ingredient-${g}`,"aria-label":"Zutat entfernen",className:"opacity-0 group-hover:opacity-100 transition-opacity text-red-500 hover:text-red-600",children:d.jsx(rn,{className:"h-4 w-4"})})]},g))}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx("input",{type:"text",value:n,onChange:o,onKeyPress:p,placeholder:"Zutat, z.B. Tomaten",className:"flex-1 px-3 py-2 text-sm border-2 border-gray-600 rounded-lg focus:border-primary-500 focus:outline-none transition-colors bg-slate-700 text-gray-100 placeholder-gray-400"}),d.jsx("input",{type:"text",value:s,onChange:l,onKeyPress:p,placeholder:"Menge",className:"w-24 px-3 py-2 text-sm border-2 border-gray-600 rounded-lg focus:border-primary-500 focus:outline-none transition-colors bg-slate-700 text-gray-100 placeholder-gray-400"}),d.jsx("button",{type:"button",onClick:u,"data-test-id":"add-ingredient","aria-label":"Zutat hinzufügen",disabled:!n.trim(),className:Ee("px-3 py-2 rounded-lg transition-all duration-200",n.trim()?"bg-accent-500 text-white hover:bg-accent-600":"bg-slate-600 text-gray-500 cursor-not-allowed"),children:d.jsx(Qi,{className:"h-4 w-4"})})]}),d.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Enter drücken oder Plus-Button zum Hinzufügen"})]})},ZI=({onAdd:t})=>{const[e,n]=H.useState(!1),[r,s]=H.useState(""),[i,o]=H.useState(""),[l,u]=H.useState(""),[h,p]=H.useState(""),[m,g]=H.useState([]),[S,b]=H.useState(!1),N=A=>{if(A.preventDefault(),!r.trim()){alert("Bitte Titel eingeben!");return}const w=w_(i);t({title:r.trim(),url:i.trim()||"",description:l.trim(),imageUrl:h.trim()||void 0,ingredients:m,platform:w}),s(""),o(""),u(""),p(""),g([]),n(!1)},D=A=>{s(A.target.value)},_=A=>{o(A.target.value)},x=A=>{u(A.target.value)},C=A=>{const w=A.target.value;p(w)};H.useEffect(()=>{if(h&&rl(h)){const A=nl(h);A!==h&&p(A)}},[h]);const V=()=>{const A=x_(i);A&&p(A)},M=()=>{n(!e)},F=()=>{b(!S)},E=E_(i),v=i.toLowerCase(),T=v.includes("instagram.com"),k=v.includes("facebook.com")||v.includes("fb.com"),I=v.includes("tiktok.com");return e?d.jsxs("div",{className:"bg-slate-800/80 backdrop-blur-sm rounded-2xl p-6 shadow-xl border-2 border-primary-500/30 autumn-glow",children:[d.jsxs("div",{className:"flex items-center justify-between mb-6",children:[d.jsxs("h3",{className:"text-2xl font-bold text-gray-100 flex items-center gap-2",children:[d.jsx(Qi,{className:"h-6 w-6 text-primary-500"}),"Neues Rezept"]}),d.jsx("button",{onClick:M,"data-test-id":"close-add-recipe","aria-label":"Formular schließen",className:"p-2 hover:bg-slate-700 rounded-full transition-colors",children:d.jsx(rn,{className:"h-6 w-6 text-gray-300"})})]}),d.jsxs("form",{onSubmit:N,className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{htmlFor:"recipe-title",className:"block text-sm font-medium text-gray-200 mb-1",children:"Rezept-Titel *"}),d.jsx("input",{id:"recipe-title",type:"text",value:r,onChange:D,"data-test-id":"recipe-title-input","aria-label":"Rezept-Titel eingeben",placeholder:"z.B. Spaghetti Carbonara",className:"w-full px-4 py-2 border-2 border-gray-600 rounded-lg focus:border-primary-500 focus:outline-none transition-colors bg-slate-700 text-gray-100 placeholder-gray-400",required:!0})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"recipe-url",className:"block text-sm font-medium text-gray-200 mb-1",children:"Link zum Rezept (optional)"}),d.jsx("input",{id:"recipe-url",type:"url",value:i,onChange:_,"data-test-id":"recipe-url-input","aria-label":"Rezept-URL eingeben",placeholder:"https://www.youtube.com/watch?v=... (oder leer für eigenes Rezept)",className:"w-full px-4 py-2 border-2 border-gray-600 rounded-lg focus:border-primary-500 focus:outline-none transition-colors bg-slate-700 text-gray-100 placeholder-gray-400"}),d.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"YouTube, Instagram, Facebook, TikTok Link - oder leer lassen für eigene Rezepte"})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"recipe-description",className:"block text-sm font-medium text-gray-200 mb-1",children:"Beschreibung (optional)"}),d.jsx("textarea",{id:"recipe-description",value:l,onChange:x,"data-test-id":"recipe-description-input","aria-label":"Rezept-Beschreibung eingeben",placeholder:"Was macht dieses Rezept besonders?",rows:3,className:"w-full px-4 py-2 border-2 border-gray-600 rounded-lg focus:border-primary-500 focus:outline-none transition-colors resize-none bg-slate-700 text-gray-100 placeholder-gray-400"})]}),d.jsx(T_,{ingredients:m,onChange:g}),d.jsxs("div",{children:[d.jsxs("div",{className:"flex items-center justify-between mb-1",children:[d.jsx("label",{htmlFor:"recipe-image",className:"block text-sm font-medium text-gray-200",children:"Bild-URL (optional)"}),d.jsxs("div",{className:"flex items-center gap-2",children:[E&&d.jsxs("button",{type:"button",onClick:V,"data-test-id":"auto-fill-image","aria-label":"Bild automatisch aus YouTube laden",className:"flex items-center gap-1 text-xs font-medium text-primary-500 hover:text-primary-600 transition-colors",children:[d.jsx(Jh,{className:"h-3 w-3"}),"Auto-Fill"]}),(T||k||I)&&d.jsxs("button",{type:"button",onClick:F,"data-test-id":"thumbnail-help","aria-label":"Hilfe zum Thumbnail finden",className:"flex items-center gap-1 text-xs font-medium text-secondary-500 hover:text-secondary-600 transition-colors",children:[d.jsx(T0,{className:"h-3 w-3"}),"Hilfe"]})]})]}),d.jsx("input",{id:"recipe-image",type:"url",value:h,onChange:C,"data-test-id":"recipe-image-input","aria-label":"Bild-URL eingeben",placeholder:E?"Klicke 'Auto-Fill' für YouTube-Thumbnail":"Google Drive oder imgbb.com Link",className:"w-full px-4 py-2 border-2 border-gray-600 rounded-lg focus:border-primary-500 focus:outline-none transition-colors bg-slate-700 text-gray-100 placeholder-gray-400"}),E&&d.jsx("p",{className:"text-xs text-primary-600 mt-1",children:'💡 YouTube-Thumbnail verfügbar - klicke "Auto-Fill"'}),h&&rl(h)&&d.jsx("p",{className:"text-xs text-green-600 mt-1",children:"✅ Google Drive Link erkannt - wird automatisch konvertiert"}),h&&d.jsxs("div",{className:"mt-3",children:[d.jsx("p",{className:"text-xs font-medium text-gray-200 mb-1",children:"Vorschau:"}),d.jsx("div",{className:"relative w-full h-40 bg-slate-700 rounded-lg overflow-hidden border-2 border-gray-600",children:d.jsx("img",{src:nl(h),alt:"Vorschau",className:"w-full h-full object-cover",onError:A=>{const w=A.target;w.style.display="none";const ee=w.parentElement;ee&&(ee.innerHTML='<div class="flex items-center justify-center h-full text-red-500 text-sm p-4 text-center"><div><p class="font-bold">❌ Bild kann nicht geladen werden</p><p class="text-xs mt-1">Prüfe Google Drive Freigabe:<br/>"Jeder mit dem Link"</p></div></div>')},onLoad:A=>{const ee=A.target.parentElement;if(ee){const Ve=document.createElement("div");Ve.className="absolute top-2 right-2 bg-green-500 text-white text-xs px-2 py-1 rounded-full font-medium",Ve.textContent="✓ OK",ee.appendChild(Ve)}}})})]}),S&&(T||k||I)&&d.jsxs("div",{className:"mt-3 p-4 bg-blue-50 border-2 border-blue-200 rounded-lg",children:[d.jsxs("div",{className:"flex items-start justify-between mb-2",children:[d.jsxs("h4",{className:"font-bold text-blue-800 text-sm",children:[T&&"📷 Instagram Thumbnail finden",k&&"📘 Facebook Thumbnail finden",I&&"🎵 TikTok Thumbnail finden"]}),d.jsx("button",{type:"button",onClick:F,className:"text-blue-600 hover:text-blue-800",children:d.jsx(rn,{className:"h-4 w-4"})})]}),T&&d.jsxs("ol",{className:"text-xs text-blue-700 space-y-1 list-decimal list-inside",children:[d.jsx("li",{children:"Öffne den Instagram-Post im Browser"}),d.jsx("li",{children:'Rechtsklick auf das Bild/Video → "Bild-URL kopieren" oder "Grafik-Adresse kopieren"'}),d.jsx("li",{children:"Füge die URL hier ein"}),d.jsxs("li",{children:[d.jsx("strong",{children:"Alternative:"})," Screenshot vom Post machen"]})]}),k&&d.jsxs("ol",{className:"text-xs text-blue-700 space-y-1 list-decimal list-inside",children:[d.jsx("li",{children:"Öffne das Facebook-Video im Browser"}),d.jsx("li",{children:'Rechtsklick auf das Video-Thumbnail → "Grafikadresse kopieren"'}),d.jsx("li",{children:"Füge die URL hier ein"}),d.jsxs("li",{children:[d.jsx("strong",{children:"Alternative:"})," Screenshot machen"]})]}),I&&d.jsxs("ol",{className:"text-xs text-blue-700 space-y-1 list-decimal list-inside",children:[d.jsx("li",{children:"Öffne das TikTok-Video im Browser"}),d.jsx("li",{children:"Pause das Video bei einem guten Frame"}),d.jsx("li",{children:"Screenshot vom Video machen"})]}),d.jsxs("div",{className:"mt-3 pt-3 border-t border-blue-300",children:[d.jsx("p",{className:"text-xs font-bold text-blue-800 mb-2",children:"📁 Mit Google Drive (empfohlen):"}),d.jsxs("ol",{className:"text-xs text-blue-700 space-y-1 list-decimal list-inside",children:[d.jsx("li",{children:"Screenshot/Bild in Google Drive hochladen"}),d.jsx("li",{children:'Rechtsklick auf Datei → "Link teilen"'}),d.jsx("li",{children:'Auf "Eingeschränkt" klicken → "Jeder mit dem Link" wählen'}),d.jsxs("li",{children:["Link kopieren (sieht aus wie: ",d.jsx("code",{className:"bg-blue-100 px-1",children:"drive.google.com/file/d/XXXX/view"}),")"]}),d.jsxs("li",{children:["Ändere das Format zu: ",d.jsx("code",{className:"bg-blue-100 px-1 block mt-1",children:"drive.google.com/uc?export=view&id=XXXX"})]}),d.jsx("li",{children:"Füge diesen Link hier ein"})]})]}),d.jsxs("div",{className:"mt-2 pt-2 border-t border-blue-300",children:[d.jsx("p",{className:"text-xs font-bold text-blue-800 mb-1",children:"🌐 Alternative: imgbb.com"}),d.jsx("p",{className:"text-xs text-blue-700",children:"Kostenlos, kein Account nötig - einfach hochladen & Link kopieren"})]})]})]}),d.jsx("button",{type:"submit","data-test-id":"submit-recipe","aria-label":"Rezept speichern",className:Ee("w-full py-3 rounded-lg font-bold text-white transition-all duration-200","bg-gradient-to-r from-primary-500 to-secondary-500","hover:shadow-lg hover:scale-105"),children:"Rezept speichern ⚡"})]})]}):d.jsxs("button",{onClick:M,"data-test-id":"open-add-recipe","aria-label":"Neues Rezept hinzufügen",className:"w-full bg-gradient-to-r from-primary-500 to-secondary-500 text-white rounded-2xl p-6 shadow-lg hover:shadow-xl transition-all duration-200 hover:scale-105 flex items-center justify-center gap-3 font-bold text-lg",children:[d.jsx(Qi,{className:"h-6 w-6"}),"Neues Rezept hinzufügen"]})},ek=({rating:t,onRatingChange:e,readonly:n=!1,size:r="md"})=>{const s={sm:"h-4 w-4",md:"h-5 w-5",lg:"h-6 w-6"},i=o=>{!n&&e&&e(o)};return d.jsx("div",{className:"flex items-center gap-1",children:[1,2,3,4,5].map(o=>{const l=o<=t;return d.jsx("button",{onClick:()=>i(o),"data-test-id":`star-${o}`,"aria-label":`${o} ${o===1?"Stern":"Sterne"} bewerten`,disabled:n,className:Ee("transition-all duration-200",!n&&"hover:scale-110 cursor-pointer",n&&"cursor-default"),children:d.jsx(Qx,{className:Ee(s[r],l?"fill-yellow-400 text-yellow-400":"text-gray-300")})},o)})})},tk=({recipe:t,onSave:e,onClose:n})=>{const[r,s]=H.useState(t.title),[i,o]=H.useState(t.url),[l,u]=H.useState(t.description),[h,p]=H.useState(t.imageUrl||""),[m,g]=H.useState(t.ingredients||[]),[S,b]=H.useState(!1),N=I=>{if(I.preventDefault(),!r.trim()){alert("Bitte Titel eingeben!");return}const A=w_(i);e(t.id,{title:r.trim(),url:i.trim()||"",description:l.trim(),imageUrl:h.trim()||void 0,ingredients:m,platform:A}),n()},D=I=>{s(I.target.value)},_=I=>{o(I.target.value)},x=I=>{u(I.target.value)},C=I=>{p(I.target.value)},V=()=>{const I=x_(i);I&&p(I)},M=()=>{b(!S)};H.useEffect(()=>{if(h&&rl(h)){const I=nl(h);I!==h&&p(I)}},[h]);const F=E_(i),E=i.toLowerCase(),v=E.includes("instagram.com"),T=E.includes("facebook.com")||E.includes("fb.com"),k=E.includes("tiktok.com");return d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:d.jsxs("div",{className:"bg-slate-800/80 rounded-2xl p-6 max-w-2xl w-full shadow-2xl max-h-[90vh] overflow-y-auto",children:[d.jsxs("div",{className:"flex items-center justify-between mb-6",children:[d.jsx("h3",{className:"text-2xl font-bold text-gray-100",children:"Rezept bearbeiten"}),d.jsx("button",{onClick:n,"data-test-id":"close-edit-modal","aria-label":"Bearbeiten abbrechen",className:"p-2 hover:bg-slate-700 rounded-full transition-colors",children:d.jsx(rn,{className:"h-6 w-6 text-gray-300"})})]}),d.jsxs("form",{onSubmit:N,className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{htmlFor:"edit-title",className:"block text-sm font-medium text-gray-200 mb-1",children:"Rezept-Titel *"}),d.jsx("input",{id:"edit-title",type:"text",value:r,onChange:D,placeholder:"z.B. Spaghetti Carbonara",className:"w-full px-4 py-2 border-2 border-gray-600 rounded-lg focus:border-primary-500 focus:outline-none transition-colors bg-slate-700 text-gray-100 placeholder-gray-400",required:!0})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"edit-url",className:"block text-sm font-medium text-gray-200 mb-1",children:"Link zum Rezept (optional)"}),d.jsx("input",{id:"edit-url",type:"url",value:i,onChange:_,placeholder:"https://www.youtube.com/watch?v=... (oder leer für eigenes Rezept)",className:"w-full px-4 py-2 border-2 border-gray-600 rounded-lg focus:border-primary-500 focus:outline-none transition-colors bg-slate-700 text-gray-100 placeholder-gray-400"})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"edit-description",className:"block text-sm font-medium text-gray-200 mb-1",children:"Beschreibung (optional)"}),d.jsx("textarea",{id:"edit-description",value:l,onChange:x,placeholder:"Was macht dieses Rezept besonders?",rows:3,className:"w-full px-4 py-2 border-2 border-gray-600 rounded-lg focus:border-primary-500 focus:outline-none transition-colors resize-none bg-slate-700 text-gray-100 placeholder-gray-400"})]}),d.jsx(T_,{ingredients:m,onChange:g}),d.jsxs("div",{children:[d.jsxs("div",{className:"flex items-center justify-between mb-1",children:[d.jsx("label",{htmlFor:"edit-image",className:"block text-sm font-medium text-gray-200",children:"Bild-URL (optional)"}),d.jsxs("div",{className:"flex items-center gap-2",children:[F&&d.jsxs("button",{type:"button",onClick:V,className:"flex items-center gap-1 text-xs font-medium text-primary-500 hover:text-primary-600 transition-colors",children:[d.jsx(Jh,{className:"h-3 w-3"}),"Auto-Fill"]}),(v||T||k)&&d.jsxs("button",{type:"button",onClick:M,className:"flex items-center gap-1 text-xs font-medium text-secondary-500 hover:text-secondary-600 transition-colors",children:[d.jsx(T0,{className:"h-3 w-3"}),"Hilfe"]})]})]}),d.jsx("input",{id:"edit-image",type:"url",value:h,onChange:C,placeholder:"Google Drive oder imgbb.com Link",className:"w-full px-4 py-2 border-2 border-gray-600 rounded-lg focus:border-primary-500 focus:outline-none transition-colors bg-slate-700 text-gray-100 placeholder-gray-400"}),h&&rl(h)&&d.jsx("p",{className:"text-xs text-green-400 mt-1",children:"✅ Google Drive Link erkannt - wird automatisch konvertiert"}),h&&d.jsxs("div",{className:"mt-3",children:[d.jsx("p",{className:"text-xs font-medium text-gray-200 mb-1",children:"Vorschau:"}),d.jsx("div",{className:"relative w-full h-40 bg-slate-700 rounded-lg overflow-hidden border-2 border-gray-600",children:d.jsx("img",{src:nl(h),alt:"Vorschau",className:"w-full h-full object-cover",onError:I=>{const A=I.target;A.style.display="none";const w=A.parentElement;w&&(w.innerHTML='<div class="flex items-center justify-center h-full text-red-500 text-sm p-4 text-center"><div><p class="font-bold">❌ Bild kann nicht geladen werden</p><p class="text-xs mt-1">Prüfe Google Drive Freigabe:<br/>"Jeder mit dem Link"</p></div></div>')},onLoad:I=>{const w=I.target.parentElement;if(w){const ee=document.createElement("div");ee.className="absolute top-2 right-2 bg-green-500 text-white text-xs px-2 py-1 rounded-full font-medium",ee.textContent="✓ OK",w.appendChild(ee)}}})})]}),S&&(v||T||k)&&d.jsxs("div",{className:"mt-3 p-3 bg-slate-700 border border-primary-500/30 rounded-lg text-xs text-gray-200",children:[d.jsx("p",{className:"font-bold mb-1",children:"💡 Tipp:"}),d.jsxs("p",{children:["Screenshot machen und auf ",d.jsx("a",{href:"https://imgbb.com",target:"_blank",rel:"noopener noreferrer",className:"underline",children:"imgbb.com"})," oder Google Drive hochladen"]})]})]}),d.jsxs("div",{className:"flex gap-3 pt-2",children:[d.jsx("button",{type:"button",onClick:n,className:"flex-1 py-3 rounded-lg font-medium bg-slate-700 text-gray-100 hover:bg-slate-600 transition-colors",children:"Abbrechen"}),d.jsxs("button",{type:"submit",className:"flex-1 py-3 rounded-lg font-bold text-white transition-all duration-200 bg-gradient-to-r from-primary-500 to-secondary-500 hover:shadow-lg hover:scale-105 flex items-center justify-center gap-2",children:[d.jsx(k0,{className:"h-5 w-5"}),"Speichern"]})]})]})]})})},S_=()=>{const[t,e]=H.useState([]),[n,r]=H.useState(!0),[s,i]=H.useState(null);return H.useEffect(()=>{const m=io(ht,"shoppingList"),g=f_(m,m_("addedAt","desc")),S=Md(g,b=>{const N=[];b.forEach(D=>{var x,C,V;const _=D.data();N.push({id:D.id,..._,addedAt:((V=(C=(x=_.addedAt)==null?void 0:x.toDate)==null?void 0:C.call(x))==null?void 0:V.toISOString())||new Date().toISOString()})}),e(N),r(!1),i(null)},b=>{console.error("Error fetching shopping list:",b),i("Fehler beim Laden der Einkaufsliste"),r(!1)});return()=>S()},[]),{items:t,isLoading:n,error:s,addItem:async(m,g,S)=>{try{const b=io(ht,"shoppingList");await __(b,{name:m,quantity:S||"",category:g,checked:!1,addedAt:tl()})}catch(b){throw console.error("Error adding item:",b),i("Fehler beim Hinzufügen des Artikels"),b}},toggleItem:async m=>{try{const g=t.find(b=>b.id===m);if(!g)return;const S=$t(ht,"shoppingList",m);await v_(S,{checked:!g.checked})}catch(g){throw console.error("Error toggling item:",g),i("Fehler beim Aktualisieren des Artikels"),g}},removeItem:async m=>{try{const g=$t(ht,"shoppingList",m);await Ar(g)}catch(g){throw console.error("Error removing item:",g),i("Fehler beim Löschen des Artikels"),g}},clearAllItems:async()=>{try{const m=t.map(g=>Ar($t(ht,"shoppingList",g.id)));await Promise.all(m)}catch(m){throw console.error("Error clearing shopping list:",m),i("Fehler beim Leeren der Einkaufsliste"),m}},clearCheckedItems:async()=>{try{const g=t.filter(S=>S.checked).map(S=>Ar($t(ht,"shoppingList",S.id)));await Promise.all(g)}catch(m){throw console.error("Error clearing checked items:",m),i("Fehler beim Löschen der erledigten Artikel"),m}}}},nk={produce:["tomate","gurke","salat","paprika","zwiebel","knoblauch","karotte","kartoffel","apfel","banane","zitrone","orange","beere","spinat","brokkoli","pilz","champignon"],bakery:["brot","brötchen","baguette","toast","croissant","mehl","hefe"],meat:["hähnchen","huhn","rind","schwein","hack","steak","filet","schnitzel","bratwurst"],deli:["schinken","salami","mortadella","aufschnitt","wurst"],dairy:["milch","butter","käse","joghurt","sahne","schmand","quark","frischkäse","mozzarella","parmesan","ei","eier"],beverages:["wasser","saft","cola","limo","bier","wein","kaffee","tee","milch"],pantry:["reis","nudel","pasta","dose","konserve","öl","essig","gewürz","salz","pfeffer","zucker","honig","marmelade","ketchup","senf","mayonnaise","soße"],snacks:["schokolade","keks","chips","süßigkeit","gummibär","bonbon"],frozen:["tiefkühl","tk-","eis","eiscreme","gefrier"],household:["spülmittel","schwamm","putzmittel","klopapier","küchenpapier","müllbeutel","alufolie","frischhaltefolie"]},rk=t=>{const e=t.toLowerCase();for(const[n,r]of Object.entries(nk))if(r.some(s=>e.includes(s)))return n;return"produce"},sk={youtube:{icon:xr,color:"bg-red-600/20 text-red-400 border-red-500/30",label:"YouTube"},instagram:{icon:S0,color:"bg-pink-600/20 text-pink-400 border-pink-500/30",label:"Instagram"},facebook:{icon:E0,color:"bg-blue-600/20 text-blue-400 border-blue-500/30",label:"Facebook"},tiktok:{icon:I0,color:"bg-gray-600/20 text-gray-400 border-gray-500/30",label:"TikTok"},own:{icon:C0,color:"bg-secondary-600/20 text-secondary-400 border-secondary-500/30",label:"Eigenes Rezept"},other:{icon:zx,color:"bg-accent-600/20 text-accent-400 border-accent-500/30",label:"Andere"}},ik=({recipe:t,onDelete:e,onUpdate:n})=>{const r=sk[t.platform],s=r.icon,[i,o]=H.useState(!1),[l,u]=H.useState(t.notes||""),[h,p]=H.useState(!1),[m,g]=H.useState(""),[S,b]=H.useState(!1),[N,D]=H.useState(!1),{addItem:_}=S_(),x=()=>{confirm(`Möchtest du "${t.title}" wirklich löschen?`)&&e(t.id)},C=()=>{t.url&&t.url.trim()!==""&&window.open(t.url,"_blank","noopener,noreferrer")},V=le=>{u(le.target.value)},M=()=>{n(t.id,{notes:l}),o(!1)},F=()=>{i&&u(t.notes||""),o(!i)},E=le=>{n(t.id,{rating:le})},v=le=>{g(le.target.value)},T=le=>{if(le.preventDefault(),!m.trim())return;const Oe={id:crypto.randomUUID(),text:m.trim(),createdAt:new Date().toISOString()},U=[...t.comments,Oe];n(t.id,{comments:U}),g("")},k=()=>{p(!h)},I=()=>{b(!0)},A=()=>{b(!1)},w=(le,Oe)=>{n(le,Oe),b(!1)},ee=()=>{if(t.ingredients.length===0){alert("Dieses Rezept hat keine Zutaten!");return}let le=0;t.ingredients.forEach(Oe=>{const U=rk(Oe.name);_(Oe.name,U,Oe.quantity),le++}),alert(`✅ ${le} ${le===1?"Zutat":"Zutaten"} zur Einkaufsliste hinzugefügt!`)},Ve=()=>{D(!N)};return d.jsxs(d.Fragment,{children:[S&&d.jsx(tk,{recipe:t,onSave:w,onClose:A}),d.jsxs("div",{className:"bg-slate-800/80 backdrop-blur-sm rounded-2xl overflow-hidden shadow-xl hover:shadow-2xl transition-all duration-300 border-2 border-dark-600/50 hover:border-primary-500/30 hover:autumn-glow",children:[d.jsx("button",{onClick:Ve,className:"w-full",children:t.imageUrl?d.jsxs("div",{className:"h-48 overflow-hidden bg-gradient-to-br from-primary-100 to-secondary-100 relative",children:[d.jsx("img",{src:t.imageUrl,alt:t.title,className:"w-full h-full object-cover",onError:le=>{const Oe=le.target;Oe.style.display="none"}}),d.jsx("div",{className:"absolute bottom-2 right-2 bg-black bg-opacity-50 text-white text-xs px-2 py-1 rounded-full",children:N?"▼ Weniger":"▶ Mehr"})]}):d.jsxs("div",{className:"h-48 bg-gradient-to-br from-primary-100 via-secondary-100 to-accent-100 flex items-center justify-center relative",children:[d.jsx(s,{className:"h-16 w-16 text-white opacity-50"}),d.jsx("div",{className:"absolute bottom-2 right-2 bg-black bg-opacity-50 text-white text-xs px-2 py-1 rounded-full",children:N?"▼ Weniger":"▶ Mehr"})]})}),d.jsxs("div",{className:"p-5",children:[d.jsxs("div",{className:"flex items-center justify-between mb-3",children:[d.jsxs("div",{className:Ee("inline-flex items-center gap-2 px-3 py-1 rounded-full text-sm font-medium border-2",r.color),children:[d.jsx(s,{className:"h-4 w-4"}),r.label]}),d.jsx("button",{onClick:I,"data-test-id":`edit-recipe-${t.id}`,"aria-label":`Rezept ${t.title} bearbeiten`,className:"p-2 hover:bg-slate-700/50 rounded-lg transition-colors text-gray-400 hover:text-primary-400",children:d.jsx(qx,{className:"h-4 w-4"})})]}),d.jsx("button",{onClick:Ve,className:"w-full text-left mb-3",children:d.jsx("h3",{className:"text-xl font-bold text-gray-100 line-clamp-2 hover:text-primary-400 transition-colors",children:t.title})}),N&&d.jsxs("div",{className:"space-y-4 animate-in fade-in slide-in-from-top-2 duration-200",children:[t.description&&d.jsx("p",{className:"text-gray-300 text-sm",children:t.description}),d.jsxs("p",{className:"text-xs text-gray-500",children:["Hinzugefügt: ",new Date(t.createdAt).toLocaleDateString("de-DE")]}),d.jsxs("div",{className:"mb-4 pb-4 border-b border-dark-600/50",children:[d.jsxs("div",{className:"flex items-center justify-between mb-2",children:[d.jsx("span",{className:"text-sm font-medium text-gray-200",children:"Bewertung"}),t.rating&&d.jsxs("span",{className:"text-xs text-gray-400",children:[t.rating,"/5"]})]}),d.jsx(ek,{rating:t.rating||0,onRatingChange:E,size:"lg"})]}),t.ingredients&&t.ingredients.length>0&&d.jsxs("div",{className:"pb-4 border-b border-dark-600/50",children:[d.jsxs("div",{className:"flex items-center justify-between mb-2",children:[d.jsxs("span",{className:"text-sm font-medium text-gray-200",children:["Zutaten (",t.ingredients.length,")"]}),d.jsxs("button",{onClick:ee,"data-test-id":`add-ingredients-to-list-${t.id}`,"aria-label":"Zutaten zur Einkaufsliste hinzufügen",className:"flex items-center gap-1 text-xs font-medium text-primary-500 hover:text-primary-600 transition-colors",children:[d.jsx(Xh,{className:"h-3 w-3"}),"Zur Einkaufsliste"]})]}),d.jsx("div",{className:"space-y-1 max-h-32 overflow-y-auto",children:t.ingredients.map((le,Oe)=>d.jsxs("div",{className:"text-sm text-gray-200 bg-slate-700/50 rounded px-2 py-1 flex justify-between",children:[d.jsx("span",{children:le.name}),le.quantity&&d.jsx("span",{className:"text-gray-400 text-xs",children:le.quantity})]},Oe))})]}),d.jsxs("div",{children:[d.jsxs("div",{className:"flex items-center justify-between mb-2",children:[d.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium text-gray-200",children:[d.jsx(C0,{className:"h-4 w-4 text-accent-500"}),"Notizen"]}),d.jsx("button",{onClick:F,"data-test-id":`toggle-notes-${t.id}`,"aria-label":i?"Notizen-Bearbeitung abbrechen":"Notizen bearbeiten",className:"text-xs text-primary-500 hover:text-primary-600 font-medium transition-colors",children:i?"Abbrechen":"Bearbeiten"})]}),i?d.jsxs("div",{className:"space-y-2",children:[d.jsx("textarea",{value:l,onChange:V,"data-test-id":`notes-input-${t.id}`,"aria-label":"Notizen bearbeiten",placeholder:"Füge deine Notizen hinzu...",rows:3,className:"w-full px-3 py-2 text-sm border-2 border-gray-600 rounded-lg focus:border-accent-500 focus:outline-none transition-colors resize-none bg-slate-700 text-gray-100 placeholder-gray-400"}),d.jsxs("button",{onClick:M,"data-test-id":`save-notes-${t.id}`,"aria-label":"Notizen speichern",className:Ee("w-full flex items-center justify-center gap-2 px-3 py-2 rounded-lg text-sm font-medium transition-all duration-200","bg-accent-500 text-white hover:bg-accent-600"),children:[d.jsx(k0,{className:"h-4 w-4"}),"Speichern"]})]}):d.jsx("div",{className:"text-sm text-gray-300 bg-slate-700/50 rounded-lg p-3 min-h-[60px]",children:t.notes||d.jsx("span",{className:"text-gray-500 italic",children:"Keine Notizen vorhanden"})})]}),d.jsxs("div",{className:"pb-4 border-b border-slate-600",children:[d.jsxs("button",{onClick:k,"data-test-id":`toggle-comments-${t.id}`,"aria-label":h?"Kommentare ausblenden":"Kommentare anzeigen",className:"flex items-center justify-between w-full text-sm font-medium text-gray-200 hover:text-gray-100 transition-colors",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx($x,{className:"h-4 w-4 text-secondary-500"}),"Kommentare",t.comments.length>0&&d.jsx("span",{className:"bg-secondary-100 text-secondary-700 text-xs px-2 py-0.5 rounded-full",children:t.comments.length})]}),d.jsx("span",{className:"text-xs text-primary-500",children:h?"Ausblenden":"Anzeigen"})]}),h&&d.jsxs("div",{className:"mt-3 space-y-3",children:[t.comments.length>0&&d.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:t.comments.map(le=>d.jsxs("div",{className:"bg-slate-700/50 rounded-lg p-3 text-sm",children:[d.jsx("p",{className:"text-gray-200",children:le.text}),d.jsx("p",{className:"text-xs text-gray-500 mt-1",children:new Date(le.createdAt).toLocaleDateString("de-DE",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})})]},le.id))}),d.jsxs("form",{onSubmit:T,className:"flex gap-2",children:[d.jsx("input",{type:"text",value:m,onChange:v,"data-test-id":`comment-input-${t.id}`,"aria-label":"Kommentar hinzufügen",placeholder:"Kommentar hinzufügen...",className:"flex-1 px-3 py-2 text-sm border-2 border-gray-600 rounded-lg focus:border-secondary-500 focus:outline-none transition-colors bg-slate-700 text-gray-100 placeholder-gray-400"}),d.jsx("button",{type:"submit","data-test-id":`add-comment-${t.id}`,"aria-label":"Kommentar senden",disabled:!m.trim(),className:Ee("px-3 py-2 rounded-lg transition-all duration-200",m.trim()?"bg-secondary-500 text-white hover:bg-secondary-600":"bg-slate-600/50 text-gray-500 cursor-not-allowed"),children:d.jsx(Wx,{className:"h-4 w-4"})})]})]})]}),d.jsxs("div",{className:"flex gap-2",children:[t.url&&t.url.trim()!==""&&d.jsxs("button",{onClick:C,"data-test-id":`open-recipe-${t.id}`,"aria-label":`Rezept ${t.title} öffnen`,className:Ee("flex-1 flex items-center justify-center gap-2 px-4 py-2 rounded-lg font-medium transition-all duration-200","bg-primary-500 text-white hover:bg-primary-600 hover:shadow-md"),children:[d.jsx(Ox,{className:"h-4 w-4"}),"Öffnen"]}),d.jsx("button",{onClick:x,"data-test-id":`delete-recipe-${t.id}`,"aria-label":`Rezept ${t.title} löschen`,className:Ee("px-4 py-2 rounded-lg font-medium transition-all duration-200","bg-red-100 text-red-600 hover:bg-red-200",!t.url||t.url.trim()===""?"flex-1":""),children:d.jsx(za,{className:"h-4 w-4"})})]}),d.jsx("button",{onClick:Ve,"data-test-id":`collapse-recipe-${t.id}`,"aria-label":"Details ausblenden",className:"w-full mt-4 py-2 text-sm font-medium text-gray-400 hover:text-primary-400 transition-colors border-t border-dark-600/50 pt-4",children:"▲ Weniger anzeigen"})]}),!N&&d.jsxs("div",{className:"flex items-center justify-between pt-3 border-t border-dark-600/50",children:[d.jsxs("div",{className:"flex items-center gap-3 text-xs text-gray-400",children:[t.rating&&d.jsxs("span",{className:"flex items-center gap-1",children:["⭐ ",t.rating,"/5"]}),t.ingredients.length>0&&d.jsxs("span",{children:["🥕 ",t.ingredients.length]}),t.comments.length>0&&d.jsxs("span",{children:["💬 ",t.comments.length]})]}),d.jsx("button",{onClick:Ve,className:"text-xs text-primary-500 hover:text-primary-600 font-medium",children:"Mehr anzeigen ▼"})]})]})]})]})},ok=({searchTerm:t,onSearchChange:e})=>{const n=s=>{e(s.target.value)},r=()=>{e("")};return d.jsxs("div",{className:"relative",children:[d.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:d.jsx(A0,{className:"h-5 w-5 text-gray-400"})}),d.jsx("input",{type:"text",value:t,onChange:n,"data-test-id":"search-recipes","aria-label":"Rezepte suchen",placeholder:"Suche nach Rezepten, Beschreibung oder Plattform...",className:Ee("w-full pl-12 pr-12 py-3 rounded-full border-2 border-gray-600","focus:border-primary-500 focus:outline-none transition-colors","bg-slate-800/80 shadow-sm text-gray-100 placeholder-gray-400")}),t&&d.jsx("button",{onClick:r,"data-test-id":"clear-search","aria-label":"Suche löschen",className:"absolute inset-y-0 right-0 pr-4 flex items-center hover:text-gray-200 text-gray-400 transition-colors",children:d.jsx(rn,{className:"h-5 w-5"})})]})},I_=async t=>{try{const e=k_(t);if(!e)throw new Error("Ungültige Gist-URL");const n=`https://api.github.com/gists/${e}`,r=await fetch(n);if(!r.ok)throw new Error("Gist konnte nicht geladen werden");const s=await r.json(),i=Object.values(s.files);if(!i.length)throw new Error("Gist enthält keine Dateien");const o=i[0].content,l=JSON.parse(o);if(!l.recipes||!Array.isArray(l.recipes))throw new Error("Ungültiges Datenformat");return l}catch(e){throw new Error("Fehler beim Laden vom Gist: "+e.message)}},k_=t=>{const e=[/gist\.github\.com\/[^\/]+\/([a-f0-9]+)/i,/gist\.github\.com\/([a-f0-9]+)/i,/^([a-f0-9]{32})$/i];for(const n of e){const r=t.match(n);if(r)return r[1]}return null},ak=t=>k_(t)!==null,lk="https://gist.github.com/tubackit/ab2aa98a3c0fd463e82701a616f0dbf6",uk=({onSync:t,mode:e="merge"})=>{const[n,r]=H.useState(!1),[s,i]=H.useState(localStorage.getItem("foodflash_last_sync")),o=async()=>{r(!0);try{const u=await I_(lk);e==="replace"&&localStorage.removeItem("foodflash_recipes"),t(u.recipes);const h=new Date().toISOString();i(h),localStorage.setItem("foodflash_last_sync",h),alert(`✅ ${u.recipes.length} Familien-Rezepte geladen!`)}catch(u){alert("❌ Fehler beim Laden: "+u.message)}finally{r(!1)}},l=()=>s?new Date(s).toLocaleDateString("de-DE",{day:"2-digit",month:"2-digit",hour:"2-digit",minute:"2-digit"}):"Nie";return d.jsxs("div",{className:"bg-gradient-to-r from-blue-500 to-purple-500 rounded-2xl p-4 shadow-lg text-white",children:[d.jsxs("div",{className:"flex items-center justify-between mb-2",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(Vc,{className:"h-5 w-5"}),d.jsx("h3",{className:"font-bold",children:"Familien-Rezepte"})]}),d.jsxs("p",{className:"text-xs opacity-90",children:["Letzter Sync: ",l()]})]}),d.jsxs("button",{onClick:o,disabled:n,"data-test-id":"family-sync","aria-label":"Familien-Rezepte synchronisieren",className:Ee("w-full py-2 px-4 rounded-lg font-medium transition-all duration-200 flex items-center justify-center gap-2",n?"bg-slate-800/80/30 cursor-not-allowed":"bg-slate-800/80 text-blue-600 hover:bg-blue-50 hover:shadow-md"),children:[d.jsx(Hx,{className:Ee("h-4 w-4",n&&"animate-spin")}),n?"Lade...":"Familien-Rezepte aktualisieren"]}),d.jsx("p",{className:"text-xs opacity-75 mt-2 text-center",children:"Lädt die neuesten Rezepte von der Familien-Cloud"})]})},ck="AIzaSyCEonhSF4OlyLDSx0yG5nz0iWUAZQMcpcU",hk=async t=>{const e=`${t} rezept`,n=`https://www.googleapis.com/youtube/v3/search?part=snippet&q=${encodeURIComponent(e)}&type=video&maxResults=12&key=${ck}`;try{const r=await fetch(n);if(!r.ok)throw r.status===403?new Error("API-Key ungültig oder Quota überschritten"):new Error("YouTube API Fehler: "+r.statusText);return(await r.json()).items.map(i=>({id:i.id.videoId,title:i.snippet.title,thumbnail:i.snippet.thumbnails.medium.url,channelTitle:i.snippet.channelTitle,description:i.snippet.description,url:`https://www.youtube.com/watch?v=${i.id.videoId}`}))}catch(r){throw console.error("YouTube API Error:",r),r}},dk=({onSelect:t,onClose:e})=>{const[n,r]=H.useState(""),[s,i]=H.useState([]),[o,l]=H.useState(!1),[u,h]=H.useState(""),p=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1"||window.location.hostname.startsWith("192.168.")||window.location.hostname.startsWith("10.")||window.location.hostname.endsWith(".local"),m=b=>{r(b.target.value)},g=async b=>{if(b.preventDefault(),!!n.trim()){l(!0),h(""),i([]);try{const N=await hk(n);i(N)}catch(N){h(N.message)}finally{l(!1)}}},S=b=>{t(b),e()};return p?d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:d.jsxs("div",{className:"bg-slate-800/80 rounded-2xl p-6 max-w-4xl w-full max-h-[90vh] overflow-hidden flex flex-col shadow-2xl",children:[d.jsxs("div",{className:"flex items-center justify-between mb-4",children:[d.jsxs("h3",{className:"text-2xl font-bold text-gray-100 flex items-center gap-2",children:[d.jsx(xr,{className:"h-7 w-7 text-red-600"}),"Auf YouTube suchen"]}),d.jsx("button",{onClick:e,"data-test-id":"close-youtube-search","aria-label":"Suche schließen",className:"p-2 hover:bg-slate-700 rounded-full transition-colors",children:d.jsx(rn,{className:"h-6 w-6 text-gray-300"})})]}),d.jsx("form",{onSubmit:g,className:"mb-4",children:d.jsxs("div",{className:"relative",children:[d.jsx("input",{type:"text",value:n,onChange:m,placeholder:"Suche nach Rezepten... z.B. 'Carbonara'",className:"w-full pl-12 pr-4 py-3 border-2 border-gray-600 rounded-lg focus:border-red-500 focus:outline-none transition-colors bg-slate-700 text-gray-100 placeholder-gray-400",autoFocus:!0}),d.jsx(A0,{className:"absolute left-4 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),d.jsx("button",{type:"submit",disabled:o||!n.trim(),className:Ee("absolute right-2 top-1/2 -translate-y-1/2 px-4 py-1.5 rounded-lg font-medium transition-all",o||!n.trim()?"bg-gray-200 text-gray-400":"bg-red-600 text-white hover:bg-red-700"),children:o?"Suche...":"Suchen"})]})}),u&&d.jsxs("div",{className:"mb-4 p-4 bg-red-50 border-2 border-red-200 rounded-lg text-red-700",children:["❌ ",u]}),o&&d.jsx("div",{className:"flex-1 flex items-center justify-center",children:d.jsx(Bx,{className:"h-8 w-8 text-red-600 animate-spin"})}),!o&&s.length>0&&d.jsxs("div",{className:"flex-1 overflow-y-auto",children:[d.jsxs("p",{className:"text-sm text-gray-600 mb-3",children:[s.length," Ergebnisse gefunden"]}),d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.map(b=>d.jsxs("button",{onClick:()=>S(b),"data-test-id":`youtube-video-${b.id}`,"aria-label":`${b.title} auswählen`,className:"bg-slate-800/80 border-2 border-gray-600 rounded-xl overflow-hidden hover:border-red-400 hover:shadow-lg transition-all duration-200 text-left group",children:[d.jsxs("div",{className:"relative aspect-video bg-slate-700",children:[d.jsx("img",{src:b.thumbnail,alt:b.title,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-200"}),d.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-10 transition-all flex items-center justify-center",children:d.jsx(xr,{className:"h-12 w-12 text-white opacity-0 group-hover:opacity-100 transition-opacity"})})]}),d.jsxs("div",{className:"p-3",children:[d.jsx("h4",{className:"font-bold text-gray-100 text-sm line-clamp-2 mb-1",children:b.title}),d.jsx("p",{className:"text-xs text-gray-500 line-clamp-1",children:b.channelTitle})]})]},b.id))})]}),!o&&!u&&s.length===0&&n===""&&d.jsx("div",{className:"flex-1 flex items-center justify-center text-center p-8",children:d.jsxs("div",{children:[d.jsx(xr,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),d.jsx("p",{className:"text-gray-500",children:"Suche nach Rezepten auf YouTube"}),d.jsx("p",{className:"text-sm text-gray-400 mt-2",children:'z.B. "Spaghetti Carbonara"'})]})})]})}):d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:d.jsxs("div",{className:"bg-slate-800/80 rounded-2xl p-6 max-w-md w-full shadow-2xl text-center",children:[d.jsxs("div",{className:"mb-4",children:[d.jsx(xr,{className:"h-16 w-16 text-red-600 mx-auto mb-4"}),d.jsx("h3",{className:"text-2xl font-bold text-gray-100 mb-2",children:"YouTube-Suche nur lokal verfügbar"}),d.jsx("p",{className:"text-gray-300 mb-6",children:"Die YouTube-Suche funktioniert nur auf dem lokalen Development-Server aus Sicherheitsgründen. Verwende die App lokal unter:"}),d.jsx("code",{className:"bg-slate-700 px-3 py-2 rounded text-primary-400 font-mono text-sm",children:"http://localhost:5174/FoodFlash/"})]}),d.jsx("button",{onClick:e,className:"w-full bg-primary-600 text-white py-3 px-6 rounded-lg font-medium hover:bg-primary-700 transition-colors",children:"Schließen"})]})})},fk=(t,e,n)=>{const r={version:"1.0",exportDate:new Date().toISOString(),recipes:t,weekPlan:e,shoppingList:n},s=JSON.stringify(r,null,2),i=new Blob([s],{type:"application/json"}),o=URL.createObjectURL(i),l=document.createElement("a");l.href=o,l.download=`foodflash-export-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(o)},mk=t=>new Promise((e,n)=>{const r=new FileReader;r.onload=s=>{var i;try{const o=(i=s.target)==null?void 0:i.result,l=JSON.parse(o);if(!l.recipes||!Array.isArray(l.recipes))throw new Error("Ungültiges Datenformat");e(l)}catch(o){n(new Error("Fehler beim Lesen der Datei: "+o.message))}},r.onerror=()=>{n(new Error("Fehler beim Lesen der Datei"))},r.readAsText(t)}),pk=({platformFilter:t,onClearFilter:e})=>{const{recipes:n,addRecipe:r,deleteRecipe:s,updateRecipe:i,isLoading:o}=Od(),[l,u]=H.useState(""),[h,p]=H.useState(!1),[m,g]=H.useState("merge"),S=H.useRef(null),[b,N]=H.useState(!1),[D,_]=H.useState(""),[x,C]=H.useState(!1),[V,M]=H.useState(!0),[F,E]=H.useState(!1),v=H.useMemo(()=>{let X=n;if(t&&(X=X.filter(de=>de.platform===t)),l.trim()){const de=l.toLowerCase();X=X.filter(Ge=>{const ue=Ge.title.toLowerCase(),pt=Ge.description.toLowerCase(),Ur=Ge.platform.toLowerCase(),Qt=(Ge.notes||"").toLowerCase();return ue.includes(de)||pt.includes(de)||Ur.includes(de)||Qt.includes(de)})}return X},[n,l,t]),T=()=>{fk(n)},k=()=>{p(!0)},I=async X=>{var Ge;const de=(Ge=X.target.files)==null?void 0:Ge[0];if(de)try{const ue=await mk(de);if(m==="replace")localStorage.removeItem("foodflash_recipes"),ue.recipes.forEach(pt=>r(pt));else{const pt=new Set(n.map(Qt=>Qt.url));ue.recipes.filter(Qt=>!pt.has(Qt.url)).forEach(Qt=>r(Qt))}p(!1),S.current&&(S.current.value=""),alert(`✅ ${m==="replace"?"Ersetzt":"Hinzugefügt"}: ${ue.recipes.length} Rezepte`)}catch(ue){alert("❌ Fehler beim Importieren: "+ue.message)}},A=X=>{g(X)},w=()=>{p(!1),S.current&&(S.current.value="")},ee=()=>{const X=localStorage.getItem("foodflash_gist_url");X&&_(X),N(!0)},Ve=()=>{N(!1),_("")},le=X=>{_(X.target.value)},Oe=async()=>{if(!D.trim()){alert("Bitte Gist-URL eingeben!");return}if(!ak(D)){alert("Ungültige Gist-URL! Bitte überprüfe die URL.");return}C(!0);try{const X=await I_(D);if(m==="replace")localStorage.removeItem("foodflash_recipes"),X.recipes.forEach(de=>r(de));else{const de=new Set(n.map(ue=>ue.url));X.recipes.filter(ue=>!de.has(ue.url)).forEach(ue=>r(ue))}V&&localStorage.setItem("foodflash_gist_url",D),N(!1),_(""),alert(`✅ ${X.recipes.length} Rezepte von Gist geladen!`)}catch(X){alert("❌ "+X.message)}finally{C(!1)}},U=()=>{localStorage.removeItem("foodflash_gist_url"),_(""),alert("✅ Gespeicherte Gist-URL wurde gelöscht")},Q=X=>{const de=new Set(n.map(ue=>ue.url));X.filter(ue=>!de.has(ue.url)).forEach(ue=>r(ue))},J=()=>{E(!0)},me=()=>{E(!1)},Te=X=>{r({title:X.title,url:X.url,description:X.description.slice(0,200),imageUrl:X.thumbnail,platform:"youtube",ingredients:[],comments:[],rating:void 0,notes:""}),E(!1)};return d.jsxs("div",{className:"max-w-6xl mx-auto",children:[d.jsxs("div",{className:"text-center mb-8",children:[d.jsxs("h2",{className:"text-4xl font-bold text-gray-100 mb-2 flex items-center justify-center gap-3",children:[d.jsx(w0,{className:"h-10 w-10 text-primary-500"}),"Deine Rezepte"]}),d.jsx("p",{className:"text-gray-600",children:n.length===0?"Füge dein erstes Rezept hinzu!":`${n.length} ${n.length===1?"Rezept":"Rezepte"} gespeichert`})]}),t&&e&&d.jsx("div",{className:"flex justify-center mb-6",children:d.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-primary-100 text-primary-700 rounded-full font-medium",children:[d.jsxs("span",{children:["Filter: ",t==="youtube"?"YouTube":t==="instagram"?"Instagram":t==="facebook"?"Facebook":t==="tiktok"?"TikTok":t==="own"?"Eigene Rezepte":t]}),d.jsx("button",{onClick:e,"data-test-id":"clear-platform-filter","aria-label":"Filter entfernen",className:"p-1 hover:bg-primary-200 rounded-full transition-colors",children:d.jsx(rn,{className:"h-4 w-4"})})]})}),d.jsx("div",{className:"mb-8",children:d.jsx(ZI,{onAdd:X=>r({...X,ingredients:X.ingredients||[],comments:[],rating:void 0})})}),d.jsx("div",{className:"mb-6",children:d.jsx(uk,{onSync:Q,mode:"merge"})}),d.jsx("div",{className:"mb-6",children:d.jsxs("button",{onClick:J,"data-test-id":"youtube-search","aria-label":"Auf YouTube nach Rezepten suchen",className:"w-full bg-gradient-to-r from-red-500 to-red-600 text-white rounded-2xl p-4 shadow-lg hover:shadow-xl transition-all duration-200 hover:scale-105 flex items-center justify-center gap-3 font-bold text-lg",children:[d.jsx(xr,{className:"h-6 w-6"}),"Rezept auf YouTube suchen"]})}),F&&d.jsx(dk,{onSelect:Te,onClose:me}),d.jsxs("div",{className:"flex flex-wrap gap-3 mb-6 justify-center",children:[n.length>0&&d.jsxs("button",{onClick:T,"data-test-id":"export-recipes","aria-label":"Rezepte exportieren",className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-accent-500 to-accent-600 text-white rounded-lg font-medium hover:shadow-lg transition-all duration-200 hover:scale-105",children:[d.jsx(Mx,{className:"h-5 w-5"}),"Exportieren"]}),d.jsxs("button",{onClick:k,"data-test-id":"import-recipes","aria-label":"Rezepte importieren",className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-secondary-500 to-secondary-600 text-white rounded-lg font-medium hover:shadow-lg transition-all duration-200 hover:scale-105",children:[d.jsx(Kx,{className:"h-5 w-5"}),"Datei"]}),d.jsxs("button",{onClick:ee,"data-test-id":"load-from-gist","aria-label":"Von GitHub Gist laden",className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-lg font-medium hover:shadow-lg transition-all duration-200 hover:scale-105",children:[d.jsx(Vc,{className:"h-5 w-5"}),"Gist-Cloud"]})]}),h&&d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:d.jsxs("div",{className:"bg-slate-800/80 rounded-2xl p-6 max-w-md w-full shadow-2xl",children:[d.jsxs("div",{className:"flex items-center justify-between mb-4",children:[d.jsxs("h3",{className:"text-xl font-bold text-gray-100 flex items-center gap-2",children:[d.jsx(Fx,{className:"h-6 w-6 text-secondary-500"}),"Rezepte importieren"]}),d.jsx("button",{onClick:w,"data-test-id":"close-import-dialog","aria-label":"Dialog schließen",className:"p-2 hover:bg-slate-700 rounded-full transition-colors",children:d.jsx(rn,{className:"h-6 w-6 text-gray-500"})})]}),d.jsxs("div",{className:"mb-4",children:[d.jsx("p",{className:"text-sm font-medium text-gray-200 mb-2",children:"Import-Modus:"}),d.jsxs("div",{className:"space-y-2",children:[d.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[d.jsx("input",{type:"radio",name:"import-mode",checked:m==="merge",onChange:()=>A("merge"),className:"w-4 h-4 text-secondary-500"}),d.jsxs("div",{children:[d.jsx("span",{className:"font-medium text-gray-100",children:"Hinzufügen"}),d.jsx("p",{className:"text-xs text-gray-600",children:"Neue Rezepte zu bestehenden hinzufügen"})]})]}),d.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[d.jsx("input",{type:"radio",name:"import-mode",checked:m==="replace",onChange:()=>A("replace"),className:"w-4 h-4 text-secondary-500"}),d.jsxs("div",{children:[d.jsx("span",{className:"font-medium text-gray-100",children:"Ersetzen"}),d.jsx("p",{className:"text-xs text-gray-600",children:"Alle bestehenden Rezepte löschen und ersetzen"})]})]})]})]}),d.jsx("input",{ref:S,type:"file",accept:".json,application/json",onChange:I,className:"hidden",id:"recipe-file-input"}),d.jsx("label",{htmlFor:"recipe-file-input",className:Ee("block w-full py-3 text-center rounded-lg font-bold cursor-pointer transition-all duration-200","bg-gradient-to-r from-secondary-500 to-secondary-600 text-white hover:shadow-lg hover:scale-105"),children:"Datei auswählen"}),d.jsx("p",{className:"text-xs text-gray-500 mt-3 text-center",children:"Wähle eine FoodFlash JSON-Datei aus"})]})}),b&&d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:d.jsxs("div",{className:"bg-slate-800/80 rounded-2xl p-6 max-w-lg w-full shadow-2xl",children:[d.jsxs("div",{className:"flex items-center justify-between mb-4",children:[d.jsxs("h3",{className:"text-xl font-bold text-gray-100 flex items-center gap-2",children:[d.jsx(Vc,{className:"h-6 w-6 text-blue-500"}),"Von GitHub Gist laden"]}),d.jsx("button",{onClick:Ve,"data-test-id":"close-gist-dialog","aria-label":"Dialog schließen",className:"p-2 hover:bg-slate-700 rounded-full transition-colors",children:d.jsx(rn,{className:"h-6 w-6 text-gray-500"})})]}),d.jsxs("div",{className:"mb-4 p-4 bg-blue-50 border-2 border-blue-200 rounded-lg",children:[d.jsx("p",{className:"text-sm text-blue-800 font-medium mb-2",children:"💡 So funktioniert's:"}),d.jsxs("ol",{className:"text-xs text-blue-700 space-y-1 list-decimal list-inside",children:[d.jsxs("li",{children:["Ein Familienmitglied erstellt einen ",d.jsx("strong",{children:"öffentlichen Gist"})," mit der Export-Datei"]}),d.jsx("li",{children:"Gist-URL wird mit der Familie geteilt"}),d.jsx("li",{children:"Alle laden die Rezepte von dieser URL"})]}),d.jsxs("p",{className:"text-xs text-blue-600 mt-2",children:["📖 ",d.jsx("a",{href:"https://gist.github.com",target:"_blank",rel:"noopener noreferrer",className:"underline",children:"gist.github.com"})," - kostenlos & einfach!"]})]}),d.jsxs("div",{className:"mb-4",children:[d.jsx("p",{className:"text-sm font-medium text-gray-200 mb-2",children:"Import-Modus:"}),d.jsxs("div",{className:"space-y-2",children:[d.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[d.jsx("input",{type:"radio",name:"gist-import-mode",checked:m==="merge",onChange:()=>A("merge"),className:"w-4 h-4 text-blue-500"}),d.jsxs("div",{children:[d.jsx("span",{className:"font-medium text-gray-100",children:"Hinzufügen"}),d.jsx("p",{className:"text-xs text-gray-600",children:"Neue Rezepte zu bestehenden hinzufügen"})]})]}),d.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[d.jsx("input",{type:"radio",name:"gist-import-mode",checked:m==="replace",onChange:()=>A("replace"),className:"w-4 h-4 text-blue-500"}),d.jsxs("div",{children:[d.jsx("span",{className:"font-medium text-gray-100",children:"Ersetzen"}),d.jsx("p",{className:"text-xs text-gray-600",children:"Alle bestehenden Rezepte löschen und ersetzen"})]})]})]})]}),d.jsxs("div",{className:"mb-4",children:[d.jsxs("div",{className:"flex items-center justify-between mb-1",children:[d.jsx("label",{htmlFor:"gist-url",className:"block text-sm font-medium text-gray-200",children:"GitHub Gist URL"}),localStorage.getItem("foodflash_gist_url")&&d.jsx("button",{onClick:U,className:"text-xs text-red-500 hover:text-red-600 font-medium",children:"URL löschen"})]}),d.jsx("input",{id:"gist-url",type:"url",value:D,onChange:le,placeholder:"https://gist.github.com/username/...",className:"w-full px-4 py-2 border-2 border-gray-600 rounded-lg focus:border-blue-500 focus:outline-none transition-colors bg-slate-700 text-gray-100 placeholder-gray-400"}),d.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Z.B.: https://gist.github.com/username/abc123..."}),d.jsxs("label",{className:"flex items-center gap-2 mt-2 cursor-pointer",children:[d.jsx("input",{type:"checkbox",checked:V,onChange:X=>M(X.target.checked),className:"w-4 h-4 text-blue-500"}),d.jsx("span",{className:"text-sm text-gray-200",children:"URL für nächstes Mal speichern"})]})]}),d.jsx("button",{onClick:Oe,disabled:x,className:Ee("w-full py-3 rounded-lg font-bold text-white transition-all duration-200",x?"bg-gray-400 cursor-not-allowed":"bg-gradient-to-r from-blue-500 to-blue-600 hover:shadow-lg hover:scale-105"),children:x?"Lade...":"Von Gist laden"})]})}),n.length>0&&d.jsxs("div",{className:"mb-8",children:[d.jsx(ok,{searchTerm:l,onSearchChange:u}),l&&d.jsxs("p",{className:"text-sm text-gray-500 mt-2 text-center",children:[v.length," ",v.length===1?"Ergebnis":"Ergebnisse"," gefunden"]})]}),o?d.jsxs("div",{className:"bg-slate-800/80 rounded-2xl p-12 text-center shadow-lg",children:[d.jsx("div",{className:"text-6xl mb-4 animate-pulse",children:"🔄"}),d.jsx("h3",{className:"text-2xl font-bold text-gray-200 mb-2",children:"Lade Rezepte..."}),d.jsx("p",{className:"text-gray-400",children:"Synchronisiere mit der Cloud ☁️"})]}):n.length>0?v.length>0?d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:v.map(X=>d.jsx(ik,{recipe:X,onDelete:s,onUpdate:i},X.id))}):d.jsxs("div",{className:"bg-slate-800/80 rounded-2xl p-12 text-center shadow-lg",children:[d.jsx("div",{className:"text-6xl mb-4",children:"🔍"}),d.jsx("h3",{className:"text-2xl font-bold text-gray-200 mb-2",children:"Keine Ergebnisse"}),d.jsxs("p",{className:"text-gray-500",children:['Keine Rezepte für "',l,'" gefunden.']})]}):d.jsxs("div",{className:"bg-slate-800/80 rounded-2xl p-12 text-center shadow-lg",children:[d.jsx("div",{className:"text-6xl mb-4",children:"🍳"}),d.jsx("h3",{className:"text-2xl font-bold text-gray-200 mb-2",children:"Noch keine Rezepte"}),d.jsx("p",{className:"text-gray-500",children:"Klicke auf den Button oben, um dein erstes Rezept zu speichern!"})]})]})},gk=()=>{const[t,e]=H.useState([]),[n,r]=H.useState(!0),[s,i]=H.useState(null);return H.useEffect(()=>{const m=io(ht,"weekPlanner"),g=Md(m,S=>{const b=[];S.forEach(N=>{b.push({date:N.id,meals:N.data().meals||[]})}),b.sort((N,D)=>N.date.localeCompare(D.date)),e(b),r(!1),i(null)},S=>{console.error("Error fetching week planner:",S),i("Fehler beim Laden des Wochenplaners"),r(!1)});return()=>g()},[]),{weekPlan:t,isLoading:n,error:s,addMealToDay:async(m,g,S,b)=>{try{const N=$t(ht,"weekPlanner",m),D=t.find(x=>x.date===m),_=D?[...D.meals]:[];_.push({recipeId:g,recipeTitle:S,mealType:b}),await sg(N,{meals:_,updatedAt:tl()})}catch(N){throw console.error("Error adding meal:",N),i("Fehler beim Hinzufügen der Mahlzeit"),N}},removeMealFromDay:async(m,g)=>{try{const S=t.find(D=>D.date===m);if(!S)return;const b=S.meals.filter((D,_)=>_!==g),N=$t(ht,"weekPlanner",m);b.length===0?await Ar(N):await sg(N,{meals:b,updatedAt:tl()})}catch(S){throw console.error("Error removing meal:",S),i("Fehler beim Entfernen der Mahlzeit"),S}},clearDay:async m=>{try{const g=$t(ht,"weekPlanner",m);await Ar(g)}catch(g){throw console.error("Error clearing day:",g),i("Fehler beim Leeren des Tages"),g}},clearWeekPlan:async()=>{try{const m=t.map(g=>Ar($t(ht,"weekPlanner",g.date)));await Promise.all(m)}catch(m){throw console.error("Error clearing week plan:",m),i("Fehler beim Leeren des Wochenplaners"),m}},getMealsForDate:m=>{const g=t.find(S=>S.date===m);return(g==null?void 0:g.meals)||[]}}},yk=()=>{const t=gk(),{recipes:e}=Od(),n={monday:{meals:[]},tuesday:{meals:[]},wednesday:{meals:[]},thursday:{meals:[]},friday:{meals:[]},saturday:{meals:[]},sunday:{meals:[]}},r=h=>{const p=new Date,m=p.getDay(),b={sunday:0,monday:1,tuesday:2,wednesday:3,thursday:4,friday:5,saturday:6}[h]-m,N=new Date(p);return N.setDate(p.getDate()+b),N.toISOString().split("T")[0]};t.weekPlan.forEach(h=>{const m=new Date(h.date).getDay(),S=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"][m];n[S].meals=h.meals.map(b=>({recipeId:b.recipeId,mealType:b.mealType}))});const s={weekStart:new Date().toISOString(),days:n},i=async(h,p)=>{const m=r(h),g=e.find(S=>S.id===p.recipeId);if(!g){console.error("Recipe not found:",p.recipeId);return}await t.addMealToDay(m,p.recipeId,g.title,p.mealType)},o=async(h,p,m)=>{const g=r(h),b=t.getMealsForDate(g).findIndex(N=>N.recipeId===p&&N.mealType===m);b!==-1&&await t.removeMealFromDay(g,b)},l=async h=>{const p=r(h);await t.clearDay(p)},u=async()=>{await t.clearWeekPlan()};return{weekPlan:s,isLoading:t.isLoading,error:t.error,addMealToDay:i,removeMealFromDay:o,clearDay:l,clearWeek:u}},Fu=[{key:"monday",label:"Montag",short:"Mo"},{key:"tuesday",label:"Dienstag",short:"Di"},{key:"wednesday",label:"Mittwoch",short:"Mi"},{key:"thursday",label:"Donnerstag",short:"Do"},{key:"friday",label:"Freitag",short:"Fr"},{key:"saturday",label:"Samstag",short:"Sa"},{key:"sunday",label:"Sonntag",short:"So"}],ig=[{key:"breakfast",label:"Frühstück",emoji:"🥐"},{key:"lunch",label:"Mittagessen",emoji:"🍽️"},{key:"dinner",label:"Abendessen",emoji:"🍝"},{key:"snack",label:"Snack",emoji:"🍪"}],vk=()=>{var D;const{weekPlan:t,addMealToDay:e,removeMealFromDay:n,clearDay:r,clearWeek:s,isLoading:i}=yk(),{recipes:o}=Od(),[l,u]=H.useState(null),[h,p]=H.useState("lunch"),m=_=>{l&&(e(l,{recipeId:_,mealType:h}),u(null))},g=(_,x,C)=>{n(_,x,C)},S=_=>{var x;confirm(`Möchtest du alle Mahlzeiten für ${(x=Fu.find(C=>C.key===_))==null?void 0:x.label} löschen?`)&&r(_)},b=()=>{confirm("Möchtest du den gesamten Wochenplan löschen?")&&s()},N=_=>o.find(x=>x.id===_);return d.jsxs("div",{className:"max-w-7xl mx-auto",children:[d.jsxs("div",{className:"text-center mb-8",children:[d.jsxs("h2",{className:"text-4xl font-bold text-gray-100 mb-2 flex items-center justify-center gap-3",children:[d.jsx(x0,{className:"h-10 w-10 text-accent-500"}),"Wochenplaner"]}),d.jsx("p",{className:"text-gray-400 mb-4",children:i?"🔄 Synchronisiere mit der Cloud...":"Plane deine Mahlzeiten für die Woche"}),d.jsx("button",{onClick:b,"data-test-id":"clear-week","aria-label":"Wochenplan löschen",className:"text-sm text-red-500 hover:text-red-600 font-medium transition-colors",children:"Wochenplan zurücksetzen"})]}),d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-7 gap-4 mb-8",children:Fu.map(_=>{const x=t.days[_.key].meals,C=ig.map(V=>({...V,meals:x.filter(M=>M.mealType===V.key)}));return d.jsxs("div",{className:"bg-slate-700/50 backdrop-blur-sm rounded-2xl p-4 shadow-lg border-2 border-dark-600/50",children:[d.jsxs("div",{className:"flex items-center justify-between mb-3 pb-2 border-b-2 border-slate-600",children:[d.jsxs("div",{children:[d.jsx("h3",{className:"font-bold text-gray-100 hidden lg:block",children:_.label}),d.jsx("h3",{className:"font-bold text-gray-100 lg:hidden",children:_.short})]}),d.jsx("button",{onClick:()=>S(_.key),"data-test-id":`clear-day-${_.key}`,"aria-label":`${_.label} löschen`,className:"p-1 hover:bg-red-600/20 rounded-lg transition-colors text-red-400",children:d.jsx(za,{className:"h-4 w-4"})})]}),d.jsx("div",{className:"space-y-3",children:C.map(V=>d.jsxs("div",{children:[d.jsxs("div",{className:"text-xs font-medium text-gray-400 mb-1 flex items-center gap-1",children:[d.jsx("span",{children:V.emoji}),d.jsx("span",{className:"hidden lg:inline",children:V.label})]}),d.jsx("div",{className:"space-y-1",children:V.meals.map((M,F)=>{const E=N(M.recipeId);return E?d.jsxs("div",{className:"bg-gradient-to-r from-primary-600/30 to-secondary-600/30 rounded-lg p-2 text-xs group relative border border-primary-500/20",children:[d.jsx("p",{className:"font-medium text-gray-100 pr-6 line-clamp-2",children:E.title}),d.jsx("button",{onClick:()=>g(_.key,M.recipeId,M.mealType),"data-test-id":`remove-meal-${_.key}-${M.recipeId}`,"aria-label":`${E.title} entfernen`,className:"absolute top-1 right-1 p-1 bg-slate-800 rounded opacity-0 group-hover:opacity-100 transition-opacity hover:bg-red-600/20 text-red-400",children:d.jsx(za,{className:"h-3 w-3"})})]},`${M.recipeId}-${F}`):null})})]},V.key))}),d.jsxs("button",{onClick:()=>u(_.key),"data-test-id":`add-meal-${_.key}`,"aria-label":`Mahlzeit zu ${_.label} hinzufügen`,className:Ee("w-full mt-3 py-2 rounded-lg font-medium text-sm transition-all duration-200 flex items-center justify-center gap-2",l===_.key?"bg-accent-500 text-white shadow-lg":"bg-slate-700 text-gray-300 hover:bg-accent-600/20 hover:text-accent-400"),children:[d.jsx(Qi,{className:"h-4 w-4"}),d.jsx("span",{className:"hidden lg:inline",children:"Hinzufügen"})]})]},_.key)})}),l&&d.jsxs("div",{className:"bg-slate-800/80 backdrop-blur-sm rounded-2xl p-6 shadow-2xl border-2 border-accent-500/30 autumn-glow-gold",children:[d.jsxs("div",{className:"flex items-center justify-between mb-4",children:[d.jsxs("h3",{className:"text-xl font-bold text-gray-100 flex items-center gap-2",children:[d.jsx(Dx,{className:"h-6 w-6 text-accent-500"}),"Rezept für ",(D=Fu.find(_=>_.key===l))==null?void 0:D.label," auswählen"]}),d.jsx("button",{onClick:()=>u(null),"data-test-id":"close-recipe-selection","aria-label":"Rezeptauswahl schließen",className:"text-gray-400 hover:text-gray-200",children:"✕"})]}),d.jsxs("div",{className:"mb-4",children:[d.jsx("label",{className:"block text-sm font-medium text-gray-200 mb-2",children:"Mahlzeit"}),d.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:ig.map(_=>d.jsxs("button",{onClick:()=>p(_.key),"data-test-id":`select-meal-type-${_.key}`,"aria-label":`${_.label} auswählen`,className:Ee("py-2 px-3 rounded-lg font-medium text-sm transition-all duration-200",h===_.key?"bg-accent-500 text-white shadow-md":"bg-slate-700 text-gray-300 hover:bg-accent-600/20 hover:text-accent-400"),children:[d.jsx("span",{className:"mr-1",children:_.emoji}),_.label]},_.key))})]}),o.length>0?d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3 max-h-96 overflow-y-auto",children:o.map(_=>d.jsxs("button",{onClick:()=>m(_.id),"data-test-id":`select-recipe-${_.id}`,"aria-label":`${_.title} hinzufügen`,className:"bg-slate-700/80 hover:bg-slate-600/80 rounded-xl p-4 text-left transition-all duration-200 hover:shadow-lg hover:scale-105 border-2 border-slate-600/50 hover:border-accent-500/50",children:[d.jsx("p",{className:"font-bold text-gray-100 mb-1 line-clamp-2",children:_.title}),_.rating&&d.jsxs("p",{className:"text-xs text-gray-400",children:["⭐ ",_.rating,"/5"]})]},_.id))}):d.jsx("div",{className:"text-center py-8 text-gray-400",children:d.jsx("p",{children:"Keine Rezepte vorhanden. Füge zuerst Rezepte hinzu!"})})]})]})},_k={produce:{label:"Obst & Gemüse",emoji:"🥬"},bakery:{label:"Brot & Backwaren",emoji:"🥖"},meat:{label:"Fleisch & Wurst",emoji:"🥩"},deli:{label:"Aufschnitt",emoji:"🥓"},dairy:{label:"Käse & Milchprodukte",emoji:"🧀"},beverages:{label:"Getränke",emoji:"🥤"},pantry:{label:"Konserven & Vorräte",emoji:"🥫"},snacks:{label:"Süßigkeiten & Snacks",emoji:"🍫"},frozen:{label:"Tiefkühlware",emoji:"🧊"},household:{label:"Haushalt & Sonstiges",emoji:"🧹"}},wk=["produce","bakery","meat","deli","dairy","beverages","pantry","snacks","frozen","household"],og=t=>{if(t.length===0)return"🛒 Einkaufsliste ist leer";const e=t.filter(r=>!r.checked);if(e.length===0)return"✅ Alle Artikel wurden bereits gekauft!";let n=`🛒 *Einkaufsliste*

`;return wk.forEach(r=>{const s=e.filter(i=>i.category===r);if(s.length>0){const i=_k[r];n+=`${i.emoji} *${i.label}*
`,s.forEach(o=>{const l=o.quantity?` (${o.quantity})`:"";n+=`  • ${o.name}${l}
`}),n+=`
`}}),n+=`📊 Insgesamt: ${e.length} ${e.length===1,"Artikel"}`,n},ag=[{key:"produce",label:"Obst & Gemüse",emoji:"🥬"},{key:"bakery",label:"Brot & Backwaren",emoji:"🥖"},{key:"meat",label:"Fleisch & Wurst",emoji:"🥩"},{key:"deli",label:"Aufschnitt",emoji:"🥓"},{key:"dairy",label:"Käse & Milchprodukte",emoji:"🧀"},{key:"beverages",label:"Getränke",emoji:"🥤"},{key:"pantry",label:"Konserven & Vorräte",emoji:"🥫"},{key:"snacks",label:"Süßigkeiten & Snacks",emoji:"🍫"},{key:"frozen",label:"Tiefkühlware",emoji:"🧊"},{key:"household",label:"Haushalt & Sonstiges",emoji:"🧹"}],xk=()=>{const{items:t,addItem:e,toggleItem:n,removeItem:r,clearCheckedItems:s,clearAllItems:i,isLoading:o}=S_(),[l,u]=H.useState(!1),[h,p]=H.useState(""),[m,g]=H.useState(""),[S,b]=H.useState("produce"),N=A=>{A.preventDefault(),h.trim()&&(e(h,S,m),p(""),g(""),u(!1))},D=A=>{p(A.target.value)},_=A=>{g(A.target.value)},x=A=>{b(A.target.value)},C=A=>{n(A)},V=A=>{r(A)},M=()=>{confirm("Möchtest du alle abgehakten Artikel löschen?")&&s()},F=()=>{confirm("Möchtest du die gesamte Einkaufsliste löschen?")&&i()},E=async()=>{const A=og(t);try{await navigator.clipboard.writeText(A),alert("✅ Einkaufsliste in Zwischenablage kopiert!")}catch{const ee=document.createElement("textarea");ee.value=A,document.body.appendChild(ee),ee.select(),document.execCommand("copy"),document.body.removeChild(ee),alert("✅ Einkaufsliste kopiert!")}},v=()=>{const A=og(t),ee=`https://wa.me/?text=${encodeURIComponent(A)}`;window.open(ee,"_blank")},T=ag.map(A=>({...A,items:t.filter(w=>w.category===A.key)})),k=t.filter(A=>A.checked).length,I=t.length;return d.jsxs("div",{className:"max-w-4xl mx-auto",children:[d.jsxs("div",{className:"text-center mb-8",children:[d.jsxs("h2",{className:"text-4xl font-bold text-gray-100 mb-2 flex items-center justify-center gap-3",children:[d.jsx(Xh,{className:"h-10 w-10 text-primary-500"}),"Einkaufsliste"]}),d.jsx("p",{className:"text-gray-300",children:o?"🔄 Synchronisiere mit der Cloud...":I===0?"Füge Artikel zu deiner Einkaufsliste hinzu":d.jsxs(d.Fragment,{children:[k," von ",I," ",I===1?"Artikel":"Artikeln"," gekauft"]})})]}),l?d.jsxs("div",{className:"bg-slate-800/80 backdrop-blur-sm rounded-2xl p-6 shadow-xl border-2 border-primary-500/30 autumn-glow mb-6",children:[d.jsxs("div",{className:"flex items-center justify-between mb-4",children:[d.jsx("h3",{className:"text-xl font-bold text-gray-100",children:"Neuer Artikel"}),d.jsx("button",{onClick:()=>u(!1),"data-test-id":"close-add-item","aria-label":"Formular schließen",className:"p-2 hover:bg-slate-700 rounded-full transition-colors",children:d.jsx(rn,{className:"h-6 w-6 text-gray-300"})})]}),d.jsxs("form",{onSubmit:N,className:"space-y-4",children:[d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{htmlFor:"item-name",className:"block text-sm font-medium text-gray-200 mb-1",children:"Artikel *"}),d.jsx("input",{id:"item-name",type:"text",value:h,onChange:D,"data-test-id":"item-name-input","aria-label":"Artikel-Name eingeben",placeholder:"z.B. Tomaten",className:"w-full px-4 py-2 border-2 border-gray-600 rounded-lg focus:border-primary-500 focus:outline-none transition-colors bg-slate-700 text-gray-100 placeholder-gray-400",required:!0,autoFocus:!0})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"item-quantity",className:"block text-sm font-medium text-gray-200 mb-1",children:"Menge (optional)"}),d.jsx("input",{id:"item-quantity",type:"text",value:m,onChange:_,"data-test-id":"item-quantity-input","aria-label":"Menge eingeben",placeholder:"z.B. 500g, 3 Stück",className:"w-full px-4 py-2 border-2 border-gray-600 rounded-lg focus:border-primary-500 focus:outline-none transition-colors bg-slate-700 text-gray-100 placeholder-gray-400"})]})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"item-category",className:"block text-sm font-medium text-gray-200 mb-1",children:"Kategorie *"}),d.jsx("select",{id:"item-category",value:S,onChange:x,"data-test-id":"item-category-select","aria-label":"Kategorie auswählen",className:"w-full px-4 py-2 border-2 border-gray-600 rounded-lg focus:border-primary-500 focus:outline-none transition-colors bg-slate-700 text-gray-100",children:ag.map(A=>d.jsxs("option",{value:A.key,children:[A.emoji," ",A.label]},A.key))})]}),d.jsx("button",{type:"submit","data-test-id":"submit-item","aria-label":"Artikel zur Liste hinzufügen",className:"w-full py-3 rounded-lg font-bold text-white transition-all duration-200 bg-gradient-to-r from-primary-500 to-secondary-500 hover:shadow-lg hover:scale-105",children:"Zur Liste hinzufügen"})]})]}):d.jsxs("button",{onClick:()=>u(!0),"data-test-id":"open-add-item","aria-label":"Artikel hinzufügen",className:"w-full bg-gradient-to-r from-primary-500 to-secondary-500 text-white rounded-2xl p-4 shadow-lg hover:shadow-xl transition-all duration-200 hover:scale-105 flex items-center justify-center gap-3 font-bold text-lg mb-6",children:[d.jsx(Qi,{className:"h-6 w-6"}),"Artikel hinzufügen"]}),t.length>0&&d.jsxs("div",{className:"space-y-3 mb-6",children:[d.jsxs("div",{className:"flex gap-3",children:[d.jsxs("button",{onClick:E,"data-test-id":"copy-shopping-list","aria-label":"Einkaufsliste kopieren",className:"flex-1 py-3 px-4 bg-gradient-to-r from-primary-500 to-secondary-500 text-white rounded-lg font-medium hover:shadow-lg transition-all duration-200 hover:scale-105 flex items-center justify-center gap-2",children:[d.jsx(Lx,{className:"h-5 w-5"}),"Kopieren"]}),d.jsxs("button",{onClick:v,"data-test-id":"share-whatsapp","aria-label":"Per WhatsApp teilen",className:"flex-1 py-3 px-4 bg-gradient-to-r from-green-500 to-green-600 text-white rounded-lg font-medium hover:shadow-lg transition-all duration-200 hover:scale-105 flex items-center justify-center gap-2",children:[d.jsx(Gx,{className:"h-5 w-5"}),"WhatsApp"]})]}),d.jsxs("div",{className:"flex gap-3",children:[k>0&&d.jsxs("button",{onClick:M,"data-test-id":"clear-checked","aria-label":"Abgehakte Artikel löschen",className:"flex-1 py-2 px-4 bg-accent-100 text-accent-700 rounded-lg font-medium hover:bg-accent-200 transition-colors text-sm",children:["Abgehakte löschen (",k,")"]}),d.jsx("button",{onClick:F,"data-test-id":"clear-all","aria-label":"Alle Artikel löschen",className:"py-2 px-4 bg-red-100 text-red-600 rounded-lg font-medium hover:bg-red-200 transition-colors text-sm",children:"Alle löschen"})]})]}),t.length>0?d.jsx("div",{className:"space-y-4",children:T.map(A=>A.items.length===0?null:d.jsxs("div",{className:"bg-slate-700/50 backdrop-blur-sm rounded-2xl p-5 shadow-lg border-2 border-dark-600/50",children:[d.jsxs("h3",{className:"font-bold text-gray-100 mb-3 flex items-center gap-2 text-lg",children:[d.jsx("span",{className:"text-2xl",children:A.emoji}),A.label,d.jsxs("span",{className:"text-sm text-gray-300 font-normal ml-auto",children:[A.items.filter(w=>w.checked).length,"/",A.items.length]})]}),d.jsx("div",{className:"space-y-2",children:A.items.map(w=>d.jsxs("div",{className:Ee("flex items-center gap-3 p-3 rounded-lg transition-all duration-200 group",w.checked?"bg-slate-600/30":"bg-slate-600/50 hover:bg-slate-500/50"),children:[d.jsx("button",{onClick:()=>C(w.id),"data-test-id":`toggle-item-${w.id}`,"aria-label":w.checked?"Als nicht gekauft markieren":"Als gekauft markieren",className:"flex-shrink-0 transition-transform hover:scale-110",children:w.checked?d.jsx(Vx,{className:"h-6 w-6 text-accent-500"}):d.jsx(jx,{className:"h-6 w-6 text-gray-300"})}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("p",{className:Ee("font-medium",w.checked?"line-through text-gray-400":"text-white"),children:w.name}),w.quantity&&d.jsx("p",{className:Ee("text-sm",w.checked?"text-gray-400":"text-gray-200"),children:w.quantity})]}),d.jsx("button",{onClick:()=>V(w.id),"data-test-id":`delete-item-${w.id}`,"aria-label":`${w.name} löschen`,className:"flex-shrink-0 p-2 rounded-lg opacity-0 group-hover:opacity-100 transition-opacity hover:bg-red-100 text-red-500",children:d.jsx(za,{className:"h-4 w-4"})})]},w.id))})]},A.key))}):d.jsxs("div",{className:"bg-slate-800/80 backdrop-blur-sm rounded-2xl p-12 text-center shadow-lg border border-dark-600/50",children:[d.jsx("div",{className:"text-6xl mb-4",children:"🛒"}),d.jsx("h3",{className:"text-2xl font-bold text-gray-200 mb-2",children:"Deine Einkaufsliste ist leer"}),d.jsx("p",{className:"text-gray-300",children:"Füge Artikel hinzu und sie werden nach Supermarkt-Kategorien sortiert!"})]})]})};function Ek(){const[t,e]=H.useState("home"),[n,r]=H.useState(null),s=o=>{r(o),e("recipes")},i=()=>{r(null)};return d.jsxs("div",{className:"min-h-screen",children:[d.jsx(Xx,{activeTab:t,setActiveTab:e}),d.jsxs("main",{className:"container mx-auto px-4 py-8",children:[t==="home"&&d.jsx(Jx,{onPlatformClick:s}),t==="recipes"&&d.jsx(pk,{platformFilter:n,onClearFilter:i}),t==="planner"&&d.jsx(vk,{}),t==="shopping"&&d.jsx(xk,{})]})]})}zu.createRoot(document.getElementById("root")).render(d.jsx(v1.StrictMode,{children:d.jsx(Ek,{})}));
